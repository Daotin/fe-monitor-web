const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./components-BPZC1Siq.js","./vue-vendor-DZbjFZat.js","./element-plus-ppjtjl3f.js","./lodash-S0Y0Up6J.js","./vendor-C47yNhyI.js","../css/vendor-4ESN5fw-.css","../css/element-plus-Cndv9k3-.css","./store-vendor-BzeCd7_m.js","../css/components-BsYqQ0fx.css","./index-RfCQCa7b.js","./index-CUuj7Ipo.js","./utils-vendor-t--hEgTQ.js","./utils-PfC8a2su.js","./echarts-DsNzUyfI.js","../css/index-CHmzmiP4.css","./index-B75UE5R8.js","../css/index-CI3v1l9d.css","./index-BqxRloyz.js","../css/index-DwWjxkED.css","./index--mPXAYBe.js","../css/index-OjONyQIn.css","./index-ChuomHc0.js","../css/index-DIc0YS3m.css","./index-hanVJnFL.js","../css/index-Ddu6tonx.css","./404-CodHM-Y9.js","../css/404-Xcw2Udb-.css"])))=>i.map(i=>d[i]);
import{aT as b,aU as x,d as I,h as Y,r as O,o as $,aN as N}from"./vue-vendor-DZbjFZat.js";import{E as P,i as C}from"./element-plus-ppjtjl3f.js";import{c as L}from"./store-vendor-BzeCd7_m.js";import{M as m,p as H}from"./vendor-C47yNhyI.js";import{f as y}from"./utils-PfC8a2su.js";import"./lodash-S0Y0Up6J.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function c(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=c(t);fetch(t.href,o)}})();const A="modulepreload",U=function(r,n){return new URL(r,n).href},S={},k=function(n,c,a){let t=Promise.resolve();if(c&&c.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),p=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));t=Promise.allSettled(c.map(l=>{if(l=U(l,a),l in S)return;S[l]=!0;const g=l.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(!!a)for(let M=i.length-1;M>=0;M--){const _=i[M];if(_.href===l&&(!g||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${v}`))return;const h=document.createElement("link");if(h.rel=g?"stylesheet":A,g||(h.as="script"),h.crossOrigin="",h.href=l,p&&h.setAttribute("nonce",p),document.head.appendChild(h),g)return new Promise((M,_)=>{h.addEventListener("load",M),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return t.then(i=>{for(const s of i||[])s.status==="rejected"&&o(s.reason);return n().catch(o)})},j=[{path:"/",redirect:"/dashboard"},{path:"/",name:"Layout",component:()=>k(()=>import("./components-BPZC1Siq.js").then(r=>r.L),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url),children:[{path:"/dashboard",name:"Dashboard",component:()=>k(()=>import("./index-RfCQCa7b.js"),__vite__mapDeps([9,0,1,2,3,4,5,6,7,8,10,11,12,13,14]),import.meta.url),meta:{title:"概览",icon:"DataLine"}},{path:"/error",name:"Error",component:()=>k(()=>import("./index-B75UE5R8.js"),__vite__mapDeps([15,0,1,2,3,4,5,6,7,8,10,11,12,16]),import.meta.url),meta:{title:"错误监控",icon:"Warning"}},{path:"/performance",name:"Performance",component:()=>k(()=>import("./index-BqxRloyz.js"),__vite__mapDeps([17,0,1,2,3,4,5,6,7,8,10,11,12,18]),import.meta.url),meta:{title:"性能概览",icon:"TrendCharts"}},{path:"/sourcemap",name:"Sourcemap",component:()=>k(()=>import("./index--mPXAYBe.js"),__vite__mapDeps([19,0,1,2,3,4,5,6,7,8,10,11,20]),import.meta.url),meta:{title:"SourceMap管理",icon:"Upload"}},{path:"/settings",name:"Settings",component:()=>k(()=>import("./index-ChuomHc0.js"),__vite__mapDeps([21,0,1,2,3,4,5,6,7,8,22]),import.meta.url),meta:{title:"设置",icon:"Setting"}},{path:"/demo",name:"Demo",component:()=>k(()=>import("./index-hanVJnFL.js"),__vite__mapDeps([23,4,5,2,1,3,6,0,7,8,12,24]),import.meta.url),meta:{title:"错误采集演示",icon:"Monitor"}}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>k(()=>import("./404-CodHM-Y9.js"),__vite__mapDeps([25,1,0,2,3,4,5,6,7,8,26]),import.meta.url)}],V=b({history:x(),routes:j}),F=L(),z=I({__name:"App",setup(r){return(n,c)=>{const a=O("router-view");return $(),Y(a)}}}),u=m.Random,B=r=>{const n=[],c=new Date;for(let a=r-1;a>=0;a--){const t=new Date;t.setDate(c.getDate()-a),n.push(y(t,"YYYY-MM-DD"))}return n};m.mock(/\/api\/v1\/stats\/summarize/,"get",r=>(console.log("Mock: 请求核心统计指标",r),{pvCount:u.integer(5e3,5e4),uvCount:u.integer(1e3,1e4),jsErrorCount:u.integer(50,500),lcpAvg:u.float(1e3,3e3,0,2)}));m.mock(/\/api\/v1\/stats\/error-trend/,"get",r=>{console.log("Mock: 请求JS错误趋势数据",r);const a=B(7).map(t=>({date:t,count:u.integer(5,100)}));return console.log("Mock error-trend 返回数据:",a),a});m.mock(/\/api\/v1\/stats\/errors/,"get",r=>{console.log("Mock: 请求JS错误列表数据",r);const n=5,c=["TypeError","ReferenceError","SyntaxError","RangeError","URIError"],a=["Cannot read property of undefined","Object is not a function","Unexpected token","Maximum call stack size exceeded","Invalid regular expression","Failed to fetch","Network error","Script error","Out of memory","Uncaught exception"],t=Array.from({length:n},()=>{const o=u.pick(c),i=u.pick(a),s=u.integer(10,1e3),p=u.integer(5,Math.min(s,500));return{fingerprint:u.guid(),message:`${o}: ${i}`,type:o,count:s,userCount:p,firstSeen:y(u.date("yyyy-MM-dd"),"YYYY-MM-DD HH:mm:ss"),lastSeen:y(u.date("yyyy-MM-dd"),"YYYY-MM-DD HH:mm:ss"),sampleEventId:u.guid()}});return t.sort((o,i)=>i.count-o.count),{items:t,total:u.integer(t.length,100)}});const e=m.Random,R=["TypeError","ReferenceError","SyntaxError","RangeError","URIError","EvalError","InternalError"],W=["Cannot read property '{{property}}' of {{value}}","{{variable}} is not defined","Unexpected token {{token}}","Maximum call stack size exceeded","Invalid regular expression: /{{regex}}/","Failed to fetch resource: {{url}}","Network error when attempting to fetch resource","Script error","Out of memory","Uncaught exception: {{message}}","The operation is insecure",'Permission denied to access property "{{property}}"',"The operation is not supported","Invalid argument","Object doesn't support property or method '{{method}}'"],q=["Chrome","Firefox","Safari","Edge","IE","Opera"],J=["Windows","MacOS","Linux","iOS","Android"],K=["Desktop","Mobile","Tablet"],w=["https://example.com/","https://example.com/login","https://example.com/dashboard","https://example.com/profile","https://example.com/settings","https://example.com/products","https://example.com/cart","https://example.com/checkout"],T=()=>e.pick(W).replace("{{property}}",e.word()).replace("{{value}}",e.pick(["undefined","null","NaN","{}","[]"])).replace("{{variable}}",e.word()).replace("{{token}}",e.pick([")","}","]",",",".",":",";"])).replace("{{regex}}",e.pick(["[","(","*","+","?","{"])).replace("{{url}}",e.url()).replace("{{message}}",e.sentence(3,8)).replace("{{method}}",e.word()),G=(r,n,c)=>{var o;const a=e.integer(3,8);let t=`${r}: ${n}
`;for(let i=0;i<a;i++){const s=i===0?!1:e.boolean(),p=s?`${(o=c.split("/").pop())==null?void 0:o.split(".")[0]}.min.js`:`${e.word()}.js`,l=s?e.string("lower",1,3):e.word(3,10),g=e.integer(1,5e3),v=e.integer(1,500);t+=`    at ${l} (${c.replace(/\/$/,"")}/${p}:${g}:${v})
`}return t},Q=r=>{const n=r.split(`
`),c=[];for(let a=1;a<n.length;a++){const t=n[a].trim();if(!t)continue;const o=t.match(/at\s+(.*?)\s+\((.*?):(\d+):(\d+)\)/);o&&c.push({func:o[1],file:o[2],line:parseInt(o[3]),column:parseInt(o[4])})}return c},X=()=>{const r=["click","input","navigation","api","pageview","scroll","resize","keypress"],n=e.integer(5,15),c=new Date().getTime(),a=[];for(let t=0;t<n;t++){const o=e.pick(r),i=c-(n-t)*e.integer(1e3,5e3);let s={type:o,timestamp:i};switch(o){case"click":s.element=e.pick(["button","a","div","span","img"]),s.text=e.sentence(1,3),s.position={x:e.integer(0,1e3),y:e.integer(0,800)};break;case"input":s.element="input",s.value="[MASKED]";break;case"navigation":s.from=e.pick(w),s.to=e.pick(w);break;case"api":s.method=e.pick(["GET","POST","PUT","DELETE"]),s.url=`/api/${e.word()}`,s.status=e.pick([200,201,400,401,403,404,500]);break;case"pageview":s.url=e.pick(w),s.title=e.sentence(2,5);break;case"scroll":s.position={x:e.integer(0,100),y:e.integer(0,1e3)};break}a.push(s)}return a},Z=()=>{const r=e.integer(50,200),n=new Date().getTime(),c=[];for(let a=0;a<r;a++){const t=n-(r-a)*e.integer(50,200);c.push({type:e.integer(0,5),data:{},timestamp:t})}return c},ee=r=>{const n=e.pick(R),c=T(),a=e.pick(w),t=G(n,c,a),o=Q(t),i=X(),s=e.boolean(.7)?Z():void 0;return{id:r,appId:"demo-app",userId:`user-${e.integer(1e3,9999)}`,type:"error",subType:"jsError",timestamp:y(e.date("yyyy-MM-dd HH:mm:ss"),"YYYY-MM-DD HH:mm:ss"),payload:{message:c,stack:t,parsedStack:o,meta:{url:a,browser:`${e.pick(q)} ${e.integer(70,120)}`,os:`${e.pick(J)} ${e.integer(10,15)}.${e.integer(0,9)}`,device:e.pick(K),screenSize:`${e.integer(1024,3840)}x${e.integer(768,2160)}`,language:e.pick(["en-US","zh-CN","es-ES","fr-FR","de-DE"]),userAgent:e.sentence(10,20)},behaviorStack:i,rrwebData:s},createdAt:y(e.date("yyyy-MM-dd HH:mm:ss"),"YYYY-MM-DD HH:mm:ss")}},te=(r,n,c)=>{const t=[];for(let o=0;o<n&&!((r-1)*n+o>=100);o++){const s=e.pick(R),p=T(),l=e.integer(10,1e3),g=e.integer(5,Math.min(l,500)),v=y(e.date("yyyy-MM-dd"),"YYYY-MM-DD HH:mm:ss"),D=y(e.date("yyyy-MM-dd"),"YYYY-MM-DD HH:mm:ss"),h=e.guid();t.push({fingerprint:e.guid(),message:`${s}: ${p}`,type:s,count:l,userCount:g,firstSeen:v,lastSeen:D,sampleEventId:h})}{const[o,i]=c.split("_");t.sort((s,p)=>{let l=0;switch(o){case"count":l=s.count-p.count;break;case"userCount":l=s.userCount-p.userCount;break;case"firstSeen":l=new Date(s.firstSeen).getTime()-new Date(p.firstSeen).getTime();break;case"lastSeen":l=new Date(s.lastSeen).getTime()-new Date(p.lastSeen).getTime();break}return i==="desc"?-l:l})}return{items:t,total:100,page:r,limit:n}};m.mock(/\/api\/v1\/stats\/errors/,"get",r=>{console.log("Mock: 请求JS错误列表数据",r);const n=new URL(r.url,"http://localhost"),c=parseInt(n.searchParams.get("page")||"1"),a=parseInt(n.searchParams.get("limit")||"20"),t=n.searchParams.get("sortBy")||"lastSeen_desc",o=te(c,a,t);return console.log(`Mock: 返回${o.items.length}条错误数据，总数${o.total}`),o});m.mock(/\/api\/v1\/events\/.*/,"get",r=>{console.log("Mock: 请求错误详情数据",r);const n=r.url.match(/\/events\/([^/?]+)/),c=n?n[1]:"unknown",a=ee(c);return console.log("Mock: 返回错误详情数据",c),a});const d=m.Random;m.mock(/\/api\/v1\/performance\/summary/,"get",r=>(console.log("Mock: 请求性能指标概览数据",r),{lcp:{avg:d.float(1500,3e3,0,2),p75:d.float(2e3,4e3,0,2)},fcp:{avg:d.float(500,1500,0,2),p75:d.float(800,2e3,0,2)}}));m.mock(/\/api\/v1\/performance\/slow-pages/,"get",r=>{console.log("Mock: 请求慢页面列表数据",r);const n=new URL(r.url,"http://localhost"),c=n.searchParams.get("metric")||"lcp",a=parseInt(n.searchParams.get("limit")||"5"),t=["/user/profile","/product/detail/123","/checkout","/cart","/search?q=product","/category/electronics","/blog/article/10","/account/settings","/order/history","/wishlist"],o=[];for(let i=0;i<a;i++){const s=t[i%t.length];let p;c==="lcp"?p=d.float(2e3,6e3,0,2):p=d.float(800,3e3,0,2),o.push({url:s,value:p})}return o.sort((i,s)=>s.value-i.value),o});m.mock(/\/api\/v1\/performance\/resource-errors/,"get",r=>{console.log("Mock: 请求资源加载错误列表数据",r);const n=new URL(r.url,"http://localhost"),c=parseInt(n.searchParams.get("limit")||"20"),a=["https://cdn.example.com/js/main.{hash}.js","https://cdn.example.com/css/styles.{hash}.css","https://cdn.example.com/images/banner.{hash}.png","https://api.example.com/data","https://fonts.googleapis.com/css?family=Roboto","https://analytics.example.com/tracker.js","https://maps.example.com/api.js","https://video.example.com/player.js","https://ads.example.com/display.js","https://cdn.example.com/vendor.{hash}.js"],t=["404 Not Found","net::ERR_CONNECTION_REFUSED","net::ERR_CONNECTION_TIMED_OUT","net::ERR_NAME_NOT_RESOLVED","net::ERR_ABORTED","net::ERR_INTERNET_DISCONNECTED","net::ERR_CERT_COMMON_NAME_INVALID","net::ERR_FAILED"],o=["script","link","img","video","audio","iframe"],i=[];for(let s=0;s<c;s++){const p=d.pick(a),l=d.string("lower",8),g=p.replace("{hash}",l);i.push({eventId:d.guid(),url:g,type:d.pick(t),tagName:d.pick(o),status:d.boolean(.7)?d.pick([404,500,502,503]):null,timestamp:y(d.date("yyyy-MM-dd HH:mm:ss"),"YYYY-MM-DD HH:mm:ss")})}return i});const f=m.Random;m.mock(/\/api\/v1\/sourcemaps/,"get",r=>{console.log("Mock: 请求SourceMap文件列表",r);const c=new URL(r.url,"http://localhost").searchParams.get("appId")||"demo-app",a=f.integer(3,10),t=[];for(let o=0;o<a;o++){const i=`${f.integer(1,9)}.${f.integer(0,9)}.${f.integer(0,9)}`,s=f.string("lower",8);t.push({id:f.guid(),appId:c,fileName:`main.${s}.js.map`,originalFileName:`main.${s}.js`,version:i,size:f.integer(5e5,5e6),uploadTime:y(f.date("yyyy-MM-dd HH:mm:ss"),"YYYY-MM-DD HH:mm:ss"),status:f.pick(["active","inactive"])})}return t.sort((o,i)=>new Date(i.uploadTime).getTime()-new Date(o.uploadTime).getTime()),t});m.mock(/\/api\/v1\/sourcemaps\/upload/,"post",r=>(console.log("Mock: 上传SourceMap文件",r),{success:!0,id:f.guid(),fileName:r.body&&JSON.parse(r.body).fileName||"unknown.js.map",uploadTime:y(new Date,"YYYY-MM-DD HH:mm:ss")}));m.mock(/\/api\/v1\/sourcemaps\/\w+/,"delete",r=>{console.log("Mock: 删除SourceMap文件",r);const n=r.url.match(/\/sourcemaps\/([^/?]+)/);return{success:!0,id:n?n[1]:"unknown"}});m.setup({timeout:"300-600"});console.log("Mock服务已启动");const E=N(z);window.monitor=new H({appId:"your-app-id",userId:"daotin",reportUrl:"https://your-server.com/report",plugins:["jsError","resourceError","frameworkError","httpError","behaviorStack","pageChange","click","rrweb"],sampling:1,maxQueueSize:100,pluginsConfig:{frameworkError:{Vue:E,version:3},rrweb:{recordMode:"error",maxRecordingTime:3e4,maskAllInputs:!0},behaviorStack:{maxStackSize:10,reportWithError:!0}}});window.monitor.init();for(const[r,n]of Object.entries(P))E.component(r,n);E.use(C);E.use(V);E.use(F);E.mount("#app");console.log("前端监控数据大屏应用已启动");export{k as _};
//# sourceMappingURL=index-NbCe1alw.js.map
