{"version":3,"file":"echarts-DsNzUyfI.js","sources":["../../../node_modules/zrender/lib/core/env.js","../../../node_modules/zrender/lib/core/platform.js","../../../node_modules/zrender/lib/core/util.js","../../../node_modules/zrender/lib/core/vector.js","../../../node_modules/zrender/lib/mixin/Draggable.js","../../../node_modules/zrender/lib/core/Eventful.js","../../../node_modules/zrender/lib/core/fourPointsTransform.js","../../../node_modules/zrender/lib/core/dom.js","../../../node_modules/zrender/lib/core/event.js","../../../node_modules/zrender/lib/core/GestureMgr.js","../../../node_modules/zrender/lib/core/matrix.js","../../../node_modules/zrender/lib/core/Point.js","../../../node_modules/zrender/lib/core/BoundingRect.js","../../../node_modules/zrender/lib/Handler.js","../../../node_modules/zrender/lib/core/timsort.js","../../../node_modules/zrender/lib/graphic/constants.js","../../../node_modules/zrender/lib/Storage.js","../../../node_modules/zrender/lib/animation/requestAnimationFrame.js","../../../node_modules/zrender/lib/animation/easing.js","../../../node_modules/zrender/lib/core/curve.js","../../../node_modules/zrender/lib/animation/cubicEasing.js","../../../node_modules/zrender/lib/animation/Clip.js","../../../node_modules/zrender/lib/core/LRU.js","../../../node_modules/zrender/lib/tool/color.js","../../../node_modules/zrender/lib/svg/helper.js","../../../node_modules/zrender/lib/animation/Animator.js","../../../node_modules/zrender/lib/animation/Animation.js","../../../node_modules/zrender/lib/dom/HandlerProxy.js","../../../node_modules/zrender/lib/config.js","../../../node_modules/zrender/lib/core/Transformable.js","../../../node_modules/zrender/lib/contain/text.js","../../../node_modules/zrender/lib/Element.js","../../../node_modules/zrender/lib/graphic/Group.js","../../../node_modules/zrender/lib/zrender.js","../../../node_modules/echarts/lib/util/number.js","../../../node_modules/echarts/lib/util/log.js","../../../node_modules/echarts/lib/util/model.js","../../../node_modules/echarts/lib/util/clazz.js","../../../node_modules/echarts/lib/model/mixin/makeStyleMapper.js","../../../node_modules/echarts/lib/model/mixin/areaStyle.js","../../../node_modules/zrender/lib/graphic/helper/image.js","../../../node_modules/zrender/lib/graphic/helper/parseText.js","../../../node_modules/zrender/lib/graphic/Displayable.js","../../../node_modules/zrender/lib/core/bbox.js","../../../node_modules/zrender/lib/core/PathProxy.js","../../../node_modules/zrender/lib/contain/line.js","../../../node_modules/zrender/lib/contain/cubic.js","../../../node_modules/zrender/lib/contain/quadratic.js","../../../node_modules/zrender/lib/contain/util.js","../../../node_modules/zrender/lib/contain/arc.js","../../../node_modules/zrender/lib/contain/windingLine.js","../../../node_modules/zrender/lib/contain/path.js","../../../node_modules/zrender/lib/graphic/Path.js","../../../node_modules/zrender/lib/graphic/TSpan.js","../../../node_modules/zrender/lib/graphic/Image.js","../../../node_modules/zrender/lib/graphic/helper/roundRect.js","../../../node_modules/zrender/lib/graphic/helper/subPixelOptimize.js","../../../node_modules/zrender/lib/graphic/shape/Rect.js","../../../node_modules/zrender/lib/graphic/Text.js","../../../node_modules/echarts/lib/util/innerStore.js","../../../node_modules/echarts/lib/util/states.js","../../../node_modules/zrender/lib/tool/transformPath.js","../../../node_modules/zrender/lib/tool/path.js","../../../node_modules/zrender/lib/graphic/shape/Circle.js","../../../node_modules/zrender/lib/graphic/shape/Ellipse.js","../../../node_modules/zrender/lib/graphic/helper/roundSector.js","../../../node_modules/zrender/lib/graphic/shape/Sector.js","../../../node_modules/zrender/lib/graphic/shape/Ring.js","../../../node_modules/zrender/lib/graphic/helper/smoothBezier.js","../../../node_modules/zrender/lib/graphic/helper/poly.js","../../../node_modules/zrender/lib/graphic/shape/Polygon.js","../../../node_modules/zrender/lib/graphic/shape/Polyline.js","../../../node_modules/zrender/lib/graphic/shape/Line.js","../../../node_modules/zrender/lib/graphic/shape/BezierCurve.js","../../../node_modules/zrender/lib/graphic/shape/Arc.js","../../../node_modules/zrender/lib/graphic/CompoundPath.js","../../../node_modules/zrender/lib/graphic/Gradient.js","../../../node_modules/zrender/lib/graphic/LinearGradient.js","../../../node_modules/zrender/lib/graphic/RadialGradient.js","../../../node_modules/zrender/lib/core/OrientedBoundingRect.js","../../../node_modules/zrender/lib/graphic/IncrementalDisplayable.js","../../../node_modules/echarts/lib/animation/basicTransition.js","../../../node_modules/echarts/lib/util/graphic.js","../../../node_modules/echarts/lib/label/labelStyle.js","../../../node_modules/echarts/lib/model/mixin/textStyle.js","../../../node_modules/echarts/lib/model/mixin/lineStyle.js","../../../node_modules/echarts/lib/model/mixin/itemStyle.js","../../../node_modules/echarts/lib/model/Model.js","../../../node_modules/echarts/lib/util/component.js","../../../node_modules/echarts/lib/i18n/langEN.js","../../../node_modules/echarts/lib/i18n/langZH.js","../../../node_modules/echarts/lib/core/locale.js","../../../node_modules/echarts/lib/util/time.js","../../../node_modules/echarts/lib/util/format.js","../../../node_modules/echarts/lib/util/layout.js","../../../node_modules/echarts/lib/model/Component.js","../../../node_modules/echarts/lib/model/globalDefault.js","../../../node_modules/echarts/lib/util/types.js","../../../node_modules/echarts/lib/data/helper/sourceHelper.js","../../../node_modules/echarts/lib/model/internalComponentCreator.js","../../../node_modules/echarts/lib/model/mixin/palette.js","../../../node_modules/echarts/lib/model/Global.js","../../../node_modules/echarts/lib/core/ExtensionAPI.js","../../../node_modules/echarts/lib/core/CoordinateSystem.js","../../../node_modules/echarts/lib/model/OptionManager.js","../../../node_modules/echarts/lib/preprocessor/helper/compatStyle.js","../../../node_modules/echarts/lib/preprocessor/backwardCompat.js","../../../node_modules/echarts/lib/processor/dataStack.js","../../../node_modules/echarts/lib/data/Source.js","../../../node_modules/echarts/lib/data/helper/dataProvider.js","../../../node_modules/echarts/lib/model/mixin/dataFormat.js","../../../node_modules/echarts/lib/core/task.js","../../../node_modules/echarts/lib/data/helper/dataValueHelper.js","../../../node_modules/echarts/lib/data/helper/transform.js","../../../node_modules/echarts/lib/data/DataStore.js","../../../node_modules/echarts/lib/data/helper/sourceManager.js","../../../node_modules/echarts/lib/component/tooltip/tooltipMarkup.js","../../../node_modules/echarts/lib/component/tooltip/seriesFormatTooltip.js","../../../node_modules/echarts/lib/model/Series.js","../../../node_modules/echarts/lib/view/Component.js","../../../node_modules/echarts/lib/chart/helper/createRenderPlanner.js","../../../node_modules/echarts/lib/view/Chart.js","../../../node_modules/echarts/lib/util/throttle.js","../../../node_modules/echarts/lib/visual/style.js","../../../node_modules/echarts/lib/loading/default.js","../../../node_modules/echarts/lib/core/Scheduler.js","../../../node_modules/echarts/lib/theme/light.js","../../../node_modules/echarts/lib/theme/dark.js","../../../node_modules/echarts/lib/util/ECEventProcessor.js","../../../node_modules/echarts/lib/visual/symbol.js","../../../node_modules/echarts/lib/visual/helper.js","../../../node_modules/echarts/lib/legacy/dataSelectAction.js","../../../node_modules/echarts/lib/util/event.js","../../../node_modules/zrender/lib/core/WeakMap.js","../../../node_modules/echarts/lib/util/symbol.js","../../../node_modules/zrender/lib/canvas/helper.js","../../../node_modules/zrender/lib/canvas/dashStyle.js","../../../node_modules/zrender/lib/canvas/graphic.js","../../../node_modules/echarts/lib/util/decal.js","../../../node_modules/echarts/lib/visual/decal.js","../../../node_modules/echarts/lib/core/lifecycle.js","../../../node_modules/echarts/lib/core/impl.js","../../../node_modules/echarts/lib/core/echarts.js","../../../node_modules/echarts/lib/data/DataDiffer.js","../../../node_modules/echarts/lib/data/helper/dimensionHelper.js","../../../node_modules/echarts/lib/data/SeriesDimensionDefine.js","../../../node_modules/echarts/lib/data/helper/SeriesDataSchema.js","../../../node_modules/echarts/lib/data/SeriesData.js","../../../node_modules/echarts/lib/data/helper/createDimensions.js","../../../node_modules/echarts/lib/model/referHelper.js","../../../node_modules/echarts/lib/data/helper/dataStackHelper.js","../../../node_modules/echarts/lib/chart/helper/createSeriesData.js","../../../node_modules/echarts/lib/scale/Scale.js","../../../node_modules/echarts/lib/data/OrdinalMeta.js","../../../node_modules/echarts/lib/scale/helper.js","../../../node_modules/echarts/lib/scale/Ordinal.js","../../../node_modules/echarts/lib/scale/Interval.js","../../../node_modules/echarts/lib/util/vendor.js","../../../node_modules/echarts/lib/layout/barGrid.js","../../../node_modules/echarts/lib/scale/Time.js","../../../node_modules/echarts/lib/scale/Log.js","../../../node_modules/echarts/lib/coord/scaleRawExtentInfo.js","../../../node_modules/echarts/lib/coord/axisHelper.js","../../../node_modules/echarts/lib/coord/axisModelCommonMixin.js","../../../node_modules/echarts/lib/extension.js","../../../node_modules/echarts/lib/coord/axisTickLabelBuilder.js","../../../node_modules/echarts/lib/coord/Axis.js","../../../node_modules/echarts/lib/label/labelLayoutHelper.js","../../../node_modules/echarts/lib/chart/line/LineSeries.js","../../../node_modules/echarts/lib/chart/helper/labelHelper.js","../../../node_modules/echarts/lib/chart/helper/Symbol.js","../../../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../../../node_modules/echarts/lib/chart/line/helper.js","../../../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../../../node_modules/echarts/lib/chart/line/poly.js","../../../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../../../node_modules/echarts/lib/coord/CoordinateSystem.js","../../../node_modules/echarts/lib/chart/line/LineView.js","../../../node_modules/echarts/lib/layout/points.js","../../../node_modules/echarts/lib/processor/dataSample.js","../../../node_modules/echarts/lib/chart/line/install.js","../../../node_modules/echarts/lib/coord/cartesian/GridModel.js","../../../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../../../node_modules/echarts/lib/coord/axisDefault.js","../../../node_modules/echarts/lib/coord/axisCommonTypes.js","../../../node_modules/echarts/lib/coord/axisModelCreator.js","../../../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../../../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../../../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../../../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../../../node_modules/echarts/lib/coord/axisAlignTicks.js","../../../node_modules/echarts/lib/coord/cartesian/Grid.js","../../../node_modules/echarts/lib/component/axis/AxisBuilder.js","../../../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../../../node_modules/echarts/lib/component/axis/AxisView.js","../../../node_modules/echarts/lib/component/axis/axisSplitHelper.js","../../../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../../../node_modules/echarts/lib/component/grid/installSimple.js","../../../node_modules/echarts/lib/component/helper/interactionMutex.js","../../../node_modules/echarts/lib/component/helper/RoamController.js","../../../node_modules/echarts/lib/component/helper/cursorHelper.js","../../../node_modules/echarts/lib/component/helper/sliderMove.js","../../../node_modules/echarts/lib/component/helper/BrushController.js","../../../node_modules/echarts/lib/component/helper/brushHelper.js","../../../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../../../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../../../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../../../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../../../node_modules/echarts/lib/component/axisPointer/globalListener.js","../../../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../../../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../../../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../../../node_modules/echarts/lib/component/axisPointer/install.js","../../../node_modules/echarts/lib/component/grid/install.js","../../../node_modules/echarts/lib/component/dataZoom/helper.js","../../../node_modules/echarts/lib/component/dataZoom/DataZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/SelectZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/DataZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/SelectZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/AxisProxy.js","../../../node_modules/echarts/lib/component/dataZoom/dataZoomProcessor.js","../../../node_modules/echarts/lib/component/dataZoom/dataZoomAction.js","../../../node_modules/echarts/lib/component/dataZoom/installCommon.js","../../../node_modules/echarts/lib/component/dataZoom/installDataZoomSelect.js","../../../node_modules/echarts/lib/component/toolbox/featureManager.js","../../../node_modules/echarts/lib/component/toolbox/ToolboxModel.js","../../../node_modules/echarts/lib/component/helper/listComponent.js","../../../node_modules/echarts/lib/component/toolbox/ToolboxView.js","../../../node_modules/echarts/lib/component/toolbox/feature/SaveAsImage.js","../../../node_modules/echarts/lib/component/toolbox/feature/MagicType.js","../../../node_modules/echarts/lib/component/toolbox/feature/DataView.js","../../../node_modules/echarts/lib/component/dataZoom/history.js","../../../node_modules/echarts/lib/component/toolbox/feature/Restore.js","../../../node_modules/echarts/lib/component/helper/BrushTargetManager.js","../../../node_modules/echarts/lib/component/toolbox/feature/DataZoom.js","../../../node_modules/echarts/lib/component/toolbox/install.js","../../../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../../../node_modules/echarts/lib/component/tooltip/helper.js","../../../node_modules/echarts/lib/component/tooltip/TooltipHTMLContent.js","../../../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../../../node_modules/echarts/lib/component/tooltip/TooltipView.js","../../../node_modules/echarts/lib/component/tooltip/install.js","../../../node_modules/echarts/lib/component/title/install.js","../../../node_modules/echarts/lib/component/legend/LegendModel.js","../../../node_modules/echarts/lib/component/legend/LegendView.js","../../../node_modules/echarts/lib/component/legend/legendFilter.js","../../../node_modules/echarts/lib/component/legend/legendAction.js","../../../node_modules/echarts/lib/component/legend/installLegendPlain.js","../../../node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","../../../node_modules/echarts/lib/component/legend/ScrollableLegendView.js","../../../node_modules/echarts/lib/component/legend/scrollableLegendAction.js","../../../node_modules/echarts/lib/component/legend/installLegendScroll.js","../../../node_modules/echarts/lib/component/legend/install.js","../../../node_modules/echarts/lib/component/dataZoom/InsideZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/roams.js","../../../node_modules/echarts/lib/component/dataZoom/InsideZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/installDataZoomInside.js","../../../node_modules/echarts/lib/component/dataZoom/SliderZoomModel.js","../../../node_modules/echarts/lib/component/dataZoom/SliderZoomView.js","../../../node_modules/echarts/lib/component/dataZoom/installDataZoomSlider.js","../../../node_modules/echarts/lib/component/dataZoom/install.js","../../../node_modules/zrender/lib/canvas/Layer.js","../../../node_modules/zrender/lib/canvas/Painter.js","../../../node_modules/echarts/lib/renderer/installCanvasRenderer.js"],"sourcesContent":["var Browser = (function () {\n    function Browser() {\n        this.firefox = false;\n        this.ie = false;\n        this.edge = false;\n        this.newEdge = false;\n        this.weChat = false;\n    }\n    return Browser;\n}());\nvar Env = (function () {\n    function Env() {\n        this.browser = new Browser();\n        this.node = false;\n        this.wxa = false;\n        this.worker = false;\n        this.svgSupported = false;\n        this.touchEventsSupported = false;\n        this.pointerEventsSupported = false;\n        this.domSupported = false;\n        this.transformSupported = false;\n        this.transform3dSupported = false;\n        this.hasGlobalWindow = typeof window !== 'undefined';\n    }\n    return Env;\n}());\nvar env = new Env();\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n    env.wxa = true;\n    env.touchEventsSupported = true;\n}\nelse if (typeof document === 'undefined' && typeof self !== 'undefined') {\n    env.worker = true;\n}\nelse if (!env.hasGlobalWindow || 'Deno' in window) {\n    env.node = true;\n    env.svgSupported = true;\n}\nelse {\n    detect(navigator.userAgent, env);\n}\nfunction detect(ua, env) {\n    var browser = env.browser;\n    var firefox = ua.match(/Firefox\\/([\\d.]+)/);\n    var ie = ua.match(/MSIE\\s([\\d.]+)/)\n        || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n    var edge = ua.match(/Edge?\\/([\\d.]+)/);\n    var weChat = (/micromessenger/i).test(ua);\n    if (firefox) {\n        browser.firefox = true;\n        browser.version = firefox[1];\n    }\n    if (ie) {\n        browser.ie = true;\n        browser.version = ie[1];\n    }\n    if (edge) {\n        browser.edge = true;\n        browser.version = edge[1];\n        browser.newEdge = +edge[1].split('.')[0] > 18;\n    }\n    if (weChat) {\n        browser.weChat = true;\n    }\n    env.svgSupported = typeof SVGRect !== 'undefined';\n    env.touchEventsSupported = 'ontouchstart' in window && !browser.ie && !browser.edge;\n    env.pointerEventsSupported = 'onpointerdown' in window\n        && (browser.edge || (browser.ie && +browser.version >= 11));\n    env.domSupported = typeof document !== 'undefined';\n    var style = document.documentElement.style;\n    env.transform3dSupported = ((browser.ie && 'transition' in style)\n        || browser.edge\n        || (('WebKitCSSMatrix' in window) && ('m11' in new WebKitCSSMatrix()))\n        || 'MozPerspective' in style)\n        && !('OTransition' in style);\n    env.transformSupported = env.transform3dSupported\n        || (browser.ie && +browser.version >= 9);\n}\nexport default env;\n","export var DEFAULT_FONT_SIZE = 12;\nexport var DEFAULT_FONT_FAMILY = 'sans-serif';\nexport var DEFAULT_FONT = DEFAULT_FONT_SIZE + \"px \" + DEFAULT_FONT_FAMILY;\nvar OFFSET = 20;\nvar SCALE = 100;\nvar defaultWidthMapStr = \"007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\\\\\WQb\\\\0FWLg\\\\bWb\\\\WQ\\\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\\\FFF5.5N\";\nfunction getTextWidthMap(mapStr) {\n    var map = {};\n    if (typeof JSON === 'undefined') {\n        return map;\n    }\n    for (var i = 0; i < mapStr.length; i++) {\n        var char = String.fromCharCode(i + 32);\n        var size = (mapStr.charCodeAt(i) - OFFSET) / SCALE;\n        map[char] = size;\n    }\n    return map;\n}\nexport var DEFAULT_TEXT_WIDTH_MAP = getTextWidthMap(defaultWidthMapStr);\nexport var platformApi = {\n    createCanvas: function () {\n        return typeof document !== 'undefined'\n            && document.createElement('canvas');\n    },\n    measureText: (function () {\n        var _ctx;\n        var _cachedFont;\n        return function (text, font) {\n            if (!_ctx) {\n                var canvas = platformApi.createCanvas();\n                _ctx = canvas && canvas.getContext('2d');\n            }\n            if (_ctx) {\n                if (_cachedFont !== font) {\n                    _cachedFont = _ctx.font = font || DEFAULT_FONT;\n                }\n                return _ctx.measureText(text);\n            }\n            else {\n                text = text || '';\n                font = font || DEFAULT_FONT;\n                var res = /((?:\\d+)?\\.?\\d*)px/.exec(font);\n                var fontSize = res && +res[1] || DEFAULT_FONT_SIZE;\n                var width = 0;\n                if (font.indexOf('mono') >= 0) {\n                    width = fontSize * text.length;\n                }\n                else {\n                    for (var i = 0; i < text.length; i++) {\n                        var preCalcWidth = DEFAULT_TEXT_WIDTH_MAP[text[i]];\n                        width += preCalcWidth == null ? fontSize : (preCalcWidth * fontSize);\n                    }\n                }\n                return { width: width };\n            }\n        };\n    })(),\n    loadImage: function (src, onload, onerror) {\n        var image = new Image();\n        image.onload = onload;\n        image.onerror = onerror;\n        image.src = src;\n        return image;\n    }\n};\nexport function setPlatformAPI(newPlatformApis) {\n    for (var key in platformApi) {\n        if (newPlatformApis[key]) {\n            platformApi[key] = newPlatformApis[key];\n        }\n    }\n}\n","import { platformApi } from './platform.js';\nvar BUILTIN_OBJECT = reduce([\n    'Function',\n    'RegExp',\n    'Date',\n    'Error',\n    'CanvasGradient',\n    'CanvasPattern',\n    'Image',\n    'Canvas'\n], function (obj, val) {\n    obj['[object ' + val + ']'] = true;\n    return obj;\n}, {});\nvar TYPED_ARRAY = reduce([\n    'Int8',\n    'Uint8',\n    'Uint8Clamped',\n    'Int16',\n    'Uint16',\n    'Int32',\n    'Uint32',\n    'Float32',\n    'Float64'\n], function (obj, val) {\n    obj['[object ' + val + 'Array]'] = true;\n    return obj;\n}, {});\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar ctorFunction = function () { }.constructor;\nvar protoFunction = ctorFunction ? ctorFunction.prototype : null;\nvar protoKey = '__proto__';\nvar idStart = 0x0907;\nexport function guid() {\n    return idStart++;\n}\nexport function logError() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    if (typeof console !== 'undefined') {\n        console.error.apply(console, args);\n    }\n}\nexport function clone(source) {\n    if (source == null || typeof source !== 'object') {\n        return source;\n    }\n    var result = source;\n    var typeStr = objToString.call(source);\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (Ctor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = source[i];\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n    return result;\n}\nexport function merge(target, source, overwrite) {\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key) && key !== protoKey) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)) {\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                target[key] = clone(source[key]);\n            }\n        }\n    }\n    return target;\n}\nexport function mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\nexport function extend(target, source) {\n    if (Object.assign) {\n        Object.assign(target, source);\n    }\n    else {\n        for (var key in source) {\n            if (source.hasOwnProperty(key) && key !== protoKey) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexport function defaults(target, source, overlay) {\n    var keysArr = keys(source);\n    for (var i = 0, len = keysArr.length; i < len; i++) {\n        var key = keysArr[i];\n        if ((overlay ? source[key] != null : target[key] == null)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\nexport var createCanvas = platformApi.createCanvas;\nexport function indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\nexport function inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() { }\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n    for (var prop in clazzPrototype) {\n        if (clazzPrototype.hasOwnProperty(prop)) {\n            clazz.prototype[prop] = clazzPrototype[prop];\n        }\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\nexport function mixin(target, source, override) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n    if (Object.getOwnPropertyNames) {\n        var keyList = Object.getOwnPropertyNames(source);\n        for (var i = 0; i < keyList.length; i++) {\n            var key = keyList[i];\n            if (key !== 'constructor') {\n                if ((override ? source[key] != null : target[key] == null)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n    }\n    else {\n        defaults(target, source, override);\n    }\n}\nexport function isArrayLike(data) {\n    if (!data) {\n        return false;\n    }\n    if (typeof data === 'string') {\n        return false;\n    }\n    return typeof data.length === 'number';\n}\nexport function each(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    if (arr.forEach && arr.forEach === nativeForEach) {\n        arr.forEach(cb, context);\n    }\n    else if (arr.length === +arr.length) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            cb.call(context, arr[i], i, arr);\n        }\n    }\n    else {\n        for (var key in arr) {\n            if (arr.hasOwnProperty(key)) {\n                cb.call(context, arr[key], key, arr);\n            }\n        }\n    }\n}\nexport function map(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.map && arr.map === nativeMap) {\n        return arr.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            result.push(cb.call(context, arr[i], i, arr));\n        }\n        return result;\n    }\n}\nexport function reduce(arr, cb, memo, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        memo = cb.call(context, memo, arr[i], i, arr);\n    }\n    return memo;\n}\nexport function filter(arr, cb, context) {\n    if (!arr) {\n        return [];\n    }\n    if (!cb) {\n        return slice(arr);\n    }\n    if (arr.filter && arr.filter === nativeFilter) {\n        return arr.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = arr.length; i < len; i++) {\n            if (cb.call(context, arr[i], i, arr)) {\n                result.push(arr[i]);\n            }\n        }\n        return result;\n    }\n}\nexport function find(arr, cb, context) {\n    if (!(arr && cb)) {\n        return;\n    }\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (cb.call(context, arr[i], i, arr)) {\n            return arr[i];\n        }\n    }\n}\nexport function keys(obj) {\n    if (!obj) {\n        return [];\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keyList = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            keyList.push(key);\n        }\n    }\n    return keyList;\n}\nfunction bindPolyfill(func, context) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport var bind = (protoFunction && isFunction(protoFunction.bind))\n    ? protoFunction.call.bind(protoFunction.bind)\n    : bindPolyfill;\nfunction curry(func) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\nexport { curry };\nexport function isArray(value) {\n    if (Array.isArray) {\n        return Array.isArray(value);\n    }\n    return objToString.call(value) === '[object Array]';\n}\nexport function isFunction(value) {\n    return typeof value === 'function';\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\nexport function isStringSafe(value) {\n    return objToString.call(value) === '[object String]';\n}\nexport function isNumber(value) {\n    return typeof value === 'number';\n}\nexport function isObject(value) {\n    var type = typeof value;\n    return type === 'function' || (!!value && type === 'object');\n}\nexport function isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\nexport function isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\nexport function isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\nexport function isGradientObject(value) {\n    return value.colorStops != null;\n}\nexport function isImagePatternObject(value) {\n    return value.image != null;\n}\nexport function isRegExp(value) {\n    return objToString.call(value) === '[object RegExp]';\n}\nexport function eqNaN(value) {\n    return value !== value;\n}\nexport function retrieve() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0, len = args.length; i < len; i++) {\n        if (args[i] != null) {\n            return args[i];\n        }\n    }\n}\nexport function retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\nexport function retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n            ? value1\n            : value2;\n}\nexport function slice(arr) {\n    var args = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        args[_i - 1] = arguments[_i];\n    }\n    return nativeSlice.apply(arr, args);\n}\nexport function normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\nexport function trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\nvar primitiveKey = '__ec_primitive__';\nexport function setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\nexport function isPrimitive(obj) {\n    return obj[primitiveKey];\n}\nvar MapPolyfill = (function () {\n    function MapPolyfill() {\n        this.data = {};\n    }\n    MapPolyfill.prototype[\"delete\"] = function (key) {\n        var existed = this.has(key);\n        if (existed) {\n            delete this.data[key];\n        }\n        return existed;\n    };\n    MapPolyfill.prototype.has = function (key) {\n        return this.data.hasOwnProperty(key);\n    };\n    MapPolyfill.prototype.get = function (key) {\n        return this.data[key];\n    };\n    MapPolyfill.prototype.set = function (key, value) {\n        this.data[key] = value;\n        return this;\n    };\n    MapPolyfill.prototype.keys = function () {\n        return keys(this.data);\n    };\n    MapPolyfill.prototype.forEach = function (callback) {\n        var data = this.data;\n        for (var key in data) {\n            if (data.hasOwnProperty(key)) {\n                callback(data[key], key);\n            }\n        }\n    };\n    return MapPolyfill;\n}());\nvar isNativeMapSupported = typeof Map === 'function';\nfunction maybeNativeMap() {\n    return (isNativeMapSupported ? new Map() : new MapPolyfill());\n}\nvar HashMap = (function () {\n    function HashMap(obj) {\n        var isArr = isArray(obj);\n        this.data = maybeNativeMap();\n        var thisMap = this;\n        (obj instanceof HashMap)\n            ? obj.each(visit)\n            : (obj && each(obj, visit));\n        function visit(value, key) {\n            isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n        }\n    }\n    HashMap.prototype.hasKey = function (key) {\n        return this.data.has(key);\n    };\n    HashMap.prototype.get = function (key) {\n        return this.data.get(key);\n    };\n    HashMap.prototype.set = function (key, value) {\n        this.data.set(key, value);\n        return value;\n    };\n    HashMap.prototype.each = function (cb, context) {\n        this.data.forEach(function (value, key) {\n            cb.call(context, value, key);\n        });\n    };\n    HashMap.prototype.keys = function () {\n        var keys = this.data.keys();\n        return isNativeMapSupported\n            ? Array.from(keys)\n            : keys;\n    };\n    HashMap.prototype.removeKey = function (key) {\n        this.data[\"delete\"](key);\n    };\n    return HashMap;\n}());\nexport { HashMap };\nexport function createHashMap(obj) {\n    return new HashMap(obj);\n}\nexport function concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (var i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\nexport function createObject(proto, properties) {\n    var obj;\n    if (Object.create) {\n        obj = Object.create(proto);\n    }\n    else {\n        var StyleCtor = function () { };\n        StyleCtor.prototype = proto;\n        obj = new StyleCtor();\n    }\n    if (properties) {\n        extend(obj, properties);\n    }\n    return obj;\n}\nexport function disableUserSelect(dom) {\n    var domStyle = dom.style;\n    domStyle.webkitUserSelect = 'none';\n    domStyle.userSelect = 'none';\n    domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n    domStyle['-webkit-touch-callout'] = 'none';\n}\nexport function hasOwn(own, prop) {\n    return own.hasOwnProperty(prop);\n}\nexport function noop() { }\nexport var RADIAN_TO_DEGREE = 180 / Math.PI;\n","export function create(x, y) {\n    if (x == null) {\n        x = 0;\n    }\n    if (y == null) {\n        y = 0;\n    }\n    return [x, y];\n}\nexport function copy(out, v) {\n    out[0] = v[0];\n    out[1] = v[1];\n    return out;\n}\nexport function clone(v) {\n    return [v[0], v[1]];\n}\nexport function set(out, a, b) {\n    out[0] = a;\n    out[1] = b;\n    return out;\n}\nexport function add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\nexport function scaleAndAdd(out, v1, v2, a) {\n    out[0] = v1[0] + v2[0] * a;\n    out[1] = v1[1] + v2[1] * a;\n    return out;\n}\nexport function sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\nexport function len(v) {\n    return Math.sqrt(lenSquare(v));\n}\nexport var length = len;\nexport function lenSquare(v) {\n    return v[0] * v[0] + v[1] * v[1];\n}\nexport var lengthSquare = lenSquare;\nexport function mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    return out;\n}\nexport function div(out, v1, v2) {\n    out[0] = v1[0] / v2[0];\n    out[1] = v1[1] / v2[1];\n    return out;\n}\nexport function dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\nexport function scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    return out;\n}\nexport function normalize(out, v) {\n    var d = len(v);\n    if (d === 0) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    else {\n        out[0] = v[0] / d;\n        out[1] = v[1] / d;\n    }\n    return out;\n}\nexport function distance(v1, v2) {\n    return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\nexport var dist = distance;\nexport function distanceSquare(v1, v2) {\n    return (v1[0] - v2[0]) * (v1[0] - v2[0])\n        + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\nexport var distSquare = distanceSquare;\nexport function negate(out, v) {\n    out[0] = -v[0];\n    out[1] = -v[1];\n    return out;\n}\nexport function lerp(out, v1, v2, t) {\n    out[0] = v1[0] + t * (v2[0] - v1[0]);\n    out[1] = v1[1] + t * (v2[1] - v1[1]);\n    return out;\n}\nexport function applyTransform(out, v, m) {\n    var x = v[0];\n    var y = v[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\nexport function min(out, v1, v2) {\n    out[0] = Math.min(v1[0], v2[0]);\n    out[1] = Math.min(v1[1], v2[1]);\n    return out;\n}\nexport function max(out, v1, v2) {\n    out[0] = Math.max(v1[0], v2[0]);\n    out[1] = Math.max(v1[1], v2[1]);\n    return out;\n}\n","var Param = (function () {\n    function Param(target, e) {\n        this.target = target;\n        this.topTarget = e && e.topTarget;\n    }\n    return Param;\n}());\nvar Draggable = (function () {\n    function Draggable(handler) {\n        this.handler = handler;\n        handler.on('mousedown', this._dragStart, this);\n        handler.on('mousemove', this._drag, this);\n        handler.on('mouseup', this._dragEnd, this);\n    }\n    Draggable.prototype._dragStart = function (e) {\n        var draggingTarget = e.target;\n        while (draggingTarget && !draggingTarget.draggable) {\n            draggingTarget = draggingTarget.parent || draggingTarget.__hostTarget;\n        }\n        if (draggingTarget) {\n            this._draggingTarget = draggingTarget;\n            draggingTarget.dragging = true;\n            this._x = e.offsetX;\n            this._y = e.offsetY;\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragstart', e.event);\n        }\n    };\n    Draggable.prototype._drag = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            var x = e.offsetX;\n            var y = e.offsetY;\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            draggingTarget.drift(dx, dy, e);\n            this.handler.dispatchToElement(new Param(draggingTarget, e), 'drag', e.event);\n            var dropTarget = this.handler.findHover(x, y, draggingTarget).target;\n            var lastDropTarget = this._dropTarget;\n            this._dropTarget = dropTarget;\n            if (draggingTarget !== dropTarget) {\n                if (lastDropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(lastDropTarget, e), 'dragleave', e.event);\n                }\n                if (dropTarget && dropTarget !== lastDropTarget) {\n                    this.handler.dispatchToElement(new Param(dropTarget, e), 'dragenter', e.event);\n                }\n            }\n        }\n    };\n    Draggable.prototype._dragEnd = function (e) {\n        var draggingTarget = this._draggingTarget;\n        if (draggingTarget) {\n            draggingTarget.dragging = false;\n        }\n        this.handler.dispatchToElement(new Param(draggingTarget, e), 'dragend', e.event);\n        if (this._dropTarget) {\n            this.handler.dispatchToElement(new Param(this._dropTarget, e), 'drop', e.event);\n        }\n        this._draggingTarget = null;\n        this._dropTarget = null;\n    };\n    return Draggable;\n}());\nexport default Draggable;\n","var Eventful = (function () {\n    function Eventful(eventProcessors) {\n        if (eventProcessors) {\n            this._$eventProcessor = eventProcessors;\n        }\n    }\n    Eventful.prototype.on = function (event, query, handler, context) {\n        if (!this._$handlers) {\n            this._$handlers = {};\n        }\n        var _h = this._$handlers;\n        if (typeof query === 'function') {\n            context = handler;\n            handler = query;\n            query = null;\n        }\n        if (!handler || !event) {\n            return this;\n        }\n        var eventProcessor = this._$eventProcessor;\n        if (query != null && eventProcessor && eventProcessor.normalizeQuery) {\n            query = eventProcessor.normalizeQuery(query);\n        }\n        if (!_h[event]) {\n            _h[event] = [];\n        }\n        for (var i = 0; i < _h[event].length; i++) {\n            if (_h[event][i].h === handler) {\n                return this;\n            }\n        }\n        var wrap = {\n            h: handler,\n            query: query,\n            ctx: (context || this),\n            callAtLast: handler.zrEventfulCallAtLast\n        };\n        var lastIndex = _h[event].length - 1;\n        var lastWrap = _h[event][lastIndex];\n        (lastWrap && lastWrap.callAtLast)\n            ? _h[event].splice(lastIndex, 0, wrap)\n            : _h[event].push(wrap);\n        return this;\n    };\n    Eventful.prototype.isSilent = function (eventName) {\n        var _h = this._$handlers;\n        return !_h || !_h[eventName] || !_h[eventName].length;\n    };\n    Eventful.prototype.off = function (eventType, handler) {\n        var _h = this._$handlers;\n        if (!_h) {\n            return this;\n        }\n        if (!eventType) {\n            this._$handlers = {};\n            return this;\n        }\n        if (handler) {\n            if (_h[eventType]) {\n                var newList = [];\n                for (var i = 0, l = _h[eventType].length; i < l; i++) {\n                    if (_h[eventType][i].h !== handler) {\n                        newList.push(_h[eventType][i]);\n                    }\n                }\n                _h[eventType] = newList;\n            }\n            if (_h[eventType] && _h[eventType].length === 0) {\n                delete _h[eventType];\n            }\n        }\n        else {\n            delete _h[eventType];\n        }\n        return this;\n    };\n    Eventful.prototype.trigger = function (eventType) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[eventType];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(eventType, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(hItem.ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(hItem.ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(hItem.ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(hItem.ctx, args);\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(eventType);\n        return this;\n    };\n    Eventful.prototype.triggerWithContext = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!this._$handlers) {\n            return this;\n        }\n        var _h = this._$handlers[type];\n        var eventProcessor = this._$eventProcessor;\n        if (_h) {\n            var argLen = args.length;\n            var ctx = args[argLen - 1];\n            var len = _h.length;\n            for (var i = 0; i < len; i++) {\n                var hItem = _h[i];\n                if (eventProcessor\n                    && eventProcessor.filter\n                    && hItem.query != null\n                    && !eventProcessor.filter(type, hItem.query)) {\n                    continue;\n                }\n                switch (argLen) {\n                    case 0:\n                        hItem.h.call(ctx);\n                        break;\n                    case 1:\n                        hItem.h.call(ctx, args[0]);\n                        break;\n                    case 2:\n                        hItem.h.call(ctx, args[0], args[1]);\n                        break;\n                    default:\n                        hItem.h.apply(ctx, args.slice(1, argLen - 1));\n                        break;\n                }\n            }\n        }\n        eventProcessor && eventProcessor.afterTrigger\n            && eventProcessor.afterTrigger(type);\n        return this;\n    };\n    return Eventful;\n}());\nexport default Eventful;\n","var LN2 = Math.log(2);\nfunction determinant(rows, rank, rowStart, rowMask, colMask, detCache) {\n    var cacheKey = rowMask + '-' + colMask;\n    var fullRank = rows.length;\n    if (detCache.hasOwnProperty(cacheKey)) {\n        return detCache[cacheKey];\n    }\n    if (rank === 1) {\n        var colStart = Math.round(Math.log(((1 << fullRank) - 1) & ~colMask) / LN2);\n        return rows[rowStart][colStart];\n    }\n    var subRowMask = rowMask | (1 << rowStart);\n    var subRowStart = rowStart + 1;\n    while (rowMask & (1 << subRowStart)) {\n        subRowStart++;\n    }\n    var sum = 0;\n    for (var j = 0, colLocalIdx = 0; j < fullRank; j++) {\n        var colTag = 1 << j;\n        if (!(colTag & colMask)) {\n            sum += (colLocalIdx % 2 ? -1 : 1) * rows[rowStart][j]\n                * determinant(rows, rank - 1, subRowStart, subRowMask, colMask | colTag, detCache);\n            colLocalIdx++;\n        }\n    }\n    detCache[cacheKey] = sum;\n    return sum;\n}\nexport function buildTransformer(src, dest) {\n    var mA = [\n        [src[0], src[1], 1, 0, 0, 0, -dest[0] * src[0], -dest[0] * src[1]],\n        [0, 0, 0, src[0], src[1], 1, -dest[1] * src[0], -dest[1] * src[1]],\n        [src[2], src[3], 1, 0, 0, 0, -dest[2] * src[2], -dest[2] * src[3]],\n        [0, 0, 0, src[2], src[3], 1, -dest[3] * src[2], -dest[3] * src[3]],\n        [src[4], src[5], 1, 0, 0, 0, -dest[4] * src[4], -dest[4] * src[5]],\n        [0, 0, 0, src[4], src[5], 1, -dest[5] * src[4], -dest[5] * src[5]],\n        [src[6], src[7], 1, 0, 0, 0, -dest[6] * src[6], -dest[6] * src[7]],\n        [0, 0, 0, src[6], src[7], 1, -dest[7] * src[6], -dest[7] * src[7]]\n    ];\n    var detCache = {};\n    var det = determinant(mA, 8, 0, 0, 0, detCache);\n    if (det === 0) {\n        return;\n    }\n    var vh = [];\n    for (var i = 0; i < 8; i++) {\n        for (var j = 0; j < 8; j++) {\n            vh[j] == null && (vh[j] = 0);\n            vh[j] += ((i + j) % 2 ? -1 : 1)\n                * determinant(mA, 7, i === 0 ? 1 : 0, 1 << i, 1 << j, detCache)\n                / det * dest[i];\n        }\n    }\n    return function (out, srcPointX, srcPointY) {\n        var pk = srcPointX * vh[6] + srcPointY * vh[7] + 1;\n        out[0] = (srcPointX * vh[0] + srcPointY * vh[1] + vh[2]) / pk;\n        out[1] = (srcPointX * vh[3] + srcPointY * vh[4] + vh[5]) / pk;\n    };\n}\n","import env from './env.js';\nimport { buildTransformer } from './fourPointsTransform.js';\nvar EVENT_SAVED_PROP = '___zrEVENTSAVED';\nvar _calcOut = [];\nexport function transformLocalCoord(out, elFrom, elTarget, inX, inY) {\n    return transformCoordWithViewport(_calcOut, elFrom, inX, inY, true)\n        && transformCoordWithViewport(out, elTarget, _calcOut[0], _calcOut[1]);\n}\nexport function transformCoordWithViewport(out, el, inX, inY, inverse) {\n    if (el.getBoundingClientRect && env.domSupported && !isCanvasEl(el)) {\n        var saved = el[EVENT_SAVED_PROP] || (el[EVENT_SAVED_PROP] = {});\n        var markers = prepareCoordMarkers(el, saved);\n        var transformer = preparePointerTransformer(markers, saved, inverse);\n        if (transformer) {\n            transformer(out, inX, inY);\n            return true;\n        }\n    }\n    return false;\n}\nfunction prepareCoordMarkers(el, saved) {\n    var markers = saved.markers;\n    if (markers) {\n        return markers;\n    }\n    markers = saved.markers = [];\n    var propLR = ['left', 'right'];\n    var propTB = ['top', 'bottom'];\n    for (var i = 0; i < 4; i++) {\n        var marker = document.createElement('div');\n        var stl = marker.style;\n        var idxLR = i % 2;\n        var idxTB = (i >> 1) % 2;\n        stl.cssText = [\n            'position: absolute',\n            'visibility: hidden',\n            'padding: 0',\n            'margin: 0',\n            'border-width: 0',\n            'user-select: none',\n            'width:0',\n            'height:0',\n            propLR[idxLR] + ':0',\n            propTB[idxTB] + ':0',\n            propLR[1 - idxLR] + ':auto',\n            propTB[1 - idxTB] + ':auto',\n            ''\n        ].join('!important;');\n        el.appendChild(marker);\n        markers.push(marker);\n    }\n    return markers;\n}\nfunction preparePointerTransformer(markers, saved, inverse) {\n    var transformerName = inverse ? 'invTrans' : 'trans';\n    var transformer = saved[transformerName];\n    var oldSrcCoords = saved.srcCoords;\n    var srcCoords = [];\n    var destCoords = [];\n    var oldCoordTheSame = true;\n    for (var i = 0; i < 4; i++) {\n        var rect = markers[i].getBoundingClientRect();\n        var ii = 2 * i;\n        var x = rect.left;\n        var y = rect.top;\n        srcCoords.push(x, y);\n        oldCoordTheSame = oldCoordTheSame && oldSrcCoords && x === oldSrcCoords[ii] && y === oldSrcCoords[ii + 1];\n        destCoords.push(markers[i].offsetLeft, markers[i].offsetTop);\n    }\n    return (oldCoordTheSame && transformer)\n        ? transformer\n        : (saved.srcCoords = srcCoords,\n            saved[transformerName] = inverse\n                ? buildTransformer(destCoords, srcCoords)\n                : buildTransformer(srcCoords, destCoords));\n}\nexport function isCanvasEl(el) {\n    return el.nodeName.toUpperCase() === 'CANVAS';\n}\nvar replaceReg = /([&<>\"'])/g;\nvar replaceMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&#39;'\n};\nexport function encodeHTML(source) {\n    return source == null\n        ? ''\n        : (source + '').replace(replaceReg, function (str, c) {\n            return replaceMap[c];\n        });\n}\n","import Eventful from './Eventful.js';\nimport env from './env.js';\nimport { isCanvasEl, transformCoordWithViewport } from './dom.js';\nvar MOUSE_EVENT_REG = /^(?:mouse|pointer|contextmenu|drag|drop)|click/;\nvar _calcOut = [];\nvar firefoxNotSupportOffsetXY = env.browser.firefox\n    && +env.browser.version.split('.')[0] < 39;\nexport function clientToLocal(el, e, out, calculate) {\n    out = out || {};\n    if (calculate) {\n        calculateZrXY(el, e, out);\n    }\n    else if (firefoxNotSupportOffsetXY\n        && e.layerX != null\n        && e.layerX !== e.offsetX) {\n        out.zrX = e.layerX;\n        out.zrY = e.layerY;\n    }\n    else if (e.offsetX != null) {\n        out.zrX = e.offsetX;\n        out.zrY = e.offsetY;\n    }\n    else {\n        calculateZrXY(el, e, out);\n    }\n    return out;\n}\nfunction calculateZrXY(el, e, out) {\n    if (env.domSupported && el.getBoundingClientRect) {\n        var ex = e.clientX;\n        var ey = e.clientY;\n        if (isCanvasEl(el)) {\n            var box = el.getBoundingClientRect();\n            out.zrX = ex - box.left;\n            out.zrY = ey - box.top;\n            return;\n        }\n        else {\n            if (transformCoordWithViewport(_calcOut, el, ex, ey)) {\n                out.zrX = _calcOut[0];\n                out.zrY = _calcOut[1];\n                return;\n            }\n        }\n    }\n    out.zrX = out.zrY = 0;\n}\nexport function getNativeEvent(e) {\n    return e\n        || window.event;\n}\nexport function normalizeEvent(el, e, calculate) {\n    e = getNativeEvent(e);\n    if (e.zrX != null) {\n        return e;\n    }\n    var eventType = e.type;\n    var isTouch = eventType && eventType.indexOf('touch') >= 0;\n    if (!isTouch) {\n        clientToLocal(el, e, e, calculate);\n        var wheelDelta = getWheelDeltaMayPolyfill(e);\n        e.zrDelta = wheelDelta ? wheelDelta / 120 : -(e.detail || 0) / 3;\n    }\n    else {\n        var touch = eventType !== 'touchend'\n            ? e.targetTouches[0]\n            : e.changedTouches[0];\n        touch && clientToLocal(el, touch, e, calculate);\n    }\n    var button = e.button;\n    if (e.which == null && button !== undefined && MOUSE_EVENT_REG.test(e.type)) {\n        e.which = (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));\n    }\n    return e;\n}\nfunction getWheelDeltaMayPolyfill(e) {\n    var rawWheelDelta = e.wheelDelta;\n    if (rawWheelDelta) {\n        return rawWheelDelta;\n    }\n    var deltaX = e.deltaX;\n    var deltaY = e.deltaY;\n    if (deltaX == null || deltaY == null) {\n        return rawWheelDelta;\n    }\n    var delta = deltaY !== 0 ? Math.abs(deltaY) : Math.abs(deltaX);\n    var sign = deltaY > 0 ? -1\n        : deltaY < 0 ? 1\n            : deltaX > 0 ? -1\n                : 1;\n    return 3 * delta * sign;\n}\nexport function addEventListener(el, name, handler, opt) {\n    el.addEventListener(name, handler, opt);\n}\nexport function removeEventListener(el, name, handler, opt) {\n    el.removeEventListener(name, handler, opt);\n}\nexport var stop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.cancelBubble = true;\n};\nexport function isMiddleOrRightButtonOnMouseUpDown(e) {\n    return e.which === 2 || e.which === 3;\n}\nexport { Eventful as Dispatcher };\n","import * as eventUtil from './event.js';\nvar GestureMgr = (function () {\n    function GestureMgr() {\n        this._track = [];\n    }\n    GestureMgr.prototype.recognize = function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    };\n    GestureMgr.prototype.clear = function () {\n        this._track.length = 0;\n        return this;\n    };\n    GestureMgr.prototype._doTrack = function (event, target, root) {\n        var touches = event.touches;\n        if (!touches) {\n            return;\n        }\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            var pos = eventUtil.clientToLocal(root, touch, {});\n            trackItem.points.push([pos.zrX, pos.zrY]);\n            trackItem.touches.push(touch);\n        }\n        this._track.push(trackItem);\n    };\n    GestureMgr.prototype._recognize = function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    };\n    return GestureMgr;\n}());\nexport { GestureMgr };\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n    return Math.sqrt(dx * dx + dy * dy);\n}\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\nvar recognizers = {\n    pinch: function (tracks, event) {\n        var trackLen = tracks.length;\n        if (!trackLen) {\n            return;\n        }\n        var pinchEnd = (tracks[trackLen - 1] || {}).points;\n        var pinchPre = (tracks[trackLen - 2] || {}).points || pinchEnd;\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n            event.pinchScale = pinchScale;\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n            return {\n                type: 'pinch',\n                target: tracks[0].target,\n                event: event\n            };\n        }\n    }\n};\n","export function create() {\n    return [1, 0, 0, 1, 0, 0];\n}\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n}\nexport function copy(out, m) {\n    out[0] = m[0];\n    out[1] = m[1];\n    out[2] = m[2];\n    out[3] = m[3];\n    out[4] = m[4];\n    out[5] = m[5];\n    return out;\n}\nexport function mul(out, m1, m2) {\n    var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n    var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n    var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n    var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n    var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n    var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = out3;\n    out[4] = out4;\n    out[5] = out5;\n    return out;\n}\nexport function translate(out, a, v) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4] + v[0];\n    out[5] = a[5] + v[1];\n    return out;\n}\nexport function rotate(out, a, rad, pivot) {\n    if (pivot === void 0) { pivot = [0, 0]; }\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var st = Math.sin(rad);\n    var ct = Math.cos(rad);\n    out[0] = aa * ct + ab * st;\n    out[1] = -aa * st + ab * ct;\n    out[2] = ac * ct + ad * st;\n    out[3] = -ac * st + ct * ad;\n    out[4] = ct * (atx - pivot[0]) + st * (aty - pivot[1]) + pivot[0];\n    out[5] = ct * (aty - pivot[1]) - st * (atx - pivot[0]) + pivot[1];\n    return out;\n}\nexport function scale(out, a, v) {\n    var vx = v[0];\n    var vy = v[1];\n    out[0] = a[0] * vx;\n    out[1] = a[1] * vy;\n    out[2] = a[2] * vx;\n    out[3] = a[3] * vy;\n    out[4] = a[4] * vx;\n    out[5] = a[5] * vy;\n    return out;\n}\nexport function invert(out, a) {\n    var aa = a[0];\n    var ac = a[2];\n    var atx = a[4];\n    var ab = a[1];\n    var ad = a[3];\n    var aty = a[5];\n    var det = aa * ad - ab * ac;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n}\nexport function clone(a) {\n    var b = create();\n    copy(b, a);\n    return b;\n}\n","var Point = (function () {\n    function Point(x, y) {\n        this.x = x || 0;\n        this.y = y || 0;\n    }\n    Point.prototype.copy = function (other) {\n        this.x = other.x;\n        this.y = other.y;\n        return this;\n    };\n    Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n    };\n    Point.prototype.set = function (x, y) {\n        this.x = x;\n        this.y = y;\n        return this;\n    };\n    Point.prototype.equal = function (other) {\n        return other.x === this.x && other.y === this.y;\n    };\n    Point.prototype.add = function (other) {\n        this.x += other.x;\n        this.y += other.y;\n        return this;\n    };\n    Point.prototype.scale = function (scalar) {\n        this.x *= scalar;\n        this.y *= scalar;\n    };\n    Point.prototype.scaleAndAdd = function (other, scalar) {\n        this.x += other.x * scalar;\n        this.y += other.y * scalar;\n    };\n    Point.prototype.sub = function (other) {\n        this.x -= other.x;\n        this.y -= other.y;\n        return this;\n    };\n    Point.prototype.dot = function (other) {\n        return this.x * other.x + this.y * other.y;\n    };\n    Point.prototype.len = function () {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    };\n    Point.prototype.lenSquare = function () {\n        return this.x * this.x + this.y * this.y;\n    };\n    Point.prototype.normalize = function () {\n        var len = this.len();\n        this.x /= len;\n        this.y /= len;\n        return this;\n    };\n    Point.prototype.distance = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    Point.prototype.distanceSquare = function (other) {\n        var dx = this.x - other.x;\n        var dy = this.y - other.y;\n        return dx * dx + dy * dy;\n    };\n    Point.prototype.negate = function () {\n        this.x = -this.x;\n        this.y = -this.y;\n        return this;\n    };\n    Point.prototype.transform = function (m) {\n        if (!m) {\n            return;\n        }\n        var x = this.x;\n        var y = this.y;\n        this.x = m[0] * x + m[2] * y + m[4];\n        this.y = m[1] * x + m[3] * y + m[5];\n        return this;\n    };\n    Point.prototype.toArray = function (out) {\n        out[0] = this.x;\n        out[1] = this.y;\n        return out;\n    };\n    Point.prototype.fromArray = function (input) {\n        this.x = input[0];\n        this.y = input[1];\n    };\n    Point.set = function (p, x, y) {\n        p.x = x;\n        p.y = y;\n    };\n    Point.copy = function (p, p2) {\n        p.x = p2.x;\n        p.y = p2.y;\n    };\n    Point.len = function (p) {\n        return Math.sqrt(p.x * p.x + p.y * p.y);\n    };\n    Point.lenSquare = function (p) {\n        return p.x * p.x + p.y * p.y;\n    };\n    Point.dot = function (p0, p1) {\n        return p0.x * p1.x + p0.y * p1.y;\n    };\n    Point.add = function (out, p0, p1) {\n        out.x = p0.x + p1.x;\n        out.y = p0.y + p1.y;\n    };\n    Point.sub = function (out, p0, p1) {\n        out.x = p0.x - p1.x;\n        out.y = p0.y - p1.y;\n    };\n    Point.scale = function (out, p0, scalar) {\n        out.x = p0.x * scalar;\n        out.y = p0.y * scalar;\n    };\n    Point.scaleAndAdd = function (out, p0, p1, scalar) {\n        out.x = p0.x + p1.x * scalar;\n        out.y = p0.y + p1.y * scalar;\n    };\n    Point.lerp = function (out, p0, p1, t) {\n        var onet = 1 - t;\n        out.x = onet * p0.x + t * p1.x;\n        out.y = onet * p0.y + t * p1.y;\n    };\n    return Point;\n}());\nexport default Point;\n","import * as matrix from './matrix.js';\nimport Point from './Point.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar lt = new Point();\nvar rb = new Point();\nvar lb = new Point();\nvar rt = new Point();\nvar minTv = new Point();\nvar maxTv = new Point();\nvar BoundingRect = (function () {\n    function BoundingRect(x, y, width, height) {\n        if (width < 0) {\n            x = x + width;\n            width = -width;\n        }\n        if (height < 0) {\n            y = y + height;\n            height = -height;\n        }\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    BoundingRect.prototype.union = function (other) {\n        var x = mathMin(other.x, this.x);\n        var y = mathMin(other.y, this.y);\n        if (isFinite(this.x) && isFinite(this.width)) {\n            this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n        }\n        else {\n            this.width = other.width;\n        }\n        if (isFinite(this.y) && isFinite(this.height)) {\n            this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n        }\n        else {\n            this.height = other.height;\n        }\n        this.x = x;\n        this.y = y;\n    };\n    BoundingRect.prototype.applyTransform = function (m) {\n        BoundingRect.applyTransform(this, this, m);\n    };\n    BoundingRect.prototype.calculateTransform = function (b) {\n        var a = this;\n        var sx = b.width / a.width;\n        var sy = b.height / a.height;\n        var m = matrix.create();\n        matrix.translate(m, m, [-a.x, -a.y]);\n        matrix.scale(m, m, [sx, sy]);\n        matrix.translate(m, m, [b.x, b.y]);\n        return m;\n    };\n    BoundingRect.prototype.intersect = function (b, mtv) {\n        if (!b) {\n            return false;\n        }\n        if (!(b instanceof BoundingRect)) {\n            b = BoundingRect.create(b);\n        }\n        var a = this;\n        var ax0 = a.x;\n        var ax1 = a.x + a.width;\n        var ay0 = a.y;\n        var ay1 = a.y + a.height;\n        var bx0 = b.x;\n        var bx1 = b.x + b.width;\n        var by0 = b.y;\n        var by1 = b.y + b.height;\n        var overlap = !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n        if (mtv) {\n            var dMin = Infinity;\n            var dMax = 0;\n            var d0 = Math.abs(ax1 - bx0);\n            var d1 = Math.abs(bx1 - ax0);\n            var d2 = Math.abs(ay1 - by0);\n            var d3 = Math.abs(by1 - ay0);\n            var dx = Math.min(d0, d1);\n            var dy = Math.min(d2, d3);\n            if (ax1 < bx0 || bx1 < ax0) {\n                if (dx > dMax) {\n                    dMax = dx;\n                    if (d0 < d1) {\n                        Point.set(maxTv, -d0, 0);\n                    }\n                    else {\n                        Point.set(maxTv, d1, 0);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d0 < d1) {\n                        Point.set(minTv, d0, 0);\n                    }\n                    else {\n                        Point.set(minTv, -d1, 0);\n                    }\n                }\n            }\n            if (ay1 < by0 || by1 < ay0) {\n                if (dy > dMax) {\n                    dMax = dy;\n                    if (d2 < d3) {\n                        Point.set(maxTv, 0, -d2);\n                    }\n                    else {\n                        Point.set(maxTv, 0, d3);\n                    }\n                }\n            }\n            else {\n                if (dx < dMin) {\n                    dMin = dx;\n                    if (d2 < d3) {\n                        Point.set(minTv, 0, d2);\n                    }\n                    else {\n                        Point.set(minTv, 0, -d3);\n                    }\n                }\n            }\n        }\n        if (mtv) {\n            Point.copy(mtv, overlap ? minTv : maxTv);\n        }\n        return overlap;\n    };\n    BoundingRect.prototype.contain = function (x, y) {\n        var rect = this;\n        return x >= rect.x\n            && x <= (rect.x + rect.width)\n            && y >= rect.y\n            && y <= (rect.y + rect.height);\n    };\n    BoundingRect.prototype.clone = function () {\n        return new BoundingRect(this.x, this.y, this.width, this.height);\n    };\n    BoundingRect.prototype.copy = function (other) {\n        BoundingRect.copy(this, other);\n    };\n    BoundingRect.prototype.plain = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            width: this.width,\n            height: this.height\n        };\n    };\n    BoundingRect.prototype.isFinite = function () {\n        return isFinite(this.x)\n            && isFinite(this.y)\n            && isFinite(this.width)\n            && isFinite(this.height);\n    };\n    BoundingRect.prototype.isZero = function () {\n        return this.width === 0 || this.height === 0;\n    };\n    BoundingRect.create = function (rect) {\n        return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n    };\n    BoundingRect.copy = function (target, source) {\n        target.x = source.x;\n        target.y = source.y;\n        target.width = source.width;\n        target.height = source.height;\n    };\n    BoundingRect.applyTransform = function (target, source, m) {\n        if (!m) {\n            if (target !== source) {\n                BoundingRect.copy(target, source);\n            }\n            return;\n        }\n        if (m[1] < 1e-5 && m[1] > -1e-5 && m[2] < 1e-5 && m[2] > -1e-5) {\n            var sx = m[0];\n            var sy = m[3];\n            var tx = m[4];\n            var ty = m[5];\n            target.x = source.x * sx + tx;\n            target.y = source.y * sy + ty;\n            target.width = source.width * sx;\n            target.height = source.height * sy;\n            if (target.width < 0) {\n                target.x += target.width;\n                target.width = -target.width;\n            }\n            if (target.height < 0) {\n                target.y += target.height;\n                target.height = -target.height;\n            }\n            return;\n        }\n        lt.x = lb.x = source.x;\n        lt.y = rt.y = source.y;\n        rb.x = rt.x = source.x + source.width;\n        rb.y = lb.y = source.y + source.height;\n        lt.transform(m);\n        rt.transform(m);\n        rb.transform(m);\n        lb.transform(m);\n        target.x = mathMin(lt.x, rb.x, lb.x, rt.x);\n        target.y = mathMin(lt.y, rb.y, lb.y, rt.y);\n        var maxX = mathMax(lt.x, rb.x, lb.x, rt.x);\n        var maxY = mathMax(lt.y, rb.y, lb.y, rt.y);\n        target.width = maxX - target.x;\n        target.height = maxY - target.y;\n    };\n    return BoundingRect;\n}());\nexport default BoundingRect;\n","import { __extends } from \"tslib\";\nimport * as util from './core/util.js';\nimport * as vec2 from './core/vector.js';\nimport Draggable from './mixin/Draggable.js';\nimport Eventful from './core/Eventful.js';\nimport * as eventTool from './core/event.js';\nimport { GestureMgr } from './core/GestureMgr.js';\nimport BoundingRect from './core/BoundingRect.js';\nvar SILENT = 'silent';\nfunction makeEventPacket(eveType, targetInfo, event) {\n    return {\n        type: eveType,\n        event: event,\n        target: targetInfo.target,\n        topTarget: targetInfo.topTarget,\n        cancelBubble: false,\n        offsetX: event.zrX,\n        offsetY: event.zrY,\n        gestureEvent: event.gestureEvent,\n        pinchX: event.pinchX,\n        pinchY: event.pinchY,\n        pinchScale: event.pinchScale,\n        wheelDelta: event.zrDelta,\n        zrByTouch: event.zrByTouch,\n        which: event.which,\n        stop: stopEvent\n    };\n}\nfunction stopEvent() {\n    eventTool.stop(this.event);\n}\nvar EmptyProxy = (function (_super) {\n    __extends(EmptyProxy, _super);\n    function EmptyProxy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handler = null;\n        return _this;\n    }\n    EmptyProxy.prototype.dispose = function () { };\n    EmptyProxy.prototype.setCursor = function () { };\n    return EmptyProxy;\n}(Eventful));\nvar HoveredResult = (function () {\n    function HoveredResult(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return HoveredResult;\n}());\nvar handlerNames = [\n    'click', 'dblclick', 'mousewheel', 'mouseout',\n    'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n];\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar Handler = (function (_super) {\n    __extends(Handler, _super);\n    function Handler(storage, painter, proxy, painterRoot, pointerSize) {\n        var _this = _super.call(this) || this;\n        _this._hovered = new HoveredResult(0, 0);\n        _this.storage = storage;\n        _this.painter = painter;\n        _this.painterRoot = painterRoot;\n        _this._pointerSize = pointerSize;\n        proxy = proxy || new EmptyProxy();\n        _this.proxy = null;\n        _this.setHandlerProxy(proxy);\n        _this._draggingMgr = new Draggable(_this);\n        return _this;\n    }\n    Handler.prototype.setHandlerProxy = function (proxy) {\n        if (this.proxy) {\n            this.proxy.dispose();\n        }\n        if (proxy) {\n            util.each(handlerNames, function (name) {\n                proxy.on && proxy.on(name, this[name], this);\n            }, this);\n            proxy.handler = this;\n        }\n        this.proxy = proxy;\n    };\n    Handler.prototype.mousemove = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var lastHovered = this._hovered;\n        var lastHoveredTarget = lastHovered.target;\n        if (lastHoveredTarget && !lastHoveredTarget.__zr) {\n            lastHovered = this.findHover(lastHovered.x, lastHovered.y);\n            lastHoveredTarget = lastHovered.target;\n        }\n        var hovered = this._hovered = isOutside ? new HoveredResult(x, y) : this.findHover(x, y);\n        var hoveredTarget = hovered.target;\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(hoveredTarget ? hoveredTarget.cursor : 'default');\n        if (lastHoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(lastHovered, 'mouseout', event);\n        }\n        this.dispatchToElement(hovered, 'mousemove', event);\n        if (hoveredTarget && hoveredTarget !== lastHoveredTarget) {\n            this.dispatchToElement(hovered, 'mouseover', event);\n        }\n    };\n    Handler.prototype.mouseout = function (event) {\n        var eventControl = event.zrEventControl;\n        if (eventControl !== 'only_globalout') {\n            this.dispatchToElement(this._hovered, 'mouseout', event);\n        }\n        if (eventControl !== 'no_globalout') {\n            this.trigger('globalout', { type: 'globalout', event: event });\n        }\n    };\n    Handler.prototype.resize = function () {\n        this._hovered = new HoveredResult(0, 0);\n    };\n    Handler.prototype.dispatch = function (eventName, eventArgs) {\n        var handler = this[eventName];\n        handler && handler.call(this, eventArgs);\n    };\n    Handler.prototype.dispose = function () {\n        this.proxy.dispose();\n        this.storage = null;\n        this.proxy = null;\n        this.painter = null;\n    };\n    Handler.prototype.setCursorStyle = function (cursorStyle) {\n        var proxy = this.proxy;\n        proxy.setCursor && proxy.setCursor(cursorStyle);\n    };\n    Handler.prototype.dispatchToElement = function (targetInfo, eventName, event) {\n        targetInfo = targetInfo || {};\n        var el = targetInfo.target;\n        if (el && el.silent) {\n            return;\n        }\n        var eventKey = ('on' + eventName);\n        var eventPacket = makeEventPacket(eventName, targetInfo, event);\n        while (el) {\n            el[eventKey]\n                && (eventPacket.cancelBubble = !!el[eventKey].call(el, eventPacket));\n            el.trigger(eventName, eventPacket);\n            el = el.__hostTarget ? el.__hostTarget : el.parent;\n            if (eventPacket.cancelBubble) {\n                break;\n            }\n        }\n        if (!eventPacket.cancelBubble) {\n            this.trigger(eventName, eventPacket);\n            if (this.painter && this.painter.eachOtherLayer) {\n                this.painter.eachOtherLayer(function (layer) {\n                    if (typeof (layer[eventKey]) === 'function') {\n                        layer[eventKey].call(layer, eventPacket);\n                    }\n                    if (layer.trigger) {\n                        layer.trigger(eventName, eventPacket);\n                    }\n                });\n            }\n        }\n    };\n    Handler.prototype.findHover = function (x, y, exclude) {\n        var list = this.storage.getDisplayList();\n        var out = new HoveredResult(x, y);\n        setHoverTarget(list, out, x, y, exclude);\n        if (this._pointerSize && !out.target) {\n            var candidates = [];\n            var pointerSize = this._pointerSize;\n            var targetSizeHalf = pointerSize / 2;\n            var pointerRect = new BoundingRect(x - targetSizeHalf, y - targetSizeHalf, pointerSize, pointerSize);\n            for (var i = list.length - 1; i >= 0; i--) {\n                var el = list[i];\n                if (el !== exclude\n                    && !el.ignore\n                    && !el.ignoreCoarsePointer\n                    && (!el.parent || !el.parent.ignoreCoarsePointer)) {\n                    tmpRect.copy(el.getBoundingRect());\n                    if (el.transform) {\n                        tmpRect.applyTransform(el.transform);\n                    }\n                    if (tmpRect.intersect(pointerRect)) {\n                        candidates.push(el);\n                    }\n                }\n            }\n            if (candidates.length) {\n                var rStep = 4;\n                var thetaStep = Math.PI / 12;\n                var PI2 = Math.PI * 2;\n                for (var r = 0; r < targetSizeHalf; r += rStep) {\n                    for (var theta = 0; theta < PI2; theta += thetaStep) {\n                        var x1 = x + r * Math.cos(theta);\n                        var y1 = y + r * Math.sin(theta);\n                        setHoverTarget(candidates, out, x1, y1, exclude);\n                        if (out.target) {\n                            return out;\n                        }\n                    }\n                }\n            }\n        }\n        return out;\n    };\n    Handler.prototype.processGesture = function (event, stage) {\n        if (!this._gestureMgr) {\n            this._gestureMgr = new GestureMgr();\n        }\n        var gestureMgr = this._gestureMgr;\n        stage === 'start' && gestureMgr.clear();\n        var gestureInfo = gestureMgr.recognize(event, this.findHover(event.zrX, event.zrY, null).target, this.proxy.dom);\n        stage === 'end' && gestureMgr.clear();\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n            var res = new HoveredResult();\n            res.target = gestureInfo.target;\n            this.dispatchToElement(res, type, gestureInfo.event);\n        }\n    };\n    return Handler;\n}(Eventful));\nutil.each(['click', 'mousedown', 'mouseup', 'mousewheel', 'dblclick', 'contextmenu'], function (name) {\n    Handler.prototype[name] = function (event) {\n        var x = event.zrX;\n        var y = event.zrY;\n        var isOutside = isOutsideBoundary(this, x, y);\n        var hovered;\n        var hoveredTarget;\n        if (name !== 'mouseup' || !isOutside) {\n            hovered = this.findHover(x, y);\n            hoveredTarget = hovered.target;\n        }\n        if (name === 'mousedown') {\n            this._downEl = hoveredTarget;\n            this._downPoint = [event.zrX, event.zrY];\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'mouseup') {\n            this._upEl = hoveredTarget;\n        }\n        else if (name === 'click') {\n            if (this._downEl !== this._upEl\n                || !this._downPoint\n                || vec2.dist(this._downPoint, [event.zrX, event.zrY]) > 4) {\n                return;\n            }\n            this._downPoint = null;\n        }\n        this.dispatchToElement(hovered, name, event);\n    };\n});\nfunction isHover(displayable, x, y) {\n    if (displayable[displayable.rectHover ? 'rectContain' : 'contain'](x, y)) {\n        var el = displayable;\n        var isSilent = void 0;\n        var ignoreClip = false;\n        while (el) {\n            if (el.ignoreClip) {\n                ignoreClip = true;\n            }\n            if (!ignoreClip) {\n                var clipPath = el.getClipPath();\n                if (clipPath && !clipPath.contain(x, y)) {\n                    return false;\n                }\n            }\n            if (el.silent) {\n                isSilent = true;\n            }\n            var hostEl = el.__hostTarget;\n            el = hostEl ? hostEl : el.parent;\n        }\n        return isSilent ? SILENT : true;\n    }\n    return false;\n}\nfunction setHoverTarget(list, out, x, y, exclude) {\n    for (var i = list.length - 1; i >= 0; i--) {\n        var el = list[i];\n        var hoverCheckResult = void 0;\n        if (el !== exclude\n            && !el.ignore\n            && (hoverCheckResult = isHover(el, x, y))) {\n            !out.topTarget && (out.topTarget = el);\n            if (hoverCheckResult !== SILENT) {\n                out.target = el;\n                break;\n            }\n        }\n    }\n}\nfunction isOutsideBoundary(handlerInstance, x, y) {\n    var painter = handlerInstance.painter;\n    return x < 0 || x > painter.getWidth() || y < 0 || y > painter.getHeight();\n}\nexport default Handler;\n","var DEFAULT_MIN_MERGE = 32;\nvar DEFAULT_MIN_GALLOPING = 7;\nfunction minRunLength(n) {\n    var r = 0;\n    while (n >= DEFAULT_MIN_MERGE) {\n        r |= n & 1;\n        n >>= 1;\n    }\n    return n + r;\n}\nfunction makeAscendingRun(array, lo, hi, compare) {\n    var runHi = lo + 1;\n    if (runHi === hi) {\n        return 1;\n    }\n    if (compare(array[runHi++], array[lo]) < 0) {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) < 0) {\n            runHi++;\n        }\n        reverseRun(array, lo, runHi);\n    }\n    else {\n        while (runHi < hi && compare(array[runHi], array[runHi - 1]) >= 0) {\n            runHi++;\n        }\n    }\n    return runHi - lo;\n}\nfunction reverseRun(array, lo, hi) {\n    hi--;\n    while (lo < hi) {\n        var t = array[lo];\n        array[lo++] = array[hi];\n        array[hi--] = t;\n    }\n}\nfunction binaryInsertionSort(array, lo, hi, start, compare) {\n    if (start === lo) {\n        start++;\n    }\n    for (; start < hi; start++) {\n        var pivot = array[start];\n        var left = lo;\n        var right = start;\n        var mid;\n        while (left < right) {\n            mid = left + right >>> 1;\n            if (compare(pivot, array[mid]) < 0) {\n                right = mid;\n            }\n            else {\n                left = mid + 1;\n            }\n        }\n        var n = start - left;\n        switch (n) {\n            case 3:\n                array[left + 3] = array[left + 2];\n            case 2:\n                array[left + 2] = array[left + 1];\n            case 1:\n                array[left + 1] = array[left];\n                break;\n            default:\n                while (n > 0) {\n                    array[left + n] = array[left + n - 1];\n                    n--;\n                }\n        }\n        array[left] = pivot;\n    }\n}\nfunction gallopLeft(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) > 0) {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) > 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    else {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) <= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) > 0) {\n            lastOffset = m + 1;\n        }\n        else {\n            offset = m;\n        }\n    }\n    return offset;\n}\nfunction gallopRight(value, array, start, length, hint, compare) {\n    var lastOffset = 0;\n    var maxOffset = 0;\n    var offset = 1;\n    if (compare(value, array[start + hint]) < 0) {\n        maxOffset = hint + 1;\n        while (offset < maxOffset && compare(value, array[start + hint - offset]) < 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        var tmp = lastOffset;\n        lastOffset = hint - offset;\n        offset = hint - tmp;\n    }\n    else {\n        maxOffset = length - hint;\n        while (offset < maxOffset && compare(value, array[start + hint + offset]) >= 0) {\n            lastOffset = offset;\n            offset = (offset << 1) + 1;\n            if (offset <= 0) {\n                offset = maxOffset;\n            }\n        }\n        if (offset > maxOffset) {\n            offset = maxOffset;\n        }\n        lastOffset += hint;\n        offset += hint;\n    }\n    lastOffset++;\n    while (lastOffset < offset) {\n        var m = lastOffset + (offset - lastOffset >>> 1);\n        if (compare(value, array[start + m]) < 0) {\n            offset = m;\n        }\n        else {\n            lastOffset = m + 1;\n        }\n    }\n    return offset;\n}\nfunction TimSort(array, compare) {\n    var minGallop = DEFAULT_MIN_GALLOPING;\n    var runStart;\n    var runLength;\n    var stackSize = 0;\n    var tmp = [];\n    runStart = [];\n    runLength = [];\n    function pushRun(_runStart, _runLength) {\n        runStart[stackSize] = _runStart;\n        runLength[stackSize] = _runLength;\n        stackSize += 1;\n    }\n    function mergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if ((n >= 1 && runLength[n - 1] <= runLength[n] + runLength[n + 1])\n                || (n >= 2 && runLength[n - 2] <= runLength[n] + runLength[n - 1])) {\n                if (runLength[n - 1] < runLength[n + 1]) {\n                    n--;\n                }\n            }\n            else if (runLength[n] > runLength[n + 1]) {\n                break;\n            }\n            mergeAt(n);\n        }\n    }\n    function forceMergeRuns() {\n        while (stackSize > 1) {\n            var n = stackSize - 2;\n            if (n > 0 && runLength[n - 1] < runLength[n + 1]) {\n                n--;\n            }\n            mergeAt(n);\n        }\n    }\n    function mergeAt(i) {\n        var start1 = runStart[i];\n        var length1 = runLength[i];\n        var start2 = runStart[i + 1];\n        var length2 = runLength[i + 1];\n        runLength[i] = length1 + length2;\n        if (i === stackSize - 3) {\n            runStart[i + 1] = runStart[i + 2];\n            runLength[i + 1] = runLength[i + 2];\n        }\n        stackSize--;\n        var k = gallopRight(array[start2], array, start1, length1, 0, compare);\n        start1 += k;\n        length1 -= k;\n        if (length1 === 0) {\n            return;\n        }\n        length2 = gallopLeft(array[start1 + length1 - 1], array, start2, length2, length2 - 1, compare);\n        if (length2 === 0) {\n            return;\n        }\n        if (length1 <= length2) {\n            mergeLow(start1, length1, start2, length2);\n        }\n        else {\n            mergeHigh(start1, length1, start2, length2);\n        }\n    }\n    function mergeLow(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length1; i++) {\n            tmp[i] = array[start1 + i];\n        }\n        var cursor1 = 0;\n        var cursor2 = start2;\n        var dest = start1;\n        array[dest++] = array[cursor2++];\n        if (--length2 === 0) {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n            return;\n        }\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n            return;\n        }\n        var _minGallop = minGallop;\n        var count1;\n        var count2;\n        var exit;\n        while (1) {\n            count1 = 0;\n            count2 = 0;\n            exit = false;\n            do {\n                if (compare(array[cursor2], tmp[cursor1]) < 0) {\n                    array[dest++] = array[cursor2++];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest++] = tmp[cursor1++];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = gallopRight(array[cursor2], tmp, cursor1, length1, 0, compare);\n                if (count1 !== 0) {\n                    for (i = 0; i < count1; i++) {\n                        array[dest + i] = tmp[cursor1 + i];\n                    }\n                    dest += count1;\n                    cursor1 += count1;\n                    length1 -= count1;\n                    if (length1 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = array[cursor2++];\n                if (--length2 === 0) {\n                    exit = true;\n                    break;\n                }\n                count2 = gallopLeft(tmp[cursor1], array, cursor2, length2, 0, compare);\n                if (count2 !== 0) {\n                    for (i = 0; i < count2; i++) {\n                        array[dest + i] = array[cursor2 + i];\n                    }\n                    dest += count2;\n                    cursor2 += count2;\n                    length2 -= count2;\n                    if (length2 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest++] = tmp[cursor1++];\n                if (--length1 === 1) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        minGallop < 1 && (minGallop = 1);\n        if (length1 === 1) {\n            for (i = 0; i < length2; i++) {\n                array[dest + i] = array[cursor2 + i];\n            }\n            array[dest + length2] = tmp[cursor1];\n        }\n        else if (length1 === 0) {\n            throw new Error();\n        }\n        else {\n            for (i = 0; i < length1; i++) {\n                array[dest + i] = tmp[cursor1 + i];\n            }\n        }\n    }\n    function mergeHigh(start1, length1, start2, length2) {\n        var i = 0;\n        for (i = 0; i < length2; i++) {\n            tmp[i] = array[start2 + i];\n        }\n        var cursor1 = start1 + length1 - 1;\n        var cursor2 = length2 - 1;\n        var dest = start2 + length2 - 1;\n        var customCursor = 0;\n        var customDest = 0;\n        array[dest--] = array[cursor1--];\n        if (--length1 === 0) {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n            return;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n            return;\n        }\n        var _minGallop = minGallop;\n        while (true) {\n            var count1 = 0;\n            var count2 = 0;\n            var exit = false;\n            do {\n                if (compare(tmp[cursor2], array[cursor1]) < 0) {\n                    array[dest--] = array[cursor1--];\n                    count1++;\n                    count2 = 0;\n                    if (--length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                else {\n                    array[dest--] = tmp[cursor2--];\n                    count2++;\n                    count1 = 0;\n                    if (--length2 === 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n            } while ((count1 | count2) < _minGallop);\n            if (exit) {\n                break;\n            }\n            do {\n                count1 = length1 - gallopRight(tmp[cursor2], array, start1, length1, length1 - 1, compare);\n                if (count1 !== 0) {\n                    dest -= count1;\n                    cursor1 -= count1;\n                    length1 -= count1;\n                    customDest = dest + 1;\n                    customCursor = cursor1 + 1;\n                    for (i = count1 - 1; i >= 0; i--) {\n                        array[customDest + i] = array[customCursor + i];\n                    }\n                    if (length1 === 0) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = tmp[cursor2--];\n                if (--length2 === 1) {\n                    exit = true;\n                    break;\n                }\n                count2 = length2 - gallopLeft(array[cursor1], tmp, 0, length2, length2 - 1, compare);\n                if (count2 !== 0) {\n                    dest -= count2;\n                    cursor2 -= count2;\n                    length2 -= count2;\n                    customDest = dest + 1;\n                    customCursor = cursor2 + 1;\n                    for (i = 0; i < count2; i++) {\n                        array[customDest + i] = tmp[customCursor + i];\n                    }\n                    if (length2 <= 1) {\n                        exit = true;\n                        break;\n                    }\n                }\n                array[dest--] = array[cursor1--];\n                if (--length1 === 0) {\n                    exit = true;\n                    break;\n                }\n                _minGallop--;\n            } while (count1 >= DEFAULT_MIN_GALLOPING || count2 >= DEFAULT_MIN_GALLOPING);\n            if (exit) {\n                break;\n            }\n            if (_minGallop < 0) {\n                _minGallop = 0;\n            }\n            _minGallop += 2;\n        }\n        minGallop = _minGallop;\n        if (minGallop < 1) {\n            minGallop = 1;\n        }\n        if (length2 === 1) {\n            dest -= length1;\n            cursor1 -= length1;\n            customDest = dest + 1;\n            customCursor = cursor1 + 1;\n            for (i = length1 - 1; i >= 0; i--) {\n                array[customDest + i] = array[customCursor + i];\n            }\n            array[dest] = tmp[cursor2];\n        }\n        else if (length2 === 0) {\n            throw new Error();\n        }\n        else {\n            customCursor = dest - (length2 - 1);\n            for (i = 0; i < length2; i++) {\n                array[customCursor + i] = tmp[i];\n            }\n        }\n    }\n    return {\n        mergeRuns: mergeRuns,\n        forceMergeRuns: forceMergeRuns,\n        pushRun: pushRun\n    };\n}\nexport default function sort(array, compare, lo, hi) {\n    if (!lo) {\n        lo = 0;\n    }\n    if (!hi) {\n        hi = array.length;\n    }\n    var remaining = hi - lo;\n    if (remaining < 2) {\n        return;\n    }\n    var runLength = 0;\n    if (remaining < DEFAULT_MIN_MERGE) {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        binaryInsertionSort(array, lo, hi, lo + runLength, compare);\n        return;\n    }\n    var ts = TimSort(array, compare);\n    var minRun = minRunLength(remaining);\n    do {\n        runLength = makeAscendingRun(array, lo, hi, compare);\n        if (runLength < minRun) {\n            var force = remaining;\n            if (force > minRun) {\n                force = minRun;\n            }\n            binaryInsertionSort(array, lo, lo + force, lo + runLength, compare);\n            runLength = force;\n        }\n        ts.pushRun(lo, runLength);\n        ts.mergeRuns();\n        remaining -= runLength;\n        lo += runLength;\n    } while (remaining !== 0);\n    ts.forceMergeRuns();\n}\n","export var REDRAW_BIT = 1;\nexport var STYLE_CHANGED_BIT = 2;\nexport var SHAPE_CHANGED_BIT = 4;\n","import * as util from './core/util.js';\nimport timsort from './core/timsort.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nvar invalidZErrorLogged = false;\nfunction logInvalidZError() {\n    if (invalidZErrorLogged) {\n        return;\n    }\n    invalidZErrorLogged = true;\n    console.warn('z / z2 / zlevel of displayable is invalid, which may cause unexpected errors');\n}\nfunction shapeCompareFunc(a, b) {\n    if (a.zlevel === b.zlevel) {\n        if (a.z === b.z) {\n            return a.z2 - b.z2;\n        }\n        return a.z - b.z;\n    }\n    return a.zlevel - b.zlevel;\n}\nvar Storage = (function () {\n    function Storage() {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        this.displayableSortFunc = shapeCompareFunc;\n    }\n    Storage.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._roots.length; i++) {\n            this._roots[i].traverse(cb, context);\n        }\n    };\n    Storage.prototype.getDisplayList = function (update, includeIgnore) {\n        includeIgnore = includeIgnore || false;\n        var displayList = this._displayList;\n        if (update || !displayList.length) {\n            this.updateDisplayList(includeIgnore);\n        }\n        return displayList;\n    };\n    Storage.prototype.updateDisplayList = function (includeIgnore) {\n        this._displayListLen = 0;\n        var roots = this._roots;\n        var displayList = this._displayList;\n        for (var i = 0, len = roots.length; i < len; i++) {\n            this._updateAndAddDisplayable(roots[i], null, includeIgnore);\n        }\n        displayList.length = this._displayListLen;\n        timsort(displayList, shapeCompareFunc);\n    };\n    Storage.prototype._updateAndAddDisplayable = function (el, clipPaths, includeIgnore) {\n        if (el.ignore && !includeIgnore) {\n            return;\n        }\n        el.beforeUpdate();\n        el.update();\n        el.afterUpdate();\n        var userSetClipPath = el.getClipPath();\n        if (el.ignoreClip) {\n            clipPaths = null;\n        }\n        else if (userSetClipPath) {\n            if (clipPaths) {\n                clipPaths = clipPaths.slice();\n            }\n            else {\n                clipPaths = [];\n            }\n            var currentClipPath = userSetClipPath;\n            var parentClipPath = el;\n            while (currentClipPath) {\n                currentClipPath.parent = parentClipPath;\n                currentClipPath.updateTransform();\n                clipPaths.push(currentClipPath);\n                parentClipPath = currentClipPath;\n                currentClipPath = currentClipPath.getClipPath();\n            }\n        }\n        if (el.childrenRef) {\n            var children = el.childrenRef();\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                if (el.__dirty) {\n                    child.__dirty |= REDRAW_BIT;\n                }\n                this._updateAndAddDisplayable(child, clipPaths, includeIgnore);\n            }\n            el.__dirty = 0;\n        }\n        else {\n            var disp = el;\n            if (clipPaths && clipPaths.length) {\n                disp.__clipPaths = clipPaths;\n            }\n            else if (disp.__clipPaths && disp.__clipPaths.length > 0) {\n                disp.__clipPaths = [];\n            }\n            if (isNaN(disp.z)) {\n                logInvalidZError();\n                disp.z = 0;\n            }\n            if (isNaN(disp.z2)) {\n                logInvalidZError();\n                disp.z2 = 0;\n            }\n            if (isNaN(disp.zlevel)) {\n                logInvalidZError();\n                disp.zlevel = 0;\n            }\n            this._displayList[this._displayListLen++] = disp;\n        }\n        var decalEl = el.getDecalElement && el.getDecalElement();\n        if (decalEl) {\n            this._updateAndAddDisplayable(decalEl, clipPaths, includeIgnore);\n        }\n        var textGuide = el.getTextGuideLine();\n        if (textGuide) {\n            this._updateAndAddDisplayable(textGuide, clipPaths, includeIgnore);\n        }\n        var textEl = el.getTextContent();\n        if (textEl) {\n            this._updateAndAddDisplayable(textEl, clipPaths, includeIgnore);\n        }\n    };\n    Storage.prototype.addRoot = function (el) {\n        if (el.__zr && el.__zr.storage === this) {\n            return;\n        }\n        this._roots.push(el);\n    };\n    Storage.prototype.delRoot = function (el) {\n        if (el instanceof Array) {\n            for (var i = 0, l = el.length; i < l; i++) {\n                this.delRoot(el[i]);\n            }\n            return;\n        }\n        var idx = util.indexOf(this._roots, el);\n        if (idx >= 0) {\n            this._roots.splice(idx, 1);\n        }\n    };\n    Storage.prototype.delAllRoots = function () {\n        this._roots = [];\n        this._displayList = [];\n        this._displayListLen = 0;\n        return;\n    };\n    Storage.prototype.getRoots = function () {\n        return this._roots;\n    };\n    Storage.prototype.dispose = function () {\n        this._displayList = null;\n        this._roots = null;\n    };\n    return Storage;\n}());\nexport default Storage;\n","import env from '../core/env.js';\nvar requestAnimationFrame;\nrequestAnimationFrame = (env.hasGlobalWindow\n    && ((window.requestAnimationFrame && window.requestAnimationFrame.bind(window))\n        || (window.msRequestAnimationFrame && window.msRequestAnimationFrame.bind(window))\n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame)) || function (func) {\n    return setTimeout(func, 16);\n};\nexport default requestAnimationFrame;\n","var easingFuncs = {\n    linear: function (k) {\n        return k;\n    },\n    quadraticIn: function (k) {\n        return k * k;\n    },\n    quadraticOut: function (k) {\n        return k * (2 - k);\n    },\n    quadraticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return -0.5 * (--k * (k - 2) - 1);\n    },\n    cubicIn: function (k) {\n        return k * k * k;\n    },\n    cubicOut: function (k) {\n        return --k * k * k + 1;\n    },\n    cubicInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    quarticIn: function (k) {\n        return k * k * k * k;\n    },\n    quarticOut: function (k) {\n        return 1 - (--k * k * k * k);\n    },\n    quarticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return -0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    quinticIn: function (k) {\n        return k * k * k * k * k;\n    },\n    quinticOut: function (k) {\n        return --k * k * k * k * k + 1;\n    },\n    quinticInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    sinusoidalIn: function (k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    sinusoidalOut: function (k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    sinusoidalInOut: function (k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    exponentialIn: function (k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    exponentialOut: function (k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);\n    },\n    exponentialInOut: function (k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);\n    },\n    circularIn: function (k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    circularOut: function (k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    circularInOut: function (k) {\n        if ((k *= 2) < 1) {\n            return -0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    elasticIn: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return -(a * Math.pow(2, 10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    elasticOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, -10 * k)\n            * Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    elasticInOut: function (k) {\n        var s;\n        var a = 0.1;\n        var p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1;\n            s = p / 4;\n        }\n        else {\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return -0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n            * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n    },\n    backIn: function (k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    backOut: function (k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    backInOut: function (k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    bounceIn: function (k) {\n        return 1 - easingFuncs.bounceOut(1 - k);\n    },\n    bounceOut: function (k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        }\n        else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        }\n        else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    bounceInOut: function (k) {\n        if (k < 0.5) {\n            return easingFuncs.bounceIn(k * 2) * 0.5;\n        }\n        return easingFuncs.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\nexport default easingFuncs;\n","import { create as v2Create, distSquare as v2DistSquare } from './vector.js';\nvar mathPow = Math.pow;\nvar mathSqrt = Math.sqrt;\nvar EPSILON = 1e-8;\nvar EPSILON_NUMERIC = 1e-4;\nvar THREE_SQRT = mathSqrt(3);\nvar ONE_THIRD = 1 / 3;\nvar _v0 = v2Create();\nvar _v1 = v2Create();\nvar _v2 = v2Create();\nfunction isAroundZero(val) {\n    return val > -EPSILON && val < EPSILON;\n}\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nexport function cubicAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return onet * onet * (onet * p0 + 3 * t * p1)\n        + t * t * (t * p3 + 3 * onet * p2);\n}\nexport function cubicDerivativeAt(p0, p1, p2, p3, t) {\n    var onet = 1 - t;\n    return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet\n        + (p3 - p2) * t * t);\n}\nexport function cubicRootAt(p0, p1, p2, p3, val, roots) {\n    var a = p3 + 3 * (p1 - p2) - p0;\n    var b = 3 * (p2 - p1 * 2 + p0);\n    var c = 3 * (p1 - p0);\n    var d = p0 - val;\n    var A = b * b - 3 * a * c;\n    var B = b * c - 9 * a * d;\n    var C = c * c - 3 * b * d;\n    var n = 0;\n    if (isAroundZero(A) && isAroundZero(B)) {\n        if (isAroundZero(b)) {\n            roots[0] = 0;\n        }\n        else {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = B * B - 4 * A * C;\n        if (isAroundZero(disc)) {\n            var K = B / A;\n            var t1 = -b / a + K;\n            var t2 = -K / 2;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var Y1 = A * b + 1.5 * a * (-B + discSqrt);\n            var Y2 = A * b + 1.5 * a * (-B - discSqrt);\n            if (Y1 < 0) {\n                Y1 = -mathPow(-Y1, ONE_THIRD);\n            }\n            else {\n                Y1 = mathPow(Y1, ONE_THIRD);\n            }\n            if (Y2 < 0) {\n                Y2 = -mathPow(-Y2, ONE_THIRD);\n            }\n            else {\n                Y2 = mathPow(Y2, ONE_THIRD);\n            }\n            var t1 = (-b - (Y1 + Y2)) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else {\n            var T = (2 * A * b - 3 * a * B) / (2 * mathSqrt(A * A * A));\n            var theta = Math.acos(T) / 3;\n            var ASqrt = mathSqrt(A);\n            var tmp = Math.cos(theta);\n            var t1 = (-b - 2 * ASqrt * tmp) / (3 * a);\n            var t2 = (-b + ASqrt * (tmp + THREE_SQRT * Math.sin(theta))) / (3 * a);\n            var t3 = (-b + ASqrt * (tmp - THREE_SQRT * Math.sin(theta))) / (3 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n            if (t3 >= 0 && t3 <= 1) {\n                roots[n++] = t3;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicExtrema(p0, p1, p2, p3, extrema) {\n    var b = 6 * p2 - 12 * p1 + 6 * p0;\n    var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;\n    var c = 3 * p1 - 3 * p0;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            extrema[0] = -b / (2 * a);\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                extrema[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                extrema[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function cubicSubdivide(p0, p1, p2, p3, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p23 = (p3 - p2) * t + p2;\n    var p012 = (p12 - p01) * t + p01;\n    var p123 = (p23 - p12) * t + p12;\n    var p0123 = (p123 - p012) * t + p012;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p0123;\n    out[4] = p0123;\n    out[5] = p123;\n    out[6] = p23;\n    out[7] = p3;\n}\nexport function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    var prev;\n    var next;\n    var d1;\n    var d2;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = cubicAt(x0, x1, x2, x3, _t);\n        _v1[1] = cubicAt(y0, y1, y2, y3, _t);\n        d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        prev = t - interval;\n        next = t + interval;\n        _v1[0] = cubicAt(x0, x1, x2, x3, prev);\n        _v1[1] = cubicAt(y0, y1, y2, y3, prev);\n        d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = cubicAt(x0, x1, x2, x3, next);\n            _v2[1] = cubicAt(y0, y1, y2, y3, next);\n            d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = cubicAt(x0, x1, x2, x3, t);\n        out[1] = cubicAt(y0, y1, y2, y3, t);\n    }\n    return mathSqrt(d);\n}\nexport function cubicLength(x0, y0, x1, y1, x2, y2, x3, y3, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = cubicAt(x0, x1, x2, x3, t);\n        var y = cubicAt(y0, y1, y2, y3, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\nexport function quadraticAt(p0, p1, p2, t) {\n    var onet = 1 - t;\n    return onet * (onet * p0 + 2 * t * p1) + t * t * p2;\n}\nexport function quadraticDerivativeAt(p0, p1, p2, t) {\n    return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));\n}\nexport function quadraticRootAt(p0, p1, p2, val, roots) {\n    var a = p0 - 2 * p1 + p2;\n    var b = 2 * (p1 - p0);\n    var c = p0 - val;\n    var n = 0;\n    if (isAroundZero(a)) {\n        if (isNotAroundZero(b)) {\n            var t1 = -c / b;\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n    }\n    else {\n        var disc = b * b - 4 * a * c;\n        if (isAroundZero(disc)) {\n            var t1 = -b / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n        }\n        else if (disc > 0) {\n            var discSqrt = mathSqrt(disc);\n            var t1 = (-b + discSqrt) / (2 * a);\n            var t2 = (-b - discSqrt) / (2 * a);\n            if (t1 >= 0 && t1 <= 1) {\n                roots[n++] = t1;\n            }\n            if (t2 >= 0 && t2 <= 1) {\n                roots[n++] = t2;\n            }\n        }\n    }\n    return n;\n}\nexport function quadraticExtremum(p0, p1, p2) {\n    var divider = p0 + p2 - 2 * p1;\n    if (divider === 0) {\n        return 0.5;\n    }\n    else {\n        return (p0 - p1) / divider;\n    }\n}\nexport function quadraticSubdivide(p0, p1, p2, t, out) {\n    var p01 = (p1 - p0) * t + p0;\n    var p12 = (p2 - p1) * t + p1;\n    var p012 = (p12 - p01) * t + p01;\n    out[0] = p0;\n    out[1] = p01;\n    out[2] = p012;\n    out[3] = p012;\n    out[4] = p12;\n    out[5] = p2;\n}\nexport function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {\n    var t;\n    var interval = 0.005;\n    var d = Infinity;\n    _v0[0] = x;\n    _v0[1] = y;\n    for (var _t = 0; _t < 1; _t += 0.05) {\n        _v1[0] = quadraticAt(x0, x1, x2, _t);\n        _v1[1] = quadraticAt(y0, y1, y2, _t);\n        var d1 = v2DistSquare(_v0, _v1);\n        if (d1 < d) {\n            t = _t;\n            d = d1;\n        }\n    }\n    d = Infinity;\n    for (var i = 0; i < 32; i++) {\n        if (interval < EPSILON_NUMERIC) {\n            break;\n        }\n        var prev = t - interval;\n        var next = t + interval;\n        _v1[0] = quadraticAt(x0, x1, x2, prev);\n        _v1[1] = quadraticAt(y0, y1, y2, prev);\n        var d1 = v2DistSquare(_v1, _v0);\n        if (prev >= 0 && d1 < d) {\n            t = prev;\n            d = d1;\n        }\n        else {\n            _v2[0] = quadraticAt(x0, x1, x2, next);\n            _v2[1] = quadraticAt(y0, y1, y2, next);\n            var d2 = v2DistSquare(_v2, _v0);\n            if (next <= 1 && d2 < d) {\n                t = next;\n                d = d2;\n            }\n            else {\n                interval *= 0.5;\n            }\n        }\n    }\n    if (out) {\n        out[0] = quadraticAt(x0, x1, x2, t);\n        out[1] = quadraticAt(y0, y1, y2, t);\n    }\n    return mathSqrt(d);\n}\nexport function quadraticLength(x0, y0, x1, y1, x2, y2, iteration) {\n    var px = x0;\n    var py = y0;\n    var d = 0;\n    var step = 1 / iteration;\n    for (var i = 1; i <= iteration; i++) {\n        var t = i * step;\n        var x = quadraticAt(x0, x1, x2, t);\n        var y = quadraticAt(y0, y1, y2, t);\n        var dx = x - px;\n        var dy = y - py;\n        d += Math.sqrt(dx * dx + dy * dy);\n        px = x;\n        py = y;\n    }\n    return d;\n}\n","import { cubicAt, cubicRootAt } from '../core/curve.js';\nimport { trim } from '../core/util.js';\nvar regexp = /cubic-bezier\\(([0-9,\\.e ]+)\\)/;\nexport function createCubicEasingFunc(cubicEasingStr) {\n    var cubic = cubicEasingStr && regexp.exec(cubicEasingStr);\n    if (cubic) {\n        var points = cubic[1].split(',');\n        var a_1 = +trim(points[0]);\n        var b_1 = +trim(points[1]);\n        var c_1 = +trim(points[2]);\n        var d_1 = +trim(points[3]);\n        if (isNaN(a_1 + b_1 + c_1 + d_1)) {\n            return;\n        }\n        var roots_1 = [];\n        return function (p) {\n            return p <= 0\n                ? 0 : p >= 1\n                ? 1\n                : cubicRootAt(0, a_1, c_1, 1, p, roots_1) && cubicAt(0, b_1, d_1, 1, roots_1[0]);\n        };\n    }\n}\n","import easingFuncs from './easing.js';\nimport { isFunction, noop } from '../core/util.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nvar Clip = (function () {\n    function Clip(opts) {\n        this._inited = false;\n        this._startTime = 0;\n        this._pausedTime = 0;\n        this._paused = false;\n        this._life = opts.life || 1000;\n        this._delay = opts.delay || 0;\n        this.loop = opts.loop || false;\n        this.onframe = opts.onframe || noop;\n        this.ondestroy = opts.ondestroy || noop;\n        this.onrestart = opts.onrestart || noop;\n        opts.easing && this.setEasing(opts.easing);\n    }\n    Clip.prototype.step = function (globalTime, deltaTime) {\n        if (!this._inited) {\n            this._startTime = globalTime + this._delay;\n            this._inited = true;\n        }\n        if (this._paused) {\n            this._pausedTime += deltaTime;\n            return;\n        }\n        var life = this._life;\n        var elapsedTime = globalTime - this._startTime - this._pausedTime;\n        var percent = elapsedTime / life;\n        if (percent < 0) {\n            percent = 0;\n        }\n        percent = Math.min(percent, 1);\n        var easingFunc = this.easingFunc;\n        var schedule = easingFunc ? easingFunc(percent) : percent;\n        this.onframe(schedule);\n        if (percent === 1) {\n            if (this.loop) {\n                var remainder = elapsedTime % life;\n                this._startTime = globalTime - remainder;\n                this._pausedTime = 0;\n                this.onrestart();\n            }\n            else {\n                return true;\n            }\n        }\n        return false;\n    };\n    Clip.prototype.pause = function () {\n        this._paused = true;\n    };\n    Clip.prototype.resume = function () {\n        this._paused = false;\n    };\n    Clip.prototype.setEasing = function (easing) {\n        this.easing = easing;\n        this.easingFunc = isFunction(easing)\n            ? easing\n            : easingFuncs[easing] || createCubicEasingFunc(easing);\n    };\n    return Clip;\n}());\nexport default Clip;\n","var Entry = (function () {\n    function Entry(val) {\n        this.value = val;\n    }\n    return Entry;\n}());\nexport { Entry };\nvar LinkedList = (function () {\n    function LinkedList() {\n        this._len = 0;\n    }\n    LinkedList.prototype.insert = function (val) {\n        var entry = new Entry(val);\n        this.insertEntry(entry);\n        return entry;\n    };\n    LinkedList.prototype.insertEntry = function (entry) {\n        if (!this.head) {\n            this.head = this.tail = entry;\n        }\n        else {\n            this.tail.next = entry;\n            entry.prev = this.tail;\n            entry.next = null;\n            this.tail = entry;\n        }\n        this._len++;\n    };\n    LinkedList.prototype.remove = function (entry) {\n        var prev = entry.prev;\n        var next = entry.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this.head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this.tail = prev;\n        }\n        entry.next = entry.prev = null;\n        this._len--;\n    };\n    LinkedList.prototype.len = function () {\n        return this._len;\n    };\n    LinkedList.prototype.clear = function () {\n        this.head = this.tail = null;\n        this._len = 0;\n    };\n    return LinkedList;\n}());\nexport { LinkedList };\nvar LRU = (function () {\n    function LRU(maxSize) {\n        this._list = new LinkedList();\n        this._maxSize = 10;\n        this._map = {};\n        this._maxSize = maxSize;\n    }\n    LRU.prototype.put = function (key, value) {\n        var list = this._list;\n        var map = this._map;\n        var removed = null;\n        if (map[key] == null) {\n            var len = list.len();\n            var entry = this._lastRemovedEntry;\n            if (len >= this._maxSize && len > 0) {\n                var leastUsedEntry = list.head;\n                list.remove(leastUsedEntry);\n                delete map[leastUsedEntry.key];\n                removed = leastUsedEntry.value;\n                this._lastRemovedEntry = leastUsedEntry;\n            }\n            if (entry) {\n                entry.value = value;\n            }\n            else {\n                entry = new Entry(value);\n            }\n            entry.key = key;\n            list.insertEntry(entry);\n            map[key] = entry;\n        }\n        return removed;\n    };\n    LRU.prototype.get = function (key) {\n        var entry = this._map[key];\n        var list = this._list;\n        if (entry != null) {\n            if (entry !== list.tail) {\n                list.remove(entry);\n                list.insertEntry(entry);\n            }\n            return entry.value;\n        }\n    };\n    LRU.prototype.clear = function () {\n        this._list.clear();\n        this._map = {};\n    };\n    LRU.prototype.len = function () {\n        return this._list.len();\n    };\n    return LRU;\n}());\nexport default LRU;\n","import LRU from '../core/LRU.js';\nimport { extend, isGradientObject, isString, map } from '../core/util.js';\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\nfunction clampCssByte(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clampCssAngle(i) {\n    i = Math.round(i);\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\nfunction clampCssFloat(f) {\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nfunction parseCssInt(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\nfunction parseCssFloat(val) {\n    var str = val;\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nvar colorCache = new LRU(20);\nvar lastRemovedArr = null;\nfunction putToCache(colorStr, rgbaArr) {\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\nexport function parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n    colorStr = colorStr + '';\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n    var strLen = str.length;\n    if (str.charAt(0) === '#') {\n        if (strLen === 4 || strLen === 5) {\n            var iv = parseInt(str.slice(1, 4), 16);\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8), (iv & 0xf0) | ((iv & 0xf0) >> 4), (iv & 0xf) | ((iv & 0xf) << 4), strLen === 5 ? parseInt(str.slice(4), 16) / 0xf : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (strLen === 7 || strLen === 9) {\n            var iv = parseInt(str.slice(1, 7), 16);\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;\n            }\n            setRgba(rgbaArr, (iv & 0xff0000) >> 16, (iv & 0xff00) >> 8, iv & 0xff, strLen === 9 ? parseInt(str.slice(7), 16) / 0xff : 1);\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === strLen) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    return params.length === 3\n                        ? setRgba(rgbaArr, +params[0], +params[1], +params[2], 1)\n                        : setRgba(rgbaArr, 0, 0, 0, 1);\n                }\n                alpha = parseCssFloat(params.pop());\n            case 'rgb':\n                if (params.length >= 3) {\n                    setRgba(rgbaArr, parseCssInt(params[0]), parseCssInt(params[1]), parseCssInt(params[2]), params.length === 3 ? alpha : parseCssFloat(params[3]));\n                    putToCache(colorStr, rgbaArr);\n                    return rgbaArr;\n                }\n                else {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n    rgba = rgba || [];\n    setRgba(rgba, clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255), clampCssByte(cssHueToRgb(m1, m2, h) * 255), clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255), 1);\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n    return rgba;\n}\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n    var vMin = Math.min(R, G, B);\n    var vMax = Math.max(R, G, B);\n    var delta = vMax - vMin;\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n        if (H < 0) {\n            H += 1;\n        }\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n    var hsla = [H * 360, S, L];\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n    return hsla;\n}\nexport function lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (colorArr[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\nexport function toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\nexport function fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    out = out || [];\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n    return out;\n}\nexport var fastMapToColor = fastLerp;\nexport function lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)) {\n        return;\n    }\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n    var color = stringify([\n        clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n        clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n        clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n        clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n    ], 'rgba');\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\nexport var mapToColor = lerp;\nexport function modifyHSL(color, h, s, l) {\n    var colorArr = parse(color);\n    if (color) {\n        colorArr = rgba2hsla(colorArr);\n        h != null && (colorArr[0] = clampCssAngle(h));\n        s != null && (colorArr[1] = parseCssFloat(s));\n        l != null && (colorArr[2] = parseCssFloat(l));\n        return stringify(hsla2rgba(colorArr), 'rgba');\n    }\n}\nexport function modifyAlpha(color, alpha) {\n    var colorArr = parse(color);\n    if (colorArr && alpha != null) {\n        colorArr[3] = clampCssFloat(alpha);\n        return stringify(colorArr, 'rgba');\n    }\n}\nexport function stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\nexport function lum(color, backgroundLum) {\n    var arr = parse(color);\n    return arr\n        ? (0.299 * arr[0] + 0.587 * arr[1] + 0.114 * arr[2]) * arr[3] / 255\n            + (1 - arr[3]) * backgroundLum\n        : 0;\n}\nexport function random() {\n    return stringify([\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255),\n        Math.round(Math.random() * 255)\n    ], 'rgb');\n}\nvar liftedColorCache = new LRU(100);\nexport function liftColor(color) {\n    if (isString(color)) {\n        var liftedColor = liftedColorCache.get(color);\n        if (!liftedColor) {\n            liftedColor = lift(color, -0.1);\n            liftedColorCache.put(color, liftedColor);\n        }\n        return liftedColor;\n    }\n    else if (isGradientObject(color)) {\n        var ret = extend({}, color);\n        ret.colorStops = map(color.colorStops, function (stop) { return ({\n            offset: stop.offset,\n            color: lift(stop.color, -0.1)\n        }); });\n        return ret;\n    }\n    return color;\n}\n","import { RADIAN_TO_DEGREE, retrieve2, logError, isFunction } from '../core/util.js';\nimport { parse } from '../tool/color.js';\nimport env from '../core/env.js';\nvar mathRound = Math.round;\nexport function normalizeColor(color) {\n    var opacity;\n    if (!color || color === 'transparent') {\n        color = 'none';\n    }\n    else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n        var arr = parse(color);\n        if (arr) {\n            color = 'rgb(' + arr[0] + ',' + arr[1] + ',' + arr[2] + ')';\n            opacity = arr[3];\n        }\n    }\n    return {\n        color: color,\n        opacity: opacity == null ? 1 : opacity\n    };\n}\nvar EPSILON = 1e-4;\nexport function isAroundZero(transform) {\n    return transform < EPSILON && transform > -EPSILON;\n}\nexport function round3(transform) {\n    return mathRound(transform * 1e3) / 1e3;\n}\nexport function round4(transform) {\n    return mathRound(transform * 1e4) / 1e4;\n}\nexport function round1(transform) {\n    return mathRound(transform * 10) / 10;\n}\nexport function getMatrixStr(m) {\n    return 'matrix('\n        + round3(m[0]) + ','\n        + round3(m[1]) + ','\n        + round3(m[2]) + ','\n        + round3(m[3]) + ','\n        + round4(m[4]) + ','\n        + round4(m[5])\n        + ')';\n}\nexport var TEXT_ALIGN_TO_ANCHOR = {\n    left: 'start',\n    right: 'end',\n    center: 'middle',\n    middle: 'middle'\n};\nexport function adjustTextY(y, lineHeight, textBaseline) {\n    if (textBaseline === 'top') {\n        y += lineHeight / 2;\n    }\n    else if (textBaseline === 'bottom') {\n        y -= lineHeight / 2;\n    }\n    return y;\n}\nexport function hasShadow(style) {\n    return style\n        && (style.shadowBlur || style.shadowOffsetX || style.shadowOffsetY);\n}\nexport function getShadowKey(displayable) {\n    var style = displayable.style;\n    var globalScale = displayable.getGlobalScale();\n    return [\n        style.shadowColor,\n        (style.shadowBlur || 0).toFixed(2),\n        (style.shadowOffsetX || 0).toFixed(2),\n        (style.shadowOffsetY || 0).toFixed(2),\n        globalScale[0],\n        globalScale[1]\n    ].join(',');\n}\nexport function getClipPathsKey(clipPaths) {\n    var key = [];\n    if (clipPaths) {\n        for (var i = 0; i < clipPaths.length; i++) {\n            var clipPath = clipPaths[i];\n            key.push(clipPath.id);\n        }\n    }\n    return key.join(',');\n}\nexport function isImagePattern(val) {\n    return val && (!!val.image);\n}\nexport function isSVGPattern(val) {\n    return val && (!!val.svgElement);\n}\nexport function isPattern(val) {\n    return isImagePattern(val) || isSVGPattern(val);\n}\nexport function isLinearGradient(val) {\n    return val.type === 'linear';\n}\nexport function isRadialGradient(val) {\n    return val.type === 'radial';\n}\nexport function isGradient(val) {\n    return val && (val.type === 'linear'\n        || val.type === 'radial');\n}\nexport function getIdURL(id) {\n    return \"url(#\" + id + \")\";\n}\nexport function getPathPrecision(el) {\n    var scale = el.getGlobalScale();\n    var size = Math.max(scale[0], scale[1]);\n    return Math.max(Math.ceil(Math.log(size) / Math.log(10)), 1);\n}\nexport function getSRTTransformString(transform) {\n    var x = transform.x || 0;\n    var y = transform.y || 0;\n    var rotation = (transform.rotation || 0) * RADIAN_TO_DEGREE;\n    var scaleX = retrieve2(transform.scaleX, 1);\n    var scaleY = retrieve2(transform.scaleY, 1);\n    var skewX = transform.skewX || 0;\n    var skewY = transform.skewY || 0;\n    var res = [];\n    if (x || y) {\n        res.push(\"translate(\" + x + \"px,\" + y + \"px)\");\n    }\n    if (rotation) {\n        res.push(\"rotate(\" + rotation + \")\");\n    }\n    if (scaleX !== 1 || scaleY !== 1) {\n        res.push(\"scale(\" + scaleX + \",\" + scaleY + \")\");\n    }\n    if (skewX || skewY) {\n        res.push(\"skew(\" + mathRound(skewX * RADIAN_TO_DEGREE) + \"deg, \" + mathRound(skewY * RADIAN_TO_DEGREE) + \"deg)\");\n    }\n    return res.join(' ');\n}\nexport var encodeBase64 = (function () {\n    if (env.hasGlobalWindow && isFunction(window.btoa)) {\n        return function (str) {\n            return window.btoa(unescape(encodeURIComponent(str)));\n        };\n    }\n    if (typeof Buffer !== 'undefined') {\n        return function (str) {\n            return Buffer.from(str).toString('base64');\n        };\n    }\n    return function (str) {\n        if (process.env.NODE_ENV !== 'production') {\n            logError('Base64 isn\\'t natively supported in the current environment.');\n        }\n        return null;\n    };\n})();\n","import Clip from './Clip.js';\nimport * as color from '../tool/color.js';\nimport { eqNaN, extend, isArrayLike, isFunction, isGradientObject, isNumber, isString, keys, logError, map } from '../core/util.js';\nimport easingFuncs from './easing.js';\nimport { createCubicEasingFunc } from './cubicEasing.js';\nimport { isLinearGradient, isRadialGradient } from '../svg/helper.js';\n;\nvar arraySlice = Array.prototype.slice;\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\nfunction interpolate1DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = interpolateNumber(p0[i], p1[i], percent);\n    }\n    return out;\n}\nfunction interpolate2DArray(out, p0, p1, percent) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = interpolateNumber(p0[i][j], p1[i][j], percent);\n        }\n    }\n    return out;\n}\nfunction add1DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    for (var i = 0; i < len; i++) {\n        out[i] = p0[i] + p1[i] * sign;\n    }\n    return out;\n}\nfunction add2DArray(out, p0, p1, sign) {\n    var len = p0.length;\n    var len2 = len && p0[0].length;\n    for (var i = 0; i < len; i++) {\n        if (!out[i]) {\n            out[i] = [];\n        }\n        for (var j = 0; j < len2; j++) {\n            out[i][j] = p0[i][j] + p1[i][j] * sign;\n        }\n    }\n    return out;\n}\nfunction fillColorStops(val0, val1) {\n    var len0 = val0.length;\n    var len1 = val1.length;\n    var shorterArr = len0 > len1 ? val1 : val0;\n    var shorterLen = Math.min(len0, len1);\n    var last = shorterArr[shorterLen - 1] || { color: [0, 0, 0, 0], offset: 0 };\n    for (var i = shorterLen; i < Math.max(len0, len1); i++) {\n        shorterArr.push({\n            offset: last.offset,\n            color: last.color.slice()\n        });\n    }\n}\nfunction fillArray(val0, val1, arrDim) {\n    var arr0 = val0;\n    var arr1 = val1;\n    if (!arr0.push || !arr1.push) {\n        return;\n    }\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            arr0.length = arr1Len;\n        }\n        else {\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i]));\n            }\n        }\n    }\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\nexport function cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        }\n        return arraySlice.call(value);\n    }\n    return value;\n}\nfunction rgba2String(rgba) {\n    rgba[0] = Math.floor(rgba[0]) || 0;\n    rgba[1] = Math.floor(rgba[1]) || 0;\n    rgba[2] = Math.floor(rgba[2]) || 0;\n    rgba[3] = rgba[3] == null ? 1 : rgba[3];\n    return 'rgba(' + rgba.join(',') + ')';\n}\nfunction guessArrayDim(value) {\n    return isArrayLike(value && value[0]) ? 2 : 1;\n}\nvar VALUE_TYPE_NUMBER = 0;\nvar VALUE_TYPE_1D_ARRAY = 1;\nvar VALUE_TYPE_2D_ARRAY = 2;\nvar VALUE_TYPE_COLOR = 3;\nvar VALUE_TYPE_LINEAR_GRADIENT = 4;\nvar VALUE_TYPE_RADIAL_GRADIENT = 5;\nvar VALUE_TYPE_UNKOWN = 6;\nfunction isGradientValueType(valType) {\n    return valType === VALUE_TYPE_LINEAR_GRADIENT || valType === VALUE_TYPE_RADIAL_GRADIENT;\n}\nfunction isArrayValueType(valType) {\n    return valType === VALUE_TYPE_1D_ARRAY || valType === VALUE_TYPE_2D_ARRAY;\n}\nvar tmpRgba = [0, 0, 0, 0];\nvar Track = (function () {\n    function Track(propName) {\n        this.keyframes = [];\n        this.discrete = false;\n        this._invalid = false;\n        this._needsSort = false;\n        this._lastFr = 0;\n        this._lastFrP = 0;\n        this.propName = propName;\n    }\n    Track.prototype.isFinished = function () {\n        return this._finished;\n    };\n    Track.prototype.setFinished = function () {\n        this._finished = true;\n        if (this._additiveTrack) {\n            this._additiveTrack.setFinished();\n        }\n    };\n    Track.prototype.needsAnimate = function () {\n        return this.keyframes.length >= 1;\n    };\n    Track.prototype.getAdditiveTrack = function () {\n        return this._additiveTrack;\n    };\n    Track.prototype.addKeyframe = function (time, rawValue, easing) {\n        this._needsSort = true;\n        var keyframes = this.keyframes;\n        var len = keyframes.length;\n        var discrete = false;\n        var valType = VALUE_TYPE_UNKOWN;\n        var value = rawValue;\n        if (isArrayLike(rawValue)) {\n            var arrayDim = guessArrayDim(rawValue);\n            valType = arrayDim;\n            if (arrayDim === 1 && !isNumber(rawValue[0])\n                || arrayDim === 2 && !isNumber(rawValue[0][0])) {\n                discrete = true;\n            }\n        }\n        else {\n            if (isNumber(rawValue) && !eqNaN(rawValue)) {\n                valType = VALUE_TYPE_NUMBER;\n            }\n            else if (isString(rawValue)) {\n                if (!isNaN(+rawValue)) {\n                    valType = VALUE_TYPE_NUMBER;\n                }\n                else {\n                    var colorArray = color.parse(rawValue);\n                    if (colorArray) {\n                        value = colorArray;\n                        valType = VALUE_TYPE_COLOR;\n                    }\n                }\n            }\n            else if (isGradientObject(rawValue)) {\n                var parsedGradient = extend({}, value);\n                parsedGradient.colorStops = map(rawValue.colorStops, function (colorStop) { return ({\n                    offset: colorStop.offset,\n                    color: color.parse(colorStop.color)\n                }); });\n                if (isLinearGradient(rawValue)) {\n                    valType = VALUE_TYPE_LINEAR_GRADIENT;\n                }\n                else if (isRadialGradient(rawValue)) {\n                    valType = VALUE_TYPE_RADIAL_GRADIENT;\n                }\n                value = parsedGradient;\n            }\n        }\n        if (len === 0) {\n            this.valType = valType;\n        }\n        else if (valType !== this.valType || valType === VALUE_TYPE_UNKOWN) {\n            discrete = true;\n        }\n        this.discrete = this.discrete || discrete;\n        var kf = {\n            time: time,\n            value: value,\n            rawValue: rawValue,\n            percent: 0\n        };\n        if (easing) {\n            kf.easing = easing;\n            kf.easingFunc = isFunction(easing)\n                ? easing\n                : easingFuncs[easing] || createCubicEasingFunc(easing);\n        }\n        keyframes.push(kf);\n        return kf;\n    };\n    Track.prototype.prepare = function (maxTime, additiveTrack) {\n        var kfs = this.keyframes;\n        if (this._needsSort) {\n            kfs.sort(function (a, b) {\n                return a.time - b.time;\n            });\n        }\n        var valType = this.valType;\n        var kfsLen = kfs.length;\n        var lastKf = kfs[kfsLen - 1];\n        var isDiscrete = this.discrete;\n        var isArr = isArrayValueType(valType);\n        var isGradient = isGradientValueType(valType);\n        for (var i = 0; i < kfsLen; i++) {\n            var kf = kfs[i];\n            var value = kf.value;\n            var lastValue = lastKf.value;\n            kf.percent = kf.time / maxTime;\n            if (!isDiscrete) {\n                if (isArr && i !== kfsLen - 1) {\n                    fillArray(value, lastValue, valType);\n                }\n                else if (isGradient) {\n                    fillColorStops(value.colorStops, lastValue.colorStops);\n                }\n            }\n        }\n        if (!isDiscrete\n            && valType !== VALUE_TYPE_RADIAL_GRADIENT\n            && additiveTrack\n            && this.needsAnimate()\n            && additiveTrack.needsAnimate()\n            && valType === additiveTrack.valType\n            && !additiveTrack._finished) {\n            this._additiveTrack = additiveTrack;\n            var startValue = kfs[0].value;\n            for (var i = 0; i < kfsLen; i++) {\n                if (valType === VALUE_TYPE_NUMBER) {\n                    kfs[i].additiveValue = kfs[i].value - startValue;\n                }\n                else if (valType === VALUE_TYPE_COLOR) {\n                    kfs[i].additiveValue =\n                        add1DArray([], kfs[i].value, startValue, -1);\n                }\n                else if (isArrayValueType(valType)) {\n                    kfs[i].additiveValue = valType === VALUE_TYPE_1D_ARRAY\n                        ? add1DArray([], kfs[i].value, startValue, -1)\n                        : add2DArray([], kfs[i].value, startValue, -1);\n                }\n            }\n        }\n    };\n    Track.prototype.step = function (target, percent) {\n        if (this._finished) {\n            return;\n        }\n        if (this._additiveTrack && this._additiveTrack._finished) {\n            this._additiveTrack = null;\n        }\n        var isAdditive = this._additiveTrack != null;\n        var valueKey = isAdditive ? 'additiveValue' : 'value';\n        var valType = this.valType;\n        var keyframes = this.keyframes;\n        var kfsNum = keyframes.length;\n        var propName = this.propName;\n        var isValueColor = valType === VALUE_TYPE_COLOR;\n        var frameIdx;\n        var lastFrame = this._lastFr;\n        var mathMin = Math.min;\n        var frame;\n        var nextFrame;\n        if (kfsNum === 1) {\n            frame = nextFrame = keyframes[0];\n        }\n        else {\n            if (percent < 0) {\n                frameIdx = 0;\n            }\n            else if (percent < this._lastFrP) {\n                var start = mathMin(lastFrame + 1, kfsNum - 1);\n                for (frameIdx = start; frameIdx >= 0; frameIdx--) {\n                    if (keyframes[frameIdx].percent <= percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx, kfsNum - 2);\n            }\n            else {\n                for (frameIdx = lastFrame; frameIdx < kfsNum; frameIdx++) {\n                    if (keyframes[frameIdx].percent > percent) {\n                        break;\n                    }\n                }\n                frameIdx = mathMin(frameIdx - 1, kfsNum - 2);\n            }\n            nextFrame = keyframes[frameIdx + 1];\n            frame = keyframes[frameIdx];\n        }\n        if (!(frame && nextFrame)) {\n            return;\n        }\n        this._lastFr = frameIdx;\n        this._lastFrP = percent;\n        var interval = (nextFrame.percent - frame.percent);\n        var w = interval === 0 ? 1 : mathMin((percent - frame.percent) / interval, 1);\n        if (nextFrame.easingFunc) {\n            w = nextFrame.easingFunc(w);\n        }\n        var targetArr = isAdditive ? this._additiveValue\n            : (isValueColor ? tmpRgba : target[propName]);\n        if ((isArrayValueType(valType) || isValueColor) && !targetArr) {\n            targetArr = this._additiveValue = [];\n        }\n        if (this.discrete) {\n            target[propName] = w < 1 ? frame.rawValue : nextFrame.rawValue;\n        }\n        else if (isArrayValueType(valType)) {\n            valType === VALUE_TYPE_1D_ARRAY\n                ? interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w)\n                : interpolate2DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n        }\n        else if (isGradientValueType(valType)) {\n            var val = frame[valueKey];\n            var nextVal_1 = nextFrame[valueKey];\n            var isLinearGradient_1 = valType === VALUE_TYPE_LINEAR_GRADIENT;\n            target[propName] = {\n                type: isLinearGradient_1 ? 'linear' : 'radial',\n                x: interpolateNumber(val.x, nextVal_1.x, w),\n                y: interpolateNumber(val.y, nextVal_1.y, w),\n                colorStops: map(val.colorStops, function (colorStop, idx) {\n                    var nextColorStop = nextVal_1.colorStops[idx];\n                    return {\n                        offset: interpolateNumber(colorStop.offset, nextColorStop.offset, w),\n                        color: rgba2String(interpolate1DArray([], colorStop.color, nextColorStop.color, w))\n                    };\n                }),\n                global: nextVal_1.global\n            };\n            if (isLinearGradient_1) {\n                target[propName].x2 = interpolateNumber(val.x2, nextVal_1.x2, w);\n                target[propName].y2 = interpolateNumber(val.y2, nextVal_1.y2, w);\n            }\n            else {\n                target[propName].r = interpolateNumber(val.r, nextVal_1.r, w);\n            }\n        }\n        else if (isValueColor) {\n            interpolate1DArray(targetArr, frame[valueKey], nextFrame[valueKey], w);\n            if (!isAdditive) {\n                target[propName] = rgba2String(targetArr);\n            }\n        }\n        else {\n            var value = interpolateNumber(frame[valueKey], nextFrame[valueKey], w);\n            if (isAdditive) {\n                this._additiveValue = value;\n            }\n            else {\n                target[propName] = value;\n            }\n        }\n        if (isAdditive) {\n            this._addToTarget(target);\n        }\n    };\n    Track.prototype._addToTarget = function (target) {\n        var valType = this.valType;\n        var propName = this.propName;\n        var additiveValue = this._additiveValue;\n        if (valType === VALUE_TYPE_NUMBER) {\n            target[propName] = target[propName] + additiveValue;\n        }\n        else if (valType === VALUE_TYPE_COLOR) {\n            color.parse(target[propName], tmpRgba);\n            add1DArray(tmpRgba, tmpRgba, additiveValue, 1);\n            target[propName] = rgba2String(tmpRgba);\n        }\n        else if (valType === VALUE_TYPE_1D_ARRAY) {\n            add1DArray(target[propName], target[propName], additiveValue, 1);\n        }\n        else if (valType === VALUE_TYPE_2D_ARRAY) {\n            add2DArray(target[propName], target[propName], additiveValue, 1);\n        }\n    };\n    return Track;\n}());\nvar Animator = (function () {\n    function Animator(target, loop, allowDiscreteAnimation, additiveTo) {\n        this._tracks = {};\n        this._trackKeys = [];\n        this._maxTime = 0;\n        this._started = 0;\n        this._clip = null;\n        this._target = target;\n        this._loop = loop;\n        if (loop && additiveTo) {\n            logError('Can\\' use additive animation on looped animation.');\n            return;\n        }\n        this._additiveAnimators = additiveTo;\n        this._allowDiscrete = allowDiscreteAnimation;\n    }\n    Animator.prototype.getMaxTime = function () {\n        return this._maxTime;\n    };\n    Animator.prototype.getDelay = function () {\n        return this._delay;\n    };\n    Animator.prototype.getLoop = function () {\n        return this._loop;\n    };\n    Animator.prototype.getTarget = function () {\n        return this._target;\n    };\n    Animator.prototype.changeTarget = function (target) {\n        this._target = target;\n    };\n    Animator.prototype.when = function (time, props, easing) {\n        return this.whenWithKeys(time, props, keys(props), easing);\n    };\n    Animator.prototype.whenWithKeys = function (time, props, propNames, easing) {\n        var tracks = this._tracks;\n        for (var i = 0; i < propNames.length; i++) {\n            var propName = propNames[i];\n            var track = tracks[propName];\n            if (!track) {\n                track = tracks[propName] = new Track(propName);\n                var initialValue = void 0;\n                var additiveTrack = this._getAdditiveTrack(propName);\n                if (additiveTrack) {\n                    var addtiveTrackKfs = additiveTrack.keyframes;\n                    var lastFinalKf = addtiveTrackKfs[addtiveTrackKfs.length - 1];\n                    initialValue = lastFinalKf && lastFinalKf.value;\n                    if (additiveTrack.valType === VALUE_TYPE_COLOR && initialValue) {\n                        initialValue = rgba2String(initialValue);\n                    }\n                }\n                else {\n                    initialValue = this._target[propName];\n                }\n                if (initialValue == null) {\n                    continue;\n                }\n                if (time > 0) {\n                    track.addKeyframe(0, cloneValue(initialValue), easing);\n                }\n                this._trackKeys.push(propName);\n            }\n            track.addKeyframe(time, cloneValue(props[propName]), easing);\n        }\n        this._maxTime = Math.max(this._maxTime, time);\n        return this;\n    };\n    Animator.prototype.pause = function () {\n        this._clip.pause();\n        this._paused = true;\n    };\n    Animator.prototype.resume = function () {\n        this._clip.resume();\n        this._paused = false;\n    };\n    Animator.prototype.isPaused = function () {\n        return !!this._paused;\n    };\n    Animator.prototype.duration = function (duration) {\n        this._maxTime = duration;\n        this._force = true;\n        return this;\n    };\n    Animator.prototype._doneCallback = function () {\n        this._setTracksFinished();\n        this._clip = null;\n        var doneList = this._doneCbs;\n        if (doneList) {\n            var len = doneList.length;\n            for (var i = 0; i < len; i++) {\n                doneList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._abortedCallback = function () {\n        this._setTracksFinished();\n        var animation = this.animation;\n        var abortedList = this._abortedCbs;\n        if (animation) {\n            animation.removeClip(this._clip);\n        }\n        this._clip = null;\n        if (abortedList) {\n            for (var i = 0; i < abortedList.length; i++) {\n                abortedList[i].call(this);\n            }\n        }\n    };\n    Animator.prototype._setTracksFinished = function () {\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            tracks[tracksKeys[i]].setFinished();\n        }\n    };\n    Animator.prototype._getAdditiveTrack = function (trackName) {\n        var additiveTrack;\n        var additiveAnimators = this._additiveAnimators;\n        if (additiveAnimators) {\n            for (var i = 0; i < additiveAnimators.length; i++) {\n                var track = additiveAnimators[i].getTrack(trackName);\n                if (track) {\n                    additiveTrack = track;\n                }\n            }\n        }\n        return additiveTrack;\n    };\n    Animator.prototype.start = function (easing) {\n        if (this._started > 0) {\n            return;\n        }\n        this._started = 1;\n        var self = this;\n        var tracks = [];\n        var maxTime = this._maxTime || 0;\n        for (var i = 0; i < this._trackKeys.length; i++) {\n            var propName = this._trackKeys[i];\n            var track = this._tracks[propName];\n            var additiveTrack = this._getAdditiveTrack(propName);\n            var kfs = track.keyframes;\n            var kfsNum = kfs.length;\n            track.prepare(maxTime, additiveTrack);\n            if (track.needsAnimate()) {\n                if (!this._allowDiscrete && track.discrete) {\n                    var lastKf = kfs[kfsNum - 1];\n                    if (lastKf) {\n                        self._target[track.propName] = lastKf.rawValue;\n                    }\n                    track.setFinished();\n                }\n                else {\n                    tracks.push(track);\n                }\n            }\n        }\n        if (tracks.length || this._force) {\n            var clip = new Clip({\n                life: maxTime,\n                loop: this._loop,\n                delay: this._delay || 0,\n                onframe: function (percent) {\n                    self._started = 2;\n                    var additiveAnimators = self._additiveAnimators;\n                    if (additiveAnimators) {\n                        var stillHasAdditiveAnimator = false;\n                        for (var i = 0; i < additiveAnimators.length; i++) {\n                            if (additiveAnimators[i]._clip) {\n                                stillHasAdditiveAnimator = true;\n                                break;\n                            }\n                        }\n                        if (!stillHasAdditiveAnimator) {\n                            self._additiveAnimators = null;\n                        }\n                    }\n                    for (var i = 0; i < tracks.length; i++) {\n                        tracks[i].step(self._target, percent);\n                    }\n                    var onframeList = self._onframeCbs;\n                    if (onframeList) {\n                        for (var i = 0; i < onframeList.length; i++) {\n                            onframeList[i](self._target, percent);\n                        }\n                    }\n                },\n                ondestroy: function () {\n                    self._doneCallback();\n                }\n            });\n            this._clip = clip;\n            if (this.animation) {\n                this.animation.addClip(clip);\n            }\n            if (easing) {\n                clip.setEasing(easing);\n            }\n        }\n        else {\n            this._doneCallback();\n        }\n        return this;\n    };\n    Animator.prototype.stop = function (forwardToLast) {\n        if (!this._clip) {\n            return;\n        }\n        var clip = this._clip;\n        if (forwardToLast) {\n            clip.onframe(1);\n        }\n        this._abortedCallback();\n    };\n    Animator.prototype.delay = function (time) {\n        this._delay = time;\n        return this;\n    };\n    Animator.prototype.during = function (cb) {\n        if (cb) {\n            if (!this._onframeCbs) {\n                this._onframeCbs = [];\n            }\n            this._onframeCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.done = function (cb) {\n        if (cb) {\n            if (!this._doneCbs) {\n                this._doneCbs = [];\n            }\n            this._doneCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.aborted = function (cb) {\n        if (cb) {\n            if (!this._abortedCbs) {\n                this._abortedCbs = [];\n            }\n            this._abortedCbs.push(cb);\n        }\n        return this;\n    };\n    Animator.prototype.getClip = function () {\n        return this._clip;\n    };\n    Animator.prototype.getTrack = function (propName) {\n        return this._tracks[propName];\n    };\n    Animator.prototype.getTracks = function () {\n        var _this = this;\n        return map(this._trackKeys, function (key) { return _this._tracks[key]; });\n    };\n    Animator.prototype.stopTracks = function (propNames, forwardToLast) {\n        if (!propNames.length || !this._clip) {\n            return true;\n        }\n        var tracks = this._tracks;\n        var tracksKeys = this._trackKeys;\n        for (var i = 0; i < propNames.length; i++) {\n            var track = tracks[propNames[i]];\n            if (track && !track.isFinished()) {\n                if (forwardToLast) {\n                    track.step(this._target, 1);\n                }\n                else if (this._started === 1) {\n                    track.step(this._target, 0);\n                }\n                track.setFinished();\n            }\n        }\n        var allAborted = true;\n        for (var i = 0; i < tracksKeys.length; i++) {\n            if (!tracks[tracksKeys[i]].isFinished()) {\n                allAborted = false;\n                break;\n            }\n        }\n        if (allAborted) {\n            this._abortedCallback();\n        }\n        return allAborted;\n    };\n    Animator.prototype.saveTo = function (target, trackKeys, firstOrLast) {\n        if (!target) {\n            return;\n        }\n        trackKeys = trackKeys || this._trackKeys;\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track || track.isFinished()) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            var kf = kfs[firstOrLast ? 0 : kfs.length - 1];\n            if (kf) {\n                target[propName] = cloneValue(kf.rawValue);\n            }\n        }\n    };\n    Animator.prototype.__changeFinalValue = function (finalProps, trackKeys) {\n        trackKeys = trackKeys || keys(finalProps);\n        for (var i = 0; i < trackKeys.length; i++) {\n            var propName = trackKeys[i];\n            var track = this._tracks[propName];\n            if (!track) {\n                continue;\n            }\n            var kfs = track.keyframes;\n            if (kfs.length > 1) {\n                var lastKf = kfs.pop();\n                track.addKeyframe(lastKf.time, finalProps[propName]);\n                track.prepare(this._maxTime, track.getAdditiveTrack());\n            }\n        }\n    };\n    return Animator;\n}());\nexport default Animator;\n","import { __extends } from \"tslib\";\nimport Eventful from '../core/Eventful.js';\nimport requestAnimationFrame from './requestAnimationFrame.js';\nimport Animator from './Animator.js';\nexport function getTime() {\n    return new Date().getTime();\n}\nvar Animation = (function (_super) {\n    __extends(Animation, _super);\n    function Animation(opts) {\n        var _this = _super.call(this) || this;\n        _this._running = false;\n        _this._time = 0;\n        _this._pausedTime = 0;\n        _this._pauseStart = 0;\n        _this._paused = false;\n        opts = opts || {};\n        _this.stage = opts.stage || {};\n        return _this;\n    }\n    Animation.prototype.addClip = function (clip) {\n        if (clip.animation) {\n            this.removeClip(clip);\n        }\n        if (!this._head) {\n            this._head = this._tail = clip;\n        }\n        else {\n            this._tail.next = clip;\n            clip.prev = this._tail;\n            clip.next = null;\n            this._tail = clip;\n        }\n        clip.animation = this;\n    };\n    Animation.prototype.addAnimator = function (animator) {\n        animator.animation = this;\n        var clip = animator.getClip();\n        if (clip) {\n            this.addClip(clip);\n        }\n    };\n    Animation.prototype.removeClip = function (clip) {\n        if (!clip.animation) {\n            return;\n        }\n        var prev = clip.prev;\n        var next = clip.next;\n        if (prev) {\n            prev.next = next;\n        }\n        else {\n            this._head = next;\n        }\n        if (next) {\n            next.prev = prev;\n        }\n        else {\n            this._tail = prev;\n        }\n        clip.next = clip.prev = clip.animation = null;\n    };\n    Animation.prototype.removeAnimator = function (animator) {\n        var clip = animator.getClip();\n        if (clip) {\n            this.removeClip(clip);\n        }\n        animator.animation = null;\n    };\n    Animation.prototype.update = function (notTriggerFrameAndStageUpdate) {\n        var time = getTime() - this._pausedTime;\n        var delta = time - this._time;\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            var finished = clip.step(time, delta);\n            if (finished) {\n                clip.ondestroy();\n                this.removeClip(clip);\n                clip = nextClip;\n            }\n            else {\n                clip = nextClip;\n            }\n        }\n        this._time = time;\n        if (!notTriggerFrameAndStageUpdate) {\n            this.trigger('frame', delta);\n            this.stage.update && this.stage.update();\n        }\n    };\n    Animation.prototype._startLoop = function () {\n        var self = this;\n        this._running = true;\n        function step() {\n            if (self._running) {\n                requestAnimationFrame(step);\n                !self._paused && self.update();\n            }\n        }\n        requestAnimationFrame(step);\n    };\n    Animation.prototype.start = function () {\n        if (this._running) {\n            return;\n        }\n        this._time = getTime();\n        this._pausedTime = 0;\n        this._startLoop();\n    };\n    Animation.prototype.stop = function () {\n        this._running = false;\n    };\n    Animation.prototype.pause = function () {\n        if (!this._paused) {\n            this._pauseStart = getTime();\n            this._paused = true;\n        }\n    };\n    Animation.prototype.resume = function () {\n        if (this._paused) {\n            this._pausedTime += getTime() - this._pauseStart;\n            this._paused = false;\n        }\n    };\n    Animation.prototype.clear = function () {\n        var clip = this._head;\n        while (clip) {\n            var nextClip = clip.next;\n            clip.prev = clip.next = clip.animation = null;\n            clip = nextClip;\n        }\n        this._head = this._tail = null;\n    };\n    Animation.prototype.isFinished = function () {\n        return this._head == null;\n    };\n    Animation.prototype.animate = function (target, options) {\n        options = options || {};\n        this.start();\n        var animator = new Animator(target, options.loop);\n        this.addAnimator(animator);\n        return animator;\n    };\n    return Animation;\n}(Eventful));\nexport default Animation;\n","import { __extends } from \"tslib\";\nimport { addEventListener, removeEventListener, normalizeEvent, getNativeEvent } from '../core/event.js';\nimport * as zrUtil from '../core/util.js';\nimport Eventful from '../core/Eventful.js';\nimport env from '../core/env.js';\nvar TOUCH_CLICK_DELAY = 300;\nvar globalEventSupported = env.domSupported;\nvar localNativeListenerNames = (function () {\n    var mouseHandlerNames = [\n        'click', 'dblclick', 'mousewheel', 'wheel', 'mouseout',\n        'mouseup', 'mousedown', 'mousemove', 'contextmenu'\n    ];\n    var touchHandlerNames = [\n        'touchstart', 'touchend', 'touchmove'\n    ];\n    var pointerEventNameMap = {\n        pointerdown: 1, pointerup: 1, pointermove: 1, pointerout: 1\n    };\n    var pointerHandlerNames = zrUtil.map(mouseHandlerNames, function (name) {\n        var nm = name.replace('mouse', 'pointer');\n        return pointerEventNameMap.hasOwnProperty(nm) ? nm : name;\n    });\n    return {\n        mouse: mouseHandlerNames,\n        touch: touchHandlerNames,\n        pointer: pointerHandlerNames\n    };\n})();\nvar globalNativeListenerNames = {\n    mouse: ['mousemove', 'mouseup'],\n    pointer: ['pointermove', 'pointerup']\n};\nvar wheelEventSupported = false;\nfunction isPointerFromTouch(event) {\n    var pointerType = event.pointerType;\n    return pointerType === 'pen' || pointerType === 'touch';\n}\nfunction setTouchTimer(scope) {\n    scope.touching = true;\n    if (scope.touchTimer != null) {\n        clearTimeout(scope.touchTimer);\n        scope.touchTimer = null;\n    }\n    scope.touchTimer = setTimeout(function () {\n        scope.touching = false;\n        scope.touchTimer = null;\n    }, 700);\n}\nfunction markTouch(event) {\n    event && (event.zrByTouch = true);\n}\nfunction normalizeGlobalEvent(instance, event) {\n    return normalizeEvent(instance.dom, new FakeGlobalEvent(instance, event), true);\n}\nfunction isLocalEl(instance, el) {\n    var elTmp = el;\n    var isLocal = false;\n    while (elTmp && elTmp.nodeType !== 9\n        && !(isLocal = elTmp.domBelongToZr\n            || (elTmp !== el && elTmp === instance.painterRoot))) {\n        elTmp = elTmp.parentNode;\n    }\n    return isLocal;\n}\nvar FakeGlobalEvent = (function () {\n    function FakeGlobalEvent(instance, event) {\n        this.stopPropagation = zrUtil.noop;\n        this.stopImmediatePropagation = zrUtil.noop;\n        this.preventDefault = zrUtil.noop;\n        this.type = event.type;\n        this.target = this.currentTarget = instance.dom;\n        this.pointerType = event.pointerType;\n        this.clientX = event.clientX;\n        this.clientY = event.clientY;\n    }\n    return FakeGlobalEvent;\n}());\nvar localDOMHandlers = {\n    mousedown: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__mayPointerCapture = [event.zrX, event.zrY];\n        this.trigger('mousedown', event);\n    },\n    mousemove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var downPoint = this.__mayPointerCapture;\n        if (downPoint && (event.zrX !== downPoint[0] || event.zrY !== downPoint[1])) {\n            this.__togglePointerCapture(true);\n        }\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n    },\n    mouseout: function (event) {\n        event = normalizeEvent(this.dom, event);\n        var element = event.toElement || event.relatedTarget;\n        if (!isLocalEl(this, element)) {\n            if (this.__pointerCapturing) {\n                event.zrEventControl = 'no_globalout';\n            }\n            this.trigger('mouseout', event);\n        }\n    },\n    wheel: function (event) {\n        wheelEventSupported = true;\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    mousewheel: function (event) {\n        if (wheelEventSupported) {\n            return;\n        }\n        event = normalizeEvent(this.dom, event);\n        this.trigger('mousewheel', event);\n    },\n    touchstart: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.__lastTouchMoment = new Date();\n        this.handler.processGesture(event, 'start');\n        localDOMHandlers.mousemove.call(this, event);\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    touchmove: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'change');\n        localDOMHandlers.mousemove.call(this, event);\n    },\n    touchend: function (event) {\n        event = normalizeEvent(this.dom, event);\n        markTouch(event);\n        this.handler.processGesture(event, 'end');\n        localDOMHandlers.mouseup.call(this, event);\n        if (+new Date() - (+this.__lastTouchMoment) < TOUCH_CLICK_DELAY) {\n            localDOMHandlers.click.call(this, event);\n        }\n    },\n    pointerdown: function (event) {\n        localDOMHandlers.mousedown.call(this, event);\n    },\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        localDOMHandlers.mouseup.call(this, event);\n    },\n    pointerout: function (event) {\n        if (!isPointerFromTouch(event)) {\n            localDOMHandlers.mouseout.call(this, event);\n        }\n    }\n};\nzrUtil.each(['click', 'dblclick', 'contextmenu'], function (name) {\n    localDOMHandlers[name] = function (event) {\n        event = normalizeEvent(this.dom, event);\n        this.trigger(name, event);\n    };\n});\nvar globalDOMHandlers = {\n    pointermove: function (event) {\n        if (!isPointerFromTouch(event)) {\n            globalDOMHandlers.mousemove.call(this, event);\n        }\n    },\n    pointerup: function (event) {\n        globalDOMHandlers.mouseup.call(this, event);\n    },\n    mousemove: function (event) {\n        this.trigger('mousemove', event);\n    },\n    mouseup: function (event) {\n        var pointerCaptureReleasing = this.__pointerCapturing;\n        this.__togglePointerCapture(false);\n        this.trigger('mouseup', event);\n        if (pointerCaptureReleasing) {\n            event.zrEventControl = 'only_globalout';\n            this.trigger('mouseout', event);\n        }\n    }\n};\nfunction mountLocalDOMEventListeners(instance, scope) {\n    var domHandlers = scope.domHandlers;\n    if (env.pointerEventsSupported) {\n        zrUtil.each(localNativeListenerNames.pointer, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                domHandlers[nativeEventName].call(instance, event);\n            });\n        });\n    }\n    else {\n        if (env.touchEventsSupported) {\n            zrUtil.each(localNativeListenerNames.touch, function (nativeEventName) {\n                mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                    domHandlers[nativeEventName].call(instance, event);\n                    setTouchTimer(scope);\n                });\n            });\n        }\n        zrUtil.each(localNativeListenerNames.mouse, function (nativeEventName) {\n            mountSingleDOMEventListener(scope, nativeEventName, function (event) {\n                event = getNativeEvent(event);\n                if (!scope.touching) {\n                    domHandlers[nativeEventName].call(instance, event);\n                }\n            });\n        });\n    }\n}\nfunction mountGlobalDOMEventListeners(instance, scope) {\n    if (env.pointerEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.pointer, mount);\n    }\n    else if (!env.touchEventsSupported) {\n        zrUtil.each(globalNativeListenerNames.mouse, mount);\n    }\n    function mount(nativeEventName) {\n        function nativeEventListener(event) {\n            event = getNativeEvent(event);\n            if (!isLocalEl(instance, event.target)) {\n                event = normalizeGlobalEvent(instance, event);\n                scope.domHandlers[nativeEventName].call(instance, event);\n            }\n        }\n        mountSingleDOMEventListener(scope, nativeEventName, nativeEventListener, { capture: true });\n    }\n}\nfunction mountSingleDOMEventListener(scope, nativeEventName, listener, opt) {\n    scope.mounted[nativeEventName] = listener;\n    scope.listenerOpts[nativeEventName] = opt;\n    addEventListener(scope.domTarget, nativeEventName, listener, opt);\n}\nfunction unmountDOMEventListeners(scope) {\n    var mounted = scope.mounted;\n    for (var nativeEventName in mounted) {\n        if (mounted.hasOwnProperty(nativeEventName)) {\n            removeEventListener(scope.domTarget, nativeEventName, mounted[nativeEventName], scope.listenerOpts[nativeEventName]);\n        }\n    }\n    scope.mounted = {};\n}\nvar DOMHandlerScope = (function () {\n    function DOMHandlerScope(domTarget, domHandlers) {\n        this.mounted = {};\n        this.listenerOpts = {};\n        this.touching = false;\n        this.domTarget = domTarget;\n        this.domHandlers = domHandlers;\n    }\n    return DOMHandlerScope;\n}());\nvar HandlerDomProxy = (function (_super) {\n    __extends(HandlerDomProxy, _super);\n    function HandlerDomProxy(dom, painterRoot) {\n        var _this = _super.call(this) || this;\n        _this.__pointerCapturing = false;\n        _this.dom = dom;\n        _this.painterRoot = painterRoot;\n        _this._localHandlerScope = new DOMHandlerScope(dom, localDOMHandlers);\n        if (globalEventSupported) {\n            _this._globalHandlerScope = new DOMHandlerScope(document, globalDOMHandlers);\n        }\n        mountLocalDOMEventListeners(_this, _this._localHandlerScope);\n        return _this;\n    }\n    HandlerDomProxy.prototype.dispose = function () {\n        unmountDOMEventListeners(this._localHandlerScope);\n        if (globalEventSupported) {\n            unmountDOMEventListeners(this._globalHandlerScope);\n        }\n    };\n    HandlerDomProxy.prototype.setCursor = function (cursorStyle) {\n        this.dom.style && (this.dom.style.cursor = cursorStyle || 'default');\n    };\n    HandlerDomProxy.prototype.__togglePointerCapture = function (isPointerCapturing) {\n        this.__mayPointerCapture = null;\n        if (globalEventSupported\n            && ((+this.__pointerCapturing) ^ (+isPointerCapturing))) {\n            this.__pointerCapturing = isPointerCapturing;\n            var globalHandlerScope = this._globalHandlerScope;\n            isPointerCapturing\n                ? mountGlobalDOMEventListeners(this, globalHandlerScope)\n                : unmountDOMEventListeners(globalHandlerScope);\n        }\n    };\n    return HandlerDomProxy;\n}(Eventful));\nexport default HandlerDomProxy;\n","import env from './core/env.js';\nvar dpr = 1;\nif (env.hasGlobalWindow) {\n    dpr = Math.max(window.devicePixelRatio\n        || (window.screen && window.screen.deviceXDPI / window.screen.logicalXDPI)\n        || 1, 1);\n}\nexport var debugMode = 0;\nexport var devicePixelRatio = dpr;\nexport var DARK_MODE_THRESHOLD = 0.4;\nexport var DARK_LABEL_COLOR = '#333';\nexport var LIGHT_LABEL_COLOR = '#ccc';\nexport var LIGHTER_LABEL_COLOR = '#eee';\n","import * as matrix from './matrix.js';\nimport * as vector from './vector.js';\nvar mIdentity = matrix.identity;\nvar EPSILON = 5e-5;\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\nvar scaleTmp = [];\nvar tmpTransform = [];\nvar originTransform = matrix.create();\nvar abs = Math.abs;\nvar Transformable = (function () {\n    function Transformable() {\n    }\n    Transformable.prototype.getLocalTransform = function (m) {\n        return Transformable.getLocalTransform(this, m);\n    };\n    Transformable.prototype.setPosition = function (arr) {\n        this.x = arr[0];\n        this.y = arr[1];\n    };\n    Transformable.prototype.setScale = function (arr) {\n        this.scaleX = arr[0];\n        this.scaleY = arr[1];\n    };\n    Transformable.prototype.setSkew = function (arr) {\n        this.skewX = arr[0];\n        this.skewY = arr[1];\n    };\n    Transformable.prototype.setOrigin = function (arr) {\n        this.originX = arr[0];\n        this.originY = arr[1];\n    };\n    Transformable.prototype.needLocalTransform = function () {\n        return isNotAroundZero(this.rotation)\n            || isNotAroundZero(this.x)\n            || isNotAroundZero(this.y)\n            || isNotAroundZero(this.scaleX - 1)\n            || isNotAroundZero(this.scaleY - 1)\n            || isNotAroundZero(this.skewX)\n            || isNotAroundZero(this.skewY);\n    };\n    Transformable.prototype.updateTransform = function () {\n        var parentTransform = this.parent && this.parent.transform;\n        var needLocalTransform = this.needLocalTransform();\n        var m = this.transform;\n        if (!(needLocalTransform || parentTransform)) {\n            if (m) {\n                mIdentity(m);\n                this.invTransform = null;\n            }\n            return;\n        }\n        m = m || matrix.create();\n        if (needLocalTransform) {\n            this.getLocalTransform(m);\n        }\n        else {\n            mIdentity(m);\n        }\n        if (parentTransform) {\n            if (needLocalTransform) {\n                matrix.mul(m, parentTransform, m);\n            }\n            else {\n                matrix.copy(m, parentTransform);\n            }\n        }\n        this.transform = m;\n        this._resolveGlobalScaleRatio(m);\n    };\n    Transformable.prototype._resolveGlobalScaleRatio = function (m) {\n        var globalScaleRatio = this.globalScaleRatio;\n        if (globalScaleRatio != null && globalScaleRatio !== 1) {\n            this.getGlobalScale(scaleTmp);\n            var relX = scaleTmp[0] < 0 ? -1 : 1;\n            var relY = scaleTmp[1] < 0 ? -1 : 1;\n            var sx = ((scaleTmp[0] - relX) * globalScaleRatio + relX) / scaleTmp[0] || 0;\n            var sy = ((scaleTmp[1] - relY) * globalScaleRatio + relY) / scaleTmp[1] || 0;\n            m[0] *= sx;\n            m[1] *= sx;\n            m[2] *= sy;\n            m[3] *= sy;\n        }\n        this.invTransform = this.invTransform || matrix.create();\n        matrix.invert(this.invTransform, m);\n    };\n    Transformable.prototype.getComputedTransform = function () {\n        var transformNode = this;\n        var ancestors = [];\n        while (transformNode) {\n            ancestors.push(transformNode);\n            transformNode = transformNode.parent;\n        }\n        while (transformNode = ancestors.pop()) {\n            transformNode.updateTransform();\n        }\n        return this.transform;\n    };\n    Transformable.prototype.setLocalTransform = function (m) {\n        if (!m) {\n            return;\n        }\n        var sx = m[0] * m[0] + m[1] * m[1];\n        var sy = m[2] * m[2] + m[3] * m[3];\n        var rotation = Math.atan2(m[1], m[0]);\n        var shearX = Math.PI / 2 + rotation - Math.atan2(m[3], m[2]);\n        sy = Math.sqrt(sy) * Math.cos(shearX);\n        sx = Math.sqrt(sx);\n        this.skewX = shearX;\n        this.skewY = 0;\n        this.rotation = -rotation;\n        this.x = +m[4];\n        this.y = +m[5];\n        this.scaleX = sx;\n        this.scaleY = sy;\n        this.originX = 0;\n        this.originY = 0;\n    };\n    Transformable.prototype.decomposeTransform = function () {\n        if (!this.transform) {\n            return;\n        }\n        var parent = this.parent;\n        var m = this.transform;\n        if (parent && parent.transform) {\n            parent.invTransform = parent.invTransform || matrix.create();\n            matrix.mul(tmpTransform, parent.invTransform, m);\n            m = tmpTransform;\n        }\n        var ox = this.originX;\n        var oy = this.originY;\n        if (ox || oy) {\n            originTransform[4] = ox;\n            originTransform[5] = oy;\n            matrix.mul(tmpTransform, m, originTransform);\n            tmpTransform[4] -= ox;\n            tmpTransform[5] -= oy;\n            m = tmpTransform;\n        }\n        this.setLocalTransform(m);\n    };\n    Transformable.prototype.getGlobalScale = function (out) {\n        var m = this.transform;\n        out = out || [];\n        if (!m) {\n            out[0] = 1;\n            out[1] = 1;\n            return out;\n        }\n        out[0] = Math.sqrt(m[0] * m[0] + m[1] * m[1]);\n        out[1] = Math.sqrt(m[2] * m[2] + m[3] * m[3]);\n        if (m[0] < 0) {\n            out[0] = -out[0];\n        }\n        if (m[3] < 0) {\n            out[1] = -out[1];\n        }\n        return out;\n    };\n    Transformable.prototype.transformCoordToLocal = function (x, y) {\n        var v2 = [x, y];\n        var invTransform = this.invTransform;\n        if (invTransform) {\n            vector.applyTransform(v2, v2, invTransform);\n        }\n        return v2;\n    };\n    Transformable.prototype.transformCoordToGlobal = function (x, y) {\n        var v2 = [x, y];\n        var transform = this.transform;\n        if (transform) {\n            vector.applyTransform(v2, v2, transform);\n        }\n        return v2;\n    };\n    Transformable.prototype.getLineScale = function () {\n        var m = this.transform;\n        return m && abs(m[0] - 1) > 1e-10 && abs(m[3] - 1) > 1e-10\n            ? Math.sqrt(abs(m[0] * m[3] - m[2] * m[1]))\n            : 1;\n    };\n    Transformable.prototype.copyTransform = function (source) {\n        copyTransform(this, source);\n    };\n    Transformable.getLocalTransform = function (target, m) {\n        m = m || [];\n        var ox = target.originX || 0;\n        var oy = target.originY || 0;\n        var sx = target.scaleX;\n        var sy = target.scaleY;\n        var ax = target.anchorX;\n        var ay = target.anchorY;\n        var rotation = target.rotation || 0;\n        var x = target.x;\n        var y = target.y;\n        var skewX = target.skewX ? Math.tan(target.skewX) : 0;\n        var skewY = target.skewY ? Math.tan(-target.skewY) : 0;\n        if (ox || oy || ax || ay) {\n            var dx = ox + ax;\n            var dy = oy + ay;\n            m[4] = -dx * sx - skewX * dy * sy;\n            m[5] = -dy * sy - skewY * dx * sx;\n        }\n        else {\n            m[4] = m[5] = 0;\n        }\n        m[0] = sx;\n        m[3] = sy;\n        m[1] = skewY * sx;\n        m[2] = skewX * sy;\n        rotation && matrix.rotate(m, m, rotation);\n        m[4] += ox + x;\n        m[5] += oy + y;\n        return m;\n    };\n    Transformable.initDefaultProps = (function () {\n        var proto = Transformable.prototype;\n        proto.scaleX =\n            proto.scaleY =\n                proto.globalScaleRatio = 1;\n        proto.x =\n            proto.y =\n                proto.originX =\n                    proto.originY =\n                        proto.skewX =\n                            proto.skewY =\n                                proto.rotation =\n                                    proto.anchorX =\n                                        proto.anchorY = 0;\n    })();\n    return Transformable;\n}());\n;\nexport var TRANSFORMABLE_PROPS = [\n    'x', 'y', 'originX', 'originY', 'anchorX', 'anchorY', 'rotation', 'scaleX', 'scaleY', 'skewX', 'skewY'\n];\nexport function copyTransform(target, source) {\n    for (var i = 0; i < TRANSFORMABLE_PROPS.length; i++) {\n        var propName = TRANSFORMABLE_PROPS[i];\n        target[propName] = source[propName];\n    }\n}\nexport default Transformable;\n","import BoundingRect from '../core/BoundingRect.js';\nimport LRU from '../core/LRU.js';\nimport { DEFAULT_FONT, platformApi } from '../core/platform.js';\nvar textWidthCache = {};\nexport function getWidth(text, font) {\n    font = font || DEFAULT_FONT;\n    var cacheOfFont = textWidthCache[font];\n    if (!cacheOfFont) {\n        cacheOfFont = textWidthCache[font] = new LRU(500);\n    }\n    var width = cacheOfFont.get(text);\n    if (width == null) {\n        width = platformApi.measureText(text, font).width;\n        cacheOfFont.put(text, width);\n    }\n    return width;\n}\nexport function innerGetBoundingRect(text, font, textAlign, textBaseline) {\n    var width = getWidth(text, font);\n    var height = getLineHeight(font);\n    var x = adjustTextX(0, width, textAlign);\n    var y = adjustTextY(0, height, textBaseline);\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n}\nexport function getBoundingRect(text, font, textAlign, textBaseline) {\n    var textLines = ((text || '') + '').split('\\n');\n    var len = textLines.length;\n    if (len === 1) {\n        return innerGetBoundingRect(textLines[0], font, textAlign, textBaseline);\n    }\n    else {\n        var uniondRect = new BoundingRect(0, 0, 0, 0);\n        for (var i = 0; i < textLines.length; i++) {\n            var rect = innerGetBoundingRect(textLines[i], font, textAlign, textBaseline);\n            i === 0 ? uniondRect.copy(rect) : uniondRect.union(rect);\n        }\n        return uniondRect;\n    }\n}\nexport function adjustTextX(x, width, textAlign) {\n    if (textAlign === 'right') {\n        x -= width;\n    }\n    else if (textAlign === 'center') {\n        x -= width / 2;\n    }\n    return x;\n}\nexport function adjustTextY(y, height, verticalAlign) {\n    if (verticalAlign === 'middle') {\n        y -= height / 2;\n    }\n    else if (verticalAlign === 'bottom') {\n        y -= height;\n    }\n    return y;\n}\nexport function getLineHeight(font) {\n    return getWidth('', font);\n}\nexport function measureText(text, font) {\n    return platformApi.measureText(text, font);\n}\nexport function parsePercent(value, maxValue) {\n    if (typeof value === 'string') {\n        if (value.lastIndexOf('%') >= 0) {\n            return parseFloat(value) / 100 * maxValue;\n        }\n        return parseFloat(value);\n    }\n    return value;\n}\nexport function calculateTextPosition(out, opts, rect) {\n    var textPosition = opts.position || 'inside';\n    var distance = opts.distance != null ? opts.distance : 5;\n    var height = rect.height;\n    var width = rect.width;\n    var halfHeight = height / 2;\n    var x = rect.x;\n    var y = rect.y;\n    var textAlign = 'left';\n    var textVerticalAlign = 'top';\n    if (textPosition instanceof Array) {\n        x += parsePercent(textPosition[0], rect.width);\n        y += parsePercent(textPosition[1], rect.height);\n        textAlign = null;\n        textVerticalAlign = null;\n    }\n    else {\n        switch (textPosition) {\n            case 'left':\n                x -= distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'right':\n                x += distance + width;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'top':\n                x += width / 2;\n                y -= distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'bottom':\n                x += width / 2;\n                y += height + distance;\n                textAlign = 'center';\n                break;\n            case 'inside':\n                x += width / 2;\n                y += halfHeight;\n                textAlign = 'center';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideLeft':\n                x += distance;\n                y += halfHeight;\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideRight':\n                x += width - distance;\n                y += halfHeight;\n                textAlign = 'right';\n                textVerticalAlign = 'middle';\n                break;\n            case 'insideTop':\n                x += width / 2;\n                y += distance;\n                textAlign = 'center';\n                break;\n            case 'insideBottom':\n                x += width / 2;\n                y += height - distance;\n                textAlign = 'center';\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideTopLeft':\n                x += distance;\n                y += distance;\n                break;\n            case 'insideTopRight':\n                x += width - distance;\n                y += distance;\n                textAlign = 'right';\n                break;\n            case 'insideBottomLeft':\n                x += distance;\n                y += height - distance;\n                textVerticalAlign = 'bottom';\n                break;\n            case 'insideBottomRight':\n                x += width - distance;\n                y += height - distance;\n                textAlign = 'right';\n                textVerticalAlign = 'bottom';\n                break;\n        }\n    }\n    out = out || {};\n    out.x = x;\n    out.y = y;\n    out.align = textAlign;\n    out.verticalAlign = textVerticalAlign;\n    return out;\n}\n","import Transformable, { TRANSFORMABLE_PROPS } from './core/Transformable.js';\nimport Animator, { cloneValue } from './animation/Animator.js';\nimport BoundingRect from './core/BoundingRect.js';\nimport Eventful from './core/Eventful.js';\nimport { calculateTextPosition, parsePercent } from './contain/text.js';\nimport { guid, isObject, keys, extend, indexOf, logError, mixin, isArrayLike, isTypedArray, isGradientObject, filter, reduce } from './core/util.js';\nimport { LIGHT_LABEL_COLOR, DARK_LABEL_COLOR } from './config.js';\nimport { parse, stringify } from './tool/color.js';\nimport { REDRAW_BIT } from './graphic/constants.js';\nexport var PRESERVED_NORMAL_STATE = '__zr_normal__';\nvar PRIMARY_STATES_KEYS = TRANSFORMABLE_PROPS.concat(['ignore']);\nvar DEFAULT_ANIMATABLE_MAP = reduce(TRANSFORMABLE_PROPS, function (obj, key) {\n    obj[key] = true;\n    return obj;\n}, { ignore: false });\nvar tmpTextPosCalcRes = {};\nvar tmpBoundingRect = new BoundingRect(0, 0, 0, 0);\nvar Element = (function () {\n    function Element(props) {\n        this.id = guid();\n        this.animators = [];\n        this.currentStates = [];\n        this.states = {};\n        this._init(props);\n    }\n    Element.prototype._init = function (props) {\n        this.attr(props);\n    };\n    Element.prototype.drift = function (dx, dy, e) {\n        switch (this.draggable) {\n            case 'horizontal':\n                dy = 0;\n                break;\n            case 'vertical':\n                dx = 0;\n                break;\n        }\n        var m = this.transform;\n        if (!m) {\n            m = this.transform = [1, 0, 0, 1, 0, 0];\n        }\n        m[4] += dx;\n        m[5] += dy;\n        this.decomposeTransform();\n        this.markRedraw();\n    };\n    Element.prototype.beforeUpdate = function () { };\n    Element.prototype.afterUpdate = function () { };\n    Element.prototype.update = function () {\n        this.updateTransform();\n        if (this.__dirty) {\n            this.updateInnerText();\n        }\n    };\n    Element.prototype.updateInnerText = function (forceUpdate) {\n        var textEl = this._textContent;\n        if (textEl && (!textEl.ignore || forceUpdate)) {\n            if (!this.textConfig) {\n                this.textConfig = {};\n            }\n            var textConfig = this.textConfig;\n            var isLocal = textConfig.local;\n            var innerTransformable = textEl.innerTransformable;\n            var textAlign = void 0;\n            var textVerticalAlign = void 0;\n            var textStyleChanged = false;\n            innerTransformable.parent = isLocal ? this : null;\n            var innerOrigin = false;\n            innerTransformable.copyTransform(textEl);\n            if (textConfig.position != null) {\n                var layoutRect = tmpBoundingRect;\n                if (textConfig.layoutRect) {\n                    layoutRect.copy(textConfig.layoutRect);\n                }\n                else {\n                    layoutRect.copy(this.getBoundingRect());\n                }\n                if (!isLocal) {\n                    layoutRect.applyTransform(this.transform);\n                }\n                if (this.calculateTextPosition) {\n                    this.calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                else {\n                    calculateTextPosition(tmpTextPosCalcRes, textConfig, layoutRect);\n                }\n                innerTransformable.x = tmpTextPosCalcRes.x;\n                innerTransformable.y = tmpTextPosCalcRes.y;\n                textAlign = tmpTextPosCalcRes.align;\n                textVerticalAlign = tmpTextPosCalcRes.verticalAlign;\n                var textOrigin = textConfig.origin;\n                if (textOrigin && textConfig.rotation != null) {\n                    var relOriginX = void 0;\n                    var relOriginY = void 0;\n                    if (textOrigin === 'center') {\n                        relOriginX = layoutRect.width * 0.5;\n                        relOriginY = layoutRect.height * 0.5;\n                    }\n                    else {\n                        relOriginX = parsePercent(textOrigin[0], layoutRect.width);\n                        relOriginY = parsePercent(textOrigin[1], layoutRect.height);\n                    }\n                    innerOrigin = true;\n                    innerTransformable.originX = -innerTransformable.x + relOriginX + (isLocal ? 0 : layoutRect.x);\n                    innerTransformable.originY = -innerTransformable.y + relOriginY + (isLocal ? 0 : layoutRect.y);\n                }\n            }\n            if (textConfig.rotation != null) {\n                innerTransformable.rotation = textConfig.rotation;\n            }\n            var textOffset = textConfig.offset;\n            if (textOffset) {\n                innerTransformable.x += textOffset[0];\n                innerTransformable.y += textOffset[1];\n                if (!innerOrigin) {\n                    innerTransformable.originX = -textOffset[0];\n                    innerTransformable.originY = -textOffset[1];\n                }\n            }\n            var isInside = textConfig.inside == null\n                ? (typeof textConfig.position === 'string' && textConfig.position.indexOf('inside') >= 0)\n                : textConfig.inside;\n            var innerTextDefaultStyle = this._innerTextDefaultStyle || (this._innerTextDefaultStyle = {});\n            var textFill = void 0;\n            var textStroke = void 0;\n            var autoStroke = void 0;\n            if (isInside && this.canBeInsideText()) {\n                textFill = textConfig.insideFill;\n                textStroke = textConfig.insideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getInsideTextFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getInsideTextStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            else {\n                textFill = textConfig.outsideFill;\n                textStroke = textConfig.outsideStroke;\n                if (textFill == null || textFill === 'auto') {\n                    textFill = this.getOutsideFill();\n                }\n                if (textStroke == null || textStroke === 'auto') {\n                    textStroke = this.getOutsideStroke(textFill);\n                    autoStroke = true;\n                }\n            }\n            textFill = textFill || '#000';\n            if (textFill !== innerTextDefaultStyle.fill\n                || textStroke !== innerTextDefaultStyle.stroke\n                || autoStroke !== innerTextDefaultStyle.autoStroke\n                || textAlign !== innerTextDefaultStyle.align\n                || textVerticalAlign !== innerTextDefaultStyle.verticalAlign) {\n                textStyleChanged = true;\n                innerTextDefaultStyle.fill = textFill;\n                innerTextDefaultStyle.stroke = textStroke;\n                innerTextDefaultStyle.autoStroke = autoStroke;\n                innerTextDefaultStyle.align = textAlign;\n                innerTextDefaultStyle.verticalAlign = textVerticalAlign;\n                textEl.setDefaultTextStyle(innerTextDefaultStyle);\n            }\n            textEl.__dirty |= REDRAW_BIT;\n            if (textStyleChanged) {\n                textEl.dirtyStyle(true);\n            }\n        }\n    };\n    Element.prototype.canBeInsideText = function () {\n        return true;\n    };\n    Element.prototype.getInsideTextFill = function () {\n        return '#fff';\n    };\n    Element.prototype.getInsideTextStroke = function (textFill) {\n        return '#000';\n    };\n    Element.prototype.getOutsideFill = function () {\n        return this.__zr && this.__zr.isDarkMode() ? LIGHT_LABEL_COLOR : DARK_LABEL_COLOR;\n    };\n    Element.prototype.getOutsideStroke = function (textFill) {\n        var backgroundColor = this.__zr && this.__zr.getBackgroundColor();\n        var colorArr = typeof backgroundColor === 'string' && parse(backgroundColor);\n        if (!colorArr) {\n            colorArr = [255, 255, 255, 1];\n        }\n        var alpha = colorArr[3];\n        var isDark = this.__zr.isDarkMode();\n        for (var i = 0; i < 3; i++) {\n            colorArr[i] = colorArr[i] * alpha + (isDark ? 0 : 255) * (1 - alpha);\n        }\n        colorArr[3] = 1;\n        return stringify(colorArr, 'rgba');\n    };\n    Element.prototype.traverse = function (cb, context) { };\n    Element.prototype.attrKV = function (key, value) {\n        if (key === 'textConfig') {\n            this.setTextConfig(value);\n        }\n        else if (key === 'textContent') {\n            this.setTextContent(value);\n        }\n        else if (key === 'clipPath') {\n            this.setClipPath(value);\n        }\n        else if (key === 'extra') {\n            this.extra = this.extra || {};\n            extend(this.extra, value);\n        }\n        else {\n            this[key] = value;\n        }\n    };\n    Element.prototype.hide = function () {\n        this.ignore = true;\n        this.markRedraw();\n    };\n    Element.prototype.show = function () {\n        this.ignore = false;\n        this.markRedraw();\n    };\n    Element.prototype.attr = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.attrKV(keyOrObj, value);\n        }\n        else if (isObject(keyOrObj)) {\n            var obj = keyOrObj;\n            var keysArr = keys(obj);\n            for (var i = 0; i < keysArr.length; i++) {\n                var key = keysArr[i];\n                this.attrKV(key, keyOrObj[key]);\n            }\n        }\n        this.markRedraw();\n        return this;\n    };\n    Element.prototype.saveCurrentToNormalState = function (toState) {\n        this._innerSaveToNormal(toState);\n        var normalState = this._normalState;\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            var fromStateTransition = animator.__fromStateTransition;\n            if (animator.getLoop() || fromStateTransition && fromStateTransition !== PRESERVED_NORMAL_STATE) {\n                continue;\n            }\n            var targetName = animator.targetName;\n            var target = targetName\n                ? normalState[targetName] : normalState;\n            animator.saveTo(target);\n        }\n    };\n    Element.prototype._innerSaveToNormal = function (toState) {\n        var normalState = this._normalState;\n        if (!normalState) {\n            normalState = this._normalState = {};\n        }\n        if (toState.textConfig && !normalState.textConfig) {\n            normalState.textConfig = this.textConfig;\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Element.prototype._savePrimaryToNormal = function (toState, normalState, primaryKeys) {\n        for (var i = 0; i < primaryKeys.length; i++) {\n            var key = primaryKeys[i];\n            if (toState[key] != null && !(key in normalState)) {\n                normalState[key] = this[key];\n            }\n        }\n    };\n    Element.prototype.hasState = function () {\n        return this.currentStates.length > 0;\n    };\n    Element.prototype.getState = function (name) {\n        return this.states[name];\n    };\n    Element.prototype.ensureState = function (name) {\n        var states = this.states;\n        if (!states[name]) {\n            states[name] = {};\n        }\n        return states[name];\n    };\n    Element.prototype.clearStates = function (noAnimation) {\n        this.useState(PRESERVED_NORMAL_STATE, false, noAnimation);\n    };\n    Element.prototype.useState = function (stateName, keepCurrentStates, noAnimation, forceUseHoverLayer) {\n        var toNormalState = stateName === PRESERVED_NORMAL_STATE;\n        var hasStates = this.hasState();\n        if (!hasStates && toNormalState) {\n            return;\n        }\n        var currentStates = this.currentStates;\n        var animationCfg = this.stateTransition;\n        if (indexOf(currentStates, stateName) >= 0 && (keepCurrentStates || currentStates.length === 1)) {\n            return;\n        }\n        var state;\n        if (this.stateProxy && !toNormalState) {\n            state = this.stateProxy(stateName);\n        }\n        if (!state) {\n            state = (this.states && this.states[stateName]);\n        }\n        if (!state && !toNormalState) {\n            logError(\"State \" + stateName + \" not exists.\");\n            return;\n        }\n        if (!toNormalState) {\n            this.saveCurrentToNormalState(state);\n        }\n        var useHoverLayer = !!((state && state.hoverLayer) || forceUseHoverLayer);\n        if (useHoverLayer) {\n            this._toggleHoverLayerFlag(true);\n        }\n        this._applyStateObj(stateName, state, this._normalState, keepCurrentStates, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (textGuide) {\n            textGuide.useState(stateName, keepCurrentStates, noAnimation, useHoverLayer);\n        }\n        if (toNormalState) {\n            this.currentStates = [];\n            this._normalState = {};\n        }\n        else {\n            if (!keepCurrentStates) {\n                this.currentStates = [stateName];\n            }\n            else {\n                this.currentStates.push(stateName);\n            }\n        }\n        this._updateAnimationTargets();\n        this.markRedraw();\n        if (!useHoverLayer && this.__inHover) {\n            this._toggleHoverLayerFlag(false);\n            this.__dirty &= ~REDRAW_BIT;\n        }\n        return state;\n    };\n    Element.prototype.useStates = function (states, noAnimation, forceUseHoverLayer) {\n        if (!states.length) {\n            this.clearStates();\n        }\n        else {\n            var stateObjects = [];\n            var currentStates = this.currentStates;\n            var len = states.length;\n            var notChange = len === currentStates.length;\n            if (notChange) {\n                for (var i = 0; i < len; i++) {\n                    if (states[i] !== currentStates[i]) {\n                        notChange = false;\n                        break;\n                    }\n                }\n            }\n            if (notChange) {\n                return;\n            }\n            for (var i = 0; i < len; i++) {\n                var stateName = states[i];\n                var stateObj = void 0;\n                if (this.stateProxy) {\n                    stateObj = this.stateProxy(stateName, states);\n                }\n                if (!stateObj) {\n                    stateObj = this.states[stateName];\n                }\n                if (stateObj) {\n                    stateObjects.push(stateObj);\n                }\n            }\n            var lastStateObj = stateObjects[len - 1];\n            var useHoverLayer = !!((lastStateObj && lastStateObj.hoverLayer) || forceUseHoverLayer);\n            if (useHoverLayer) {\n                this._toggleHoverLayerFlag(true);\n            }\n            var mergedState = this._mergeStates(stateObjects);\n            var animationCfg = this.stateTransition;\n            this.saveCurrentToNormalState(mergedState);\n            this._applyStateObj(states.join(','), mergedState, this._normalState, false, !noAnimation && !this.__inHover && animationCfg && animationCfg.duration > 0, animationCfg);\n            var textContent = this._textContent;\n            var textGuide = this._textGuide;\n            if (textContent) {\n                textContent.useStates(states, noAnimation, useHoverLayer);\n            }\n            if (textGuide) {\n                textGuide.useStates(states, noAnimation, useHoverLayer);\n            }\n            this._updateAnimationTargets();\n            this.currentStates = states.slice();\n            this.markRedraw();\n            if (!useHoverLayer && this.__inHover) {\n                this._toggleHoverLayerFlag(false);\n                this.__dirty &= ~REDRAW_BIT;\n            }\n        }\n    };\n    Element.prototype.isSilent = function () {\n        var isSilent = this.silent;\n        var ancestor = this.parent;\n        while (!isSilent && ancestor) {\n            if (ancestor.silent) {\n                isSilent = true;\n                break;\n            }\n            ancestor = ancestor.parent;\n        }\n        return isSilent;\n    };\n    Element.prototype._updateAnimationTargets = function () {\n        for (var i = 0; i < this.animators.length; i++) {\n            var animator = this.animators[i];\n            if (animator.targetName) {\n                animator.changeTarget(this[animator.targetName]);\n            }\n        }\n    };\n    Element.prototype.removeState = function (state) {\n        var idx = indexOf(this.currentStates, state);\n        if (idx >= 0) {\n            var currentStates = this.currentStates.slice();\n            currentStates.splice(idx, 1);\n            this.useStates(currentStates);\n        }\n    };\n    Element.prototype.replaceState = function (oldState, newState, forceAdd) {\n        var currentStates = this.currentStates.slice();\n        var idx = indexOf(currentStates, oldState);\n        var newStateExists = indexOf(currentStates, newState) >= 0;\n        if (idx >= 0) {\n            if (!newStateExists) {\n                currentStates[idx] = newState;\n            }\n            else {\n                currentStates.splice(idx, 1);\n            }\n        }\n        else if (forceAdd && !newStateExists) {\n            currentStates.push(newState);\n        }\n        this.useStates(currentStates);\n    };\n    Element.prototype.toggleState = function (state, enable) {\n        if (enable) {\n            this.useState(state, true);\n        }\n        else {\n            this.removeState(state);\n        }\n    };\n    Element.prototype._mergeStates = function (states) {\n        var mergedState = {};\n        var mergedTextConfig;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            extend(mergedState, state);\n            if (state.textConfig) {\n                mergedTextConfig = mergedTextConfig || {};\n                extend(mergedTextConfig, state.textConfig);\n            }\n        }\n        if (mergedTextConfig) {\n            mergedState.textConfig = mergedTextConfig;\n        }\n        return mergedState;\n    };\n    Element.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        if (state && state.textConfig) {\n            this.textConfig = extend({}, keepCurrentStates ? this.textConfig : normalState.textConfig);\n            extend(this.textConfig, state.textConfig);\n        }\n        else if (needsRestoreToNormal) {\n            if (normalState.textConfig) {\n                this.textConfig = normalState.textConfig;\n            }\n        }\n        var transitionTarget = {};\n        var hasTransition = false;\n        for (var i = 0; i < PRIMARY_STATES_KEYS.length; i++) {\n            var key = PRIMARY_STATES_KEYS[i];\n            var propNeedsTransition = transition && DEFAULT_ANIMATABLE_MAP[key];\n            if (state && state[key] != null) {\n                if (propNeedsTransition) {\n                    hasTransition = true;\n                    transitionTarget[key] = state[key];\n                }\n                else {\n                    this[key] = state[key];\n                }\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    if (propNeedsTransition) {\n                        hasTransition = true;\n                        transitionTarget[key] = normalState[key];\n                    }\n                    else {\n                        this[key] = normalState[key];\n                    }\n                }\n            }\n        }\n        if (!transition) {\n            for (var i = 0; i < this.animators.length; i++) {\n                var animator = this.animators[i];\n                var targetName = animator.targetName;\n                if (!animator.getLoop()) {\n                    animator.__changeFinalValue(targetName\n                        ? (state || normalState)[targetName]\n                        : (state || normalState));\n                }\n            }\n        }\n        if (hasTransition) {\n            this._transitionState(stateName, transitionTarget, animationCfg);\n        }\n    };\n    Element.prototype._attachComponent = function (componentEl) {\n        if (componentEl.__zr && !componentEl.__hostTarget) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Text element has been added to zrender.');\n            }\n            return;\n        }\n        if (componentEl === this) {\n            if (process.env.NODE_ENV !== 'production') {\n                throw new Error('Recursive component attachment.');\n            }\n            return;\n        }\n        var zr = this.__zr;\n        if (zr) {\n            componentEl.addSelfToZr(zr);\n        }\n        componentEl.__zr = zr;\n        componentEl.__hostTarget = this;\n    };\n    Element.prototype._detachComponent = function (componentEl) {\n        if (componentEl.__zr) {\n            componentEl.removeSelfFromZr(componentEl.__zr);\n        }\n        componentEl.__zr = null;\n        componentEl.__hostTarget = null;\n    };\n    Element.prototype.getClipPath = function () {\n        return this._clipPath;\n    };\n    Element.prototype.setClipPath = function (clipPath) {\n        if (this._clipPath && this._clipPath !== clipPath) {\n            this.removeClipPath();\n        }\n        this._attachComponent(clipPath);\n        this._clipPath = clipPath;\n        this.markRedraw();\n    };\n    Element.prototype.removeClipPath = function () {\n        var clipPath = this._clipPath;\n        if (clipPath) {\n            this._detachComponent(clipPath);\n            this._clipPath = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextContent = function () {\n        return this._textContent;\n    };\n    Element.prototype.setTextContent = function (textEl) {\n        var previousTextContent = this._textContent;\n        if (previousTextContent === textEl) {\n            return;\n        }\n        if (previousTextContent && previousTextContent !== textEl) {\n            this.removeTextContent();\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (textEl.__zr && !textEl.__hostTarget) {\n                throw new Error('Text element has been added to zrender.');\n            }\n        }\n        textEl.innerTransformable = new Transformable();\n        this._attachComponent(textEl);\n        this._textContent = textEl;\n        this.markRedraw();\n    };\n    Element.prototype.setTextConfig = function (cfg) {\n        if (!this.textConfig) {\n            this.textConfig = {};\n        }\n        extend(this.textConfig, cfg);\n        this.markRedraw();\n    };\n    Element.prototype.removeTextConfig = function () {\n        this.textConfig = null;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextContent = function () {\n        var textEl = this._textContent;\n        if (textEl) {\n            textEl.innerTransformable = null;\n            this._detachComponent(textEl);\n            this._textContent = null;\n            this._innerTextDefaultStyle = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.getTextGuideLine = function () {\n        return this._textGuide;\n    };\n    Element.prototype.setTextGuideLine = function (guideLine) {\n        if (this._textGuide && this._textGuide !== guideLine) {\n            this.removeTextGuideLine();\n        }\n        this._attachComponent(guideLine);\n        this._textGuide = guideLine;\n        this.markRedraw();\n    };\n    Element.prototype.removeTextGuideLine = function () {\n        var textGuide = this._textGuide;\n        if (textGuide) {\n            this._detachComponent(textGuide);\n            this._textGuide = null;\n            this.markRedraw();\n        }\n    };\n    Element.prototype.markRedraw = function () {\n        this.__dirty |= REDRAW_BIT;\n        var zr = this.__zr;\n        if (zr) {\n            if (this.__inHover) {\n                zr.refreshHover();\n            }\n            else {\n                zr.refresh();\n            }\n        }\n        if (this.__hostTarget) {\n            this.__hostTarget.markRedraw();\n        }\n    };\n    Element.prototype.dirty = function () {\n        this.markRedraw();\n    };\n    Element.prototype._toggleHoverLayerFlag = function (inHover) {\n        this.__inHover = inHover;\n        var textContent = this._textContent;\n        var textGuide = this._textGuide;\n        if (textContent) {\n            textContent.__inHover = inHover;\n        }\n        if (textGuide) {\n            textGuide.__inHover = inHover;\n        }\n    };\n    Element.prototype.addSelfToZr = function (zr) {\n        if (this.__zr === zr) {\n            return;\n        }\n        this.__zr = zr;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.addAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.addSelfToZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.addSelfToZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.addSelfToZr(zr);\n        }\n    };\n    Element.prototype.removeSelfFromZr = function (zr) {\n        if (!this.__zr) {\n            return;\n        }\n        this.__zr = null;\n        var animators = this.animators;\n        if (animators) {\n            for (var i = 0; i < animators.length; i++) {\n                zr.animation.removeAnimator(animators[i]);\n            }\n        }\n        if (this._clipPath) {\n            this._clipPath.removeSelfFromZr(zr);\n        }\n        if (this._textContent) {\n            this._textContent.removeSelfFromZr(zr);\n        }\n        if (this._textGuide) {\n            this._textGuide.removeSelfFromZr(zr);\n        }\n    };\n    Element.prototype.animate = function (key, loop, allowDiscreteAnimation) {\n        var target = key ? this[key] : this;\n        if (process.env.NODE_ENV !== 'production') {\n            if (!target) {\n                logError('Property \"'\n                    + key\n                    + '\" is not existed in element '\n                    + this.id);\n                return;\n            }\n        }\n        var animator = new Animator(target, loop, allowDiscreteAnimation);\n        key && (animator.targetName = key);\n        this.addAnimator(animator, key);\n        return animator;\n    };\n    Element.prototype.addAnimator = function (animator, key) {\n        var zr = this.__zr;\n        var el = this;\n        animator.during(function () {\n            el.updateDuringAnimation(key);\n        }).done(function () {\n            var animators = el.animators;\n            var idx = indexOf(animators, animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        this.animators.push(animator);\n        if (zr) {\n            zr.animation.addAnimator(animator);\n        }\n        zr && zr.wakeUp();\n    };\n    Element.prototype.updateDuringAnimation = function (key) {\n        this.markRedraw();\n    };\n    Element.prototype.stopAnimation = function (scope, forwardToLast) {\n        var animators = this.animators;\n        var len = animators.length;\n        var leftAnimators = [];\n        for (var i = 0; i < len; i++) {\n            var animator = animators[i];\n            if (!scope || scope === animator.scope) {\n                animator.stop(forwardToLast);\n            }\n            else {\n                leftAnimators.push(animator);\n            }\n        }\n        this.animators = leftAnimators;\n        return this;\n    };\n    Element.prototype.animateTo = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps);\n    };\n    Element.prototype.animateFrom = function (target, cfg, animationProps) {\n        animateTo(this, target, cfg, animationProps, true);\n    };\n    Element.prototype._transitionState = function (stateName, target, cfg, animationProps) {\n        var animators = animateTo(this, target, cfg, animationProps);\n        for (var i = 0; i < animators.length; i++) {\n            animators[i].__fromStateTransition = stateName;\n        }\n    };\n    Element.prototype.getBoundingRect = function () {\n        return null;\n    };\n    Element.prototype.getPaintRect = function () {\n        return null;\n    };\n    Element.initDefaultProps = (function () {\n        var elProto = Element.prototype;\n        elProto.type = 'element';\n        elProto.name = '';\n        elProto.ignore =\n            elProto.silent =\n                elProto.isGroup =\n                    elProto.draggable =\n                        elProto.dragging =\n                            elProto.ignoreClip =\n                                elProto.__inHover = false;\n        elProto.__dirty = REDRAW_BIT;\n        var logs = {};\n        function logDeprecatedError(key, xKey, yKey) {\n            if (!logs[key + xKey + yKey]) {\n                console.warn(\"DEPRECATED: '\" + key + \"' has been deprecated. use '\" + xKey + \"', '\" + yKey + \"' instead\");\n                logs[key + xKey + yKey] = true;\n            }\n        }\n        function createLegacyProperty(key, privateKey, xKey, yKey) {\n            Object.defineProperty(elProto, key, {\n                get: function () {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    if (!this[privateKey]) {\n                        var pos = this[privateKey] = [];\n                        enhanceArray(this, pos);\n                    }\n                    return this[privateKey];\n                },\n                set: function (pos) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        logDeprecatedError(key, xKey, yKey);\n                    }\n                    this[xKey] = pos[0];\n                    this[yKey] = pos[1];\n                    this[privateKey] = pos;\n                    enhanceArray(this, pos);\n                }\n            });\n            function enhanceArray(self, pos) {\n                Object.defineProperty(pos, 0, {\n                    get: function () {\n                        return self[xKey];\n                    },\n                    set: function (val) {\n                        self[xKey] = val;\n                    }\n                });\n                Object.defineProperty(pos, 1, {\n                    get: function () {\n                        return self[yKey];\n                    },\n                    set: function (val) {\n                        self[yKey] = val;\n                    }\n                });\n            }\n        }\n        if (Object.defineProperty) {\n            createLegacyProperty('position', '_legacyPos', 'x', 'y');\n            createLegacyProperty('scale', '_legacyScale', 'scaleX', 'scaleY');\n            createLegacyProperty('origin', '_legacyOrigin', 'originX', 'originY');\n        }\n    })();\n    return Element;\n}());\nmixin(Element, Eventful);\nmixin(Element, Transformable);\nfunction animateTo(animatable, target, cfg, animationProps, reverse) {\n    cfg = cfg || {};\n    var animators = [];\n    animateToShallow(animatable, '', animatable, target, cfg, animationProps, animators, reverse);\n    var finishCount = animators.length;\n    var doneHappened = false;\n    var cfgDone = cfg.done;\n    var cfgAborted = cfg.aborted;\n    var doneCb = function () {\n        doneHappened = true;\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    var abortedCb = function () {\n        finishCount--;\n        if (finishCount <= 0) {\n            doneHappened\n                ? (cfgDone && cfgDone())\n                : (cfgAborted && cfgAborted());\n        }\n    };\n    if (!finishCount) {\n        cfgDone && cfgDone();\n    }\n    if (animators.length > 0 && cfg.during) {\n        animators[0].during(function (target, percent) {\n            cfg.during(percent);\n        });\n    }\n    for (var i = 0; i < animators.length; i++) {\n        var animator = animators[i];\n        if (doneCb) {\n            animator.done(doneCb);\n        }\n        if (abortedCb) {\n            animator.aborted(abortedCb);\n        }\n        if (cfg.force) {\n            animator.duration(cfg.duration);\n        }\n        animator.start(cfg.easing);\n    }\n    return animators;\n}\nfunction copyArrShallow(source, target, len) {\n    for (var i = 0; i < len; i++) {\n        source[i] = target[i];\n    }\n}\nfunction is2DArray(value) {\n    return isArrayLike(value[0]);\n}\nfunction copyValue(target, source, key) {\n    if (isArrayLike(source[key])) {\n        if (!isArrayLike(target[key])) {\n            target[key] = [];\n        }\n        if (isTypedArray(source[key])) {\n            var len = source[key].length;\n            if (target[key].length !== len) {\n                target[key] = new (source[key].constructor)(len);\n                copyArrShallow(target[key], source[key], len);\n            }\n        }\n        else {\n            var sourceArr = source[key];\n            var targetArr = target[key];\n            var len0 = sourceArr.length;\n            if (is2DArray(sourceArr)) {\n                var len1 = sourceArr[0].length;\n                for (var i = 0; i < len0; i++) {\n                    if (!targetArr[i]) {\n                        targetArr[i] = Array.prototype.slice.call(sourceArr[i]);\n                    }\n                    else {\n                        copyArrShallow(targetArr[i], sourceArr[i], len1);\n                    }\n                }\n            }\n            else {\n                copyArrShallow(targetArr, sourceArr, len0);\n            }\n            targetArr.length = sourceArr.length;\n        }\n    }\n    else {\n        target[key] = source[key];\n    }\n}\nfunction isValueSame(val1, val2) {\n    return val1 === val2\n        || isArrayLike(val1) && isArrayLike(val2) && is1DArraySame(val1, val2);\n}\nfunction is1DArraySame(arr0, arr1) {\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    for (var i = 0; i < len; i++) {\n        if (arr0[i] !== arr1[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction animateToShallow(animatable, topKey, animateObj, target, cfg, animationProps, animators, reverse) {\n    var targetKeys = keys(target);\n    var duration = cfg.duration;\n    var delay = cfg.delay;\n    var additive = cfg.additive;\n    var setToFinal = cfg.setToFinal;\n    var animateAll = !isObject(animationProps);\n    var existsAnimators = animatable.animators;\n    var animationKeys = [];\n    for (var k = 0; k < targetKeys.length; k++) {\n        var innerKey = targetKeys[k];\n        var targetVal = target[innerKey];\n        if (targetVal != null && animateObj[innerKey] != null\n            && (animateAll || animationProps[innerKey])) {\n            if (isObject(targetVal)\n                && !isArrayLike(targetVal)\n                && !isGradientObject(targetVal)) {\n                if (topKey) {\n                    if (!reverse) {\n                        animateObj[innerKey] = targetVal;\n                        animatable.updateDuringAnimation(topKey);\n                    }\n                    continue;\n                }\n                animateToShallow(animatable, innerKey, animateObj[innerKey], targetVal, cfg, animationProps && animationProps[innerKey], animators, reverse);\n            }\n            else {\n                animationKeys.push(innerKey);\n            }\n        }\n        else if (!reverse) {\n            animateObj[innerKey] = targetVal;\n            animatable.updateDuringAnimation(topKey);\n            animationKeys.push(innerKey);\n        }\n    }\n    var keyLen = animationKeys.length;\n    if (!additive && keyLen) {\n        for (var i = 0; i < existsAnimators.length; i++) {\n            var animator = existsAnimators[i];\n            if (animator.targetName === topKey) {\n                var allAborted = animator.stopTracks(animationKeys);\n                if (allAborted) {\n                    var idx = indexOf(existsAnimators, animator);\n                    existsAnimators.splice(idx, 1);\n                }\n            }\n        }\n    }\n    if (!cfg.force) {\n        animationKeys = filter(animationKeys, function (key) { return !isValueSame(target[key], animateObj[key]); });\n        keyLen = animationKeys.length;\n    }\n    if (keyLen > 0\n        || (cfg.force && !animators.length)) {\n        var revertedSource = void 0;\n        var reversedTarget = void 0;\n        var sourceClone = void 0;\n        if (reverse) {\n            reversedTarget = {};\n            if (setToFinal) {\n                revertedSource = {};\n            }\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                reversedTarget[innerKey] = animateObj[innerKey];\n                if (setToFinal) {\n                    revertedSource[innerKey] = target[innerKey];\n                }\n                else {\n                    animateObj[innerKey] = target[innerKey];\n                }\n            }\n        }\n        else if (setToFinal) {\n            sourceClone = {};\n            for (var i = 0; i < keyLen; i++) {\n                var innerKey = animationKeys[i];\n                sourceClone[innerKey] = cloneValue(animateObj[innerKey]);\n                copyValue(animateObj, target, innerKey);\n            }\n        }\n        var animator = new Animator(animateObj, false, false, additive ? filter(existsAnimators, function (animator) { return animator.targetName === topKey; }) : null);\n        animator.targetName = topKey;\n        if (cfg.scope) {\n            animator.scope = cfg.scope;\n        }\n        if (setToFinal && revertedSource) {\n            animator.whenWithKeys(0, revertedSource, animationKeys);\n        }\n        if (sourceClone) {\n            animator.whenWithKeys(0, sourceClone, animationKeys);\n        }\n        animator.whenWithKeys(duration == null ? 500 : duration, reverse ? reversedTarget : target, animationKeys).delay(delay || 0);\n        animatable.addAnimator(animator, topKey);\n        animators.push(animator);\n    }\n}\nexport default Element;\n","import { __extends } from \"tslib\";\nimport * as zrUtil from '../core/util.js';\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar Group = (function (_super) {\n    __extends(Group, _super);\n    function Group(opts) {\n        var _this = _super.call(this) || this;\n        _this.isGroup = true;\n        _this._children = [];\n        _this.attr(opts);\n        return _this;\n    }\n    Group.prototype.childrenRef = function () {\n        return this._children;\n    };\n    Group.prototype.children = function () {\n        return this._children.slice();\n    };\n    Group.prototype.childAt = function (idx) {\n        return this._children[idx];\n    };\n    Group.prototype.childOfName = function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    };\n    Group.prototype.childCount = function () {\n        return this._children.length;\n    };\n    Group.prototype.add = function (child) {\n        if (child) {\n            if (child !== this && child.parent !== this) {\n                this._children.push(child);\n                this._doAdd(child);\n            }\n            if (process.env.NODE_ENV !== 'production') {\n                if (child.__hostTarget) {\n                    throw 'This elemenet has been used as an attachment';\n                }\n            }\n        }\n        return this;\n    };\n    Group.prototype.addBefore = function (child, nextSibling) {\n        if (child && child !== this && child.parent !== this\n            && nextSibling && nextSibling.parent === this) {\n            var children = this._children;\n            var idx = children.indexOf(nextSibling);\n            if (idx >= 0) {\n                children.splice(idx, 0, child);\n                this._doAdd(child);\n            }\n        }\n        return this;\n    };\n    Group.prototype.replace = function (oldChild, newChild) {\n        var idx = zrUtil.indexOf(this._children, oldChild);\n        if (idx >= 0) {\n            this.replaceAt(newChild, idx);\n        }\n        return this;\n    };\n    Group.prototype.replaceAt = function (child, index) {\n        var children = this._children;\n        var old = children[index];\n        if (child && child !== this && child.parent !== this && child !== old) {\n            children[index] = child;\n            old.parent = null;\n            var zr = this.__zr;\n            if (zr) {\n                old.removeSelfFromZr(zr);\n            }\n            this._doAdd(child);\n        }\n        return this;\n    };\n    Group.prototype._doAdd = function (child) {\n        if (child.parent) {\n            child.parent.remove(child);\n        }\n        child.parent = this;\n        var zr = this.__zr;\n        if (zr && zr !== child.__zr) {\n            child.addSelfToZr(zr);\n        }\n        zr && zr.refresh();\n    };\n    Group.prototype.remove = function (child) {\n        var zr = this.__zr;\n        var children = this._children;\n        var idx = zrUtil.indexOf(children, child);\n        if (idx < 0) {\n            return this;\n        }\n        children.splice(idx, 1);\n        child.parent = null;\n        if (zr) {\n            child.removeSelfFromZr(zr);\n        }\n        zr && zr.refresh();\n        return this;\n    };\n    Group.prototype.removeAll = function () {\n        var children = this._children;\n        var zr = this.__zr;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (zr) {\n                child.removeSelfFromZr(zr);\n            }\n            child.parent = null;\n        }\n        children.length = 0;\n        return this;\n    };\n    Group.prototype.eachChild = function (cb, context) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            cb.call(context, child, i);\n        }\n        return this;\n    };\n    Group.prototype.traverse = function (cb, context) {\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            var stopped = cb.call(context, child);\n            if (child.isGroup && !stopped) {\n                child.traverse(cb, context);\n            }\n        }\n        return this;\n    };\n    Group.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.addSelfToZr(zr);\n        }\n    };\n    Group.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.removeSelfFromZr(zr);\n        }\n    };\n    Group.prototype.getBoundingRect = function (includeChildren) {\n        var tmpRect = new BoundingRect(0, 0, 0, 0);\n        var children = includeChildren || this._children;\n        var tmpMat = [];\n        var rect = null;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.ignore || child.invisible) {\n                continue;\n            }\n            var childRect = child.getBoundingRect();\n            var transform = child.getLocalTransform(tmpMat);\n            if (transform) {\n                BoundingRect.applyTransform(tmpRect, childRect, transform);\n                rect = rect || tmpRect.clone();\n                rect.union(tmpRect);\n            }\n            else {\n                rect = rect || childRect.clone();\n                rect.union(childRect);\n            }\n        }\n        return rect || tmpRect;\n    };\n    return Group;\n}(Element));\nGroup.prototype.type = 'group';\nexport default Group;\n","/*!\n* ZRender, a high performance 2d drawing library.\n*\n* Copyright (c) 2013, Baidu Inc.\n* All rights reserved.\n*\n* LICENSE\n* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt\n*/\nimport env from './core/env.js';\nimport * as zrUtil from './core/util.js';\nimport Handler from './Handler.js';\nimport Storage from './Storage.js';\nimport Animation, { getTime } from './animation/Animation.js';\nimport HandlerProxy from './dom/HandlerProxy.js';\nimport { lum } from './tool/color.js';\nimport { DARK_MODE_THRESHOLD } from './config.js';\nimport Group from './graphic/Group.js';\nvar painterCtors = {};\nvar instances = {};\nfunction delInstance(id) {\n    delete instances[id];\n}\nfunction isDarkMode(backgroundColor) {\n    if (!backgroundColor) {\n        return false;\n    }\n    if (typeof backgroundColor === 'string') {\n        return lum(backgroundColor, 1) < DARK_MODE_THRESHOLD;\n    }\n    else if (backgroundColor.colorStops) {\n        var colorStops = backgroundColor.colorStops;\n        var totalLum = 0;\n        var len = colorStops.length;\n        for (var i = 0; i < len; i++) {\n            totalLum += lum(colorStops[i].color, 1);\n        }\n        totalLum /= len;\n        return totalLum < DARK_MODE_THRESHOLD;\n    }\n    return false;\n}\nvar ZRender = (function () {\n    function ZRender(id, dom, opts) {\n        var _this = this;\n        this._sleepAfterStill = 10;\n        this._stillFrameAccum = 0;\n        this._needsRefresh = true;\n        this._needsRefreshHover = true;\n        this._darkMode = false;\n        opts = opts || {};\n        this.dom = dom;\n        this.id = id;\n        var storage = new Storage();\n        var rendererType = opts.renderer || 'canvas';\n        if (!painterCtors[rendererType]) {\n            rendererType = zrUtil.keys(painterCtors)[0];\n        }\n        if (process.env.NODE_ENV !== 'production') {\n            if (!painterCtors[rendererType]) {\n                throw new Error(\"Renderer '\" + rendererType + \"' is not imported. Please import it first.\");\n            }\n        }\n        opts.useDirtyRect = opts.useDirtyRect == null\n            ? false\n            : opts.useDirtyRect;\n        var painter = new painterCtors[rendererType](dom, storage, opts, id);\n        var ssrMode = opts.ssr || painter.ssrOnly;\n        this.storage = storage;\n        this.painter = painter;\n        var handlerProxy = (!env.node && !env.worker && !ssrMode)\n            ? new HandlerProxy(painter.getViewportRoot(), painter.root)\n            : null;\n        var useCoarsePointer = opts.useCoarsePointer;\n        var usePointerSize = (useCoarsePointer == null || useCoarsePointer === 'auto')\n            ? env.touchEventsSupported\n            : !!useCoarsePointer;\n        var defaultPointerSize = 44;\n        var pointerSize;\n        if (usePointerSize) {\n            pointerSize = zrUtil.retrieve2(opts.pointerSize, defaultPointerSize);\n        }\n        this.handler = new Handler(storage, painter, handlerProxy, painter.root, pointerSize);\n        this.animation = new Animation({\n            stage: {\n                update: ssrMode ? null : function () { return _this._flush(true); }\n            }\n        });\n        if (!ssrMode) {\n            this.animation.start();\n        }\n    }\n    ZRender.prototype.add = function (el) {\n        if (this._disposed || !el) {\n            return;\n        }\n        this.storage.addRoot(el);\n        el.addSelfToZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.remove = function (el) {\n        if (this._disposed || !el) {\n            return;\n        }\n        this.storage.delRoot(el);\n        el.removeSelfFromZr(this);\n        this.refresh();\n    };\n    ZRender.prototype.configLayer = function (zLevel, config) {\n        if (this._disposed) {\n            return;\n        }\n        if (this.painter.configLayer) {\n            this.painter.configLayer(zLevel, config);\n        }\n        this.refresh();\n    };\n    ZRender.prototype.setBackgroundColor = function (backgroundColor) {\n        if (this._disposed) {\n            return;\n        }\n        if (this.painter.setBackgroundColor) {\n            this.painter.setBackgroundColor(backgroundColor);\n        }\n        this.refresh();\n        this._backgroundColor = backgroundColor;\n        this._darkMode = isDarkMode(backgroundColor);\n    };\n    ZRender.prototype.getBackgroundColor = function () {\n        return this._backgroundColor;\n    };\n    ZRender.prototype.setDarkMode = function (darkMode) {\n        this._darkMode = darkMode;\n    };\n    ZRender.prototype.isDarkMode = function () {\n        return this._darkMode;\n    };\n    ZRender.prototype.refreshImmediately = function (fromInside) {\n        if (this._disposed) {\n            return;\n        }\n        if (!fromInside) {\n            this.animation.update(true);\n        }\n        this._needsRefresh = false;\n        this.painter.refresh();\n        this._needsRefresh = false;\n    };\n    ZRender.prototype.refresh = function () {\n        if (this._disposed) {\n            return;\n        }\n        this._needsRefresh = true;\n        this.animation.start();\n    };\n    ZRender.prototype.flush = function () {\n        if (this._disposed) {\n            return;\n        }\n        this._flush(false);\n    };\n    ZRender.prototype._flush = function (fromInside) {\n        var triggerRendered;\n        var start = getTime();\n        if (this._needsRefresh) {\n            triggerRendered = true;\n            this.refreshImmediately(fromInside);\n        }\n        if (this._needsRefreshHover) {\n            triggerRendered = true;\n            this.refreshHoverImmediately();\n        }\n        var end = getTime();\n        if (triggerRendered) {\n            this._stillFrameAccum = 0;\n            this.trigger('rendered', {\n                elapsedTime: end - start\n            });\n        }\n        else if (this._sleepAfterStill > 0) {\n            this._stillFrameAccum++;\n            if (this._stillFrameAccum > this._sleepAfterStill) {\n                this.animation.stop();\n            }\n        }\n    };\n    ZRender.prototype.setSleepAfterStill = function (stillFramesCount) {\n        this._sleepAfterStill = stillFramesCount;\n    };\n    ZRender.prototype.wakeUp = function () {\n        if (this._disposed) {\n            return;\n        }\n        this.animation.start();\n        this._stillFrameAccum = 0;\n    };\n    ZRender.prototype.refreshHover = function () {\n        this._needsRefreshHover = true;\n    };\n    ZRender.prototype.refreshHoverImmediately = function () {\n        if (this._disposed) {\n            return;\n        }\n        this._needsRefreshHover = false;\n        if (this.painter.refreshHover && this.painter.getType() === 'canvas') {\n            this.painter.refreshHover();\n        }\n    };\n    ZRender.prototype.resize = function (opts) {\n        if (this._disposed) {\n            return;\n        }\n        opts = opts || {};\n        this.painter.resize(opts.width, opts.height);\n        this.handler.resize();\n    };\n    ZRender.prototype.clearAnimation = function () {\n        if (this._disposed) {\n            return;\n        }\n        this.animation.clear();\n    };\n    ZRender.prototype.getWidth = function () {\n        if (this._disposed) {\n            return;\n        }\n        return this.painter.getWidth();\n    };\n    ZRender.prototype.getHeight = function () {\n        if (this._disposed) {\n            return;\n        }\n        return this.painter.getHeight();\n    };\n    ZRender.prototype.setCursorStyle = function (cursorStyle) {\n        if (this._disposed) {\n            return;\n        }\n        this.handler.setCursorStyle(cursorStyle);\n    };\n    ZRender.prototype.findHover = function (x, y) {\n        if (this._disposed) {\n            return;\n        }\n        return this.handler.findHover(x, y);\n    };\n    ZRender.prototype.on = function (eventName, eventHandler, context) {\n        if (!this._disposed) {\n            this.handler.on(eventName, eventHandler, context);\n        }\n        return this;\n    };\n    ZRender.prototype.off = function (eventName, eventHandler) {\n        if (this._disposed) {\n            return;\n        }\n        this.handler.off(eventName, eventHandler);\n    };\n    ZRender.prototype.trigger = function (eventName, event) {\n        if (this._disposed) {\n            return;\n        }\n        this.handler.trigger(eventName, event);\n    };\n    ZRender.prototype.clear = function () {\n        if (this._disposed) {\n            return;\n        }\n        var roots = this.storage.getRoots();\n        for (var i = 0; i < roots.length; i++) {\n            if (roots[i] instanceof Group) {\n                roots[i].removeSelfFromZr(this);\n            }\n        }\n        this.storage.delAllRoots();\n        this.painter.clear();\n    };\n    ZRender.prototype.dispose = function () {\n        if (this._disposed) {\n            return;\n        }\n        this.animation.stop();\n        this.clear();\n        this.storage.dispose();\n        this.painter.dispose();\n        this.handler.dispose();\n        this.animation =\n            this.storage =\n                this.painter =\n                    this.handler = null;\n        this._disposed = true;\n        delInstance(this.id);\n    };\n    return ZRender;\n}());\nexport function init(dom, opts) {\n    var zr = new ZRender(zrUtil.guid(), dom, opts);\n    instances[zr.id] = zr;\n    return zr;\n}\nexport function dispose(zr) {\n    zr.dispose();\n}\nexport function disposeAll() {\n    for (var key in instances) {\n        if (instances.hasOwnProperty(key)) {\n            instances[key].dispose();\n        }\n    }\n    instances = {};\n}\nexport function getInstance(id) {\n    return instances[id];\n}\nexport function registerPainter(name, Ctor) {\n    painterCtors[name] = Ctor;\n}\nvar ssrDataGetter;\nexport function getElementSSRData(el) {\n    if (typeof ssrDataGetter === 'function') {\n        return ssrDataGetter(el);\n    }\n}\nexport function registerSSRDataGetter(getter) {\n    ssrDataGetter = getter;\n}\nexport var version = '5.6.1';\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The method \"quantile\" was copied from \"d3.js\".\r\n* (See more details in the comment of the method below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar RADIAN_EPSILON = 1e-4;\n// Although chrome already enlarge this number to 100 for `toFixed`, but\n// we sill follow the spec for compatibility.\nvar ROUND_SUPPORTED_PRECISION_MAX = 20;\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n/**\r\n * Linear mapping a value from domain to range\r\n * @param  val\r\n * @param  domain Domain extent domain[0] can be bigger than domain[1]\r\n * @param  range  Range extent range[0] can be bigger than range[1]\r\n * @param  clamp Default to be false\r\n */\nexport function linearMap(val, domain, range, clamp) {\n  var d0 = domain[0];\n  var d1 = domain[1];\n  var r0 = range[0];\n  var r1 = range[1];\n  var subDomain = d1 - d0;\n  var subRange = r1 - r0;\n  if (subDomain === 0) {\n    return subRange === 0 ? r0 : (r0 + r1) / 2;\n  }\n  // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= d0) {\n        return r0;\n      } else if (val >= d1) {\n        return r1;\n      }\n    } else {\n      if (val >= d0) {\n        return r0;\n      } else if (val <= d1) {\n        return r1;\n      }\n    }\n  } else {\n    if (val === d0) {\n      return r0;\n    }\n    if (val === d1) {\n      return r1;\n    }\n  }\n  return (val - d0) / subDomain * subRange + r0;\n}\n/**\r\n * Convert a percent string to absolute number.\r\n * Returns NaN if percent is not a valid string or number\r\n */\nexport function parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n  if (zrUtil.isString(percent)) {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n    return parseFloat(percent);\n  }\n  return percent == null ? NaN : +percent;\n}\nexport function round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  }\n  // Avoid range error\n  precision = Math.min(Math.max(0, precision), ROUND_SUPPORTED_PRECISION_MAX);\n  // PENDING: 1.005.toFixed(2) is '1.00' rather than '1.01'\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\r\n * Inplacd asc sort arr.\r\n * The input arr will be modified.\r\n */\nexport function asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\r\n * Get precision.\r\n */\nexport function getPrecision(val) {\n  val = +val;\n  if (isNaN(val)) {\n    return 0;\n  }\n  // It is much faster than methods converting number to string as follows\n  //      let tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n  // Notice:\n  // (1) If the loop count is over about 20, it is slower than `getPrecisionSafe`.\n  //     (see https://jsbench.me/2vkpcekkvw/1)\n  // (2) If the val is less than for example 1e-15, the result may be incorrect.\n  //     (see test/ut/spec/util/number.test.ts `getPrecision_equal_random`)\n  if (val > 1e-14) {\n    var e = 1;\n    for (var i = 0; i < 15; i++, e *= 10) {\n      if (Math.round(val * e) / e === val) {\n        return i;\n      }\n    }\n  }\n  return getPrecisionSafe(val);\n}\n/**\r\n * Get precision with slow but safe method\r\n */\nexport function getPrecisionSafe(val) {\n  // toLowerCase for: '3.4E-12'\n  var str = val.toString().toLowerCase();\n  // Consider scientific notation: '3.4e-12' '3.4e+12'\n  var eIndex = str.indexOf('e');\n  var exp = eIndex > 0 ? +str.slice(eIndex + 1) : 0;\n  var significandPartLen = eIndex > 0 ? eIndex : str.length;\n  var dotIndex = str.indexOf('.');\n  var decimalPartLen = dotIndex < 0 ? 0 : significandPartLen - 1 - dotIndex;\n  return Math.max(0, decimalPartLen - exp);\n}\n/**\r\n * Minimal dicernible data precisioin according to a single pixel.\r\n */\nexport function getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10);\n  // toFixed() digits argument must be between 0 and 20.\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\r\n * Get a data of given precision, assuring the sum of percentages\r\n * in valueList is 1.\r\n * The largest remainder method is used.\r\n * https://en.wikipedia.org/wiki/Largest_remainder_method\r\n *\r\n * @param valueList a list of all data\r\n * @param idx index of the data to be processed in valueList\r\n * @param precision integer number showing digits of precision\r\n * @return percent ranging from 0 to 100\r\n */\nexport function getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n  var seats = getPercentSeats(valueList, precision);\n  return seats[idx] || 0;\n}\n/**\r\n * Get a data of given precision, assuring the sum of percentages\r\n * in valueList is 1.\r\n * The largest remainder method is used.\r\n * https://en.wikipedia.org/wiki/Largest_remainder_method\r\n *\r\n * @param valueList a list of all data\r\n * @param precision integer number showing digits of precision\r\n * @return {Array<number>}\r\n */\nexport function getPercentSeats(valueList, precision) {\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n  if (sum === 0) {\n    return [];\n  }\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  });\n  // Has remainding votes.\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    }\n    // Add a vote to max remainder.\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n  return zrUtil.map(seats, function (seat) {\n    return seat / digits;\n  });\n}\n/**\r\n * Solve the floating point adding problem like 0.1 + 0.2 === 0.30000000000000004\r\n * See <http://0.30000000000000004.com/>\r\n */\nexport function addSafe(val0, val1) {\n  var maxPrecision = Math.max(getPrecision(val0), getPrecision(val1));\n  // const multiplier = Math.pow(10, maxPrecision);\n  // return (Math.round(val0 * multiplier) + Math.round(val1 * multiplier)) / multiplier;\n  var sum = val0 + val1;\n  // // PENDING: support more?\n  return maxPrecision > ROUND_SUPPORTED_PRECISION_MAX ? sum : round(sum, maxPrecision);\n}\n// Number.MAX_SAFE_INTEGER, ie do not support.\nexport var MAX_SAFE_INTEGER = 9007199254740991;\n/**\r\n * To 0 - 2 * PI, considering negative radian.\r\n */\nexport function remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\r\n * @param {type} radian\r\n * @return {boolean}\r\n */\nexport function isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n// eslint-disable-next-line\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d{1,2})(?::(\\d{1,2})(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n/**\r\n * @param value valid type: number | string | Date, otherwise return `new Date(NaN)`\r\n *   These values can be accepted:\r\n *   + An instance of Date, represent a time in its own time zone.\r\n *   + Or string in a subset of ISO 8601, only including:\r\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\r\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\r\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\r\n *     all of which will be treated as local time if time zone is not specified\r\n *     (see <https://momentjs.com/>).\r\n *   + Or other string format, including (all of which will be treated as local time):\r\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\r\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\r\n *   + a timestamp, which represent a time in UTC.\r\n * @return date Never be null/undefined. If invalid, return `new Date(NaN)`.\r\n */\nexport function parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (zrUtil.isString(value)) {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    }\n    // Use local time when no timezone offset is specified.\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0);\n    }\n    // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n      var hour = +match[4] || 0;\n      if (match[8].toUpperCase() !== 'Z') {\n        hour -= +match[8].slice(0, 3);\n      }\n      return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, match[7] ? +match[7].substring(0, 3) : 0));\n    }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n  return new Date(Math.round(value));\n}\n/**\r\n * Quantity of a number. e.g. 0.1, 1, 10, 100\r\n *\r\n * @param val\r\n * @return\r\n */\nexport function quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\r\n * Exponent of the quantity of a number\r\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\r\n *\r\n * @param val non-negative value\r\n * @return\r\n */\nexport function quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\r\n   * exp is expected to be the rounded-down result of the base-10 log of val.\r\n   * But due to the precision loss with Math.log(val), we need to restore it\r\n   * using 10^exp to make sure we can get val back from exp. #11249\r\n   */\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n  return exp;\n}\n/**\r\n * find a nice number approximately equal to x. Round the number if round = true,\r\n * take ceiling if round = false. The primary observation is that the nicest\r\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\r\n *\r\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\r\n *\r\n * @param  val Non-negative value.\r\n * @param  round\r\n * @return Niced number\r\n */\nexport function nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n  var nf;\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n  val = nf * exp10;\n  // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\r\n * This code was copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\r\n * See the license statement at the head of this file.\r\n * @param ascArr\r\n */\nexport function quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\r\n * Order intervals asc, and split them when overlap.\r\n * expect(numberUtil.reformIntervals([\r\n *     {interval: [18, 62], close: [1, 1]},\r\n *     {interval: [-Infinity, -70], close: [0, 0]},\r\n *     {interval: [-70, -26], close: [1, 1]},\r\n *     {interval: [-26, 18], close: [1, 1]},\r\n *     {interval: [62, 150], close: [1, 1]},\r\n *     {interval: [106, 150], close: [1, 1]},\r\n *     {interval: [150, Infinity], close: [0, 0]}\r\n * ])).toEqual([\r\n *     {interval: [-Infinity, -70], close: [0, 0]},\r\n *     {interval: [-70, -26], close: [1, 1]},\r\n *     {interval: [-26, 18], close: [0, 1]},\r\n *     {interval: [18, 62], close: [0, 1]},\r\n *     {interval: [62, 150], close: [0, 1]},\r\n *     {interval: [150, Infinity], close: [0, 0]}\r\n * ]);\r\n * @param list, where `close` mean open or close\r\n *        of the interval, and Infinity can be used.\r\n * @return The origin list, which has been reformed.\r\n */\nexport function reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close_1 = list[i].close;\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close_1[lg] = !lg ? 1 - currClose : 1;\n      }\n      curr = interval[lg];\n      currClose = close_1[lg];\n    }\n    if (interval[0] === interval[1] && close_1[0] * close_1[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n  return list;\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\r\n * [Numeric is defined as]:\r\n *     `parseFloat(val) == val`\r\n * For example:\r\n * numeric:\r\n *     typeof number except NaN, '-123', '123', '2e3', '-2e3', '011', 'Infinity', Infinity,\r\n *     and they rounded by white-spaces or line-terminal like ' -123 \\n ' (see es spec)\r\n * not-numeric:\r\n *     null, undefined, [], {}, true, false, 'NaN', NaN, '123ab',\r\n *     empty string, string with only white-spaces or line-terminal (see es spec),\r\n *     0x12, '0x12', '-0x12', 012, '012', '-012',\r\n *     non-string, ...\r\n *\r\n * @test See full test cases in `test/ut/spec/util/number.js`.\r\n * @return Must be a typeof number. If not numeric, return NaN.\r\n */\nexport function numericToNumber(val) {\n  var valFloat = parseFloat(val);\n  return valFloat == val // eslint-disable-line eqeqeq\n  && (valFloat !== 0 || !zrUtil.isString(val) || val.indexOf('x') <= 0) // For case ' 0x0 '.\n  ? valFloat : NaN;\n}\n/**\r\n * Definition of \"numeric\": see `numericToNumber`.\r\n */\nexport function isNumeric(val) {\n  return !isNaN(numericToNumber(val));\n}\n/**\r\n * Use random base to prevent users hard code depending on\r\n * this auto generated marker id.\r\n * @return An positive integer.\r\n */\nexport function getRandomIdBase() {\n  return Math.round(Math.random() * 9);\n}\n/**\r\n * Get the greatest common divisor.\r\n *\r\n * @param {number} a one number\r\n * @param {number} b the other number\r\n */\nexport function getGreatestCommonDividor(a, b) {\n  if (b === 0) {\n    return a;\n  }\n  return getGreatestCommonDividor(b, a % b);\n}\n/**\r\n * Get the least common multiple.\r\n *\r\n * @param {number} a one number\r\n * @param {number} b the other number\r\n */\nexport function getLeastCommonMultiple(a, b) {\n  if (a == null) {\n    return b;\n  }\n  if (b == null) {\n    return a;\n  }\n  return a * b / getGreatestCommonDividor(a, b);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { map, isString, isFunction, eqNaN, isRegExp } from 'zrender/lib/core/util.js';\nvar ECHARTS_PREFIX = '[ECharts] ';\nvar storedLogs = {};\nvar hasConsole = typeof console !== 'undefined'\n// eslint-disable-next-line\n&& console.warn && console.log;\nfunction outputLog(type, str, onlyOnce) {\n  if (hasConsole) {\n    if (onlyOnce) {\n      if (storedLogs[str]) {\n        return;\n      }\n      storedLogs[str] = true;\n    }\n    // eslint-disable-next-line\n    console[type](ECHARTS_PREFIX + str);\n  }\n}\nexport function log(str, onlyOnce) {\n  outputLog('log', str, onlyOnce);\n}\nexport function warn(str, onlyOnce) {\n  outputLog('warn', str, onlyOnce);\n}\nexport function error(str, onlyOnce) {\n  outputLog('error', str, onlyOnce);\n}\nexport function deprecateLog(str) {\n  if (process.env.NODE_ENV !== 'production') {\n    // Not display duplicate message.\n    outputLog('warn', 'DEPRECATED: ' + str, true);\n  }\n}\nexport function deprecateReplaceLog(oldOpt, newOpt, scope) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog((scope ? \"[\" + scope + \"]\" : '') + (oldOpt + \" is deprecated, use \" + newOpt + \" instead.\"));\n  }\n}\n/**\r\n * If in __DEV__ environment, get console printable message for users hint.\r\n * Parameters are separated by ' '.\r\n * @usage\r\n * makePrintable('This is an error on', someVar, someObj);\r\n *\r\n * @param hintInfo anything about the current execution context to hint users.\r\n * @throws Error\r\n */\nexport function makePrintable() {\n  var hintInfo = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    hintInfo[_i] = arguments[_i];\n  }\n  var msg = '';\n  if (process.env.NODE_ENV !== 'production') {\n    // Fuzzy stringify for print.\n    // This code only exist in dev environment.\n    var makePrintableStringIfPossible_1 = function (val) {\n      return val === void 0 ? 'undefined' : val === Infinity ? 'Infinity' : val === -Infinity ? '-Infinity' : eqNaN(val) ? 'NaN' : val instanceof Date ? 'Date(' + val.toISOString() + ')' : isFunction(val) ? 'function () { ... }' : isRegExp(val) ? val + '' : null;\n    };\n    msg = map(hintInfo, function (arg) {\n      if (isString(arg)) {\n        // Print without quotation mark for some statement.\n        return arg;\n      } else {\n        var printableStr = makePrintableStringIfPossible_1(arg);\n        if (printableStr != null) {\n          return printableStr;\n        } else if (typeof JSON !== 'undefined' && JSON.stringify) {\n          try {\n            return JSON.stringify(arg, function (n, val) {\n              var printableStr = makePrintableStringIfPossible_1(val);\n              return printableStr == null ? val : printableStr;\n            });\n            // In most cases the info object is small, so do not line break.\n          } catch (err) {\n            return '?';\n          }\n        } else {\n          return '?';\n        }\n      }\n    }).join(' ');\n  }\n  return msg;\n}\n/**\r\n * @throws Error\r\n */\nexport function throwError(msg) {\n  throw new Error(msg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isObject, isArray, createHashMap, map, assert, isString, indexOf, isStringSafe, isNumber } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { isNumeric, getRandomIdBase, getPrecision, round } from './number.js';\nimport { warn } from './log.js';\nfunction interpolateNumber(p0, p1, percent) {\n  return (p1 - p0) * percent + p0;\n}\n/**\r\n * Make the name displayable. But we should\r\n * make sure it is not duplicated with user\r\n * specified name, so use '\\0';\r\n */\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\nvar INTERNAL_COMPONENT_ID_PREFIX = '\\0_ec_\\0';\n/**\r\n * If value is not array, then translate it to array.\r\n * @param  {*} value\r\n * @return {Array} [value] or value\r\n */\nexport function normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\r\n * Sync default option between normal and emphasis like `position` and `show`\r\n * In case some one will write code like\r\n *     label: {\r\n *          show: false,\r\n *          position: 'outside',\r\n *          fontSize: 18\r\n *     },\r\n *     emphasis: {\r\n *          label: { show: true }\r\n *     }\r\n */\nexport function defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {};\n    // Default emphasis option from normal\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\nexport var TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding'];\n// modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n/**\r\n * The method does not ensure performance.\r\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\r\n * This helper method retrieves value from data.\r\n */\nexport function getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\r\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\r\n * This helper method determine if dataItem has extra option besides value\r\n */\nexport function isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array);\n  // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n;\n/**\r\n * Mapping to existings for merge.\r\n *\r\n * Mode \"normalMege\":\r\n *     The mapping result (merge result) will keep the order of the existing\r\n *     component, rather than the order of new option. Because we should ensure\r\n *     some specified index reference (like xAxisIndex) keep work.\r\n *     And in most cases, \"merge option\" is used to update partial option but not\r\n *     be expected to change the order.\r\n *\r\n * Mode \"replaceMege\":\r\n *     (1) Only the id mapped components will be merged.\r\n *     (2) Other existing components (except internal components) will be removed.\r\n *     (3) Other new options will be used to create new component.\r\n *     (4) The index of the existing components will not be modified.\r\n *     That means their might be \"hole\" after the removal.\r\n *     The new components are created first at those available index.\r\n *\r\n * Mode \"replaceAll\":\r\n *     This mode try to support that reproduce an echarts instance from another\r\n *     echarts instance (via `getOption`) in some simple cases.\r\n *     In this scenario, the `result` index are exactly the consistent with the `newCmptOptions`,\r\n *     which ensures the component index referring (like `xAxisIndex: ?`) corrent. That is,\r\n *     the \"hole\" in `newCmptOptions` will also be kept.\r\n *     On the contrary, other modes try best to eliminate holes.\r\n *     PENDING: This is an experimental mode yet.\r\n *\r\n * @return See the comment of <MappingResult>.\r\n */\nexport function mappingToExists(existings, newCmptOptions, mode) {\n  var isNormalMergeMode = mode === 'normalMerge';\n  var isReplaceMergeMode = mode === 'replaceMerge';\n  var isReplaceAllMode = mode === 'replaceAll';\n  existings = existings || [];\n  newCmptOptions = (newCmptOptions || []).slice();\n  var existingIdIdxMap = createHashMap();\n  // Validate id and name on user input option.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!isObject(cmptOption)) {\n      newCmptOptions[index] = null;\n      return;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      // There is some legacy case that name is set as `false`.\n      // But should work normally rather than throw error.\n      if (cmptOption.id != null && !isValidIdOrName(cmptOption.id)) {\n        warnInvalidateIdOrName(cmptOption.id);\n      }\n      if (cmptOption.name != null && !isValidIdOrName(cmptOption.name)) {\n        warnInvalidateIdOrName(cmptOption.name);\n      }\n    }\n  });\n  var result = prepareResult(existings, existingIdIdxMap, mode);\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingById(result, existings, existingIdIdxMap, newCmptOptions);\n  }\n  if (isNormalMergeMode) {\n    mappingByName(result, newCmptOptions);\n  }\n  if (isNormalMergeMode || isReplaceMergeMode) {\n    mappingByIndex(result, newCmptOptions, isReplaceMergeMode);\n  } else if (isReplaceAllMode) {\n    mappingInReplaceAllMode(result, newCmptOptions);\n  }\n  makeIdAndName(result);\n  // The array `result` MUST NOT contain elided items, otherwise the\n  // forEach will omit those items and result in incorrect result.\n  return result;\n}\nfunction prepareResult(existings, existingIdIdxMap, mode) {\n  var result = [];\n  if (mode === 'replaceAll') {\n    return result;\n  }\n  // Do not use native `map` to in case that the array `existings`\n  // contains elided items, which will be omitted.\n  for (var index = 0; index < existings.length; index++) {\n    var existing = existings[index];\n    // Because of replaceMerge, `existing` may be null/undefined.\n    if (existing && existing.id != null) {\n      existingIdIdxMap.set(existing.id, index);\n    }\n    // For non-internal-componnets:\n    //     Mode \"normalMerge\": all existings kept.\n    //     Mode \"replaceMerge\": all existing removed unless mapped by id.\n    // For internal-components:\n    //     go with \"replaceMerge\" approach in both mode.\n    result.push({\n      existing: mode === 'replaceMerge' || isComponentIdInternal(existing) ? null : existing,\n      newOption: null,\n      keyInfo: null,\n      brandNew: null\n    });\n  }\n  return result;\n}\nfunction mappingById(result, existings, existingIdIdxMap, newCmptOptions) {\n  // Mapping by id if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.id == null) {\n      return;\n    }\n    var optionId = makeComparableKey(cmptOption.id);\n    var existingIdx = existingIdIdxMap.get(optionId);\n    if (existingIdx != null) {\n      var resultItem = result[existingIdx];\n      assert(!resultItem.newOption, 'Duplicated option on id \"' + optionId + '\".');\n      resultItem.newOption = cmptOption;\n      // In both mode, if id matched, new option will be merged to\n      // the existings rather than creating new component model.\n      resultItem.existing = existings[existingIdx];\n      newCmptOptions[index] = null;\n    }\n  });\n}\nfunction mappingByName(result, newCmptOptions) {\n  // Mapping by name if specified.\n  each(newCmptOptions, function (cmptOption, index) {\n    if (!cmptOption || cmptOption.name == null) {\n      return;\n    }\n    for (var i = 0; i < result.length; i++) {\n      var existing = result[i].existing;\n      if (!result[i].newOption // Consider name: two map to one.\n      // Can not match when both ids existing but different.\n      && existing && (existing.id == null || cmptOption.id == null) && !isComponentIdInternal(cmptOption) && !isComponentIdInternal(existing) && keyExistAndEqual('name', existing, cmptOption)) {\n        result[i].newOption = cmptOption;\n        newCmptOptions[index] = null;\n        return;\n      }\n    }\n  });\n}\nfunction mappingByIndex(result, newCmptOptions, brandNew) {\n  each(newCmptOptions, function (cmptOption) {\n    if (!cmptOption) {\n      return;\n    }\n    // Find the first place that not mapped by id and not internal component (consider the \"hole\").\n    var resultItem;\n    var nextIdx = 0;\n    while (\n    // Be `!resultItem` only when `nextIdx >= result.length`.\n    (resultItem = result[nextIdx]\n    // (1) Existing models that already have id should be able to mapped to. Because\n    // after mapping performed, model will always be assigned with an id if user not given.\n    // After that all models have id.\n    // (2) If new option has id, it can only set to a hole or append to the last. It should\n    // not be merged to the existings with different id. Because id should not be overwritten.\n    // (3) Name can be overwritten, because axis use name as 'show label text'.\n    ) && (resultItem.newOption || isComponentIdInternal(resultItem.existing) ||\n    // In mode \"replaceMerge\", here no not-mapped-non-internal-existing.\n    resultItem.existing && cmptOption.id != null && !keyExistAndEqual('id', cmptOption, resultItem.existing))) {\n      nextIdx++;\n    }\n    if (resultItem) {\n      resultItem.newOption = cmptOption;\n      resultItem.brandNew = brandNew;\n    } else {\n      result.push({\n        newOption: cmptOption,\n        brandNew: brandNew,\n        existing: null,\n        keyInfo: null\n      });\n    }\n    nextIdx++;\n  });\n}\nfunction mappingInReplaceAllMode(result, newCmptOptions) {\n  each(newCmptOptions, function (cmptOption) {\n    // The feature \"reproduce\" requires \"hole\" will also reproduced\n    // in case that component index referring are broken.\n    result.push({\n      newOption: cmptOption,\n      brandNew: true,\n      existing: null,\n      keyInfo: null\n    });\n  });\n}\n/**\r\n * Make id and name for mapping result (result of mappingToExists)\r\n * into `keyInfo` field.\r\n */\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = createHashMap();\n  each(mapResult, function (item) {\n    var existing = item.existing;\n    existing && idMap.set(existing.id, item);\n  });\n  each(mapResult, function (item) {\n    var opt = item.newOption;\n    // Force ensure id not duplicated.\n    assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  });\n  // Make name and id.\n  each(mapResult, function (item, index) {\n    var existing = item.existing;\n    var opt = item.newOption;\n    var keyInfo = item.keyInfo;\n    if (!isObject(opt)) {\n      return;\n    }\n    // Name can be overwritten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n    keyInfo.name = opt.name != null ? makeComparableKey(opt.name) : existing ? existing.name\n    // Avoid that different series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n    if (existing) {\n      keyInfo.id = makeComparableKey(existing.id);\n    } else if (opt.id != null) {\n      keyInfo.id = makeComparableKey(opt.id);\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n    idMap.set(keyInfo.id, item);\n  });\n}\nfunction keyExistAndEqual(attr, obj1, obj2) {\n  var key1 = convertOptionIdName(obj1[attr], null);\n  var key2 = convertOptionIdName(obj2[attr], null);\n  // See `MappingExistingItem`. `id` and `name` trade string equals to number.\n  return key1 != null && key2 != null && key1 === key2;\n}\n/**\r\n * @return return null if not exist.\r\n */\nfunction makeComparableKey(val) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (val == null) {\n      throw new Error();\n    }\n  }\n  return convertOptionIdName(val, '');\n}\nexport function convertOptionIdName(idOrName, defaultValue) {\n  if (idOrName == null) {\n    return defaultValue;\n  }\n  return isString(idOrName) ? idOrName : isNumber(idOrName) || isStringSafe(idOrName) ? idOrName + '' : defaultValue;\n}\nfunction warnInvalidateIdOrName(idOrName) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('`' + idOrName + '` is invalid id or name. Must be a string or number.');\n  }\n}\nfunction isValidIdOrName(idOrName) {\n  return isStringSafe(idOrName) || isNumeric(idOrName);\n}\nexport function isNameSpecified(componentModel) {\n  var name = componentModel.name;\n  // Is specified when `indexOf` get -1 or > 0.\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\r\n * @public\r\n * @param {Object} cmptOption\r\n * @return {boolean}\r\n */\nexport function isComponentIdInternal(cmptOption) {\n  return cmptOption && cmptOption.id != null && makeComparableKey(cmptOption.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX) === 0;\n}\nexport function makeInternalComponentId(idSuffix) {\n  return INTERNAL_COMPONENT_ID_PREFIX + idSuffix;\n}\nexport function setComponentTypeToKeyInfo(mappingResult, mainType, componentModelCtor) {\n  // Set mainType and complete subType.\n  each(mappingResult, function (item) {\n    var newOption = item.newOption;\n    if (isObject(newOption)) {\n      item.keyInfo.mainType = mainType;\n      item.keyInfo.subType = determineSubType(mainType, newOption, item.existing, componentModelCtor);\n    }\n  });\n}\nfunction determineSubType(mainType, newCmptOption, existComponent, componentModelCtor) {\n  var subType = newCmptOption.type ? newCmptOption.type : existComponent ? existComponent.subType\n  // Use determineSubType only when there is no existComponent.\n  : componentModelCtor.determineSubType(mainType, newCmptOption);\n  // tooltip, markline, markpoint may always has no subType\n  return subType;\n}\n/**\r\n * A helper for removing duplicate items between batchA and batchB,\r\n * and in themselves, and categorize by series.\r\n *\r\n * @param batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\r\n * @param batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\r\n * @return result: [resultBatchA, resultBatchB]\r\n */\nexport function compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = convertOptionIdName(sourceBatch[i].seriesId, null);\n      if (seriesId == null) {\n        return;\n      }\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n  function mapToArray(map, isData) {\n    var result = [];\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n    return result;\n  }\n}\n/**\r\n * @param payload Contains dataIndex (means rawIndex) / dataIndexInside / name\r\n *                         each of which can be Array or primary type.\r\n * @return dataIndex If not found, return undefined/null.\r\n */\nexport function queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return isArray(payload.dataIndex) ? map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return isArray(payload.name) ? map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\r\n * Enable property storage to any host object.\r\n * Notice: Serialization is not supported.\r\n *\r\n * For example:\r\n * let inner = zrUitl.makeInner();\r\n *\r\n * function some1(hostObj) {\r\n *      inner(hostObj).someProperty = 1212;\r\n *      ...\r\n * }\r\n * function some2() {\r\n *      let fields = inner(this);\r\n *      fields.someProperty1 = 1212;\r\n *      fields.someProperty2 = 'xx';\r\n *      ...\r\n * }\r\n *\r\n * @return {Function}\r\n */\nexport function makeInner() {\n  var key = '__ec_inner_' + innerUniqueIndex++;\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\nvar innerUniqueIndex = getRandomIdBase();\n/**\r\n * The same behavior as `component.getReferringComponents`.\r\n */\nexport function parseFinder(ecModel, finderInput, opt) {\n  var _a = preParseFinder(finderInput, opt),\n    mainTypeSpecified = _a.mainTypeSpecified,\n    queryOptionMap = _a.queryOptionMap,\n    others = _a.others;\n  var result = others;\n  var defaultMainType = opt ? opt.defaultMainType : null;\n  if (!mainTypeSpecified && defaultMainType) {\n    queryOptionMap.set(defaultMainType, {});\n  }\n  queryOptionMap.each(function (queryOption, mainType) {\n    var queryResult = queryReferringComponents(ecModel, mainType, queryOption, {\n      useDefault: defaultMainType === mainType,\n      enableAll: opt && opt.enableAll != null ? opt.enableAll : true,\n      enableNone: opt && opt.enableNone != null ? opt.enableNone : true\n    });\n    result[mainType + 'Models'] = queryResult.models;\n    result[mainType + 'Model'] = queryResult.models[0];\n  });\n  return result;\n}\nexport function preParseFinder(finderInput, opt) {\n  var finder;\n  if (isString(finderInput)) {\n    var obj = {};\n    obj[finderInput + 'Index'] = 0;\n    finder = obj;\n  } else {\n    finder = finderInput;\n  }\n  var queryOptionMap = createHashMap();\n  var others = {};\n  var mainTypeSpecified = false;\n  each(finder, function (value, key) {\n    // Exclude 'dataIndex' and other illgal keys.\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      others[key] = value;\n      return;\n    }\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n    if (!mainType || !queryType || opt && opt.includeMainTypes && indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n    mainTypeSpecified = mainTypeSpecified || !!mainType;\n    var queryOption = queryOptionMap.get(mainType) || queryOptionMap.set(mainType, {});\n    queryOption[queryType] = value;\n  });\n  return {\n    mainTypeSpecified: mainTypeSpecified,\n    queryOptionMap: queryOptionMap,\n    others: others\n  };\n}\nexport var SINGLE_REFERRING = {\n  useDefault: true,\n  enableAll: false,\n  enableNone: false\n};\nexport var MULTIPLE_REFERRING = {\n  useDefault: false,\n  enableAll: true,\n  enableNone: true\n};\nexport function queryReferringComponents(ecModel, mainType, userOption, opt) {\n  opt = opt || SINGLE_REFERRING;\n  var indexOption = userOption.index;\n  var idOption = userOption.id;\n  var nameOption = userOption.name;\n  var result = {\n    models: null,\n    specified: indexOption != null || idOption != null || nameOption != null\n  };\n  if (!result.specified) {\n    // Use the first as default if `useDefault`.\n    var firstCmpt = void 0;\n    result.models = opt.useDefault && (firstCmpt = ecModel.getComponent(mainType)) ? [firstCmpt] : [];\n    return result;\n  }\n  if (indexOption === 'none' || indexOption === false) {\n    assert(opt.enableNone, '`\"none\"` or `false` is not a valid value on index option.');\n    result.models = [];\n    return result;\n  }\n  // `queryComponents` will return all components if\n  // both all of index/id/name are null/undefined.\n  if (indexOption === 'all') {\n    assert(opt.enableAll, '`\"all\"` is not a valid value on index option.');\n    indexOption = idOption = nameOption = null;\n  }\n  result.models = ecModel.queryComponents({\n    mainType: mainType,\n    index: indexOption,\n    id: idOption,\n    name: nameOption\n  });\n  return result;\n}\nexport function setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\nexport function getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\nexport function getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\r\n * Group a list by key.\r\n */\nexport function groupData(array, getKey // return key\n) {\n  var buckets = createHashMap();\n  var keys = [];\n  each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n/**\r\n * Interpolate raw values of a series with percent\r\n *\r\n * @param data         data\r\n * @param labelModel   label model of the text element\r\n * @param sourceValue  start value. May be null/undefined when init.\r\n * @param targetValue  end value\r\n * @param percent      0~1 percentage; 0 uses start value while 1 uses end value\r\n * @return             interpolated values\r\n *                     If `sourceValue` and `targetValue` are `number`, return `number`.\r\n *                     If `sourceValue` and `targetValue` are `string`, return `string`.\r\n *                     If `sourceValue` and `targetValue` are `(string | number)[]`, return `(string | number)[]`.\r\n *                     Other cases do not supported.\r\n */\nexport function interpolateRawValues(data, precision, sourceValue, targetValue, percent) {\n  var isAutoPrecision = precision == null || precision === 'auto';\n  if (targetValue == null) {\n    return targetValue;\n  }\n  if (isNumber(targetValue)) {\n    var value = interpolateNumber(sourceValue || 0, targetValue, percent);\n    return round(value, isAutoPrecision ? Math.max(getPrecision(sourceValue || 0), getPrecision(targetValue)) : precision);\n  } else if (isString(targetValue)) {\n    return percent < 1 ? sourceValue : targetValue;\n  } else {\n    var interpolated = [];\n    var leftArr = sourceValue;\n    var rightArr = targetValue;\n    var length_1 = Math.max(leftArr ? leftArr.length : 0, rightArr.length);\n    for (var i = 0; i < length_1; ++i) {\n      var info = data.getDimensionInfo(i);\n      // Don't interpolate ordinal dims\n      if (info && info.type === 'ordinal') {\n        // In init, there is no `sourceValue`, but should better not to get undefined result.\n        interpolated[i] = (percent < 1 && leftArr ? leftArr : rightArr)[i];\n      } else {\n        var leftVal = leftArr && leftArr[i] ? leftArr[i] : 0;\n        var rightVal = rightArr[i];\n        var value = interpolateNumber(leftVal, rightVal, percent);\n        interpolated[i] = round(value, isAutoPrecision ? Math.max(getPrecision(leftVal), getPrecision(rightVal)) : precision);\n      }\n    }\n    return interpolated;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\nvar IS_EXTENDED_CLASS = '___EC__EXTENDED_CLASS___';\n/**\r\n * Notice, parseClassType('') should returns {main: '', sub: ''}\r\n * @public\r\n */\nexport function parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n  if (componentType) {\n    var typeArr = componentType.split(TYPE_DELIMITER);\n    ret.main = typeArr[0] || '';\n    ret.sub = typeArr[1] || '';\n  }\n  return ret;\n}\n/**\r\n * @public\r\n */\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\nexport function isExtendedClass(clz) {\n  return !!(clz && clz[IS_EXTENDED_CLASS]);\n}\n/**\r\n * Implements `ExtendableConstructor` for `rootClz`.\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & ExtendableConstructor\r\n * enableClassExtend(Xxx as XxxConstructor);\r\n * ```\r\n */\nexport function enableClassExtend(rootClz, mandatoryMethods) {\n  rootClz.$constructor = rootClz; // FIXME: not necessary?\n  rootClz.extend = function (proto) {\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(mandatoryMethods, function (method) {\n        if (!proto[method]) {\n          console.warn('Method `' + method + '` should be implemented' + (proto.type ? ' in ' + proto.type : '') + '.');\n        }\n      });\n    }\n    var superClass = this;\n    var ExtendedClass;\n    if (isESClass(superClass)) {\n      ExtendedClass = /** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super.apply(this, arguments) || this;\n        }\n        return class_1;\n      }(superClass);\n    } else {\n      // For backward compat, we both support ts class inheritance and this\n      // \"extend\" approach.\n      // The constructor should keep the same behavior as ts class inheritance:\n      // If this constructor/$constructor is not declared, auto invoke the super\n      // constructor.\n      // If this constructor/$constructor is declared, it is responsible for\n      // calling the super constructor.\n      ExtendedClass = function () {\n        (proto.$constructor || superClass).apply(this, arguments);\n      };\n      zrUtil.inherits(ExtendedClass, this);\n    }\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass[IS_EXTENDED_CLASS] = true;\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\nfunction isESClass(fn) {\n  return zrUtil.isFunction(fn) && /^class\\s/.test(Function.prototype.toString.call(fn));\n}\n/**\r\n * A work around to both support ts extend and this extend mechanism.\r\n * on sub-class.\r\n * @usage\r\n * ```ts\r\n * class Component { ... }\r\n * classUtil.enableClassExtend(Component);\r\n * classUtil.enableClassManagement(Component, {registerWhenExtend: true});\r\n *\r\n * class Series extends Component { ... }\r\n * // Without calling `markExtend`, `registerWhenExtend` will not work.\r\n * Component.markExtend(Series);\r\n * ```\r\n */\nexport function mountExtend(SubClz, SupperClz) {\n  SubClz.extend = SupperClz.extend;\n}\n// A random offset.\nvar classBase = Math.round(Math.random() * 10);\n/**\r\n * Implements `CheckableConstructor` for `target`.\r\n * Can not use instanceof, consider different scope by\r\n * cross domain or es module import in ec extensions.\r\n * Mount a method \"isInstance()\" to Clz.\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & CheckableConstructor;\r\n * enableClassCheck(Xxx as XxxConstructor)\r\n * ```\r\n */\nexport function enableClassCheck(target) {\n  var classAttr = ['__\\0is_clz', classBase++].join('_');\n  target.prototype[classAttr] = true;\n  if (process.env.NODE_ENV !== 'production') {\n    zrUtil.assert(!target.isInstance, 'The method \"is\" can not be defined.');\n  }\n  target.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n}\n// superCall should have class info, which can not be fetched from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, does not override method f,\n// then when method of class C is called, dead loop occurred.\nfunction superCall(context, methodName) {\n  var args = [];\n  for (var _i = 2; _i < arguments.length; _i++) {\n    args[_i - 2] = arguments[_i];\n  }\n  return this.superClass.prototype[methodName].apply(context, args);\n}\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\r\n * Implements `ClassManager` for `target`\r\n *\r\n * @usage\r\n * ```ts\r\n * class Xxx {}\r\n * type XxxConstructor = typeof Xxx & ClassManager\r\n * enableClassManagement(Xxx as XxxConstructor);\r\n * ```\r\n */\nexport function enableClassManagement(target) {\n  /**\r\n   * Component model classes\r\n   * key: componentType,\r\n   * value:\r\n   *     componentClass, when componentType is 'a'\r\n   *     or Object.<subKey, componentClass>, when componentType is 'a.b'\r\n   */\n  var storage = {};\n  target.registerClass = function (clz) {\n    // `type` should not be a \"instance member\".\n    // If using TS class, should better declared as `static type = 'series.pie'`.\n    // otherwise users have to mount `type` on prototype manually.\n    // For backward compat and enable instance visit type via `this.type`,\n    // we still support fetch `type` from prototype.\n    var componentFullType = clz.type || clz.prototype.type;\n    if (componentFullType) {\n      checkClassType(componentFullType);\n      // If only static type declared, we assign it to prototype mandatorily.\n      clz.prototype.type = componentFullType;\n      var componentTypeInfo = parseClassType(componentFullType);\n      if (!componentTypeInfo.sub) {\n        if (process.env.NODE_ENV !== 'production') {\n          if (storage[componentTypeInfo.main]) {\n            console.warn(componentTypeInfo.main + ' exists.');\n          }\n        }\n        storage[componentTypeInfo.main] = clz;\n      } else if (componentTypeInfo.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentTypeInfo);\n        container[componentTypeInfo.sub] = clz;\n      }\n    }\n    return clz;\n  };\n  target.getClass = function (mainType, subType, throwWhenNotFound) {\n    var clz = storage[mainType];\n    if (clz && clz[IS_CONTAINER]) {\n      clz = subType ? clz[subType] : null;\n    }\n    if (throwWhenNotFound && !clz) {\n      throw new Error(!subType ? mainType + '.' + 'type should be specified.' : 'Component ' + mainType + '.' + (subType || '') + ' is used but not imported.');\n    }\n    return clz;\n  };\n  target.getClassesByMainType = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentTypeInfo.main];\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n    return result;\n  };\n  target.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    var componentTypeInfo = parseClassType(componentType);\n    return !!storage[componentTypeInfo.main];\n  };\n  /**\r\n   * @return Like ['aa', 'bb'], but can not be ['aa.xx']\r\n   */\n  target.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\r\n   * If a main type is container and has sub types\r\n   */\n  target.hasSubTypes = function (componentType) {\n    var componentTypeInfo = parseClassType(componentType);\n    var obj = storage[componentTypeInfo.main];\n    return obj && obj[IS_CONTAINER];\n  };\n  function makeContainer(componentTypeInfo) {\n    var container = storage[componentTypeInfo.main];\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentTypeInfo.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n    return container;\n  }\n}\n// /**\n//  * @param {string|Array.<string>} properties\n//  */\n// export function setReadOnly(obj, properties) {\n// FIXME It seems broken in IE8 simulation of IE11\n// if (!zrUtil.isArray(properties)) {\n//     properties = properties != null ? [properties] : [];\n// }\n// zrUtil.each(properties, function (prop) {\n//     let value = obj[prop];\n//     Object.defineProperty\n//         && Object.defineProperty(obj, prop, {\n//             value: value, writable: false\n//         });\n//     zrUtil.isArray(obj[prop])\n//         && Object.freeze\n//         && Object.freeze(obj[prop]);\n// });\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// TODO Parse shadow style\n// TODO Only shallow path support\nimport * as zrUtil from 'zrender/lib/core/util.js';\nexport default function makeStyleMapper(properties, ignoreParent) {\n  // Normalize\n  for (var i = 0; i < properties.length; i++) {\n    if (!properties[i][1]) {\n      properties[i][1] = properties[i][0];\n    }\n  }\n  ignoreParent = ignoreParent || false;\n  return function (model, excludes, includes) {\n    var style = {};\n    for (var i = 0; i < properties.length; i++) {\n      var propName = properties[i][1];\n      if (excludes && zrUtil.indexOf(excludes, propName) >= 0 || includes && zrUtil.indexOf(includes, propName) < 0) {\n        continue;\n      }\n      var val = model.getShallow(propName, ignoreParent);\n      if (val != null) {\n        style[properties[i][0]] = val;\n      }\n    }\n    // TODO Text or image?\n    return style;\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var AREA_STYLE_KEY_MAP = [['fill', 'color'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['opacity'], ['shadowColor']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getAreaStyle = makeStyleMapper(AREA_STYLE_KEY_MAP);\nvar AreaStyleMixin = /** @class */function () {\n  function AreaStyleMixin() {}\n  AreaStyleMixin.prototype.getAreaStyle = function (excludes, includes) {\n    return getAreaStyle(this, excludes, includes);\n  };\n  return AreaStyleMixin;\n}();\n;\nexport { AreaStyleMixin };","import LRU from '../../core/LRU.js';\nimport { platformApi } from '../../core/platform.js';\nvar globalImageCache = new LRU(50);\nexport function findExistImage(newImageOrSrc) {\n    if (typeof newImageOrSrc === 'string') {\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        return cachedImgObj && cachedImgObj.image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nexport function createOrUpdateImage(newImageOrSrc, image, hostEl, onload, cbPayload) {\n    if (!newImageOrSrc) {\n        return image;\n    }\n    else if (typeof newImageOrSrc === 'string') {\n        if ((image && image.__zrImageSrc === newImageOrSrc) || !hostEl) {\n            return image;\n        }\n        var cachedImgObj = globalImageCache.get(newImageOrSrc);\n        var pendingWrap = { hostEl: hostEl, cb: onload, cbPayload: cbPayload };\n        if (cachedImgObj) {\n            image = cachedImgObj.image;\n            !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n        }\n        else {\n            image = platformApi.loadImage(newImageOrSrc, imageOnLoad, imageOnLoad);\n            image.__zrImageSrc = newImageOrSrc;\n            globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n                image: image,\n                pending: [pendingWrap]\n            });\n        }\n        return image;\n    }\n    else {\n        return newImageOrSrc;\n    }\n}\nfunction imageOnLoad() {\n    var cachedImgObj = this.__cachedImgObj;\n    this.onload = this.onerror = this.__cachedImgObj = null;\n    for (var i = 0; i < cachedImgObj.pending.length; i++) {\n        var pendingWrap = cachedImgObj.pending[i];\n        var cb = pendingWrap.cb;\n        cb && cb(this, pendingWrap.cbPayload);\n        pendingWrap.hostEl.dirty();\n    }\n    cachedImgObj.pending.length = 0;\n}\nexport function isImageReady(image) {\n    return image && image.width && image.height;\n}\n","import * as imageHelper from '../helper/image.js';\nimport { extend, retrieve2, retrieve3, reduce } from '../../core/util.js';\nimport { getLineHeight, getWidth, parsePercent } from '../../contain/text.js';\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nexport function truncateText(text, containerWidth, font, ellipsis, options) {\n    var out = {};\n    truncateText2(out, text, containerWidth, font, ellipsis, options);\n    return out.text;\n}\nfunction truncateText2(out, text, containerWidth, font, ellipsis, options) {\n    if (!containerWidth) {\n        out.text = '';\n        out.isTruncated = false;\n        return;\n    }\n    var textLines = (text + '').split('\\n');\n    options = prepareTruncateOptions(containerWidth, font, ellipsis, options);\n    var isTruncated = false;\n    var truncateOut = {};\n    for (var i = 0, len = textLines.length; i < len; i++) {\n        truncateSingleLine(truncateOut, textLines[i], options);\n        textLines[i] = truncateOut.textLine;\n        isTruncated = isTruncated || truncateOut.isTruncated;\n    }\n    out.text = textLines.join('\\n');\n    out.isTruncated = isTruncated;\n}\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n    options = options || {};\n    var preparedOpts = extend({}, options);\n    preparedOpts.font = font;\n    ellipsis = retrieve2(ellipsis, '...');\n    preparedOpts.maxIterations = retrieve2(options.maxIterations, 2);\n    var minChar = preparedOpts.minChar = retrieve2(options.minChar, 0);\n    preparedOpts.cnCharWidth = getWidth('', font);\n    var ascCharWidth = preparedOpts.ascCharWidth = getWidth('a', font);\n    preparedOpts.placeholder = retrieve2(options.placeholder, '');\n    var contentWidth = containerWidth = Math.max(0, containerWidth - 1);\n    for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n        contentWidth -= ascCharWidth;\n    }\n    var ellipsisWidth = getWidth(ellipsis, font);\n    if (ellipsisWidth > contentWidth) {\n        ellipsis = '';\n        ellipsisWidth = 0;\n    }\n    contentWidth = containerWidth - ellipsisWidth;\n    preparedOpts.ellipsis = ellipsis;\n    preparedOpts.ellipsisWidth = ellipsisWidth;\n    preparedOpts.contentWidth = contentWidth;\n    preparedOpts.containerWidth = containerWidth;\n    return preparedOpts;\n}\nfunction truncateSingleLine(out, textLine, options) {\n    var containerWidth = options.containerWidth;\n    var font = options.font;\n    var contentWidth = options.contentWidth;\n    if (!containerWidth) {\n        out.textLine = '';\n        out.isTruncated = false;\n        return;\n    }\n    var lineWidth = getWidth(textLine, font);\n    if (lineWidth <= containerWidth) {\n        out.textLine = textLine;\n        out.isTruncated = false;\n        return;\n    }\n    for (var j = 0;; j++) {\n        if (lineWidth <= contentWidth || j >= options.maxIterations) {\n            textLine += options.ellipsis;\n            break;\n        }\n        var subLength = j === 0\n            ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth)\n            : lineWidth > 0\n                ? Math.floor(textLine.length * contentWidth / lineWidth)\n                : 0;\n        textLine = textLine.substr(0, subLength);\n        lineWidth = getWidth(textLine, font);\n    }\n    if (textLine === '') {\n        textLine = options.placeholder;\n    }\n    out.textLine = textLine;\n    out.isTruncated = true;\n}\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n    var width = 0;\n    var i = 0;\n    for (var len = text.length; i < len && width < contentWidth; i++) {\n        var charCode = text.charCodeAt(i);\n        width += (0 <= charCode && charCode <= 127) ? ascCharWidth : cnCharWidth;\n    }\n    return i;\n}\nexport function parsePlainText(text, style) {\n    text != null && (text += '');\n    var overflow = style.overflow;\n    var padding = style.padding;\n    var font = style.font;\n    var truncate = overflow === 'truncate';\n    var calculatedLineHeight = getLineHeight(font);\n    var lineHeight = retrieve2(style.lineHeight, calculatedLineHeight);\n    var bgColorDrawn = !!(style.backgroundColor);\n    var truncateLineOverflow = style.lineOverflow === 'truncate';\n    var isTruncated = false;\n    var width = style.width;\n    var lines;\n    if (width != null && (overflow === 'break' || overflow === 'breakAll')) {\n        lines = text ? wrapText(text, style.font, width, overflow === 'breakAll', 0).lines : [];\n    }\n    else {\n        lines = text ? text.split('\\n') : [];\n    }\n    var contentHeight = lines.length * lineHeight;\n    var height = retrieve2(style.height, contentHeight);\n    if (contentHeight > height && truncateLineOverflow) {\n        var lineCount = Math.floor(height / lineHeight);\n        isTruncated = isTruncated || (lines.length > lineCount);\n        lines = lines.slice(0, lineCount);\n    }\n    if (text && truncate && width != null) {\n        var options = prepareTruncateOptions(width, font, style.ellipsis, {\n            minChar: style.truncateMinChar,\n            placeholder: style.placeholder\n        });\n        var singleOut = {};\n        for (var i = 0; i < lines.length; i++) {\n            truncateSingleLine(singleOut, lines[i], options);\n            lines[i] = singleOut.textLine;\n            isTruncated = isTruncated || singleOut.isTruncated;\n        }\n    }\n    var outerHeight = height;\n    var contentWidth = 0;\n    for (var i = 0; i < lines.length; i++) {\n        contentWidth = Math.max(getWidth(lines[i], font), contentWidth);\n    }\n    if (width == null) {\n        width = contentWidth;\n    }\n    var outerWidth = contentWidth;\n    if (padding) {\n        outerHeight += padding[0] + padding[2];\n        outerWidth += padding[1] + padding[3];\n        width += padding[1] + padding[3];\n    }\n    if (bgColorDrawn) {\n        outerWidth = width;\n    }\n    return {\n        lines: lines,\n        height: height,\n        outerWidth: outerWidth,\n        outerHeight: outerHeight,\n        lineHeight: lineHeight,\n        calculatedLineHeight: calculatedLineHeight,\n        contentWidth: contentWidth,\n        contentHeight: contentHeight,\n        width: width,\n        isTruncated: isTruncated\n    };\n}\nvar RichTextToken = (function () {\n    function RichTextToken() {\n    }\n    return RichTextToken;\n}());\nvar RichTextLine = (function () {\n    function RichTextLine(tokens) {\n        this.tokens = [];\n        if (tokens) {\n            this.tokens = tokens;\n        }\n    }\n    return RichTextLine;\n}());\nvar RichTextContentBlock = (function () {\n    function RichTextContentBlock() {\n        this.width = 0;\n        this.height = 0;\n        this.contentWidth = 0;\n        this.contentHeight = 0;\n        this.outerWidth = 0;\n        this.outerHeight = 0;\n        this.lines = [];\n        this.isTruncated = false;\n    }\n    return RichTextContentBlock;\n}());\nexport { RichTextContentBlock };\nexport function parseRichText(text, style) {\n    var contentBlock = new RichTextContentBlock();\n    text != null && (text += '');\n    if (!text) {\n        return contentBlock;\n    }\n    var topWidth = style.width;\n    var topHeight = style.height;\n    var overflow = style.overflow;\n    var wrapInfo = (overflow === 'break' || overflow === 'breakAll') && topWidth != null\n        ? { width: topWidth, accumWidth: 0, breakAll: overflow === 'breakAll' }\n        : null;\n    var lastIndex = STYLE_REG.lastIndex = 0;\n    var result;\n    while ((result = STYLE_REG.exec(text)) != null) {\n        var matchedIndex = result.index;\n        if (matchedIndex > lastIndex) {\n            pushTokens(contentBlock, text.substring(lastIndex, matchedIndex), style, wrapInfo);\n        }\n        pushTokens(contentBlock, result[2], style, wrapInfo, result[1]);\n        lastIndex = STYLE_REG.lastIndex;\n    }\n    if (lastIndex < text.length) {\n        pushTokens(contentBlock, text.substring(lastIndex, text.length), style, wrapInfo);\n    }\n    var pendingList = [];\n    var calculatedHeight = 0;\n    var calculatedWidth = 0;\n    var stlPadding = style.padding;\n    var truncate = overflow === 'truncate';\n    var truncateLine = style.lineOverflow === 'truncate';\n    var tmpTruncateOut = {};\n    function finishLine(line, lineWidth, lineHeight) {\n        line.width = lineWidth;\n        line.lineHeight = lineHeight;\n        calculatedHeight += lineHeight;\n        calculatedWidth = Math.max(calculatedWidth, lineWidth);\n    }\n    outer: for (var i = 0; i < contentBlock.lines.length; i++) {\n        var line = contentBlock.lines[i];\n        var lineHeight = 0;\n        var lineWidth = 0;\n        for (var j = 0; j < line.tokens.length; j++) {\n            var token = line.tokens[j];\n            var tokenStyle = token.styleName && style.rich[token.styleName] || {};\n            var textPadding = token.textPadding = tokenStyle.padding;\n            var paddingH = textPadding ? textPadding[1] + textPadding[3] : 0;\n            var font = token.font = tokenStyle.font || style.font;\n            token.contentHeight = getLineHeight(font);\n            var tokenHeight = retrieve2(tokenStyle.height, token.contentHeight);\n            token.innerHeight = tokenHeight;\n            textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n            token.height = tokenHeight;\n            token.lineHeight = retrieve3(tokenStyle.lineHeight, style.lineHeight, tokenHeight);\n            token.align = tokenStyle && tokenStyle.align || style.align;\n            token.verticalAlign = tokenStyle && tokenStyle.verticalAlign || 'middle';\n            if (truncateLine && topHeight != null && calculatedHeight + token.lineHeight > topHeight) {\n                var originalLength = contentBlock.lines.length;\n                if (j > 0) {\n                    line.tokens = line.tokens.slice(0, j);\n                    finishLine(line, lineWidth, lineHeight);\n                    contentBlock.lines = contentBlock.lines.slice(0, i + 1);\n                }\n                else {\n                    contentBlock.lines = contentBlock.lines.slice(0, i);\n                }\n                contentBlock.isTruncated = contentBlock.isTruncated || (contentBlock.lines.length < originalLength);\n                break outer;\n            }\n            var styleTokenWidth = tokenStyle.width;\n            var tokenWidthNotSpecified = styleTokenWidth == null || styleTokenWidth === 'auto';\n            if (typeof styleTokenWidth === 'string' && styleTokenWidth.charAt(styleTokenWidth.length - 1) === '%') {\n                token.percentWidth = styleTokenWidth;\n                pendingList.push(token);\n                token.contentWidth = getWidth(token.text, font);\n            }\n            else {\n                if (tokenWidthNotSpecified) {\n                    var textBackgroundColor = tokenStyle.backgroundColor;\n                    var bgImg = textBackgroundColor && textBackgroundColor.image;\n                    if (bgImg) {\n                        bgImg = imageHelper.findExistImage(bgImg);\n                        if (imageHelper.isImageReady(bgImg)) {\n                            token.width = Math.max(token.width, bgImg.width * tokenHeight / bgImg.height);\n                        }\n                    }\n                }\n                var remainTruncWidth = truncate && topWidth != null\n                    ? topWidth - lineWidth : null;\n                if (remainTruncWidth != null && remainTruncWidth < token.width) {\n                    if (!tokenWidthNotSpecified || remainTruncWidth < paddingH) {\n                        token.text = '';\n                        token.width = token.contentWidth = 0;\n                    }\n                    else {\n                        truncateText2(tmpTruncateOut, token.text, remainTruncWidth - paddingH, font, style.ellipsis, { minChar: style.truncateMinChar });\n                        token.text = tmpTruncateOut.text;\n                        contentBlock.isTruncated = contentBlock.isTruncated || tmpTruncateOut.isTruncated;\n                        token.width = token.contentWidth = getWidth(token.text, font);\n                    }\n                }\n                else {\n                    token.contentWidth = getWidth(token.text, font);\n                }\n            }\n            token.width += paddingH;\n            lineWidth += token.width;\n            tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n        }\n        finishLine(line, lineWidth, lineHeight);\n    }\n    contentBlock.outerWidth = contentBlock.width = retrieve2(topWidth, calculatedWidth);\n    contentBlock.outerHeight = contentBlock.height = retrieve2(topHeight, calculatedHeight);\n    contentBlock.contentHeight = calculatedHeight;\n    contentBlock.contentWidth = calculatedWidth;\n    if (stlPadding) {\n        contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n        contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n    }\n    for (var i = 0; i < pendingList.length; i++) {\n        var token = pendingList[i];\n        var percentWidth = token.percentWidth;\n        token.width = parseInt(percentWidth, 10) / 100 * contentBlock.width;\n    }\n    return contentBlock;\n}\nfunction pushTokens(block, str, style, wrapInfo, styleName) {\n    var isEmptyStr = str === '';\n    var tokenStyle = styleName && style.rich[styleName] || {};\n    var lines = block.lines;\n    var font = tokenStyle.font || style.font;\n    var newLine = false;\n    var strLines;\n    var linesWidths;\n    if (wrapInfo) {\n        var tokenPadding = tokenStyle.padding;\n        var tokenPaddingH = tokenPadding ? tokenPadding[1] + tokenPadding[3] : 0;\n        if (tokenStyle.width != null && tokenStyle.width !== 'auto') {\n            var outerWidth_1 = parsePercent(tokenStyle.width, wrapInfo.width) + tokenPaddingH;\n            if (lines.length > 0) {\n                if (outerWidth_1 + wrapInfo.accumWidth > wrapInfo.width) {\n                    strLines = str.split('\\n');\n                    newLine = true;\n                }\n            }\n            wrapInfo.accumWidth = outerWidth_1;\n        }\n        else {\n            var res = wrapText(str, font, wrapInfo.width, wrapInfo.breakAll, wrapInfo.accumWidth);\n            wrapInfo.accumWidth = res.accumWidth + tokenPaddingH;\n            linesWidths = res.linesWidths;\n            strLines = res.lines;\n        }\n    }\n    else {\n        strLines = str.split('\\n');\n    }\n    for (var i = 0; i < strLines.length; i++) {\n        var text = strLines[i];\n        var token = new RichTextToken();\n        token.styleName = styleName;\n        token.text = text;\n        token.isLineHolder = !text && !isEmptyStr;\n        if (typeof tokenStyle.width === 'number') {\n            token.width = tokenStyle.width;\n        }\n        else {\n            token.width = linesWidths\n                ? linesWidths[i]\n                : getWidth(text, font);\n        }\n        if (!i && !newLine) {\n            var tokens = (lines[lines.length - 1] || (lines[0] = new RichTextLine())).tokens;\n            var tokensLen = tokens.length;\n            (tokensLen === 1 && tokens[0].isLineHolder)\n                ? (tokens[0] = token)\n                : ((text || !tokensLen || isEmptyStr) && tokens.push(token));\n        }\n        else {\n            lines.push(new RichTextLine([token]));\n        }\n    }\n}\nfunction isAlphabeticLetter(ch) {\n    var code = ch.charCodeAt(0);\n    return code >= 0x20 && code <= 0x24F\n        || code >= 0x370 && code <= 0x10FF\n        || code >= 0x1200 && code <= 0x13FF\n        || code >= 0x1E00 && code <= 0x206F;\n}\nvar breakCharMap = reduce(',&?/;] '.split(''), function (obj, ch) {\n    obj[ch] = true;\n    return obj;\n}, {});\nfunction isWordBreakChar(ch) {\n    if (isAlphabeticLetter(ch)) {\n        if (breakCharMap[ch]) {\n            return true;\n        }\n        return false;\n    }\n    return true;\n}\nfunction wrapText(text, font, lineWidth, isBreakAll, lastAccumWidth) {\n    var lines = [];\n    var linesWidths = [];\n    var line = '';\n    var currentWord = '';\n    var currentWordWidth = 0;\n    var accumWidth = 0;\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\n') {\n            if (currentWord) {\n                line += currentWord;\n                accumWidth += currentWordWidth;\n            }\n            lines.push(line);\n            linesWidths.push(accumWidth);\n            line = '';\n            currentWord = '';\n            currentWordWidth = 0;\n            accumWidth = 0;\n            continue;\n        }\n        var chWidth = getWidth(ch, font);\n        var inWord = isBreakAll ? false : !isWordBreakChar(ch);\n        if (!lines.length\n            ? lastAccumWidth + accumWidth + chWidth > lineWidth\n            : accumWidth + chWidth > lineWidth) {\n            if (!accumWidth) {\n                if (inWord) {\n                    lines.push(currentWord);\n                    linesWidths.push(currentWordWidth);\n                    currentWord = ch;\n                    currentWordWidth = chWidth;\n                }\n                else {\n                    lines.push(ch);\n                    linesWidths.push(chWidth);\n                }\n            }\n            else if (line || currentWord) {\n                if (inWord) {\n                    if (!line) {\n                        line = currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                        accumWidth = currentWordWidth;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth - currentWordWidth);\n                    currentWord += ch;\n                    currentWordWidth += chWidth;\n                    line = '';\n                    accumWidth = currentWordWidth;\n                }\n                else {\n                    if (currentWord) {\n                        line += currentWord;\n                        currentWord = '';\n                        currentWordWidth = 0;\n                    }\n                    lines.push(line);\n                    linesWidths.push(accumWidth);\n                    line = ch;\n                    accumWidth = chWidth;\n                }\n            }\n            continue;\n        }\n        accumWidth += chWidth;\n        if (inWord) {\n            currentWord += ch;\n            currentWordWidth += chWidth;\n        }\n        else {\n            if (currentWord) {\n                line += currentWord;\n                currentWord = '';\n                currentWordWidth = 0;\n            }\n            line += ch;\n        }\n    }\n    if (!lines.length && !line) {\n        line = text;\n        currentWord = '';\n        currentWordWidth = 0;\n    }\n    if (currentWord) {\n        line += currentWord;\n    }\n    if (line) {\n        lines.push(line);\n        linesWidths.push(accumWidth);\n    }\n    if (lines.length === 1) {\n        accumWidth += lastAccumWidth;\n    }\n    return {\n        accumWidth: accumWidth,\n        lines: lines,\n        linesWidths: linesWidths\n    };\n}\n","import { __extends } from \"tslib\";\nimport Element from '../Element.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { keys, extend, createObject } from '../core/util.js';\nimport { REDRAW_BIT, STYLE_CHANGED_BIT } from './constants.js';\nvar STYLE_MAGIC_KEY = '__zr_style_' + Math.round((Math.random() * 10));\nexport var DEFAULT_COMMON_STYLE = {\n    shadowBlur: 0,\n    shadowOffsetX: 0,\n    shadowOffsetY: 0,\n    shadowColor: '#000',\n    opacity: 1,\n    blend: 'source-over'\n};\nexport var DEFAULT_COMMON_ANIMATION_PROPS = {\n    style: {\n        shadowBlur: true,\n        shadowOffsetX: true,\n        shadowOffsetY: true,\n        shadowColor: true,\n        opacity: true\n    }\n};\nDEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY] = true;\nvar PRIMARY_STATES_KEYS = ['z', 'z2', 'invisible'];\nvar PRIMARY_STATES_KEYS_IN_HOVER_LAYER = ['invisible'];\nvar Displayable = (function (_super) {\n    __extends(Displayable, _super);\n    function Displayable(props) {\n        return _super.call(this, props) || this;\n    }\n    Displayable.prototype._init = function (props) {\n        var keysArr = keys(props);\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            if (key === 'style') {\n                this.useStyle(props[key]);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, props[key]);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Displayable.prototype.beforeBrush = function () { };\n    Displayable.prototype.afterBrush = function () { };\n    Displayable.prototype.innerBeforeBrush = function () { };\n    Displayable.prototype.innerAfterBrush = function () { };\n    Displayable.prototype.shouldBePainted = function (viewWidth, viewHeight, considerClipPath, considerAncestors) {\n        var m = this.transform;\n        if (this.ignore\n            || this.invisible\n            || this.style.opacity === 0\n            || (this.culling\n                && isDisplayableCulled(this, viewWidth, viewHeight))\n            || (m && !m[0] && !m[3])) {\n            return false;\n        }\n        if (considerClipPath && this.__clipPaths) {\n            for (var i = 0; i < this.__clipPaths.length; ++i) {\n                if (this.__clipPaths[i].isZeroArea()) {\n                    return false;\n                }\n            }\n        }\n        if (considerAncestors && this.parent) {\n            var parent_1 = this.parent;\n            while (parent_1) {\n                if (parent_1.ignore) {\n                    return false;\n                }\n                parent_1 = parent_1.parent;\n            }\n        }\n        return true;\n    };\n    Displayable.prototype.contain = function (x, y) {\n        return this.rectContain(x, y);\n    };\n    Displayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    Displayable.prototype.rectContain = function (x, y) {\n        var coord = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        return rect.contain(coord[0], coord[1]);\n    };\n    Displayable.prototype.getPaintRect = function () {\n        var rect = this._paintRect;\n        if (!this._paintRect || this.__dirty) {\n            var transform = this.transform;\n            var elRect = this.getBoundingRect();\n            var style = this.style;\n            var shadowSize = style.shadowBlur || 0;\n            var shadowOffsetX = style.shadowOffsetX || 0;\n            var shadowOffsetY = style.shadowOffsetY || 0;\n            rect = this._paintRect || (this._paintRect = new BoundingRect(0, 0, 0, 0));\n            if (transform) {\n                BoundingRect.applyTransform(rect, elRect, transform);\n            }\n            else {\n                rect.copy(elRect);\n            }\n            if (shadowSize || shadowOffsetX || shadowOffsetY) {\n                rect.width += shadowSize * 2 + Math.abs(shadowOffsetX);\n                rect.height += shadowSize * 2 + Math.abs(shadowOffsetY);\n                rect.x = Math.min(rect.x, rect.x + shadowOffsetX - shadowSize);\n                rect.y = Math.min(rect.y, rect.y + shadowOffsetY - shadowSize);\n            }\n            var tolerance = this.dirtyRectTolerance;\n            if (!rect.isZero()) {\n                rect.x = Math.floor(rect.x - tolerance);\n                rect.y = Math.floor(rect.y - tolerance);\n                rect.width = Math.ceil(rect.width + 1 + tolerance * 2);\n                rect.height = Math.ceil(rect.height + 1 + tolerance * 2);\n            }\n        }\n        return rect;\n    };\n    Displayable.prototype.setPrevPaintRect = function (paintRect) {\n        if (paintRect) {\n            this._prevPaintRect = this._prevPaintRect || new BoundingRect(0, 0, 0, 0);\n            this._prevPaintRect.copy(paintRect);\n        }\n        else {\n            this._prevPaintRect = null;\n        }\n    };\n    Displayable.prototype.getPrevPaintRect = function () {\n        return this._prevPaintRect;\n    };\n    Displayable.prototype.animateStyle = function (loop) {\n        return this.animate('style', loop);\n    };\n    Displayable.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Displayable.prototype.attrKV = function (key, value) {\n        if (key !== 'style') {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n        else {\n            if (!this.style) {\n                this.useStyle(value);\n            }\n            else {\n                this.setStyle(value);\n            }\n        }\n    };\n    Displayable.prototype.setStyle = function (keyOrObj, value) {\n        if (typeof keyOrObj === 'string') {\n            this.style[keyOrObj] = value;\n        }\n        else {\n            extend(this.style, keyOrObj);\n        }\n        this.dirtyStyle();\n        return this;\n    };\n    Displayable.prototype.dirtyStyle = function (notRedraw) {\n        if (!notRedraw) {\n            this.markRedraw();\n        }\n        this.__dirty |= STYLE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n    };\n    Displayable.prototype.dirty = function () {\n        this.dirtyStyle();\n    };\n    Displayable.prototype.styleChanged = function () {\n        return !!(this.__dirty & STYLE_CHANGED_BIT);\n    };\n    Displayable.prototype.styleUpdated = function () {\n        this.__dirty &= ~STYLE_CHANGED_BIT;\n    };\n    Displayable.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_COMMON_STYLE, obj);\n    };\n    Displayable.prototype.useStyle = function (obj) {\n        if (!obj[STYLE_MAGIC_KEY]) {\n            obj = this.createStyle(obj);\n        }\n        if (this.__inHover) {\n            this.__hoverStyle = obj;\n        }\n        else {\n            this.style = obj;\n        }\n        this.dirtyStyle();\n    };\n    Displayable.prototype.isStyleObject = function (obj) {\n        return obj[STYLE_MAGIC_KEY];\n    };\n    Displayable.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.style && !normalState.style) {\n            normalState.style = this._mergeStyle(this.createStyle(), this.style);\n        }\n        this._savePrimaryToNormal(toState, normalState, PRIMARY_STATES_KEYS);\n    };\n    Displayable.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetStyle;\n        if (state && state.style) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetStyle = state.style;\n                }\n                else {\n                    targetStyle = this._mergeStyle(this.createStyle(), normalState.style);\n                    this._mergeStyle(targetStyle, state.style);\n                }\n            }\n            else {\n                targetStyle = this._mergeStyle(this.createStyle(), keepCurrentStates ? this.style : normalState.style);\n                this._mergeStyle(targetStyle, state.style);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetStyle = normalState.style;\n        }\n        if (targetStyle) {\n            if (transition) {\n                var sourceStyle = this.style;\n                this.style = this.createStyle(needsRestoreToNormal ? {} : sourceStyle);\n                if (needsRestoreToNormal) {\n                    var changedKeys = keys(sourceStyle);\n                    for (var i = 0; i < changedKeys.length; i++) {\n                        var key = changedKeys[i];\n                        if (key in targetStyle) {\n                            targetStyle[key] = targetStyle[key];\n                            this.style[key] = sourceStyle[key];\n                        }\n                    }\n                }\n                var targetKeys = keys(targetStyle);\n                for (var i = 0; i < targetKeys.length; i++) {\n                    var key = targetKeys[i];\n                    this.style[key] = this.style[key];\n                }\n                this._transitionState(stateName, {\n                    style: targetStyle\n                }, animationCfg, this.getAnimationStyleProps());\n            }\n            else {\n                this.useStyle(targetStyle);\n            }\n        }\n        var statesKeys = this.__inHover ? PRIMARY_STATES_KEYS_IN_HOVER_LAYER : PRIMARY_STATES_KEYS;\n        for (var i = 0; i < statesKeys.length; i++) {\n            var key = statesKeys[i];\n            if (state && state[key] != null) {\n                this[key] = state[key];\n            }\n            else if (needsRestoreToNormal) {\n                if (normalState[key] != null) {\n                    this[key] = normalState[key];\n                }\n            }\n        }\n    };\n    Displayable.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedStyle;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.style) {\n                mergedStyle = mergedStyle || {};\n                this._mergeStyle(mergedStyle, state.style);\n            }\n        }\n        if (mergedStyle) {\n            mergedState.style = mergedStyle;\n        }\n        return mergedState;\n    };\n    Displayable.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        extend(targetStyle, sourceStyle);\n        return targetStyle;\n    };\n    Displayable.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_COMMON_ANIMATION_PROPS;\n    };\n    Displayable.initDefaultProps = (function () {\n        var dispProto = Displayable.prototype;\n        dispProto.type = 'displayable';\n        dispProto.invisible = false;\n        dispProto.z = 0;\n        dispProto.z2 = 0;\n        dispProto.zlevel = 0;\n        dispProto.culling = false;\n        dispProto.cursor = 'pointer';\n        dispProto.rectHover = false;\n        dispProto.incremental = false;\n        dispProto._rect = null;\n        dispProto.dirtyRectTolerance = 0;\n        dispProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT;\n    })();\n    return Displayable;\n}(Element));\nvar tmpRect = new BoundingRect(0, 0, 0, 0);\nvar viewRect = new BoundingRect(0, 0, 0, 0);\nfunction isDisplayableCulled(el, width, height) {\n    tmpRect.copy(el.getBoundingRect());\n    if (el.transform) {\n        tmpRect.applyTransform(el.transform);\n    }\n    viewRect.width = width;\n    viewRect.height = height;\n    return !tmpRect.intersect(viewRect);\n}\nexport default Displayable;\n","import * as vec2 from './vector.js';\nimport * as curve from './curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI2 = Math.PI * 2;\nvar start = vec2.create();\nvar end = vec2.create();\nvar extremity = vec2.create();\nexport function fromPoints(points, min, max) {\n    if (points.length === 0) {\n        return;\n    }\n    var p = points[0];\n    var left = p[0];\n    var right = p[0];\n    var top = p[1];\n    var bottom = p[1];\n    for (var i = 1; i < points.length; i++) {\n        p = points[i];\n        left = mathMin(left, p[0]);\n        right = mathMax(right, p[0]);\n        top = mathMin(top, p[1]);\n        bottom = mathMax(bottom, p[1]);\n    }\n    min[0] = left;\n    min[1] = top;\n    max[0] = right;\n    max[1] = bottom;\n}\nexport function fromLine(x0, y0, x1, y1, min, max) {\n    min[0] = mathMin(x0, x1);\n    min[1] = mathMin(y0, y1);\n    max[0] = mathMax(x0, x1);\n    max[1] = mathMax(y0, y1);\n}\nvar xDim = [];\nvar yDim = [];\nexport function fromCubic(x0, y0, x1, y1, x2, y2, x3, y3, min, max) {\n    var cubicExtrema = curve.cubicExtrema;\n    var cubicAt = curve.cubicAt;\n    var n = cubicExtrema(x0, x1, x2, x3, xDim);\n    min[0] = Infinity;\n    min[1] = Infinity;\n    max[0] = -Infinity;\n    max[1] = -Infinity;\n    for (var i = 0; i < n; i++) {\n        var x = cubicAt(x0, x1, x2, x3, xDim[i]);\n        min[0] = mathMin(x, min[0]);\n        max[0] = mathMax(x, max[0]);\n    }\n    n = cubicExtrema(y0, y1, y2, y3, yDim);\n    for (var i = 0; i < n; i++) {\n        var y = cubicAt(y0, y1, y2, y3, yDim[i]);\n        min[1] = mathMin(y, min[1]);\n        max[1] = mathMax(y, max[1]);\n    }\n    min[0] = mathMin(x0, min[0]);\n    max[0] = mathMax(x0, max[0]);\n    min[0] = mathMin(x3, min[0]);\n    max[0] = mathMax(x3, max[0]);\n    min[1] = mathMin(y0, min[1]);\n    max[1] = mathMax(y0, max[1]);\n    min[1] = mathMin(y3, min[1]);\n    max[1] = mathMax(y3, max[1]);\n}\nexport function fromQuadratic(x0, y0, x1, y1, x2, y2, min, max) {\n    var quadraticExtremum = curve.quadraticExtremum;\n    var quadraticAt = curve.quadraticAt;\n    var tx = mathMax(mathMin(quadraticExtremum(x0, x1, x2), 1), 0);\n    var ty = mathMax(mathMin(quadraticExtremum(y0, y1, y2), 1), 0);\n    var x = quadraticAt(x0, x1, x2, tx);\n    var y = quadraticAt(y0, y1, y2, ty);\n    min[0] = mathMin(x0, x2, x);\n    min[1] = mathMin(y0, y2, y);\n    max[0] = mathMax(x0, x2, x);\n    max[1] = mathMax(y0, y2, y);\n}\nexport function fromArc(x, y, rx, ry, startAngle, endAngle, anticlockwise, min, max) {\n    var vec2Min = vec2.min;\n    var vec2Max = vec2.max;\n    var diff = Math.abs(startAngle - endAngle);\n    if (diff % PI2 < 1e-4 && diff > 1e-4) {\n        min[0] = x - rx;\n        min[1] = y - ry;\n        max[0] = x + rx;\n        max[1] = y + ry;\n        return;\n    }\n    start[0] = mathCos(startAngle) * rx + x;\n    start[1] = mathSin(startAngle) * ry + y;\n    end[0] = mathCos(endAngle) * rx + x;\n    end[1] = mathSin(endAngle) * ry + y;\n    vec2Min(min, start, end);\n    vec2Max(max, start, end);\n    startAngle = startAngle % (PI2);\n    if (startAngle < 0) {\n        startAngle = startAngle + PI2;\n    }\n    endAngle = endAngle % (PI2);\n    if (endAngle < 0) {\n        endAngle = endAngle + PI2;\n    }\n    if (startAngle > endAngle && !anticlockwise) {\n        endAngle += PI2;\n    }\n    else if (startAngle < endAngle && anticlockwise) {\n        startAngle += PI2;\n    }\n    if (anticlockwise) {\n        var tmp = endAngle;\n        endAngle = startAngle;\n        startAngle = tmp;\n    }\n    for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {\n        if (angle > startAngle) {\n            extremity[0] = mathCos(angle) * rx + x;\n            extremity[1] = mathSin(angle) * ry + y;\n            vec2Min(min, extremity, min);\n            vec2Max(max, extremity, max);\n        }\n    }\n}\n","import * as vec2 from './vector.js';\nimport BoundingRect from './BoundingRect.js';\nimport { devicePixelRatio as dpr } from '../config.js';\nimport { fromLine, fromCubic, fromQuadratic, fromArc } from './bbox.js';\nimport { cubicLength, cubicSubdivide, quadraticLength, quadraticSubdivide } from './curve.js';\nvar CMD = {\n    M: 1,\n    L: 2,\n    C: 3,\n    Q: 4,\n    A: 5,\n    Z: 6,\n    R: 7\n};\nvar tmpOutX = [];\nvar tmpOutY = [];\nvar min = [];\nvar max = [];\nvar min2 = [];\nvar max2 = [];\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathCos = Math.cos;\nvar mathSin = Math.sin;\nvar mathAbs = Math.abs;\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar hasTypedArray = typeof Float32Array !== 'undefined';\nvar tmpAngles = [];\nfunction modPI2(radian) {\n    var n = Math.round(radian / PI * 1e8) / 1e8;\n    return (n % 2) * PI;\n}\nexport function normalizeArcAngles(angles, anticlockwise) {\n    var newStartAngle = modPI2(angles[0]);\n    if (newStartAngle < 0) {\n        newStartAngle += PI2;\n    }\n    var delta = newStartAngle - angles[0];\n    var newEndAngle = angles[1];\n    newEndAngle += delta;\n    if (!anticlockwise && newEndAngle - newStartAngle >= PI2) {\n        newEndAngle = newStartAngle + PI2;\n    }\n    else if (anticlockwise && newStartAngle - newEndAngle >= PI2) {\n        newEndAngle = newStartAngle - PI2;\n    }\n    else if (!anticlockwise && newStartAngle > newEndAngle) {\n        newEndAngle = newStartAngle + (PI2 - modPI2(newStartAngle - newEndAngle));\n    }\n    else if (anticlockwise && newStartAngle < newEndAngle) {\n        newEndAngle = newStartAngle - (PI2 - modPI2(newEndAngle - newStartAngle));\n    }\n    angles[0] = newStartAngle;\n    angles[1] = newEndAngle;\n}\nvar PathProxy = (function () {\n    function PathProxy(notSaveData) {\n        this.dpr = 1;\n        this._xi = 0;\n        this._yi = 0;\n        this._x0 = 0;\n        this._y0 = 0;\n        this._len = 0;\n        if (notSaveData) {\n            this._saveData = false;\n        }\n        if (this._saveData) {\n            this.data = [];\n        }\n    }\n    PathProxy.prototype.increaseVersion = function () {\n        this._version++;\n    };\n    PathProxy.prototype.getVersion = function () {\n        return this._version;\n    };\n    PathProxy.prototype.setScale = function (sx, sy, segmentIgnoreThreshold) {\n        segmentIgnoreThreshold = segmentIgnoreThreshold || 0;\n        if (segmentIgnoreThreshold > 0) {\n            this._ux = mathAbs(segmentIgnoreThreshold / dpr / sx) || 0;\n            this._uy = mathAbs(segmentIgnoreThreshold / dpr / sy) || 0;\n        }\n    };\n    PathProxy.prototype.setDPR = function (dpr) {\n        this.dpr = dpr;\n    };\n    PathProxy.prototype.setContext = function (ctx) {\n        this._ctx = ctx;\n    };\n    PathProxy.prototype.getContext = function () {\n        return this._ctx;\n    };\n    PathProxy.prototype.beginPath = function () {\n        this._ctx && this._ctx.beginPath();\n        this.reset();\n        return this;\n    };\n    PathProxy.prototype.reset = function () {\n        if (this._saveData) {\n            this._len = 0;\n        }\n        if (this._pathSegLen) {\n            this._pathSegLen = null;\n            this._pathLen = 0;\n        }\n        this._version++;\n    };\n    PathProxy.prototype.moveTo = function (x, y) {\n        this._drawPendingPt();\n        this.addData(CMD.M, x, y);\n        this._ctx && this._ctx.moveTo(x, y);\n        this._x0 = x;\n        this._y0 = y;\n        this._xi = x;\n        this._yi = y;\n        return this;\n    };\n    PathProxy.prototype.lineTo = function (x, y) {\n        var dx = mathAbs(x - this._xi);\n        var dy = mathAbs(y - this._yi);\n        var exceedUnit = dx > this._ux || dy > this._uy;\n        this.addData(CMD.L, x, y);\n        if (this._ctx && exceedUnit) {\n            this._ctx.lineTo(x, y);\n        }\n        if (exceedUnit) {\n            this._xi = x;\n            this._yi = y;\n            this._pendingPtDist = 0;\n        }\n        else {\n            var d2 = dx * dx + dy * dy;\n            if (d2 > this._pendingPtDist) {\n                this._pendingPtX = x;\n                this._pendingPtY = y;\n                this._pendingPtDist = d2;\n            }\n        }\n        return this;\n    };\n    PathProxy.prototype.bezierCurveTo = function (x1, y1, x2, y2, x3, y3) {\n        this._drawPendingPt();\n        this.addData(CMD.C, x1, y1, x2, y2, x3, y3);\n        if (this._ctx) {\n            this._ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n        }\n        this._xi = x3;\n        this._yi = y3;\n        return this;\n    };\n    PathProxy.prototype.quadraticCurveTo = function (x1, y1, x2, y2) {\n        this._drawPendingPt();\n        this.addData(CMD.Q, x1, y1, x2, y2);\n        if (this._ctx) {\n            this._ctx.quadraticCurveTo(x1, y1, x2, y2);\n        }\n        this._xi = x2;\n        this._yi = y2;\n        return this;\n    };\n    PathProxy.prototype.arc = function (cx, cy, r, startAngle, endAngle, anticlockwise) {\n        this._drawPendingPt();\n        tmpAngles[0] = startAngle;\n        tmpAngles[1] = endAngle;\n        normalizeArcAngles(tmpAngles, anticlockwise);\n        startAngle = tmpAngles[0];\n        endAngle = tmpAngles[1];\n        var delta = endAngle - startAngle;\n        this.addData(CMD.A, cx, cy, r, r, startAngle, delta, 0, anticlockwise ? 0 : 1);\n        this._ctx && this._ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n        this._xi = mathCos(endAngle) * r + cx;\n        this._yi = mathSin(endAngle) * r + cy;\n        return this;\n    };\n    PathProxy.prototype.arcTo = function (x1, y1, x2, y2, radius) {\n        this._drawPendingPt();\n        if (this._ctx) {\n            this._ctx.arcTo(x1, y1, x2, y2, radius);\n        }\n        return this;\n    };\n    PathProxy.prototype.rect = function (x, y, w, h) {\n        this._drawPendingPt();\n        this._ctx && this._ctx.rect(x, y, w, h);\n        this.addData(CMD.R, x, y, w, h);\n        return this;\n    };\n    PathProxy.prototype.closePath = function () {\n        this._drawPendingPt();\n        this.addData(CMD.Z);\n        var ctx = this._ctx;\n        var x0 = this._x0;\n        var y0 = this._y0;\n        if (ctx) {\n            ctx.closePath();\n        }\n        this._xi = x0;\n        this._yi = y0;\n        return this;\n    };\n    PathProxy.prototype.fill = function (ctx) {\n        ctx && ctx.fill();\n        this.toStatic();\n    };\n    PathProxy.prototype.stroke = function (ctx) {\n        ctx && ctx.stroke();\n        this.toStatic();\n    };\n    PathProxy.prototype.len = function () {\n        return this._len;\n    };\n    PathProxy.prototype.setData = function (data) {\n        var len = data.length;\n        if (!(this.data && this.data.length === len) && hasTypedArray) {\n            this.data = new Float32Array(len);\n        }\n        for (var i = 0; i < len; i++) {\n            this.data[i] = data[i];\n        }\n        this._len = len;\n    };\n    PathProxy.prototype.appendPath = function (path) {\n        if (!(path instanceof Array)) {\n            path = [path];\n        }\n        var len = path.length;\n        var appendSize = 0;\n        var offset = this._len;\n        for (var i = 0; i < len; i++) {\n            appendSize += path[i].len();\n        }\n        if (hasTypedArray && (this.data instanceof Float32Array)) {\n            this.data = new Float32Array(offset + appendSize);\n        }\n        for (var i = 0; i < len; i++) {\n            var appendPathData = path[i].data;\n            for (var k = 0; k < appendPathData.length; k++) {\n                this.data[offset++] = appendPathData[k];\n            }\n        }\n        this._len = offset;\n    };\n    PathProxy.prototype.addData = function (cmd, a, b, c, d, e, f, g, h) {\n        if (!this._saveData) {\n            return;\n        }\n        var data = this.data;\n        if (this._len + arguments.length > data.length) {\n            this._expandData();\n            data = this.data;\n        }\n        for (var i = 0; i < arguments.length; i++) {\n            data[this._len++] = arguments[i];\n        }\n    };\n    PathProxy.prototype._drawPendingPt = function () {\n        if (this._pendingPtDist > 0) {\n            this._ctx && this._ctx.lineTo(this._pendingPtX, this._pendingPtY);\n            this._pendingPtDist = 0;\n        }\n    };\n    PathProxy.prototype._expandData = function () {\n        if (!(this.data instanceof Array)) {\n            var newData = [];\n            for (var i = 0; i < this._len; i++) {\n                newData[i] = this.data[i];\n            }\n            this.data = newData;\n        }\n    };\n    PathProxy.prototype.toStatic = function () {\n        if (!this._saveData) {\n            return;\n        }\n        this._drawPendingPt();\n        var data = this.data;\n        if (data instanceof Array) {\n            data.length = this._len;\n            if (hasTypedArray && this._len > 11) {\n                this.data = new Float32Array(data);\n            }\n        }\n    };\n    PathProxy.prototype.getBoundingRect = function () {\n        min[0] = min[1] = min2[0] = min2[1] = Number.MAX_VALUE;\n        max[0] = max[1] = max2[0] = max2[1] = -Number.MAX_VALUE;\n        var data = this.data;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        var i;\n        for (i = 0; i < this._len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    min2[0] = x0;\n                    min2[1] = y0;\n                    max2[0] = x0;\n                    max2[1] = y0;\n                    break;\n                case CMD.L:\n                    fromLine(xi, yi, data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.C:\n                    fromCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.Q:\n                    fromQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], min2, max2);\n                    xi = data[i++];\n                    yi = data[i++];\n                    break;\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var endAngle = data[i++] + startAngle;\n                    i += 1;\n                    var anticlockwise = !data[i++];\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    fromArc(cx, cy, rx, ry, startAngle, endAngle, anticlockwise, min2, max2);\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    fromLine(x0, y0, x0 + width, y0 + height, min2, max2);\n                    break;\n                case CMD.Z:\n                    xi = x0;\n                    yi = y0;\n                    break;\n            }\n            vec2.min(min, min, min2);\n            vec2.max(max, max, max2);\n        }\n        if (i === 0) {\n            min[0] = min[1] = max[0] = max[1] = 0;\n        }\n        return new BoundingRect(min[0], min[1], max[0] - min[0], max[1] - min[1]);\n    };\n    PathProxy.prototype._calculateLength = function () {\n        var data = this.data;\n        var len = this._len;\n        var ux = this._ux;\n        var uy = this._uy;\n        var xi = 0;\n        var yi = 0;\n        var x0 = 0;\n        var y0 = 0;\n        if (!this._pathSegLen) {\n            this._pathSegLen = [];\n        }\n        var pathSegLen = this._pathSegLen;\n        var pathTotalLen = 0;\n        var segCount = 0;\n        for (var i = 0; i < len;) {\n            var cmd = data[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = data[i];\n                yi = data[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            var l = -1;\n            switch (cmd) {\n                case CMD.M:\n                    xi = x0 = data[i++];\n                    yi = y0 = data[i++];\n                    break;\n                case CMD.L: {\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var dx = x2 - xi;\n                    var dy = y2 - yi;\n                    if (mathAbs(dx) > ux || mathAbs(dy) > uy || i === len - 1) {\n                        l = Math.sqrt(dx * dx + dy * dy);\n                        xi = x2;\n                        yi = y2;\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    var x3 = data[i++];\n                    var y3 = data[i++];\n                    l = cubicLength(xi, yi, x1, y1, x2, y2, x3, y3, 10);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = data[i++];\n                    var y1 = data[i++];\n                    var x2 = data[i++];\n                    var y2 = data[i++];\n                    l = quadraticLength(xi, yi, x1, y1, x2, y2, 10);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = data[i++];\n                    var cy = data[i++];\n                    var rx = data[i++];\n                    var ry = data[i++];\n                    var startAngle = data[i++];\n                    var delta = data[i++];\n                    var endAngle = delta + startAngle;\n                    i += 1;\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    l = mathMax(rx, ry) * mathMin(PI2, Math.abs(delta));\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R: {\n                    x0 = xi = data[i++];\n                    y0 = yi = data[i++];\n                    var width = data[i++];\n                    var height = data[i++];\n                    l = width * 2 + height * 2;\n                    break;\n                }\n                case CMD.Z: {\n                    var dx = x0 - xi;\n                    var dy = y0 - yi;\n                    l = Math.sqrt(dx * dx + dy * dy);\n                    xi = x0;\n                    yi = y0;\n                    break;\n                }\n            }\n            if (l >= 0) {\n                pathSegLen[segCount++] = l;\n                pathTotalLen += l;\n            }\n        }\n        this._pathLen = pathTotalLen;\n        return pathTotalLen;\n    };\n    PathProxy.prototype.rebuildPath = function (ctx, percent) {\n        var d = this.data;\n        var ux = this._ux;\n        var uy = this._uy;\n        var len = this._len;\n        var x0;\n        var y0;\n        var xi;\n        var yi;\n        var x;\n        var y;\n        var drawPart = percent < 1;\n        var pathSegLen;\n        var pathTotalLen;\n        var accumLength = 0;\n        var segCount = 0;\n        var displayedLength;\n        var pendingPtDist = 0;\n        var pendingPtX;\n        var pendingPtY;\n        if (drawPart) {\n            if (!this._pathSegLen) {\n                this._calculateLength();\n            }\n            pathSegLen = this._pathSegLen;\n            pathTotalLen = this._pathLen;\n            displayedLength = percent * pathTotalLen;\n            if (!displayedLength) {\n                return;\n            }\n        }\n        lo: for (var i = 0; i < len;) {\n            var cmd = d[i++];\n            var isFirst = i === 1;\n            if (isFirst) {\n                xi = d[i];\n                yi = d[i + 1];\n                x0 = xi;\n                y0 = yi;\n            }\n            if (cmd !== CMD.L && pendingPtDist > 0) {\n                ctx.lineTo(pendingPtX, pendingPtY);\n                pendingPtDist = 0;\n            }\n            switch (cmd) {\n                case CMD.M:\n                    x0 = xi = d[i++];\n                    y0 = yi = d[i++];\n                    ctx.moveTo(xi, yi);\n                    break;\n                case CMD.L: {\n                    x = d[i++];\n                    y = d[i++];\n                    var dx = mathAbs(x - xi);\n                    var dy = mathAbs(y - yi);\n                    if (dx > ux || dy > uy) {\n                        if (drawPart) {\n                            var l = pathSegLen[segCount++];\n                            if (accumLength + l > displayedLength) {\n                                var t = (displayedLength - accumLength) / l;\n                                ctx.lineTo(xi * (1 - t) + x * t, yi * (1 - t) + y * t);\n                                break lo;\n                            }\n                            accumLength += l;\n                        }\n                        ctx.lineTo(x, y);\n                        xi = x;\n                        yi = y;\n                        pendingPtDist = 0;\n                    }\n                    else {\n                        var d2 = dx * dx + dy * dy;\n                        if (d2 > pendingPtDist) {\n                            pendingPtX = x;\n                            pendingPtY = y;\n                            pendingPtDist = d2;\n                        }\n                    }\n                    break;\n                }\n                case CMD.C: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    var x3 = d[i++];\n                    var y3 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            cubicSubdivide(xi, x1, x2, x3, t, tmpOutX);\n                            cubicSubdivide(yi, y1, y2, y3, t, tmpOutY);\n                            ctx.bezierCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2], tmpOutX[3], tmpOutY[3]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.bezierCurveTo(x1, y1, x2, y2, x3, y3);\n                    xi = x3;\n                    yi = y3;\n                    break;\n                }\n                case CMD.Q: {\n                    var x1 = d[i++];\n                    var y1 = d[i++];\n                    var x2 = d[i++];\n                    var y2 = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            quadraticSubdivide(xi, x1, x2, t, tmpOutX);\n                            quadraticSubdivide(yi, y1, y2, t, tmpOutY);\n                            ctx.quadraticCurveTo(tmpOutX[1], tmpOutY[1], tmpOutX[2], tmpOutY[2]);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.quadraticCurveTo(x1, y1, x2, y2);\n                    xi = x2;\n                    yi = y2;\n                    break;\n                }\n                case CMD.A:\n                    var cx = d[i++];\n                    var cy = d[i++];\n                    var rx = d[i++];\n                    var ry = d[i++];\n                    var startAngle = d[i++];\n                    var delta = d[i++];\n                    var psi = d[i++];\n                    var anticlockwise = !d[i++];\n                    var r = (rx > ry) ? rx : ry;\n                    var isEllipse = mathAbs(rx - ry) > 1e-3;\n                    var endAngle = startAngle + delta;\n                    var breakBuild = false;\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            endAngle = startAngle + delta * (displayedLength - accumLength) / l;\n                            breakBuild = true;\n                        }\n                        accumLength += l;\n                    }\n                    if (isEllipse && ctx.ellipse) {\n                        ctx.ellipse(cx, cy, rx, ry, psi, startAngle, endAngle, anticlockwise);\n                    }\n                    else {\n                        ctx.arc(cx, cy, r, startAngle, endAngle, anticlockwise);\n                    }\n                    if (breakBuild) {\n                        break lo;\n                    }\n                    if (isFirst) {\n                        x0 = mathCos(startAngle) * rx + cx;\n                        y0 = mathSin(startAngle) * ry + cy;\n                    }\n                    xi = mathCos(endAngle) * rx + cx;\n                    yi = mathSin(endAngle) * ry + cy;\n                    break;\n                case CMD.R:\n                    x0 = xi = d[i];\n                    y0 = yi = d[i + 1];\n                    x = d[i++];\n                    y = d[i++];\n                    var width = d[i++];\n                    var height = d[i++];\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var d_1 = displayedLength - accumLength;\n                            ctx.moveTo(x, y);\n                            ctx.lineTo(x + mathMin(d_1, width), y);\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + width, y + mathMin(d_1, height));\n                            }\n                            d_1 -= height;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x + mathMax(width - d_1, 0), y + height);\n                            }\n                            d_1 -= width;\n                            if (d_1 > 0) {\n                                ctx.lineTo(x, y + mathMax(height - d_1, 0));\n                            }\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.rect(x, y, width, height);\n                    break;\n                case CMD.Z:\n                    if (drawPart) {\n                        var l = pathSegLen[segCount++];\n                        if (accumLength + l > displayedLength) {\n                            var t = (displayedLength - accumLength) / l;\n                            ctx.lineTo(xi * (1 - t) + x0 * t, yi * (1 - t) + y0 * t);\n                            break lo;\n                        }\n                        accumLength += l;\n                    }\n                    ctx.closePath();\n                    xi = x0;\n                    yi = y0;\n            }\n        }\n    };\n    PathProxy.prototype.clone = function () {\n        var newProxy = new PathProxy();\n        var data = this.data;\n        newProxy.data = data.slice ? data.slice()\n            : Array.prototype.slice.call(data);\n        newProxy._len = this._len;\n        return newProxy;\n    };\n    PathProxy.CMD = CMD;\n    PathProxy.initDefaultProps = (function () {\n        var proto = PathProxy.prototype;\n        proto._saveData = true;\n        proto._ux = 0;\n        proto._uy = 0;\n        proto._pendingPtDist = 0;\n        proto._version = 0;\n    })();\n    return PathProxy;\n}());\nexport default PathProxy;\n","export function containStroke(x0, y0, x1, y1, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    var _a = 0;\n    var _b = x0;\n    if ((y > y0 + _l && y > y1 + _l)\n        || (y < y0 - _l && y < y1 - _l)\n        || (x > x0 + _l && x > x1 + _l)\n        || (x < x0 - _l && x < x1 - _l)) {\n        return false;\n    }\n    if (x0 !== x1) {\n        _a = (y0 - y1) / (x0 - x1);\n        _b = (x0 * y1 - x1 * y0) / (x0 - x1);\n    }\n    else {\n        return Math.abs(x - x0) <= _l / 2;\n    }\n    var tmp = _a * x - y + _b;\n    var _s = tmp * tmp / (_a * _a + 1);\n    return _s <= _l / 2 * _l / 2;\n}\n","import * as curve from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l)) {\n        return false;\n    }\n    var d = curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);\n    return d <= _l / 2;\n}\n","import { quadraticProjectPoint } from '../core/curve.js';\nexport function containStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    if ((y > y0 + _l && y > y1 + _l && y > y2 + _l)\n        || (y < y0 - _l && y < y1 - _l && y < y2 - _l)\n        || (x > x0 + _l && x > x1 + _l && x > x2 + _l)\n        || (x < x0 - _l && x < x1 - _l && x < x2 - _l)) {\n        return false;\n    }\n    var d = quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);\n    return d <= _l / 2;\n}\n","var PI2 = Math.PI * 2;\nexport function normalizeRadian(angle) {\n    angle %= PI2;\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return angle;\n}\n","import { normalizeRadian } from './util.js';\nvar PI2 = Math.PI * 2;\nexport function containStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {\n    if (lineWidth === 0) {\n        return false;\n    }\n    var _l = lineWidth;\n    x -= cx;\n    y -= cy;\n    var d = Math.sqrt(x * x + y * y);\n    if ((d - _l > r) || (d + _l < r)) {\n        return false;\n    }\n    if (Math.abs(startAngle - endAngle) % PI2 < 1e-4) {\n        return true;\n    }\n    if (anticlockwise) {\n        var tmp = startAngle;\n        startAngle = normalizeRadian(endAngle);\n        endAngle = normalizeRadian(tmp);\n    }\n    else {\n        startAngle = normalizeRadian(startAngle);\n        endAngle = normalizeRadian(endAngle);\n    }\n    if (startAngle > endAngle) {\n        endAngle += PI2;\n    }\n    var angle = Math.atan2(y, x);\n    if (angle < 0) {\n        angle += PI2;\n    }\n    return (angle >= startAngle && angle <= endAngle)\n        || (angle + PI2 >= startAngle && angle + PI2 <= endAngle);\n}\n","export default function windingLine(x0, y0, x1, y1, x, y) {\n    if ((y > y0 && y > y1) || (y < y0 && y < y1)) {\n        return 0;\n    }\n    if (y1 === y0) {\n        return 0;\n    }\n    var t = (y - y0) / (y1 - y0);\n    var dir = y1 < y0 ? 1 : -1;\n    if (t === 1 || t === 0) {\n        dir = y1 < y0 ? 0.5 : -0.5;\n    }\n    var x_ = t * (x1 - x0) + x0;\n    return x_ === x ? Infinity : x_ > x ? dir : 0;\n}\n","import PathProxy from '../core/PathProxy.js';\nimport * as line from './line.js';\nimport * as cubic from './cubic.js';\nimport * as quadratic from './quadratic.js';\nimport * as arc from './arc.js';\nimport * as curve from '../core/curve.js';\nimport windingLine from './windingLine.js';\nvar CMD = PathProxy.CMD;\nvar PI2 = Math.PI * 2;\nvar EPSILON = 1e-4;\nfunction isAroundEqual(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\nvar roots = [-1, -1, -1];\nvar extrema = [-1, -1];\nfunction swapExtrema() {\n    var tmp = extrema[0];\n    extrema[0] = extrema[1];\n    extrema[1] = tmp;\n}\nfunction windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {\n    if ((y > y0 && y > y1 && y > y2 && y > y3)\n        || (y < y0 && y < y1 && y < y2 && y < y3)) {\n        return 0;\n    }\n    var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var w = 0;\n        var nExtrema = -1;\n        var y0_ = void 0;\n        var y1_ = void 0;\n        for (var i = 0; i < nRoots; i++) {\n            var t = roots[i];\n            var unit = (t === 0 || t === 1) ? 0.5 : 1;\n            var x_ = curve.cubicAt(x0, x1, x2, x3, t);\n            if (x_ < x) {\n                continue;\n            }\n            if (nExtrema < 0) {\n                nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);\n                if (extrema[1] < extrema[0] && nExtrema > 1) {\n                    swapExtrema();\n                }\n                y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);\n                if (nExtrema > 1) {\n                    y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);\n                }\n            }\n            if (nExtrema === 2) {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else if (t < extrema[1]) {\n                    w += y1_ < y0_ ? unit : -unit;\n                }\n                else {\n                    w += y3 < y1_ ? unit : -unit;\n                }\n            }\n            else {\n                if (t < extrema[0]) {\n                    w += y0_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y3 < y0_ ? unit : -unit;\n                }\n            }\n        }\n        return w;\n    }\n}\nfunction windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {\n    if ((y > y0 && y > y1 && y > y2)\n        || (y < y0 && y < y1 && y < y2)) {\n        return 0;\n    }\n    var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);\n    if (nRoots === 0) {\n        return 0;\n    }\n    else {\n        var t = curve.quadraticExtremum(y0, y1, y2);\n        if (t >= 0 && t <= 1) {\n            var w = 0;\n            var y_ = curve.quadraticAt(y0, y1, y2, t);\n            for (var i = 0; i < nRoots; i++) {\n                var unit = (roots[i] === 0 || roots[i] === 1) ? 0.5 : 1;\n                var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);\n                if (x_ < x) {\n                    continue;\n                }\n                if (roots[i] < t) {\n                    w += y_ < y0 ? unit : -unit;\n                }\n                else {\n                    w += y2 < y_ ? unit : -unit;\n                }\n            }\n            return w;\n        }\n        else {\n            var unit = (roots[0] === 0 || roots[0] === 1) ? 0.5 : 1;\n            var x_ = curve.quadraticAt(x0, x1, x2, roots[0]);\n            if (x_ < x) {\n                return 0;\n            }\n            return y2 < y0 ? unit : -unit;\n        }\n    }\n}\nfunction windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {\n    y -= cy;\n    if (y > r || y < -r) {\n        return 0;\n    }\n    var tmp = Math.sqrt(r * r - y * y);\n    roots[0] = -tmp;\n    roots[1] = tmp;\n    var dTheta = Math.abs(startAngle - endAngle);\n    if (dTheta < 1e-4) {\n        return 0;\n    }\n    if (dTheta >= PI2 - 1e-4) {\n        startAngle = 0;\n        endAngle = PI2;\n        var dir = anticlockwise ? 1 : -1;\n        if (x >= roots[0] + cx && x <= roots[1] + cx) {\n            return dir;\n        }\n        else {\n            return 0;\n        }\n    }\n    if (startAngle > endAngle) {\n        var tmp_1 = startAngle;\n        startAngle = endAngle;\n        endAngle = tmp_1;\n    }\n    if (startAngle < 0) {\n        startAngle += PI2;\n        endAngle += PI2;\n    }\n    var w = 0;\n    for (var i = 0; i < 2; i++) {\n        var x_ = roots[i];\n        if (x_ + cx > x) {\n            var angle = Math.atan2(y, x_);\n            var dir = anticlockwise ? 1 : -1;\n            if (angle < 0) {\n                angle = PI2 + angle;\n            }\n            if ((angle >= startAngle && angle <= endAngle)\n                || (angle + PI2 >= startAngle && angle + PI2 <= endAngle)) {\n                if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {\n                    dir = -dir;\n                }\n                w += dir;\n            }\n        }\n    }\n    return w;\n}\nfunction containPath(path, lineWidth, isStroke, x, y) {\n    var data = path.data;\n    var len = path.len();\n    var w = 0;\n    var xi = 0;\n    var yi = 0;\n    var x0 = 0;\n    var y0 = 0;\n    var x1;\n    var y1;\n    for (var i = 0; i < len;) {\n        var cmd = data[i++];\n        var isFirst = i === 1;\n        if (cmd === CMD.M && i > 1) {\n            if (!isStroke) {\n                w += windingLine(xi, yi, x0, y0, x, y);\n            }\n        }\n        if (isFirst) {\n            xi = data[i];\n            yi = data[i + 1];\n            x0 = xi;\n            y0 = yi;\n        }\n        switch (cmd) {\n            case CMD.M:\n                x0 = data[i++];\n                y0 = data[i++];\n                xi = x0;\n                yi = y0;\n                break;\n            case CMD.L:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.C:\n                if (isStroke) {\n                    if (cubic.containStroke(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingCubic(xi, yi, data[i++], data[i++], data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.Q:\n                if (isStroke) {\n                    if (quadratic.containStroke(xi, yi, data[i++], data[i++], data[i], data[i + 1], lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingQuadratic(xi, yi, data[i++], data[i++], data[i], data[i + 1], x, y) || 0;\n                }\n                xi = data[i++];\n                yi = data[i++];\n                break;\n            case CMD.A:\n                var cx = data[i++];\n                var cy = data[i++];\n                var rx = data[i++];\n                var ry = data[i++];\n                var theta = data[i++];\n                var dTheta = data[i++];\n                i += 1;\n                var anticlockwise = !!(1 - data[i++]);\n                x1 = Math.cos(theta) * rx + cx;\n                y1 = Math.sin(theta) * ry + cy;\n                if (!isFirst) {\n                    w += windingLine(xi, yi, x1, y1, x, y);\n                }\n                else {\n                    x0 = x1;\n                    y0 = y1;\n                }\n                var _x = (x - cx) * ry / rx + cx;\n                if (isStroke) {\n                    if (arc.containStroke(cx, cy, ry, theta, theta + dTheta, anticlockwise, lineWidth, _x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingArc(cx, cy, ry, theta, theta + dTheta, anticlockwise, _x, y);\n                }\n                xi = Math.cos(theta + dTheta) * rx + cx;\n                yi = Math.sin(theta + dTheta) * ry + cy;\n                break;\n            case CMD.R:\n                x0 = xi = data[i++];\n                y0 = yi = data[i++];\n                var width = data[i++];\n                var height = data[i++];\n                x1 = x0 + width;\n                y1 = y0 + height;\n                if (isStroke) {\n                    if (line.containStroke(x0, y0, x1, y0, lineWidth, x, y)\n                        || line.containStroke(x1, y0, x1, y1, lineWidth, x, y)\n                        || line.containStroke(x1, y1, x0, y1, lineWidth, x, y)\n                        || line.containStroke(x0, y1, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(x1, y0, x1, y1, x, y);\n                    w += windingLine(x0, y1, x0, y0, x, y);\n                }\n                break;\n            case CMD.Z:\n                if (isStroke) {\n                    if (line.containStroke(xi, yi, x0, y0, lineWidth, x, y)) {\n                        return true;\n                    }\n                }\n                else {\n                    w += windingLine(xi, yi, x0, y0, x, y);\n                }\n                xi = x0;\n                yi = y0;\n                break;\n        }\n    }\n    if (!isStroke && !isAroundEqual(yi, y0)) {\n        w += windingLine(xi, yi, x0, y0, x, y) || 0;\n    }\n    return w !== 0;\n}\nexport function contain(pathProxy, x, y) {\n    return containPath(pathProxy, 0, false, x, y);\n}\nexport function containStroke(pathProxy, lineWidth, x, y) {\n    return containPath(pathProxy, lineWidth, true, x, y);\n}\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport * as pathContain from '../contain/path.js';\nimport { defaults, keys, extend, clone, isString, createObject } from '../core/util.js';\nimport { lum } from '../tool/color.js';\nimport { DARK_LABEL_COLOR, LIGHT_LABEL_COLOR, DARK_MODE_THRESHOLD, LIGHTER_LABEL_COLOR } from '../config.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT, STYLE_CHANGED_BIT } from './constants.js';\nimport { TRANSFORMABLE_PROPS } from '../core/Transformable.js';\nexport var DEFAULT_PATH_STYLE = defaults({\n    fill: '#000',\n    stroke: null,\n    strokePercent: 1,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    lineDashOffset: 0,\n    lineWidth: 1,\n    lineCap: 'butt',\n    miterLimit: 10,\n    strokeNoScale: false,\n    strokeFirst: false\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_PATH_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        strokePercent: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineDashOffset: true,\n        lineWidth: true,\n        miterLimit: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar pathCopyParams = TRANSFORMABLE_PROPS.concat(['invisible',\n    'culling', 'z', 'z2', 'zlevel', 'parent'\n]);\nvar Path = (function (_super) {\n    __extends(Path, _super);\n    function Path(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Path.prototype.update = function () {\n        var _this = this;\n        _super.prototype.update.call(this);\n        var style = this.style;\n        if (style.decal) {\n            var decalEl = this._decalEl = this._decalEl || new Path();\n            if (decalEl.buildPath === Path.prototype.buildPath) {\n                decalEl.buildPath = function (ctx) {\n                    _this.buildPath(ctx, _this.shape);\n                };\n            }\n            decalEl.silent = true;\n            var decalElStyle = decalEl.style;\n            for (var key in style) {\n                if (decalElStyle[key] !== style[key]) {\n                    decalElStyle[key] = style[key];\n                }\n            }\n            decalElStyle.fill = style.fill ? style.decal : null;\n            decalElStyle.decal = null;\n            decalElStyle.shadowColor = null;\n            style.strokeFirst && (decalElStyle.stroke = null);\n            for (var i = 0; i < pathCopyParams.length; ++i) {\n                decalEl[pathCopyParams[i]] = this[pathCopyParams[i]];\n            }\n            decalEl.__dirty |= REDRAW_BIT;\n        }\n        else if (this._decalEl) {\n            this._decalEl = null;\n        }\n    };\n    Path.prototype.getDecalElement = function () {\n        return this._decalEl;\n    };\n    Path.prototype._init = function (props) {\n        var keysArr = keys(props);\n        this.shape = this.getDefaultShape();\n        var defaultStyle = this.getDefaultStyle();\n        if (defaultStyle) {\n            this.useStyle(defaultStyle);\n        }\n        for (var i = 0; i < keysArr.length; i++) {\n            var key = keysArr[i];\n            var value = props[key];\n            if (key === 'style') {\n                if (!this.style) {\n                    this.useStyle(value);\n                }\n                else {\n                    extend(this.style, value);\n                }\n            }\n            else if (key === 'shape') {\n                extend(this.shape, value);\n            }\n            else {\n                _super.prototype.attrKV.call(this, key, value);\n            }\n        }\n        if (!this.style) {\n            this.useStyle({});\n        }\n    };\n    Path.prototype.getDefaultStyle = function () {\n        return null;\n    };\n    Path.prototype.getDefaultShape = function () {\n        return {};\n    };\n    Path.prototype.canBeInsideText = function () {\n        return this.hasFill();\n    };\n    Path.prototype.getInsideTextFill = function () {\n        var pathFill = this.style.fill;\n        if (pathFill !== 'none') {\n            if (isString(pathFill)) {\n                var fillLum = lum(pathFill, 0);\n                if (fillLum > 0.5) {\n                    return DARK_LABEL_COLOR;\n                }\n                else if (fillLum > 0.2) {\n                    return LIGHTER_LABEL_COLOR;\n                }\n                return LIGHT_LABEL_COLOR;\n            }\n            else if (pathFill) {\n                return LIGHT_LABEL_COLOR;\n            }\n        }\n        return DARK_LABEL_COLOR;\n    };\n    Path.prototype.getInsideTextStroke = function (textFill) {\n        var pathFill = this.style.fill;\n        if (isString(pathFill)) {\n            var zr = this.__zr;\n            var isDarkMode = !!(zr && zr.isDarkMode());\n            var isDarkLabel = lum(textFill, 0) < DARK_MODE_THRESHOLD;\n            if (isDarkMode === isDarkLabel) {\n                return pathFill;\n            }\n        }\n    };\n    Path.prototype.buildPath = function (ctx, shapeCfg, inBatch) { };\n    Path.prototype.pathUpdated = function () {\n        this.__dirty &= ~SHAPE_CHANGED_BIT;\n    };\n    Path.prototype.getUpdatedPathProxy = function (inBatch) {\n        !this.path && this.createPathProxy();\n        this.path.beginPath();\n        this.buildPath(this.path, this.shape, inBatch);\n        return this.path;\n    };\n    Path.prototype.createPathProxy = function () {\n        this.path = new PathProxy(false);\n    };\n    Path.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n    };\n    Path.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    Path.prototype.getBoundingRect = function () {\n        var rect = this._rect;\n        var style = this.style;\n        var needsUpdateRect = !rect;\n        if (needsUpdateRect) {\n            var firstInvoke = false;\n            if (!this.path) {\n                firstInvoke = true;\n                this.createPathProxy();\n            }\n            var path = this.path;\n            if (firstInvoke || (this.__dirty & SHAPE_CHANGED_BIT)) {\n                path.beginPath();\n                this.buildPath(path, this.shape, false);\n                this.pathUpdated();\n            }\n            rect = path.getBoundingRect();\n        }\n        this._rect = rect;\n        if (this.hasStroke() && this.path && this.path.len() > 0) {\n            var rectStroke = this._rectStroke || (this._rectStroke = rect.clone());\n            if (this.__dirty || needsUpdateRect) {\n                rectStroke.copy(rect);\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                var w = style.lineWidth;\n                if (!this.hasFill()) {\n                    var strokeContainThreshold = this.strokeContainThreshold;\n                    w = Math.max(w, strokeContainThreshold == null ? 4 : strokeContainThreshold);\n                }\n                if (lineScale > 1e-10) {\n                    rectStroke.width += w / lineScale;\n                    rectStroke.height += w / lineScale;\n                    rectStroke.x -= w / lineScale / 2;\n                    rectStroke.y -= w / lineScale / 2;\n                }\n            }\n            return rectStroke;\n        }\n        return rect;\n    };\n    Path.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        var style = this.style;\n        x = localPos[0];\n        y = localPos[1];\n        if (rect.contain(x, y)) {\n            var pathProxy = this.path;\n            if (this.hasStroke()) {\n                var lineWidth = style.lineWidth;\n                var lineScale = style.strokeNoScale ? this.getLineScale() : 1;\n                if (lineScale > 1e-10) {\n                    if (!this.hasFill()) {\n                        lineWidth = Math.max(lineWidth, this.strokeContainThreshold);\n                    }\n                    if (pathContain.containStroke(pathProxy, lineWidth / lineScale, x, y)) {\n                        return true;\n                    }\n                }\n            }\n            if (this.hasFill()) {\n                return pathContain.contain(pathProxy, x, y);\n            }\n        }\n        return false;\n    };\n    Path.prototype.dirtyShape = function () {\n        this.__dirty |= SHAPE_CHANGED_BIT;\n        if (this._rect) {\n            this._rect = null;\n        }\n        if (this._decalEl) {\n            this._decalEl.dirtyShape();\n        }\n        this.markRedraw();\n    };\n    Path.prototype.dirty = function () {\n        this.dirtyStyle();\n        this.dirtyShape();\n    };\n    Path.prototype.animateShape = function (loop) {\n        return this.animate('shape', loop);\n    };\n    Path.prototype.updateDuringAnimation = function (targetKey) {\n        if (targetKey === 'style') {\n            this.dirtyStyle();\n        }\n        else if (targetKey === 'shape') {\n            this.dirtyShape();\n        }\n        else {\n            this.markRedraw();\n        }\n    };\n    Path.prototype.attrKV = function (key, value) {\n        if (key === 'shape') {\n            this.setShape(value);\n        }\n        else {\n            _super.prototype.attrKV.call(this, key, value);\n        }\n    };\n    Path.prototype.setShape = function (keyOrObj, value) {\n        var shape = this.shape;\n        if (!shape) {\n            shape = this.shape = {};\n        }\n        if (typeof keyOrObj === 'string') {\n            shape[keyOrObj] = value;\n        }\n        else {\n            extend(shape, keyOrObj);\n        }\n        this.dirtyShape();\n        return this;\n    };\n    Path.prototype.shapeChanged = function () {\n        return !!(this.__dirty & SHAPE_CHANGED_BIT);\n    };\n    Path.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_PATH_STYLE, obj);\n    };\n    Path.prototype._innerSaveToNormal = function (toState) {\n        _super.prototype._innerSaveToNormal.call(this, toState);\n        var normalState = this._normalState;\n        if (toState.shape && !normalState.shape) {\n            normalState.shape = extend({}, this.shape);\n        }\n    };\n    Path.prototype._applyStateObj = function (stateName, state, normalState, keepCurrentStates, transition, animationCfg) {\n        _super.prototype._applyStateObj.call(this, stateName, state, normalState, keepCurrentStates, transition, animationCfg);\n        var needsRestoreToNormal = !(state && keepCurrentStates);\n        var targetShape;\n        if (state && state.shape) {\n            if (transition) {\n                if (keepCurrentStates) {\n                    targetShape = state.shape;\n                }\n                else {\n                    targetShape = extend({}, normalState.shape);\n                    extend(targetShape, state.shape);\n                }\n            }\n            else {\n                targetShape = extend({}, keepCurrentStates ? this.shape : normalState.shape);\n                extend(targetShape, state.shape);\n            }\n        }\n        else if (needsRestoreToNormal) {\n            targetShape = normalState.shape;\n        }\n        if (targetShape) {\n            if (transition) {\n                this.shape = extend({}, this.shape);\n                var targetShapePrimaryProps = {};\n                var shapeKeys = keys(targetShape);\n                for (var i = 0; i < shapeKeys.length; i++) {\n                    var key = shapeKeys[i];\n                    if (typeof targetShape[key] === 'object') {\n                        this.shape[key] = targetShape[key];\n                    }\n                    else {\n                        targetShapePrimaryProps[key] = targetShape[key];\n                    }\n                }\n                this._transitionState(stateName, {\n                    shape: targetShapePrimaryProps\n                }, animationCfg);\n            }\n            else {\n                this.shape = targetShape;\n                this.dirtyShape();\n            }\n        }\n    };\n    Path.prototype._mergeStates = function (states) {\n        var mergedState = _super.prototype._mergeStates.call(this, states);\n        var mergedShape;\n        for (var i = 0; i < states.length; i++) {\n            var state = states[i];\n            if (state.shape) {\n                mergedShape = mergedShape || {};\n                this._mergeStyle(mergedShape, state.shape);\n            }\n        }\n        if (mergedShape) {\n            mergedState.shape = mergedShape;\n        }\n        return mergedState;\n    };\n    Path.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_PATH_ANIMATION_PROPS;\n    };\n    Path.prototype.isZeroArea = function () {\n        return false;\n    };\n    Path.extend = function (defaultProps) {\n        var Sub = (function (_super) {\n            __extends(Sub, _super);\n            function Sub(opts) {\n                var _this = _super.call(this, opts) || this;\n                defaultProps.init && defaultProps.init.call(_this, opts);\n                return _this;\n            }\n            Sub.prototype.getDefaultStyle = function () {\n                return clone(defaultProps.style);\n            };\n            Sub.prototype.getDefaultShape = function () {\n                return clone(defaultProps.shape);\n            };\n            return Sub;\n        }(Path));\n        for (var key in defaultProps) {\n            if (typeof defaultProps[key] === 'function') {\n                Sub.prototype[key] = defaultProps[key];\n            }\n        }\n        return Sub;\n    };\n    Path.initDefaultProps = (function () {\n        var pathProto = Path.prototype;\n        pathProto.type = 'path';\n        pathProto.strokeContainThreshold = 5;\n        pathProto.segmentIgnoreThreshold = 0;\n        pathProto.subPixelOptimize = false;\n        pathProto.autoBatch = false;\n        pathProto.__dirty = REDRAW_BIT | STYLE_CHANGED_BIT | SHAPE_CHANGED_BIT;\n    })();\n    return Path;\n}(Displayable));\nexport default Path;\n","import { __extends } from \"tslib\";\nimport Displayable from './Displayable.js';\nimport { getBoundingRect } from '../contain/text.js';\nimport { DEFAULT_PATH_STYLE } from './Path.js';\nimport { createObject, defaults } from '../core/util.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nexport var DEFAULT_TSPAN_STYLE = defaults({\n    strokeFirst: true,\n    font: DEFAULT_FONT,\n    x: 0,\n    y: 0,\n    textAlign: 'left',\n    textBaseline: 'top',\n    miterLimit: 2\n}, DEFAULT_PATH_STYLE);\nvar TSpan = (function (_super) {\n    __extends(TSpan, _super);\n    function TSpan() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TSpan.prototype.hasStroke = function () {\n        var style = this.style;\n        var stroke = style.stroke;\n        return stroke != null && stroke !== 'none' && style.lineWidth > 0;\n    };\n    TSpan.prototype.hasFill = function () {\n        var style = this.style;\n        var fill = style.fill;\n        return fill != null && fill !== 'none';\n    };\n    TSpan.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_TSPAN_STYLE, obj);\n    };\n    TSpan.prototype.setBoundingRect = function (rect) {\n        this._rect = rect;\n    };\n    TSpan.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            var text = style.text;\n            text != null ? (text += '') : (text = '');\n            var rect = getBoundingRect(text, style.font, style.textAlign, style.textBaseline);\n            rect.x += style.x || 0;\n            rect.y += style.y || 0;\n            if (this.hasStroke()) {\n                var w = style.lineWidth;\n                rect.x -= w / 2;\n                rect.y -= w / 2;\n                rect.width += w;\n                rect.height += w;\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    TSpan.initDefaultProps = (function () {\n        var tspanProto = TSpan.prototype;\n        tspanProto.dirtyRectTolerance = 10;\n    })();\n    return TSpan;\n}(Displayable));\nTSpan.prototype.type = 'tspan';\nexport default TSpan;\n","import { __extends } from \"tslib\";\nimport Displayable, { DEFAULT_COMMON_STYLE, DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { defaults, createObject } from '../core/util.js';\nexport var DEFAULT_IMAGE_STYLE = defaults({\n    x: 0,\n    y: 0\n}, DEFAULT_COMMON_STYLE);\nexport var DEFAULT_IMAGE_ANIMATION_PROPS = {\n    style: defaults({\n        x: true,\n        y: true,\n        width: true,\n        height: true,\n        sx: true,\n        sy: true,\n        sWidth: true,\n        sHeight: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nfunction isImageLike(source) {\n    return !!(source\n        && typeof source !== 'string'\n        && source.width && source.height);\n}\nvar ZRImage = (function (_super) {\n    __extends(ZRImage, _super);\n    function ZRImage() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZRImage.prototype.createStyle = function (obj) {\n        return createObject(DEFAULT_IMAGE_STYLE, obj);\n    };\n    ZRImage.prototype._getSize = function (dim) {\n        var style = this.style;\n        var size = style[dim];\n        if (size != null) {\n            return size;\n        }\n        var imageSource = isImageLike(style.image)\n            ? style.image : this.__image;\n        if (!imageSource) {\n            return 0;\n        }\n        var otherDim = dim === 'width' ? 'height' : 'width';\n        var otherDimSize = style[otherDim];\n        if (otherDimSize == null) {\n            return imageSource[dim];\n        }\n        else {\n            return imageSource[dim] / imageSource[otherDim] * otherDimSize;\n        }\n    };\n    ZRImage.prototype.getWidth = function () {\n        return this._getSize('width');\n    };\n    ZRImage.prototype.getHeight = function () {\n        return this._getSize('height');\n    };\n    ZRImage.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_IMAGE_ANIMATION_PROPS;\n    };\n    ZRImage.prototype.getBoundingRect = function () {\n        var style = this.style;\n        if (!this._rect) {\n            this._rect = new BoundingRect(style.x || 0, style.y || 0, this.getWidth(), this.getHeight());\n        }\n        return this._rect;\n    };\n    return ZRImage;\n}(Displayable));\nZRImage.prototype.type = 'image';\nexport default ZRImage;\n","export function buildPath(ctx, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var width = shape.width;\n    var height = shape.height;\n    var r = shape.r;\n    var r1;\n    var r2;\n    var r3;\n    var r4;\n    if (width < 0) {\n        x = x + width;\n        width = -width;\n    }\n    if (height < 0) {\n        y = y + height;\n        height = -height;\n    }\n    if (typeof r === 'number') {\n        r1 = r2 = r3 = r4 = r;\n    }\n    else if (r instanceof Array) {\n        if (r.length === 1) {\n            r1 = r2 = r3 = r4 = r[0];\n        }\n        else if (r.length === 2) {\n            r1 = r3 = r[0];\n            r2 = r4 = r[1];\n        }\n        else if (r.length === 3) {\n            r1 = r[0];\n            r2 = r4 = r[1];\n            r3 = r[2];\n        }\n        else {\n            r1 = r[0];\n            r2 = r[1];\n            r3 = r[2];\n            r4 = r[3];\n        }\n    }\n    else {\n        r1 = r2 = r3 = r4 = 0;\n    }\n    var total;\n    if (r1 + r2 > width) {\n        total = r1 + r2;\n        r1 *= width / total;\n        r2 *= width / total;\n    }\n    if (r3 + r4 > width) {\n        total = r3 + r4;\n        r3 *= width / total;\n        r4 *= width / total;\n    }\n    if (r2 + r3 > height) {\n        total = r2 + r3;\n        r2 *= height / total;\n        r3 *= height / total;\n    }\n    if (r1 + r4 > height) {\n        total = r1 + r4;\n        r1 *= height / total;\n        r4 *= height / total;\n    }\n    ctx.moveTo(x + r1, y);\n    ctx.lineTo(x + width - r2, y);\n    r2 !== 0 && ctx.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);\n    ctx.lineTo(x + width, y + height - r3);\n    r3 !== 0 && ctx.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);\n    ctx.lineTo(x + r4, y + height);\n    r4 !== 0 && ctx.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);\n    ctx.lineTo(x, y + r1);\n    r1 !== 0 && ctx.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);\n}\n","var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundRectHelper from '../helper/roundRect.js';\nimport { subPixelOptimizeRect } from '../helper/subPixelOptimize.js';\nvar RectShape = (function () {\n    function RectShape() {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n    return RectShape;\n}());\nexport { RectShape };\nvar subPixelOptimizeOutputShape = {};\nvar Rect = (function (_super) {\n    __extends(Rect, _super);\n    function Rect(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Rect.prototype.getDefaultShape = function () {\n        return new RectShape();\n    };\n    Rect.prototype.buildPath = function (ctx, shape) {\n        var x;\n        var y;\n        var width;\n        var height;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeRect(subPixelOptimizeOutputShape, shape, this.style);\n            x = optimizedShape.x;\n            y = optimizedShape.y;\n            width = optimizedShape.width;\n            height = optimizedShape.height;\n            optimizedShape.r = shape.r;\n            shape = optimizedShape;\n        }\n        else {\n            x = shape.x;\n            y = shape.y;\n            width = shape.width;\n            height = shape.height;\n        }\n        if (!shape.r) {\n            ctx.rect(x, y, width, height);\n        }\n        else {\n            roundRectHelper.buildPath(ctx, shape);\n        }\n    };\n    Rect.prototype.isZeroArea = function () {\n        return !this.shape.width || !this.shape.height;\n    };\n    return Rect;\n}(Path));\nRect.prototype.type = 'rect';\nexport default Rect;\n","import { __extends } from \"tslib\";\nimport { parseRichText, parsePlainText } from './helper/parseText.js';\nimport TSpan from './TSpan.js';\nimport { retrieve2, each, normalizeCssArray, trim, retrieve3, extend, keys, defaults } from '../core/util.js';\nimport { adjustTextX, adjustTextY } from '../contain/text.js';\nimport ZRImage from './Image.js';\nimport Rect from './shape/Rect.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport Displayable, { DEFAULT_COMMON_ANIMATION_PROPS } from './Displayable.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_SIZE } from '../core/platform.js';\nvar DEFAULT_RICH_TEXT_COLOR = {\n    fill: '#000'\n};\nvar DEFAULT_STROKE_LINE_WIDTH = 2;\nexport var DEFAULT_TEXT_ANIMATION_PROPS = {\n    style: defaults({\n        fill: true,\n        stroke: true,\n        fillOpacity: true,\n        strokeOpacity: true,\n        lineWidth: true,\n        fontSize: true,\n        lineHeight: true,\n        width: true,\n        height: true,\n        textShadowColor: true,\n        textShadowBlur: true,\n        textShadowOffsetX: true,\n        textShadowOffsetY: true,\n        backgroundColor: true,\n        padding: true,\n        borderColor: true,\n        borderWidth: true,\n        borderRadius: true\n    }, DEFAULT_COMMON_ANIMATION_PROPS.style)\n};\nvar ZRText = (function (_super) {\n    __extends(ZRText, _super);\n    function ZRText(opts) {\n        var _this = _super.call(this) || this;\n        _this.type = 'text';\n        _this._children = [];\n        _this._defaultStyle = DEFAULT_RICH_TEXT_COLOR;\n        _this.attr(opts);\n        return _this;\n    }\n    ZRText.prototype.childrenRef = function () {\n        return this._children;\n    };\n    ZRText.prototype.update = function () {\n        _super.prototype.update.call(this);\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        for (var i = 0; i < this._children.length; i++) {\n            var child = this._children[i];\n            child.zlevel = this.zlevel;\n            child.z = this.z;\n            child.z2 = this.z2;\n            child.culling = this.culling;\n            child.cursor = this.cursor;\n            child.invisible = this.invisible;\n        }\n    };\n    ZRText.prototype.updateTransform = function () {\n        var innerTransformable = this.innerTransformable;\n        if (innerTransformable) {\n            innerTransformable.updateTransform();\n            if (innerTransformable.transform) {\n                this.transform = innerTransformable.transform;\n            }\n        }\n        else {\n            _super.prototype.updateTransform.call(this);\n        }\n    };\n    ZRText.prototype.getLocalTransform = function (m) {\n        var innerTransformable = this.innerTransformable;\n        return innerTransformable\n            ? innerTransformable.getLocalTransform(m)\n            : _super.prototype.getLocalTransform.call(this, m);\n    };\n    ZRText.prototype.getComputedTransform = function () {\n        if (this.__hostTarget) {\n            this.__hostTarget.getComputedTransform();\n            this.__hostTarget.updateInnerText(true);\n        }\n        return _super.prototype.getComputedTransform.call(this);\n    };\n    ZRText.prototype._updateSubTexts = function () {\n        this._childCursor = 0;\n        normalizeTextStyle(this.style);\n        this.style.rich\n            ? this._updateRichTexts()\n            : this._updatePlainTexts();\n        this._children.length = this._childCursor;\n        this.styleUpdated();\n    };\n    ZRText.prototype.addSelfToZr = function (zr) {\n        _super.prototype.addSelfToZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = zr;\n        }\n    };\n    ZRText.prototype.removeSelfFromZr = function (zr) {\n        _super.prototype.removeSelfFromZr.call(this, zr);\n        for (var i = 0; i < this._children.length; i++) {\n            this._children[i].__zr = null;\n        }\n    };\n    ZRText.prototype.getBoundingRect = function () {\n        if (this.styleChanged()) {\n            this._updateSubTexts();\n        }\n        if (!this._rect) {\n            var tmpRect = new BoundingRect(0, 0, 0, 0);\n            var children = this._children;\n            var tmpMat = [];\n            var rect = null;\n            for (var i = 0; i < children.length; i++) {\n                var child = children[i];\n                var childRect = child.getBoundingRect();\n                var transform = child.getLocalTransform(tmpMat);\n                if (transform) {\n                    tmpRect.copy(childRect);\n                    tmpRect.applyTransform(transform);\n                    rect = rect || tmpRect.clone();\n                    rect.union(tmpRect);\n                }\n                else {\n                    rect = rect || childRect.clone();\n                    rect.union(childRect);\n                }\n            }\n            this._rect = rect || tmpRect;\n        }\n        return this._rect;\n    };\n    ZRText.prototype.setDefaultTextStyle = function (defaultTextStyle) {\n        this._defaultStyle = defaultTextStyle || DEFAULT_RICH_TEXT_COLOR;\n    };\n    ZRText.prototype.setTextContent = function (textContent) {\n        if (process.env.NODE_ENV !== 'production') {\n            throw new Error('Can\\'t attach text on another text');\n        }\n    };\n    ZRText.prototype._mergeStyle = function (targetStyle, sourceStyle) {\n        if (!sourceStyle) {\n            return targetStyle;\n        }\n        var sourceRich = sourceStyle.rich;\n        var targetRich = targetStyle.rich || (sourceRich && {});\n        extend(targetStyle, sourceStyle);\n        if (sourceRich && targetRich) {\n            this._mergeRich(targetRich, sourceRich);\n            targetStyle.rich = targetRich;\n        }\n        else if (targetRich) {\n            targetStyle.rich = targetRich;\n        }\n        return targetStyle;\n    };\n    ZRText.prototype._mergeRich = function (targetRich, sourceRich) {\n        var richNames = keys(sourceRich);\n        for (var i = 0; i < richNames.length; i++) {\n            var richName = richNames[i];\n            targetRich[richName] = targetRich[richName] || {};\n            extend(targetRich[richName], sourceRich[richName]);\n        }\n    };\n    ZRText.prototype.getAnimationStyleProps = function () {\n        return DEFAULT_TEXT_ANIMATION_PROPS;\n    };\n    ZRText.prototype._getOrCreateChild = function (Ctor) {\n        var child = this._children[this._childCursor];\n        if (!child || !(child instanceof Ctor)) {\n            child = new Ctor();\n        }\n        this._children[this._childCursor++] = child;\n        child.__zr = this.__zr;\n        child.parent = this;\n        return child;\n    };\n    ZRText.prototype._updatePlainTexts = function () {\n        var style = this.style;\n        var textFont = style.font || DEFAULT_FONT;\n        var textPadding = style.padding;\n        var text = getStyleText(style);\n        var contentBlock = parsePlainText(text, style);\n        var needDrawBg = needDrawBackground(style);\n        var bgColorDrawn = !!(style.backgroundColor);\n        var outerHeight = contentBlock.outerHeight;\n        var outerWidth = contentBlock.outerWidth;\n        var contentWidth = contentBlock.contentWidth;\n        var textLines = contentBlock.lines;\n        var lineHeight = contentBlock.lineHeight;\n        var defaultStyle = this._defaultStyle;\n        this.isTruncated = !!contentBlock.isTruncated;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var textAlign = style.align || defaultStyle.align || 'left';\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign || 'top';\n        var textX = baseX;\n        var textY = adjustTextY(baseY, contentBlock.contentHeight, verticalAlign);\n        if (needDrawBg || textPadding) {\n            var boxX = adjustTextX(baseX, outerWidth, textAlign);\n            var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n            needDrawBg && this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        textY += lineHeight / 2;\n        if (textPadding) {\n            textX = getTextXForPadding(baseX, textAlign, textPadding);\n            if (verticalAlign === 'top') {\n                textY += textPadding[0];\n            }\n            else if (verticalAlign === 'bottom') {\n                textY -= textPadding[2];\n            }\n        }\n        var defaultLineWidth = 0;\n        var useDefaultFill = false;\n        var textFill = getFill('fill' in style\n            ? style.fill\n            : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in style\n            ? style.stroke\n            : (!bgColorDrawn\n                && (!defaultStyle.autoStroke || useDefaultFill))\n                ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                : null);\n        var hasShadow = style.textShadowBlur > 0;\n        var fixedBoundingRect = style.width != null\n            && (style.overflow === 'truncate' || style.overflow === 'break' || style.overflow === 'breakAll');\n        var calculatedLineHeight = contentBlock.calculatedLineHeight;\n        for (var i = 0; i < textLines.length; i++) {\n            var el = this._getOrCreateChild(TSpan);\n            var subElStyle = el.createStyle();\n            el.useStyle(subElStyle);\n            subElStyle.text = textLines[i];\n            subElStyle.x = textX;\n            subElStyle.y = textY;\n            if (textAlign) {\n                subElStyle.textAlign = textAlign;\n            }\n            subElStyle.textBaseline = 'middle';\n            subElStyle.opacity = style.opacity;\n            subElStyle.strokeFirst = true;\n            if (hasShadow) {\n                subElStyle.shadowBlur = style.textShadowBlur || 0;\n                subElStyle.shadowColor = style.textShadowColor || 'transparent';\n                subElStyle.shadowOffsetX = style.textShadowOffsetX || 0;\n                subElStyle.shadowOffsetY = style.textShadowOffsetY || 0;\n            }\n            subElStyle.stroke = textStroke;\n            subElStyle.fill = textFill;\n            if (textStroke) {\n                subElStyle.lineWidth = style.lineWidth || defaultLineWidth;\n                subElStyle.lineDash = style.lineDash;\n                subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            }\n            subElStyle.font = textFont;\n            setSeparateFont(subElStyle, style);\n            textY += lineHeight;\n            if (fixedBoundingRect) {\n                el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, contentWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, calculatedLineHeight, subElStyle.textBaseline), contentWidth, calculatedLineHeight));\n            }\n        }\n    };\n    ZRText.prototype._updateRichTexts = function () {\n        var style = this.style;\n        var text = getStyleText(style);\n        var contentBlock = parseRichText(text, style);\n        var contentWidth = contentBlock.width;\n        var outerWidth = contentBlock.outerWidth;\n        var outerHeight = contentBlock.outerHeight;\n        var textPadding = style.padding;\n        var baseX = style.x || 0;\n        var baseY = style.y || 0;\n        var defaultStyle = this._defaultStyle;\n        var textAlign = style.align || defaultStyle.align;\n        var verticalAlign = style.verticalAlign || defaultStyle.verticalAlign;\n        this.isTruncated = !!contentBlock.isTruncated;\n        var boxX = adjustTextX(baseX, outerWidth, textAlign);\n        var boxY = adjustTextY(baseY, outerHeight, verticalAlign);\n        var xLeft = boxX;\n        var lineTop = boxY;\n        if (textPadding) {\n            xLeft += textPadding[3];\n            lineTop += textPadding[0];\n        }\n        var xRight = xLeft + contentWidth;\n        if (needDrawBackground(style)) {\n            this._renderBackground(style, style, boxX, boxY, outerWidth, outerHeight);\n        }\n        var bgColorDrawn = !!(style.backgroundColor);\n        for (var i = 0; i < contentBlock.lines.length; i++) {\n            var line = contentBlock.lines[i];\n            var tokens = line.tokens;\n            var tokenCount = tokens.length;\n            var lineHeight = line.lineHeight;\n            var remainedWidth = line.width;\n            var leftIndex = 0;\n            var lineXLeft = xLeft;\n            var lineXRight = xRight;\n            var rightIndex = tokenCount - 1;\n            var token = void 0;\n            while (leftIndex < tokenCount\n                && (token = tokens[leftIndex], !token.align || token.align === 'left')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft, 'left', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            while (rightIndex >= 0\n                && (token = tokens[rightIndex], token.align === 'right')) {\n                this._placeToken(token, style, lineHeight, lineTop, lineXRight, 'right', bgColorDrawn);\n                remainedWidth -= token.width;\n                lineXRight -= token.width;\n                rightIndex--;\n            }\n            lineXLeft += (contentWidth - (lineXLeft - xLeft) - (xRight - lineXRight) - remainedWidth) / 2;\n            while (leftIndex <= rightIndex) {\n                token = tokens[leftIndex];\n                this._placeToken(token, style, lineHeight, lineTop, lineXLeft + token.width / 2, 'center', bgColorDrawn);\n                lineXLeft += token.width;\n                leftIndex++;\n            }\n            lineTop += lineHeight;\n        }\n    };\n    ZRText.prototype._placeToken = function (token, style, lineHeight, lineTop, x, textAlign, parentBgColorDrawn) {\n        var tokenStyle = style.rich[token.styleName] || {};\n        tokenStyle.text = token.text;\n        var verticalAlign = token.verticalAlign;\n        var y = lineTop + lineHeight / 2;\n        if (verticalAlign === 'top') {\n            y = lineTop + token.height / 2;\n        }\n        else if (verticalAlign === 'bottom') {\n            y = lineTop + lineHeight - token.height / 2;\n        }\n        var needDrawBg = !token.isLineHolder && needDrawBackground(tokenStyle);\n        needDrawBg && this._renderBackground(tokenStyle, style, textAlign === 'right'\n            ? x - token.width\n            : textAlign === 'center'\n                ? x - token.width / 2\n                : x, y - token.height / 2, token.width, token.height);\n        var bgColorDrawn = !!tokenStyle.backgroundColor;\n        var textPadding = token.textPadding;\n        if (textPadding) {\n            x = getTextXForPadding(x, textAlign, textPadding);\n            y -= token.height / 2 - textPadding[0] - token.innerHeight / 2;\n        }\n        var el = this._getOrCreateChild(TSpan);\n        var subElStyle = el.createStyle();\n        el.useStyle(subElStyle);\n        var defaultStyle = this._defaultStyle;\n        var useDefaultFill = false;\n        var defaultLineWidth = 0;\n        var textFill = getFill('fill' in tokenStyle ? tokenStyle.fill\n            : 'fill' in style ? style.fill\n                : (useDefaultFill = true, defaultStyle.fill));\n        var textStroke = getStroke('stroke' in tokenStyle ? tokenStyle.stroke\n            : 'stroke' in style ? style.stroke\n                : (!bgColorDrawn\n                    && !parentBgColorDrawn\n                    && (!defaultStyle.autoStroke || useDefaultFill)) ? (defaultLineWidth = DEFAULT_STROKE_LINE_WIDTH, defaultStyle.stroke)\n                    : null);\n        var hasShadow = tokenStyle.textShadowBlur > 0\n            || style.textShadowBlur > 0;\n        subElStyle.text = token.text;\n        subElStyle.x = x;\n        subElStyle.y = y;\n        if (hasShadow) {\n            subElStyle.shadowBlur = tokenStyle.textShadowBlur || style.textShadowBlur || 0;\n            subElStyle.shadowColor = tokenStyle.textShadowColor || style.textShadowColor || 'transparent';\n            subElStyle.shadowOffsetX = tokenStyle.textShadowOffsetX || style.textShadowOffsetX || 0;\n            subElStyle.shadowOffsetY = tokenStyle.textShadowOffsetY || style.textShadowOffsetY || 0;\n        }\n        subElStyle.textAlign = textAlign;\n        subElStyle.textBaseline = 'middle';\n        subElStyle.font = token.font || DEFAULT_FONT;\n        subElStyle.opacity = retrieve3(tokenStyle.opacity, style.opacity, 1);\n        setSeparateFont(subElStyle, tokenStyle);\n        if (textStroke) {\n            subElStyle.lineWidth = retrieve3(tokenStyle.lineWidth, style.lineWidth, defaultLineWidth);\n            subElStyle.lineDash = retrieve2(tokenStyle.lineDash, style.lineDash);\n            subElStyle.lineDashOffset = style.lineDashOffset || 0;\n            subElStyle.stroke = textStroke;\n        }\n        if (textFill) {\n            subElStyle.fill = textFill;\n        }\n        var textWidth = token.contentWidth;\n        var textHeight = token.contentHeight;\n        el.setBoundingRect(new BoundingRect(adjustTextX(subElStyle.x, textWidth, subElStyle.textAlign), adjustTextY(subElStyle.y, textHeight, subElStyle.textBaseline), textWidth, textHeight));\n    };\n    ZRText.prototype._renderBackground = function (style, topStyle, x, y, width, height) {\n        var textBackgroundColor = style.backgroundColor;\n        var textBorderWidth = style.borderWidth;\n        var textBorderColor = style.borderColor;\n        var isImageBg = textBackgroundColor && textBackgroundColor.image;\n        var isPlainOrGradientBg = textBackgroundColor && !isImageBg;\n        var textBorderRadius = style.borderRadius;\n        var self = this;\n        var rectEl;\n        var imgEl;\n        if (isPlainOrGradientBg || style.lineHeight || (textBorderWidth && textBorderColor)) {\n            rectEl = this._getOrCreateChild(Rect);\n            rectEl.useStyle(rectEl.createStyle());\n            rectEl.style.fill = null;\n            var rectShape = rectEl.shape;\n            rectShape.x = x;\n            rectShape.y = y;\n            rectShape.width = width;\n            rectShape.height = height;\n            rectShape.r = textBorderRadius;\n            rectEl.dirtyShape();\n        }\n        if (isPlainOrGradientBg) {\n            var rectStyle = rectEl.style;\n            rectStyle.fill = textBackgroundColor || null;\n            rectStyle.fillOpacity = retrieve2(style.fillOpacity, 1);\n        }\n        else if (isImageBg) {\n            imgEl = this._getOrCreateChild(ZRImage);\n            imgEl.onload = function () {\n                self.dirtyStyle();\n            };\n            var imgStyle = imgEl.style;\n            imgStyle.image = textBackgroundColor.image;\n            imgStyle.x = x;\n            imgStyle.y = y;\n            imgStyle.width = width;\n            imgStyle.height = height;\n        }\n        if (textBorderWidth && textBorderColor) {\n            var rectStyle = rectEl.style;\n            rectStyle.lineWidth = textBorderWidth;\n            rectStyle.stroke = textBorderColor;\n            rectStyle.strokeOpacity = retrieve2(style.strokeOpacity, 1);\n            rectStyle.lineDash = style.borderDash;\n            rectStyle.lineDashOffset = style.borderDashOffset || 0;\n            rectEl.strokeContainThreshold = 0;\n            if (rectEl.hasFill() && rectEl.hasStroke()) {\n                rectStyle.strokeFirst = true;\n                rectStyle.lineWidth *= 2;\n            }\n        }\n        var commonStyle = (rectEl || imgEl).style;\n        commonStyle.shadowBlur = style.shadowBlur || 0;\n        commonStyle.shadowColor = style.shadowColor || 'transparent';\n        commonStyle.shadowOffsetX = style.shadowOffsetX || 0;\n        commonStyle.shadowOffsetY = style.shadowOffsetY || 0;\n        commonStyle.opacity = retrieve3(style.opacity, topStyle.opacity, 1);\n    };\n    ZRText.makeFont = function (style) {\n        var font = '';\n        if (hasSeparateFont(style)) {\n            font = [\n                style.fontStyle,\n                style.fontWeight,\n                parseFontSize(style.fontSize),\n                style.fontFamily || 'sans-serif'\n            ].join(' ');\n        }\n        return font && trim(font) || style.textFont || style.font;\n    };\n    return ZRText;\n}(Displayable));\nvar VALID_TEXT_ALIGN = { left: true, right: 1, center: 1 };\nvar VALID_TEXT_VERTICAL_ALIGN = { top: 1, bottom: 1, middle: 1 };\nvar FONT_PARTS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily'];\nexport function parseFontSize(fontSize) {\n    if (typeof fontSize === 'string'\n        && (fontSize.indexOf('px') !== -1\n            || fontSize.indexOf('rem') !== -1\n            || fontSize.indexOf('em') !== -1)) {\n        return fontSize;\n    }\n    else if (!isNaN(+fontSize)) {\n        return fontSize + 'px';\n    }\n    else {\n        return DEFAULT_FONT_SIZE + 'px';\n    }\n}\nfunction setSeparateFont(targetStyle, sourceStyle) {\n    for (var i = 0; i < FONT_PARTS.length; i++) {\n        var fontProp = FONT_PARTS[i];\n        var val = sourceStyle[fontProp];\n        if (val != null) {\n            targetStyle[fontProp] = val;\n        }\n    }\n}\nexport function hasSeparateFont(style) {\n    return style.fontSize != null || style.fontFamily || style.fontWeight;\n}\nexport function normalizeTextStyle(style) {\n    normalizeStyle(style);\n    each(style.rich, normalizeStyle);\n    return style;\n}\nfunction normalizeStyle(style) {\n    if (style) {\n        style.font = ZRText.makeFont(style);\n        var textAlign = style.align;\n        textAlign === 'middle' && (textAlign = 'center');\n        style.align = (textAlign == null || VALID_TEXT_ALIGN[textAlign]) ? textAlign : 'left';\n        var verticalAlign = style.verticalAlign;\n        verticalAlign === 'center' && (verticalAlign = 'middle');\n        style.verticalAlign = (verticalAlign == null || VALID_TEXT_VERTICAL_ALIGN[verticalAlign]) ? verticalAlign : 'top';\n        var textPadding = style.padding;\n        if (textPadding) {\n            style.padding = normalizeCssArray(style.padding);\n        }\n    }\n}\nfunction getStroke(stroke, lineWidth) {\n    return (stroke == null || lineWidth <= 0 || stroke === 'transparent' || stroke === 'none')\n        ? null\n        : (stroke.image || stroke.colorStops)\n            ? '#000'\n            : stroke;\n}\nfunction getFill(fill) {\n    return (fill == null || fill === 'none')\n        ? null\n        : (fill.image || fill.colorStops)\n            ? '#000'\n            : fill;\n}\nfunction getTextXForPadding(x, textAlign, textPadding) {\n    return textAlign === 'right'\n        ? (x - textPadding[1])\n        : textAlign === 'center'\n            ? (x + textPadding[3] / 2 - textPadding[1] / 2)\n            : (x + textPadding[3]);\n}\nfunction getStyleText(style) {\n    var text = style.text;\n    text != null && (text += '');\n    return text;\n}\nfunction needDrawBackground(style) {\n    return !!(style.backgroundColor\n        || style.lineHeight\n        || (style.borderWidth && style.borderColor));\n}\nexport default ZRText;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from './model.js';\nexport var getECData = makeInner();\nexport var setCommonECData = function (seriesIndex, dataType, dataIdx, el) {\n  if (el) {\n    var ecData = getECData(el);\n    // Add data index and series index for indexing the data by element\n    // Useful in tooltip\n    ecData.dataIndex = dataIdx;\n    ecData.dataType = dataType;\n    ecData.seriesIndex = seriesIndex;\n    ecData.ssrType = 'chart';\n    // TODO: not store dataIndex on children.\n    if (el.type === 'group') {\n      el.traverse(function (child) {\n        var childECData = getECData(child);\n        childECData.seriesIndex = seriesIndex;\n        childECData.dataIndex = dataIdx;\n        childECData.dataType = dataType;\n        childECData.ssrType = 'chart';\n      });\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, indexOf, isArrayLike, isObject, keys, isArray, each } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { liftColor } from 'zrender/lib/tool/color.js';\nimport { queryDataIndex, makeInner } from './model.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport { error } from './log.js';\n// Reserve 0 as default.\nvar _highlightNextDigit = 1;\nvar _highlightKeyMap = {};\nvar getSavedStates = makeInner();\nvar getComponentStates = makeInner();\nexport var HOVER_STATE_NORMAL = 0;\nexport var HOVER_STATE_BLUR = 1;\nexport var HOVER_STATE_EMPHASIS = 2;\nexport var SPECIAL_STATES = ['emphasis', 'blur', 'select'];\nexport var DISPLAY_STATES = ['normal', 'emphasis', 'blur', 'select'];\nexport var Z2_EMPHASIS_LIFT = 10;\nexport var Z2_SELECT_LIFT = 9;\nexport var HIGHLIGHT_ACTION_TYPE = 'highlight';\nexport var DOWNPLAY_ACTION_TYPE = 'downplay';\nexport var SELECT_ACTION_TYPE = 'select';\nexport var UNSELECT_ACTION_TYPE = 'unselect';\nexport var TOGGLE_SELECT_ACTION_TYPE = 'toggleSelect';\nfunction hasFillOrStroke(fillOrStroke) {\n  return fillOrStroke != null && fillOrStroke !== 'none';\n}\nfunction doChangeHoverState(el, stateName, hoverStateEnum) {\n  if (el.onHoverStateChange && (el.hoverState || 0) !== hoverStateEnum) {\n    el.onHoverStateChange(stateName);\n  }\n  el.hoverState = hoverStateEnum;\n}\nfunction singleEnterEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  doChangeHoverState(el, 'emphasis', HOVER_STATE_EMPHASIS);\n}\nfunction singleLeaveEmphasis(el) {\n  // Only mark the flag.\n  // States will be applied in the echarts.ts in next frame.\n  if (el.hoverState === HOVER_STATE_EMPHASIS) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterBlur(el) {\n  doChangeHoverState(el, 'blur', HOVER_STATE_BLUR);\n}\nfunction singleLeaveBlur(el) {\n  if (el.hoverState === HOVER_STATE_BLUR) {\n    doChangeHoverState(el, 'normal', HOVER_STATE_NORMAL);\n  }\n}\nfunction singleEnterSelect(el) {\n  el.selected = true;\n}\nfunction singleLeaveSelect(el) {\n  el.selected = false;\n}\nfunction updateElementState(el, updater, commonParam) {\n  updater(el, commonParam);\n}\nfunction traverseUpdateState(el, updater, commonParam) {\n  updateElementState(el, updater, commonParam);\n  el.isGroup && el.traverse(function (child) {\n    updateElementState(child, updater, commonParam);\n  });\n}\nexport function setStatesFlag(el, stateName) {\n  switch (stateName) {\n    case 'emphasis':\n      el.hoverState = HOVER_STATE_EMPHASIS;\n      break;\n    case 'normal':\n      el.hoverState = HOVER_STATE_NORMAL;\n      break;\n    case 'blur':\n      el.hoverState = HOVER_STATE_BLUR;\n      break;\n    case 'select':\n      el.selected = true;\n  }\n}\n/**\r\n * If we reuse elements when rerender.\r\n * DON'T forget to clearStates before we update the style and shape.\r\n * Or we may update on the wrong state instead of normal state.\r\n */\nexport function clearStates(el) {\n  if (el.isGroup) {\n    el.traverse(function (child) {\n      child.clearStates();\n    });\n  } else {\n    el.clearStates();\n  }\n}\nfunction getFromStateStyle(el, props, toStateName, defaultValue) {\n  var style = el.style;\n  var fromState = {};\n  for (var i = 0; i < props.length; i++) {\n    var propName = props[i];\n    var val = style[propName];\n    fromState[propName] = val == null ? defaultValue && defaultValue[propName] : val;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.__fromStateTransition\n    // Don't consider the animation to emphasis state.\n    && animator.__fromStateTransition.indexOf(toStateName) < 0 && animator.targetName === 'style') {\n      animator.saveTo(fromState, props);\n    }\n  }\n  return fromState;\n}\nfunction createEmphasisDefaultState(el, stateName, targetStates, state) {\n  var hasSelect = targetStates && indexOf(targetStates, 'select') >= 0;\n  var cloned = false;\n  if (el instanceof Path) {\n    var store = getSavedStates(el);\n    var fromFill = hasSelect ? store.selectFill || store.normalFill : store.normalFill;\n    var fromStroke = hasSelect ? store.selectStroke || store.normalStroke : store.normalStroke;\n    if (hasFillOrStroke(fromFill) || hasFillOrStroke(fromStroke)) {\n      state = state || {};\n      var emphasisStyle = state.style || {};\n      // inherit case\n      if (emphasisStyle.fill === 'inherit') {\n        cloned = true;\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        emphasisStyle.fill = fromFill;\n      }\n      // Apply default color lift\n      else if (!hasFillOrStroke(emphasisStyle.fill) && hasFillOrStroke(fromFill)) {\n        cloned = true;\n        // Not modify the original value.\n        state = extend({}, state);\n        emphasisStyle = extend({}, emphasisStyle);\n        // Already being applied 'emphasis'. DON'T lift color multiple times.\n        emphasisStyle.fill = liftColor(fromFill);\n      }\n      // Not highlight stroke if fill has been highlighted.\n      else if (!hasFillOrStroke(emphasisStyle.stroke) && hasFillOrStroke(fromStroke)) {\n        if (!cloned) {\n          state = extend({}, state);\n          emphasisStyle = extend({}, emphasisStyle);\n        }\n        emphasisStyle.stroke = liftColor(fromStroke);\n      }\n      state.style = emphasisStyle;\n    }\n  }\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      if (!cloned) {\n        state = extend({}, state);\n      }\n      var z2EmphasisLift = el.z2EmphasisLift;\n      state.z2 = el.z2 + (z2EmphasisLift != null ? z2EmphasisLift : Z2_EMPHASIS_LIFT);\n    }\n  }\n  return state;\n}\nfunction createSelectDefaultState(el, stateName, state) {\n  // const hasSelect = indexOf(el.currentStates, stateName) >= 0;\n  if (state) {\n    // TODO Share with textContent?\n    if (state.z2 == null) {\n      state = extend({}, state);\n      var z2SelectLift = el.z2SelectLift;\n      state.z2 = el.z2 + (z2SelectLift != null ? z2SelectLift : Z2_SELECT_LIFT);\n    }\n  }\n  return state;\n}\nfunction createBlurDefaultState(el, stateName, state) {\n  var hasBlur = indexOf(el.currentStates, stateName) >= 0;\n  var currentOpacity = el.style.opacity;\n  var fromState = !hasBlur ? getFromStateStyle(el, ['opacity'], stateName, {\n    opacity: 1\n  }) : null;\n  state = state || {};\n  var blurStyle = state.style || {};\n  if (blurStyle.opacity == null) {\n    // clone state\n    state = extend({}, state);\n    blurStyle = extend({\n      // Already being applied 'emphasis'. DON'T mul opacity multiple times.\n      opacity: hasBlur ? currentOpacity : fromState.opacity * 0.1\n    }, blurStyle);\n    state.style = blurStyle;\n  }\n  return state;\n}\nfunction elementStateProxy(stateName, targetStates) {\n  var state = this.states[stateName];\n  if (this.style) {\n    if (stateName === 'emphasis') {\n      return createEmphasisDefaultState(this, stateName, targetStates, state);\n    } else if (stateName === 'blur') {\n      return createBlurDefaultState(this, stateName, state);\n    } else if (stateName === 'select') {\n      return createSelectDefaultState(this, stateName, state);\n    }\n  }\n  return state;\n}\n/**\r\n * Set hover style (namely \"emphasis style\") of element.\r\n * @param el Should not be `zrender/graphic/Group`.\r\n * @param focus 'self' | 'selfInSeries' | 'series'\r\n */\nexport function setDefaultStateProxy(el) {\n  el.stateProxy = elementStateProxy;\n  var textContent = el.getTextContent();\n  var textGuide = el.getTextGuideLine();\n  if (textContent) {\n    textContent.stateProxy = elementStateProxy;\n  }\n  if (textGuide) {\n    textGuide.stateProxy = elementStateProxy;\n  }\n}\nexport function enterEmphasisWhenMouseOver(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasisWhenMouseOut(el, e) {\n  !shouldSilent(el, e)\n  // \"emphasis\" event highlight has higher priority than mouse highlight.\n  && !el.__highByOuter && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterEmphasis(el, highlightDigit) {\n  el.__highByOuter |= 1 << (highlightDigit || 0);\n  traverseUpdateState(el, singleEnterEmphasis);\n}\nexport function leaveEmphasis(el, highlightDigit) {\n  !(el.__highByOuter &= ~(1 << (highlightDigit || 0))) && traverseUpdateState(el, singleLeaveEmphasis);\n}\nexport function enterBlur(el) {\n  traverseUpdateState(el, singleEnterBlur);\n}\nexport function leaveBlur(el) {\n  traverseUpdateState(el, singleLeaveBlur);\n}\nexport function enterSelect(el) {\n  traverseUpdateState(el, singleEnterSelect);\n}\nexport function leaveSelect(el) {\n  traverseUpdateState(el, singleLeaveSelect);\n}\nfunction shouldSilent(el, e) {\n  return el.__highDownSilentOnTouch && e.zrByTouch;\n}\nexport function allLeaveBlur(api) {\n  var model = api.getModel();\n  var leaveBlurredSeries = [];\n  var allComponentViews = [];\n  model.eachComponent(function (componentType, componentModel) {\n    var componentStates = getComponentStates(componentModel);\n    var isSeries = componentType === 'series';\n    var view = isSeries ? api.getViewOfSeriesModel(componentModel) : api.getViewOfComponentModel(componentModel);\n    !isSeries && allComponentViews.push(view);\n    if (componentStates.isBlured) {\n      // Leave blur anyway\n      view.group.traverse(function (child) {\n        singleLeaveBlur(child);\n      });\n      isSeries && leaveBlurredSeries.push(componentModel);\n    }\n    componentStates.isBlured = false;\n  });\n  each(allComponentViews, function (view) {\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(leaveBlurredSeries, false, model);\n    }\n  });\n}\nexport function blurSeries(targetSeriesIndex, focus, blurScope, api) {\n  var ecModel = api.getModel();\n  blurScope = blurScope || 'coordinateSystem';\n  function leaveBlurOfIndices(data, dataIndices) {\n    for (var i = 0; i < dataIndices.length; i++) {\n      var itemEl = data.getItemGraphicEl(dataIndices[i]);\n      itemEl && leaveBlur(itemEl);\n    }\n  }\n  if (targetSeriesIndex == null) {\n    return;\n  }\n  if (!focus || focus === 'none') {\n    return;\n  }\n  var targetSeriesModel = ecModel.getSeriesByIndex(targetSeriesIndex);\n  var targetCoordSys = targetSeriesModel.coordinateSystem;\n  if (targetCoordSys && targetCoordSys.master) {\n    targetCoordSys = targetCoordSys.master;\n  }\n  var blurredSeries = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var sameSeries = targetSeriesModel === seriesModel;\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && coordSys.master) {\n      coordSys = coordSys.master;\n    }\n    var sameCoordSys = coordSys && targetCoordSys ? coordSys === targetCoordSys : sameSeries; // If there is no coordinate system. use sameSeries instead.\n    if (!(\n    // Not blur other series if blurScope series\n    blurScope === 'series' && !sameSeries\n    // Not blur other coordinate system if blurScope is coordinateSystem\n    || blurScope === 'coordinateSystem' && !sameCoordSys\n    // Not blur self series if focus is series.\n    || focus === 'series' && sameSeries\n    // TODO blurScope: coordinate system\n    )) {\n      var view = api.getViewOfSeriesModel(seriesModel);\n      view.group.traverse(function (child) {\n        // For the elements that have been triggered by other components,\n        // and are still required to be highlighted,\n        // because the current is directly forced to blur the element,\n        // it will cause the focus self to be unable to highlight, so skip the blur of this element.\n        if (child.__highByOuter && sameSeries && focus === 'self') {\n          return;\n        }\n        singleEnterBlur(child);\n      });\n      if (isArrayLike(focus)) {\n        leaveBlurOfIndices(seriesModel.getData(), focus);\n      } else if (isObject(focus)) {\n        var dataTypes = keys(focus);\n        for (var d = 0; d < dataTypes.length; d++) {\n          leaveBlurOfIndices(seriesModel.getData(dataTypes[d]), focus[dataTypes[d]]);\n        }\n      }\n      blurredSeries.push(seriesModel);\n      getComponentStates(seriesModel).isBlured = true;\n    }\n  });\n  ecModel.eachComponent(function (componentType, componentModel) {\n    if (componentType === 'series') {\n      return;\n    }\n    var view = api.getViewOfComponentModel(componentModel);\n    if (view && view.toggleBlurSeries) {\n      view.toggleBlurSeries(blurredSeries, true, ecModel);\n    }\n  });\n}\nexport function blurComponent(componentMainType, componentIndex, api) {\n  if (componentMainType == null || componentIndex == null) {\n    return;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return;\n  }\n  getComponentStates(componentModel).isBlured = true;\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.focusBlurEnabled) {\n    return;\n  }\n  view.group.traverse(function (child) {\n    singleEnterBlur(child);\n  });\n}\nexport function blurSeriesFromHighlightPayload(seriesModel, payload, api) {\n  var seriesIndex = seriesModel.seriesIndex;\n  var data = seriesModel.getData(payload.dataType);\n  if (!data) {\n    if (process.env.NODE_ENV !== 'production') {\n      error(\"Unknown dataType \" + payload.dataType);\n    }\n    return;\n  }\n  var dataIndex = queryDataIndex(data, payload);\n  // Pick the first one if there is multiple/none exists.\n  dataIndex = (isArray(dataIndex) ? dataIndex[0] : dataIndex) || 0;\n  var el = data.getItemGraphicEl(dataIndex);\n  if (!el) {\n    var count = data.count();\n    var current = 0;\n    // If data on dataIndex is NaN.\n    while (!el && current < count) {\n      el = data.getItemGraphicEl(current++);\n    }\n  }\n  if (el) {\n    var ecData = getECData(el);\n    blurSeries(seriesIndex, ecData.focus, ecData.blurScope, api);\n  } else {\n    // If there is no element put on the data. Try getting it from raw option\n    // TODO Should put it on seriesModel?\n    var focus_1 = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    if (focus_1 != null) {\n      blurSeries(seriesIndex, focus_1, blurScope, api);\n    }\n  }\n}\nexport function findComponentHighDownDispatchers(componentMainType, componentIndex, name, api) {\n  var ret = {\n    focusSelf: false,\n    dispatchers: null\n  };\n  if (componentMainType == null || componentMainType === 'series' || componentIndex == null || name == null) {\n    return ret;\n  }\n  var componentModel = api.getModel().getComponent(componentMainType, componentIndex);\n  if (!componentModel) {\n    return ret;\n  }\n  var view = api.getViewOfComponentModel(componentModel);\n  if (!view || !view.findHighDownDispatchers) {\n    return ret;\n  }\n  var dispatchers = view.findHighDownDispatchers(name);\n  // At presnet, the component (like Geo) only blur inside itself.\n  // So we do not use `blurScope` in component.\n  var focusSelf;\n  for (var i = 0; i < dispatchers.length; i++) {\n    if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatchers[i])) {\n      error('param should be highDownDispatcher');\n    }\n    if (getECData(dispatchers[i]).focus === 'self') {\n      focusSelf = true;\n      break;\n    }\n  }\n  return {\n    focusSelf: focusSelf,\n    dispatchers: dispatchers\n  };\n}\nexport function handleGlobalMouseOverForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  var ecData = getECData(dispatcher);\n  var _a = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api),\n    dispatchers = _a.dispatchers,\n    focusSelf = _a.focusSelf;\n  // If `findHighDownDispatchers` is supported on the component,\n  // highlight/downplay elements with the same name.\n  if (dispatchers) {\n    if (focusSelf) {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    each(dispatchers, function (dispatcher) {\n      return enterEmphasisWhenMouseOver(dispatcher, e);\n    });\n  } else {\n    // Try blur all in the related series. Then emphasis the hoverred.\n    // TODO. progressive mode.\n    blurSeries(ecData.seriesIndex, ecData.focus, ecData.blurScope, api);\n    if (ecData.focus === 'self') {\n      blurComponent(ecData.componentMainType, ecData.componentIndex, api);\n    }\n    // Other than series, component that not support `findHighDownDispatcher` will\n    // also use it. But in this case, highlight/downplay are only supported in\n    // mouse hover but not in dispatchAction.\n    enterEmphasisWhenMouseOver(dispatcher, e);\n  }\n}\nexport function handleGlobalMouseOutForHighDown(dispatcher, e, api) {\n  if (process.env.NODE_ENV !== 'production' && !isHighDownDispatcher(dispatcher)) {\n    error('param should be highDownDispatcher');\n  }\n  allLeaveBlur(api);\n  var ecData = getECData(dispatcher);\n  var dispatchers = findComponentHighDownDispatchers(ecData.componentMainType, ecData.componentIndex, ecData.componentHighDownName, api).dispatchers;\n  if (dispatchers) {\n    each(dispatchers, function (dispatcher) {\n      return leaveEmphasisWhenMouseOut(dispatcher, e);\n    });\n  } else {\n    leaveEmphasisWhenMouseOut(dispatcher, e);\n  }\n}\nexport function toggleSelectionFromPayload(seriesModel, payload, api) {\n  if (!isSelectChangePayload(payload)) {\n    return;\n  }\n  var dataType = payload.dataType;\n  var data = seriesModel.getData(dataType);\n  var dataIndex = queryDataIndex(data, payload);\n  if (!isArray(dataIndex)) {\n    dataIndex = [dataIndex];\n  }\n  seriesModel[payload.type === TOGGLE_SELECT_ACTION_TYPE ? 'toggleSelect' : payload.type === SELECT_ACTION_TYPE ? 'select' : 'unselect'](dataIndex, dataType);\n}\nexport function updateSeriesElementSelection(seriesModel) {\n  var allData = seriesModel.getAllData();\n  each(allData, function (_a) {\n    var data = _a.data,\n      type = _a.type;\n    data.eachItemGraphicEl(function (el, idx) {\n      seriesModel.isSelected(idx, type) ? enterSelect(el) : leaveSelect(el);\n    });\n  });\n}\nexport function getAllSelectedIndices(ecModel) {\n  var ret = [];\n  ecModel.eachSeries(function (seriesModel) {\n    var allData = seriesModel.getAllData();\n    each(allData, function (_a) {\n      var data = _a.data,\n        type = _a.type;\n      var dataIndices = seriesModel.getSelectedDataIndices();\n      if (dataIndices.length > 0) {\n        var item = {\n          dataIndex: dataIndices,\n          seriesIndex: seriesModel.seriesIndex\n        };\n        if (type != null) {\n          item.dataType = type;\n        }\n        ret.push(item);\n      }\n    });\n  });\n  return ret;\n}\n/**\r\n * Enable the function that mouseover will trigger the emphasis state.\r\n *\r\n * NOTE:\r\n * This function should be used on the element with dataIndex, seriesIndex.\r\n *\r\n */\nexport function enableHoverEmphasis(el, focus, blurScope) {\n  setAsHighDownDispatcher(el, true);\n  traverseUpdateState(el, setDefaultStateProxy);\n  enableHoverFocus(el, focus, blurScope);\n}\nexport function disableHoverEmphasis(el) {\n  setAsHighDownDispatcher(el, false);\n}\nexport function toggleHoverEmphasis(el, focus, blurScope, isDisabled) {\n  isDisabled ? disableHoverEmphasis(el) : enableHoverEmphasis(el, focus, blurScope);\n}\nexport function enableHoverFocus(el, focus, blurScope) {\n  var ecData = getECData(el);\n  if (focus != null) {\n    // TODO dataIndex may be set after this function. This check is not useful.\n    // if (ecData.dataIndex == null) {\n    //     if (__DEV__) {\n    //         console.warn('focus can only been set on element with dataIndex');\n    //     }\n    // }\n    // else {\n    ecData.focus = focus;\n    ecData.blurScope = blurScope;\n    // }\n  } else if (ecData.focus) {\n    ecData.focus = null;\n  }\n}\nvar OTHER_STATES = ['emphasis', 'blur', 'select'];\nvar defaultStyleGetterMap = {\n  itemStyle: 'getItemStyle',\n  lineStyle: 'getLineStyle',\n  areaStyle: 'getAreaStyle'\n};\n/**\r\n * Set emphasis/blur/selected states of element.\r\n */\nexport function setStatesStylesFromModel(el, itemModel, styleType,\n// default itemStyle\ngetter) {\n  styleType = styleType || 'itemStyle';\n  for (var i = 0; i < OTHER_STATES.length; i++) {\n    var stateName = OTHER_STATES[i];\n    var model = itemModel.getModel([stateName, styleType]);\n    var state = el.ensureState(stateName);\n    // Let it throw error if getterType is not found.\n    state.style = getter ? getter(model) : model[defaultStyleGetterMap[styleType]]();\n  }\n}\n/**\r\n *\r\n * Set element as highlight / downplay dispatcher.\r\n * It will be checked when element received mouseover event or from highlight action.\r\n * It's in change of all highlight/downplay behavior of it's children.\r\n *\r\n * @param el\r\n * @param el.highDownSilentOnTouch\r\n *        In touch device, mouseover event will be trigger on touchstart event\r\n *        (see module:zrender/dom/HandlerProxy). By this mechanism, we can\r\n *        conveniently use hoverStyle when tap on touch screen without additional\r\n *        code for compatibility.\r\n *        But if the chart/component has select feature, which usually also use\r\n *        hoverStyle, there might be conflict between 'select-highlight' and\r\n *        'hover-highlight' especially when roam is enabled (see geo for example).\r\n *        In this case, `highDownSilentOnTouch` should be used to disable\r\n *        hover-highlight on touch device.\r\n * @param asDispatcher If `false`, do not set as \"highDownDispatcher\".\r\n */\nexport function setAsHighDownDispatcher(el, asDispatcher) {\n  var disable = asDispatcher === false;\n  var extendedEl = el;\n  // Make `highDownSilentOnTouch` and `onStateChange` only work after\n  // `setAsHighDownDispatcher` called. Avoid it is modified by user unexpectedly.\n  if (el.highDownSilentOnTouch) {\n    extendedEl.__highDownSilentOnTouch = el.highDownSilentOnTouch;\n  }\n  // Simple optimize, since this method might be\n  // called for each elements of a group in some cases.\n  if (!disable || extendedEl.__highDownDispatcher) {\n    // Emphasis, normal can be triggered manually by API or other components like hover link.\n    // el[method]('emphasis', onElementEmphasisEvent)[method]('normal', onElementNormalEvent);\n    // Also keep previous record.\n    extendedEl.__highByOuter = extendedEl.__highByOuter || 0;\n    extendedEl.__highDownDispatcher = !disable;\n  }\n}\nexport function isHighDownDispatcher(el) {\n  return !!(el && el.__highDownDispatcher);\n}\n/**\r\n * Enable component highlight/downplay features:\r\n * + hover link (within the same name)\r\n * + focus blur in component\r\n */\nexport function enableComponentHighDownFeatures(el, componentModel, componentHighDownName) {\n  var ecData = getECData(el);\n  ecData.componentMainType = componentModel.mainType;\n  ecData.componentIndex = componentModel.componentIndex;\n  ecData.componentHighDownName = componentHighDownName;\n}\n/**\r\n * Support highlight/downplay record on each elements.\r\n * For the case: hover highlight/downplay (legend, visualMap, ...) and\r\n * user triggered highlight/downplay should not conflict.\r\n * Only all of the highlightDigit cleared, return to normal.\r\n * @param {string} highlightKey\r\n * @return {number} highlightDigit\r\n */\nexport function getHighlightDigit(highlightKey) {\n  var highlightDigit = _highlightKeyMap[highlightKey];\n  if (highlightDigit == null && _highlightNextDigit <= 32) {\n    highlightDigit = _highlightKeyMap[highlightKey] = _highlightNextDigit++;\n  }\n  return highlightDigit;\n}\nexport function isSelectChangePayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === SELECT_ACTION_TYPE || payloadType === UNSELECT_ACTION_TYPE || payloadType === TOGGLE_SELECT_ACTION_TYPE;\n}\nexport function isHighDownPayload(payload) {\n  var payloadType = payload.type;\n  return payloadType === HIGHLIGHT_ACTION_TYPE || payloadType === DOWNPLAY_ACTION_TYPE;\n}\nexport function savePathStates(el) {\n  var store = getSavedStates(el);\n  store.normalFill = el.style.fill;\n  store.normalStroke = el.style.stroke;\n  var selectState = el.states.select || {};\n  store.selectFill = selectState.style && selectState.style.fill || null;\n  store.selectStroke = selectState.style && selectState.style.stroke || null;\n}","import PathProxy from '../core/PathProxy.js';\nimport { applyTransform as v2ApplyTransform } from '../core/vector.js';\nvar CMD = PathProxy.CMD;\nvar points = [[], [], []];\nvar mathSqrt = Math.sqrt;\nvar mathAtan2 = Math.atan2;\nexport default function transformPath(path, m) {\n    if (!m) {\n        return;\n    }\n    var data = path.data;\n    var len = path.len();\n    var cmd;\n    var nPoint;\n    var i;\n    var j;\n    var k;\n    var p;\n    var M = CMD.M;\n    var C = CMD.C;\n    var L = CMD.L;\n    var R = CMD.R;\n    var A = CMD.A;\n    var Q = CMD.Q;\n    for (i = 0, j = 0; i < len;) {\n        cmd = data[i++];\n        j = i;\n        nPoint = 0;\n        switch (cmd) {\n            case M:\n                nPoint = 1;\n                break;\n            case L:\n                nPoint = 1;\n                break;\n            case C:\n                nPoint = 3;\n                break;\n            case Q:\n                nPoint = 2;\n                break;\n            case A:\n                var x = m[4];\n                var y = m[5];\n                var sx = mathSqrt(m[0] * m[0] + m[1] * m[1]);\n                var sy = mathSqrt(m[2] * m[2] + m[3] * m[3]);\n                var angle = mathAtan2(-m[1] / sy, m[0] / sx);\n                data[i] *= sx;\n                data[i++] += x;\n                data[i] *= sy;\n                data[i++] += y;\n                data[i++] *= sx;\n                data[i++] *= sy;\n                data[i++] += angle;\n                data[i++] += angle;\n                i += 2;\n                j = i;\n                break;\n            case R:\n                p[0] = data[i++];\n                p[1] = data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n                p[0] += data[i++];\n                p[1] += data[i++];\n                v2ApplyTransform(p, p, m);\n                data[j++] = p[0];\n                data[j++] = p[1];\n        }\n        for (k = 0; k < nPoint; k++) {\n            var p_1 = points[k];\n            p_1[0] = data[i++];\n            p_1[1] = data[i++];\n            v2ApplyTransform(p_1, p_1, m);\n            data[j++] = p_1[0];\n            data[j++] = p_1[1];\n        }\n    }\n    path.increaseVersion();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../graphic/Path.js';\nimport PathProxy from '../core/PathProxy.js';\nimport transformPath from './transformPath.js';\nimport { extend } from '../core/util.js';\nvar mathSqrt = Math.sqrt;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar PI = Math.PI;\nfunction vMag(v) {\n    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n;\nfunction vRatio(u, v) {\n    return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n}\n;\nfunction vAngle(u, v) {\n    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1)\n        * Math.acos(vRatio(u, v));\n}\n;\nfunction processArc(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg, cmd, path) {\n    var psi = psiDeg * (PI / 180.0);\n    var xp = mathCos(psi) * (x1 - x2) / 2.0\n        + mathSin(psi) * (y1 - y2) / 2.0;\n    var yp = -1 * mathSin(psi) * (x1 - x2) / 2.0\n        + mathCos(psi) * (y1 - y2) / 2.0;\n    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n    if (lambda > 1) {\n        rx *= mathSqrt(lambda);\n        ry *= mathSqrt(lambda);\n    }\n    var f = (fa === fs ? -1 : 1)\n        * mathSqrt((((rx * rx) * (ry * ry))\n            - ((rx * rx) * (yp * yp))\n            - ((ry * ry) * (xp * xp))) / ((rx * rx) * (yp * yp)\n            + (ry * ry) * (xp * xp))) || 0;\n    var cxp = f * rx * yp / ry;\n    var cyp = f * -ry * xp / rx;\n    var cx = (x1 + x2) / 2.0\n        + mathCos(psi) * cxp\n        - mathSin(psi) * cyp;\n    var cy = (y1 + y2) / 2.0\n        + mathSin(psi) * cxp\n        + mathCos(psi) * cyp;\n    var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n    var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n    var dTheta = vAngle(u, v);\n    if (vRatio(u, v) <= -1) {\n        dTheta = PI;\n    }\n    if (vRatio(u, v) >= 1) {\n        dTheta = 0;\n    }\n    if (dTheta < 0) {\n        var n = Math.round(dTheta / PI * 1e6) / 1e6;\n        dTheta = PI * 2 + (n % 2) * PI;\n    }\n    path.addData(cmd, cx, cy, rx, ry, theta, dTheta, psi, fs);\n}\nvar commandReg = /([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig;\nvar numberReg = /-?([0-9]*\\.)?[0-9]+([eE]-?[0-9]+)?/g;\nfunction createPathProxyFromString(data) {\n    var path = new PathProxy();\n    if (!data) {\n        return path;\n    }\n    var cpx = 0;\n    var cpy = 0;\n    var subpathX = cpx;\n    var subpathY = cpy;\n    var prevCmd;\n    var CMD = PathProxy.CMD;\n    var cmdList = data.match(commandReg);\n    if (!cmdList) {\n        return path;\n    }\n    for (var l = 0; l < cmdList.length; l++) {\n        var cmdText = cmdList[l];\n        var cmdStr = cmdText.charAt(0);\n        var cmd = void 0;\n        var p = cmdText.match(numberReg) || [];\n        var pLen = p.length;\n        for (var i = 0; i < pLen; i++) {\n            p[i] = parseFloat(p[i]);\n        }\n        var off = 0;\n        while (off < pLen) {\n            var ctlPtx = void 0;\n            var ctlPty = void 0;\n            var rx = void 0;\n            var ry = void 0;\n            var psi = void 0;\n            var fa = void 0;\n            var fs = void 0;\n            var x1 = cpx;\n            var y1 = cpy;\n            var len = void 0;\n            var pathData = void 0;\n            switch (cmdStr) {\n                case 'l':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'L':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'm':\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'l';\n                    break;\n                case 'M':\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.M;\n                    path.addData(cmd, cpx, cpy);\n                    subpathX = cpx;\n                    subpathY = cpy;\n                    cmdStr = 'L';\n                    break;\n                case 'h':\n                    cpx += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'H':\n                    cpx = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'v':\n                    cpy += p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'V':\n                    cpy = p[off++];\n                    cmd = CMD.L;\n                    path.addData(cmd, cpx, cpy);\n                    break;\n                case 'C':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++], p[off++], p[off++], p[off++], p[off++], p[off++]);\n                    cpx = p[off - 2];\n                    cpy = p[off - 1];\n                    break;\n                case 'c':\n                    cmd = CMD.C;\n                    path.addData(cmd, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy, p[off++] + cpx, p[off++] + cpy);\n                    cpx += p[off - 2];\n                    cpy += p[off - 1];\n                    break;\n                case 'S':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 's':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.C) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cmd = CMD.C;\n                    x1 = cpx + p[off++];\n                    y1 = cpy + p[off++];\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    path.addData(cmd, ctlPtx, ctlPty, x1, y1, cpx, cpy);\n                    break;\n                case 'Q':\n                    x1 = p[off++];\n                    y1 = p[off++];\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'q':\n                    x1 = p[off++] + cpx;\n                    y1 = p[off++] + cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, x1, y1, cpx, cpy);\n                    break;\n                case 'T':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 't':\n                    ctlPtx = cpx;\n                    ctlPty = cpy;\n                    len = path.len();\n                    pathData = path.data;\n                    if (prevCmd === CMD.Q) {\n                        ctlPtx += cpx - pathData[len - 4];\n                        ctlPty += cpy - pathData[len - 3];\n                    }\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.Q;\n                    path.addData(cmd, ctlPtx, ctlPty, cpx, cpy);\n                    break;\n                case 'A':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx = p[off++];\n                    cpy = p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n                case 'a':\n                    rx = p[off++];\n                    ry = p[off++];\n                    psi = p[off++];\n                    fa = p[off++];\n                    fs = p[off++];\n                    x1 = cpx, y1 = cpy;\n                    cpx += p[off++];\n                    cpy += p[off++];\n                    cmd = CMD.A;\n                    processArc(x1, y1, cpx, cpy, fa, fs, rx, ry, psi, cmd, path);\n                    break;\n            }\n        }\n        if (cmdStr === 'z' || cmdStr === 'Z') {\n            cmd = CMD.Z;\n            path.addData(cmd);\n            cpx = subpathX;\n            cpy = subpathY;\n        }\n        prevCmd = cmd;\n    }\n    path.toStatic();\n    return path;\n}\nvar SVGPath = (function (_super) {\n    __extends(SVGPath, _super);\n    function SVGPath() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SVGPath.prototype.applyTransform = function (m) { };\n    return SVGPath;\n}(Path));\nfunction isPathProxy(path) {\n    return path.setData != null;\n}\nfunction createPathOptions(str, opts) {\n    var pathProxy = createPathProxyFromString(str);\n    var innerOpts = extend({}, opts);\n    innerOpts.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.setData(pathProxy.data);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n        else {\n            var ctx = path;\n            pathProxy.rebuildPath(ctx, 1);\n        }\n    };\n    innerOpts.applyTransform = function (m) {\n        transformPath(pathProxy, m);\n        this.dirtyShape();\n    };\n    return innerOpts;\n}\nexport function createFromString(str, opts) {\n    return new SVGPath(createPathOptions(str, opts));\n}\nexport function extendFromString(str, defaultOpts) {\n    var innerOpts = createPathOptions(str, defaultOpts);\n    var Sub = (function (_super) {\n        __extends(Sub, _super);\n        function Sub(opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.applyTransform = innerOpts.applyTransform;\n            _this.buildPath = innerOpts.buildPath;\n            return _this;\n        }\n        return Sub;\n    }(SVGPath));\n    return Sub;\n}\nexport function mergePath(pathEls, opts) {\n    var pathList = [];\n    var len = pathEls.length;\n    for (var i = 0; i < len; i++) {\n        var pathEl = pathEls[i];\n        pathList.push(pathEl.getUpdatedPathProxy(true));\n    }\n    var pathBundle = new Path(opts);\n    pathBundle.createPathProxy();\n    pathBundle.buildPath = function (path) {\n        if (isPathProxy(path)) {\n            path.appendPath(pathList);\n            var ctx = path.getContext();\n            if (ctx) {\n                path.rebuildPath(ctx, 1);\n            }\n        }\n    };\n    return pathBundle;\n}\nexport function clonePath(sourcePath, opts) {\n    opts = opts || {};\n    var path = new Path();\n    if (sourcePath.shape) {\n        path.setShape(sourcePath.shape);\n    }\n    path.setStyle(sourcePath.style);\n    if (opts.bakeTransform) {\n        transformPath(path.path, sourcePath.getComputedTransform());\n    }\n    else {\n        if (opts.toLocal) {\n            path.setLocalTransform(sourcePath.getComputedTransform());\n        }\n        else {\n            path.copyTransform(sourcePath);\n        }\n    }\n    path.buildPath = sourcePath.buildPath;\n    path.applyTransform = path.applyTransform;\n    path.z = sourcePath.z;\n    path.z2 = sourcePath.z2;\n    path.zlevel = sourcePath.zlevel;\n    return path;\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar CircleShape = (function () {\n    function CircleShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n    }\n    return CircleShape;\n}());\nexport { CircleShape };\nvar Circle = (function (_super) {\n    __extends(Circle, _super);\n    function Circle(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Circle.prototype.getDefaultShape = function () {\n        return new CircleShape();\n    };\n    Circle.prototype.buildPath = function (ctx, shape) {\n        ctx.moveTo(shape.cx + shape.r, shape.cy);\n        ctx.arc(shape.cx, shape.cy, shape.r, 0, Math.PI * 2);\n    };\n    return Circle;\n}(Path));\n;\nCircle.prototype.type = 'circle';\nexport default Circle;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar EllipseShape = (function () {\n    function EllipseShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.rx = 0;\n        this.ry = 0;\n    }\n    return EllipseShape;\n}());\nexport { EllipseShape };\nvar Ellipse = (function (_super) {\n    __extends(Ellipse, _super);\n    function Ellipse(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ellipse.prototype.getDefaultShape = function () {\n        return new EllipseShape();\n    };\n    Ellipse.prototype.buildPath = function (ctx, shape) {\n        var k = 0.5522848;\n        var x = shape.cx;\n        var y = shape.cy;\n        var a = shape.rx;\n        var b = shape.ry;\n        var ox = a * k;\n        var oy = b * k;\n        ctx.moveTo(x - a, y);\n        ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);\n        ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);\n        ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);\n        ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);\n        ctx.closePath();\n    };\n    return Ellipse;\n}(Path));\nEllipse.prototype.type = 'ellipse';\nexport default Ellipse;\n","import { isArray } from '../../core/util.js';\nvar PI = Math.PI;\nvar PI2 = PI * 2;\nvar mathSin = Math.sin;\nvar mathCos = Math.cos;\nvar mathACos = Math.acos;\nvar mathATan2 = Math.atan2;\nvar mathAbs = Math.abs;\nvar mathSqrt = Math.sqrt;\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar e = 1e-4;\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var dx10 = x1 - x0;\n    var dy10 = y1 - y0;\n    var dx32 = x3 - x2;\n    var dy32 = y3 - y2;\n    var t = dy32 * dx10 - dx32 * dy10;\n    if (t * t < e) {\n        return;\n    }\n    t = (dx32 * (y0 - y2) - dy32 * (x0 - x2)) / t;\n    return [x0 + t * dx10, y0 + t * dy10];\n}\nfunction computeCornerTangents(x0, y0, x1, y1, radius, cr, clockwise) {\n    var x01 = x0 - x1;\n    var y01 = y0 - y1;\n    var lo = (clockwise ? cr : -cr) / mathSqrt(x01 * x01 + y01 * y01);\n    var ox = lo * y01;\n    var oy = -lo * x01;\n    var x11 = x0 + ox;\n    var y11 = y0 + oy;\n    var x10 = x1 + ox;\n    var y10 = y1 + oy;\n    var x00 = (x11 + x10) / 2;\n    var y00 = (y11 + y10) / 2;\n    var dx = x10 - x11;\n    var dy = y10 - y11;\n    var d2 = dx * dx + dy * dy;\n    var r = radius - cr;\n    var s = x11 * y10 - x10 * y11;\n    var d = (dy < 0 ? -1 : 1) * mathSqrt(mathMax(0, r * r * d2 - s * s));\n    var cx0 = (s * dy - dx * d) / d2;\n    var cy0 = (-s * dx - dy * d) / d2;\n    var cx1 = (s * dy + dx * d) / d2;\n    var cy1 = (-s * dx + dy * d) / d2;\n    var dx0 = cx0 - x00;\n    var dy0 = cy0 - y00;\n    var dx1 = cx1 - x00;\n    var dy1 = cy1 - y00;\n    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) {\n        cx0 = cx1;\n        cy0 = cy1;\n    }\n    return {\n        cx: cx0,\n        cy: cy0,\n        x0: -ox,\n        y0: -oy,\n        x1: cx0 * (radius / r - 1),\n        y1: cy0 * (radius / r - 1)\n    };\n}\nfunction normalizeCornerRadius(cr) {\n    var arr;\n    if (isArray(cr)) {\n        var len = cr.length;\n        if (!len) {\n            return cr;\n        }\n        if (len === 1) {\n            arr = [cr[0], cr[0], 0, 0];\n        }\n        else if (len === 2) {\n            arr = [cr[0], cr[0], cr[1], cr[1]];\n        }\n        else if (len === 3) {\n            arr = cr.concat(cr[2]);\n        }\n        else {\n            arr = cr;\n        }\n    }\n    else {\n        arr = [cr, cr, cr, cr];\n    }\n    return arr;\n}\nexport function buildPath(ctx, shape) {\n    var _a;\n    var radius = mathMax(shape.r, 0);\n    var innerRadius = mathMax(shape.r0 || 0, 0);\n    var hasRadius = radius > 0;\n    var hasInnerRadius = innerRadius > 0;\n    if (!hasRadius && !hasInnerRadius) {\n        return;\n    }\n    if (!hasRadius) {\n        radius = innerRadius;\n        innerRadius = 0;\n    }\n    if (innerRadius > radius) {\n        var tmp = radius;\n        radius = innerRadius;\n        innerRadius = tmp;\n    }\n    var startAngle = shape.startAngle, endAngle = shape.endAngle;\n    if (isNaN(startAngle) || isNaN(endAngle)) {\n        return;\n    }\n    var cx = shape.cx, cy = shape.cy;\n    var clockwise = !!shape.clockwise;\n    var arc = mathAbs(endAngle - startAngle);\n    var mod = arc > PI2 && arc % PI2;\n    mod > e && (arc = mod);\n    if (!(radius > e)) {\n        ctx.moveTo(cx, cy);\n    }\n    else if (arc > PI2 - e) {\n        ctx.moveTo(cx + radius * mathCos(startAngle), cy + radius * mathSin(startAngle));\n        ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        if (innerRadius > e) {\n            ctx.moveTo(cx + innerRadius * mathCos(endAngle), cy + innerRadius * mathSin(endAngle));\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    else {\n        var icrStart = void 0;\n        var icrEnd = void 0;\n        var ocrStart = void 0;\n        var ocrEnd = void 0;\n        var ocrs = void 0;\n        var ocre = void 0;\n        var icrs = void 0;\n        var icre = void 0;\n        var ocrMax = void 0;\n        var icrMax = void 0;\n        var limitedOcrMax = void 0;\n        var limitedIcrMax = void 0;\n        var xre = void 0;\n        var yre = void 0;\n        var xirs = void 0;\n        var yirs = void 0;\n        var xrs = radius * mathCos(startAngle);\n        var yrs = radius * mathSin(startAngle);\n        var xire = innerRadius * mathCos(endAngle);\n        var yire = innerRadius * mathSin(endAngle);\n        var hasArc = arc > e;\n        if (hasArc) {\n            var cornerRadius = shape.cornerRadius;\n            if (cornerRadius) {\n                _a = normalizeCornerRadius(cornerRadius), icrStart = _a[0], icrEnd = _a[1], ocrStart = _a[2], ocrEnd = _a[3];\n            }\n            var halfRd = mathAbs(radius - innerRadius) / 2;\n            ocrs = mathMin(halfRd, ocrStart);\n            ocre = mathMin(halfRd, ocrEnd);\n            icrs = mathMin(halfRd, icrStart);\n            icre = mathMin(halfRd, icrEnd);\n            limitedOcrMax = ocrMax = mathMax(ocrs, ocre);\n            limitedIcrMax = icrMax = mathMax(icrs, icre);\n            if (ocrMax > e || icrMax > e) {\n                xre = radius * mathCos(endAngle);\n                yre = radius * mathSin(endAngle);\n                xirs = innerRadius * mathCos(startAngle);\n                yirs = innerRadius * mathSin(startAngle);\n                if (arc < PI) {\n                    var it_1 = intersect(xrs, yrs, xirs, yirs, xre, yre, xire, yire);\n                    if (it_1) {\n                        var x0 = xrs - it_1[0];\n                        var y0 = yrs - it_1[1];\n                        var x1 = xre - it_1[0];\n                        var y1 = yre - it_1[1];\n                        var a = 1 / mathSin(mathACos((x0 * x1 + y0 * y1) / (mathSqrt(x0 * x0 + y0 * y0) * mathSqrt(x1 * x1 + y1 * y1))) / 2);\n                        var b = mathSqrt(it_1[0] * it_1[0] + it_1[1] * it_1[1]);\n                        limitedOcrMax = mathMin(ocrMax, (radius - b) / (a + 1));\n                        limitedIcrMax = mathMin(icrMax, (innerRadius - b) / (a - 1));\n                    }\n                }\n            }\n        }\n        if (!hasArc) {\n            ctx.moveTo(cx + xrs, cy + yrs);\n        }\n        else if (limitedOcrMax > e) {\n            var crStart = mathMin(ocrStart, limitedOcrMax);\n            var crEnd = mathMin(ocrEnd, limitedOcrMax);\n            var ct0 = computeCornerTangents(xirs, yirs, xrs, yrs, radius, crStart, clockwise);\n            var ct1 = computeCornerTangents(xre, yre, xire, yire, radius, crEnd, clockwise);\n            ctx.moveTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedOcrMax < ocrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedOcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crStart > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crStart, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, radius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), !clockwise);\n                crEnd > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crEnd, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.moveTo(cx + xrs, cy + yrs);\n            ctx.arc(cx, cy, radius, startAngle, endAngle, !clockwise);\n        }\n        if (!(innerRadius > e) || !hasArc) {\n            ctx.lineTo(cx + xire, cy + yire);\n        }\n        else if (limitedIcrMax > e) {\n            var crStart = mathMin(icrStart, limitedIcrMax);\n            var crEnd = mathMin(icrEnd, limitedIcrMax);\n            var ct0 = computeCornerTangents(xire, yire, xre, yre, innerRadius, -crEnd, clockwise);\n            var ct1 = computeCornerTangents(xrs, yrs, xirs, yirs, innerRadius, -crStart, clockwise);\n            ctx.lineTo(cx + ct0.cx + ct0.x0, cy + ct0.cy + ct0.y0);\n            if (limitedIcrMax < icrMax && crStart === crEnd) {\n                ctx.arc(cx + ct0.cx, cy + ct0.cy, limitedIcrMax, mathATan2(ct0.y0, ct0.x0), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n            else {\n                crEnd > 0 && ctx.arc(cx + ct0.cx, cy + ct0.cy, crEnd, mathATan2(ct0.y0, ct0.x0), mathATan2(ct0.y1, ct0.x1), !clockwise);\n                ctx.arc(cx, cy, innerRadius, mathATan2(ct0.cy + ct0.y1, ct0.cx + ct0.x1), mathATan2(ct1.cy + ct1.y1, ct1.cx + ct1.x1), clockwise);\n                crStart > 0 && ctx.arc(cx + ct1.cx, cy + ct1.cy, crStart, mathATan2(ct1.y1, ct1.x1), mathATan2(ct1.y0, ct1.x0), !clockwise);\n            }\n        }\n        else {\n            ctx.lineTo(cx + xire, cy + yire);\n            ctx.arc(cx, cy, innerRadius, endAngle, startAngle, clockwise);\n        }\n    }\n    ctx.closePath();\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as roundSectorHelper from '../helper/roundSector.js';\nvar SectorShape = (function () {\n    function SectorShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r0 = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n        this.cornerRadius = 0;\n    }\n    return SectorShape;\n}());\nexport { SectorShape };\nvar Sector = (function (_super) {\n    __extends(Sector, _super);\n    function Sector(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Sector.prototype.getDefaultShape = function () {\n        return new SectorShape();\n    };\n    Sector.prototype.buildPath = function (ctx, shape) {\n        roundSectorHelper.buildPath(ctx, shape);\n    };\n    Sector.prototype.isZeroArea = function () {\n        return this.shape.startAngle === this.shape.endAngle\n            || this.shape.r === this.shape.r0;\n    };\n    return Sector;\n}(Path));\nSector.prototype.type = 'sector';\nexport default Sector;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar RingShape = (function () {\n    function RingShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.r0 = 0;\n    }\n    return RingShape;\n}());\nexport { RingShape };\nvar Ring = (function (_super) {\n    __extends(Ring, _super);\n    function Ring(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Ring.prototype.getDefaultShape = function () {\n        return new RingShape();\n    };\n    Ring.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var PI2 = Math.PI * 2;\n        ctx.moveTo(x + shape.r, y);\n        ctx.arc(x, y, shape.r, 0, PI2, false);\n        ctx.moveTo(x + shape.r0, y);\n        ctx.arc(x, y, shape.r0, 0, PI2, true);\n    };\n    return Ring;\n}(Path));\nRing.prototype.type = 'ring';\nexport default Ring;\n","import { min as v2Min, max as v2Max, scale as v2Scale, distance as v2Distance, add as v2Add, clone as v2Clone, sub as v2Sub } from '../../core/vector.js';\nexport default function smoothBezier(points, smooth, isLoop, constraint) {\n    var cps = [];\n    var v = [];\n    var v1 = [];\n    var v2 = [];\n    var prevPoint;\n    var nextPoint;\n    var min;\n    var max;\n    if (constraint) {\n        min = [Infinity, Infinity];\n        max = [-Infinity, -Infinity];\n        for (var i = 0, len = points.length; i < len; i++) {\n            v2Min(min, min, points[i]);\n            v2Max(max, max, points[i]);\n        }\n        v2Min(min, min, constraint[0]);\n        v2Max(max, max, constraint[1]);\n    }\n    for (var i = 0, len = points.length; i < len; i++) {\n        var point = points[i];\n        if (isLoop) {\n            prevPoint = points[i ? i - 1 : len - 1];\n            nextPoint = points[(i + 1) % len];\n        }\n        else {\n            if (i === 0 || i === len - 1) {\n                cps.push(v2Clone(points[i]));\n                continue;\n            }\n            else {\n                prevPoint = points[i - 1];\n                nextPoint = points[i + 1];\n            }\n        }\n        v2Sub(v, nextPoint, prevPoint);\n        v2Scale(v, v, smooth);\n        var d0 = v2Distance(point, prevPoint);\n        var d1 = v2Distance(point, nextPoint);\n        var sum = d0 + d1;\n        if (sum !== 0) {\n            d0 /= sum;\n            d1 /= sum;\n        }\n        v2Scale(v1, v, -d0);\n        v2Scale(v2, v, d1);\n        var cp0 = v2Add([], point, v1);\n        var cp1 = v2Add([], point, v2);\n        if (constraint) {\n            v2Max(cp0, cp0, min);\n            v2Min(cp0, cp0, max);\n            v2Max(cp1, cp1, min);\n            v2Min(cp1, cp1, max);\n        }\n        cps.push(cp0);\n        cps.push(cp1);\n    }\n    if (isLoop) {\n        cps.push(cps.shift());\n    }\n    return cps;\n}\n","import smoothBezier from './smoothBezier.js';\nexport function buildPath(ctx, shape, closePath) {\n    var smooth = shape.smooth;\n    var points = shape.points;\n    if (points && points.length >= 2) {\n        if (smooth) {\n            var controlPoints = smoothBezier(points, smooth, closePath, shape.smoothConstraint);\n            ctx.moveTo(points[0][0], points[0][1]);\n            var len = points.length;\n            for (var i = 0; i < (closePath ? len : len - 1); i++) {\n                var cp1 = controlPoints[i * 2];\n                var cp2 = controlPoints[i * 2 + 1];\n                var p = points[(i + 1) % len];\n                ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);\n            }\n        }\n        else {\n            ctx.moveTo(points[0][0], points[0][1]);\n            for (var i = 1, l = points.length; i < l; i++) {\n                ctx.lineTo(points[i][0], points[i][1]);\n            }\n        }\n        closePath && ctx.closePath();\n    }\n}\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolygonShape = (function () {\n    function PolygonShape() {\n        this.points = null;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolygonShape;\n}());\nexport { PolygonShape };\nvar Polygon = (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polygon.prototype.getDefaultShape = function () {\n        return new PolygonShape();\n    };\n    Polygon.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, true);\n    };\n    return Polygon;\n}(Path));\n;\nPolygon.prototype.type = 'polygon';\nexport default Polygon;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as polyHelper from '../helper/poly.js';\nvar PolylineShape = (function () {\n    function PolylineShape() {\n        this.points = null;\n        this.percent = 1;\n        this.smooth = 0;\n        this.smoothConstraint = null;\n    }\n    return PolylineShape;\n}());\nexport { PolylineShape };\nvar Polyline = (function (_super) {\n    __extends(Polyline, _super);\n    function Polyline(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Polyline.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Polyline.prototype.getDefaultShape = function () {\n        return new PolylineShape();\n    };\n    Polyline.prototype.buildPath = function (ctx, shape) {\n        polyHelper.buildPath(ctx, shape, false);\n    };\n    return Polyline;\n}(Path));\nPolyline.prototype.type = 'polyline';\nexport default Polyline;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport { subPixelOptimizeLine } from '../helper/subPixelOptimize.js';\nvar subPixelOptimizeOutputShape = {};\nvar LineShape = (function () {\n    function LineShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.percent = 1;\n    }\n    return LineShape;\n}());\nexport { LineShape };\nvar Line = (function (_super) {\n    __extends(Line, _super);\n    function Line(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Line.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Line.prototype.getDefaultShape = function () {\n        return new LineShape();\n    };\n    Line.prototype.buildPath = function (ctx, shape) {\n        var x1;\n        var y1;\n        var x2;\n        var y2;\n        if (this.subPixelOptimize) {\n            var optimizedShape = subPixelOptimizeLine(subPixelOptimizeOutputShape, shape, this.style);\n            x1 = optimizedShape.x1;\n            y1 = optimizedShape.y1;\n            x2 = optimizedShape.x2;\n            y2 = optimizedShape.y2;\n        }\n        else {\n            x1 = shape.x1;\n            y1 = shape.y1;\n            x2 = shape.x2;\n            y2 = shape.y2;\n        }\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (percent < 1) {\n            x2 = x1 * (1 - percent) + x2 * percent;\n            y2 = y1 * (1 - percent) + y2 * percent;\n        }\n        ctx.lineTo(x2, y2);\n    };\n    Line.prototype.pointAt = function (p) {\n        var shape = this.shape;\n        return [\n            shape.x1 * (1 - p) + shape.x2 * p,\n            shape.y1 * (1 - p) + shape.y2 * p\n        ];\n    };\n    return Line;\n}(Path));\nLine.prototype.type = 'line';\nexport default Line;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nimport * as vec2 from '../../core/vector.js';\nimport { quadraticSubdivide, cubicSubdivide, quadraticAt, cubicAt, quadraticDerivativeAt, cubicDerivativeAt } from '../../core/curve.js';\nvar out = [];\nvar BezierCurveShape = (function () {\n    function BezierCurveShape() {\n        this.x1 = 0;\n        this.y1 = 0;\n        this.x2 = 0;\n        this.y2 = 0;\n        this.cpx1 = 0;\n        this.cpy1 = 0;\n        this.percent = 1;\n    }\n    return BezierCurveShape;\n}());\nexport { BezierCurveShape };\nfunction someVectorAt(shape, t, isTangent) {\n    var cpx2 = shape.cpx2;\n    var cpy2 = shape.cpy2;\n    if (cpx2 != null || cpy2 != null) {\n        return [\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.x1, shape.cpx1, shape.cpx2, shape.x2, t),\n            (isTangent ? cubicDerivativeAt : cubicAt)(shape.y1, shape.cpy1, shape.cpy2, shape.y2, t)\n        ];\n    }\n    else {\n        return [\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.x1, shape.cpx1, shape.x2, t),\n            (isTangent ? quadraticDerivativeAt : quadraticAt)(shape.y1, shape.cpy1, shape.y2, t)\n        ];\n    }\n}\nvar BezierCurve = (function (_super) {\n    __extends(BezierCurve, _super);\n    function BezierCurve(opts) {\n        return _super.call(this, opts) || this;\n    }\n    BezierCurve.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    BezierCurve.prototype.getDefaultShape = function () {\n        return new BezierCurveShape();\n    };\n    BezierCurve.prototype.buildPath = function (ctx, shape) {\n        var x1 = shape.x1;\n        var y1 = shape.y1;\n        var x2 = shape.x2;\n        var y2 = shape.y2;\n        var cpx1 = shape.cpx1;\n        var cpy1 = shape.cpy1;\n        var cpx2 = shape.cpx2;\n        var cpy2 = shape.cpy2;\n        var percent = shape.percent;\n        if (percent === 0) {\n            return;\n        }\n        ctx.moveTo(x1, y1);\n        if (cpx2 == null || cpy2 == null) {\n            if (percent < 1) {\n                quadraticSubdivide(x1, cpx1, x2, percent, out);\n                cpx1 = out[1];\n                x2 = out[2];\n                quadraticSubdivide(y1, cpy1, y2, percent, out);\n                cpy1 = out[1];\n                y2 = out[2];\n            }\n            ctx.quadraticCurveTo(cpx1, cpy1, x2, y2);\n        }\n        else {\n            if (percent < 1) {\n                cubicSubdivide(x1, cpx1, cpx2, x2, percent, out);\n                cpx1 = out[1];\n                cpx2 = out[2];\n                x2 = out[3];\n                cubicSubdivide(y1, cpy1, cpy2, y2, percent, out);\n                cpy1 = out[1];\n                cpy2 = out[2];\n                y2 = out[3];\n            }\n            ctx.bezierCurveTo(cpx1, cpy1, cpx2, cpy2, x2, y2);\n        }\n    };\n    BezierCurve.prototype.pointAt = function (t) {\n        return someVectorAt(this.shape, t, false);\n    };\n    BezierCurve.prototype.tangentAt = function (t) {\n        var p = someVectorAt(this.shape, t, true);\n        return vec2.normalize(p, p);\n    };\n    return BezierCurve;\n}(Path));\n;\nBezierCurve.prototype.type = 'bezier-curve';\nexport default BezierCurve;\n","import { __extends } from \"tslib\";\nimport Path from '../Path.js';\nvar ArcShape = (function () {\n    function ArcShape() {\n        this.cx = 0;\n        this.cy = 0;\n        this.r = 0;\n        this.startAngle = 0;\n        this.endAngle = Math.PI * 2;\n        this.clockwise = true;\n    }\n    return ArcShape;\n}());\nexport { ArcShape };\nvar Arc = (function (_super) {\n    __extends(Arc, _super);\n    function Arc(opts) {\n        return _super.call(this, opts) || this;\n    }\n    Arc.prototype.getDefaultStyle = function () {\n        return {\n            stroke: '#000',\n            fill: null\n        };\n    };\n    Arc.prototype.getDefaultShape = function () {\n        return new ArcShape();\n    };\n    Arc.prototype.buildPath = function (ctx, shape) {\n        var x = shape.cx;\n        var y = shape.cy;\n        var r = Math.max(shape.r, 0);\n        var startAngle = shape.startAngle;\n        var endAngle = shape.endAngle;\n        var clockwise = shape.clockwise;\n        var unitX = Math.cos(startAngle);\n        var unitY = Math.sin(startAngle);\n        ctx.moveTo(unitX * r + x, unitY * r + y);\n        ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    };\n    return Arc;\n}(Path));\nArc.prototype.type = 'arc';\nexport default Arc;\n","import { __extends } from \"tslib\";\nimport Path from './Path.js';\nvar CompoundPath = (function (_super) {\n    __extends(CompoundPath, _super);\n    function CompoundPath() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'compound';\n        return _this;\n    }\n    CompoundPath.prototype._updatePathDirty = function () {\n        var paths = this.shape.paths;\n        var dirtyPath = this.shapeChanged();\n        for (var i = 0; i < paths.length; i++) {\n            dirtyPath = dirtyPath || paths[i].shapeChanged();\n        }\n        if (dirtyPath) {\n            this.dirtyShape();\n        }\n    };\n    CompoundPath.prototype.beforeBrush = function () {\n        this._updatePathDirty();\n        var paths = this.shape.paths || [];\n        var scale = this.getGlobalScale();\n        for (var i = 0; i < paths.length; i++) {\n            if (!paths[i].path) {\n                paths[i].createPathProxy();\n            }\n            paths[i].path.setScale(scale[0], scale[1], paths[i].segmentIgnoreThreshold);\n        }\n    };\n    CompoundPath.prototype.buildPath = function (ctx, shape) {\n        var paths = shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].buildPath(ctx, paths[i].shape, true);\n        }\n    };\n    CompoundPath.prototype.afterBrush = function () {\n        var paths = this.shape.paths || [];\n        for (var i = 0; i < paths.length; i++) {\n            paths[i].pathUpdated();\n        }\n    };\n    CompoundPath.prototype.getBoundingRect = function () {\n        this._updatePathDirty.call(this);\n        return Path.prototype.getBoundingRect.call(this);\n    };\n    return CompoundPath;\n}(Path));\nexport default CompoundPath;\n","var Gradient = (function () {\n    function Gradient(colorStops) {\n        this.colorStops = colorStops || [];\n    }\n    Gradient.prototype.addColorStop = function (offset, color) {\n        this.colorStops.push({\n            offset: offset,\n            color: color\n        });\n    };\n    return Gradient;\n}());\nexport default Gradient;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar LinearGradient = (function (_super) {\n    __extends(LinearGradient, _super);\n    function LinearGradient(x, y, x2, y2, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0 : x;\n        _this.y = y == null ? 0 : y;\n        _this.x2 = x2 == null ? 1 : x2;\n        _this.y2 = y2 == null ? 0 : y2;\n        _this.type = 'linear';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return LinearGradient;\n}(Gradient));\nexport default LinearGradient;\n;\n","import { __extends } from \"tslib\";\nimport Gradient from './Gradient.js';\nvar RadialGradient = (function (_super) {\n    __extends(RadialGradient, _super);\n    function RadialGradient(x, y, r, colorStops, globalCoord) {\n        var _this = _super.call(this, colorStops) || this;\n        _this.x = x == null ? 0.5 : x;\n        _this.y = y == null ? 0.5 : y;\n        _this.r = r == null ? 0.5 : r;\n        _this.type = 'radial';\n        _this.global = globalCoord || false;\n        return _this;\n    }\n    return RadialGradient;\n}(Gradient));\nexport default RadialGradient;\n","import Point from './Point.js';\nvar extent = [0, 0];\nvar extent2 = [0, 0];\nvar minTv = new Point();\nvar maxTv = new Point();\nvar OrientedBoundingRect = (function () {\n    function OrientedBoundingRect(rect, transform) {\n        this._corners = [];\n        this._axes = [];\n        this._origin = [0, 0];\n        for (var i = 0; i < 4; i++) {\n            this._corners[i] = new Point();\n        }\n        for (var i = 0; i < 2; i++) {\n            this._axes[i] = new Point();\n        }\n        if (rect) {\n            this.fromBoundingRect(rect, transform);\n        }\n    }\n    OrientedBoundingRect.prototype.fromBoundingRect = function (rect, transform) {\n        var corners = this._corners;\n        var axes = this._axes;\n        var x = rect.x;\n        var y = rect.y;\n        var x2 = x + rect.width;\n        var y2 = y + rect.height;\n        corners[0].set(x, y);\n        corners[1].set(x2, y);\n        corners[2].set(x2, y2);\n        corners[3].set(x, y2);\n        if (transform) {\n            for (var i = 0; i < 4; i++) {\n                corners[i].transform(transform);\n            }\n        }\n        Point.sub(axes[0], corners[1], corners[0]);\n        Point.sub(axes[1], corners[3], corners[0]);\n        axes[0].normalize();\n        axes[1].normalize();\n        for (var i = 0; i < 2; i++) {\n            this._origin[i] = axes[i].dot(corners[0]);\n        }\n    };\n    OrientedBoundingRect.prototype.intersect = function (other, mtv) {\n        var overlapped = true;\n        var noMtv = !mtv;\n        minTv.set(Infinity, Infinity);\n        maxTv.set(0, 0);\n        if (!this._intersectCheckOneSide(this, other, minTv, maxTv, noMtv, 1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!this._intersectCheckOneSide(other, this, minTv, maxTv, noMtv, -1)) {\n            overlapped = false;\n            if (noMtv) {\n                return overlapped;\n            }\n        }\n        if (!noMtv) {\n            Point.copy(mtv, overlapped ? minTv : maxTv);\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._intersectCheckOneSide = function (self, other, minTv, maxTv, noMtv, inverse) {\n        var overlapped = true;\n        for (var i = 0; i < 2; i++) {\n            var axis = this._axes[i];\n            this._getProjMinMaxOnAxis(i, self._corners, extent);\n            this._getProjMinMaxOnAxis(i, other._corners, extent2);\n            if (extent[1] < extent2[0] || extent[0] > extent2[1]) {\n                overlapped = false;\n                if (noMtv) {\n                    return overlapped;\n                }\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) > maxTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(maxTv, axis, -dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(maxTv, axis, dist1 * inverse);\n                    }\n                }\n            }\n            else if (minTv) {\n                var dist0 = Math.abs(extent2[0] - extent[1]);\n                var dist1 = Math.abs(extent[0] - extent2[1]);\n                if (Math.min(dist0, dist1) < minTv.len()) {\n                    if (dist0 < dist1) {\n                        Point.scale(minTv, axis, dist0 * inverse);\n                    }\n                    else {\n                        Point.scale(minTv, axis, -dist1 * inverse);\n                    }\n                }\n            }\n        }\n        return overlapped;\n    };\n    OrientedBoundingRect.prototype._getProjMinMaxOnAxis = function (dim, corners, out) {\n        var axis = this._axes[dim];\n        var origin = this._origin;\n        var proj = corners[0].dot(axis) + origin[dim];\n        var min = proj;\n        var max = proj;\n        for (var i = 1; i < corners.length; i++) {\n            var proj_1 = corners[i].dot(axis) + origin[dim];\n            min = Math.min(proj_1, min);\n            max = Math.max(proj_1, max);\n        }\n        out[0] = min;\n        out[1] = max;\n    };\n    return OrientedBoundingRect;\n}());\nexport default OrientedBoundingRect;\n","import { __extends } from \"tslib\";\nimport Displayble from './Displayable.js';\nimport BoundingRect from '../core/BoundingRect.js';\nvar m = [];\nvar IncrementalDisplayable = (function (_super) {\n    __extends(IncrementalDisplayable, _super);\n    function IncrementalDisplayable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.notClear = true;\n        _this.incremental = true;\n        _this._displayables = [];\n        _this._temporaryDisplayables = [];\n        _this._cursor = 0;\n        return _this;\n    }\n    IncrementalDisplayable.prototype.traverse = function (cb, context) {\n        cb.call(context, this);\n    };\n    IncrementalDisplayable.prototype.useStyle = function () {\n        this.style = {};\n    };\n    IncrementalDisplayable.prototype.getCursor = function () {\n        return this._cursor;\n    };\n    IncrementalDisplayable.prototype.innerAfterBrush = function () {\n        this._cursor = this._displayables.length;\n    };\n    IncrementalDisplayable.prototype.clearDisplaybles = function () {\n        this._displayables = [];\n        this._temporaryDisplayables = [];\n        this._cursor = 0;\n        this.markRedraw();\n        this.notClear = false;\n    };\n    IncrementalDisplayable.prototype.clearTemporalDisplayables = function () {\n        this._temporaryDisplayables = [];\n    };\n    IncrementalDisplayable.prototype.addDisplayable = function (displayable, notPersistent) {\n        if (notPersistent) {\n            this._temporaryDisplayables.push(displayable);\n        }\n        else {\n            this._displayables.push(displayable);\n        }\n        this.markRedraw();\n    };\n    IncrementalDisplayable.prototype.addDisplayables = function (displayables, notPersistent) {\n        notPersistent = notPersistent || false;\n        for (var i = 0; i < displayables.length; i++) {\n            this.addDisplayable(displayables[i], notPersistent);\n        }\n    };\n    IncrementalDisplayable.prototype.getDisplayables = function () {\n        return this._displayables;\n    };\n    IncrementalDisplayable.prototype.getTemporalDisplayables = function () {\n        return this._temporaryDisplayables;\n    };\n    IncrementalDisplayable.prototype.eachPendingDisplayable = function (cb) {\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            cb && cb(this._displayables[i]);\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            cb && cb(this._temporaryDisplayables[i]);\n        }\n    };\n    IncrementalDisplayable.prototype.update = function () {\n        this.updateTransform();\n        for (var i = this._cursor; i < this._displayables.length; i++) {\n            var displayable = this._displayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n        for (var i = 0; i < this._temporaryDisplayables.length; i++) {\n            var displayable = this._temporaryDisplayables[i];\n            displayable.parent = this;\n            displayable.update();\n            displayable.parent = null;\n        }\n    };\n    IncrementalDisplayable.prototype.getBoundingRect = function () {\n        if (!this._rect) {\n            var rect = new BoundingRect(Infinity, Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                var childRect = displayable.getBoundingRect().clone();\n                if (displayable.needLocalTransform()) {\n                    childRect.applyTransform(displayable.getLocalTransform(m));\n                }\n                rect.union(childRect);\n            }\n            this._rect = rect;\n        }\n        return this._rect;\n    };\n    IncrementalDisplayable.prototype.contain = function (x, y) {\n        var localPos = this.transformCoordToLocal(x, y);\n        var rect = this.getBoundingRect();\n        if (rect.contain(localPos[0], localPos[1])) {\n            for (var i = 0; i < this._displayables.length; i++) {\n                var displayable = this._displayables[i];\n                if (displayable.contain(x, y)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    return IncrementalDisplayable;\n}(Displayble));\nexport default IncrementalDisplayable;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../util/model.js';\n// Stored properties for further transition.\nexport var transitionStore = makeInner();\n/**\r\n * Return null if animation is disabled.\r\n */\nexport function getAnimationConfig(animationType, animatableModel, dataIndex,\n// Extra opts can override the option in animatable model.\nextraOpts,\n// TODO It's only for pictorial bar now.\nextraDelayParams) {\n  var animationPayload;\n  // Check if there is global animation configuration from dataZoom/resize can override the config in option.\n  // If animation is enabled. Will use this animation config in payload.\n  // If animation is disabled. Just ignore it.\n  if (animatableModel && animatableModel.ecModel) {\n    var updatePayload = animatableModel.ecModel.getUpdatePayload();\n    animationPayload = updatePayload && updatePayload.animation;\n  }\n  var animationEnabled = animatableModel && animatableModel.isAnimationEnabled();\n  var isUpdate = animationType === 'update';\n  if (animationEnabled) {\n    var duration = void 0;\n    var easing = void 0;\n    var delay = void 0;\n    if (extraOpts) {\n      duration = retrieve2(extraOpts.duration, 200);\n      easing = retrieve2(extraOpts.easing, 'cubicOut');\n      delay = 0;\n    } else {\n      duration = animatableModel.getShallow(isUpdate ? 'animationDurationUpdate' : 'animationDuration');\n      easing = animatableModel.getShallow(isUpdate ? 'animationEasingUpdate' : 'animationEasing');\n      delay = animatableModel.getShallow(isUpdate ? 'animationDelayUpdate' : 'animationDelay');\n    }\n    // animation from payload has highest priority.\n    if (animationPayload) {\n      animationPayload.duration != null && (duration = animationPayload.duration);\n      animationPayload.easing != null && (easing = animationPayload.easing);\n      animationPayload.delay != null && (delay = animationPayload.delay);\n    }\n    if (isFunction(delay)) {\n      delay = delay(dataIndex, extraDelayParams);\n    }\n    if (isFunction(duration)) {\n      duration = duration(dataIndex);\n    }\n    var config = {\n      duration: duration || 0,\n      delay: delay,\n      easing: easing\n    };\n    return config;\n  } else {\n    return null;\n  }\n}\nfunction animateOrSetProps(animationType, el, props, animatableModel, dataIndex, cb, during) {\n  var isFrom = false;\n  var removeOpt;\n  if (isFunction(dataIndex)) {\n    during = cb;\n    cb = dataIndex;\n    dataIndex = null;\n  } else if (isObject(dataIndex)) {\n    cb = dataIndex.cb;\n    during = dataIndex.during;\n    isFrom = dataIndex.isFrom;\n    removeOpt = dataIndex.removeOpt;\n    dataIndex = dataIndex.dataIndex;\n  }\n  var isRemove = animationType === 'leave';\n  if (!isRemove) {\n    // Must stop the remove animation.\n    el.stopAnimation('leave');\n  }\n  var animationConfig = getAnimationConfig(animationType, animatableModel, dataIndex, isRemove ? removeOpt || {} : null, animatableModel && animatableModel.getAnimationDelayParams ? animatableModel.getAnimationDelayParams(el, dataIndex) : null);\n  if (animationConfig && animationConfig.duration > 0) {\n    var duration = animationConfig.duration;\n    var animationDelay = animationConfig.delay;\n    var animationEasing = animationConfig.easing;\n    var animateConfig = {\n      duration: duration,\n      delay: animationDelay || 0,\n      easing: animationEasing,\n      done: cb,\n      force: !!cb || !!during,\n      // Set to final state in update/init animation.\n      // So the post processing based on the path shape can be done correctly.\n      setToFinal: !isRemove,\n      scope: animationType,\n      during: during\n    };\n    isFrom ? el.animateFrom(props, animateConfig) : el.animateTo(props, animateConfig);\n  } else {\n    el.stopAnimation();\n    // If `isFrom`, the props is the \"from\" props.\n    !isFrom && el.attr(props);\n    // Call during at least once.\n    during && during(1);\n    cb && cb();\n  }\n}\n/**\r\n * Update graphic element properties with or without animation according to the\r\n * configuration in series.\r\n *\r\n * Caution: this method will stop previous animation.\r\n * So do not use this method to one element twice before\r\n * animation starts, unless you know what you are doing.\r\n * @example\r\n *     graphic.updateProps(el, {\r\n *         position: [100, 100]\r\n *     }, seriesModel, dataIndex, function () { console.log('Animation done!'); });\r\n *     // Or\r\n *     graphic.updateProps(el, {\r\n *         position: [100, 100]\r\n *     }, seriesModel, function () { console.log('Animation done!'); });\r\n */\nfunction updateProps(el, props,\n// TODO: TYPE AnimatableModel\nanimatableModel, dataIndex, cb, during) {\n  animateOrSetProps('update', el, props, animatableModel, dataIndex, cb, during);\n}\nexport { updateProps };\n/**\r\n * Init graphic element properties with or without animation according to the\r\n * configuration in series.\r\n *\r\n * Caution: this method will stop previous animation.\r\n * So do not use this method to one element twice before\r\n * animation starts, unless you know what you are doing.\r\n */\nexport function initProps(el, props, animatableModel, dataIndex, cb, during) {\n  animateOrSetProps('enter', el, props, animatableModel, dataIndex, cb, during);\n}\n/**\r\n * If element is removed.\r\n * It can determine if element is having remove animation.\r\n */\nexport function isElementRemoved(el) {\n  if (!el.__zr) {\n    return true;\n  }\n  for (var i = 0; i < el.animators.length; i++) {\n    var animator = el.animators[i];\n    if (animator.scope === 'leave') {\n      return true;\n    }\n  }\n  return false;\n}\n/**\r\n * Remove graphic element\r\n */\nexport function removeElement(el, props, animatableModel, dataIndex, cb, during) {\n  // Don't do remove animation twice.\n  if (isElementRemoved(el)) {\n    return;\n  }\n  animateOrSetProps('leave', el, props, animatableModel, dataIndex, cb, during);\n}\nfunction fadeOutDisplayable(el, animatableModel, dataIndex, done) {\n  el.removeTextContent();\n  el.removeTextGuideLine();\n  removeElement(el, {\n    style: {\n      opacity: 0\n    }\n  }, animatableModel, dataIndex, done);\n}\nexport function removeElementWithFadeOut(el, animatableModel, dataIndex) {\n  function doRemove() {\n    el.parent && el.parent.remove(el);\n  }\n  // Hide label and labelLine first\n  // TODO Also use fade out animation?\n  if (!el.isGroup) {\n    fadeOutDisplayable(el, animatableModel, dataIndex, doRemove);\n  } else {\n    el.traverse(function (disp) {\n      if (!disp.isGroup) {\n        // Can invoke doRemove multiple times.\n        fadeOutDisplayable(disp, animatableModel, dataIndex, doRemove);\n      }\n    });\n  }\n}\n/**\r\n * Save old style for style transition in universalTransition module.\r\n * It's used when element will be reused in each render.\r\n * For chart like map, heatmap, which will always create new element.\r\n * We don't need to save this because universalTransition can get old style from the old element\r\n */\nexport function saveOldStyle(el) {\n  transitionStore(el).oldStyle = el.style;\n}\nexport function getOldStyle(el) {\n  return transitionStore(el).oldStyle;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as pathTool from 'zrender/lib/tool/path.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as vector from 'zrender/lib/core/vector.js';\nimport Path from 'zrender/lib/graphic/Path.js';\nimport Transformable from 'zrender/lib/core/Transformable.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport Circle from 'zrender/lib/graphic/shape/Circle.js';\nimport Ellipse from 'zrender/lib/graphic/shape/Ellipse.js';\nimport Sector from 'zrender/lib/graphic/shape/Sector.js';\nimport Ring from 'zrender/lib/graphic/shape/Ring.js';\nimport Polygon from 'zrender/lib/graphic/shape/Polygon.js';\nimport Polyline from 'zrender/lib/graphic/shape/Polyline.js';\nimport Rect from 'zrender/lib/graphic/shape/Rect.js';\nimport Line from 'zrender/lib/graphic/shape/Line.js';\nimport BezierCurve from 'zrender/lib/graphic/shape/BezierCurve.js';\nimport Arc from 'zrender/lib/graphic/shape/Arc.js';\nimport CompoundPath from 'zrender/lib/graphic/CompoundPath.js';\nimport LinearGradient from 'zrender/lib/graphic/LinearGradient.js';\nimport RadialGradient from 'zrender/lib/graphic/RadialGradient.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport OrientedBoundingRect from 'zrender/lib/core/OrientedBoundingRect.js';\nimport Point from 'zrender/lib/core/Point.js';\nimport IncrementalDisplayable from 'zrender/lib/graphic/IncrementalDisplayable.js';\nimport * as subPixelOptimizeUtil from 'zrender/lib/graphic/helper/subPixelOptimize.js';\nimport { extend, isArrayLike, map, defaults, isString, keys, each, hasOwn, isArray } from 'zrender/lib/core/util.js';\nimport { getECData } from './innerStore.js';\nimport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved } from '../animation/basicTransition.js';\n/**\r\n * @deprecated export for compatitable reason\r\n */\nexport { updateProps, initProps, removeElement, removeElementWithFadeOut, isElementRemoved };\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar _customShapeMap = {};\n/**\r\n * Extend shape with parameters\r\n */\nexport function extendShape(opts) {\n  return Path.extend(opts);\n}\nvar extendPathFromString = pathTool.extendFromString;\n/**\r\n * Extend path\r\n */\nexport function extendPath(pathData, opts) {\n  return extendPathFromString(pathData, opts);\n}\n/**\r\n * Register a user defined shape.\r\n * The shape class can be fetched by `getShapeClass`\r\n * This method will overwrite the registered shapes, including\r\n * the registered built-in shapes, if using the same `name`.\r\n * The shape can be used in `custom series` and\r\n * `graphic component` by declaring `{type: name}`.\r\n *\r\n * @param name\r\n * @param ShapeClass Can be generated by `extendShape`.\r\n */\nexport function registerShape(name, ShapeClass) {\n  _customShapeMap[name] = ShapeClass;\n}\n/**\r\n * Find shape class registered by `registerShape`. Usually used in\r\n * fetching user defined shape.\r\n *\r\n * [Caution]:\r\n * (1) This method **MUST NOT be used inside echarts !!!**, unless it is prepared\r\n * to use user registered shapes.\r\n * Because the built-in shape (see `getBuiltInShape`) will be registered by\r\n * `registerShape` by default. That enables users to get both built-in\r\n * shapes as well as the shapes belonging to themsleves. But users can overwrite\r\n * the built-in shapes by using names like 'circle', 'rect' via calling\r\n * `registerShape`. So the echarts inner featrues should not fetch shapes from here\r\n * in case that it is overwritten by users, except that some features, like\r\n * `custom series`, `graphic component`, do it deliberately.\r\n *\r\n * (2) In the features like `custom series`, `graphic component`, the user input\r\n * `{tpye: 'xxx'}` does not only specify shapes but also specify other graphic\r\n * elements like `'group'`, `'text'`, `'image'` or event `'path'`. Those names\r\n * are reserved names, that is, if some user registers a shape named `'image'`,\r\n * the shape will not be used. If we intending to add some more reserved names\r\n * in feature, that might bring break changes (disable some existing user shape\r\n * names). But that case probably rarely happens. So we don't make more mechanism\r\n * to resolve this issue here.\r\n *\r\n * @param name\r\n * @return The shape class. If not found, return nothing.\r\n */\nexport function getShapeClass(name) {\n  if (_customShapeMap.hasOwnProperty(name)) {\n    return _customShapeMap[name];\n  }\n}\n/**\r\n * Create a path element from path data string\r\n * @param pathData\r\n * @param opts\r\n * @param rect\r\n * @param layout 'center' or 'cover' default to be cover\r\n */\nexport function makePath(pathData, opts, rect, layout) {\n  var path = pathTool.createFromString(pathData, opts);\n  if (rect) {\n    if (layout === 'center') {\n      rect = centerGraphic(rect, path.getBoundingRect());\n    }\n    resizePath(path, rect);\n  }\n  return path;\n}\n/**\r\n * Create a image element from image url\r\n * @param imageUrl image url\r\n * @param opts options\r\n * @param rect constrain rect\r\n * @param layout 'center' or 'cover'. Default to be 'cover'\r\n */\nexport function makeImage(imageUrl, rect, layout) {\n  var zrImg = new ZRImage({\n    style: {\n      image: imageUrl,\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    onload: function (img) {\n      if (layout === 'center') {\n        var boundingRect = {\n          width: img.width,\n          height: img.height\n        };\n        zrImg.setStyle(centerGraphic(rect, boundingRect));\n      }\n    }\n  });\n  return zrImg;\n}\n/**\r\n * Get position of centered element in bounding box.\r\n *\r\n * @param  rect         element local bounding box\r\n * @param  boundingRect constraint bounding box\r\n * @return element position containing x, y, width, and height\r\n */\nfunction centerGraphic(rect, boundingRect) {\n  // Set rect to center, keep width / height ratio.\n  var aspect = boundingRect.width / boundingRect.height;\n  var width = rect.height * aspect;\n  var height;\n  if (width <= rect.width) {\n    height = rect.height;\n  } else {\n    width = rect.width;\n    height = width / aspect;\n  }\n  var cx = rect.x + rect.width / 2;\n  var cy = rect.y + rect.height / 2;\n  return {\n    x: cx - width / 2,\n    y: cy - height / 2,\n    width: width,\n    height: height\n  };\n}\nexport var mergePath = pathTool.mergePath;\n/**\r\n * Resize a path to fit the rect\r\n * @param path\r\n * @param rect\r\n */\nexport function resizePath(path, rect) {\n  if (!path.applyTransform) {\n    return;\n  }\n  var pathRect = path.getBoundingRect();\n  var m = pathRect.calculateTransform(rect);\n  path.applyTransform(m);\n}\n/**\r\n * Sub pixel optimize line for canvas\r\n */\nexport function subPixelOptimizeLine(shape, lineWidth) {\n  subPixelOptimizeUtil.subPixelOptimizeLine(shape, shape, {\n    lineWidth: lineWidth\n  });\n  return shape;\n}\n/**\r\n * Sub pixel optimize rect for canvas\r\n */\nexport function subPixelOptimizeRect(param) {\n  subPixelOptimizeUtil.subPixelOptimizeRect(param.shape, param.shape, param.style);\n  return param;\n}\n/**\r\n * Sub pixel optimize for canvas\r\n *\r\n * @param position Coordinate, such as x, y\r\n * @param lineWidth Should be nonnegative integer.\r\n * @param positiveOrNegative Default false (negative).\r\n * @return Optimized position.\r\n */\nexport var subPixelOptimize = subPixelOptimizeUtil.subPixelOptimize;\n/**\r\n * Get transform matrix of target (param target),\r\n * in coordinate of its ancestor (param ancestor)\r\n *\r\n * @param target\r\n * @param [ancestor]\r\n */\nexport function getTransform(target, ancestor) {\n  var mat = matrix.identity([]);\n  while (target && target !== ancestor) {\n    matrix.mul(mat, target.getLocalTransform(), mat);\n    target = target.parent;\n  }\n  return mat;\n}\n/**\r\n * Apply transform to an vertex.\r\n * @param target [x, y]\r\n * @param transform Can be:\r\n *      + Transform matrix: like [1, 0, 0, 1, 0, 0]\r\n *      + {position, rotation, scale}, the same as `zrender/Transformable`.\r\n * @param invert Whether use invert matrix.\r\n * @return [x, y]\r\n */\nexport function applyTransform(target, transform, invert) {\n  if (transform && !isArrayLike(transform)) {\n    transform = Transformable.getLocalTransform(transform);\n  }\n  if (invert) {\n    transform = matrix.invert([], transform);\n  }\n  return vector.applyTransform([], target, transform);\n}\n/**\r\n * @param direction 'left' 'right' 'top' 'bottom'\r\n * @param transform Transform matrix: like [1, 0, 0, 1, 0, 0]\r\n * @param invert Whether use invert matrix.\r\n * @return Transformed direction. 'left' 'right' 'top' 'bottom'\r\n */\nexport function transformDirection(direction, transform, invert) {\n  // Pick a base, ensure that transform result will not be (0, 0).\n  var hBase = transform[4] === 0 || transform[5] === 0 || transform[0] === 0 ? 1 : Math.abs(2 * transform[4] / transform[0]);\n  var vBase = transform[4] === 0 || transform[5] === 0 || transform[2] === 0 ? 1 : Math.abs(2 * transform[4] / transform[2]);\n  var vertex = [direction === 'left' ? -hBase : direction === 'right' ? hBase : 0, direction === 'top' ? -vBase : direction === 'bottom' ? vBase : 0];\n  vertex = applyTransform(vertex, transform, invert);\n  return Math.abs(vertex[0]) > Math.abs(vertex[1]) ? vertex[0] > 0 ? 'right' : 'left' : vertex[1] > 0 ? 'bottom' : 'top';\n}\nfunction isNotGroup(el) {\n  return !el.isGroup;\n}\nfunction isPath(el) {\n  return el.shape != null;\n}\n/**\r\n * Apply group transition animation from g1 to g2.\r\n * If no animatableModel, no animation.\r\n */\nexport function groupTransition(g1, g2, animatableModel) {\n  if (!g1 || !g2) {\n    return;\n  }\n  function getElMap(g) {\n    var elMap = {};\n    g.traverse(function (el) {\n      if (isNotGroup(el) && el.anid) {\n        elMap[el.anid] = el;\n      }\n    });\n    return elMap;\n  }\n  function getAnimatableProps(el) {\n    var obj = {\n      x: el.x,\n      y: el.y,\n      rotation: el.rotation\n    };\n    if (isPath(el)) {\n      obj.shape = extend({}, el.shape);\n    }\n    return obj;\n  }\n  var elMap1 = getElMap(g1);\n  g2.traverse(function (el) {\n    if (isNotGroup(el) && el.anid) {\n      var oldEl = elMap1[el.anid];\n      if (oldEl) {\n        var newProp = getAnimatableProps(el);\n        el.attr(getAnimatableProps(oldEl));\n        updateProps(el, newProp, animatableModel, getECData(el).dataIndex);\n      }\n    }\n  });\n}\nexport function clipPointsByRect(points, rect) {\n  // FIXME: This way might be incorrect when graphic clipped by a corner\n  // and when element has a border.\n  return map(points, function (point) {\n    var x = point[0];\n    x = mathMax(x, rect.x);\n    x = mathMin(x, rect.x + rect.width);\n    var y = point[1];\n    y = mathMax(y, rect.y);\n    y = mathMin(y, rect.y + rect.height);\n    return [x, y];\n  });\n}\n/**\r\n * Return a new clipped rect. If rect size are negative, return undefined.\r\n */\nexport function clipRectByRect(targetRect, rect) {\n  var x = mathMax(targetRect.x, rect.x);\n  var x2 = mathMin(targetRect.x + targetRect.width, rect.x + rect.width);\n  var y = mathMax(targetRect.y, rect.y);\n  var y2 = mathMin(targetRect.y + targetRect.height, rect.y + rect.height);\n  // If the total rect is cliped, nothing, including the border,\n  // should be painted. So return undefined.\n  if (x2 >= x && y2 >= y) {\n    return {\n      x: x,\n      y: y,\n      width: x2 - x,\n      height: y2 - y\n    };\n  }\n}\nexport function createIcon(iconStr,\n// Support 'image://' or 'path://' or direct svg path.\nopt, rect) {\n  var innerOpts = extend({\n    rectHover: true\n  }, opt);\n  var style = innerOpts.style = {\n    strokeNoScale: true\n  };\n  rect = rect || {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  };\n  if (iconStr) {\n    return iconStr.indexOf('image://') === 0 ? (style.image = iconStr.slice(8), defaults(style, rect), new ZRImage(innerOpts)) : makePath(iconStr.replace('path://', ''), innerOpts, rect, 'center');\n  }\n}\n/**\r\n * Return `true` if the given line (line `a`) and the given polygon\r\n * are intersect.\r\n * Note that we do not count colinear as intersect here because no\r\n * requirement for that. We could do that if required in future.\r\n */\nexport function linePolygonIntersect(a1x, a1y, a2x, a2y, points) {\n  for (var i = 0, p2 = points[points.length - 1]; i < points.length; i++) {\n    var p = points[i];\n    if (lineLineIntersect(a1x, a1y, a2x, a2y, p[0], p[1], p2[0], p2[1])) {\n      return true;\n    }\n    p2 = p;\n  }\n}\n/**\r\n * Return `true` if the given two lines (line `a` and line `b`)\r\n * are intersect.\r\n * Note that we do not count colinear as intersect here because no\r\n * requirement for that. We could do that if required in future.\r\n */\nexport function lineLineIntersect(a1x, a1y, a2x, a2y, b1x, b1y, b2x, b2y) {\n  // let `vec_m` to be `vec_a2 - vec_a1` and `vec_n` to be `vec_b2 - vec_b1`.\n  var mx = a2x - a1x;\n  var my = a2y - a1y;\n  var nx = b2x - b1x;\n  var ny = b2y - b1y;\n  // `vec_m` and `vec_n` are parallel iff\n  //     existing `k` such that `vec_m = k  vec_n`, equivalent to `vec_m X vec_n = 0`.\n  var nmCrossProduct = crossProduct2d(nx, ny, mx, my);\n  if (nearZero(nmCrossProduct)) {\n    return false;\n  }\n  // `vec_m` and `vec_n` are intersect iff\n  //     existing `p` and `q` in [0, 1] such that `vec_a1 + p * vec_m = vec_b1 + q * vec_n`,\n  //     such that `q = ((vec_a1 - vec_b1) X vec_m) / (vec_n X vec_m)`\n  //           and `p = ((vec_a1 - vec_b1) X vec_n) / (vec_n X vec_m)`.\n  var b1a1x = a1x - b1x;\n  var b1a1y = a1y - b1y;\n  var q = crossProduct2d(b1a1x, b1a1y, mx, my) / nmCrossProduct;\n  if (q < 0 || q > 1) {\n    return false;\n  }\n  var p = crossProduct2d(b1a1x, b1a1y, nx, ny) / nmCrossProduct;\n  if (p < 0 || p > 1) {\n    return false;\n  }\n  return true;\n}\n/**\r\n * Cross product of 2-dimension vector.\r\n */\nfunction crossProduct2d(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\nfunction nearZero(val) {\n  return val <= 1e-6 && val >= -1e-6;\n}\nexport function setTooltipConfig(opt) {\n  var itemTooltipOption = opt.itemTooltipOption;\n  var componentModel = opt.componentModel;\n  var itemName = opt.itemName;\n  var itemTooltipOptionObj = isString(itemTooltipOption) ? {\n    formatter: itemTooltipOption\n  } : itemTooltipOption;\n  var mainType = componentModel.mainType;\n  var componentIndex = componentModel.componentIndex;\n  var formatterParams = {\n    componentType: mainType,\n    name: itemName,\n    $vars: ['name']\n  };\n  formatterParams[mainType + 'Index'] = componentIndex;\n  var formatterParamsExtra = opt.formatterParamsExtra;\n  if (formatterParamsExtra) {\n    each(keys(formatterParamsExtra), function (key) {\n      if (!hasOwn(formatterParams, key)) {\n        formatterParams[key] = formatterParamsExtra[key];\n        formatterParams.$vars.push(key);\n      }\n    });\n  }\n  var ecData = getECData(opt.el);\n  ecData.componentMainType = mainType;\n  ecData.componentIndex = componentIndex;\n  ecData.tooltipConfig = {\n    name: itemName,\n    option: defaults({\n      content: itemName,\n      encodeHTMLContent: true,\n      formatterParams: formatterParams\n    }, itemTooltipOptionObj)\n  };\n}\nfunction traverseElement(el, cb) {\n  var stopped;\n  // TODO\n  // Polyfill for fixing zrender group traverse don't visit it's root issue.\n  if (el.isGroup) {\n    stopped = cb(el);\n  }\n  if (!stopped) {\n    el.traverse(cb);\n  }\n}\nexport function traverseElements(els, cb) {\n  if (els) {\n    if (isArray(els)) {\n      for (var i = 0; i < els.length; i++) {\n        traverseElement(els[i], cb);\n      }\n    } else {\n      traverseElement(els, cb);\n    }\n  }\n}\n// Register built-in shapes. These shapes might be overwritten\n// by users, although we do not recommend that.\nregisterShape('circle', Circle);\nregisterShape('ellipse', Ellipse);\nregisterShape('sector', Sector);\nregisterShape('ring', Ring);\nregisterShape('polygon', Polygon);\nregisterShape('polyline', Polyline);\nregisterShape('rect', Rect);\nregisterShape('line', Line);\nregisterShape('bezierCurve', BezierCurve);\nregisterShape('arc', Arc);\nexport { Group, ZRImage as Image, ZRText as Text, Circle, Ellipse, Sector, Ring, Polygon, Polyline, Rect, Line, BezierCurve, Arc, IncrementalDisplayable, CompoundPath, LinearGradient, RadialGradient, BoundingRect, OrientedBoundingRect, Point, Path };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { isFunction, retrieve2, extend, keys, trim } from 'zrender/lib/core/util.js';\nimport { SPECIAL_STATES, DISPLAY_STATES } from '../util/states.js';\nimport { deprecateReplaceLog } from '../util/log.js';\nimport { makeInner, interpolateRawValues } from '../util/model.js';\nimport { initProps, updateProps } from '../util/graphic.js';\nvar EMPTY_OBJ = {};\nexport function setLabelText(label, labelTexts) {\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var text = labelTexts[stateName];\n    var state = label.ensureState(stateName);\n    state.style = state.style || {};\n    state.style.text = text;\n  }\n  var oldStates = label.currentStates.slice();\n  label.clearStates(true);\n  label.setStyle({\n    text: labelTexts.normal\n  });\n  label.useStates(oldStates, true);\n}\nfunction getLabelText(opt, stateModels, interpolatedValue) {\n  var labelFetcher = opt.labelFetcher;\n  var labelDataIndex = opt.labelDataIndex;\n  var labelDimIndex = opt.labelDimIndex;\n  var normalModel = stateModels.normal;\n  var baseText;\n  if (labelFetcher) {\n    baseText = labelFetcher.getFormattedLabel(labelDataIndex, 'normal', null, labelDimIndex, normalModel && normalModel.get('formatter'), interpolatedValue != null ? {\n      interpolatedValue: interpolatedValue\n    } : null);\n  }\n  if (baseText == null) {\n    baseText = isFunction(opt.defaultText) ? opt.defaultText(labelDataIndex, opt, interpolatedValue) : opt.defaultText;\n  }\n  var statesText = {\n    normal: baseText\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    var stateModel = stateModels[stateName];\n    statesText[stateName] = retrieve2(labelFetcher ? labelFetcher.getFormattedLabel(labelDataIndex, stateName, null, labelDimIndex, stateModel && stateModel.get('formatter')) : null, baseText);\n  }\n  return statesText;\n}\nfunction setLabelStyle(targetEl, labelStatesModels, opt, stateSpecified\n// TODO specified position?\n) {\n  opt = opt || EMPTY_OBJ;\n  var isSetOnText = targetEl instanceof ZRText;\n  var needsCreateText = false;\n  for (var i = 0; i < DISPLAY_STATES.length; i++) {\n    var stateModel = labelStatesModels[DISPLAY_STATES[i]];\n    if (stateModel && stateModel.getShallow('show')) {\n      needsCreateText = true;\n      break;\n    }\n  }\n  var textContent = isSetOnText ? targetEl : targetEl.getTextContent();\n  if (needsCreateText) {\n    if (!isSetOnText) {\n      // Reuse the previous\n      if (!textContent) {\n        textContent = new ZRText();\n        targetEl.setTextContent(textContent);\n      }\n      // Use same state proxy\n      if (targetEl.stateProxy) {\n        textContent.stateProxy = targetEl.stateProxy;\n      }\n    }\n    var labelStatesTexts = getLabelText(opt, labelStatesModels);\n    var normalModel = labelStatesModels.normal;\n    var showNormal = !!normalModel.getShallow('show');\n    var normalStyle = createTextStyle(normalModel, stateSpecified && stateSpecified.normal, opt, false, !isSetOnText);\n    normalStyle.text = labelStatesTexts.normal;\n    if (!isSetOnText) {\n      // Always create new\n      targetEl.setTextConfig(createTextConfig(normalModel, opt, false));\n    }\n    for (var i = 0; i < SPECIAL_STATES.length; i++) {\n      var stateName = SPECIAL_STATES[i];\n      var stateModel = labelStatesModels[stateName];\n      if (stateModel) {\n        var stateObj = textContent.ensureState(stateName);\n        var stateShow = !!retrieve2(stateModel.getShallow('show'), showNormal);\n        if (stateShow !== showNormal) {\n          stateObj.ignore = !stateShow;\n        }\n        stateObj.style = createTextStyle(stateModel, stateSpecified && stateSpecified[stateName], opt, true, !isSetOnText);\n        stateObj.style.text = labelStatesTexts[stateName];\n        if (!isSetOnText) {\n          var targetElEmphasisState = targetEl.ensureState(stateName);\n          targetElEmphasisState.textConfig = createTextConfig(stateModel, opt, true);\n        }\n      }\n    }\n    // PENDING: if there is many requirements that emphasis position\n    // need to be different from normal position, we might consider\n    // auto silent is those cases.\n    textContent.silent = !!normalModel.getShallow('silent');\n    // Keep x and y\n    if (textContent.style.x != null) {\n      normalStyle.x = textContent.style.x;\n    }\n    if (textContent.style.y != null) {\n      normalStyle.y = textContent.style.y;\n    }\n    textContent.ignore = !showNormal;\n    // Always create new style.\n    textContent.useStyle(normalStyle);\n    textContent.dirty();\n    if (opt.enableTextSetter) {\n      labelInner(textContent).setLabelText = function (interpolatedValue) {\n        var labelStatesTexts = getLabelText(opt, labelStatesModels, interpolatedValue);\n        setLabelText(textContent, labelStatesTexts);\n      };\n    }\n  } else if (textContent) {\n    // Not display rich text.\n    textContent.ignore = true;\n  }\n  targetEl.dirty();\n}\nexport { setLabelStyle };\nexport function getLabelStatesModels(itemModel, labelName) {\n  labelName = labelName || 'label';\n  var statesModels = {\n    normal: itemModel.getModel(labelName)\n  };\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    var stateName = SPECIAL_STATES[i];\n    statesModels[stateName] = itemModel.getModel([stateName, labelName]);\n  }\n  return statesModels;\n}\n/**\r\n * Set basic textStyle properties.\r\n */\nexport function createTextStyle(textStyleModel, specifiedTextStyle,\n// Fixed style in the code. Can't be set by model.\nopt, isNotNormal, isAttached // If text is attached on an element. If so, auto color will handling in zrender.\n) {\n  var textStyle = {};\n  setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached);\n  specifiedTextStyle && extend(textStyle, specifiedTextStyle);\n  // textStyle.host && textStyle.host.dirty && textStyle.host.dirty(false);\n  return textStyle;\n}\nexport function createTextConfig(textStyleModel, opt, isNotNormal) {\n  opt = opt || {};\n  var textConfig = {};\n  var labelPosition;\n  var labelRotate = textStyleModel.getShallow('rotate');\n  var labelDistance = retrieve2(textStyleModel.getShallow('distance'), isNotNormal ? null : 5);\n  var labelOffset = textStyleModel.getShallow('offset');\n  labelPosition = textStyleModel.getShallow('position') || (isNotNormal ? null : 'inside');\n  // 'outside' is not a valid zr textPostion value, but used\n  // in bar series, and magric type should be considered.\n  labelPosition === 'outside' && (labelPosition = opt.defaultOutsidePosition || 'top');\n  if (labelPosition != null) {\n    textConfig.position = labelPosition;\n  }\n  if (labelOffset != null) {\n    textConfig.offset = labelOffset;\n  }\n  if (labelRotate != null) {\n    labelRotate *= Math.PI / 180;\n    textConfig.rotation = labelRotate;\n  }\n  if (labelDistance != null) {\n    textConfig.distance = labelDistance;\n  }\n  // fill and auto is determined by the color of path fill if it's not specified by developers.\n  textConfig.outsideFill = textStyleModel.get('color') === 'inherit' ? opt.inheritColor || null : 'auto';\n  return textConfig;\n}\n/**\r\n * The uniform entry of set text style, that is, retrieve style definitions\r\n * from `model` and set to `textStyle` object.\r\n *\r\n * Never in merge mode, but in overwrite mode, that is, all of the text style\r\n * properties will be set. (Consider the states of normal and emphasis and\r\n * default value can be adopted, merge would make the logic too complicated\r\n * to manage.)\r\n */\nfunction setTextStyleCommon(textStyle, textStyleModel, opt, isNotNormal, isAttached) {\n  // Consider there will be abnormal when merge hover style to normal style if given default value.\n  opt = opt || EMPTY_OBJ;\n  var ecModel = textStyleModel.ecModel;\n  var globalTextStyle = ecModel && ecModel.option.textStyle;\n  // Consider case:\n  // {\n  //     data: [{\n  //         value: 12,\n  //         label: {\n  //             rich: {\n  //                 // no 'a' here but using parent 'a'.\n  //             }\n  //         }\n  //     }],\n  //     rich: {\n  //         a: { ... }\n  //     }\n  // }\n  var richItemNames = getRichItemNames(textStyleModel);\n  var richResult;\n  if (richItemNames) {\n    richResult = {};\n    for (var name_1 in richItemNames) {\n      if (richItemNames.hasOwnProperty(name_1)) {\n        // Cascade is supported in rich.\n        var richTextStyle = textStyleModel.getModel(['rich', name_1]);\n        // In rich, never `disableBox`.\n        // FIXME: consider `label: {formatter: '{a|xx}', color: 'blue', rich: {a: {}}}`,\n        // the default color `'blue'` will not be adopted if no color declared in `rich`.\n        // That might confuses users. So probably we should put `textStyleModel` as the\n        // root ancestor of the `richTextStyle`. But that would be a break change.\n        setTokenTextStyle(richResult[name_1] = {}, richTextStyle, globalTextStyle, opt, isNotNormal, isAttached, false, true);\n      }\n    }\n  }\n  if (richResult) {\n    textStyle.rich = richResult;\n  }\n  var overflow = textStyleModel.get('overflow');\n  if (overflow) {\n    textStyle.overflow = overflow;\n  }\n  var margin = textStyleModel.get('minMargin');\n  if (margin != null) {\n    textStyle.margin = margin;\n  }\n  setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, true, false);\n}\n// Consider case:\n// {\n//     data: [{\n//         value: 12,\n//         label: {\n//             rich: {\n//                 // no 'a' here but using parent 'a'.\n//             }\n//         }\n//     }],\n//     rich: {\n//         a: { ... }\n//     }\n// }\n// TODO TextStyleModel\nfunction getRichItemNames(textStyleModel) {\n  // Use object to remove duplicated names.\n  var richItemNameMap;\n  while (textStyleModel && textStyleModel !== textStyleModel.ecModel) {\n    var rich = (textStyleModel.option || EMPTY_OBJ).rich;\n    if (rich) {\n      richItemNameMap = richItemNameMap || {};\n      var richKeys = keys(rich);\n      for (var i = 0; i < richKeys.length; i++) {\n        var richKey = richKeys[i];\n        richItemNameMap[richKey] = 1;\n      }\n    }\n    textStyleModel = textStyleModel.parentModel;\n  }\n  return richItemNameMap;\n}\nvar TEXT_PROPS_WITH_GLOBAL = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'];\nvar TEXT_PROPS_SELF = ['align', 'lineHeight', 'width', 'height', 'tag', 'verticalAlign', 'ellipsis'];\nvar TEXT_PROPS_BOX = ['padding', 'borderWidth', 'borderRadius', 'borderDashOffset', 'backgroundColor', 'borderColor', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nfunction setTokenTextStyle(textStyle, textStyleModel, globalTextStyle, opt, isNotNormal, isAttached, isBlock, inRich) {\n  // In merge mode, default value should not be given.\n  globalTextStyle = !isNotNormal && globalTextStyle || EMPTY_OBJ;\n  var inheritColor = opt && opt.inheritColor;\n  var fillColor = textStyleModel.getShallow('color');\n  var strokeColor = textStyleModel.getShallow('textBorderColor');\n  var opacity = retrieve2(textStyleModel.getShallow('opacity'), globalTextStyle.opacity);\n  if (fillColor === 'inherit' || fillColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (fillColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      fillColor = inheritColor;\n    } else {\n      fillColor = null;\n    }\n  }\n  if (strokeColor === 'inherit' || strokeColor === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      if (strokeColor === 'auto') {\n        deprecateReplaceLog('color: \\'auto\\'', 'color: \\'inherit\\'');\n      }\n    }\n    if (inheritColor) {\n      strokeColor = inheritColor;\n    } else {\n      strokeColor = null;\n    }\n  }\n  if (!isAttached) {\n    // Only use default global textStyle.color if text is individual.\n    // Otherwise it will use the strategy of attached text color because text may be on a path.\n    fillColor = fillColor || globalTextStyle.color;\n    strokeColor = strokeColor || globalTextStyle.textBorderColor;\n  }\n  if (fillColor != null) {\n    textStyle.fill = fillColor;\n  }\n  if (strokeColor != null) {\n    textStyle.stroke = strokeColor;\n  }\n  var textBorderWidth = retrieve2(textStyleModel.getShallow('textBorderWidth'), globalTextStyle.textBorderWidth);\n  if (textBorderWidth != null) {\n    textStyle.lineWidth = textBorderWidth;\n  }\n  var textBorderType = retrieve2(textStyleModel.getShallow('textBorderType'), globalTextStyle.textBorderType);\n  if (textBorderType != null) {\n    textStyle.lineDash = textBorderType;\n  }\n  var textBorderDashOffset = retrieve2(textStyleModel.getShallow('textBorderDashOffset'), globalTextStyle.textBorderDashOffset);\n  if (textBorderDashOffset != null) {\n    textStyle.lineDashOffset = textBorderDashOffset;\n  }\n  if (!isNotNormal && opacity == null && !inRich) {\n    opacity = opt && opt.defaultOpacity;\n  }\n  if (opacity != null) {\n    textStyle.opacity = opacity;\n  }\n  // TODO\n  if (!isNotNormal && !isAttached) {\n    // Set default finally.\n    if (textStyle.fill == null && opt.inheritColor) {\n      textStyle.fill = opt.inheritColor;\n    }\n  }\n  // Do not use `getFont` here, because merge should be supported, where\n  // part of these properties may be changed in emphasis style, and the\n  // others should remain their original value got from normal style.\n  for (var i = 0; i < TEXT_PROPS_WITH_GLOBAL.length; i++) {\n    var key = TEXT_PROPS_WITH_GLOBAL[i];\n    var val = retrieve2(textStyleModel.getShallow(key), globalTextStyle[key]);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  for (var i = 0; i < TEXT_PROPS_SELF.length; i++) {\n    var key = TEXT_PROPS_SELF[i];\n    var val = textStyleModel.getShallow(key);\n    if (val != null) {\n      textStyle[key] = val;\n    }\n  }\n  if (textStyle.verticalAlign == null) {\n    var baseline = textStyleModel.getShallow('baseline');\n    if (baseline != null) {\n      textStyle.verticalAlign = baseline;\n    }\n  }\n  if (!isBlock || !opt.disableBox) {\n    for (var i = 0; i < TEXT_PROPS_BOX.length; i++) {\n      var key = TEXT_PROPS_BOX[i];\n      var val = textStyleModel.getShallow(key);\n      if (val != null) {\n        textStyle[key] = val;\n      }\n    }\n    var borderType = textStyleModel.getShallow('borderType');\n    if (borderType != null) {\n      textStyle.borderDash = borderType;\n    }\n    if ((textStyle.backgroundColor === 'auto' || textStyle.backgroundColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.backgroundColor === 'auto') {\n          deprecateReplaceLog('backgroundColor: \\'auto\\'', 'backgroundColor: \\'inherit\\'');\n        }\n      }\n      textStyle.backgroundColor = inheritColor;\n    }\n    if ((textStyle.borderColor === 'auto' || textStyle.borderColor === 'inherit') && inheritColor) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (textStyle.borderColor === 'auto') {\n          deprecateReplaceLog('borderColor: \\'auto\\'', 'borderColor: \\'inherit\\'');\n        }\n      }\n      textStyle.borderColor = inheritColor;\n    }\n  }\n}\nexport function getFont(opt, ecModel) {\n  var gTextStyleModel = ecModel && ecModel.getModel('textStyle');\n  return trim([\n  // FIXME in node-canvas fontWeight is before fontStyle\n  opt.fontStyle || gTextStyleModel && gTextStyleModel.getShallow('fontStyle') || '', opt.fontWeight || gTextStyleModel && gTextStyleModel.getShallow('fontWeight') || '', (opt.fontSize || gTextStyleModel && gTextStyleModel.getShallow('fontSize') || 12) + 'px', opt.fontFamily || gTextStyleModel && gTextStyleModel.getShallow('fontFamily') || 'sans-serif'].join(' '));\n}\nexport var labelInner = makeInner();\nexport function setLabelValueAnimation(label, labelStatesModels, value, getDefaultText) {\n  if (!label) {\n    return;\n  }\n  var obj = labelInner(label);\n  obj.prevValue = obj.value;\n  obj.value = value;\n  var normalLabelModel = labelStatesModels.normal;\n  obj.valueAnimation = normalLabelModel.get('valueAnimation');\n  if (obj.valueAnimation) {\n    obj.precision = normalLabelModel.get('precision');\n    obj.defaultInterpolatedText = getDefaultText;\n    obj.statesModels = labelStatesModels;\n  }\n}\nexport function animateLabelValue(textEl, dataIndex, data, animatableModel, labelFetcher) {\n  var labelInnerStore = labelInner(textEl);\n  if (!labelInnerStore.valueAnimation || labelInnerStore.prevValue === labelInnerStore.value) {\n    // Value not changed, no new label animation\n    return;\n  }\n  var defaultInterpolatedText = labelInnerStore.defaultInterpolatedText;\n  // Consider the case that being animating, do not use the `obj.value`,\n  // Otherwise it will jump to the `obj.value` when this new animation started.\n  var currValue = retrieve2(labelInnerStore.interpolatedValue, labelInnerStore.prevValue);\n  var targetValue = labelInnerStore.value;\n  function during(percent) {\n    var interpolated = interpolateRawValues(data, labelInnerStore.precision, currValue, targetValue, percent);\n    labelInnerStore.interpolatedValue = percent === 1 ? null : interpolated;\n    var labelText = getLabelText({\n      labelDataIndex: dataIndex,\n      labelFetcher: labelFetcher,\n      defaultText: defaultInterpolatedText ? defaultInterpolatedText(interpolated) : interpolated + ''\n    }, labelInnerStore.statesModels, interpolated);\n    setLabelText(textEl, labelText);\n  }\n  textEl.percent = 0;\n  (labelInnerStore.prevValue == null ? initProps : updateProps)(textEl, {\n    // percent is used to prevent animation from being aborted #15916\n    percent: 1\n  }, animatableModel, dataIndex, null, during);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getFont } from '../../label/labelStyle.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nvar PATH_COLOR = ['textStyle', 'color'];\nvar textStyleParams = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'padding', 'lineHeight', 'rich', 'width', 'height', 'overflow'];\n// TODO Performance improvement?\nvar tmpText = new ZRText();\nvar TextStyleMixin = /** @class */function () {\n  function TextStyleMixin() {}\n  /**\r\n   * Get color property or get color from option.textStyle.color\r\n   */\n  // TODO Callback\n  TextStyleMixin.prototype.getTextColor = function (isEmphasis) {\n    var ecModel = this.ecModel;\n    return this.getShallow('color') || (!isEmphasis && ecModel ? ecModel.get(PATH_COLOR) : null);\n  };\n  /**\r\n   * Create font string from fontStyle, fontWeight, fontSize, fontFamily\r\n   * @return {string}\r\n   */\n  TextStyleMixin.prototype.getFont = function () {\n    return getFont({\n      fontStyle: this.getShallow('fontStyle'),\n      fontWeight: this.getShallow('fontWeight'),\n      fontSize: this.getShallow('fontSize'),\n      fontFamily: this.getShallow('fontFamily')\n    }, this.ecModel);\n  };\n  TextStyleMixin.prototype.getTextRect = function (text) {\n    var style = {\n      text: text,\n      verticalAlign: this.getShallow('verticalAlign') || this.getShallow('baseline')\n    };\n    for (var i = 0; i < textStyleParams.length; i++) {\n      style[textStyleParams[i]] = this.getShallow(textStyleParams[i]);\n    }\n    tmpText.useStyle(style);\n    tmpText.update();\n    return tmpText.getBoundingRect();\n  };\n  return TextStyleMixin;\n}();\n;\nexport default TextStyleMixin;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var LINE_STYLE_KEY_MAP = [['lineWidth', 'width'], ['stroke', 'color'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'type'], ['lineDashOffset', 'dashOffset'], ['lineCap', 'cap'], ['lineJoin', 'join'], ['miterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getLineStyle = makeStyleMapper(LINE_STYLE_KEY_MAP);\nvar LineStyleMixin = /** @class */function () {\n  function LineStyleMixin() {}\n  LineStyleMixin.prototype.getLineStyle = function (excludes) {\n    return getLineStyle(this, excludes);\n  };\n  return LineStyleMixin;\n}();\n;\nexport { LineStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport makeStyleMapper from './makeStyleMapper.js';\nexport var ITEM_STYLE_KEY_MAP = [['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor'], ['lineDash', 'borderType'], ['lineDashOffset', 'borderDashOffset'], ['lineCap', 'borderCap'], ['lineJoin', 'borderJoin'], ['miterLimit', 'borderMiterLimit']\n// Option decal is in `DecalObject` but style.decal is in `PatternObject`.\n// So do not transfer decal directly.\n];\nvar getItemStyle = makeStyleMapper(ITEM_STYLE_KEY_MAP);\nvar ItemStyleMixin = /** @class */function () {\n  function ItemStyleMixin() {}\n  ItemStyleMixin.prototype.getItemStyle = function (excludes, includes) {\n    return getItemStyle(this, excludes, includes);\n  };\n  return ItemStyleMixin;\n}();\nexport { ItemStyleMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport env from 'zrender/lib/core/env.js';\nimport { enableClassExtend, enableClassCheck } from '../util/clazz.js';\nimport { AreaStyleMixin } from './mixin/areaStyle.js';\nimport TextStyleMixin from './mixin/textStyle.js';\nimport { LineStyleMixin } from './mixin/lineStyle.js';\nimport { ItemStyleMixin } from './mixin/itemStyle.js';\nimport { mixin, clone, merge } from 'zrender/lib/core/util.js';\nvar Model = /** @class */function () {\n  function Model(option, parentModel, ecModel) {\n    this.parentModel = parentModel;\n    this.ecModel = ecModel;\n    this.option = option;\n    // Simple optimization\n    // if (this.init) {\n    //     if (arguments.length <= 4) {\n    //         this.init(option, parentModel, ecModel, extraOpt);\n    //     }\n    //     else {\n    //         this.init.apply(this, arguments);\n    //     }\n    // }\n  }\n  Model.prototype.init = function (option, parentModel, ecModel) {\n    var rest = [];\n    for (var _i = 3; _i < arguments.length; _i++) {\n      rest[_i - 3] = arguments[_i];\n    }\n  };\n  /**\r\n   * Merge the input option to me.\r\n   */\n  Model.prototype.mergeOption = function (option, ecModel) {\n    merge(this.option, option, true);\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `ModelOption`\n  // TODO: TYPE strict key check?\n  // get(path: string | string[], ignoreParent?: boolean): ModelOption;\n  Model.prototype.get = function (path, ignoreParent) {\n    if (path == null) {\n      return this.option;\n    }\n    return this._doGet(this.parsePath(path), !ignoreParent && this.parentModel);\n  };\n  Model.prototype.getShallow = function (key, ignoreParent) {\n    var option = this.option;\n    var val = option == null ? option : option[key];\n    if (val == null && !ignoreParent) {\n      var parentModel = this.parentModel;\n      if (parentModel) {\n        // FIXME:TS do not know how to make it works\n        val = parentModel.getShallow(key);\n      }\n    }\n    return val;\n  };\n  // `path` can be 'a.b.c', so the return value type have to be `Model<ModelOption>`\n  // getModel(path: string | string[], parentModel?: Model): Model;\n  // TODO 'a.b.c' is deprecated\n  Model.prototype.getModel = function (path, parentModel) {\n    var hasPath = path != null;\n    var pathFinal = hasPath ? this.parsePath(path) : null;\n    var obj = hasPath ? this._doGet(pathFinal) : this.option;\n    parentModel = parentModel || this.parentModel && this.parentModel.getModel(this.resolveParentPath(pathFinal));\n    return new Model(obj, parentModel, this.ecModel);\n  };\n  /**\r\n   * If model has option\r\n   */\n  Model.prototype.isEmpty = function () {\n    return this.option == null;\n  };\n  Model.prototype.restoreData = function () {};\n  // Pending\n  Model.prototype.clone = function () {\n    var Ctor = this.constructor;\n    return new Ctor(clone(this.option));\n  };\n  // setReadOnly(properties): void {\n  // clazzUtil.setReadOnly(this, properties);\n  // }\n  // If path is null/undefined, return null/undefined.\n  Model.prototype.parsePath = function (path) {\n    if (typeof path === 'string') {\n      return path.split('.');\n    }\n    return path;\n  };\n  // Resolve path for parent. Perhaps useful when parent use a different property.\n  // Default to be a identity resolver.\n  // Can be modified to a different resolver.\n  Model.prototype.resolveParentPath = function (path) {\n    return path;\n  };\n  // FIXME:TS check whether put this method here\n  Model.prototype.isAnimationEnabled = function () {\n    if (!env.node && this.option) {\n      if (this.option.animation != null) {\n        return !!this.option.animation;\n      } else if (this.parentModel) {\n        return this.parentModel.isAnimationEnabled();\n      }\n    }\n  };\n  Model.prototype._doGet = function (pathArr, parentModel) {\n    var obj = this.option;\n    if (!pathArr) {\n      return obj;\n    }\n    for (var i = 0; i < pathArr.length; i++) {\n      // Ignore empty\n      if (!pathArr[i]) {\n        continue;\n      }\n      // obj could be number/string/... (like 0)\n      obj = obj && typeof obj === 'object' ? obj[pathArr[i]] : null;\n      if (obj == null) {\n        break;\n      }\n    }\n    if (obj == null && parentModel) {\n      obj = parentModel._doGet(this.resolveParentPath(pathArr), parentModel.parentModel);\n    }\n    return obj;\n  };\n  return Model;\n}();\n;\n// Enable Model.extend.\nenableClassExtend(Model);\nenableClassCheck(Model);\nmixin(Model, LineStyleMixin);\nmixin(Model, ItemStyleMixin);\nmixin(Model, AreaStyleMixin);\nmixin(Model, TextStyleMixin);\nexport default Model;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\nimport { makePrintable } from './log.js';\n// A random offset\nvar base = Math.round(Math.random() * 10);\n/**\r\n * @public\r\n * @param {string} type\r\n * @return {string}\r\n */\nexport function getUID(type) {\n  // Considering the case of crossing js context,\n  // use Math.random to make id as unique as possible.\n  return [type || '', base++].join('_');\n}\n/**\r\n * Implements `SubTypeDefaulterManager` for `target`.\r\n */\nexport function enableSubTypeDefaulter(target) {\n  var subTypeDefaulters = {};\n  target.registerSubTypeDefaulter = function (componentType, defaulter) {\n    var componentTypeInfo = parseClassType(componentType);\n    subTypeDefaulters[componentTypeInfo.main] = defaulter;\n  };\n  target.determineSubType = function (componentType, option) {\n    var type = option.type;\n    if (!type) {\n      var componentTypeMain = parseClassType(componentType).main;\n      if (target.hasSubTypes(componentType) && subTypeDefaulters[componentTypeMain]) {\n        type = subTypeDefaulters[componentTypeMain](option);\n      }\n    }\n    return type;\n  };\n}\n/**\r\n * Implements `TopologicalTravelable<any>` for `entity`.\r\n *\r\n * Topological travel on Activity Network (Activity On Vertices).\r\n * Dependencies is defined in Model.prototype.dependencies, like ['xAxis', 'yAxis'].\r\n * If 'xAxis' or 'yAxis' is absent in componentTypeList, just ignore it in topology.\r\n * If there is circular dependencey, Error will be thrown.\r\n */\nexport function enableTopologicalTravel(entity, dependencyGetter) {\n  /**\r\n   * @param targetNameList Target Component type list.\r\n   *                       Can be ['aa', 'bb', 'aa.xx']\r\n   * @param fullNameList By which we can build dependency graph.\r\n   * @param callback Params: componentType, dependencies.\r\n   * @param context Scope of callback.\r\n   */\n  entity.topologicalTravel = function (targetNameList, fullNameList, callback, context) {\n    if (!targetNameList.length) {\n      return;\n    }\n    var result = makeDepndencyGraph(fullNameList);\n    var graph = result.graph;\n    var noEntryList = result.noEntryList;\n    var targetNameSet = {};\n    zrUtil.each(targetNameList, function (name) {\n      targetNameSet[name] = true;\n    });\n    while (noEntryList.length) {\n      var currComponentType = noEntryList.pop();\n      var currVertex = graph[currComponentType];\n      var isInTargetNameSet = !!targetNameSet[currComponentType];\n      if (isInTargetNameSet) {\n        callback.call(context, currComponentType, currVertex.originalDeps.slice());\n        delete targetNameSet[currComponentType];\n      }\n      zrUtil.each(currVertex.successor, isInTargetNameSet ? removeEdgeAndAdd : removeEdge);\n    }\n    zrUtil.each(targetNameSet, function () {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = makePrintable('Circular dependency may exists: ', targetNameSet, targetNameList, fullNameList);\n      }\n      throw new Error(errMsg);\n    });\n    function removeEdge(succComponentType) {\n      graph[succComponentType].entryCount--;\n      if (graph[succComponentType].entryCount === 0) {\n        noEntryList.push(succComponentType);\n      }\n    }\n    // Consider this case: legend depends on series, and we call\n    // chart.setOption({series: [...]}), where only series is in option.\n    // If we do not have 'removeEdgeAndAdd', legendModel.mergeOption will\n    // not be called, but only sereis.mergeOption is called. Thus legend\n    // have no chance to update its local record about series (like which\n    // name of series is available in legend).\n    function removeEdgeAndAdd(succComponentType) {\n      targetNameSet[succComponentType] = true;\n      removeEdge(succComponentType);\n    }\n  };\n  function makeDepndencyGraph(fullNameList) {\n    var graph = {};\n    var noEntryList = [];\n    zrUtil.each(fullNameList, function (name) {\n      var thisItem = createDependencyGraphItem(graph, name);\n      var originalDeps = thisItem.originalDeps = dependencyGetter(name);\n      var availableDeps = getAvailableDependencies(originalDeps, fullNameList);\n      thisItem.entryCount = availableDeps.length;\n      if (thisItem.entryCount === 0) {\n        noEntryList.push(name);\n      }\n      zrUtil.each(availableDeps, function (dependentName) {\n        if (zrUtil.indexOf(thisItem.predecessor, dependentName) < 0) {\n          thisItem.predecessor.push(dependentName);\n        }\n        var thatItem = createDependencyGraphItem(graph, dependentName);\n        if (zrUtil.indexOf(thatItem.successor, dependentName) < 0) {\n          thatItem.successor.push(name);\n        }\n      });\n    });\n    return {\n      graph: graph,\n      noEntryList: noEntryList\n    };\n  }\n  function createDependencyGraphItem(graph, name) {\n    if (!graph[name]) {\n      graph[name] = {\n        predecessor: [],\n        successor: []\n      };\n    }\n    return graph[name];\n  }\n  function getAvailableDependencies(originalDeps, fullNameList) {\n    var availableDeps = [];\n    zrUtil.each(originalDeps, function (dep) {\n      zrUtil.indexOf(fullNameList, dep) >= 0 && availableDeps.push(dep);\n    });\n    return availableDeps;\n  }\n}\nexport function inheritDefaultOption(superOption, subOption) {\n  // See also `model/Component.ts#getDefaultOption`\n  return zrUtil.merge(zrUtil.merge({}, superOption, true), subOption, true);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\n/**\r\n * Language: English.\r\n */\nexport default {\n  time: {\n    month: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthAbbr: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayOfWeek: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayOfWeekAbbr: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n  },\n  legend: {\n    selector: {\n      all: 'All',\n      inverse: 'Inv'\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: 'Box Select',\n        polygon: 'Lasso Select',\n        lineX: 'Horizontally Select',\n        lineY: 'Vertically Select',\n        keep: 'Keep Selections',\n        clear: 'Clear Selections'\n      }\n    },\n    dataView: {\n      title: 'Data View',\n      lang: ['Data View', 'Close', 'Refresh']\n    },\n    dataZoom: {\n      title: {\n        zoom: 'Zoom',\n        back: 'Zoom Reset'\n      }\n    },\n    magicType: {\n      title: {\n        line: 'Switch to Line Chart',\n        bar: 'Switch to Bar Chart',\n        stack: 'Stack',\n        tiled: 'Tile'\n      }\n    },\n    restore: {\n      title: 'Restore'\n    },\n    saveAsImage: {\n      title: 'Save as Image',\n      lang: ['Right Click to Save Image']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: 'Pie chart',\n      bar: 'Bar chart',\n      line: 'Line chart',\n      scatter: 'Scatter plot',\n      effectScatter: 'Ripple scatter plot',\n      radar: 'Radar chart',\n      tree: 'Tree',\n      treemap: 'Treemap',\n      boxplot: 'Boxplot',\n      candlestick: 'Candlestick',\n      k: 'K line chart',\n      heatmap: 'Heat map',\n      map: 'Map',\n      parallel: 'Parallel coordinate map',\n      lines: 'Line graph',\n      graph: 'Relationship graph',\n      sankey: 'Sankey diagram',\n      funnel: 'Funnel chart',\n      gauge: 'Gauge',\n      pictorialBar: 'Pictorial bar',\n      themeRiver: 'Theme River Map',\n      sunburst: 'Sunburst',\n      custom: 'Custom chart',\n      chart: 'Chart'\n    }\n  },\n  aria: {\n    general: {\n      withTitle: 'This is a chart about \"{title}\"',\n      withoutTitle: 'This is a chart'\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: ' with type {seriesType} named {seriesName}.',\n        withoutName: ' with type {seriesType}.'\n      },\n      multiple: {\n        prefix: '. It consists of {seriesCount} series count.',\n        withName: ' The {seriesId} series is a {seriesType} representing {seriesName}.',\n        withoutName: ' The {seriesId} series is a {seriesType}.',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: 'The data is as follows: ',\n      partialData: 'The first {displayCnt} items are: ',\n      withName: 'the data for {name} is {value}',\n      withoutName: '{value}',\n      separator: {\n        middle: ', ',\n        end: '. '\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n * Licensed to the Apache Software Foundation (ASF) under one\r\n * or more contributor license agreements.  See the NOTICE file\r\n * distributed with this work for additional information\r\n * regarding copyright ownership.  The ASF licenses this file\r\n * to you under the Apache License, Version 2.0 (the\r\n * \"License\"); you may not use this file except in compliance\r\n * with the License.  You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing,\r\n * software distributed under the License is distributed on an\r\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n * KIND, either express or implied.  See the License for the\r\n * specific language governing permissions and limitations\r\n * under the License.\r\n */\nexport default {\n  time: {\n    month: ['', '', '', '', '', '', '', '', '', '', '', ''],\n    monthAbbr: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],\n    dayOfWeek: ['', '', '', '', '', '', ''],\n    dayOfWeekAbbr: ['', '', '', '', '', '', '']\n  },\n  legend: {\n    selector: {\n      all: '',\n      inverse: ''\n    }\n  },\n  toolbox: {\n    brush: {\n      title: {\n        rect: '',\n        polygon: '',\n        lineX: '',\n        lineY: '',\n        keep: '',\n        clear: ''\n      }\n    },\n    dataView: {\n      title: '',\n      lang: ['', '', '']\n    },\n    dataZoom: {\n      title: {\n        zoom: '',\n        back: ''\n      }\n    },\n    magicType: {\n      title: {\n        line: '',\n        bar: '',\n        stack: '',\n        tiled: ''\n      }\n    },\n    restore: {\n      title: ''\n    },\n    saveAsImage: {\n      title: '',\n      lang: ['']\n    }\n  },\n  series: {\n    typeNames: {\n      pie: '',\n      bar: '',\n      line: '',\n      scatter: '',\n      effectScatter: '',\n      radar: '',\n      tree: '',\n      treemap: '',\n      boxplot: '',\n      candlestick: 'K',\n      k: 'K',\n      heatmap: '',\n      map: '',\n      parallel: '',\n      lines: '',\n      graph: '',\n      sankey: '',\n      funnel: '',\n      gauge: '',\n      pictorialBar: '',\n      themeRiver: '',\n      sunburst: '',\n      custom: '',\n      chart: ''\n    }\n  },\n  aria: {\n    general: {\n      withTitle: '{title}',\n      withoutTitle: ''\n    },\n    series: {\n      single: {\n        prefix: '',\n        withName: '{seriesType}{seriesName}',\n        withoutName: '{seriesType}'\n      },\n      multiple: {\n        prefix: '{seriesCount}',\n        withName: '{seriesId}{seriesName}{seriesType}',\n        withoutName: '{seriesId}{seriesType}',\n        separator: {\n          middle: '',\n          end: ''\n        }\n      }\n    },\n    data: {\n      allData: '',\n      partialData: '{displayCnt}',\n      withName: '{name}{value}',\n      withoutName: '{value}',\n      separator: {\n        middle: '',\n        end: ''\n      }\n    }\n  }\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Model from '../model/Model.js';\nimport env from 'zrender/lib/core/env.js';\n// default import ZH and EN lang\nimport langEN from '../i18n/langEN.js';\nimport langZH from '../i18n/langZH.js';\nimport { isString, clone, merge } from 'zrender/lib/core/util.js';\nvar LOCALE_ZH = 'ZH';\nvar LOCALE_EN = 'EN';\nvar DEFAULT_LOCALE = LOCALE_EN;\nvar localeStorage = {};\nvar localeModels = {};\nexport var SYSTEM_LANG = !env.domSupported ? DEFAULT_LOCALE : function () {\n  var langStr = (/* eslint-disable-next-line */\n  document.documentElement.lang || navigator.language || navigator.browserLanguage || DEFAULT_LOCALE).toUpperCase();\n  return langStr.indexOf(LOCALE_ZH) > -1 ? LOCALE_ZH : DEFAULT_LOCALE;\n}();\nexport function registerLocale(locale, localeObj) {\n  locale = locale.toUpperCase();\n  localeModels[locale] = new Model(localeObj);\n  localeStorage[locale] = localeObj;\n}\n// export function getLocale(locale: string) {\n//     return localeStorage[locale];\n// }\nexport function createLocaleObject(locale) {\n  if (isString(locale)) {\n    var localeObj = localeStorage[locale.toUpperCase()] || {};\n    if (locale === LOCALE_ZH || locale === LOCALE_EN) {\n      return clone(localeObj);\n    } else {\n      return merge(clone(localeObj), clone(localeStorage[DEFAULT_LOCALE]), false);\n    }\n  } else {\n    return merge(clone(locale), clone(localeStorage[DEFAULT_LOCALE]), false);\n  }\n}\nexport function getLocaleModel(lang) {\n  return localeModels[lang];\n}\nexport function getDefaultLocaleModel() {\n  return localeModels[DEFAULT_LOCALE];\n}\n// Default locale\nregisterLocale(LOCALE_EN, langEN);\nregisterLocale(LOCALE_ZH, langZH);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from './number.js';\nimport { getDefaultLocaleModel, getLocaleModel, SYSTEM_LANG } from '../core/locale.js';\nimport Model from '../model/Model.js';\nexport var ONE_SECOND = 1000;\nexport var ONE_MINUTE = ONE_SECOND * 60;\nexport var ONE_HOUR = ONE_MINUTE * 60;\nexport var ONE_DAY = ONE_HOUR * 24;\nexport var ONE_YEAR = ONE_DAY * 365;\nexport var defaultLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{MMM}',\n  day: '{d}',\n  hour: '{HH}:{mm}',\n  minute: '{HH}:{mm}',\n  second: '{HH}:{mm}:{ss}',\n  millisecond: '{HH}:{mm}:{ss} {SSS}',\n  none: '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}'\n};\nvar fullDayFormatter = '{yyyy}-{MM}-{dd}';\nexport var fullLeveledFormatter = {\n  year: '{yyyy}',\n  month: '{yyyy}-{MM}',\n  day: fullDayFormatter,\n  hour: fullDayFormatter + ' ' + defaultLeveledFormatter.hour,\n  minute: fullDayFormatter + ' ' + defaultLeveledFormatter.minute,\n  second: fullDayFormatter + ' ' + defaultLeveledFormatter.second,\n  millisecond: defaultLeveledFormatter.none\n};\nexport var primaryTimeUnits = ['year', 'month', 'day', 'hour', 'minute', 'second', 'millisecond'];\nexport var timeUnits = ['year', 'half-year', 'quarter', 'month', 'week', 'half-week', 'day', 'half-day', 'quarter-day', 'hour', 'minute', 'second', 'millisecond'];\nexport function pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\nexport function getPrimaryTimeUnit(timeUnit) {\n  switch (timeUnit) {\n    case 'half-year':\n    case 'quarter':\n      return 'month';\n    case 'week':\n    case 'half-week':\n      return 'day';\n    case 'half-day':\n    case 'quarter-day':\n      return 'hour';\n    default:\n      // year, minutes, second, milliseconds\n      return timeUnit;\n  }\n}\nexport function isPrimaryTimeUnit(timeUnit) {\n  return timeUnit === getPrimaryTimeUnit(timeUnit);\n}\nexport function getDefaultFormatPrecisionOfInterval(timeUnit) {\n  switch (timeUnit) {\n    case 'year':\n    case 'month':\n      return 'day';\n    case 'millisecond':\n      return 'millisecond';\n    default:\n      // Also for day, hour, minute, second\n      return 'second';\n  }\n}\nexport function format(\n// Note: The result based on `isUTC` are totally different, which can not be just simply\n// substituted by the result without `isUTC`. So we make the param `isUTC` mandatory.\ntime, template, isUTC, lang) {\n  var date = numberUtil.parseDate(time);\n  var y = date[fullYearGetterName(isUTC)]();\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var q = Math.floor((M - 1) / 3) + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var e = date['get' + (isUTC ? 'UTC' : '') + 'Day']();\n  var H = date[hoursGetterName(isUTC)]();\n  var h = (H - 1) % 12 + 1;\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var a = H >= 12 ? 'pm' : 'am';\n  var A = a.toUpperCase();\n  var localeModel = lang instanceof Model ? lang : getLocaleModel(lang || SYSTEM_LANG) || getDefaultLocaleModel();\n  var timeModel = localeModel.getModel('time');\n  var month = timeModel.get('month');\n  var monthAbbr = timeModel.get('monthAbbr');\n  var dayOfWeek = timeModel.get('dayOfWeek');\n  var dayOfWeekAbbr = timeModel.get('dayOfWeekAbbr');\n  return (template || '').replace(/{a}/g, a + '').replace(/{A}/g, A + '').replace(/{yyyy}/g, y + '').replace(/{yy}/g, pad(y % 100 + '', 2)).replace(/{Q}/g, q + '').replace(/{MMMM}/g, month[M - 1]).replace(/{MMM}/g, monthAbbr[M - 1]).replace(/{MM}/g, pad(M, 2)).replace(/{M}/g, M + '').replace(/{dd}/g, pad(d, 2)).replace(/{d}/g, d + '').replace(/{eeee}/g, dayOfWeek[e]).replace(/{ee}/g, dayOfWeekAbbr[e]).replace(/{e}/g, e + '').replace(/{HH}/g, pad(H, 2)).replace(/{H}/g, H + '').replace(/{hh}/g, pad(h + '', 2)).replace(/{h}/g, h + '').replace(/{mm}/g, pad(m, 2)).replace(/{m}/g, m + '').replace(/{ss}/g, pad(s, 2)).replace(/{s}/g, s + '').replace(/{SSS}/g, pad(S, 3)).replace(/{S}/g, S + '');\n}\nexport function leveledFormat(tick, idx, formatter, lang, isUTC) {\n  var template = null;\n  if (zrUtil.isString(formatter)) {\n    // Single formatter for all units at all levels\n    template = formatter;\n  } else if (zrUtil.isFunction(formatter)) {\n    // Callback formatter\n    template = formatter(tick.value, idx, {\n      level: tick.level\n    });\n  } else {\n    var defaults = zrUtil.extend({}, defaultLeveledFormatter);\n    if (tick.level > 0) {\n      for (var i = 0; i < primaryTimeUnits.length; ++i) {\n        defaults[primaryTimeUnits[i]] = \"{primary|\" + defaults[primaryTimeUnits[i]] + \"}\";\n      }\n    }\n    var mergedFormatter = formatter ? formatter.inherit === false ? formatter // Use formatter with bigger units\n    : zrUtil.defaults(formatter, defaults) : defaults;\n    var unit = getUnitFromValue(tick.value, isUTC);\n    if (mergedFormatter[unit]) {\n      template = mergedFormatter[unit];\n    } else if (mergedFormatter.inherit) {\n      // Unit formatter is not defined and should inherit from bigger units\n      var targetId = timeUnits.indexOf(unit);\n      for (var i = targetId - 1; i >= 0; --i) {\n        if (mergedFormatter[unit]) {\n          template = mergedFormatter[unit];\n          break;\n        }\n      }\n      template = template || defaults.none;\n    }\n    if (zrUtil.isArray(template)) {\n      var levelId = tick.level == null ? 0 : tick.level >= 0 ? tick.level : template.length + tick.level;\n      levelId = Math.min(levelId, template.length - 1);\n      template = template[levelId];\n    }\n  }\n  return format(new Date(tick.value), template, isUTC, lang);\n}\nexport function getUnitFromValue(value, isUTC) {\n  var date = numberUtil.parseDate(value);\n  var M = date[monthGetterName(isUTC)]() + 1;\n  var d = date[dateGetterName(isUTC)]();\n  var h = date[hoursGetterName(isUTC)]();\n  var m = date[minutesGetterName(isUTC)]();\n  var s = date[secondsGetterName(isUTC)]();\n  var S = date[millisecondsGetterName(isUTC)]();\n  var isSecond = S === 0;\n  var isMinute = isSecond && s === 0;\n  var isHour = isMinute && m === 0;\n  var isDay = isHour && h === 0;\n  var isMonth = isDay && d === 1;\n  var isYear = isMonth && M === 1;\n  if (isYear) {\n    return 'year';\n  } else if (isMonth) {\n    return 'month';\n  } else if (isDay) {\n    return 'day';\n  } else if (isHour) {\n    return 'hour';\n  } else if (isMinute) {\n    return 'minute';\n  } else if (isSecond) {\n    return 'second';\n  } else {\n    return 'millisecond';\n  }\n}\nexport function getUnitValue(value, unit, isUTC) {\n  var date = zrUtil.isNumber(value) ? numberUtil.parseDate(value) : value;\n  unit = unit || getUnitFromValue(value, isUTC);\n  switch (unit) {\n    case 'year':\n      return date[fullYearGetterName(isUTC)]();\n    case 'half-year':\n      return date[monthGetterName(isUTC)]() >= 6 ? 1 : 0;\n    case 'quarter':\n      return Math.floor((date[monthGetterName(isUTC)]() + 1) / 4);\n    case 'month':\n      return date[monthGetterName(isUTC)]();\n    case 'day':\n      return date[dateGetterName(isUTC)]();\n    case 'half-day':\n      return date[hoursGetterName(isUTC)]() / 24;\n    case 'hour':\n      return date[hoursGetterName(isUTC)]();\n    case 'minute':\n      return date[minutesGetterName(isUTC)]();\n    case 'second':\n      return date[secondsGetterName(isUTC)]();\n    case 'millisecond':\n      return date[millisecondsGetterName(isUTC)]();\n  }\n}\nexport function fullYearGetterName(isUTC) {\n  return isUTC ? 'getUTCFullYear' : 'getFullYear';\n}\nexport function monthGetterName(isUTC) {\n  return isUTC ? 'getUTCMonth' : 'getMonth';\n}\nexport function dateGetterName(isUTC) {\n  return isUTC ? 'getUTCDate' : 'getDate';\n}\nexport function hoursGetterName(isUTC) {\n  return isUTC ? 'getUTCHours' : 'getHours';\n}\nexport function minutesGetterName(isUTC) {\n  return isUTC ? 'getUTCMinutes' : 'getMinutes';\n}\nexport function secondsGetterName(isUTC) {\n  return isUTC ? 'getUTCSeconds' : 'getSeconds';\n}\nexport function millisecondsGetterName(isUTC) {\n  return isUTC ? 'getUTCMilliseconds' : 'getMilliseconds';\n}\nexport function fullYearSetterName(isUTC) {\n  return isUTC ? 'setUTCFullYear' : 'setFullYear';\n}\nexport function monthSetterName(isUTC) {\n  return isUTC ? 'setUTCMonth' : 'setMonth';\n}\nexport function dateSetterName(isUTC) {\n  return isUTC ? 'setUTCDate' : 'setDate';\n}\nexport function hoursSetterName(isUTC) {\n  return isUTC ? 'setUTCHours' : 'setHours';\n}\nexport function minutesSetterName(isUTC) {\n  return isUTC ? 'setUTCMinutes' : 'setMinutes';\n}\nexport function secondsSetterName(isUTC) {\n  return isUTC ? 'setUTCSeconds' : 'setSeconds';\n}\nexport function millisecondsSetterName(isUTC) {\n  return isUTC ? 'setUTCMilliseconds' : 'setMilliseconds';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { encodeHTML } from 'zrender/lib/core/dom.js';\nimport { parseDate, isNumeric, numericToNumber } from './number.js';\nimport { format as timeFormat, pad } from './time.js';\nimport { deprecateReplaceLog } from './log.js';\n/**\r\n * Add a comma each three digit.\r\n */\nexport function addCommas(x) {\n  if (!isNumeric(x)) {\n    return zrUtil.isString(x) ? x : '-';\n  }\n  var parts = (x + '').split('.');\n  return parts[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (parts.length > 1 ? '.' + parts[1] : '');\n}\nexport function toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n  return str;\n}\nexport var normalizeCssArray = zrUtil.normalizeCssArray;\nexport { encodeHTML };\n/**\r\n * Make value user readable for tooltip and label.\r\n * \"User readable\":\r\n *     Try to not print programmer-specific text like NaN, Infinity, null, undefined.\r\n *     Avoid to display an empty string, which users can not recognize there is\r\n *     a value and it might look like a bug.\r\n */\nexport function makeValueReadable(value, valueType, useUTC) {\n  var USER_READABLE_DEFUALT_TIME_PATTERN = '{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}';\n  function stringToUserReadable(str) {\n    return str && zrUtil.trim(str) ? str : '-';\n  }\n  function isNumberUserReadable(num) {\n    return !!(num != null && !isNaN(num) && isFinite(num));\n  }\n  var isTypeTime = valueType === 'time';\n  var isValueDate = value instanceof Date;\n  if (isTypeTime || isValueDate) {\n    var date = isTypeTime ? parseDate(value) : value;\n    if (!isNaN(+date)) {\n      return timeFormat(date, USER_READABLE_DEFUALT_TIME_PATTERN, useUTC);\n    } else if (isValueDate) {\n      return '-';\n    }\n    // In other cases, continue to try to display the value in the following code.\n  }\n  if (valueType === 'ordinal') {\n    return zrUtil.isStringSafe(value) ? stringToUserReadable(value) : zrUtil.isNumber(value) ? isNumberUserReadable(value) ? value + '' : '-' : '-';\n  }\n  // By default.\n  var numericResult = numericToNumber(value);\n  return isNumberUserReadable(numericResult) ? addCommas(numericResult) : zrUtil.isStringSafe(value) ? stringToUserReadable(value) : typeof value === 'boolean' ? value + '' : '-';\n}\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\r\n * Template formatter\r\n * @param {Array.<Object>|Object} paramsList\r\n */\nexport function formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n  var seriesLen = paramsList.length;\n  if (!seriesLen) {\n    return '';\n  }\n  var $vars = paramsList[0].$vars || [];\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n  return tpl;\n}\n/**\r\n * simple Template formatter\r\n */\nexport function formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\nexport function getTooltipMarker(inOpt, extraCssText) {\n  var opt = zrUtil.isString(inOpt) ? {\n    color: inOpt,\n    extraCssText: extraCssText\n  } : inOpt || {};\n  var color = opt.color;\n  var type = opt.type;\n  extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  if (!color) {\n    return '';\n  }\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:'\n    // Only support string\n    + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:4px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Should better not to auto generate style name by auto-increment number here.\n    // Because this util is usually called in tooltip formatter, which is probably\n    // called repeatedly when mouse move and the auto-increment number increases fast.\n    // Users can make their own style name by theirselves, make it unique and readable.\n    var markerId = opt.markerId || 'markerX';\n    return {\n      renderMode: renderMode,\n      content: '{' + markerId + '|}  ',\n      style: type === 'subItem' ? {\n        width: 4,\n        height: 4,\n        borderRadius: 2,\n        backgroundColor: color\n      } : {\n        width: 10,\n        height: 10,\n        borderRadius: 5,\n        backgroundColor: color\n      }\n    };\n  }\n}\n/**\r\n * @deprecated Use `time/format` instead.\r\n * ISO Date format\r\n * @param {string} tpl\r\n * @param {number} value\r\n * @param {boolean} [isUTC=false] Default in local time.\r\n *           see `module:echarts/scale/Time`\r\n *           and `module:echarts/util/number#parseDate`.\r\n * @inner\r\n */\nexport function formatTime(tpl, value, isUTC) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateReplaceLog('echarts.format.formatTime', 'echarts.time.format');\n  }\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n  var date = parseDate(value);\n  var getUTC = isUTC ? 'getUTC' : 'get';\n  var y = date[getUTC + 'FullYear']();\n  var M = date[getUTC + 'Month']() + 1;\n  var d = date[getUTC + 'Date']();\n  var h = date[getUTC + 'Hours']();\n  var m = date[getUTC + 'Minutes']();\n  var s = date[getUTC + 'Seconds']();\n  var S = date[getUTC + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', pad(y % 100 + '', 2)).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\r\n * Capital first\r\n * @param {string} str\r\n * @return {string}\r\n */\nexport function capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n/**\r\n * @return Never be null/undefined.\r\n */\nexport function convertToColorString(color, defaultColor) {\n  defaultColor = defaultColor || 'transparent';\n  return zrUtil.isString(color) ? color : zrUtil.isObject(color) ? color.colorStops && (color.colorStops[0] || {}).color || defaultColor : defaultColor;\n}\nexport { truncateText } from 'zrender/lib/graphic/helper/parseText.js';\n/**\r\n * open new tab\r\n * @param link url\r\n * @param target blank or self\r\n */\nexport function windowOpen(link, target) {\n  /* global window */\n  if (target === '_blank' || target === 'blank') {\n    var blank = window.open();\n    blank.opener = null;\n    blank.location.href = link;\n  } else {\n    window.open(link, target);\n  }\n}\nexport { getTextRect } from '../legacy/getTextRect.js';","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Layout helpers for each component positioning\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { parsePercent } from './number.js';\nimport * as formatUtil from './format.js';\nvar each = zrUtil.each;\n/**\r\n * @public\r\n */\nexport var LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\r\n * @public\r\n */\nexport var HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX;\n      // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY;\n      // Wrap when width exceeds maxHeight or meet a `newline` group\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n    if (child.newline) {\n      return;\n    }\n    child.x = x;\n    child.y = y;\n    child.markRedraw();\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\r\n * VBox or HBox layouting\r\n * @param {string} orient\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\nexport var box = boxLayout;\n/**\r\n * VBox layouting\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\nexport var vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\r\n * HBox layouting\r\n * @param {module:zrender/graphic/Group} group\r\n * @param {number} gap\r\n * @param {number} [width=Infinity]\r\n * @param {number} [height=Infinity]\r\n */\nexport var hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\r\n * If x or x2 is not specified or 'center' 'left' 'right',\r\n * the width would be as long as possible.\r\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\r\n * the height would be as long as possible.\r\n */\nexport function getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.left, containerWidth);\n  var y = parsePercent(positionInfo.top, containerHeight);\n  var x2 = parsePercent(positionInfo.right, containerWidth);\n  var y2 = parsePercent(positionInfo.bottom, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.left))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.right))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.top))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.bottom))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\r\n * Parse position info.\r\n */\nexport function getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect;\n  // If width is not specified, calculate width from left and right\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    }\n    // Calculate width or height with given aspect\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  }\n  // If left is not specified, calculate left from right and width\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  }\n  // Align left and top\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  }\n  // If something is wrong and left, top, width, height are calculated as NaN\n  left = left || 0;\n  top = top || 0;\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\r\n * Position a zr element in viewport\r\n *  Group position is specified by either\r\n *  {left, top}, {right, bottom}\r\n *  If all properties exists, right and bottom will be igonred.\r\n *\r\n * Logic:\r\n *     1. Scale (against origin point in parent coord)\r\n *     2. Rotate (against origin point in parent coord)\r\n *     3. Translate (with el.position by this method)\r\n * So this method only fixes the last step 'Translate', which does not affect\r\n * scaling and rotating.\r\n *\r\n * If be called repeatedly with the same input el, the same result will be gotten.\r\n *\r\n * Return true if the layout happened.\r\n *\r\n * @param el Should have `getBoundingRect` method.\r\n * @param positionInfo\r\n * @param positionInfo.left\r\n * @param positionInfo.top\r\n * @param positionInfo.right\r\n * @param positionInfo.bottom\r\n * @param positionInfo.width Only for opt.boundingModel: 'raw'\r\n * @param positionInfo.height Only for opt.boundingModel: 'raw'\r\n * @param containerRect\r\n * @param margin\r\n * @param opt\r\n * @param opt.hv Only horizontal or only vertical. Default to be [1, 1]\r\n * @param opt.boundingMode\r\n *        Specify how to calculate boundingRect when locating.\r\n *        'all': Position the boundingRect that is transformed and uioned\r\n *               both itself and its descendants.\r\n *               This mode simplies confine the elements in the bounding\r\n *               of their container (e.g., using 'right: 0').\r\n *        'raw': Position the boundingRect that is not transformed and only itself.\r\n *               This mode is useful when you want a element can overflow its\r\n *               container. (Consider a rotated circle needs to be located in a corner.)\r\n *               In this mode positionInfo.width/height can only be number.\r\n */\nexport function positionElement(el, positionInfo, containerRect, margin, opt, out) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n  out = out || el;\n  out.x = el.x;\n  out.y = el.y;\n  if (!h && !v) {\n    return false;\n  }\n  var rect;\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform();\n      // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  }\n  // The real width and height can not be specified but calculated by the given el.\n  var layoutRect = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin);\n  // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n  var dx = h ? layoutRect.x - rect.x : 0;\n  var dy = v ? layoutRect.y - rect.y : 0;\n  if (boundingMode === 'raw') {\n    out.x = dx;\n    out.y = dy;\n  } else {\n    out.x += dx;\n    out.y += dy;\n  }\n  if (out === el) {\n    el.markRedraw();\n  }\n  return true;\n}\n/**\r\n * @param option Contains some of the properties in HV_NAMES.\r\n * @param hvIdx 0: horizontal; 1: vertical.\r\n */\nexport function sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\nexport function fetchLayoutMode(ins) {\n  var layoutMode = ins.layoutMode || ins.constructor.layoutMode;\n  return zrUtil.isObject(layoutMode) ? layoutMode : layoutMode ? {\n    type: layoutMode\n  } : null;\n}\n/**\r\n * Consider Case:\r\n * When default option has {left: 0, width: 100}, and we set {right: 0}\r\n * through setOption or media query, using normal zrUtil.merge will cause\r\n * {right: 0} does not take effect.\r\n *\r\n * @example\r\n * ComponentModel.extend({\r\n *     init: function () {\r\n *         ...\r\n *         let inputPositionParams = layout.getLayoutParams(option);\r\n *         this.mergeOption(inputPositionParams);\r\n *     },\r\n *     mergeOption: function (newOption) {\r\n *         newOption && zrUtil.merge(thisOption, newOption, true);\r\n *         layout.mergeLayoutParam(thisOption, newOption);\r\n *     }\r\n * });\r\n *\r\n * @param targetOption\r\n * @param newOption\r\n * @param opt\r\n */\nexport function mergeLayoutParam(targetOption, newOption, opt) {\n  var ignoreSize = opt && opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    }\n    // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n      return newParams;\n    } else {\n      // Chose another param from targetOption by priority.\n      for (var i = 0; i < names.length; i++) {\n        var name_1 = names[i];\n        if (!hasProp(newParams, name_1) && hasProp(targetOption, name_1)) {\n          newParams[name_1] = targetOption[name_1];\n          break;\n        }\n      }\n      return newParams;\n    }\n  }\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\r\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\r\n */\nexport function getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\r\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\r\n * @param {Object} source\r\n * @return {Object} Result contains those props.\r\n */\nexport function copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from './Model.js';\nimport * as componentUtil from '../util/component.js';\nimport { enableClassManagement, parseClassType, isExtendedClass, mountExtend } from '../util/clazz.js';\nimport { makeInner, queryReferringComponents } from '../util/model.js';\nimport * as layout from '../util/layout.js';\nvar inner = makeInner();\nvar ComponentModel = /** @class */function (_super) {\n  __extends(ComponentModel, _super);\n  function ComponentModel(option, parentModel, ecModel) {\n    var _this = _super.call(this, option, parentModel, ecModel) || this;\n    _this.uid = componentUtil.getUID('ec_cpt_model');\n    return _this;\n  }\n  ComponentModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n  };\n  ComponentModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = layout.fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? layout.getLayoutParams(option) : {};\n    var themeModel = ecModel.getTheme();\n    zrUtil.merge(option, themeModel.get(this.mainType));\n    zrUtil.merge(option, this.getDefaultOption());\n    if (layoutMode) {\n      layout.mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  ComponentModel.prototype.mergeOption = function (option, ecModel) {\n    zrUtil.merge(this.option, option, true);\n    var layoutMode = layout.fetchLayoutMode(this);\n    if (layoutMode) {\n      layout.mergeLayoutParam(this.option, option, layoutMode);\n    }\n  };\n  /**\r\n   * Called immediately after `init` or `mergeOption` of this instance called.\r\n   */\n  ComponentModel.prototype.optionUpdated = function (newCptOption, isInit) {};\n  /**\r\n   * [How to declare defaultOption]:\r\n   *\r\n   * (A) If using class declaration in typescript (since echarts 5):\r\n   * ```ts\r\n   * import {ComponentOption} from '../model/option.js';\r\n   * export interface XxxOption extends ComponentOption {\r\n   *     aaa: number\r\n   * }\r\n   * export class XxxModel extends Component {\r\n   *     static type = 'xxx';\r\n   *     static defaultOption: XxxOption = {\r\n   *         aaa: 123\r\n   *     }\r\n   * }\r\n   * Component.registerClass(XxxModel);\r\n   * ```\r\n   * ```ts\r\n   * import {inheritDefaultOption} from '../util/component.js';\r\n   * import {XxxModel, XxxOption} from './XxxModel.js';\r\n   * export interface XxxSubOption extends XxxOption {\r\n   *     bbb: number\r\n   * }\r\n   * class XxxSubModel extends XxxModel {\r\n   *     static defaultOption: XxxSubOption = inheritDefaultOption(XxxModel.defaultOption, {\r\n   *         bbb: 456\r\n   *     })\r\n   *     fn() {\r\n   *         let opt = this.getDefaultOption();\r\n   *         // opt is {aaa: 123, bbb: 456}\r\n   *     }\r\n   * }\r\n   * ```\r\n   *\r\n   * (B) If using class extend (previous approach in echarts 3 & 4):\r\n   * ```js\r\n   * let XxxComponent = Component.extend({\r\n   *     defaultOption: {\r\n   *         xx: 123\r\n   *     }\r\n   * })\r\n   * ```\r\n   * ```js\r\n   * let XxxSubComponent = XxxComponent.extend({\r\n   *     defaultOption: {\r\n   *         yy: 456\r\n   *     },\r\n   *     fn: function () {\r\n   *         let opt = this.getDefaultOption();\r\n   *         // opt is {xx: 123, yy: 456}\r\n   *     }\r\n   * })\r\n   * ```\r\n   */\n  ComponentModel.prototype.getDefaultOption = function () {\n    var ctor = this.constructor;\n    // If using class declaration, it is different to travel super class\n    // in legacy env and auto merge defaultOption. So if using class\n    // declaration, defaultOption should be merged manually.\n    if (!isExtendedClass(ctor)) {\n      // When using ts class, defaultOption must be declared as static.\n      return ctor.defaultOption;\n    }\n    // FIXME: remove this approach?\n    var fields = inner(this);\n    if (!fields.defaultOption) {\n      var optList = [];\n      var clz = ctor;\n      while (clz) {\n        var opt = clz.prototype.defaultOption;\n        opt && optList.push(opt);\n        clz = clz.superClass;\n      }\n      var defaultOption = {};\n      for (var i = optList.length - 1; i >= 0; i--) {\n        defaultOption = zrUtil.merge(defaultOption, optList[i], true);\n      }\n      fields.defaultOption = defaultOption;\n    }\n    return fields.defaultOption;\n  };\n  /**\r\n   * Notice: always force to input param `useDefault` in case that forget to consider it.\r\n   * The same behavior as `modelUtil.parseFinder`.\r\n   *\r\n   * @param useDefault In many cases like series refer axis and axis refer grid,\r\n   *        If axis index / axis id not specified, use the first target as default.\r\n   *        In other cases like dataZoom refer axis, if not specified, measn no refer.\r\n   */\n  ComponentModel.prototype.getReferringComponents = function (mainType, opt) {\n    var indexKey = mainType + 'Index';\n    var idKey = mainType + 'Id';\n    return queryReferringComponents(this.ecModel, mainType, {\n      index: this.get(indexKey, true),\n      id: this.get(idKey, true)\n    }, opt);\n  };\n  ComponentModel.prototype.getBoxLayoutParams = function () {\n    // Consider itself having box layout configs.\n    var boxLayoutModel = this;\n    return {\n      left: boxLayoutModel.get('left'),\n      top: boxLayoutModel.get('top'),\n      right: boxLayoutModel.get('right'),\n      bottom: boxLayoutModel.get('bottom'),\n      width: boxLayoutModel.get('width'),\n      height: boxLayoutModel.get('height')\n    };\n  };\n  /**\r\n   * Get key for zlevel.\r\n   * If developers don't configure zlevel. We will assign zlevel to series based on the key.\r\n   * For example, lines with trail effect and progressive series will in an individual zlevel.\r\n   */\n  ComponentModel.prototype.getZLevelKey = function () {\n    return '';\n  };\n  ComponentModel.prototype.setZLevel = function (zlevel) {\n    this.option.zlevel = zlevel;\n  };\n  ComponentModel.protoInitialize = function () {\n    var proto = ComponentModel.prototype;\n    proto.type = 'component';\n    proto.id = '';\n    proto.name = '';\n    proto.mainType = '';\n    proto.subType = '';\n    proto.componentIndex = 0;\n  }();\n  return ComponentModel;\n}(Model);\nmountExtend(ComponentModel, Model);\nenableClassManagement(ComponentModel);\ncomponentUtil.enableSubTypeDefaulter(ComponentModel);\ncomponentUtil.enableTopologicalTravel(ComponentModel, getDependencies);\nfunction getDependencies(componentType) {\n  var deps = [];\n  zrUtil.each(ComponentModel.getClassesByMainType(componentType), function (clz) {\n    deps = deps.concat(clz.dependencies || clz.prototype.dependencies || []);\n  });\n  // Ensure main type.\n  deps = zrUtil.map(deps, function (type) {\n    return parseClassType(type).main;\n  });\n  // Hack dataset for convenience.\n  if (componentType !== 'dataset' && zrUtil.indexOf(deps, 'dataset') <= 0) {\n    deps.unshift('dataset');\n  }\n  return deps;\n}\nexport default ComponentModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar platform = '';\n// Navigator not exists in node\nif (typeof navigator !== 'undefined') {\n  /* global navigator */\n  platform = navigator.platform || '';\n}\nvar decalColor = 'rgba(0, 0, 0, 0.2)';\nexport default {\n  darkMode: 'auto',\n  // backgroundColor: 'rgba(0,0,0,0)',\n  colorBy: 'series',\n  color: ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'],\n  gradientColor: ['#f6efa6', '#d88273', '#bf444c'],\n  aria: {\n    decal: {\n      decals: [{\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [2, 5],\n        symbolSize: 1,\n        rotation: Math.PI / 6\n      }, {\n        color: decalColor,\n        symbol: 'circle',\n        dashArrayX: [[8, 8], [0, 8, 8, 0]],\n        dashArrayY: [6, 0],\n        symbolSize: 0.8\n      }, {\n        color: decalColor,\n        dashArrayX: [1, 0],\n        dashArrayY: [4, 3],\n        rotation: -Math.PI / 4\n      }, {\n        color: decalColor,\n        dashArrayX: [[6, 6], [0, 6, 6, 0]],\n        dashArrayY: [6, 0]\n      }, {\n        color: decalColor,\n        dashArrayX: [[1, 0], [1, 6]],\n        dashArrayY: [1, 0, 6, 0],\n        rotation: Math.PI / 4\n      }, {\n        color: decalColor,\n        symbol: 'triangle',\n        dashArrayX: [[9, 9], [0, 9, 9, 0]],\n        dashArrayY: [7, 2],\n        symbolSize: 0.75\n      }]\n    }\n  },\n  // If xAxis and yAxis declared, grid is created by default.\n  // grid: {},\n  textStyle: {\n    // color: '#000',\n    // decoration: 'none',\n    // PENDING\n    fontFamily: platform.match(/^Win/) ? 'Microsoft YaHei' : 'sans-serif',\n    // fontFamily: 'Arial, Verdana, sans-serif',\n    fontSize: 12,\n    fontStyle: 'normal',\n    fontWeight: 'normal'\n  },\n  // http://blogs.adobe.com/webplatform/2014/02/24/using-blend-modes-in-html-canvas/\n  // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\n  // Default is source-over\n  blendMode: null,\n  stateAnimation: {\n    duration: 300,\n    easing: 'cubicOut'\n  },\n  animation: 'auto',\n  animationDuration: 1000,\n  animationDurationUpdate: 500,\n  animationEasing: 'cubicInOut',\n  animationEasingUpdate: 'cubicInOut',\n  animationThreshold: 2000,\n  // Configuration for progressive/incremental rendering\n  progressiveThreshold: 3000,\n  progressive: 400,\n  // Threshold of if use single hover layer to optimize.\n  // It is recommended that `hoverLayerThreshold` is equivalent to or less than\n  // `progressiveThreshold`, otherwise hover will cause restart of progressive,\n  // which is unexpected.\n  // see example <echarts/test/heatmap-large.html>.\n  hoverLayerThreshold: 3000,\n  // See: module:echarts/scale/Time\n  useUTC: false\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap } from 'zrender/lib/core/util.js';\n;\n;\n;\nexport var VISUAL_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'itemGroupId', 'itemChildGroupId', 'seriesName']);\nexport var SOURCE_FORMAT_ORIGINAL = 'original';\nexport var SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nexport var SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nexport var SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nexport var SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nexport var SOURCE_FORMAT_UNKNOWN = 'unknown';\nexport var SERIES_LAYOUT_BY_COLUMN = 'column';\nexport var SERIES_LAYOUT_BY_ROW = 'row';\n;\n;\n;\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner, getDataItemValue, queryReferringComponents, SINGLE_REFERRING } from '../../util/model.js';\nimport { createHashMap, each, isArray, isString, isObject, isTypedArray } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW, SOURCE_FORMAT_KEYED_COLUMNS } from '../../util/types.js';\n// The result of `guessOrdinal`.\nexport var BE_ORDINAL = {\n  Must: 1,\n  Might: 2,\n  Not: 3 // Other cases\n};\nvar innerGlobalModel = makeInner();\n/**\r\n * MUST be called before mergeOption of all series.\r\n */\nexport function resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  innerGlobalModel(ecModel).datasetMap = createHashMap();\n}\n/**\r\n * [The strategy of the arrengment of data dimensions for dataset]:\r\n * \"value way\": all axes are non-category axes. So series one by one take\r\n *     several (the number is coordSysDims.length) dimensions from dataset.\r\n *     The result of data arrengment of data dimensions like:\r\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\r\n * \"category way\": at least one axis is category axis. So the the first data\r\n *     dimension is always mapped to the first category axis and shared by\r\n *     all of the series. The other data dimensions are taken by series like\r\n *     \"value way\" does.\r\n *     The result of data arrengment of data dimensions like:\r\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\r\n *\r\n * @return encode Never be `null/undefined`.\r\n */\nexport function makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = innerGlobalModel(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfoLoose, coordDimIdx) {\n    var coordDimInfo = isObject(coordDimInfoLoose) ? coordDimInfoLoose : coordDimensions[coordDimIdx] = {\n      name: coordDimInfoLoose\n    };\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimInfo);\n    }\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  });\n  // TODO\n  // Auto detect first time axis and do arrangement.\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo);\n    // In value way.\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count;\n      // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when multiple series share one dimension\n      // category axis, series name should better use\n      // the other dimension name. On the other hand, use\n      // both dimensions name.\n    }\n    // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n      pushDim(encode[coordDimName], 0, count);\n      pushDim(encodeItemName, 0, count);\n    }\n    // In category way, the other axis.\n    else {\n      var start = datasetRecord.categoryWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.categoryWayDim += count;\n    }\n  });\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\r\n * Work for data like [{name: ..., value: ...}, ...].\r\n *\r\n * @return encode Never be `null/undefined`.\r\n */\nexport function makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = querySeriesUpstreamDatasetModel(seriesModel);\n  // Currently only make default when using dataset, util more reqirements occur.\n  if (!datasetModel) {\n    return encode;\n  }\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  }\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = [];\n    // 5 is an experience value.\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not;\n      // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      }\n      // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n  if (idxResult) {\n    encode.value = [idxResult.v];\n    // `potentialNameDimIndex` has highest priority.\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n;\n    // By default, label uses itemName in charts.\n    // So we don't set encodeLabel here.\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n  return encode;\n}\n/**\r\n * @return If return null/undefined, indicate that should not use datasetModel.\r\n */\nexport function querySeriesUpstreamDatasetModel(seriesModel) {\n  // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n  var thisData = seriesModel.get('data', true);\n  if (!thisData) {\n    return queryReferringComponents(seriesModel.ecModel, 'dataset', {\n      index: seriesModel.get('datasetIndex', true),\n      id: seriesModel.get('datasetId', true)\n    }, SINGLE_REFERRING).models[0];\n  }\n}\n/**\r\n * @return Always return an array event empty.\r\n */\nexport function queryDatasetUpstreamDatasetModels(datasetModel) {\n  // Only these attributes declared, we by default reference to `datasetIndex: 0`.\n  // Otherwise, no reference.\n  if (!datasetModel.get('transform', true) && !datasetModel.get('fromTransformResult', true)) {\n    return [];\n  }\n  return queryReferringComponents(datasetModel.ecModel, 'dataset', {\n    index: datasetModel.get('fromDatasetIndex', true),\n    id: datasetModel.get('fromDatasetId', true)\n  }, SINGLE_REFERRING).models;\n}\n/**\r\n * The rule should not be complex, otherwise user might not\r\n * be able to known where the data is wrong.\r\n * The code is ugly, but how to make it neat?\r\n */\nexport function guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n}\n// dimIndex may be overflow source data.\n// return {BE_ORDINAL}\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result;\n  // Experience value.\n  var maxLoop = 5;\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  }\n  // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n  var dimName;\n  var dimType;\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = dataArrayRows[dimIndex];\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < dataArrayRows.length && i < maxLoop; i++) {\n        var row = dataArrayRows[startIndex + i];\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var dataObjectRows = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < dataObjectRows.length && i < maxLoop; i++) {\n      var item = dataObjectRows[i];\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    var dataKeyedColumns = data;\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n    var sample = dataKeyedColumns[dimName];\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var dataOriginal = data;\n    for (var i = 0; i < dataOriginal.length && i < maxLoop; i++) {\n      var item = dataOriginal[i];\n      var val = getDataItemValue(item);\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n  function detectValue(val) {\n    var beStr = isString(val);\n    // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `Number('')` (or any whitespace) is `0`.\n    if (val != null && Number.isFinite(Number(val)) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n  return BE_ORDINAL.Not;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, assert } from 'zrender/lib/core/util.js';\nimport { isComponentIdInternal } from '../util/model.js';\nvar internalOptionCreatorMap = createHashMap();\nexport function registerInternalOptionCreator(mainType, creator) {\n  assert(internalOptionCreatorMap.get(mainType) == null && creator);\n  internalOptionCreatorMap.set(mainType, creator);\n}\nexport function concatInternalOptions(ecModel, mainType, newCmptOptionList) {\n  var internalOptionCreator = internalOptionCreatorMap.get(mainType);\n  if (!internalOptionCreator) {\n    return newCmptOptionList;\n  }\n  var internalOptions = internalOptionCreator(ecModel);\n  if (!internalOptions) {\n    return newCmptOptionList;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < internalOptions.length; i++) {\n      assert(isComponentIdInternal(internalOptions[i]));\n    }\n  }\n  return newCmptOptionList.concat(internalOptions);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner, normalizeToArray } from '../../util/model.js';\nvar innerColor = makeInner();\nvar innerDecal = makeInner();\nvar PaletteMixin = /** @class */function () {\n  function PaletteMixin() {}\n  PaletteMixin.prototype.getColorFromPalette = function (name, scope, requestNum) {\n    var defaultPalette = normalizeToArray(this.get('color', true));\n    var layeredPalette = this.get('colorLayer', true);\n    return getFromPalette(this, innerColor, defaultPalette, layeredPalette, name, scope, requestNum);\n  };\n  PaletteMixin.prototype.clearColorPalette = function () {\n    clearPalette(this, innerColor);\n  };\n  return PaletteMixin;\n}();\nexport function getDecalFromPalette(ecModel, name, scope, requestNum) {\n  var defaultDecals = normalizeToArray(ecModel.get(['aria', 'decal', 'decals']));\n  return getFromPalette(ecModel, innerDecal, defaultDecals, null, name, scope, requestNum);\n}\nfunction getNearestPalette(palettes, requestColorNum) {\n  var paletteNum = palettes.length;\n  // TODO palettes must be in order\n  for (var i = 0; i < paletteNum; i++) {\n    if (palettes[i].length > requestColorNum) {\n      return palettes[i];\n    }\n  }\n  return palettes[paletteNum - 1];\n}\n/**\r\n * @param name MUST NOT be null/undefined. Otherwise call this function\r\n *             twise with the same parameters will get different result.\r\n * @param scope default this.\r\n * @return Can be null/undefined\r\n */\nfunction getFromPalette(that, inner, defaultPalette, layeredPalette, name, scope, requestNum) {\n  scope = scope || that;\n  var scopeFields = inner(scope);\n  var paletteIdx = scopeFields.paletteIdx || 0;\n  var paletteNameMap = scopeFields.paletteNameMap = scopeFields.paletteNameMap || {};\n  // Use `hasOwnProperty` to avoid conflict with Object.prototype.\n  if (paletteNameMap.hasOwnProperty(name)) {\n    return paletteNameMap[name];\n  }\n  var palette = requestNum == null || !layeredPalette ? defaultPalette : getNearestPalette(layeredPalette, requestNum);\n  // In case can't find in layered color palette.\n  palette = palette || defaultPalette;\n  if (!palette || !palette.length) {\n    return;\n  }\n  var pickedPaletteItem = palette[paletteIdx];\n  if (name) {\n    paletteNameMap[name] = pickedPaletteItem;\n  }\n  scopeFields.paletteIdx = (paletteIdx + 1) % palette.length;\n  return pickedPaletteItem;\n}\nfunction clearPalette(that, inner) {\n  inner(that).paletteIdx = 0;\n  inner(that).paletteNameMap = {};\n}\nexport { PaletteMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Caution: If the mechanism should be changed some day, these cases\r\n * should be considered:\r\n *\r\n * (1) In `merge option` mode, if using the same option to call `setOption`\r\n * many times, the result should be the same (try our best to ensure that).\r\n * (2) In `merge option` mode, if a component has no id/name specified, it\r\n * will be merged by index, and the result sequence of the components is\r\n * consistent to the original sequence.\r\n * (3) In `replaceMerge` mode, keep the result sequence of the components is\r\n * consistent to the original sequence, even though there might result in \"hole\".\r\n * (4) `reset` feature (in toolbox). Find detailed info in comments about\r\n * `mergeOption` in module:echarts/model/OptionManager.\r\n */\nimport { each, filter, isArray, isObject, isString, createHashMap, assert, clone, merge, extend, mixin, isFunction } from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../util/model.js';\nimport Model from './Model.js';\nimport ComponentModel from './Component.js';\nimport globalDefault from './globalDefault.js';\nimport { resetSourceDefaulter } from '../data/helper/sourceHelper.js';\nimport { concatInternalOptions } from './internalComponentCreator.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { error, warn } from '../util/log.js';\n// -----------------------\n// Internal method names:\n// -----------------------\nvar reCreateSeriesIndices;\nvar assertSeriesInitialized;\nvar initBase;\nvar OPTION_INNER_KEY = '\\0_ec_inner';\nvar OPTION_INNER_VALUE = 1;\nvar BUITIN_COMPONENTS_MAP = {\n  grid: 'GridComponent',\n  polar: 'PolarComponent',\n  geo: 'GeoComponent',\n  singleAxis: 'SingleAxisComponent',\n  parallel: 'ParallelComponent',\n  calendar: 'CalendarComponent',\n  graphic: 'GraphicComponent',\n  toolbox: 'ToolboxComponent',\n  tooltip: 'TooltipComponent',\n  axisPointer: 'AxisPointerComponent',\n  brush: 'BrushComponent',\n  title: 'TitleComponent',\n  timeline: 'TimelineComponent',\n  markPoint: 'MarkPointComponent',\n  markLine: 'MarkLineComponent',\n  markArea: 'MarkAreaComponent',\n  legend: 'LegendComponent',\n  dataZoom: 'DataZoomComponent',\n  visualMap: 'VisualMapComponent',\n  // aria: 'AriaComponent',\n  // dataset: 'DatasetComponent',\n  // Dependencies\n  xAxis: 'GridComponent',\n  yAxis: 'GridComponent',\n  angleAxis: 'PolarComponent',\n  radiusAxis: 'PolarComponent'\n};\nvar BUILTIN_CHARTS_MAP = {\n  line: 'LineChart',\n  bar: 'BarChart',\n  pie: 'PieChart',\n  scatter: 'ScatterChart',\n  radar: 'RadarChart',\n  map: 'MapChart',\n  tree: 'TreeChart',\n  treemap: 'TreemapChart',\n  graph: 'GraphChart',\n  gauge: 'GaugeChart',\n  funnel: 'FunnelChart',\n  parallel: 'ParallelChart',\n  sankey: 'SankeyChart',\n  boxplot: 'BoxplotChart',\n  candlestick: 'CandlestickChart',\n  effectScatter: 'EffectScatterChart',\n  lines: 'LinesChart',\n  heatmap: 'HeatmapChart',\n  pictorialBar: 'PictorialBarChart',\n  themeRiver: 'ThemeRiverChart',\n  sunburst: 'SunburstChart',\n  custom: 'CustomChart'\n};\nvar componetsMissingLogPrinted = {};\nfunction checkMissingComponents(option) {\n  each(option, function (componentOption, mainType) {\n    if (!ComponentModel.hasClass(mainType)) {\n      var componentImportName = BUITIN_COMPONENTS_MAP[mainType];\n      if (componentImportName && !componetsMissingLogPrinted[componentImportName]) {\n        error(\"Component \" + mainType + \" is used but not imported.\\nimport { \" + componentImportName + \" } from 'echarts/components';\\necharts.use([\" + componentImportName + \"]);\");\n        componetsMissingLogPrinted[componentImportName] = true;\n      }\n    }\n  });\n}\nvar GlobalModel = /** @class */function (_super) {\n  __extends(GlobalModel, _super);\n  function GlobalModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GlobalModel.prototype.init = function (option, parentModel, ecModel, theme, locale, optionManager) {\n    theme = theme || {};\n    this.option = null; // Mark as not initialized.\n    this._theme = new Model(theme);\n    this._locale = new Model(locale);\n    this._optionManager = optionManager;\n  };\n  GlobalModel.prototype.setOption = function (option, opts, optionPreprocessorFuncs) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(option != null, 'option is null/undefined');\n      assert(option[OPTION_INNER_KEY] !== OPTION_INNER_VALUE, 'please use chart.getOption()');\n    }\n    var innerOpt = normalizeSetOptionInput(opts);\n    this._optionManager.setOption(option, optionPreprocessorFuncs, innerOpt);\n    this._resetOption(null, innerOpt);\n  };\n  /**\r\n   * @param type null/undefined: reset all.\r\n   *        'recreate': force recreate all.\r\n   *        'timeline': only reset timeline option\r\n   *        'media': only reset media query option\r\n   * @return Whether option changed.\r\n   */\n  GlobalModel.prototype.resetOption = function (type, opt) {\n    return this._resetOption(type, normalizeSetOptionInput(opt));\n  };\n  GlobalModel.prototype._resetOption = function (type, opt) {\n    var optionChanged = false;\n    var optionManager = this._optionManager;\n    if (!type || type === 'recreate') {\n      var baseOption = optionManager.mountOption(type === 'recreate');\n      if (process.env.NODE_ENV !== 'production') {\n        checkMissingComponents(baseOption);\n      }\n      if (!this.option || type === 'recreate') {\n        initBase(this, baseOption);\n      } else {\n        this.restoreData();\n        this._mergeOption(baseOption, opt);\n      }\n      optionChanged = true;\n    }\n    if (type === 'timeline' || type === 'media') {\n      this.restoreData();\n    }\n    // By design, if `setOption(option2)` at the second time, and `option2` is a `ECUnitOption`,\n    // it should better not have the same props with `MediaUnit['option']`.\n    // Because either `option2` or `MediaUnit['option']` will be always merged to \"current option\"\n    // rather than original \"baseOption\". If they both override a prop, the result might be\n    // unexpected when media state changed after `setOption` called.\n    // If we really need to modify a props in each `MediaUnit['option']`, use the full version\n    // (`{baseOption, media}`) in `setOption`.\n    // For `timeline`, the case is the same.\n    if (!type || type === 'recreate' || type === 'timeline') {\n      var timelineOption = optionManager.getTimelineOption(this);\n      if (timelineOption) {\n        optionChanged = true;\n        this._mergeOption(timelineOption, opt);\n      }\n    }\n    if (!type || type === 'recreate' || type === 'media') {\n      var mediaOptions = optionManager.getMediaOption(this);\n      if (mediaOptions.length) {\n        each(mediaOptions, function (mediaOption) {\n          optionChanged = true;\n          this._mergeOption(mediaOption, opt);\n        }, this);\n      }\n    }\n    return optionChanged;\n  };\n  GlobalModel.prototype.mergeOption = function (option) {\n    this._mergeOption(option, null);\n  };\n  GlobalModel.prototype._mergeOption = function (newOption, opt) {\n    var option = this.option;\n    var componentsMap = this._componentsMap;\n    var componentsCount = this._componentsCount;\n    var newCmptTypes = [];\n    var newCmptTypeMap = createHashMap();\n    var replaceMergeMainTypeMap = opt && opt.replaceMergeMainTypeMap;\n    resetSourceDefaulter(this);\n    // If no component class, merge directly.\n    // For example: color, animaiton options, etc.\n    each(newOption, function (componentOption, mainType) {\n      if (componentOption == null) {\n        return;\n      }\n      if (!ComponentModel.hasClass(mainType)) {\n        // globalSettingTask.dirty();\n        option[mainType] = option[mainType] == null ? clone(componentOption) : merge(option[mainType], componentOption, true);\n      } else if (mainType) {\n        newCmptTypes.push(mainType);\n        newCmptTypeMap.set(mainType, true);\n      }\n    });\n    if (replaceMergeMainTypeMap) {\n      // If there is a mainType `xxx` in `replaceMerge` but not declared in option,\n      // we trade it as it is declared in option as `{xxx: []}`. Because:\n      // (1) for normal merge, `{xxx: null/undefined}` are the same meaning as `{xxx: []}`.\n      // (2) some preprocessor may convert some of `{xxx: null/undefined}` to `{xxx: []}`.\n      replaceMergeMainTypeMap.each(function (val, mainTypeInReplaceMerge) {\n        if (ComponentModel.hasClass(mainTypeInReplaceMerge) && !newCmptTypeMap.get(mainTypeInReplaceMerge)) {\n          newCmptTypes.push(mainTypeInReplaceMerge);\n          newCmptTypeMap.set(mainTypeInReplaceMerge, true);\n        }\n      });\n    }\n    ComponentModel.topologicalTravel(newCmptTypes, ComponentModel.getAllClassMainTypes(), visitComponent, this);\n    function visitComponent(mainType) {\n      var newCmptOptionList = concatInternalOptions(this, mainType, modelUtil.normalizeToArray(newOption[mainType]));\n      var oldCmptList = componentsMap.get(mainType);\n      var mergeMode =\n      // `!oldCmptList` means init. See the comment in `mappingToExists`\n      !oldCmptList ? 'replaceAll' : replaceMergeMainTypeMap && replaceMergeMainTypeMap.get(mainType) ? 'replaceMerge' : 'normalMerge';\n      var mappingResult = modelUtil.mappingToExists(oldCmptList, newCmptOptionList, mergeMode);\n      // Set mainType and complete subType.\n      modelUtil.setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel);\n      // Empty it before the travel, in order to prevent `this._componentsMap`\n      // from being used in the `init`/`mergeOption`/`optionUpdated` of some\n      // components, which is probably incorrect logic.\n      option[mainType] = null;\n      componentsMap.set(mainType, null);\n      componentsCount.set(mainType, 0);\n      var optionsByMainType = [];\n      var cmptsByMainType = [];\n      var cmptsCountByMainType = 0;\n      var tooltipExists;\n      var tooltipWarningLogged;\n      each(mappingResult, function (resultItem, index) {\n        var componentModel = resultItem.existing;\n        var newCmptOption = resultItem.newOption;\n        if (!newCmptOption) {\n          if (componentModel) {\n            // Consider where is no new option and should be merged using {},\n            // see removeEdgeAndAdd in topologicalTravel and\n            // ComponentModel.getAllClassMainTypes.\n            componentModel.mergeOption({}, this);\n            componentModel.optionUpdated({}, false);\n          }\n          // If no both `resultItem.exist` and `resultItem.option`,\n          // either it is in `replaceMerge` and not matched by any id,\n          // or it has been removed in previous `replaceMerge` and left a \"hole\" in this component index.\n        } else {\n          var isSeriesType = mainType === 'series';\n          var ComponentModelClass = ComponentModel.getClass(mainType, resultItem.keyInfo.subType, !isSeriesType // Give a more detailed warn later if series don't exists\n          );\n          if (!ComponentModelClass) {\n            if (process.env.NODE_ENV !== 'production') {\n              var subType = resultItem.keyInfo.subType;\n              var seriesImportName = BUILTIN_CHARTS_MAP[subType];\n              if (!componetsMissingLogPrinted[subType]) {\n                componetsMissingLogPrinted[subType] = true;\n                if (seriesImportName) {\n                  error(\"Series \" + subType + \" is used but not imported.\\nimport { \" + seriesImportName + \" } from 'echarts/charts';\\necharts.use([\" + seriesImportName + \"]);\");\n                } else {\n                  error(\"Unknown series \" + subType);\n                }\n              }\n            }\n            return;\n          }\n          // TODO Before multiple tooltips get supported, we do this check to avoid unexpected exception.\n          if (mainType === 'tooltip') {\n            if (tooltipExists) {\n              if (process.env.NODE_ENV !== 'production') {\n                if (!tooltipWarningLogged) {\n                  warn('Currently only one tooltip component is allowed.');\n                  tooltipWarningLogged = true;\n                }\n              }\n              return;\n            }\n            tooltipExists = true;\n          }\n          if (componentModel && componentModel.constructor === ComponentModelClass) {\n            componentModel.name = resultItem.keyInfo.name;\n            // componentModel.settingTask && componentModel.settingTask.dirty();\n            componentModel.mergeOption(newCmptOption, this);\n            componentModel.optionUpdated(newCmptOption, false);\n          } else {\n            // PENDING Global as parent ?\n            var extraOpt = extend({\n              componentIndex: index\n            }, resultItem.keyInfo);\n            componentModel = new ComponentModelClass(newCmptOption, this, this, extraOpt);\n            // Assign `keyInfo`\n            extend(componentModel, extraOpt);\n            if (resultItem.brandNew) {\n              componentModel.__requireNewView = true;\n            }\n            componentModel.init(newCmptOption, this, this);\n            // Call optionUpdated after init.\n            // newCmptOption has been used as componentModel.option\n            // and may be merged with theme and default, so pass null\n            // to avoid confusion.\n            componentModel.optionUpdated(null, true);\n          }\n        }\n        if (componentModel) {\n          optionsByMainType.push(componentModel.option);\n          cmptsByMainType.push(componentModel);\n          cmptsCountByMainType++;\n        } else {\n          // Always do assign to avoid elided item in array.\n          optionsByMainType.push(void 0);\n          cmptsByMainType.push(void 0);\n        }\n      }, this);\n      option[mainType] = optionsByMainType;\n      componentsMap.set(mainType, cmptsByMainType);\n      componentsCount.set(mainType, cmptsCountByMainType);\n      // Backup series for filtering.\n      if (mainType === 'series') {\n        reCreateSeriesIndices(this);\n      }\n    }\n    // If no series declared, ensure `_seriesIndices` initialized.\n    if (!this._seriesIndices) {\n      reCreateSeriesIndices(this);\n    }\n  };\n  /**\r\n   * Get option for output (cloned option and inner info removed)\r\n   */\n  GlobalModel.prototype.getOption = function () {\n    var option = clone(this.option);\n    each(option, function (optInMainType, mainType) {\n      if (ComponentModel.hasClass(mainType)) {\n        var opts = modelUtil.normalizeToArray(optInMainType);\n        // Inner cmpts need to be removed.\n        // Inner cmpts might not be at last since ec5.0, but still\n        // compatible for users: if inner cmpt at last, splice the returned array.\n        var realLen = opts.length;\n        var metNonInner = false;\n        for (var i = realLen - 1; i >= 0; i--) {\n          // Remove options with inner id.\n          if (opts[i] && !modelUtil.isComponentIdInternal(opts[i])) {\n            metNonInner = true;\n          } else {\n            opts[i] = null;\n            !metNonInner && realLen--;\n          }\n        }\n        opts.length = realLen;\n        option[mainType] = opts;\n      }\n    });\n    delete option[OPTION_INNER_KEY];\n    return option;\n  };\n  GlobalModel.prototype.getTheme = function () {\n    return this._theme;\n  };\n  GlobalModel.prototype.getLocaleModel = function () {\n    return this._locale;\n  };\n  GlobalModel.prototype.setUpdatePayload = function (payload) {\n    this._payload = payload;\n  };\n  GlobalModel.prototype.getUpdatePayload = function () {\n    return this._payload;\n  };\n  /**\r\n   * @param idx If not specified, return the first one.\r\n   */\n  GlobalModel.prototype.getComponent = function (mainType, idx) {\n    var list = this._componentsMap.get(mainType);\n    if (list) {\n      var cmpt = list[idx || 0];\n      if (cmpt) {\n        return cmpt;\n      } else if (idx == null) {\n        for (var i = 0; i < list.length; i++) {\n          if (list[i]) {\n            return list[i];\n          }\n        }\n      }\n    }\n  };\n  /**\r\n   * @return Never be null/undefined.\r\n   */\n  GlobalModel.prototype.queryComponents = function (condition) {\n    var mainType = condition.mainType;\n    if (!mainType) {\n      return [];\n    }\n    var index = condition.index;\n    var id = condition.id;\n    var name = condition.name;\n    var cmpts = this._componentsMap.get(mainType);\n    if (!cmpts || !cmpts.length) {\n      return [];\n    }\n    var result;\n    if (index != null) {\n      result = [];\n      each(modelUtil.normalizeToArray(index), function (idx) {\n        cmpts[idx] && result.push(cmpts[idx]);\n      });\n    } else if (id != null) {\n      result = queryByIdOrName('id', id, cmpts);\n    } else if (name != null) {\n      result = queryByIdOrName('name', name, cmpts);\n    } else {\n      // Return all non-empty components in that mainType\n      result = filter(cmpts, function (cmpt) {\n        return !!cmpt;\n      });\n    }\n    return filterBySubType(result, condition);\n  };\n  /**\r\n   * The interface is different from queryComponents,\r\n   * which is convenient for inner usage.\r\n   *\r\n   * @usage\r\n   * let result = findComponents(\r\n   *     {mainType: 'dataZoom', query: {dataZoomId: 'abc'}}\r\n   * );\r\n   * let result = findComponents(\r\n   *     {mainType: 'series', subType: 'pie', query: {seriesName: 'uio'}}\r\n   * );\r\n   * let result = findComponents(\r\n   *     {mainType: 'series',\r\n   *     filter: function (model, index) {...}}\r\n   * );\r\n   * // result like [component0, componnet1, ...]\r\n   */\n  GlobalModel.prototype.findComponents = function (condition) {\n    var query = condition.query;\n    var mainType = condition.mainType;\n    var queryCond = getQueryCond(query);\n    var result = queryCond ? this.queryComponents(queryCond)\n    // Retrieve all non-empty components.\n    : filter(this._componentsMap.get(mainType), function (cmpt) {\n      return !!cmpt;\n    });\n    return doFilter(filterBySubType(result, condition));\n    function getQueryCond(q) {\n      var indexAttr = mainType + 'Index';\n      var idAttr = mainType + 'Id';\n      var nameAttr = mainType + 'Name';\n      return q && (q[indexAttr] != null || q[idAttr] != null || q[nameAttr] != null) ? {\n        mainType: mainType,\n        // subType will be filtered finally.\n        index: q[indexAttr],\n        id: q[idAttr],\n        name: q[nameAttr]\n      } : null;\n    }\n    function doFilter(res) {\n      return condition.filter ? filter(res, condition.filter) : res;\n    }\n  };\n  GlobalModel.prototype.eachComponent = function (mainType, cb, context) {\n    var componentsMap = this._componentsMap;\n    if (isFunction(mainType)) {\n      var ctxForAll_1 = cb;\n      var cbForAll_1 = mainType;\n      componentsMap.each(function (cmpts, componentType) {\n        for (var i = 0; cmpts && i < cmpts.length; i++) {\n          var cmpt = cmpts[i];\n          cmpt && cbForAll_1.call(ctxForAll_1, componentType, cmpt, cmpt.componentIndex);\n        }\n      });\n    } else {\n      var cmpts = isString(mainType) ? componentsMap.get(mainType) : isObject(mainType) ? this.findComponents(mainType) : null;\n      for (var i = 0; cmpts && i < cmpts.length; i++) {\n        var cmpt = cmpts[i];\n        cmpt && cb.call(context, cmpt, cmpt.componentIndex);\n      }\n    }\n  };\n  /**\r\n   * Get series list before filtered by name.\r\n   */\n  GlobalModel.prototype.getSeriesByName = function (name) {\n    var nameStr = modelUtil.convertOptionIdName(name, null);\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && nameStr != null && oneSeries.name === nameStr;\n    });\n  };\n  /**\r\n   * Get series list before filtered by index.\r\n   */\n  GlobalModel.prototype.getSeriesByIndex = function (seriesIndex) {\n    return this._componentsMap.get('series')[seriesIndex];\n  };\n  /**\r\n   * Get series list before filtered by type.\r\n   * FIXME: rename to getRawSeriesByType?\r\n   */\n  GlobalModel.prototype.getSeriesByType = function (subType) {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries && oneSeries.subType === subType;\n    });\n  };\n  /**\r\n   * Get all series before filtered.\r\n   */\n  GlobalModel.prototype.getSeries = function () {\n    return filter(this._componentsMap.get('series'), function (oneSeries) {\n      return !!oneSeries;\n    });\n  };\n  /**\r\n   * Count series before filtered.\r\n   */\n  GlobalModel.prototype.getSeriesCount = function () {\n    return this._componentsCount.get('series');\n  };\n  /**\r\n   * After filtering, series may be different\r\n   * from raw series.\r\n   */\n  GlobalModel.prototype.eachSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      cb.call(context, series, rawSeriesIndex);\n    }, this);\n  };\n  /**\r\n   * Iterate raw series before filtered.\r\n   *\r\n   * @param {Function} cb\r\n   * @param {*} context\r\n   */\n  GlobalModel.prototype.eachRawSeries = function (cb, context) {\n    each(this._componentsMap.get('series'), function (series) {\n      series && cb.call(context, series, series.componentIndex);\n    });\n  };\n  /**\r\n   * After filtering, series may be different.\r\n   * from raw series.\r\n   */\n  GlobalModel.prototype.eachSeriesByType = function (subType, cb, context) {\n    assertSeriesInitialized(this);\n    each(this._seriesIndices, function (rawSeriesIndex) {\n      var series = this._componentsMap.get('series')[rawSeriesIndex];\n      if (series.subType === subType) {\n        cb.call(context, series, rawSeriesIndex);\n      }\n    }, this);\n  };\n  /**\r\n   * Iterate raw series before filtered of given type.\r\n   */\n  GlobalModel.prototype.eachRawSeriesByType = function (subType, cb, context) {\n    return each(this.getSeriesByType(subType), cb, context);\n  };\n  GlobalModel.prototype.isSeriesFiltered = function (seriesModel) {\n    assertSeriesInitialized(this);\n    return this._seriesIndicesMap.get(seriesModel.componentIndex) == null;\n  };\n  GlobalModel.prototype.getCurrentSeriesIndices = function () {\n    return (this._seriesIndices || []).slice();\n  };\n  GlobalModel.prototype.filterSeries = function (cb, context) {\n    assertSeriesInitialized(this);\n    var newSeriesIndices = [];\n    each(this._seriesIndices, function (seriesRawIdx) {\n      var series = this._componentsMap.get('series')[seriesRawIdx];\n      cb.call(context, series, seriesRawIdx) && newSeriesIndices.push(seriesRawIdx);\n    }, this);\n    this._seriesIndices = newSeriesIndices;\n    this._seriesIndicesMap = createHashMap(newSeriesIndices);\n  };\n  GlobalModel.prototype.restoreData = function (payload) {\n    reCreateSeriesIndices(this);\n    var componentsMap = this._componentsMap;\n    var componentTypes = [];\n    componentsMap.each(function (components, componentType) {\n      if (ComponentModel.hasClass(componentType)) {\n        componentTypes.push(componentType);\n      }\n    });\n    ComponentModel.topologicalTravel(componentTypes, ComponentModel.getAllClassMainTypes(), function (componentType) {\n      each(componentsMap.get(componentType), function (component) {\n        if (component && (componentType !== 'series' || !isNotTargetSeries(component, payload))) {\n          component.restoreData();\n        }\n      });\n    });\n  };\n  GlobalModel.internalField = function () {\n    reCreateSeriesIndices = function (ecModel) {\n      var seriesIndices = ecModel._seriesIndices = [];\n      each(ecModel._componentsMap.get('series'), function (series) {\n        // series may have been removed by `replaceMerge`.\n        series && seriesIndices.push(series.componentIndex);\n      });\n      ecModel._seriesIndicesMap = createHashMap(seriesIndices);\n    };\n    assertSeriesInitialized = function (ecModel) {\n      // Components that use _seriesIndices should depends on series component,\n      // which make sure that their initialization is after series.\n      if (process.env.NODE_ENV !== 'production') {\n        if (!ecModel._seriesIndices) {\n          throw new Error('Option should contains series.');\n        }\n      }\n    };\n    initBase = function (ecModel, baseOption) {\n      // Using OPTION_INNER_KEY to mark that this option cannot be used outside,\n      // i.e. `chart.setOption(chart.getModel().option);` is forbidden.\n      ecModel.option = {};\n      ecModel.option[OPTION_INNER_KEY] = OPTION_INNER_VALUE;\n      // Init with series: [], in case of calling findSeries method\n      // before series initialized.\n      ecModel._componentsMap = createHashMap({\n        series: []\n      });\n      ecModel._componentsCount = createHashMap();\n      // If user spefied `option.aria`, aria will be enable. This detection should be\n      // performed before theme and globalDefault merge.\n      var airaOption = baseOption.aria;\n      if (isObject(airaOption) && airaOption.enabled == null) {\n        airaOption.enabled = true;\n      }\n      mergeTheme(baseOption, ecModel._theme.option);\n      // TODO Needs clone when merging to the unexisted property\n      merge(baseOption, globalDefault, false);\n      ecModel._mergeOption(baseOption, null);\n    };\n  }();\n  return GlobalModel;\n}(Model);\nfunction isNotTargetSeries(seriesModel, payload) {\n  if (payload) {\n    var index = payload.seriesIndex;\n    var id = payload.seriesId;\n    var name_1 = payload.seriesName;\n    return index != null && seriesModel.componentIndex !== index || id != null && seriesModel.id !== id || name_1 != null && seriesModel.name !== name_1;\n  }\n}\nfunction mergeTheme(option, theme) {\n  // PENDING\n  // NOT use `colorLayer` in theme if option has `color`\n  var notMergeColorLayer = option.color && !option.colorLayer;\n  each(theme, function (themeItem, name) {\n    if (name === 'colorLayer' && notMergeColorLayer) {\n      return;\n    }\n    // If it is component model mainType, the model handles that merge later.\n    // otherwise, merge them here.\n    if (!ComponentModel.hasClass(name)) {\n      if (typeof themeItem === 'object') {\n        option[name] = !option[name] ? clone(themeItem) : merge(option[name], themeItem, false);\n      } else {\n        if (option[name] == null) {\n          option[name] = themeItem;\n        }\n      }\n    }\n  });\n}\nfunction queryByIdOrName(attr, idOrName, cmpts) {\n  // Here is a break from echarts4: string and number are\n  // treated as equal.\n  if (isArray(idOrName)) {\n    var keyMap_1 = createHashMap();\n    each(idOrName, function (idOrNameItem) {\n      if (idOrNameItem != null) {\n        var idName = modelUtil.convertOptionIdName(idOrNameItem, null);\n        idName != null && keyMap_1.set(idOrNameItem, true);\n      }\n    });\n    return filter(cmpts, function (cmpt) {\n      return cmpt && keyMap_1.get(cmpt[attr]);\n    });\n  } else {\n    var idName_1 = modelUtil.convertOptionIdName(idOrName, null);\n    return filter(cmpts, function (cmpt) {\n      return cmpt && idName_1 != null && cmpt[attr] === idName_1;\n    });\n  }\n}\nfunction filterBySubType(components, condition) {\n  // Using hasOwnProperty for restrict. Consider\n  // subType is undefined in user payload.\n  return condition.hasOwnProperty('subType') ? filter(components, function (cmpt) {\n    return cmpt && cmpt.subType === condition.subType;\n  }) : components;\n}\nfunction normalizeSetOptionInput(opts) {\n  var replaceMergeMainTypeMap = createHashMap();\n  opts && each(modelUtil.normalizeToArray(opts.replaceMerge), function (mainType) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(ComponentModel.hasClass(mainType), '\"' + mainType + '\" is not valid component main type in \"replaceMerge\"');\n    }\n    replaceMergeMainTypeMap.set(mainType, true);\n  });\n  return {\n    replaceMergeMainTypeMap: replaceMergeMainTypeMap\n  };\n}\nmixin(GlobalModel, PaletteMixin);\nexport default GlobalModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar availableMethods = ['getDom', 'getZr', 'getWidth', 'getHeight', 'getDevicePixelRatio', 'dispatchAction', 'isSSR', 'isDisposed', 'on', 'off', 'getDataURL', 'getConnectedDataURL',\n// 'getModel',\n'getOption',\n// 'getViewOfComponentModel',\n// 'getViewOfSeriesModel',\n'getId', 'updateLabelLayout'];\nvar ExtensionAPI = /** @class */function () {\n  function ExtensionAPI(ecInstance) {\n    zrUtil.each(availableMethods, function (methodName) {\n      this[methodName] = zrUtil.bind(ecInstance[methodName], ecInstance);\n    }, this);\n  }\n  return ExtensionAPI;\n}();\nexport default ExtensionAPI;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar coordinateSystemCreators = {};\nvar CoordinateSystemManager = /** @class */function () {\n  function CoordinateSystemManager() {\n    this._coordinateSystems = [];\n  }\n  CoordinateSystemManager.prototype.create = function (ecModel, api) {\n    var coordinateSystems = [];\n    zrUtil.each(coordinateSystemCreators, function (creator, type) {\n      var list = creator.create(ecModel, api);\n      coordinateSystems = coordinateSystems.concat(list || []);\n    });\n    this._coordinateSystems = coordinateSystems;\n  };\n  CoordinateSystemManager.prototype.update = function (ecModel, api) {\n    zrUtil.each(this._coordinateSystems, function (coordSys) {\n      coordSys.update && coordSys.update(ecModel, api);\n    });\n  };\n  CoordinateSystemManager.prototype.getCoordinateSystems = function () {\n    return this._coordinateSystems.slice();\n  };\n  CoordinateSystemManager.register = function (type, creator) {\n    coordinateSystemCreators[type] = creator;\n  };\n  CoordinateSystemManager.get = function (type) {\n    return coordinateSystemCreators[type];\n  };\n  return CoordinateSystemManager;\n}();\nexport default CoordinateSystemManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { normalizeToArray\n// , MappingExistingItem, setComponentTypeToKeyInfo, mappingToExists\n} from '../util/model.js';\nimport { each, clone, map, isTypedArray, setAsPrimitive, isArray, isObject\n// , HashMap , createHashMap, extend, merge,\n} from 'zrender/lib/core/util.js';\nimport { error } from '../util/log.js';\nvar QUERY_REG = /^(min|max)?(.+)$/;\n// Key: mainType\n// type FakeComponentsMap = HashMap<(MappingExistingItem & { subType: string })[]>;\n/**\r\n * TERM EXPLANATIONS:\r\n * See `ECOption` and `ECUnitOption` in `src/util/types.ts`.\r\n */\nvar OptionManager = /** @class */function () {\n  // timeline.notMerge is not supported in ec3. Firstly there is rearly\n  // case that notMerge is needed. Secondly supporting 'notMerge' requires\n  // rawOption cloned and backuped when timeline changed, which does no\n  // good to performance. What's more, that both timeline and setOption\n  // method supply 'notMerge' brings complex and some problems.\n  // Consider this case:\n  // (step1) chart.setOption({timeline: {notMerge: false}, ...}, false);\n  // (step2) chart.setOption({timeline: {notMerge: true}, ...}, false);\n  function OptionManager(api) {\n    this._timelineOptions = [];\n    this._mediaList = [];\n    /**\r\n     * -1, means default.\r\n     * empty means no media.\r\n     */\n    this._currentMediaIndices = [];\n    this._api = api;\n  }\n  OptionManager.prototype.setOption = function (rawOption, optionPreprocessorFuncs, opt) {\n    if (rawOption) {\n      // That set dat primitive is dangerous if user reuse the data when setOption again.\n      each(normalizeToArray(rawOption.series), function (series) {\n        series && series.data && isTypedArray(series.data) && setAsPrimitive(series.data);\n      });\n      each(normalizeToArray(rawOption.dataset), function (dataset) {\n        dataset && dataset.source && isTypedArray(dataset.source) && setAsPrimitive(dataset.source);\n      });\n    }\n    // Caution: some series modify option data, if do not clone,\n    // it should ensure that the repeat modify correctly\n    // (create a new object when modify itself).\n    rawOption = clone(rawOption);\n    // FIXME\n    // If some property is set in timeline options or media option but\n    // not set in baseOption, a warning should be given.\n    var optionBackup = this._optionBackup;\n    var newParsedOption = parseRawOption(rawOption, optionPreprocessorFuncs, !optionBackup);\n    this._newBaseOption = newParsedOption.baseOption;\n    // For setOption at second time (using merge mode);\n    if (optionBackup) {\n      // FIXME\n      // the restore merge solution is essentially incorrect.\n      // the mapping can not be 100% consistent with ecModel, which probably brings\n      // potential bug!\n      // The first merge is delayed, because in most cases, users do not call `setOption` twice.\n      // let fakeCmptsMap = this._fakeCmptsMap;\n      // if (!fakeCmptsMap) {\n      //     fakeCmptsMap = this._fakeCmptsMap = createHashMap();\n      //     mergeToBackupOption(fakeCmptsMap, null, optionBackup.baseOption, null);\n      // }\n      // mergeToBackupOption(\n      //     fakeCmptsMap, optionBackup.baseOption, newParsedOption.baseOption, opt\n      // );\n      // For simplicity, timeline options and media options do not support merge,\n      // that is, if you `setOption` twice and both has timeline options, the latter\n      // timeline options will not be merged to the former, but just substitute them.\n      if (newParsedOption.timelineOptions.length) {\n        optionBackup.timelineOptions = newParsedOption.timelineOptions;\n      }\n      if (newParsedOption.mediaList.length) {\n        optionBackup.mediaList = newParsedOption.mediaList;\n      }\n      if (newParsedOption.mediaDefault) {\n        optionBackup.mediaDefault = newParsedOption.mediaDefault;\n      }\n    } else {\n      this._optionBackup = newParsedOption;\n    }\n  };\n  OptionManager.prototype.mountOption = function (isRecreate) {\n    var optionBackup = this._optionBackup;\n    this._timelineOptions = optionBackup.timelineOptions;\n    this._mediaList = optionBackup.mediaList;\n    this._mediaDefault = optionBackup.mediaDefault;\n    this._currentMediaIndices = [];\n    return clone(isRecreate\n    // this._optionBackup.baseOption, which is created at the first `setOption`\n    // called, and is merged into every new option by inner method `mergeToBackupOption`\n    // each time `setOption` called, can be only used in `isRecreate`, because\n    // its reliability is under suspicion. In other cases option merge is\n    // performed by `model.mergeOption`.\n    ? optionBackup.baseOption : this._newBaseOption);\n  };\n  OptionManager.prototype.getTimelineOption = function (ecModel) {\n    var option;\n    var timelineOptions = this._timelineOptions;\n    if (timelineOptions.length) {\n      // getTimelineOption can only be called after ecModel inited,\n      // so we can get currentIndex from timelineModel.\n      var timelineModel = ecModel.getComponent('timeline');\n      if (timelineModel) {\n        option = clone(\n        // FIXME:TS as TimelineModel or quivlant interface\n        timelineOptions[timelineModel.getCurrentIndex()]);\n      }\n    }\n    return option;\n  };\n  OptionManager.prototype.getMediaOption = function (ecModel) {\n    var ecWidth = this._api.getWidth();\n    var ecHeight = this._api.getHeight();\n    var mediaList = this._mediaList;\n    var mediaDefault = this._mediaDefault;\n    var indices = [];\n    var result = [];\n    // No media defined.\n    if (!mediaList.length && !mediaDefault) {\n      return result;\n    }\n    // Multi media may be applied, the latter defined media has higher priority.\n    for (var i = 0, len = mediaList.length; i < len; i++) {\n      if (applyMediaQuery(mediaList[i].query, ecWidth, ecHeight)) {\n        indices.push(i);\n      }\n    }\n    // FIXME\n    // Whether mediaDefault should force users to provide? Otherwise\n    // the change by media query can not be recorvered.\n    if (!indices.length && mediaDefault) {\n      indices = [-1];\n    }\n    if (indices.length && !indicesEquals(indices, this._currentMediaIndices)) {\n      result = map(indices, function (index) {\n        return clone(index === -1 ? mediaDefault.option : mediaList[index].option);\n      });\n    }\n    // Otherwise return nothing.\n    this._currentMediaIndices = indices;\n    return result;\n  };\n  return OptionManager;\n}();\n/**\r\n * [RAW_OPTION_PATTERNS]\r\n * (Note: \"series: []\" represents all other props in `ECUnitOption`)\r\n *\r\n * (1) No prop \"baseOption\" declared:\r\n * Root option is used as \"baseOption\" (except prop \"options\" and \"media\").\r\n * ```js\r\n * option = {\r\n *     series: [],\r\n *     timeline: {},\r\n *     options: [],\r\n * };\r\n * option = {\r\n *     series: [],\r\n *     media: {},\r\n * };\r\n * option = {\r\n *     series: [],\r\n *     timeline: {},\r\n *     options: [],\r\n *     media: {},\r\n * }\r\n * ```\r\n *\r\n * (2) Prop \"baseOption\" declared:\r\n * If \"baseOption\" declared, `ECUnitOption` props can only be declared\r\n * inside \"baseOption\" except prop \"timeline\" (compat ec2).\r\n * ```js\r\n * option = {\r\n *     baseOption: {\r\n *         timeline: {},\r\n *         series: [],\r\n *     },\r\n *     options: []\r\n * };\r\n * option = {\r\n *     baseOption: {\r\n *         series: [],\r\n *     },\r\n *     media: []\r\n * };\r\n * option = {\r\n *     baseOption: {\r\n *         timeline: {},\r\n *         series: [],\r\n *     },\r\n *     options: []\r\n *     media: []\r\n * };\r\n * option = {\r\n *     // ec3 compat ec2: allow (only) `timeline` declared\r\n *     // outside baseOption. Keep this setting for compat.\r\n *     timeline: {},\r\n *     baseOption: {\r\n *         series: [],\r\n *     },\r\n *     options: [],\r\n *     media: []\r\n * };\r\n * ```\r\n */\nfunction parseRawOption(\n// `rawOption` May be modified\nrawOption, optionPreprocessorFuncs, isNew) {\n  var mediaList = [];\n  var mediaDefault;\n  var baseOption;\n  var declaredBaseOption = rawOption.baseOption;\n  // Compatible with ec2, [RAW_OPTION_PATTERNS] above.\n  var timelineOnRoot = rawOption.timeline;\n  var timelineOptionsOnRoot = rawOption.options;\n  var mediaOnRoot = rawOption.media;\n  var hasMedia = !!rawOption.media;\n  var hasTimeline = !!(timelineOptionsOnRoot || timelineOnRoot || declaredBaseOption && declaredBaseOption.timeline);\n  if (declaredBaseOption) {\n    baseOption = declaredBaseOption;\n    // For merge option.\n    if (!baseOption.timeline) {\n      baseOption.timeline = timelineOnRoot;\n    }\n  }\n  // For convenience, enable to use the root option as the `baseOption`:\n  // `{ ...normalOptionProps, media: [{ ... }, { ... }] }`\n  else {\n    if (hasTimeline || hasMedia) {\n      rawOption.options = rawOption.media = null;\n    }\n    baseOption = rawOption;\n  }\n  if (hasMedia) {\n    if (isArray(mediaOnRoot)) {\n      each(mediaOnRoot, function (singleMedia) {\n        if (process.env.NODE_ENV !== 'production') {\n          // Real case of wrong config.\n          if (singleMedia && !singleMedia.option && isObject(singleMedia.query) && isObject(singleMedia.query.option)) {\n            error('Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }');\n          }\n        }\n        if (singleMedia && singleMedia.option) {\n          if (singleMedia.query) {\n            mediaList.push(singleMedia);\n          } else if (!mediaDefault) {\n            // Use the first media default.\n            mediaDefault = singleMedia;\n          }\n        }\n      });\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        // Real case of wrong config.\n        error('Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }');\n      }\n    }\n  }\n  doPreprocess(baseOption);\n  each(timelineOptionsOnRoot, function (option) {\n    return doPreprocess(option);\n  });\n  each(mediaList, function (media) {\n    return doPreprocess(media.option);\n  });\n  function doPreprocess(option) {\n    each(optionPreprocessorFuncs, function (preProcess) {\n      preProcess(option, isNew);\n    });\n  }\n  return {\n    baseOption: baseOption,\n    timelineOptions: timelineOptionsOnRoot || [],\n    mediaDefault: mediaDefault,\n    mediaList: mediaList\n  };\n}\n/**\r\n * @see <http://www.w3.org/TR/css3-mediaqueries/#media1>\r\n * Support: width, height, aspectRatio\r\n * Can use max or min as prefix.\r\n */\nfunction applyMediaQuery(query, ecWidth, ecHeight) {\n  var realMap = {\n    width: ecWidth,\n    height: ecHeight,\n    aspectratio: ecWidth / ecHeight // lower case for convenience.\n  };\n  var applicable = true;\n  each(query, function (value, attr) {\n    var matched = attr.match(QUERY_REG);\n    if (!matched || !matched[1] || !matched[2]) {\n      return;\n    }\n    var operator = matched[1];\n    var realAttr = matched[2].toLowerCase();\n    if (!compare(realMap[realAttr], value, operator)) {\n      applicable = false;\n    }\n  });\n  return applicable;\n}\nfunction compare(real, expect, operator) {\n  if (operator === 'min') {\n    return real >= expect;\n  } else if (operator === 'max') {\n    return real <= expect;\n  } else {\n    // Equals\n    return real === expect;\n  }\n}\nfunction indicesEquals(indices1, indices2) {\n  // indices is always order by asc and has only finite number.\n  return indices1.join(',') === indices2.join(',');\n}\n/**\r\n * Consider case:\r\n * `chart.setOption(opt1);`\r\n * Then user do some interaction like dataZoom, dataView changing.\r\n * `chart.setOption(opt2);`\r\n * Then user press 'reset button' in toolbox.\r\n *\r\n * After doing that all of the interaction effects should be reset, the\r\n * chart should be the same as the result of invoke\r\n * `chart.setOption(opt1); chart.setOption(opt2);`.\r\n *\r\n * Although it is not able ensure that\r\n * `chart.setOption(opt1); chart.setOption(opt2);` is equivalents to\r\n * `chart.setOption(merge(opt1, opt2));` exactly,\r\n * this might be the only simple way to implement that feature.\r\n *\r\n * MEMO: We've considered some other approaches:\r\n * 1. Each model handles its self restoration but not uniform treatment.\r\n *     (Too complex in logic and error-prone)\r\n * 2. Use a shadow ecModel. (Performance expensive)\r\n *\r\n * FIXME: A possible solution:\r\n * Add a extra level of model for each component model. The inheritance chain would be:\r\n * ecModel <- componentModel <- componentActionModel <- dataItemModel\r\n * And all of the actions can only modify the `componentActionModel` rather than\r\n * `componentModel`. `setOption` will only modify the `ecModel` and `componentModel`.\r\n * When \"resotre\" action triggered, model from `componentActionModel` will be discarded\r\n * instead of recreating the \"ecModel\" from the \"_optionBackup\".\r\n */\n// function mergeToBackupOption(\n//     fakeCmptsMap: FakeComponentsMap,\n//     // `tarOption` Can be null/undefined, means init\n//     tarOption: ECUnitOption,\n//     newOption: ECUnitOption,\n//     // Can be null/undefined\n//     opt: InnerSetOptionOpts\n// ): void {\n//     newOption = newOption || {} as ECUnitOption;\n//     const notInit = !!tarOption;\n//     each(newOption, function (newOptsInMainType, mainType) {\n//         if (newOptsInMainType == null) {\n//             return;\n//         }\n//         if (!ComponentModel.hasClass(mainType)) {\n//             if (tarOption) {\n//                 tarOption[mainType] = merge(tarOption[mainType], newOptsInMainType, true);\n//             }\n//         }\n//         else {\n//             const oldTarOptsInMainType = notInit ? normalizeToArray(tarOption[mainType]) : null;\n//             const oldFakeCmptsInMainType = fakeCmptsMap.get(mainType) || [];\n//             const resultTarOptsInMainType = notInit ? (tarOption[mainType] = [] as ComponentOption[]) : null;\n//             const resultFakeCmptsInMainType = fakeCmptsMap.set(mainType, []);\n//             const mappingResult = mappingToExists(\n//                 oldFakeCmptsInMainType,\n//                 normalizeToArray(newOptsInMainType),\n//                 (opt && opt.replaceMergeMainTypeMap.get(mainType)) ? 'replaceMerge' : 'normalMerge'\n//             );\n//             setComponentTypeToKeyInfo(mappingResult, mainType, ComponentModel as ComponentModelConstructor);\n//             each(mappingResult, function (resultItem, index) {\n//                 // The same logic as `Global.ts#_mergeOption`.\n//                 let fakeCmpt = resultItem.existing;\n//                 const newOption = resultItem.newOption;\n//                 const keyInfo = resultItem.keyInfo;\n//                 let fakeCmptOpt;\n//                 if (!newOption) {\n//                     fakeCmptOpt = oldTarOptsInMainType[index];\n//                 }\n//                 else {\n//                     if (fakeCmpt && fakeCmpt.subType === keyInfo.subType) {\n//                         fakeCmpt.name = keyInfo.name;\n//                         if (notInit) {\n//                             fakeCmptOpt = merge(oldTarOptsInMainType[index], newOption, true);\n//                         }\n//                     }\n//                     else {\n//                         fakeCmpt = extend({}, keyInfo);\n//                         if (notInit) {\n//                             fakeCmptOpt = clone(newOption);\n//                         }\n//                     }\n//                 }\n//                 if (fakeCmpt) {\n//                     notInit && resultTarOptsInMainType.push(fakeCmptOpt);\n//                     resultFakeCmptsInMainType.push(fakeCmpt);\n//                 }\n//                 else {\n//                     notInit && resultTarOptsInMainType.push(void 0);\n//                     resultFakeCmptsInMainType.push(void 0);\n//                 }\n//             });\n//         }\n//     });\n// }\nexport default OptionManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../../util/log.js';\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar POSSIBLE_STYLES = ['areaStyle', 'lineStyle', 'nodeStyle', 'linkStyle', 'chordStyle', 'label', 'labelLine'];\nfunction compatEC2ItemStyle(opt) {\n  var itemStyleOpt = opt && opt.itemStyle;\n  if (!itemStyleOpt) {\n    return;\n  }\n  for (var i = 0, len = POSSIBLE_STYLES.length; i < len; i++) {\n    var styleName = POSSIBLE_STYLES[i];\n    var normalItemStyleOpt = itemStyleOpt.normal;\n    var emphasisItemStyleOpt = itemStyleOpt.emphasis;\n    if (normalItemStyleOpt && normalItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.normal.\" + styleName, styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].normal) {\n        opt[styleName].normal = normalItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].normal, normalItemStyleOpt[styleName]);\n      }\n      normalItemStyleOpt[styleName] = null;\n    }\n    if (emphasisItemStyleOpt && emphasisItemStyleOpt[styleName]) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(\"itemStyle.emphasis.\" + styleName, \"emphasis.\" + styleName);\n      }\n      opt[styleName] = opt[styleName] || {};\n      if (!opt[styleName].emphasis) {\n        opt[styleName].emphasis = emphasisItemStyleOpt[styleName];\n      } else {\n        zrUtil.merge(opt[styleName].emphasis, emphasisItemStyleOpt[styleName]);\n      }\n      emphasisItemStyleOpt[styleName] = null;\n    }\n  }\n}\nfunction convertNormalEmphasis(opt, optType, useExtend) {\n  if (opt && opt[optType] && (opt[optType].normal || opt[optType].emphasis)) {\n    var normalOpt = opt[optType].normal;\n    var emphasisOpt = opt[optType].emphasis;\n    if (normalOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        // eslint-disable-next-line max-len\n        deprecateLog(\"'normal' hierarchy in \" + optType + \" has been removed since 4.0. All style properties are configured in \" + optType + \" directly now.\");\n      }\n      // Timeline controlStyle has other properties besides normal and emphasis\n      if (useExtend) {\n        opt[optType].normal = opt[optType].emphasis = null;\n        zrUtil.defaults(opt[optType], normalOpt);\n      } else {\n        opt[optType] = normalOpt;\n      }\n    }\n    if (emphasisOpt) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog(optType + \".emphasis has been changed to emphasis.\" + optType + \" since 4.0\");\n      }\n      opt.emphasis = opt.emphasis || {};\n      opt.emphasis[optType] = emphasisOpt;\n      // Also compat the case user mix the style and focus together in ec3 style\n      // for example: { itemStyle: { normal: {}, emphasis: {focus, shadowBlur} } }\n      if (emphasisOpt.focus) {\n        opt.emphasis.focus = emphasisOpt.focus;\n      }\n      if (emphasisOpt.blurScope) {\n        opt.emphasis.blurScope = emphasisOpt.blurScope;\n      }\n    }\n  }\n}\nfunction removeEC3NormalStatus(opt) {\n  convertNormalEmphasis(opt, 'itemStyle');\n  convertNormalEmphasis(opt, 'lineStyle');\n  convertNormalEmphasis(opt, 'areaStyle');\n  convertNormalEmphasis(opt, 'label');\n  convertNormalEmphasis(opt, 'labelLine');\n  // treemap\n  convertNormalEmphasis(opt, 'upperLabel');\n  // graph\n  convertNormalEmphasis(opt, 'edgeLabel');\n}\nfunction compatTextStyle(opt, propName) {\n  // Check whether is not object (string\\null\\undefined ...)\n  var labelOptSingle = isObject(opt) && opt[propName];\n  var textStyle = isObject(labelOptSingle) && labelOptSingle.textStyle;\n  if (textStyle) {\n    if (process.env.NODE_ENV !== 'production') {\n      // eslint-disable-next-line max-len\n      deprecateLog(\"textStyle hierarchy in \" + propName + \" has been removed since 4.0. All textStyle properties are configured in \" + propName + \" directly now.\");\n    }\n    for (var i = 0, len = modelUtil.TEXT_STYLE_OPTIONS.length; i < len; i++) {\n      var textPropName = modelUtil.TEXT_STYLE_OPTIONS[i];\n      if (textStyle.hasOwnProperty(textPropName)) {\n        labelOptSingle[textPropName] = textStyle[textPropName];\n      }\n    }\n  }\n}\nfunction compatEC3CommonStyles(opt) {\n  if (opt) {\n    removeEC3NormalStatus(opt);\n    compatTextStyle(opt, 'label');\n    opt.emphasis && compatTextStyle(opt.emphasis, 'label');\n  }\n}\nfunction processSeries(seriesOpt) {\n  if (!isObject(seriesOpt)) {\n    return;\n  }\n  compatEC2ItemStyle(seriesOpt);\n  removeEC3NormalStatus(seriesOpt);\n  compatTextStyle(seriesOpt, 'label');\n  // treemap\n  compatTextStyle(seriesOpt, 'upperLabel');\n  // graph\n  compatTextStyle(seriesOpt, 'edgeLabel');\n  if (seriesOpt.emphasis) {\n    compatTextStyle(seriesOpt.emphasis, 'label');\n    // treemap\n    compatTextStyle(seriesOpt.emphasis, 'upperLabel');\n    // graph\n    compatTextStyle(seriesOpt.emphasis, 'edgeLabel');\n  }\n  var markPoint = seriesOpt.markPoint;\n  if (markPoint) {\n    compatEC2ItemStyle(markPoint);\n    compatEC3CommonStyles(markPoint);\n  }\n  var markLine = seriesOpt.markLine;\n  if (markLine) {\n    compatEC2ItemStyle(markLine);\n    compatEC3CommonStyles(markLine);\n  }\n  var markArea = seriesOpt.markArea;\n  if (markArea) {\n    compatEC3CommonStyles(markArea);\n  }\n  var data = seriesOpt.data;\n  // Break with ec3: if `setOption` again, there may be no `type` in option,\n  // then the backward compat based on option type will not be performed.\n  if (seriesOpt.type === 'graph') {\n    data = data || seriesOpt.nodes;\n    var edgeData = seriesOpt.links || seriesOpt.edges;\n    if (edgeData && !zrUtil.isTypedArray(edgeData)) {\n      for (var i = 0; i < edgeData.length; i++) {\n        compatEC3CommonStyles(edgeData[i]);\n      }\n    }\n    zrUtil.each(seriesOpt.categories, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  }\n  if (data && !zrUtil.isTypedArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      compatEC3CommonStyles(data[i]);\n    }\n  }\n  // mark point data\n  markPoint = seriesOpt.markPoint;\n  if (markPoint && markPoint.data) {\n    var mpData = markPoint.data;\n    for (var i = 0; i < mpData.length; i++) {\n      compatEC3CommonStyles(mpData[i]);\n    }\n  }\n  // mark line data\n  markLine = seriesOpt.markLine;\n  if (markLine && markLine.data) {\n    var mlData = markLine.data;\n    for (var i = 0; i < mlData.length; i++) {\n      if (zrUtil.isArray(mlData[i])) {\n        compatEC3CommonStyles(mlData[i][0]);\n        compatEC3CommonStyles(mlData[i][1]);\n      } else {\n        compatEC3CommonStyles(mlData[i]);\n      }\n    }\n  }\n  // Series\n  if (seriesOpt.type === 'gauge') {\n    compatTextStyle(seriesOpt, 'axisLabel');\n    compatTextStyle(seriesOpt, 'title');\n    compatTextStyle(seriesOpt, 'detail');\n  } else if (seriesOpt.type === 'treemap') {\n    convertNormalEmphasis(seriesOpt.breadcrumb, 'itemStyle');\n    zrUtil.each(seriesOpt.levels, function (opt) {\n      removeEC3NormalStatus(opt);\n    });\n  } else if (seriesOpt.type === 'tree') {\n    removeEC3NormalStatus(seriesOpt.leaves);\n  }\n  // sunburst starts from ec4, so it does not need to compat levels.\n}\nfunction toArr(o) {\n  return zrUtil.isArray(o) ? o : o ? [o] : [];\n}\nfunction toObj(o) {\n  return (zrUtil.isArray(o) ? o[0] : o) || {};\n}\nexport default function globalCompatStyle(option, isTheme) {\n  each(toArr(option.series), function (seriesOpt) {\n    isObject(seriesOpt) && processSeries(seriesOpt);\n  });\n  var axes = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'parallelAxis', 'radar'];\n  isTheme && axes.push('valueAxis', 'categoryAxis', 'logAxis', 'timeAxis');\n  each(axes, function (axisName) {\n    each(toArr(option[axisName]), function (axisOpt) {\n      if (axisOpt) {\n        compatTextStyle(axisOpt, 'axisLabel');\n        compatTextStyle(axisOpt.axisPointer, 'label');\n      }\n    });\n  });\n  each(toArr(option.parallel), function (parallelOpt) {\n    var parallelAxisDefault = parallelOpt && parallelOpt.parallelAxisDefault;\n    compatTextStyle(parallelAxisDefault, 'axisLabel');\n    compatTextStyle(parallelAxisDefault && parallelAxisDefault.axisPointer, 'label');\n  });\n  each(toArr(option.calendar), function (calendarOpt) {\n    convertNormalEmphasis(calendarOpt, 'itemStyle');\n    compatTextStyle(calendarOpt, 'dayLabel');\n    compatTextStyle(calendarOpt, 'monthLabel');\n    compatTextStyle(calendarOpt, 'yearLabel');\n  });\n  // radar.name.textStyle\n  each(toArr(option.radar), function (radarOpt) {\n    compatTextStyle(radarOpt, 'name');\n    // Use axisName instead of name because component has name property\n    if (radarOpt.name && radarOpt.axisName == null) {\n      radarOpt.axisName = radarOpt.name;\n      delete radarOpt.name;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('name property in radar component has been changed to axisName');\n      }\n    }\n    if (radarOpt.nameGap != null && radarOpt.axisNameGap == null) {\n      radarOpt.axisNameGap = radarOpt.nameGap;\n      delete radarOpt.nameGap;\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateLog('nameGap property in radar component has been changed to axisNameGap');\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      each(radarOpt.indicator, function (indicatorOpt) {\n        if (indicatorOpt.text) {\n          deprecateReplaceLog('text', 'name', 'radar.indicator');\n        }\n      });\n    }\n  });\n  each(toArr(option.geo), function (geoOpt) {\n    if (isObject(geoOpt)) {\n      compatEC3CommonStyles(geoOpt);\n      each(toArr(geoOpt.regions), function (regionObj) {\n        compatEC3CommonStyles(regionObj);\n      });\n    }\n  });\n  each(toArr(option.timeline), function (timelineOpt) {\n    compatEC3CommonStyles(timelineOpt);\n    convertNormalEmphasis(timelineOpt, 'label');\n    convertNormalEmphasis(timelineOpt, 'itemStyle');\n    convertNormalEmphasis(timelineOpt, 'controlStyle', true);\n    var data = timelineOpt.data;\n    zrUtil.isArray(data) && zrUtil.each(data, function (item) {\n      if (zrUtil.isObject(item)) {\n        convertNormalEmphasis(item, 'label');\n        convertNormalEmphasis(item, 'itemStyle');\n      }\n    });\n  });\n  each(toArr(option.toolbox), function (toolboxOpt) {\n    convertNormalEmphasis(toolboxOpt, 'iconStyle');\n    each(toolboxOpt.feature, function (featureOpt) {\n      convertNormalEmphasis(featureOpt, 'iconStyle');\n    });\n  });\n  compatTextStyle(toObj(option.axisPointer), 'label');\n  compatTextStyle(toObj(option.tooltip).axisPointer, 'label');\n  // Clean logs\n  // storedLogs = {};\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isArray, isObject, isTypedArray, defaults } from 'zrender/lib/core/util.js';\nimport compatStyle from './helper/compatStyle.js';\nimport { normalizeToArray } from '../util/model.js';\nimport { deprecateLog, deprecateReplaceLog } from '../util/log.js';\nfunction get(opt, path) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  for (var i = 0; i < pathArr.length; i++) {\n    obj = obj && obj[pathArr[i]];\n    if (obj == null) {\n      break;\n    }\n  }\n  return obj;\n}\nfunction set(opt, path, val, overwrite) {\n  var pathArr = path.split(',');\n  var obj = opt;\n  var key;\n  var i = 0;\n  for (; i < pathArr.length - 1; i++) {\n    key = pathArr[i];\n    if (obj[key] == null) {\n      obj[key] = {};\n    }\n    obj = obj[key];\n  }\n  if (overwrite || obj[pathArr[i]] == null) {\n    obj[pathArr[i]] = val;\n  }\n}\nfunction compatLayoutProperties(option) {\n  option && each(LAYOUT_PROPERTIES, function (prop) {\n    if (prop[0] in option && !(prop[1] in option)) {\n      option[prop[1]] = option[prop[0]];\n    }\n  });\n}\nvar LAYOUT_PROPERTIES = [['x', 'left'], ['y', 'top'], ['x2', 'right'], ['y2', 'bottom']];\nvar COMPATITABLE_COMPONENTS = ['grid', 'geo', 'parallel', 'legend', 'toolbox', 'title', 'visualMap', 'dataZoom', 'timeline'];\nvar BAR_ITEM_STYLE_MAP = [['borderRadius', 'barBorderRadius'], ['borderColor', 'barBorderColor'], ['borderWidth', 'barBorderWidth']];\nfunction compatBarItemStyle(option) {\n  var itemStyle = option && option.itemStyle;\n  if (itemStyle) {\n    for (var i = 0; i < BAR_ITEM_STYLE_MAP.length; i++) {\n      var oldName = BAR_ITEM_STYLE_MAP[i][1];\n      var newName = BAR_ITEM_STYLE_MAP[i][0];\n      if (itemStyle[oldName] != null) {\n        itemStyle[newName] = itemStyle[oldName];\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog(oldName, newName);\n        }\n      }\n    }\n  }\n}\nfunction compatPieLabel(option) {\n  if (!option) {\n    return;\n  }\n  if (option.alignTo === 'edge' && option.margin != null && option.edgeDistance == null) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('label.margin', 'label.edgeDistance', 'pie');\n    }\n    option.edgeDistance = option.margin;\n  }\n}\nfunction compatSunburstState(option) {\n  if (!option) {\n    return;\n  }\n  if (option.downplay && !option.blur) {\n    option.blur = option.downplay;\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('downplay', 'blur', 'sunburst');\n    }\n  }\n}\nfunction compatGraphFocus(option) {\n  if (!option) {\n    return;\n  }\n  if (option.focusNodeAdjacency != null) {\n    option.emphasis = option.emphasis || {};\n    if (option.emphasis.focus == null) {\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog('focusNodeAdjacency', 'emphasis: { focus: \\'adjacency\\'}', 'graph/sankey');\n      }\n      option.emphasis.focus = 'adjacency';\n    }\n  }\n}\nfunction traverseTree(data, cb) {\n  if (data) {\n    for (var i = 0; i < data.length; i++) {\n      cb(data[i]);\n      data[i] && traverseTree(data[i].children, cb);\n    }\n  }\n}\nexport default function globalBackwardCompat(option, isTheme) {\n  compatStyle(option, isTheme);\n  // Make sure series array for model initialization.\n  option.series = normalizeToArray(option.series);\n  each(option.series, function (seriesOpt) {\n    if (!isObject(seriesOpt)) {\n      return;\n    }\n    var seriesType = seriesOpt.type;\n    if (seriesType === 'line') {\n      if (seriesOpt.clipOverflow != null) {\n        seriesOpt.clip = seriesOpt.clipOverflow;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clipOverflow', 'clip', 'line');\n        }\n      }\n    } else if (seriesType === 'pie' || seriesType === 'gauge') {\n      if (seriesOpt.clockWise != null) {\n        seriesOpt.clockwise = seriesOpt.clockWise;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('clockWise', 'clockwise');\n        }\n      }\n      compatPieLabel(seriesOpt.label);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          compatPieLabel(data[i]);\n        }\n      }\n      if (seriesOpt.hoverOffset != null) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (seriesOpt.emphasis.scaleSize = null) {\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('hoverOffset', 'emphasis.scaleSize');\n          }\n          seriesOpt.emphasis.scaleSize = seriesOpt.hoverOffset;\n        }\n      }\n    } else if (seriesType === 'gauge') {\n      var pointerColor = get(seriesOpt, 'pointer.color');\n      pointerColor != null && set(seriesOpt, 'itemStyle.color', pointerColor);\n    } else if (seriesType === 'bar') {\n      compatBarItemStyle(seriesOpt);\n      compatBarItemStyle(seriesOpt.backgroundStyle);\n      compatBarItemStyle(seriesOpt.emphasis);\n      var data = seriesOpt.data;\n      if (data && !isTypedArray(data)) {\n        for (var i = 0; i < data.length; i++) {\n          if (typeof data[i] === 'object') {\n            compatBarItemStyle(data[i]);\n            compatBarItemStyle(data[i] && data[i].emphasis);\n          }\n        }\n      }\n    } else if (seriesType === 'sunburst') {\n      var highlightPolicy = seriesOpt.highlightPolicy;\n      if (highlightPolicy) {\n        seriesOpt.emphasis = seriesOpt.emphasis || {};\n        if (!seriesOpt.emphasis.focus) {\n          seriesOpt.emphasis.focus = highlightPolicy;\n          if (process.env.NODE_ENV !== 'production') {\n            deprecateReplaceLog('highlightPolicy', 'emphasis.focus', 'sunburst');\n          }\n        }\n      }\n      compatSunburstState(seriesOpt);\n      traverseTree(seriesOpt.data, compatSunburstState);\n    } else if (seriesType === 'graph' || seriesType === 'sankey') {\n      compatGraphFocus(seriesOpt);\n      // TODO nodes, edges?\n    } else if (seriesType === 'map') {\n      if (seriesOpt.mapType && !seriesOpt.map) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('mapType', 'map', 'map');\n        }\n        seriesOpt.map = seriesOpt.mapType;\n      }\n      if (seriesOpt.mapLocation) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('`mapLocation` is not used anymore.');\n        }\n        defaults(seriesOpt, seriesOpt.mapLocation);\n      }\n    }\n    if (seriesOpt.hoverAnimation != null) {\n      seriesOpt.emphasis = seriesOpt.emphasis || {};\n      if (seriesOpt.emphasis && seriesOpt.emphasis.scale == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateReplaceLog('hoverAnimation', 'emphasis.scale');\n        }\n        seriesOpt.emphasis.scale = seriesOpt.hoverAnimation;\n      }\n    }\n    compatLayoutProperties(seriesOpt);\n  });\n  // dataRange has changed to visualMap\n  if (option.dataRange) {\n    option.visualMap = option.dataRange;\n  }\n  each(COMPATITABLE_COMPONENTS, function (componentName) {\n    var options = option[componentName];\n    if (options) {\n      if (!isArray(options)) {\n        options = [options];\n      }\n      each(options, function (option) {\n        compatLayoutProperties(option);\n      });\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { addSafe } from '../util/number.js';\n// (1) [Caution]: the logic is correct based on the premises:\n//     data processing stage is blocked in stream.\n//     See <module:echarts/stream/Scheduler#performDataProcessorTasks>\n// (2) Only register once when import repeatedly.\n//     Should be executed after series is filtered and before stack calculation.\nexport default function dataStack(ecModel) {\n  var stackInfoMap = createHashMap();\n  ecModel.eachSeries(function (seriesModel) {\n    var stack = seriesModel.get('stack');\n    // Compatible: when `stack` is set as '', do not stack.\n    if (stack) {\n      var stackInfoList = stackInfoMap.get(stack) || stackInfoMap.set(stack, []);\n      var data = seriesModel.getData();\n      var stackInfo = {\n        // Used for calculate axis extent automatically.\n        // TODO: Type getCalculationInfo return more specific type?\n        stackResultDimension: data.getCalculationInfo('stackResultDimension'),\n        stackedOverDimension: data.getCalculationInfo('stackedOverDimension'),\n        stackedDimension: data.getCalculationInfo('stackedDimension'),\n        stackedByDimension: data.getCalculationInfo('stackedByDimension'),\n        isStackedByIndex: data.getCalculationInfo('isStackedByIndex'),\n        data: data,\n        seriesModel: seriesModel\n      };\n      // If stacked on axis that do not support data stack.\n      if (!stackInfo.stackedDimension || !(stackInfo.isStackedByIndex || stackInfo.stackedByDimension)) {\n        return;\n      }\n      stackInfoList.length && data.setCalculationInfo('stackedOnSeries', stackInfoList[stackInfoList.length - 1].seriesModel);\n      stackInfoList.push(stackInfo);\n    }\n  });\n  stackInfoMap.each(calculateStack);\n}\nfunction calculateStack(stackInfoList) {\n  each(stackInfoList, function (targetStackInfo, idxInStack) {\n    var resultVal = [];\n    var resultNaN = [NaN, NaN];\n    var dims = [targetStackInfo.stackResultDimension, targetStackInfo.stackedOverDimension];\n    var targetData = targetStackInfo.data;\n    var isStackedByIndex = targetStackInfo.isStackedByIndex;\n    var stackStrategy = targetStackInfo.seriesModel.get('stackStrategy') || 'samesign';\n    // Should not write on raw data, because stack series model list changes\n    // depending on legend selection.\n    targetData.modify(dims, function (v0, v1, dataIndex) {\n      var sum = targetData.get(targetStackInfo.stackedDimension, dataIndex);\n      // Consider `connectNulls` of line area, if value is NaN, stackedOver\n      // should also be NaN, to draw a appropriate belt area.\n      if (isNaN(sum)) {\n        return resultNaN;\n      }\n      var byValue;\n      var stackedDataRawIndex;\n      if (isStackedByIndex) {\n        stackedDataRawIndex = targetData.getRawIndex(dataIndex);\n      } else {\n        byValue = targetData.get(targetStackInfo.stackedByDimension, dataIndex);\n      }\n      // If stackOver is NaN, chart view will render point on value start.\n      var stackedOver = NaN;\n      for (var j = idxInStack - 1; j >= 0; j--) {\n        var stackInfo = stackInfoList[j];\n        // Has been optimized by inverted indices on `stackedByDimension`.\n        if (!isStackedByIndex) {\n          stackedDataRawIndex = stackInfo.data.rawIndexOf(stackInfo.stackedByDimension, byValue);\n        }\n        if (stackedDataRawIndex >= 0) {\n          var val = stackInfo.data.getByRawIndex(stackInfo.stackResultDimension, stackedDataRawIndex);\n          // Considering positive stack, negative stack and empty data\n          if (stackStrategy === 'all' // single stack group\n          || stackStrategy === 'positive' && val > 0 || stackStrategy === 'negative' && val < 0 || stackStrategy === 'samesign' && sum >= 0 && val > 0 // All positive stack\n          || stackStrategy === 'samesign' && sum <= 0 && val < 0 // All negative stack\n          ) {\n            // The sum has to be very small to be affected by the\n            // floating arithmetic problem. An incorrect result will probably\n            // cause axis min/max to be filtered incorrectly.\n            sum = addSafe(sum, val);\n            stackedOver = val;\n            break;\n          }\n        }\n      }\n      resultVal[0] = sum;\n      resultVal[1] = stackedOver;\n      return resultVal;\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isTypedArray, clone, createHashMap, isArray, isObject, isArrayLike, hasOwn, assert, each, map, isNumber, isString, keys } from 'zrender/lib/core/util.js';\nimport { SOURCE_FORMAT_ORIGINAL, SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_UNKNOWN, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SOURCE_FORMAT_OBJECT_ROWS, SERIES_LAYOUT_BY_ROW } from '../util/types.js';\nimport { getDataItemValue } from '../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './helper/sourceHelper.js';\n;\n// @inner\nvar SourceImpl = /** @class */function () {\n  function SourceImpl(fields) {\n    this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n    this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\n    // Visit config\n    this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n    this.startIndex = fields.startIndex || 0;\n    this.dimensionsDetectedCount = fields.dimensionsDetectedCount;\n    this.metaRawOption = fields.metaRawOption;\n    var dimensionsDefine = this.dimensionsDefine = fields.dimensionsDefine;\n    if (dimensionsDefine) {\n      for (var i = 0; i < dimensionsDefine.length; i++) {\n        var dim = dimensionsDefine[i];\n        if (dim.type == null) {\n          if (guessOrdinal(this, i) === BE_ORDINAL.Must) {\n            dim.type = 'ordinal';\n          }\n        }\n      }\n    }\n  }\n  return SourceImpl;\n}();\nexport function isSourceInstance(val) {\n  return val instanceof SourceImpl;\n}\n/**\r\n * Create a source from option.\r\n * NOTE: Created source is immutable. Don't change any properties in it.\r\n */\nexport function createSource(sourceData, thisMetaRawOption,\n// can be null. If not provided, auto detect it from `sourceData`.\nsourceFormat) {\n  sourceFormat = sourceFormat || detectSourceFormat(sourceData);\n  var seriesLayoutBy = thisMetaRawOption.seriesLayoutBy;\n  var determined = determineSourceDimensions(sourceData, sourceFormat, seriesLayoutBy, thisMetaRawOption.sourceHeader, thisMetaRawOption.dimensions);\n  var source = new SourceImpl({\n    data: sourceData,\n    sourceFormat: sourceFormat,\n    seriesLayoutBy: seriesLayoutBy,\n    dimensionsDefine: determined.dimensionsDefine,\n    startIndex: determined.startIndex,\n    dimensionsDetectedCount: determined.dimensionsDetectedCount,\n    metaRawOption: clone(thisMetaRawOption)\n  });\n  return source;\n}\n/**\r\n * Wrap original series data for some compatibility cases.\r\n */\nexport function createSourceFromSeriesDataOption(data) {\n  return new SourceImpl({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL\n  });\n}\n/**\r\n * Clone source but excludes source data.\r\n */\nexport function cloneSourceShallow(source) {\n  return new SourceImpl({\n    data: source.data,\n    sourceFormat: source.sourceFormat,\n    seriesLayoutBy: source.seriesLayoutBy,\n    dimensionsDefine: clone(source.dimensionsDefine),\n    startIndex: source.startIndex,\n    dimensionsDetectedCount: source.dimensionsDetectedCount\n  });\n}\n/**\r\n * Note: An empty array will be detected as `SOURCE_FORMAT_ARRAY_ROWS`.\r\n */\nexport function detectSourceFormat(data) {\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n      if (item == null) {\n        continue;\n      } else if (isArray(item) || isTypedArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (hasOwn(data, key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  }\n  return sourceFormat;\n}\n/**\r\n * Determine the source definitions from data standalone dimensions definitions\r\n * are not specified.\r\n */\nfunction determineSourceDimensions(data, sourceFormat, seriesLayoutBy, sourceHeader,\n// standalone raw dimensions definition, like:\n// {\n//     dimensions: ['aa', 'bb', { name: 'cc', type: 'time' }]\n// }\n// in `dataset` or `series`\ndimensionsDefine) {\n  var dimensionsDetectedCount;\n  var startIndex;\n  // PENDING: Could data be null/undefined here?\n  // currently, if `dataset.source` not specified, error thrown.\n  // if `series.data` not specified, nothing rendered without error thrown.\n  // Should test these cases.\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n      startIndex: startIndex,\n      dimensionsDetectedCount: dimensionsDetectedCount\n    };\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var dataArrayRows = data;\n    // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        }\n        // 10 is an experience number, avoid long loop.\n      }, seriesLayoutBy, dataArrayRows, 10);\n    } else {\n      startIndex = isNumber(sourceHeader) ? sourceHeader : sourceHeader ? 1 : 0;\n    }\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val + '' : '';\n      }, seriesLayoutBy, dataArrayRows, Infinity);\n    }\n    dimensionsDetectedCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? dataArrayRows.length : dataArrayRows[0] ? dataArrayRows[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectedCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!!dimensionsDefine, 'dimensions must be given if data is TypedArray.');\n    }\n  }\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsOption(dimensionsDefine),\n    dimensionsDetectedCount: dimensionsDetectedCount\n  };\n}\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n  if (obj) {\n    return keys(obj);\n  }\n}\n// Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefined or string.\nfunction normalizeDimensionsOption(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (rawItem, index) {\n    rawItem = isObject(rawItem) ? rawItem : {\n      name: rawItem\n    };\n    // Other fields will be discarded.\n    var item = {\n      name: rawItem.name,\n      displayName: rawItem.displayName,\n      type: rawItem.type\n    };\n    // User can set null in dimensions.\n    // We don't auto specify name, otherwise a given name may\n    // cause it to be referred unexpectedly.\n    if (item.name == null) {\n      return item;\n    }\n    // Also consider number form like 2012.\n    item.name += '';\n    // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n    var exist = nameMap.get(item.name);\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n    return item;\n  });\n}\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\nexport function shouldRetrieveDataByName(source) {\n  var sourceFormat = source.sourceFormat;\n  return sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar _a, _b, _c;\n// TODO\n// ??? refactor? check the outer usage of data provider.\n// merge with defaultDimValueGetter?\nimport { isTypedArray, extend, assert, each, isObject, bind } from 'zrender/lib/core/util.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { SOURCE_FORMAT_ORIGINAL, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_KEYED_COLUMNS, SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ARRAY_ROWS, SERIES_LAYOUT_BY_COLUMN, SERIES_LAYOUT_BY_ROW } from '../../util/types.js';\nvar providerMethods;\nvar mountMethods;\n/**\r\n * If normal array used, mutable chunk size is supported.\r\n * If typed array used, chunk size must be fixed.\r\n */\nvar DefaultDataProvider = /** @class */function () {\n  function DefaultDataProvider(sourceParam, dimSize) {\n    // let source: Source;\n    var source = !isSourceInstance(sourceParam) ? createSourceFromSeriesDataOption(sourceParam) : sourceParam;\n    // declare source is Source;\n    this._source = source;\n    var data = this._data = source.data;\n    // Typed array. TODO IE10+?\n    if (source.sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (dimSize == null) {\n          throw new Error('Typed array data must specify dimension size');\n        }\n      }\n      this._offset = 0;\n      this._dimSize = dimSize;\n      this._data = data;\n    }\n    mountMethods(this, data, source);\n  }\n  DefaultDataProvider.prototype.getSource = function () {\n    return this._source;\n  };\n  DefaultDataProvider.prototype.count = function () {\n    return 0;\n  };\n  DefaultDataProvider.prototype.getItem = function (idx, out) {\n    return;\n  };\n  DefaultDataProvider.prototype.appendData = function (newData) {};\n  DefaultDataProvider.prototype.clean = function () {};\n  DefaultDataProvider.protoInitialize = function () {\n    // PENDING: To avoid potential incompat (e.g., prototype\n    // is visited somewhere), still init them on prototype.\n    var proto = DefaultDataProvider.prototype;\n    proto.pure = false;\n    proto.persistent = true;\n  }();\n  DefaultDataProvider.internalField = function () {\n    var _a;\n    mountMethods = function (provider, data, source) {\n      var sourceFormat = source.sourceFormat;\n      var seriesLayoutBy = source.seriesLayoutBy;\n      var startIndex = source.startIndex;\n      var dimsDef = source.dimensionsDefine;\n      var methods = providerMethods[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(methods, 'Invalide sourceFormat: ' + sourceFormat);\n      }\n      extend(provider, methods);\n      if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {\n        provider.getItem = getItemForTypedArray;\n        provider.count = countForTypedArray;\n        provider.fillStorage = fillStorageForTypedArray;\n      } else {\n        var rawItemGetter = getRawSourceItemGetter(sourceFormat, seriesLayoutBy);\n        provider.getItem = bind(rawItemGetter, null, data, startIndex, dimsDef);\n        var rawCounter = getRawSourceDataCounter(sourceFormat, seriesLayoutBy);\n        provider.count = bind(rawCounter, null, data, startIndex, dimsDef);\n      }\n    };\n    var getItemForTypedArray = function (idx, out) {\n      idx = idx - this._offset;\n      out = out || [];\n      var data = this._data;\n      var dimSize = this._dimSize;\n      var offset = dimSize * idx;\n      for (var i = 0; i < dimSize; i++) {\n        out[i] = data[offset + i];\n      }\n      return out;\n    };\n    var fillStorageForTypedArray = function (start, end, storage, extent) {\n      var data = this._data;\n      var dimSize = this._dimSize;\n      for (var dim = 0; dim < dimSize; dim++) {\n        var dimExtent = extent[dim];\n        var min = dimExtent[0] == null ? Infinity : dimExtent[0];\n        var max = dimExtent[1] == null ? -Infinity : dimExtent[1];\n        var count = end - start;\n        var arr = storage[dim];\n        for (var i = 0; i < count; i++) {\n          // appendData with TypedArray will always do replace in provider.\n          var val = data[i * dimSize + dim];\n          arr[start + i] = val;\n          val < min && (min = val);\n          val > max && (max = val);\n        }\n        dimExtent[0] = min;\n        dimExtent[1] = max;\n      }\n    };\n    var countForTypedArray = function () {\n      return this._data ? this._data.length / this._dimSize : 0;\n    };\n    providerMethods = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = {\n      pure: true,\n      appendData: function () {\n        throw new Error('Do not support appendData when set seriesLayoutBy: \"row\".');\n      }\n    }, _a[SOURCE_FORMAT_OBJECT_ROWS] = {\n      pure: true,\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_KEYED_COLUMNS] = {\n      pure: true,\n      appendData: function (newData) {\n        var data = this._data;\n        each(newData, function (newCol, key) {\n          var oldCol = data[key] || (data[key] = []);\n          for (var i = 0; i < (newCol || []).length; i++) {\n            oldCol.push(newCol[i]);\n          }\n        });\n      }\n    }, _a[SOURCE_FORMAT_ORIGINAL] = {\n      appendData: appendDataSimply\n    }, _a[SOURCE_FORMAT_TYPED_ARRAY] = {\n      persistent: false,\n      pure: true,\n      appendData: function (newData) {\n        if (process.env.NODE_ENV !== 'production') {\n          assert(isTypedArray(newData), 'Added data must be TypedArray if data in initialization is TypedArray');\n        }\n        this._data = newData;\n      },\n      // Clean self if data is already used.\n      clean: function () {\n        // PENDING\n        this._offset += this.count();\n        this._data = null;\n      }\n    }, _a);\n    function appendDataSimply(newData) {\n      for (var i = 0; i < newData.length; i++) {\n        this._data.push(newData[i]);\n      }\n    }\n  }();\n  return DefaultDataProvider;\n}();\nexport { DefaultDataProvider };\nvar getItemSimply = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx];\n};\nvar rawSourceItemGetterMap = (_a = {}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef, idx) {\n  return rawData[idx + startIndex];\n}, _a[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef, idx, out) {\n  idx += startIndex;\n  var item = out || [];\n  var data = rawData;\n  for (var i = 0; i < data.length; i++) {\n    var row = data[i];\n    item[i] = row ? row[idx] : null;\n  }\n  return item;\n}, _a[SOURCE_FORMAT_OBJECT_ROWS] = getItemSimply, _a[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef, idx, out) {\n  var item = out || [];\n  for (var i = 0; i < dimsDef.length; i++) {\n    var dimName = dimsDef[i].name;\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimName == null) {\n        throw new Error();\n      }\n    }\n    var col = rawData[dimName];\n    item[i] = col ? col[idx] : null;\n  }\n  return item;\n}, _a[SOURCE_FORMAT_ORIGINAL] = getItemSimply, _a);\nexport function getRawSourceItemGetter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceItemGetterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get item on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar countSimply = function (rawData, startIndex, dimsDef) {\n  return rawData.length;\n};\nvar rawSourceDataCounterMap = (_b = {}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_COLUMN] = function (rawData, startIndex, dimsDef) {\n  return Math.max(0, rawData.length - startIndex);\n}, _b[SOURCE_FORMAT_ARRAY_ROWS + '_' + SERIES_LAYOUT_BY_ROW] = function (rawData, startIndex, dimsDef) {\n  var row = rawData[0];\n  return row ? Math.max(0, row.length - startIndex) : 0;\n}, _b[SOURCE_FORMAT_OBJECT_ROWS] = countSimply, _b[SOURCE_FORMAT_KEYED_COLUMNS] = function (rawData, startIndex, dimsDef) {\n  var dimName = dimsDef[0].name;\n  if (process.env.NODE_ENV !== 'production') {\n    if (dimName == null) {\n      throw new Error();\n    }\n  }\n  var col = rawData[dimName];\n  return col ? col.length : 0;\n}, _b[SOURCE_FORMAT_ORIGINAL] = countSimply, _b);\nexport function getRawSourceDataCounter(sourceFormat, seriesLayoutBy) {\n  var method = rawSourceDataCounterMap[getMethodMapKey(sourceFormat, seriesLayoutBy)];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support count on \"' + sourceFormat + '\", \"' + seriesLayoutBy + '\".');\n  }\n  return method;\n}\nvar getRawValueSimply = function (dataItem, dimIndex, property) {\n  return dataItem[dimIndex];\n};\nvar rawSourceValueGetterMap = (_c = {}, _c[SOURCE_FORMAT_ARRAY_ROWS] = getRawValueSimply, _c[SOURCE_FORMAT_OBJECT_ROWS] = function (dataItem, dimIndex, property) {\n  return dataItem[property];\n}, _c[SOURCE_FORMAT_KEYED_COLUMNS] = getRawValueSimply, _c[SOURCE_FORMAT_ORIGINAL] = function (dataItem, dimIndex, property) {\n  // FIXME: In some case (markpoint in geo (geo-map.html)),\n  // dataItem is {coord: [...]}\n  var value = getDataItemValue(dataItem);\n  return !(value instanceof Array) ? value : value[dimIndex];\n}, _c[SOURCE_FORMAT_TYPED_ARRAY] = getRawValueSimply, _c);\nexport function getRawSourceValueGetter(sourceFormat) {\n  var method = rawSourceValueGetterMap[sourceFormat];\n  if (process.env.NODE_ENV !== 'production') {\n    assert(method, 'Do not support get value on \"' + sourceFormat + '\".');\n  }\n  return method;\n}\nfunction getMethodMapKey(sourceFormat, seriesLayoutBy) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS ? sourceFormat + '_' + seriesLayoutBy : sourceFormat;\n}\n// ??? FIXME can these logic be more neat: getRawValue, getRawDataItem,\n// Consider persistent.\n// Caution: why use raw value to display on label or tooltip?\n// A reason is to avoid format. For example time value we do not know\n// how to format is expected. More over, if stack is used, calculated\n// value may be 0.91000000001, which have brings trouble to display.\n// TODO: consider how to treat null/undefined/NaN when display?\nexport function retrieveRawValue(data, dataIndex,\n// If dimIndex is null/undefined, return OptionDataItem.\n// Otherwise, return OptionDataValue.\ndim) {\n  if (!data) {\n    return;\n  }\n  // Consider data may be not persistent.\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (dataItem == null) {\n    return;\n  }\n  var store = data.getStore();\n  var sourceFormat = store.getSource().sourceFormat;\n  if (dim != null) {\n    var dimIndex = data.getDimensionIndex(dim);\n    var property = store.getDimensionProperty(dimIndex);\n    return getRawSourceValueGetter(sourceFormat)(dataItem, dimIndex, property);\n  } else {\n    var result = dataItem;\n    if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n      result = getDataItemValue(dataItem);\n    }\n    return result;\n  }\n}\n/**\r\n * Compatible with some cases (in pie, map) like:\r\n * data: [{name: 'xx', value: 5, selected: true}, ...]\r\n * where only sourceFormat is 'original' and 'objectRows' supported.\r\n *\r\n * // TODO\r\n * Supported detail options in data item when using 'arrayRows'.\r\n *\r\n * @param data\r\n * @param dataIndex\r\n * @param attr like 'selected'\r\n */\nexport function retrieveRawAttr(data, dataIndex, attr) {\n  if (!data) {\n    return;\n  }\n  var sourceFormat = data.getStore().getSource().sourceFormat;\n  if (sourceFormat !== SOURCE_FORMAT_ORIGINAL && sourceFormat !== SOURCE_FORMAT_OBJECT_ROWS) {\n    return;\n  }\n  var dataItem = data.getRawDataItem(dataIndex);\n  if (sourceFormat === SOURCE_FORMAT_ORIGINAL && !isObject(dataItem)) {\n    dataItem = null;\n  }\n  if (dataItem) {\n    return dataItem[attr];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { formatTpl } from '../../util/format.js';\nimport { error, makePrintable } from '../../util/log.js';\nvar DIMENSION_LABEL_REG = /\\{@(.+?)\\}/g;\nvar DataFormatMixin = /** @class */function () {\n  function DataFormatMixin() {}\n  /**\r\n   * Get params for formatter\r\n   */\n  DataFormatMixin.prototype.getDataParams = function (dataIndex, dataType) {\n    var data = this.getData(dataType);\n    var rawValue = this.getRawValue(dataIndex, dataType);\n    var rawDataIndex = data.getRawIndex(dataIndex);\n    var name = data.getName(dataIndex);\n    var itemOpt = data.getRawDataItem(dataIndex);\n    var style = data.getItemVisual(dataIndex, 'style');\n    var color = style && style[data.getItemVisual(dataIndex, 'drawType') || 'fill'];\n    var borderColor = style && style.stroke;\n    var mainType = this.mainType;\n    var isSeries = mainType === 'series';\n    var userOutput = data.userOutput && data.userOutput.get();\n    return {\n      componentType: mainType,\n      componentSubType: this.subType,\n      componentIndex: this.componentIndex,\n      seriesType: isSeries ? this.subType : null,\n      seriesIndex: this.seriesIndex,\n      seriesId: isSeries ? this.id : null,\n      seriesName: isSeries ? this.name : null,\n      name: name,\n      dataIndex: rawDataIndex,\n      data: itemOpt,\n      dataType: dataType,\n      value: rawValue,\n      color: color,\n      borderColor: borderColor,\n      dimensionNames: userOutput ? userOutput.fullDimensions : null,\n      encode: userOutput ? userOutput.encode : null,\n      // Param name list for mapping `a`, `b`, `c`, `d`, `e`\n      $vars: ['seriesName', 'name', 'value']\n    };\n  };\n  /**\r\n   * Format label\r\n   * @param dataIndex\r\n   * @param status 'normal' by default\r\n   * @param dataType\r\n   * @param labelDimIndex Only used in some chart that\r\n   *        use formatter in different dimensions, like radar.\r\n   * @param formatter Formatter given outside.\r\n   * @return return null/undefined if no formatter\r\n   */\n  DataFormatMixin.prototype.getFormattedLabel = function (dataIndex, status, dataType, labelDimIndex, formatter, extendParams) {\n    status = status || 'normal';\n    var data = this.getData(dataType);\n    var params = this.getDataParams(dataIndex, dataType);\n    if (extendParams) {\n      params.value = extendParams.interpolatedValue;\n    }\n    if (labelDimIndex != null && zrUtil.isArray(params.value)) {\n      params.value = params.value[labelDimIndex];\n    }\n    if (!formatter) {\n      var itemModel = data.getItemModel(dataIndex);\n      // @ts-ignore\n      formatter = itemModel.get(status === 'normal' ? ['label', 'formatter'] : [status, 'label', 'formatter']);\n    }\n    if (zrUtil.isFunction(formatter)) {\n      params.status = status;\n      params.dimensionIndex = labelDimIndex;\n      return formatter(params);\n    } else if (zrUtil.isString(formatter)) {\n      var str = formatTpl(formatter, params);\n      // Support 'aaa{@[3]}bbb{@product}ccc'.\n      // Do not support '}' in dim name util have to.\n      return str.replace(DIMENSION_LABEL_REG, function (origin, dimStr) {\n        var len = dimStr.length;\n        var dimLoose = dimStr;\n        if (dimLoose.charAt(0) === '[' && dimLoose.charAt(len - 1) === ']') {\n          dimLoose = +dimLoose.slice(1, len - 1); // Also support: '[]' => 0\n          if (process.env.NODE_ENV !== 'production') {\n            if (isNaN(dimLoose)) {\n              error(\"Invalide label formatter: @\" + dimStr + \", only support @[0], @[1], @[2], ...\");\n            }\n          }\n        }\n        var val = retrieveRawValue(data, dataIndex, dimLoose);\n        if (extendParams && zrUtil.isArray(extendParams.interpolatedValue)) {\n          var dimIndex = data.getDimensionIndex(dimLoose);\n          if (dimIndex >= 0) {\n            val = extendParams.interpolatedValue[dimIndex];\n          }\n        }\n        return val != null ? val + '' : '';\n      });\n    }\n  };\n  /**\r\n   * Get raw value in option\r\n   */\n  DataFormatMixin.prototype.getRawValue = function (idx, dataType) {\n    return retrieveRawValue(this.getData(dataType), idx);\n  };\n  /**\r\n   * Should be implemented.\r\n   * @param {number} dataIndex\r\n   * @param {boolean} [multipleSeries=false]\r\n   * @param {string} [dataType]\r\n   */\n  DataFormatMixin.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    // Empty function\n    return;\n  };\n  return DataFormatMixin;\n}();\nexport { DataFormatMixin };\n;\n// PENDING: previously we accept this type when calling `formatTooltip`,\n// but guess little chance has been used outside. Do we need to backward\n// compat it?\n// type TooltipFormatResultLegacyObject = {\n//     // `html` means the markup language text, either in 'html' or 'richText'.\n//     // The name `html` is not appropriate because in 'richText' it is not a HTML\n//     // string. But still support it for backward compatibility.\n//     html: string;\n//     markers: Dictionary<ColorString>;\n// };\n/**\r\n * For backward compat, normalize the return from `formatTooltip`.\r\n */\nexport function normalizeTooltipFormatResult(result) {\n  var markupText;\n  // let markers: Dictionary<ColorString>;\n  var markupFragment;\n  if (zrUtil.isObject(result)) {\n    if (result.type) {\n      markupFragment = result;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn('The return type of `formatTooltip` is not supported: ' + makePrintable(result));\n      }\n    }\n    // else {\n    //     markupText = (result as TooltipFormatResultLegacyObject).html;\n    //     markers = (result as TooltipFormatResultLegacyObject).markers;\n    //     if (markersExisting) {\n    //         markers = zrUtil.merge(markersExisting, markers);\n    //     }\n    // }\n  } else {\n    markupText = result;\n  }\n  return {\n    text: markupText,\n    // markers: markers || markersExisting,\n    frag: markupFragment\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { assert, isArray } from 'zrender/lib/core/util.js';\n;\n/**\r\n * @param {Object} define\r\n * @return See the return of `createTask`.\r\n */\nexport function createTask(define) {\n  return new Task(define);\n}\nvar Task = /** @class */function () {\n  function Task(define) {\n    define = define || {};\n    this._reset = define.reset;\n    this._plan = define.plan;\n    this._count = define.count;\n    this._onDirty = define.onDirty;\n    this._dirty = true;\n  }\n  /**\r\n   * @param step Specified step.\r\n   * @param skip Skip customer perform call.\r\n   * @param modBy Sampling window size.\r\n   * @param modDataCount Sampling count.\r\n   * @return whether unfinished.\r\n   */\n  Task.prototype.perform = function (performArgs) {\n    var upTask = this._upstream;\n    var skip = performArgs && performArgs.skip;\n    // TODO some refactor.\n    // Pull data. Must pull data each time, because context.data\n    // may be updated by Series.setData.\n    if (this._dirty && upTask) {\n      var context = this.context;\n      context.data = context.outputData = upTask.context.outputData;\n    }\n    if (this.__pipeline) {\n      this.__pipeline.currentTask = this;\n    }\n    var planResult;\n    if (this._plan && !skip) {\n      planResult = this._plan(this.context);\n    }\n    // Support sharding by mod, which changes the render sequence and makes the rendered graphic\n    // elements uniformed distributed when progress, especially when moving or zooming.\n    var lastModBy = normalizeModBy(this._modBy);\n    var lastModDataCount = this._modDataCount || 0;\n    var modBy = normalizeModBy(performArgs && performArgs.modBy);\n    var modDataCount = performArgs && performArgs.modDataCount || 0;\n    if (lastModBy !== modBy || lastModDataCount !== modDataCount) {\n      planResult = 'reset';\n    }\n    function normalizeModBy(val) {\n      !(val >= 1) && (val = 1); // jshint ignore:line\n      return val;\n    }\n    var forceFirstProgress;\n    if (this._dirty || planResult === 'reset') {\n      this._dirty = false;\n      forceFirstProgress = this._doReset(skip);\n    }\n    this._modBy = modBy;\n    this._modDataCount = modDataCount;\n    var step = performArgs && performArgs.step;\n    if (upTask) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(upTask._outputDueEnd != null);\n      }\n      this._dueEnd = upTask._outputDueEnd;\n    }\n    // DataTask or overallTask\n    else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!this._progress || this._count);\n      }\n      this._dueEnd = this._count ? this._count(this.context) : Infinity;\n    }\n    // Note: Stubs, that its host overall task let it has progress, has progress.\n    // If no progress, pass index from upstream to downstream each time plan called.\n    if (this._progress) {\n      var start = this._dueIndex;\n      var end = Math.min(step != null ? this._dueIndex + step : Infinity, this._dueEnd);\n      if (!skip && (forceFirstProgress || start < end)) {\n        var progress = this._progress;\n        if (isArray(progress)) {\n          for (var i = 0; i < progress.length; i++) {\n            this._doProgress(progress[i], start, end, modBy, modDataCount);\n          }\n        } else {\n          this._doProgress(progress, start, end, modBy, modDataCount);\n        }\n      }\n      this._dueIndex = end;\n      // If no `outputDueEnd`, assume that output data and\n      // input data is the same, so use `dueIndex` as `outputDueEnd`.\n      var outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : end;\n      if (process.env.NODE_ENV !== 'production') {\n        // ??? Can not rollback.\n        assert(outputDueEnd >= this._outputDueEnd);\n      }\n      this._outputDueEnd = outputDueEnd;\n    } else {\n      // (1) Some overall task has no progress.\n      // (2) Stubs, that its host overall task do not let it has progress, has no progress.\n      // This should always be performed so it can be passed to downstream.\n      this._dueIndex = this._outputDueEnd = this._settedOutputEnd != null ? this._settedOutputEnd : this._dueEnd;\n    }\n    return this.unfinished();\n  };\n  Task.prototype.dirty = function () {\n    this._dirty = true;\n    this._onDirty && this._onDirty(this.context);\n  };\n  Task.prototype._doProgress = function (progress, start, end, modBy, modDataCount) {\n    iterator.reset(start, end, modBy, modDataCount);\n    this._callingProgress = progress;\n    this._callingProgress({\n      start: start,\n      end: end,\n      count: end - start,\n      next: iterator.next\n    }, this.context);\n  };\n  Task.prototype._doReset = function (skip) {\n    this._dueIndex = this._outputDueEnd = this._dueEnd = 0;\n    this._settedOutputEnd = null;\n    var progress;\n    var forceFirstProgress;\n    if (!skip && this._reset) {\n      progress = this._reset(this.context);\n      if (progress && progress.progress) {\n        forceFirstProgress = progress.forceFirstProgress;\n        progress = progress.progress;\n      }\n      // To simplify no progress checking, array must has item.\n      if (isArray(progress) && !progress.length) {\n        progress = null;\n      }\n    }\n    this._progress = progress;\n    this._modBy = this._modDataCount = null;\n    var downstream = this._downstream;\n    downstream && downstream.dirty();\n    return forceFirstProgress;\n  };\n  Task.prototype.unfinished = function () {\n    return this._progress && this._dueIndex < this._dueEnd;\n  };\n  /**\r\n   * @param downTask The downstream task.\r\n   * @return The downstream task.\r\n   */\n  Task.prototype.pipe = function (downTask) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(downTask && !downTask._disposed && downTask !== this);\n    }\n    // If already downstream, do not dirty downTask.\n    if (this._downstream !== downTask || this._dirty) {\n      this._downstream = downTask;\n      downTask._upstream = this;\n      downTask.dirty();\n    }\n  };\n  Task.prototype.dispose = function () {\n    if (this._disposed) {\n      return;\n    }\n    this._upstream && (this._upstream._downstream = null);\n    this._downstream && (this._downstream._upstream = null);\n    this._dirty = false;\n    this._disposed = true;\n  };\n  Task.prototype.getUpstream = function () {\n    return this._upstream;\n  };\n  Task.prototype.getDownstream = function () {\n    return this._downstream;\n  };\n  Task.prototype.setOutputEnd = function (end) {\n    // This only happens in dataTask, dataZoom, map, currently.\n    // where dataZoom do not set end each time, but only set\n    // when reset. So we should record the set end, in case\n    // that the stub of dataZoom perform again and earse the\n    // set end by upstream.\n    this._outputDueEnd = this._settedOutputEnd = end;\n  };\n  return Task;\n}();\nexport { Task };\nvar iterator = function () {\n  var end;\n  var current;\n  var modBy;\n  var modDataCount;\n  var winCount;\n  var it = {\n    reset: function (s, e, sStep, sCount) {\n      current = s;\n      end = e;\n      modBy = sStep;\n      modDataCount = sCount;\n      winCount = Math.ceil(modDataCount / modBy);\n      it.next = modBy > 1 && modDataCount > 0 ? modNext : sequentialNext;\n    }\n  };\n  return it;\n  function sequentialNext() {\n    return current < end ? current++ : null;\n  }\n  function modNext() {\n    var dataIndex = current % winCount * modBy + Math.ceil(current / winCount);\n    var result = current >= end ? null : dataIndex < modDataCount ? dataIndex\n    // If modDataCount is smaller than data.count() (consider `appendData` case),\n    // Use normal linear rendering mode.\n    : current;\n    current++;\n    return result;\n  }\n}();\n// -----------------------------------------------------------------------------\n// For stream debug (Should be commented out after used!)\n// @usage: printTask(this, 'begin');\n// @usage: printTask(this, null, {someExtraProp});\n// @usage: Use `__idxInPipeline` as conditional breakpiont.\n//\n// window.printTask = function (task: any, prefix: string, extra: { [key: string]: unknown }): void {\n//     window.ecTaskUID == null && (window.ecTaskUID = 0);\n//     task.uidDebug == null && (task.uidDebug = `task_${window.ecTaskUID++}`);\n//     task.agent && task.agent.uidDebug == null && (task.agent.uidDebug = `task_${window.ecTaskUID++}`);\n//     let props = [];\n//     if (task.__pipeline) {\n//         let val = `${task.__idxInPipeline}/${task.__pipeline.tail.__idxInPipeline} ${task.agent ? '(stub)' : ''}`;\n//         props.push({text: '__idxInPipeline/total', value: val});\n//     } else {\n//         let stubCount = 0;\n//         task.agentStubMap.each(() => stubCount++);\n//         props.push({text: 'idx', value: `overall (stubs: ${stubCount})`});\n//     }\n//     props.push({text: 'uid', value: task.uidDebug});\n//     if (task.__pipeline) {\n//         props.push({text: 'pipelineId', value: task.__pipeline.id});\n//         task.agent && props.push(\n//             {text: 'stubFor', value: task.agent.uidDebug}\n//         );\n//     }\n//     props.push(\n//         {text: 'dirty', value: task._dirty},\n//         {text: 'dueIndex', value: task._dueIndex},\n//         {text: 'dueEnd', value: task._dueEnd},\n//         {text: 'outputDueEnd', value: task._outputDueEnd}\n//     );\n//     if (extra) {\n//         Object.keys(extra).forEach(key => {\n//             props.push({text: key, value: extra[key]});\n//         });\n//     }\n//     let args = ['color: blue'];\n//     let msg = `%c[${prefix || 'T'}] %c` + props.map(item => (\n//         args.push('color: green', 'color: red'),\n//         `${item.text}: %c${item.value}`\n//     )).join('%c, ');\n//     console.log.apply(console, [msg].concat(args));\n//     // console.log(this);\n// };\n// window.printPipeline = function (task: any, prefix: string) {\n//     const pipeline = task.__pipeline;\n//     let currTask = pipeline.head;\n//     while (currTask) {\n//         window.printTask(currTask, prefix);\n//         currTask = currTask._downstream;\n//     }\n// };\n// window.showChain = function (chainHeadTask) {\n//     var chain = [];\n//     var task = chainHeadTask;\n//     while (task) {\n//         chain.push({\n//             task: task,\n//             up: task._upstream,\n//             down: task._downstream,\n//             idxInPipeline: task.__idxInPipeline\n//         });\n//         task = task._downstream;\n//     }\n//     return chain;\n// };\n// window.findTaskInChain = function (task, chainHeadTask) {\n//     let chain = window.showChain(chainHeadTask);\n//     let result = [];\n//     for (let i = 0; i < chain.length; i++) {\n//         let chainItem = chain[i];\n//         if (chainItem.task === task) {\n//             result.push(i);\n//         }\n//     }\n//     return result;\n// };\n// window.printChainAEachInChainB = function (chainHeadTaskA, chainHeadTaskB) {\n//     let chainA = window.showChain(chainHeadTaskA);\n//     for (let i = 0; i < chainA.length; i++) {\n//         console.log('chainAIdx:', i, 'inChainB:', window.findTaskInChain(chainA[i].task, chainHeadTaskB));\n//     }\n// };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { parseDate, numericToNumber } from '../../util/number.js';\nimport { createHashMap, trim, hasOwn, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { throwError } from '../../util/log.js';\n/**\r\n * Convert raw the value in to inner value in List.\r\n *\r\n * [Performance sensitive]\r\n *\r\n * [Caution]: this is the key logic of user value parser.\r\n * For backward compatibility, do not modify it until you have to!\r\n */\nexport function parseDataValue(value,\n// For high performance, do not omit the second param.\nopt) {\n  // Performance sensitive.\n  var dimType = opt && opt.type;\n  if (dimType === 'ordinal') {\n    // If given value is a category string\n    return value;\n  }\n  if (dimType === 'time'\n  // spead up when using timestamp\n  && !isNumber(value) && value != null && value !== '-') {\n    value = +parseDate(value);\n  }\n  // dimType defaults 'number'.\n  // If dimType is not ordinal and value is null or undefined or NaN or '-',\n  // parse to NaN.\n  // number-like string (like ' 123 ') can be converted to a number.\n  // where null/undefined or other string will be converted to NaN.\n  return value == null || value === '' ? NaN\n  // If string (like '-'), using '+' parse to NaN\n  // If object, also parse to NaN\n  : Number(value);\n}\n;\nvar valueParserMap = createHashMap({\n  'number': function (val) {\n    // Do not use `numericToNumber` here. We have `numericToNumber` by default.\n    // Here the number parser can have loose rule:\n    // enable to cut suffix: \"120px\" => 120, \"14%\" => 14.\n    return parseFloat(val);\n  },\n  'time': function (val) {\n    // return timestamp.\n    return +parseDate(val);\n  },\n  'trim': function (val) {\n    return isString(val) ? trim(val) : val;\n  }\n});\nexport function getRawValueParser(type) {\n  return valueParserMap.get(type);\n}\nvar ORDER_COMPARISON_OP_MAP = {\n  lt: function (lval, rval) {\n    return lval < rval;\n  },\n  lte: function (lval, rval) {\n    return lval <= rval;\n  },\n  gt: function (lval, rval) {\n    return lval > rval;\n  },\n  gte: function (lval, rval) {\n    return lval >= rval;\n  }\n};\nvar FilterOrderComparator = /** @class */function () {\n  function FilterOrderComparator(op, rval) {\n    if (!isNumber(rval)) {\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'rvalue of \"<\", \">\", \"<=\", \">=\" can only be number in filter.';\n      }\n      throwError(errMsg);\n    }\n    this._opFn = ORDER_COMPARISON_OP_MAP[op];\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterOrderComparator.prototype.evaluate = function (lval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    return isNumber(lval) ? this._opFn(lval, this._rvalFloat) : this._opFn(numericToNumber(lval), this._rvalFloat);\n  };\n  return FilterOrderComparator;\n}();\nvar SortOrderComparator = /** @class */function () {\n  /**\r\n   * @param order by default: 'asc'\r\n   * @param incomparable by default: Always on the tail.\r\n   *        That is, if 'asc' => 'max', if 'desc' => 'min'\r\n   *        See the definition of \"incomparable\" in [SORT_COMPARISON_RULE].\r\n   */\n  function SortOrderComparator(order, incomparable) {\n    var isDesc = order === 'desc';\n    this._resultLT = isDesc ? 1 : -1;\n    if (incomparable == null) {\n      incomparable = isDesc ? 'min' : 'max';\n    }\n    this._incomparable = incomparable === 'min' ? -Infinity : Infinity;\n  }\n  // See [SORT_COMPARISON_RULE].\n  // Performance sensitive.\n  SortOrderComparator.prototype.evaluate = function (lval, rval) {\n    // Most cases is 'number', and typeof maybe 10 times faseter than parseFloat.\n    var lvalFloat = isNumber(lval) ? lval : numericToNumber(lval);\n    var rvalFloat = isNumber(rval) ? rval : numericToNumber(rval);\n    var lvalNotNumeric = isNaN(lvalFloat);\n    var rvalNotNumeric = isNaN(rvalFloat);\n    if (lvalNotNumeric) {\n      lvalFloat = this._incomparable;\n    }\n    if (rvalNotNumeric) {\n      rvalFloat = this._incomparable;\n    }\n    if (lvalNotNumeric && rvalNotNumeric) {\n      var lvalIsStr = isString(lval);\n      var rvalIsStr = isString(rval);\n      if (lvalIsStr) {\n        lvalFloat = rvalIsStr ? lval : 0;\n      }\n      if (rvalIsStr) {\n        rvalFloat = lvalIsStr ? rval : 0;\n      }\n    }\n    return lvalFloat < rvalFloat ? this._resultLT : lvalFloat > rvalFloat ? -this._resultLT : 0;\n  };\n  return SortOrderComparator;\n}();\nexport { SortOrderComparator };\nvar FilterEqualityComparator = /** @class */function () {\n  function FilterEqualityComparator(isEq, rval) {\n    this._rval = rval;\n    this._isEQ = isEq;\n    this._rvalTypeof = typeof rval;\n    this._rvalFloat = numericToNumber(rval);\n  }\n  // Performance sensitive.\n  FilterEqualityComparator.prototype.evaluate = function (lval) {\n    var eqResult = lval === this._rval;\n    if (!eqResult) {\n      var lvalTypeof = typeof lval;\n      if (lvalTypeof !== this._rvalTypeof && (lvalTypeof === 'number' || this._rvalTypeof === 'number')) {\n        eqResult = numericToNumber(lval) === this._rvalFloat;\n      }\n    }\n    return this._isEQ ? eqResult : !eqResult;\n  };\n  return FilterEqualityComparator;\n}();\n/**\r\n * [FILTER_COMPARISON_RULE]\r\n * `lt`|`lte`|`gt`|`gte`:\r\n * + rval must be a number. And lval will be converted to number (`numericToNumber`) to compare.\r\n * `eq`:\r\n * + If same type, compare with `===`.\r\n * + If there is one number, convert to number (`numericToNumber`) to compare.\r\n * + Else return `false`.\r\n * `ne`:\r\n * + Not `eq`.\r\n *\r\n *\r\n * [SORT_COMPARISON_RULE]\r\n * All the values are grouped into three categories:\r\n * + \"numeric\" (number and numeric string)\r\n * + \"non-numeric-string\" (string that excluding numeric string)\r\n * + \"others\"\r\n * \"numeric\" vs \"numeric\": values are ordered by number order.\r\n * \"non-numeric-string\" vs \"non-numeric-string\": values are ordered by ES spec (#sec-abstract-relational-comparison).\r\n * \"others\" vs \"others\": do not change order (always return 0).\r\n * \"numeric\" vs \"non-numeric-string\": \"non-numeric-string\" is treated as \"incomparable\".\r\n * \"number\" vs \"others\": \"others\" is treated as \"incomparable\".\r\n * \"non-numeric-string\" vs \"others\": \"others\" is treated as \"incomparable\".\r\n * \"incomparable\" will be seen as -Infinity or Infinity (depends on the settings).\r\n * MEMO:\r\n *   Non-numeric string sort makes sense when we need to put the items with the same tag together.\r\n *   But if we support string sort, we still need to avoid the misleading like `'2' > '12'`,\r\n *   So we treat \"numeric-string\" sorted by number order rather than string comparison.\r\n *\r\n *\r\n * [CHECK_LIST_OF_THE_RULE_DESIGN]\r\n * + Do not support string comparison until required. And also need to\r\n *   avoid the misleading of \"2\" > \"12\".\r\n * + Should avoid the misleading case:\r\n *   `\" 22 \" gte \"22\"` is `true` but `\" 22 \" eq \"22\"` is `false`.\r\n * + JS bad case should be avoided: null <= 0, [] <= 0, ' ' <= 0, ...\r\n * + Only \"numeric\" can be converted to comparable number, otherwise converted to NaN.\r\n *   See `util/number.ts#numericToNumber`.\r\n *\r\n * @return If `op` is not `RelationalOperator`, return null;\r\n */\nexport function createFilterComparator(op, rval) {\n  return op === 'eq' || op === 'ne' ? new FilterEqualityComparator(op === 'eq', rval) : hasOwn(ORDER_COMPARISON_OP_MAP, op) ? new FilterOrderComparator(op, rval) : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { SERIES_LAYOUT_BY_COLUMN, SOURCE_FORMAT_OBJECT_ROWS, SOURCE_FORMAT_ARRAY_ROWS } from '../../util/types.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { createHashMap, bind, each, hasOwn, map, clone, isObject, extend, isNumber } from 'zrender/lib/core/util.js';\nimport { getRawSourceItemGetter, getRawSourceDataCounter, getRawSourceValueGetter } from './dataProvider.js';\nimport { parseDataValue } from './dataValueHelper.js';\nimport { log, makePrintable, throwError } from '../../util/log.js';\nimport { createSource, detectSourceFormat } from '../Source.js';\n/**\r\n * TODO: disable writable.\r\n * This structure will be exposed to users.\r\n */\nvar ExternalSource = /** @class */function () {\n  function ExternalSource() {}\n  ExternalSource.prototype.getRawData = function () {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.getRawDataItem = function (dataIndex) {\n    // Only built-in transform available.\n    throw new Error('not supported');\n  };\n  ExternalSource.prototype.cloneRawData = function () {\n    return;\n  };\n  /**\r\n   * @return If dimension not found, return null/undefined.\r\n   */\n  ExternalSource.prototype.getDimensionInfo = function (dim) {\n    return;\n  };\n  /**\r\n   * dimensions defined if and only if either:\r\n   * (a) dataset.dimensions are declared.\r\n   * (b) dataset data include dimensions definitions in data (detected or via specified `sourceHeader`).\r\n   * If dimensions are defined, `dimensionInfoAll` is corresponding to\r\n   * the defined dimensions.\r\n   * Otherwise, `dimensionInfoAll` is determined by data columns.\r\n   * @return Always return an array (even empty array).\r\n   */\n  ExternalSource.prototype.cloneAllDimensionInfo = function () {\n    return;\n  };\n  ExternalSource.prototype.count = function () {\n    return;\n  };\n  /**\r\n   * Only support by dimension index.\r\n   * No need to support by dimension name in transform function,\r\n   * because transform function is not case-specific, no need to use name literally.\r\n   */\n  ExternalSource.prototype.retrieveValue = function (dataIndex, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.retrieveValueFromItem = function (dataItem, dimIndex) {\n    return;\n  };\n  ExternalSource.prototype.convertValue = function (rawVal, dimInfo) {\n    return parseDataValue(rawVal, dimInfo);\n  };\n  return ExternalSource;\n}();\nexport { ExternalSource };\nfunction createExternalSource(internalSource, externalTransform) {\n  var extSource = new ExternalSource();\n  var data = internalSource.data;\n  var sourceFormat = extSource.sourceFormat = internalSource.sourceFormat;\n  var sourceHeaderCount = internalSource.startIndex;\n  var errMsg = '';\n  if (internalSource.seriesLayoutBy !== SERIES_LAYOUT_BY_COLUMN) {\n    // For the logic simplicity in transformer, only 'culumn' is\n    // supported in data transform. Otherwise, the `dimensionsDefine`\n    // might be detected by 'row', which probably confuses users.\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`seriesLayoutBy` of upstream dataset can only be \"column\" in data transform.';\n    }\n    throwError(errMsg);\n  }\n  // [MEMO]\n  // Create a new dimensions structure for exposing.\n  // Do not expose all dimension info to users directly.\n  // Because the dimension is probably auto detected from data and not might reliable.\n  // Should not lead the transformers to think that is reliable and return it.\n  // See [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\n  var dimensions = [];\n  var dimsByName = {};\n  var dimsDef = internalSource.dimensionsDefine;\n  if (dimsDef) {\n    each(dimsDef, function (dimDef, idx) {\n      var name = dimDef.name;\n      var dimDefExt = {\n        index: idx,\n        name: name,\n        displayName: dimDef.displayName\n      };\n      dimensions.push(dimDefExt);\n      // Users probably do not specify dimension name. For simplicity, data transform\n      // does not generate dimension name.\n      if (name != null) {\n        // Dimension name should not be duplicated.\n        // For simplicity, data transform forbids name duplication, do not generate\n        // new name like module `completeDimensions.ts` did, but just tell users.\n        var errMsg_1 = '';\n        if (hasOwn(dimsByName, name)) {\n          if (process.env.NODE_ENV !== 'production') {\n            errMsg_1 = 'dimension name \"' + name + '\" duplicated.';\n          }\n          throwError(errMsg_1);\n        }\n        dimsByName[name] = dimDefExt;\n      }\n    });\n  }\n  // If dimension definitions are not defined and can not be detected.\n  // e.g., pure data `[[11, 22], ...]`.\n  else {\n    for (var i = 0; i < internalSource.dimensionsDetectedCount || 0; i++) {\n      // Do not generete name or anything others. The consequence process in\n      // `transform` or `series` probably have there own name generation strategry.\n      dimensions.push({\n        index: i\n      });\n    }\n  }\n  // Implement public methods:\n  var rawItemGetter = getRawSourceItemGetter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  if (externalTransform.__isBuiltIn) {\n    extSource.getRawDataItem = function (dataIndex) {\n      return rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    };\n    extSource.getRawData = bind(getRawData, null, internalSource);\n  }\n  extSource.cloneRawData = bind(cloneRawData, null, internalSource);\n  var rawCounter = getRawSourceDataCounter(sourceFormat, SERIES_LAYOUT_BY_COLUMN);\n  extSource.count = bind(rawCounter, null, data, sourceHeaderCount, dimensions);\n  var rawValueGetter = getRawSourceValueGetter(sourceFormat);\n  extSource.retrieveValue = function (dataIndex, dimIndex) {\n    var rawItem = rawItemGetter(data, sourceHeaderCount, dimensions, dataIndex);\n    return retrieveValueFromItem(rawItem, dimIndex);\n  };\n  var retrieveValueFromItem = extSource.retrieveValueFromItem = function (dataItem, dimIndex) {\n    if (dataItem == null) {\n      return;\n    }\n    var dimDef = dimensions[dimIndex];\n    // When `dimIndex` is `null`, `rawValueGetter` return the whole item.\n    if (dimDef) {\n      return rawValueGetter(dataItem, dimIndex, dimDef.name);\n    }\n  };\n  extSource.getDimensionInfo = bind(getDimensionInfo, null, dimensions, dimsByName);\n  extSource.cloneAllDimensionInfo = bind(cloneAllDimensionInfo, null, dimensions);\n  return extSource;\n}\nfunction getRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`getRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  return upstream.data;\n}\nfunction cloneRawData(upstream) {\n  var sourceFormat = upstream.sourceFormat;\n  var data = upstream.data;\n  if (!isSupportedSourceFormat(sourceFormat)) {\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '`cloneRawData` is not supported in source format ' + sourceFormat;\n    }\n    throwError(errMsg);\n  }\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(data[i].slice());\n    }\n    return result;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    var result = [];\n    for (var i = 0, len = data.length; i < len; i++) {\n      // Not strictly clone for performance\n      result.push(extend({}, data[i]));\n    }\n    return result;\n  }\n}\nfunction getDimensionInfo(dimensions, dimsByName, dim) {\n  if (dim == null) {\n    return;\n  }\n  // Keep the same logic as `List::getDimension` did.\n  if (isNumber(dim)\n  // If being a number-like string but not being defined a dimension name.\n  || !isNaN(dim) && !hasOwn(dimsByName, dim)) {\n    return dimensions[dim];\n  } else if (hasOwn(dimsByName, dim)) {\n    return dimsByName[dim];\n  }\n}\nfunction cloneAllDimensionInfo(dimensions) {\n  return clone(dimensions);\n}\nvar externalTransformMap = createHashMap();\nexport function registerExternalTransform(externalTransform) {\n  externalTransform = clone(externalTransform);\n  var type = externalTransform.type;\n  var errMsg = '';\n  if (!type) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have a `type` when `registerTransform`.';\n    }\n    throwError(errMsg);\n  }\n  var typeParsed = type.split(':');\n  if (typeParsed.length !== 2) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Name must include namespace like \"ns:regression\".';\n    }\n    throwError(errMsg);\n  }\n  // Namespace 'echarts:xxx' is official namespace, where the transforms should\n  // be called directly via 'xxx' rather than 'echarts:xxx'.\n  var isBuiltIn = false;\n  if (typeParsed[0] === 'echarts') {\n    type = typeParsed[1];\n    isBuiltIn = true;\n  }\n  externalTransform.__isBuiltIn = isBuiltIn;\n  externalTransformMap.set(type, externalTransform);\n}\nexport function applyDataTransform(rawTransOption, sourceList, infoForPrint) {\n  var pipedTransOption = normalizeToArray(rawTransOption);\n  var pipeLen = pipedTransOption.length;\n  var errMsg = '';\n  if (!pipeLen) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'If `transform` declared, it should at least contain one transform.';\n    }\n    throwError(errMsg);\n  }\n  for (var i = 0, len = pipeLen; i < len; i++) {\n    var transOption = pipedTransOption[i];\n    sourceList = applySingleDataTransform(transOption, sourceList, infoForPrint, pipeLen === 1 ? null : i);\n    // piped transform only support single input, except the fist one.\n    // piped transform only support single output, except the last one.\n    if (i !== len - 1) {\n      sourceList.length = Math.max(sourceList.length, 1);\n    }\n  }\n  return sourceList;\n}\nfunction applySingleDataTransform(transOption, upSourceList, infoForPrint,\n// If `pipeIndex` is null/undefined, no piped transform.\npipeIndex) {\n  var errMsg = '';\n  if (!upSourceList.length) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Must have at least one upstream dataset.';\n    }\n    throwError(errMsg);\n  }\n  if (!isObject(transOption)) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'transform declaration must be an object rather than ' + typeof transOption + '.';\n    }\n    throwError(errMsg);\n  }\n  var transType = transOption.type;\n  var externalTransform = externalTransformMap.get(transType);\n  if (!externalTransform) {\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = 'Can not find transform on type \"' + transType + '\".';\n    }\n    throwError(errMsg);\n  }\n  // Prepare source\n  var extUpSourceList = map(upSourceList, function (upSource) {\n    return createExternalSource(upSource, externalTransform);\n  });\n  var resultList = normalizeToArray(externalTransform.transform({\n    upstream: extUpSourceList[0],\n    upstreamList: extUpSourceList,\n    config: clone(transOption.config)\n  }));\n  if (process.env.NODE_ENV !== 'production') {\n    if (transOption.print) {\n      var printStrArr = map(resultList, function (extSource) {\n        var pipeIndexStr = pipeIndex != null ? ' === pipe index: ' + pipeIndex : '';\n        return ['=== dataset index: ' + infoForPrint.datasetIndex + pipeIndexStr + ' ===', '- transform result data:', makePrintable(extSource.data), '- transform result dimensions:', makePrintable(extSource.dimensions)].join('\\n');\n      }).join('\\n');\n      log(printStrArr);\n    }\n  }\n  return map(resultList, function (result, resultIndex) {\n    var errMsg = '';\n    if (!isObject(result)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'A transform should not return some empty results.';\n      }\n      throwError(errMsg);\n    }\n    if (!result.data) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be not be null or undefined';\n      }\n      throwError(errMsg);\n    }\n    var sourceFormat = detectSourceFormat(result.data);\n    if (!isSupportedSourceFormat(sourceFormat)) {\n      if (process.env.NODE_ENV !== 'production') {\n        errMsg = 'Transform result data should be array rows or object rows.';\n      }\n      throwError(errMsg);\n    }\n    var resultMetaRawOption;\n    var firstUpSource = upSourceList[0];\n    /**\r\n     * Intuitively, the end users known the content of the original `dataset.source`,\r\n     * calucating the transform result in mind.\r\n     * Suppose the original `dataset.source` is:\r\n     * ```js\r\n     * [\r\n     *     ['product', '2012', '2013', '2014', '2015'],\r\n     *     ['AAA', 41.1, 30.4, 65.1, 53.3],\r\n     *     ['BBB', 86.5, 92.1, 85.7, 83.1],\r\n     *     ['CCC', 24.1, 67.2, 79.5, 86.4]\r\n     * ]\r\n     * ```\r\n     * The dimension info have to be detected from the source data.\r\n     * Some of the transformers (like filter, sort) will follow the dimension info\r\n     * of upstream, while others use new dimensions (like aggregate).\r\n     * Transformer can output a field `dimensions` to define the its own output dimensions.\r\n     * We also allow transformers to ignore the output `dimensions` field, and\r\n     * inherit the upstream dimensions definition. It can reduce the burden of handling\r\n     * dimensions in transformers.\r\n     *\r\n     * See also [DIMENSION_INHERIT_RULE] in `sourceManager.ts`.\r\n     */\n    if (firstUpSource && resultIndex === 0\n    // If transformer returns `dimensions`, it means that the transformer has different\n    // dimensions definitions. We do not inherit anything from upstream.\n    && !result.dimensions) {\n      var startIndex = firstUpSource.startIndex;\n      // We copy the header of upstream to the result, because:\n      // (1) The returned data always does not contain header line and can not be used\n      // as dimension-detection. In this case we can not use \"detected dimensions\" of\n      // upstream directly, because it might be detected based on different `seriesLayoutBy`.\n      // (2) We should support that the series read the upstream source in `seriesLayoutBy: 'row'`.\n      // So the original detected header should be add to the result, otherwise they can not be read.\n      if (startIndex) {\n        result.data = firstUpSource.data.slice(0, startIndex).concat(result.data);\n      }\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: startIndex,\n        dimensions: firstUpSource.metaRawOption.dimensions\n      };\n    } else {\n      resultMetaRawOption = {\n        seriesLayoutBy: SERIES_LAYOUT_BY_COLUMN,\n        sourceHeader: 0,\n        dimensions: result.dimensions\n      };\n    }\n    return createSource(result.data, resultMetaRawOption, null);\n  });\n}\nfunction isSupportedSourceFormat(sourceFormat) {\n  return sourceFormat === SOURCE_FORMAT_ARRAY_ROWS || sourceFormat === SOURCE_FORMAT_OBJECT_ROWS;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { assert, clone, createHashMap, isFunction, keys, map, reduce } from 'zrender/lib/core/util.js';\nimport { parseDataValue } from './helper/dataValueHelper.js';\nimport { shouldRetrieveDataByName } from './Source.js';\nvar UNDEFINED = 'undefined';\n/* global Float64Array, Int32Array, Uint32Array, Uint16Array */\n// Caution: MUST not use `new CtorUint32Array(arr, 0, len)`, because the Ctor of array is\n// different from the Ctor of typed array.\nexport var CtorUint32Array = typeof Uint32Array === UNDEFINED ? Array : Uint32Array;\nexport var CtorUint16Array = typeof Uint16Array === UNDEFINED ? Array : Uint16Array;\nexport var CtorInt32Array = typeof Int32Array === UNDEFINED ? Array : Int32Array;\nexport var CtorFloat64Array = typeof Float64Array === UNDEFINED ? Array : Float64Array;\n/**\r\n * Multi dimensional data store\r\n */\nvar dataCtors = {\n  'float': CtorFloat64Array,\n  'int': CtorInt32Array,\n  // Ordinal data type can be string or int\n  'ordinal': Array,\n  'number': Array,\n  'time': CtorFloat64Array\n};\nvar defaultDimValueGetters;\nfunction getIndicesCtor(rawCount) {\n  // The possible max value in this._indicies is always this._rawCount despite of filtering.\n  return rawCount > 65535 ? CtorUint32Array : CtorUint16Array;\n}\n;\nfunction getInitialExtent() {\n  return [Infinity, -Infinity];\n}\n;\nfunction cloneChunk(originalChunk) {\n  var Ctor = originalChunk.constructor;\n  // Only shallow clone is enough when Array.\n  return Ctor === Array ? originalChunk.slice() : new Ctor(originalChunk);\n}\nfunction prepareStore(store, dimIdx, dimType, end, append) {\n  var DataCtor = dataCtors[dimType || 'float'];\n  if (append) {\n    var oldStore = store[dimIdx];\n    var oldLen = oldStore && oldStore.length;\n    if (!(oldLen === end)) {\n      var newStore = new DataCtor(end);\n      // The cost of the copy is probably inconsiderable\n      // within the initial chunkSize.\n      for (var j = 0; j < oldLen; j++) {\n        newStore[j] = oldStore[j];\n      }\n      store[dimIdx] = newStore;\n    }\n  } else {\n    store[dimIdx] = new DataCtor(end);\n  }\n}\n;\n/**\r\n * Basically, DataStore API keep immutable.\r\n */\nvar DataStore = /** @class */function () {\n  function DataStore() {\n    this._chunks = [];\n    // It will not be calculated until needed.\n    this._rawExtent = [];\n    this._extent = [];\n    this._count = 0;\n    this._rawCount = 0;\n    this._calcDimNameToIdx = createHashMap();\n  }\n  /**\r\n   * Initialize from data\r\n   */\n  DataStore.prototype.initData = function (provider, inputDimensions, dimValueGetter) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isFunction(provider.getItem) && isFunction(provider.count), 'Invalid data provider.');\n    }\n    this._provider = provider;\n    // Clear\n    this._chunks = [];\n    this._indices = null;\n    this.getRawIndex = this._getRawIdxIdentity;\n    var source = provider.getSource();\n    var defaultGetter = this.defaultDimValueGetter = defaultDimValueGetters[source.sourceFormat];\n    // Default dim value getter\n    this._dimValueGetter = dimValueGetter || defaultGetter;\n    // Reset raw extent.\n    this._rawExtent = [];\n    var willRetrieveDataByName = shouldRetrieveDataByName(source);\n    this._dimensions = map(inputDimensions, function (dim) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (willRetrieveDataByName) {\n          assert(dim.property != null);\n        }\n      }\n      return {\n        // Only pick these two props. Not leak other properties like orderMeta.\n        type: dim.type,\n        property: dim.property\n      };\n    });\n    this._initDataFromProvider(0, provider.count());\n  };\n  DataStore.prototype.getProvider = function () {\n    return this._provider;\n  };\n  /**\r\n   * Caution: even when a `source` instance owned by a series, the created data store\r\n   * may still be shared by different sereis (the source hash does not use all `source`\r\n   * props, see `sourceManager`). In this case, the `source` props that are not used in\r\n   * hash (like `source.dimensionDefine`) probably only belongs to a certain series and\r\n   * thus should not be fetch here.\r\n   */\n  DataStore.prototype.getSource = function () {\n    return this._provider.getSource();\n  };\n  /**\r\n   * @caution Only used in dataStack.\r\n   */\n  DataStore.prototype.ensureCalculationDimension = function (dimName, type) {\n    var calcDimNameToIdx = this._calcDimNameToIdx;\n    var dimensions = this._dimensions;\n    var calcDimIdx = calcDimNameToIdx.get(dimName);\n    if (calcDimIdx != null) {\n      if (dimensions[calcDimIdx].type === type) {\n        return calcDimIdx;\n      }\n    } else {\n      calcDimIdx = dimensions.length;\n    }\n    dimensions[calcDimIdx] = {\n      type: type\n    };\n    calcDimNameToIdx.set(dimName, calcDimIdx);\n    this._chunks[calcDimIdx] = new dataCtors[type || 'float'](this._rawCount);\n    this._rawExtent[calcDimIdx] = getInitialExtent();\n    return calcDimIdx;\n  };\n  DataStore.prototype.collectOrdinalMeta = function (dimIdx, ordinalMeta) {\n    var chunk = this._chunks[dimIdx];\n    var dim = this._dimensions[dimIdx];\n    var rawExtents = this._rawExtent;\n    var offset = dim.ordinalOffset || 0;\n    var len = chunk.length;\n    if (offset === 0) {\n      // We need to reset the rawExtent if collect is from start.\n      // Because this dimension may be guessed as number and calcuating a wrong extent.\n      rawExtents[dimIdx] = getInitialExtent();\n    }\n    var dimRawExtent = rawExtents[dimIdx];\n    // Parse from previous data offset. len may be changed after appendData\n    for (var i = offset; i < len; i++) {\n      var val = chunk[i] = ordinalMeta.parseAndCollect(chunk[i]);\n      if (!isNaN(val)) {\n        dimRawExtent[0] = Math.min(val, dimRawExtent[0]);\n        dimRawExtent[1] = Math.max(val, dimRawExtent[1]);\n      }\n    }\n    dim.ordinalMeta = ordinalMeta;\n    dim.ordinalOffset = len;\n    dim.type = 'ordinal'; // Force to be ordinal\n  };\n  DataStore.prototype.getOrdinalMeta = function (dimIdx) {\n    var dimInfo = this._dimensions[dimIdx];\n    var ordinalMeta = dimInfo.ordinalMeta;\n    return ordinalMeta;\n  };\n  DataStore.prototype.getDimensionProperty = function (dimIndex) {\n    var item = this._dimensions[dimIndex];\n    return item && item.property;\n  };\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   */\n  DataStore.prototype.appendData = function (data) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this._indices, 'appendData can only be called on raw data.');\n    }\n    var provider = this._provider;\n    var start = this.count();\n    provider.appendData(data);\n    var end = provider.count();\n    if (!provider.persistent) {\n      end += start;\n    }\n    if (start < end) {\n      this._initDataFromProvider(start, end, true);\n    }\n    return [start, end];\n  };\n  DataStore.prototype.appendValues = function (values, minFillLen) {\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var start = this.count();\n    var end = start + Math.max(values.length, minFillLen || 0);\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      prepareStore(chunks, i, dim.type, end, true);\n    }\n    var emptyDataItem = [];\n    for (var idx = start; idx < end; idx++) {\n      var sourceIdx = idx - start;\n      // Store the data by dimensions\n      for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n        var dim = dimensions[dimIdx];\n        var val = defaultDimValueGetters.arrayRows.call(this, values[sourceIdx] || emptyDataItem, dim.property, sourceIdx, dimIdx);\n        chunks[dimIdx][idx] = val;\n        var dimRawExtent = rawExtent[dimIdx];\n        val < dimRawExtent[0] && (dimRawExtent[0] = val);\n        val > dimRawExtent[1] && (dimRawExtent[1] = val);\n      }\n    }\n    this._rawCount = this._count = end;\n    return {\n      start: start,\n      end: end\n    };\n  };\n  DataStore.prototype._initDataFromProvider = function (start, end, append) {\n    var provider = this._provider;\n    var chunks = this._chunks;\n    var dimensions = this._dimensions;\n    var dimLen = dimensions.length;\n    var rawExtent = this._rawExtent;\n    var dimNames = map(dimensions, function (dim) {\n      return dim.property;\n    });\n    for (var i = 0; i < dimLen; i++) {\n      var dim = dimensions[i];\n      if (!rawExtent[i]) {\n        rawExtent[i] = getInitialExtent();\n      }\n      prepareStore(chunks, i, dim.type, end, append);\n    }\n    if (provider.fillStorage) {\n      provider.fillStorage(start, end, chunks, rawExtent);\n    } else {\n      var dataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        dataItem = provider.getItem(idx, dataItem);\n        // Each data item is value\n        // [1, 2]\n        // 2\n        // Bar chart, line chart which uses category axis\n        // only gives the 'y' value. 'x' value is the indices of category\n        // Use a tempValue to normalize the value to be a (x, y) value\n        // Store the data by dimensions\n        for (var dimIdx = 0; dimIdx < dimLen; dimIdx++) {\n          var dimStorage = chunks[dimIdx];\n          // PENDING NULL is empty or zero\n          var val = this._dimValueGetter(dataItem, dimNames[dimIdx], idx, dimIdx);\n          dimStorage[idx] = val;\n          var dimRawExtent = rawExtent[dimIdx];\n          val < dimRawExtent[0] && (dimRawExtent[0] = val);\n          val > dimRawExtent[1] && (dimRawExtent[1] = val);\n        }\n      }\n    }\n    if (!provider.persistent && provider.clean) {\n      // Clean unused data if data source is typed array.\n      provider.clean();\n    }\n    this._rawCount = this._count = end;\n    // Reset data extent\n    this._extent = [];\n  };\n  DataStore.prototype.count = function () {\n    return this._count;\n  };\n  /**\r\n   * Get value. Return NaN if idx is out of range.\r\n   */\n  DataStore.prototype.get = function (dim, idx) {\n    if (!(idx >= 0 && idx < this._count)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[this.getRawIndex(idx)] : NaN;\n  };\n  DataStore.prototype.getValues = function (dimensions, idx) {\n    var values = [];\n    var dimArr = [];\n    if (idx == null) {\n      idx = dimensions;\n      // TODO get all from store?\n      dimensions = [];\n      // All dimensions\n      for (var i = 0; i < this._dimensions.length; i++) {\n        dimArr.push(i);\n      }\n    } else {\n      dimArr = dimensions;\n    }\n    for (var i = 0, len = dimArr.length; i < len; i++) {\n      values.push(this.get(dimArr[i], idx));\n    }\n    return values;\n  };\n  /**\r\n   * @param dim concrete dim\r\n   */\n  DataStore.prototype.getByRawIndex = function (dim, rawIdx) {\n    if (!(rawIdx >= 0 && rawIdx < this._rawCount)) {\n      return NaN;\n    }\n    var dimStore = this._chunks[dim];\n    return dimStore ? dimStore[rawIdx] : NaN;\n  };\n  /**\r\n   * Get sum of data in one dimension\r\n   */\n  DataStore.prototype.getSum = function (dim) {\n    var dimData = this._chunks[dim];\n    var sum = 0;\n    if (dimData) {\n      for (var i = 0, len = this.count(); i < len; i++) {\n        var value = this.get(dim, i);\n        if (!isNaN(value)) {\n          sum += value;\n        }\n      }\n    }\n    return sum;\n  };\n  /**\r\n   * Get median of data in one dimension\r\n   */\n  DataStore.prototype.getMedian = function (dim) {\n    var dimDataArray = [];\n    // map all data of one dimension\n    this.each([dim], function (val) {\n      if (!isNaN(val)) {\n        dimDataArray.push(val);\n      }\n    });\n    // TODO\n    // Use quick select?\n    var sortedDimDataArray = dimDataArray.sort(function (a, b) {\n      return a - b;\n    });\n    var len = this.count();\n    // calculate median\n    return len === 0 ? 0 : len % 2 === 1 ? sortedDimDataArray[(len - 1) / 2] : (sortedDimDataArray[len / 2] + sortedDimDataArray[len / 2 - 1]) / 2;\n  };\n  /**\r\n   * Retrieve the index with given raw data index.\r\n   */\n  DataStore.prototype.indexOfRawIndex = function (rawIndex) {\n    if (rawIndex >= this._rawCount || rawIndex < 0) {\n      return -1;\n    }\n    if (!this._indices) {\n      return rawIndex;\n    }\n    // Indices are ascending\n    var indices = this._indices;\n    // If rawIndex === dataIndex\n    var rawDataIndex = indices[rawIndex];\n    if (rawDataIndex != null && rawDataIndex < this._count && rawDataIndex === rawIndex) {\n      return rawIndex;\n    }\n    var left = 0;\n    var right = this._count - 1;\n    while (left <= right) {\n      var mid = (left + right) / 2 | 0;\n      if (indices[mid] < rawIndex) {\n        left = mid + 1;\n      } else if (indices[mid] > rawIndex) {\n        right = mid - 1;\n      } else {\n        return mid;\n      }\n    }\n    return -1;\n  };\n  /**\r\n   * Retrieve the index of nearest value.\r\n   * @param dim\r\n   * @param value\r\n   * @param [maxDistance=Infinity]\r\n   * @return If and only if multiple indices have\r\n   *         the same value, they are put to the result.\r\n   */\n  DataStore.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    var chunks = this._chunks;\n    var dimData = chunks[dim];\n    var nearestIndices = [];\n    if (!dimData) {\n      return nearestIndices;\n    }\n    if (maxDistance == null) {\n      maxDistance = Infinity;\n    }\n    var minDist = Infinity;\n    var minDiff = -1;\n    var nearestIndicesLen = 0;\n    // Check the test case of `test/ut/spec/data/SeriesData.js`.\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var dataIndex = this.getRawIndex(i);\n      var diff = value - dimData[dataIndex];\n      var dist = Math.abs(diff);\n      if (dist <= maxDistance) {\n        // When the `value` is at the middle of `this.get(dim, i)` and `this.get(dim, i+1)`,\n        // we'd better not push both of them to `nearestIndices`, otherwise it is easy to\n        // get more than one item in `nearestIndices` (more specifically, in `tooltip`).\n        // So we choose the one that `diff >= 0` in this case.\n        // But if `this.get(dim, i)` and `this.get(dim, j)` get the same value, both of them\n        // should be push to `nearestIndices`.\n        if (dist < minDist || dist === minDist && diff >= 0 && minDiff < 0) {\n          minDist = dist;\n          minDiff = diff;\n          nearestIndicesLen = 0;\n        }\n        if (diff === minDiff) {\n          nearestIndices[nearestIndicesLen++] = i;\n        }\n      }\n    }\n    nearestIndices.length = nearestIndicesLen;\n    return nearestIndices;\n  };\n  DataStore.prototype.getIndices = function () {\n    var newIndices;\n    var indices = this._indices;\n    if (indices) {\n      var Ctor = indices.constructor;\n      var thisCount = this._count;\n      // `new Array(a, b, c)` is different from `new Uint32Array(a, b, c)`.\n      if (Ctor === Array) {\n        newIndices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          newIndices[i] = indices[i];\n        }\n      } else {\n        newIndices = new Ctor(indices.buffer, 0, thisCount);\n      }\n    } else {\n      var Ctor = getIndicesCtor(this._rawCount);\n      newIndices = new Ctor(this.count());\n      for (var i = 0; i < newIndices.length; i++) {\n        newIndices[i] = i;\n      }\n    }\n    return newIndices;\n  };\n  /**\r\n   * Data filter.\r\n   */\n  DataStore.prototype.filter = function (dims, cb) {\n    if (!this._count) {\n      return this;\n    }\n    var newStore = this.clone();\n    var count = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(count);\n    var value = [];\n    var dimSize = dims.length;\n    var offset = 0;\n    var dim0 = dims[0];\n    var chunks = newStore._chunks;\n    for (var i = 0; i < count; i++) {\n      var keep = void 0;\n      var rawIdx = newStore.getRawIndex(i);\n      // Simple optimization\n      if (dimSize === 0) {\n        keep = cb(i);\n      } else if (dimSize === 1) {\n        var val = chunks[dim0][rawIdx];\n        keep = cb(val, i);\n      } else {\n        var k = 0;\n        for (; k < dimSize; k++) {\n          value[k] = chunks[dims[k]][rawIdx];\n        }\n        value[k] = i;\n        keep = cb.apply(null, value);\n      }\n      if (keep) {\n        newIndices[offset++] = rawIdx;\n      }\n    }\n    // Set indices after filtered.\n    if (offset < count) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  /**\r\n   * Select data in range. (For optimization of filter)\r\n   * (Manually inline code, support 5 million data filtering in data zoom.)\r\n   */\n  DataStore.prototype.selectRange = function (range) {\n    var newStore = this.clone();\n    var len = newStore._count;\n    if (!len) {\n      return this;\n    }\n    var dims = keys(range);\n    var dimSize = dims.length;\n    if (!dimSize) {\n      return this;\n    }\n    var originalCount = newStore.count();\n    var Ctor = getIndicesCtor(newStore._rawCount);\n    var newIndices = new Ctor(originalCount);\n    var offset = 0;\n    var dim0 = dims[0];\n    var min = range[dim0][0];\n    var max = range[dim0][1];\n    var storeArr = newStore._chunks;\n    var quickFinished = false;\n    if (!newStore._indices) {\n      // Extreme optimization for common case. About 2x faster in chrome.\n      var idx = 0;\n      if (dimSize === 1) {\n        var dimStorage = storeArr[dims[0]];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          // NaN will not be filtered. Consider the case, in line chart, empty\n          // value indicates the line should be broken. But for the case like\n          // scatter plot, a data item with empty value will not be rendered,\n          // but the axis extent may be effected if some other dim of the data\n          // item has value. Fortunately it is not a significant negative effect.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      } else if (dimSize === 2) {\n        var dimStorage = storeArr[dims[0]];\n        var dimStorage2 = storeArr[dims[1]];\n        var min2 = range[dims[1]][0];\n        var max2 = range[dims[1]][1];\n        for (var i = 0; i < len; i++) {\n          var val = dimStorage[i];\n          var val2 = dimStorage2[i];\n          // Do not filter NaN, see comment above.\n          if ((val >= min && val <= max || isNaN(val)) && (val2 >= min2 && val2 <= max2 || isNaN(val2))) {\n            newIndices[offset++] = idx;\n          }\n          idx++;\n        }\n        quickFinished = true;\n      }\n    }\n    if (!quickFinished) {\n      if (dimSize === 1) {\n        for (var i = 0; i < originalCount; i++) {\n          var rawIndex = newStore.getRawIndex(i);\n          var val = storeArr[dims[0]][rawIndex];\n          // Do not filter NaN, see comment above.\n          if (val >= min && val <= max || isNaN(val)) {\n            newIndices[offset++] = rawIndex;\n          }\n        }\n      } else {\n        for (var i = 0; i < originalCount; i++) {\n          var keep = true;\n          var rawIndex = newStore.getRawIndex(i);\n          for (var k = 0; k < dimSize; k++) {\n            var dimk = dims[k];\n            var val = storeArr[dimk][rawIndex];\n            // Do not filter NaN, see comment above.\n            if (val < range[dimk][0] || val > range[dimk][1]) {\n              keep = false;\n            }\n          }\n          if (keep) {\n            newIndices[offset++] = newStore.getRawIndex(i);\n          }\n        }\n      }\n    }\n    // Set indices after filtered.\n    if (offset < originalCount) {\n      newStore._indices = newIndices;\n    }\n    newStore._count = offset;\n    // Reset data extent\n    newStore._extent = [];\n    newStore._updateGetRawIdx();\n    return newStore;\n  };\n  // /**\n  //  * Data mapping to a plain array\n  //  */\n  // mapArray(dims: DimensionIndex[], cb: MapArrayCb): any[] {\n  //     const result: any[] = [];\n  //     this.each(dims, function () {\n  //         result.push(cb && (cb as MapArrayCb).apply(null, arguments));\n  //     });\n  //     return result;\n  // }\n  /**\r\n   * Data mapping to a new List with given dimensions\r\n   */\n  DataStore.prototype.map = function (dims, cb) {\n    // TODO only clone picked chunks.\n    var target = this.clone(dims);\n    this._updateDims(target, dims, cb);\n    return target;\n  };\n  /**\r\n   * @caution Danger!! Only used in dataStack.\r\n   */\n  DataStore.prototype.modify = function (dims, cb) {\n    this._updateDims(this, dims, cb);\n  };\n  DataStore.prototype._updateDims = function (target, dims, cb) {\n    var targetChunks = target._chunks;\n    var tmpRetValue = [];\n    var dimSize = dims.length;\n    var dataCount = target.count();\n    var values = [];\n    var rawExtent = target._rawExtent;\n    for (var i = 0; i < dims.length; i++) {\n      rawExtent[dims[i]] = getInitialExtent();\n    }\n    for (var dataIndex = 0; dataIndex < dataCount; dataIndex++) {\n      var rawIndex = target.getRawIndex(dataIndex);\n      for (var k = 0; k < dimSize; k++) {\n        values[k] = targetChunks[dims[k]][rawIndex];\n      }\n      values[dimSize] = dataIndex;\n      var retValue = cb && cb.apply(null, values);\n      if (retValue != null) {\n        // a number or string (in oridinal dimension)?\n        if (typeof retValue !== 'object') {\n          tmpRetValue[0] = retValue;\n          retValue = tmpRetValue;\n        }\n        for (var i = 0; i < retValue.length; i++) {\n          var dim = dims[i];\n          var val = retValue[i];\n          var rawExtentOnDim = rawExtent[dim];\n          var dimStore = targetChunks[dim];\n          if (dimStore) {\n            dimStore[rawIndex] = val;\n          }\n          if (val < rawExtentOnDim[0]) {\n            rawExtentOnDim[0] = val;\n          }\n          if (val > rawExtentOnDim[1]) {\n            rawExtentOnDim[1] = val;\n          }\n        }\n      }\n    }\n  };\n  /**\r\n   * Large data down sampling using largest-triangle-three-buckets\r\n   * @param {string} valueDimension\r\n   * @param {number} targetCount\r\n   */\n  DataStore.prototype.lttbDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    var sampledIndex = 0;\n    var frameSize = Math.floor(1 / rate);\n    var currentRawIndex = this.getRawIndex(0);\n    var maxArea;\n    var area;\n    var nextRawIndex;\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.min((Math.ceil(len / frameSize) + 2) * 2, len));\n    // First frame use the first data.\n    newIndices[sampledIndex++] = currentRawIndex;\n    for (var i = 1; i < len - 1; i += frameSize) {\n      var nextFrameStart = Math.min(i + frameSize, len - 1);\n      var nextFrameEnd = Math.min(i + frameSize * 2, len);\n      var avgX = (nextFrameEnd + nextFrameStart) / 2;\n      var avgY = 0;\n      for (var idx = nextFrameStart; idx < nextFrameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          continue;\n        }\n        avgY += y;\n      }\n      avgY /= nextFrameEnd - nextFrameStart;\n      var frameStart = i;\n      var frameEnd = Math.min(i + frameSize, len);\n      var pointAX = i - 1;\n      var pointAY = dimStore[currentRawIndex];\n      maxArea = -1;\n      nextRawIndex = frameStart;\n      var firstNaNIndex = -1;\n      var countNaN = 0;\n      // Find a point from current frame that construct a triangle with largest area with previous selected point\n      // And the average of next frame.\n      for (var idx = frameStart; idx < frameEnd; idx++) {\n        var rawIndex = this.getRawIndex(idx);\n        var y = dimStore[rawIndex];\n        if (isNaN(y)) {\n          countNaN++;\n          if (firstNaNIndex < 0) {\n            firstNaNIndex = rawIndex;\n          }\n          continue;\n        }\n        // Calculate triangle area over three buckets\n        area = Math.abs((pointAX - avgX) * (y - pointAY) - (pointAX - idx) * (avgY - pointAY));\n        if (area > maxArea) {\n          maxArea = area;\n          nextRawIndex = rawIndex; // Next a is this b\n        }\n      }\n      if (countNaN > 0 && countNaN < frameEnd - frameStart) {\n        // Append first NaN point in every bucket.\n        // It is necessary to ensure the correct order of indices.\n        newIndices[sampledIndex++] = Math.min(firstNaNIndex, nextRawIndex);\n        nextRawIndex = Math.max(firstNaNIndex, nextRawIndex);\n      }\n      newIndices[sampledIndex++] = nextRawIndex;\n      currentRawIndex = nextRawIndex; // This a is the next a (chosen b)\n    }\n    // First frame use the last data.\n    newIndices[sampledIndex++] = this.getRawIndex(len - 1);\n    target._count = sampledIndex;\n    target._indices = newIndices;\n    target.getRawIndex = this._getRawIdx;\n    return target;\n  };\n  /**\r\n   * Large data down sampling using min-max\r\n   * @param {string} valueDimension\r\n   * @param {number} rate\r\n   */\n  DataStore.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var target = this.clone([valueDimension], true);\n    var targetStorage = target._chunks;\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[valueDimension];\n    var len = this.count();\n    // Each frame results in 2 data points, one for min and one for max\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize) * 2);\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      var minIndex = i;\n      var minValue = dimStore[this.getRawIndex(minIndex)];\n      var maxIndex = i;\n      var maxValue = dimStore[this.getRawIndex(maxIndex)];\n      var thisFrameSize = frameSize;\n      // Handle final smaller frame\n      if (i + frameSize > len) {\n        thisFrameSize = len - i;\n      }\n      // Determine min and max within the current frame\n      for (var k = 0; k < thisFrameSize; k++) {\n        var rawIndex = this.getRawIndex(i + k);\n        var value = dimStore[rawIndex];\n        if (value < minValue) {\n          minValue = value;\n          minIndex = i + k;\n        }\n        if (value > maxValue) {\n          maxValue = value;\n          maxIndex = i + k;\n        }\n      }\n      var rawMinIndex = this.getRawIndex(minIndex);\n      var rawMaxIndex = this.getRawIndex(maxIndex);\n      // Set the order of the min and max values, based on their ordering in the frame\n      if (minIndex < maxIndex) {\n        newIndices[offset++] = rawMinIndex;\n        newIndices[offset++] = rawMaxIndex;\n      } else {\n        newIndices[offset++] = rawMaxIndex;\n        newIndices[offset++] = rawMinIndex;\n      }\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\r\n   * Large data down sampling on given dimension\r\n   * @param sampleIndex Sample index for name and id\r\n   */\n  DataStore.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var target = this.clone([dimension], true);\n    var targetStorage = target._chunks;\n    var frameValues = [];\n    var frameSize = Math.floor(1 / rate);\n    var dimStore = targetStorage[dimension];\n    var len = this.count();\n    var rawExtentOnDim = target._rawExtent[dimension] = getInitialExtent();\n    var newIndices = new (getIndicesCtor(this._rawCount))(Math.ceil(len / frameSize));\n    var offset = 0;\n    for (var i = 0; i < len; i += frameSize) {\n      // Last frame\n      if (frameSize > len - i) {\n        frameSize = len - i;\n        frameValues.length = frameSize;\n      }\n      for (var k = 0; k < frameSize; k++) {\n        var dataIdx = this.getRawIndex(i + k);\n        frameValues[k] = dimStore[dataIdx];\n      }\n      var value = sampleValue(frameValues);\n      var sampleFrameIdx = this.getRawIndex(Math.min(i + sampleIndex(frameValues, value) || 0, len - 1));\n      // Only write value on the filtered data\n      dimStore[sampleFrameIdx] = value;\n      if (value < rawExtentOnDim[0]) {\n        rawExtentOnDim[0] = value;\n      }\n      if (value > rawExtentOnDim[1]) {\n        rawExtentOnDim[1] = value;\n      }\n      newIndices[offset++] = sampleFrameIdx;\n    }\n    target._count = offset;\n    target._indices = newIndices;\n    target._updateGetRawIdx();\n    return target;\n  };\n  /**\r\n   * Data iteration\r\n   * @param ctx default this\r\n   * @example\r\n   *  list.each('x', function (x, idx) {});\r\n   *  list.each(['x', 'y'], function (x, y, idx) {});\r\n   *  list.each(function (idx) {})\r\n   */\n  DataStore.prototype.each = function (dims, cb) {\n    if (!this._count) {\n      return;\n    }\n    var dimSize = dims.length;\n    var chunks = this._chunks;\n    for (var i = 0, len = this.count(); i < len; i++) {\n      var rawIdx = this.getRawIndex(i);\n      // Simple optimization\n      switch (dimSize) {\n        case 0:\n          cb(i);\n          break;\n        case 1:\n          cb(chunks[dims[0]][rawIdx], i);\n          break;\n        case 2:\n          cb(chunks[dims[0]][rawIdx], chunks[dims[1]][rawIdx], i);\n          break;\n        default:\n          var k = 0;\n          var value = [];\n          for (; k < dimSize; k++) {\n            value[k] = chunks[dims[k]][rawIdx];\n          }\n          // Index\n          value[k] = i;\n          cb.apply(null, value);\n      }\n    }\n  };\n  /**\r\n   * Get extent of data in one dimension\r\n   */\n  DataStore.prototype.getDataExtent = function (dim) {\n    // Make sure use concrete dim as cache name.\n    var dimData = this._chunks[dim];\n    var initialExtent = getInitialExtent();\n    if (!dimData) {\n      return initialExtent;\n    }\n    // Make more strict checkings to ensure hitting cache.\n    var currEnd = this.count();\n    // Consider the most cases when using data zoom, `getDataExtent`\n    // happened before filtering. We cache raw extent, which is not\n    // necessary to be cleared and recalculated when restore data.\n    var useRaw = !this._indices;\n    var dimExtent;\n    if (useRaw) {\n      return this._rawExtent[dim].slice();\n    }\n    dimExtent = this._extent[dim];\n    if (dimExtent) {\n      return dimExtent.slice();\n    }\n    dimExtent = initialExtent;\n    var min = dimExtent[0];\n    var max = dimExtent[1];\n    for (var i = 0; i < currEnd; i++) {\n      var rawIdx = this.getRawIndex(i);\n      var value = dimData[rawIdx];\n      value < min && (min = value);\n      value > max && (max = value);\n    }\n    dimExtent = [min, max];\n    this._extent[dim] = dimExtent;\n    return dimExtent;\n  };\n  /**\r\n   * Get raw data item\r\n   */\n  DataStore.prototype.getRawDataItem = function (idx) {\n    var rawIdx = this.getRawIndex(idx);\n    if (!this._provider.persistent) {\n      var val = [];\n      var chunks = this._chunks;\n      for (var i = 0; i < chunks.length; i++) {\n        val.push(chunks[i][rawIdx]);\n      }\n      return val;\n    } else {\n      return this._provider.getItem(rawIdx);\n    }\n  };\n  /**\r\n   * Clone shallow.\r\n   *\r\n   * @param clonedDims Determine which dims to clone. Will share the data if not specified.\r\n   */\n  DataStore.prototype.clone = function (clonedDims, ignoreIndices) {\n    var target = new DataStore();\n    var chunks = this._chunks;\n    var clonedDimsMap = clonedDims && reduce(clonedDims, function (obj, dimIdx) {\n      obj[dimIdx] = true;\n      return obj;\n    }, {});\n    if (clonedDimsMap) {\n      for (var i = 0; i < chunks.length; i++) {\n        // Not clone if dim is not picked.\n        target._chunks[i] = !clonedDimsMap[i] ? chunks[i] : cloneChunk(chunks[i]);\n      }\n    } else {\n      target._chunks = chunks;\n    }\n    this._copyCommonProps(target);\n    if (!ignoreIndices) {\n      target._indices = this._cloneIndices();\n    }\n    target._updateGetRawIdx();\n    return target;\n  };\n  DataStore.prototype._copyCommonProps = function (target) {\n    target._count = this._count;\n    target._rawCount = this._rawCount;\n    target._provider = this._provider;\n    target._dimensions = this._dimensions;\n    target._extent = clone(this._extent);\n    target._rawExtent = clone(this._rawExtent);\n  };\n  DataStore.prototype._cloneIndices = function () {\n    if (this._indices) {\n      var Ctor = this._indices.constructor;\n      var indices = void 0;\n      if (Ctor === Array) {\n        var thisCount = this._indices.length;\n        indices = new Ctor(thisCount);\n        for (var i = 0; i < thisCount; i++) {\n          indices[i] = this._indices[i];\n        }\n      } else {\n        indices = new Ctor(this._indices);\n      }\n      return indices;\n    }\n    return null;\n  };\n  DataStore.prototype._getRawIdxIdentity = function (idx) {\n    return idx;\n  };\n  DataStore.prototype._getRawIdx = function (idx) {\n    if (idx < this._count && idx >= 0) {\n      return this._indices[idx];\n    }\n    return -1;\n  };\n  DataStore.prototype._updateGetRawIdx = function () {\n    this.getRawIndex = this._indices ? this._getRawIdx : this._getRawIdxIdentity;\n  };\n  DataStore.internalField = function () {\n    function getDimValueSimply(dataItem, property, dataIndex, dimIndex) {\n      return parseDataValue(dataItem[dimIndex], this._dimensions[dimIndex]);\n    }\n    defaultDimValueGetters = {\n      arrayRows: getDimValueSimply,\n      objectRows: function (dataItem, property, dataIndex, dimIndex) {\n        return parseDataValue(dataItem[property], this._dimensions[dimIndex]);\n      },\n      keyedColumns: getDimValueSimply,\n      original: function (dataItem, property, dataIndex, dimIndex) {\n        // Performance sensitive, do not use modelUtil.getDataItemValue.\n        // If dataItem is an plain object with no value field, the let `value`\n        // will be assigned with the object, but it will be tread correctly\n        // in the `convertValue`.\n        var value = dataItem && (dataItem.value == null ? dataItem : dataItem.value);\n        return parseDataValue(value instanceof Array ? value[dimIndex]\n        // If value is a single number or something else not array.\n        : value, this._dimensions[dimIndex]);\n      },\n      typedArray: function (dataItem, property, dataIndex, dimIndex) {\n        return dataItem[dimIndex];\n      }\n    };\n  }();\n  return DataStore;\n}();\nexport default DataStore;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { setAsPrimitive, map, isTypedArray, assert, each, retrieve2 } from 'zrender/lib/core/util.js';\nimport { createSource, cloneSourceShallow } from '../Source.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nimport { querySeriesUpstreamDatasetModel, queryDatasetUpstreamDatasetModels } from './sourceHelper.js';\nimport { applyDataTransform } from './transform.js';\nimport DataStore from '../DataStore.js';\nimport { DefaultDataProvider } from './dataProvider.js';\n/**\r\n * [REQUIREMENT_MEMO]:\r\n * (0) `metaRawOption` means `dimensions`/`sourceHeader`/`seriesLayoutBy` in raw option.\r\n * (1) Keep support the feature: `metaRawOption` can be specified both on `series` and\r\n * `root-dataset`. Them on `series` has higher priority.\r\n * (2) Do not support to set `metaRawOption` on a `non-root-dataset`, because it might\r\n * confuse users: whether those props indicate how to visit the upstream source or visit\r\n * the transform result source, and some transforms has nothing to do with these props,\r\n * and some transforms might have multiple upstream.\r\n * (3) Transforms should specify `metaRawOption` in each output, just like they can be\r\n * declared in `root-dataset`.\r\n * (4) At present only support visit source in `SERIES_LAYOUT_BY_COLUMN` in transforms.\r\n * That is for reducing complexity in transforms.\r\n * PENDING: Whether to provide transposition transform?\r\n *\r\n * [IMPLEMENTAION_MEMO]:\r\n * \"sourceVisitConfig\" are calculated from `metaRawOption` and `data`.\r\n * They will not be calculated until `source` is about to be visited (to prevent from\r\n * duplicate calcuation). `source` is visited only in series and input to transforms.\r\n *\r\n * [DIMENSION_INHERIT_RULE]:\r\n * By default the dimensions are inherited from ancestors, unless a transform return\r\n * a new dimensions definition.\r\n * Consider the case:\r\n * ```js\r\n * dataset: [{\r\n *     source: [ ['Product', 'Sales', 'Prise'], ['Cookies', 321, 44.21], ...]\r\n * }, {\r\n *     transform: { type: 'filter', ... }\r\n * }]\r\n * dataset: [{\r\n *     dimension: ['Product', 'Sales', 'Prise'],\r\n *     source: [ ['Cookies', 321, 44.21], ...]\r\n * }, {\r\n *     transform: { type: 'filter', ... }\r\n * }]\r\n * ```\r\n * The two types of option should have the same behavior after transform.\r\n *\r\n *\r\n * [SCENARIO]:\r\n * (1) Provide source data directly:\r\n * ```js\r\n * series: {\r\n *     encode: {...},\r\n *     dimensions: [...]\r\n *     seriesLayoutBy: 'row',\r\n *     data: [[...]]\r\n * }\r\n * ```\r\n * (2) Series refer to dataset.\r\n * ```js\r\n * series: [{\r\n *     encode: {...}\r\n *     // Ignore datasetIndex means `datasetIndex: 0`\r\n *     // and the dimensions defination in dataset is used\r\n * }, {\r\n *     encode: {...},\r\n *     seriesLayoutBy: 'column',\r\n *     datasetIndex: 1\r\n * }]\r\n * ```\r\n * (3) dataset transform\r\n * ```js\r\n * dataset: [{\r\n *     source: [...]\r\n * }, {\r\n *     source: [...]\r\n * }, {\r\n *     // By default from 0.\r\n *     transform: { type: 'filter', config: {...} }\r\n * }, {\r\n *     // Piped.\r\n *     transform: [\r\n *         { type: 'filter', config: {...} },\r\n *         { type: 'sort', config: {...} }\r\n *     ]\r\n * }, {\r\n *     id: 'regressionData',\r\n *     fromDatasetIndex: 1,\r\n *     // Third-party transform\r\n *     transform: { type: 'ecStat:regression', config: {...} }\r\n * }, {\r\n *     // retrieve the extra result.\r\n *     id: 'regressionFormula',\r\n *     fromDatasetId: 'regressionData',\r\n *     fromTransformResult: 1\r\n * }]\r\n * ```\r\n */\nvar SourceManager = /** @class */function () {\n  function SourceManager(sourceHost) {\n    // Cached source. Do not repeat calculating if not dirty.\n    this._sourceList = [];\n    this._storeList = [];\n    // version sign of each upstream source manager.\n    this._upstreamSignList = [];\n    this._versionSignBase = 0;\n    this._dirty = true;\n    this._sourceHost = sourceHost;\n  }\n  /**\r\n   * Mark dirty.\r\n   */\n  SourceManager.prototype.dirty = function () {\n    this._setLocalSource([], []);\n    this._storeList = [];\n    this._dirty = true;\n  };\n  SourceManager.prototype._setLocalSource = function (sourceList, upstreamSignList) {\n    this._sourceList = sourceList;\n    this._upstreamSignList = upstreamSignList;\n    this._versionSignBase++;\n    if (this._versionSignBase > 9e10) {\n      this._versionSignBase = 0;\n    }\n  };\n  /**\r\n   * For detecting whether the upstream source is dirty, so that\r\n   * the local cached source (in `_sourceList`) should be discarded.\r\n   */\n  SourceManager.prototype._getVersionSign = function () {\n    return this._sourceHost.uid + '_' + this._versionSignBase;\n  };\n  /**\r\n   * Always return a source instance. Otherwise throw error.\r\n   */\n  SourceManager.prototype.prepareSource = function () {\n    // For the case that call `setOption` multiple time but no data changed,\n    // cache the result source to prevent from repeating transform.\n    if (this._isDirty()) {\n      this._createSource();\n      this._dirty = false;\n    }\n  };\n  SourceManager.prototype._createSource = function () {\n    this._setLocalSource([], []);\n    var sourceHost = this._sourceHost;\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    var hasUpstream = !!upSourceMgrList.length;\n    var resultSourceList;\n    var upstreamSignList;\n    if (isSeries(sourceHost)) {\n      var seriesModel = sourceHost;\n      var data = void 0;\n      var sourceFormat = void 0;\n      var upSource = void 0;\n      // Has upstream dataset\n      if (hasUpstream) {\n        var upSourceMgr = upSourceMgrList[0];\n        upSourceMgr.prepareSource();\n        upSource = upSourceMgr.getSource();\n        data = upSource.data;\n        sourceFormat = upSource.sourceFormat;\n        upstreamSignList = [upSourceMgr._getVersionSign()];\n      }\n      // Series data is from own.\n      else {\n        data = seriesModel.get('data', true);\n        sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n        upstreamSignList = [];\n      }\n      // See [REQUIREMENT_MEMO], merge settings on series and parent dataset if it is root.\n      var newMetaRawOption = this._getSourceMetaRawOption() || {};\n      var upMetaRawOption = upSource && upSource.metaRawOption || {};\n      var seriesLayoutBy = retrieve2(newMetaRawOption.seriesLayoutBy, upMetaRawOption.seriesLayoutBy) || null;\n      var sourceHeader = retrieve2(newMetaRawOption.sourceHeader, upMetaRawOption.sourceHeader);\n      // Note here we should not use `upSource.dimensionsDefine`. Consider the case:\n      // `upSource.dimensionsDefine` is detected by `seriesLayoutBy: 'column'`,\n      // but series need `seriesLayoutBy: 'row'`.\n      var dimensions = retrieve2(newMetaRawOption.dimensions, upMetaRawOption.dimensions);\n      // We share source with dataset as much as possible\n      // to avoid extra memory cost of high dimensional data.\n      var needsCreateSource = seriesLayoutBy !== upMetaRawOption.seriesLayoutBy || !!sourceHeader !== !!upMetaRawOption.sourceHeader || dimensions;\n      resultSourceList = needsCreateSource ? [createSource(data, {\n        seriesLayoutBy: seriesLayoutBy,\n        sourceHeader: sourceHeader,\n        dimensions: dimensions\n      }, sourceFormat)] : [];\n    } else {\n      var datasetModel = sourceHost;\n      // Has upstream dataset.\n      if (hasUpstream) {\n        var result = this._applyTransform(upSourceMgrList);\n        resultSourceList = result.sourceList;\n        upstreamSignList = result.upstreamSignList;\n      }\n      // Is root dataset.\n      else {\n        var sourceData = datasetModel.get('source', true);\n        resultSourceList = [createSource(sourceData, this._getSourceMetaRawOption(), null)];\n        upstreamSignList = [];\n      }\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      assert(resultSourceList && upstreamSignList);\n    }\n    this._setLocalSource(resultSourceList, upstreamSignList);\n  };\n  SourceManager.prototype._applyTransform = function (upMgrList) {\n    var datasetModel = this._sourceHost;\n    var transformOption = datasetModel.get('transform', true);\n    var fromTransformResult = datasetModel.get('fromTransformResult', true);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(fromTransformResult != null || transformOption != null);\n    }\n    if (fromTransformResult != null) {\n      var errMsg = '';\n      if (upMgrList.length !== 1) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'When using `fromTransformResult`, there should be only one upstream dataset';\n        }\n        doThrow(errMsg);\n      }\n    }\n    var sourceList;\n    var upSourceList = [];\n    var upstreamSignList = [];\n    each(upMgrList, function (upMgr) {\n      upMgr.prepareSource();\n      var upSource = upMgr.getSource(fromTransformResult || 0);\n      var errMsg = '';\n      if (fromTransformResult != null && !upSource) {\n        if (process.env.NODE_ENV !== 'production') {\n          errMsg = 'Can not retrieve result by `fromTransformResult`: ' + fromTransformResult;\n        }\n        doThrow(errMsg);\n      }\n      upSourceList.push(upSource);\n      upstreamSignList.push(upMgr._getVersionSign());\n    });\n    if (transformOption) {\n      sourceList = applyDataTransform(transformOption, upSourceList, {\n        datasetIndex: datasetModel.componentIndex\n      });\n    } else if (fromTransformResult != null) {\n      sourceList = [cloneSourceShallow(upSourceList[0])];\n    }\n    return {\n      sourceList: sourceList,\n      upstreamSignList: upstreamSignList\n    };\n  };\n  SourceManager.prototype._isDirty = function () {\n    if (this._dirty) {\n      return true;\n    }\n    // All sourceList is from the some upstream.\n    var upSourceMgrList = this._getUpstreamSourceManagers();\n    for (var i = 0; i < upSourceMgrList.length; i++) {\n      var upSrcMgr = upSourceMgrList[i];\n      if (\n      // Consider the case that there is ancestor diry, call it recursively.\n      // The performance is probably not an issue because usually the chain is not long.\n      upSrcMgr._isDirty() || this._upstreamSignList[i] !== upSrcMgr._getVersionSign()) {\n        return true;\n      }\n    }\n  };\n  /**\r\n   * @param sourceIndex By default 0, means \"main source\".\r\n   *                    In most cases there is only one source.\r\n   */\n  SourceManager.prototype.getSource = function (sourceIndex) {\n    sourceIndex = sourceIndex || 0;\n    var source = this._sourceList[sourceIndex];\n    if (!source) {\n      // Series may share source instance with dataset.\n      var upSourceMgrList = this._getUpstreamSourceManagers();\n      return upSourceMgrList[0] && upSourceMgrList[0].getSource(sourceIndex);\n    }\n    return source;\n  };\n  /**\r\n   *\r\n   * Get a data store which can be shared across series.\r\n   * Only available for series.\r\n   *\r\n   * @param seriesDimRequest Dimensions that are generated in series.\r\n   *        Should have been sorted by `storeDimIndex` asc.\r\n   */\n  SourceManager.prototype.getSharedDataStore = function (seriesDimRequest) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(isSeries(this._sourceHost), 'Can only call getDataStore on series source manager.');\n    }\n    var schema = seriesDimRequest.makeStoreSchema();\n    return this._innerGetDataStore(schema.dimensions, seriesDimRequest.source, schema.hash);\n  };\n  SourceManager.prototype._innerGetDataStore = function (storeDims, seriesSource, sourceReadKey) {\n    // TODO Can use other sourceIndex?\n    var sourceIndex = 0;\n    var storeList = this._storeList;\n    var cachedStoreMap = storeList[sourceIndex];\n    if (!cachedStoreMap) {\n      cachedStoreMap = storeList[sourceIndex] = {};\n    }\n    var cachedStore = cachedStoreMap[sourceReadKey];\n    if (!cachedStore) {\n      var upSourceMgr = this._getUpstreamSourceManagers()[0];\n      if (isSeries(this._sourceHost) && upSourceMgr) {\n        cachedStore = upSourceMgr._innerGetDataStore(storeDims, seriesSource, sourceReadKey);\n      } else {\n        cachedStore = new DataStore();\n        // Always create store from source of series.\n        cachedStore.initData(new DefaultDataProvider(seriesSource, storeDims.length), storeDims);\n      }\n      cachedStoreMap[sourceReadKey] = cachedStore;\n    }\n    return cachedStore;\n  };\n  /**\r\n   * PENDING: Is it fast enough?\r\n   * If no upstream, return empty array.\r\n   */\n  SourceManager.prototype._getUpstreamSourceManagers = function () {\n    // Always get the relationship from the raw option.\n    // Do not cache the link of the dependency graph, so that\n    // there is no need to update them when change happens.\n    var sourceHost = this._sourceHost;\n    if (isSeries(sourceHost)) {\n      var datasetModel = querySeriesUpstreamDatasetModel(sourceHost);\n      return !datasetModel ? [] : [datasetModel.getSourceManager()];\n    } else {\n      return map(queryDatasetUpstreamDatasetModels(sourceHost), function (datasetModel) {\n        return datasetModel.getSourceManager();\n      });\n    }\n  };\n  SourceManager.prototype._getSourceMetaRawOption = function () {\n    var sourceHost = this._sourceHost;\n    var seriesLayoutBy;\n    var sourceHeader;\n    var dimensions;\n    if (isSeries(sourceHost)) {\n      seriesLayoutBy = sourceHost.get('seriesLayoutBy', true);\n      sourceHeader = sourceHost.get('sourceHeader', true);\n      dimensions = sourceHost.get('dimensions', true);\n    }\n    // See [REQUIREMENT_MEMO], `non-root-dataset` do not support them.\n    else if (!this._getUpstreamSourceManagers().length) {\n      var model = sourceHost;\n      seriesLayoutBy = model.get('seriesLayoutBy', true);\n      sourceHeader = model.get('sourceHeader', true);\n      dimensions = model.get('dimensions', true);\n    }\n    return {\n      seriesLayoutBy: seriesLayoutBy,\n      sourceHeader: sourceHeader,\n      dimensions: dimensions\n    };\n  };\n  return SourceManager;\n}();\nexport { SourceManager };\n// Call this method after `super.init` and `super.mergeOption` to\n// disable the transform merge, but do not disable transform clone from rawOption.\nexport function disableTransformOptionMerge(datasetModel) {\n  var transformOption = datasetModel.option.transform;\n  transformOption && setAsPrimitive(datasetModel.option.transform);\n}\nfunction isSeries(sourceHost) {\n  // Avoid circular dependency with Series.ts\n  return sourceHost.mainType === 'series';\n}\nfunction doThrow(errMsg) {\n  throw new Error(errMsg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getTooltipMarker, encodeHTML, makeValueReadable, convertToColorString } from '../../util/format.js';\nimport { isString, each, hasOwn, isArray, map, assert, extend } from 'zrender/lib/core/util.js';\nimport { SortOrderComparator } from '../../data/helper/dataValueHelper.js';\nimport { getRandomIdBase } from '../../util/number.js';\nvar TOOLTIP_LINE_HEIGHT_CSS = 'line-height:1';\nfunction getTooltipLineHeight(textStyle) {\n  var lineHeight = textStyle.lineHeight;\n  if (lineHeight == null) {\n    return TOOLTIP_LINE_HEIGHT_CSS;\n  } else {\n    return \"line-height:\" + encodeHTML(lineHeight + '') + \"px\";\n  }\n}\n// TODO: more textStyle option\nfunction getTooltipTextStyle(textStyle, renderMode) {\n  var nameFontColor = textStyle.color || '#6e7079';\n  var nameFontSize = textStyle.fontSize || 12;\n  var nameFontWeight = textStyle.fontWeight || '400';\n  var valueFontColor = textStyle.color || '#464646';\n  var valueFontSize = textStyle.fontSize || 14;\n  var valueFontWeight = textStyle.fontWeight || '900';\n  if (renderMode === 'html') {\n    // `textStyle` is probably from user input, should be encoded to reduce security risk.\n    return {\n      // eslint-disable-next-line max-len\n      nameStyle: \"font-size:\" + encodeHTML(nameFontSize + '') + \"px;color:\" + encodeHTML(nameFontColor) + \";font-weight:\" + encodeHTML(nameFontWeight + ''),\n      // eslint-disable-next-line max-len\n      valueStyle: \"font-size:\" + encodeHTML(valueFontSize + '') + \"px;color:\" + encodeHTML(valueFontColor) + \";font-weight:\" + encodeHTML(valueFontWeight + '')\n    };\n  } else {\n    return {\n      nameStyle: {\n        fontSize: nameFontSize,\n        fill: nameFontColor,\n        fontWeight: nameFontWeight\n      },\n      valueStyle: {\n        fontSize: valueFontSize,\n        fill: valueFontColor,\n        fontWeight: valueFontWeight\n      }\n    };\n  }\n}\n// See `TooltipMarkupLayoutIntent['innerGapLevel']`.\n// (value from UI design)\nvar HTML_GAPS = [0, 10, 20, 30];\nvar RICH_TEXT_GAPS = ['', '\\n', '\\n\\n', '\\n\\n\\n'];\n// eslint-disable-next-line max-len\nexport function createTooltipMarkup(type, option) {\n  option.type = type;\n  return option;\n}\nfunction isSectionFragment(frag) {\n  return frag.type === 'section';\n}\nfunction getBuilder(frag) {\n  return isSectionFragment(frag) ? buildSection : buildNameValue;\n}\nfunction getBlockGapLevel(frag) {\n  if (isSectionFragment(frag)) {\n    var gapLevel_1 = 0;\n    var subBlockLen = frag.blocks.length;\n    var hasInnerGap_1 = subBlockLen > 1 || subBlockLen > 0 && !frag.noHeader;\n    each(frag.blocks, function (subBlock) {\n      var subGapLevel = getBlockGapLevel(subBlock);\n      // If the some of the sub-blocks have some gaps (like 10px) inside, this block\n      // should use a larger gap (like 20px) to distinguish those sub-blocks.\n      if (subGapLevel >= gapLevel_1) {\n        gapLevel_1 = subGapLevel + +(hasInnerGap_1 && (\n        // 0 always can not be readable gap level.\n        !subGapLevel\n        // If no header, always keep the sub gap level. Otherwise\n        // look weird in case `multipleSeries`.\n        || isSectionFragment(subBlock) && !subBlock.noHeader));\n      }\n    });\n    return gapLevel_1;\n  }\n  return 0;\n}\nfunction buildSection(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var noHeader = fragment.noHeader;\n  var gaps = getGap(getBlockGapLevel(fragment));\n  var subMarkupTextList = [];\n  var subBlocks = fragment.blocks || [];\n  assert(!subBlocks || isArray(subBlocks));\n  subBlocks = subBlocks || [];\n  var orderMode = ctx.orderMode;\n  if (fragment.sortBlocks && orderMode) {\n    subBlocks = subBlocks.slice();\n    var orderMap = {\n      valueAsc: 'asc',\n      valueDesc: 'desc'\n    };\n    if (hasOwn(orderMap, orderMode)) {\n      var comparator_1 = new SortOrderComparator(orderMap[orderMode], null);\n      subBlocks.sort(function (a, b) {\n        return comparator_1.evaluate(a.sortParam, b.sortParam);\n      });\n    }\n    // FIXME 'seriesDesc' necessary?\n    else if (orderMode === 'seriesDesc') {\n      subBlocks.reverse();\n    }\n  }\n  each(subBlocks, function (subBlock, idx) {\n    var valueFormatter = fragment.valueFormatter;\n    var subMarkupText = getBuilder(subBlock)(\n    // Inherit valueFormatter\n    valueFormatter ? extend(extend({}, ctx), {\n      valueFormatter: valueFormatter\n    }) : ctx, subBlock, idx > 0 ? gaps.html : 0, toolTipTextStyle);\n    subMarkupText != null && subMarkupTextList.push(subMarkupText);\n  });\n  var subMarkupText = ctx.renderMode === 'richText' ? subMarkupTextList.join(gaps.richText) : wrapBlockHTML(toolTipTextStyle, subMarkupTextList.join(''), noHeader ? topMarginForOuterGap : gaps.html);\n  if (noHeader) {\n    return subMarkupText;\n  }\n  var displayableHeader = makeValueReadable(fragment.header, 'ordinal', ctx.useUTC);\n  var nameStyle = getTooltipTextStyle(toolTipTextStyle, ctx.renderMode).nameStyle;\n  var tooltipLineHeight = getTooltipLineHeight(toolTipTextStyle);\n  if (ctx.renderMode === 'richText') {\n    return wrapInlineNameRichText(ctx, displayableHeader, nameStyle) + gaps.richText + subMarkupText;\n  } else {\n    return wrapBlockHTML(toolTipTextStyle, \"<div style=\\\"\" + nameStyle + \";\" + tooltipLineHeight + \";\\\">\" + encodeHTML(displayableHeader) + '</div>' + subMarkupText, topMarginForOuterGap);\n  }\n}\nfunction buildNameValue(ctx, fragment, topMarginForOuterGap, toolTipTextStyle) {\n  var renderMode = ctx.renderMode;\n  var noName = fragment.noName;\n  var noValue = fragment.noValue;\n  var noMarker = !fragment.markerType;\n  var name = fragment.name;\n  var useUTC = ctx.useUTC;\n  var valueFormatter = fragment.valueFormatter || ctx.valueFormatter || function (value) {\n    value = isArray(value) ? value : [value];\n    return map(value, function (val, idx) {\n      return makeValueReadable(val, isArray(valueTypeOption) ? valueTypeOption[idx] : valueTypeOption, useUTC);\n    });\n  };\n  if (noName && noValue) {\n    return;\n  }\n  var markerStr = noMarker ? '' : ctx.markupStyleCreator.makeTooltipMarker(fragment.markerType, fragment.markerColor || '#333', renderMode);\n  var readableName = noName ? '' : makeValueReadable(name, 'ordinal', useUTC);\n  var valueTypeOption = fragment.valueType;\n  var readableValueList = noValue ? [] : valueFormatter(fragment.value, fragment.dataIndex);\n  var valueAlignRight = !noMarker || !noName;\n  // It little weird if only value next to marker but far from marker.\n  var valueCloseToMarker = !noMarker && noName;\n  var _a = getTooltipTextStyle(toolTipTextStyle, renderMode),\n    nameStyle = _a.nameStyle,\n    valueStyle = _a.valueStyle;\n  return renderMode === 'richText' ? (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameRichText(ctx, readableName, nameStyle))\n  // Value has commas inside, so use ' ' as delimiter for multiple values.\n  + (noValue ? '' : wrapInlineValueRichText(ctx, readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)) : wrapBlockHTML(toolTipTextStyle, (noMarker ? '' : markerStr) + (noName ? '' : wrapInlineNameHTML(readableName, !noMarker, nameStyle)) + (noValue ? '' : wrapInlineValueHTML(readableValueList, valueAlignRight, valueCloseToMarker, valueStyle)), topMarginForOuterGap);\n}\n/**\r\n * @return markupText. null/undefined means no content.\r\n */\nexport function buildTooltipMarkup(fragment, markupStyleCreator, renderMode, orderMode, useUTC, toolTipTextStyle) {\n  if (!fragment) {\n    return;\n  }\n  var builder = getBuilder(fragment);\n  var ctx = {\n    useUTC: useUTC,\n    renderMode: renderMode,\n    orderMode: orderMode,\n    markupStyleCreator: markupStyleCreator,\n    valueFormatter: fragment.valueFormatter\n  };\n  return builder(ctx, fragment, 0, toolTipTextStyle);\n}\nfunction getGap(gapLevel) {\n  return {\n    html: HTML_GAPS[gapLevel],\n    richText: RICH_TEXT_GAPS[gapLevel]\n  };\n}\nfunction wrapBlockHTML(textStyle, encodedContent, topGap) {\n  var clearfix = '<div style=\"clear:both\"></div>';\n  var marginCSS = \"margin: \" + topGap + \"px 0 0\";\n  var tooltipLineHeight = getTooltipLineHeight(textStyle);\n  return \"<div style=\\\"\" + marginCSS + \";\" + tooltipLineHeight + \";\\\">\" + encodedContent + clearfix + '</div>';\n}\nfunction wrapInlineNameHTML(name, leftHasMarker, style) {\n  var marginCss = leftHasMarker ? 'margin-left:2px' : '';\n  return \"<span style=\\\"\" + style + \";\" + marginCss + \"\\\">\" + encodeHTML(name) + '</span>';\n}\nfunction wrapInlineValueHTML(valueList, alignRight, valueCloseToMarker, style) {\n  // Do not too close to marker, considering there are multiple values separated by spaces.\n  var paddingStr = valueCloseToMarker ? '10px' : '20px';\n  var alignCSS = alignRight ? \"float:right;margin-left:\" + paddingStr : '';\n  valueList = isArray(valueList) ? valueList : [valueList];\n  return \"<span style=\\\"\" + alignCSS + \";\" + style + \"\\\">\"\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  + map(valueList, function (value) {\n    return encodeHTML(value);\n  }).join('&nbsp;&nbsp;') + '</span>';\n}\nfunction wrapInlineNameRichText(ctx, name, style) {\n  return ctx.markupStyleCreator.wrapRichTextStyle(name, style);\n}\nfunction wrapInlineValueRichText(ctx, values, alignRight, valueCloseToMarker, style) {\n  var styles = [style];\n  var paddingLeft = valueCloseToMarker ? 10 : 20;\n  alignRight && styles.push({\n    padding: [0, 0, 0, paddingLeft],\n    align: 'right'\n  });\n  // Value has commas inside, so use '  ' as delimiter for multiple values.\n  return ctx.markupStyleCreator.wrapRichTextStyle(isArray(values) ? values.join('  ') : values, styles);\n}\nexport function retrieveVisualColorForTooltipMarker(series, dataIndex) {\n  var style = series.getData().getItemVisual(dataIndex, 'style');\n  var color = style[series.visualDrawType];\n  return convertToColorString(color);\n}\nexport function getPaddingFromTooltipModel(model, renderMode) {\n  var padding = model.get('padding');\n  return padding != null ? padding\n  // We give slightly different to look pretty.\n  : renderMode === 'richText' ? [8, 10] : 10;\n}\n/**\r\n * The major feature is generate styles for `renderMode: 'richText'`.\r\n * But it also serves `renderMode: 'html'` to provide\r\n * \"renderMode-independent\" API.\r\n */\nvar TooltipMarkupStyleCreator = /** @class */function () {\n  function TooltipMarkupStyleCreator() {\n    this.richTextStyles = {};\n    // Notice that \"generate a style name\" usually happens repeatedly when mouse is moving and\n    // a tooltip is displayed. So we put the `_nextStyleNameId` as a member of each creator\n    // rather than static shared by all creators (which will cause it increase to fast).\n    this._nextStyleNameId = getRandomIdBase();\n  }\n  TooltipMarkupStyleCreator.prototype._generateStyleName = function () {\n    return '__EC_aUTo_' + this._nextStyleNameId++;\n  };\n  TooltipMarkupStyleCreator.prototype.makeTooltipMarker = function (markerType, colorStr, renderMode) {\n    var markerId = renderMode === 'richText' ? this._generateStyleName() : null;\n    var marker = getTooltipMarker({\n      color: colorStr,\n      type: markerType,\n      renderMode: renderMode,\n      markerId: markerId\n    });\n    if (isString(marker)) {\n      return marker;\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(markerId);\n      }\n      this.richTextStyles[markerId] = marker.style;\n      return marker.content;\n    }\n  };\n  /**\r\n   * @usage\r\n   * ```ts\r\n   * const styledText = markupStyleCreator.wrapRichTextStyle([\r\n   *     // The styles will be auto merged.\r\n   *     {\r\n   *         fontSize: 12,\r\n   *         color: 'blue'\r\n   *     },\r\n   *     {\r\n   *         padding: 20\r\n   *     }\r\n   * ]);\r\n   * ```\r\n   */\n  TooltipMarkupStyleCreator.prototype.wrapRichTextStyle = function (text, styles) {\n    var finalStl = {};\n    if (isArray(styles)) {\n      each(styles, function (stl) {\n        return extend(finalStl, stl);\n      });\n    } else {\n      extend(finalStl, styles);\n    }\n    var styleName = this._generateStyleName();\n    this.richTextStyles[styleName] = finalStl;\n    return \"{\" + styleName + \"|\" + text + \"}\";\n  };\n  return TooltipMarkupStyleCreator;\n}();\nexport { TooltipMarkupStyleCreator };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { trim, isArray, each, reduce } from 'zrender/lib/core/util.js';\nimport { retrieveVisualColorForTooltipMarker, createTooltipMarkup } from './tooltipMarkup.js';\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isNameSpecified } from '../../util/model.js';\nexport function defaultSeriesFormatTooltip(opt) {\n  var series = opt.series;\n  var dataIndex = opt.dataIndex;\n  var multipleSeries = opt.multipleSeries;\n  var data = series.getData();\n  var tooltipDims = data.mapDimensionsAll('defaultedTooltip');\n  var tooltipDimLen = tooltipDims.length;\n  var value = series.getRawValue(dataIndex);\n  var isValueArr = isArray(value);\n  var markerColor = retrieveVisualColorForTooltipMarker(series, dataIndex);\n  // Complicated rule for pretty tooltip.\n  var inlineValue;\n  var inlineValueType;\n  var subBlocks;\n  var sortParam;\n  if (tooltipDimLen > 1 || isValueArr && !tooltipDimLen) {\n    var formatArrResult = formatTooltipArrayValue(value, series, dataIndex, tooltipDims, markerColor);\n    inlineValue = formatArrResult.inlineValues;\n    inlineValueType = formatArrResult.inlineValueTypes;\n    subBlocks = formatArrResult.blocks;\n    // Only support tooltip sort by the first inline value. It's enough in most cases.\n    sortParam = formatArrResult.inlineValues[0];\n  } else if (tooltipDimLen) {\n    var dimInfo = data.getDimensionInfo(tooltipDims[0]);\n    sortParam = inlineValue = retrieveRawValue(data, dataIndex, tooltipDims[0]);\n    inlineValueType = dimInfo.type;\n  } else {\n    sortParam = inlineValue = isValueArr ? value[0] : value;\n  }\n  // Do not show generated series name. It might not be readable.\n  var seriesNameSpecified = isNameSpecified(series);\n  var seriesName = seriesNameSpecified && series.name || '';\n  var itemName = data.getName(dataIndex);\n  var inlineName = multipleSeries ? seriesName : itemName;\n  return createTooltipMarkup('section', {\n    header: seriesName,\n    // When series name is not specified, do not show a header line with only '-'.\n    // This case always happens in tooltip.trigger: 'item'.\n    noHeader: multipleSeries || !seriesNameSpecified,\n    sortParam: sortParam,\n    blocks: [createTooltipMarkup('nameValue', {\n      markerType: 'item',\n      markerColor: markerColor,\n      // Do not mix display seriesName and itemName in one tooltip,\n      // which might confuses users.\n      name: inlineName,\n      // name dimension might be auto assigned, where the name might\n      // be not readable. So we check trim here.\n      noName: !trim(inlineName),\n      value: inlineValue,\n      valueType: inlineValueType,\n      dataIndex: dataIndex\n    })].concat(subBlocks || [])\n  });\n}\nfunction formatTooltipArrayValue(value, series, dataIndex, tooltipDims, colorStr) {\n  // check: category-no-encode-has-axis-data in dataset.html\n  var data = series.getData();\n  var isValueMultipleLine = reduce(value, function (isValueMultipleLine, val, idx) {\n    var dimItem = data.getDimensionInfo(idx);\n    return isValueMultipleLine = isValueMultipleLine || dimItem && dimItem.tooltip !== false && dimItem.displayName != null;\n  }, false);\n  var inlineValues = [];\n  var inlineValueTypes = [];\n  var blocks = [];\n  tooltipDims.length ? each(tooltipDims, function (dim) {\n    setEachItem(retrieveRawValue(data, dataIndex, dim), dim);\n  })\n  // By default, all dims is used on tooltip.\n  : each(value, setEachItem);\n  function setEachItem(val, dim) {\n    var dimInfo = data.getDimensionInfo(dim);\n    // If `dimInfo.tooltip` is not set, show tooltip.\n    if (!dimInfo || dimInfo.otherDims.tooltip === false) {\n      return;\n    }\n    if (isValueMultipleLine) {\n      blocks.push(createTooltipMarkup('nameValue', {\n        markerType: 'subItem',\n        markerColor: colorStr,\n        name: dimInfo.displayName,\n        value: val,\n        valueType: dimInfo.type\n      }));\n    } else {\n      inlineValues.push(val);\n      inlineValueTypes.push(dimInfo.type);\n    }\n  }\n  return {\n    inlineValues: inlineValues,\n    inlineValueTypes: inlineValueTypes,\n    blocks: blocks\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport * as modelUtil from '../util/model.js';\nimport ComponentModel from './Component.js';\nimport { PaletteMixin } from './mixin/palette.js';\nimport { DataFormatMixin } from '../model/mixin/dataFormat.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport { createTask } from '../core/task.js';\nimport { mountExtend } from '../util/clazz.js';\nimport { SourceManager } from '../data/helper/sourceManager.js';\nimport { defaultSeriesFormatTooltip } from '../component/tooltip/seriesFormatTooltip.js';\nvar inner = modelUtil.makeInner();\nfunction getSelectionKey(data, dataIndex) {\n  return data.getName(dataIndex) || data.getId(dataIndex);\n}\nexport var SERIES_UNIVERSAL_TRANSITION_PROP = '__universalTransitionEnabled';\nvar SeriesModel = /** @class */function (_super) {\n  __extends(SeriesModel, _super);\n  function SeriesModel() {\n    // [Caution]: Because this class or desecendants can be used as `XXX.extend(subProto)`,\n    // the class members must not be initialized in constructor or declaration place.\n    // Otherwise there is bad case:\n    //   class A {xxx = 1;}\n    //   enableClassExtend(A);\n    //   class B extends A {}\n    //   var C = B.extend({xxx: 5});\n    //   var c = new C();\n    //   console.log(c.xxx); // expect 5 but always 1.\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    // ---------------------------------------\n    // Props about data selection\n    // ---------------------------------------\n    _this._selectedDataIndicesMap = {};\n    return _this;\n  }\n  SeriesModel.prototype.init = function (option, parentModel, ecModel) {\n    this.seriesIndex = this.componentIndex;\n    this.dataTask = createTask({\n      count: dataTaskCount,\n      reset: dataTaskReset\n    });\n    this.dataTask.context = {\n      model: this\n    };\n    this.mergeDefaultAndTheme(option, ecModel);\n    var sourceManager = inner(this).sourceManager = new SourceManager(this);\n    sourceManager.prepareSource();\n    var data = this.getInitialData(option, ecModel);\n    wrapData(data, this);\n    this.dataTask.context.data = data;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.assert(data, 'getInitialData returned invalid data.');\n    }\n    inner(this).dataBeforeProcessed = data;\n    // If we reverse the order (make data firstly, and then make\n    // dataBeforeProcessed by cloneShallow), cloneShallow will\n    // cause data.graph.data !== data when using\n    // module:echarts/data/Graph or module:echarts/data/Tree.\n    // See module:echarts/data/helper/linkSeriesData\n    // Theoretically, it is unreasonable to call `seriesModel.getData()` in the model\n    // init or merge stage, because the data can be restored. So we do not `restoreData`\n    // and `setData` here, which forbids calling `seriesModel.getData()` in this stage.\n    // Call `seriesModel.getRawData()` instead.\n    // this.restoreData();\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  /**\r\n   * Util for merge default and theme to option\r\n   */\n  SeriesModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n    var layoutMode = fetchLayoutMode(this);\n    var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n    // Backward compat: using subType on theme.\n    // But if name duplicate between series subType\n    // (for example: parallel) add component mainType,\n    // add suffix 'Series'.\n    var themeSubType = this.subType;\n    if (ComponentModel.hasClass(themeSubType)) {\n      themeSubType += 'Series';\n    }\n    zrUtil.merge(option, ecModel.getTheme().get(this.subType));\n    zrUtil.merge(option, this.getDefaultOption());\n    // Default label emphasis `show`\n    modelUtil.defaultEmphasis(option, 'label', ['show']);\n    this.fillDataTextStyle(option.data);\n    if (layoutMode) {\n      mergeLayoutParam(option, inputPositionParams, layoutMode);\n    }\n  };\n  SeriesModel.prototype.mergeOption = function (newSeriesOption, ecModel) {\n    // this.settingTask.dirty();\n    newSeriesOption = zrUtil.merge(this.option, newSeriesOption, true);\n    this.fillDataTextStyle(newSeriesOption.data);\n    var layoutMode = fetchLayoutMode(this);\n    if (layoutMode) {\n      mergeLayoutParam(this.option, newSeriesOption, layoutMode);\n    }\n    var sourceManager = inner(this).sourceManager;\n    sourceManager.dirty();\n    sourceManager.prepareSource();\n    var data = this.getInitialData(newSeriesOption, ecModel);\n    wrapData(data, this);\n    this.dataTask.dirty();\n    this.dataTask.context.data = data;\n    inner(this).dataBeforeProcessed = data;\n    autoSeriesName(this);\n    this._initSelectedMapFromData(data);\n  };\n  SeriesModel.prototype.fillDataTextStyle = function (data) {\n    // Default data label emphasis `show`\n    // FIXME Tree structure data ?\n    // FIXME Performance ?\n    if (data && !zrUtil.isTypedArray(data)) {\n      var props = ['show'];\n      for (var i = 0; i < data.length; i++) {\n        if (data[i] && data[i].label) {\n          modelUtil.defaultEmphasis(data[i], 'label', props);\n        }\n      }\n    }\n  };\n  /**\r\n   * Init a data structure from data related option in series\r\n   * Must be overridden.\r\n   */\n  SeriesModel.prototype.getInitialData = function (option, ecModel) {\n    return;\n  };\n  /**\r\n   * Append data to list\r\n   */\n  SeriesModel.prototype.appendData = function (params) {\n    // FIXME ???\n    // (1) If data from dataset, forbidden append.\n    // (2) support append data of dataset.\n    var data = this.getRawData();\n    data.appendData(params.data);\n  };\n  /**\r\n   * Consider some method like `filter`, `map` need make new data,\r\n   * We should make sure that `seriesModel.getData()` get correct\r\n   * data in the stream procedure. So we fetch data from upstream\r\n   * each time `task.perform` called.\r\n   */\n  SeriesModel.prototype.getData = function (dataType) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var data = task.context.data;\n      return dataType == null || !data.getLinkedData ? data : data.getLinkedData(dataType);\n    } else {\n      // When series is not alive (that may happen when click toolbox\n      // restore or setOption with not merge mode), series data may\n      // be still need to judge animation or something when graphic\n      // elements want to know whether fade out.\n      return inner(this).data;\n    }\n  };\n  SeriesModel.prototype.getAllData = function () {\n    var mainData = this.getData();\n    return mainData && mainData.getLinkedDataAll ? mainData.getLinkedDataAll() : [{\n      data: mainData\n    }];\n  };\n  SeriesModel.prototype.setData = function (data) {\n    var task = getCurrentTask(this);\n    if (task) {\n      var context = task.context;\n      // Consider case: filter, data sample.\n      // FIXME:TS never used, so comment it\n      // if (context.data !== data && task.modifyOutputEnd) {\n      //     task.setOutputEnd(data.count());\n      // }\n      context.outputData = data;\n      // Caution: setData should update context.data,\n      // Because getData may be called multiply in a\n      // single stage and expect to get the data just\n      // set. (For example, AxisProxy, x y both call\n      // getData and setDate sequentially).\n      // So the context.data should be fetched from\n      // upstream each time when a stage starts to be\n      // performed.\n      if (task !== this.dataTask) {\n        context.data = data;\n      }\n    }\n    inner(this).data = data;\n  };\n  SeriesModel.prototype.getEncode = function () {\n    var encode = this.get('encode', true);\n    if (encode) {\n      return zrUtil.createHashMap(encode);\n    }\n  };\n  SeriesModel.prototype.getSourceManager = function () {\n    return inner(this).sourceManager;\n  };\n  SeriesModel.prototype.getSource = function () {\n    return this.getSourceManager().getSource();\n  };\n  /**\r\n   * Get data before processed\r\n   */\n  SeriesModel.prototype.getRawData = function () {\n    return inner(this).dataBeforeProcessed;\n  };\n  SeriesModel.prototype.getColorBy = function () {\n    var colorBy = this.get('colorBy');\n    return colorBy || 'series';\n  };\n  SeriesModel.prototype.isColorBySeries = function () {\n    return this.getColorBy() === 'series';\n  };\n  /**\r\n   * Get base axis if has coordinate system and has axis.\r\n   * By default use coordSys.getBaseAxis();\r\n   * Can be overridden for some chart.\r\n   * @return {type} description\r\n   */\n  SeriesModel.prototype.getBaseAxis = function () {\n    var coordSys = this.coordinateSystem;\n    // @ts-ignore\n    return coordSys && coordSys.getBaseAxis && coordSys.getBaseAxis();\n  };\n  /**\r\n   * Default tooltip formatter\r\n   *\r\n   * @param dataIndex\r\n   * @param multipleSeries\r\n   * @param dataType\r\n   * @param renderMode valid values: 'html'(by default) and 'richText'.\r\n   *        'html' is used for rendering tooltip in extra DOM form, and the result\r\n   *        string is used as DOM HTML content.\r\n   *        'richText' is used for rendering tooltip in rich text form, for those where\r\n   *        DOM operation is not supported.\r\n   * @return formatted tooltip with `html` and `markers`\r\n   *        Notice: The override method can also return string\r\n   */\n  SeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    return defaultSeriesFormatTooltip({\n      series: this,\n      dataIndex: dataIndex,\n      multipleSeries: multipleSeries\n    });\n  };\n  SeriesModel.prototype.isAnimationEnabled = function () {\n    var ecModel = this.ecModel;\n    // Disable animation if using echarts in node but not give ssr flag.\n    // In ssr mode, renderToString will generate svg with css animation.\n    if (env.node && !(ecModel && ecModel.ssr)) {\n      return false;\n    }\n    var animationEnabled = this.getShallow('animation');\n    if (animationEnabled) {\n      if (this.getData().count() > this.getShallow('animationThreshold')) {\n        animationEnabled = false;\n      }\n    }\n    return !!animationEnabled;\n  };\n  SeriesModel.prototype.restoreData = function () {\n    this.dataTask.dirty();\n  };\n  SeriesModel.prototype.getColorFromPalette = function (name, scope, requestColorNum) {\n    var ecModel = this.ecModel;\n    // PENDING\n    var color = PaletteMixin.prototype.getColorFromPalette.call(this, name, scope, requestColorNum);\n    if (!color) {\n      color = ecModel.getColorFromPalette(name, scope, requestColorNum);\n    }\n    return color;\n  };\n  /**\r\n   * Use `data.mapDimensionsAll(coordDim)` instead.\r\n   * @deprecated\r\n   */\n  SeriesModel.prototype.coordDimToDataDim = function (coordDim) {\n    return this.getRawData().mapDimensionsAll(coordDim);\n  };\n  /**\r\n   * Get progressive rendering count each step\r\n   */\n  SeriesModel.prototype.getProgressive = function () {\n    return this.get('progressive');\n  };\n  /**\r\n   * Get progressive rendering count each step\r\n   */\n  SeriesModel.prototype.getProgressiveThreshold = function () {\n    return this.get('progressiveThreshold');\n  };\n  // PENGING If selectedMode is null ?\n  SeriesModel.prototype.select = function (innerDataIndices, dataType) {\n    this._innerSelect(this.getData(dataType), innerDataIndices);\n  };\n  SeriesModel.prototype.unselect = function (innerDataIndices, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return;\n    }\n    var selectedMode = this.option.selectedMode;\n    var data = this.getData(dataType);\n    if (selectedMode === 'series' || selectedMap === 'all') {\n      this.option.selectedMap = {};\n      this._selectedDataIndicesMap = {};\n      return;\n    }\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      var dataIndex = innerDataIndices[i];\n      var nameOrId = getSelectionKey(data, dataIndex);\n      selectedMap[nameOrId] = false;\n      this._selectedDataIndicesMap[nameOrId] = -1;\n    }\n  };\n  SeriesModel.prototype.toggleSelect = function (innerDataIndices, dataType) {\n    var tmpArr = [];\n    for (var i = 0; i < innerDataIndices.length; i++) {\n      tmpArr[0] = innerDataIndices[i];\n      this.isSelected(innerDataIndices[i], dataType) ? this.unselect(tmpArr, dataType) : this.select(tmpArr, dataType);\n    }\n  };\n  SeriesModel.prototype.getSelectedDataIndices = function () {\n    if (this.option.selectedMap === 'all') {\n      return [].slice.call(this.getData().getIndices());\n    }\n    var selectedDataIndicesMap = this._selectedDataIndicesMap;\n    var nameOrIds = zrUtil.keys(selectedDataIndicesMap);\n    var dataIndices = [];\n    for (var i = 0; i < nameOrIds.length; i++) {\n      var dataIndex = selectedDataIndicesMap[nameOrIds[i]];\n      if (dataIndex >= 0) {\n        dataIndices.push(dataIndex);\n      }\n    }\n    return dataIndices;\n  };\n  SeriesModel.prototype.isSelected = function (dataIndex, dataType) {\n    var selectedMap = this.option.selectedMap;\n    if (!selectedMap) {\n      return false;\n    }\n    var data = this.getData(dataType);\n    return (selectedMap === 'all' || selectedMap[getSelectionKey(data, dataIndex)]) && !data.getItemModel(dataIndex).get(['select', 'disabled']);\n  };\n  SeriesModel.prototype.isUniversalTransitionEnabled = function () {\n    if (this[SERIES_UNIVERSAL_TRANSITION_PROP]) {\n      return true;\n    }\n    var universalTransitionOpt = this.option.universalTransition;\n    // Quick reject\n    if (!universalTransitionOpt) {\n      return false;\n    }\n    if (universalTransitionOpt === true) {\n      return true;\n    }\n    // Can be simply 'universalTransition: true'\n    return universalTransitionOpt && universalTransitionOpt.enabled;\n  };\n  SeriesModel.prototype._innerSelect = function (data, innerDataIndices) {\n    var _a, _b;\n    var option = this.option;\n    var selectedMode = option.selectedMode;\n    var len = innerDataIndices.length;\n    if (!selectedMode || !len) {\n      return;\n    }\n    if (selectedMode === 'series') {\n      option.selectedMap = 'all';\n    } else if (selectedMode === 'multiple') {\n      if (!zrUtil.isObject(option.selectedMap)) {\n        option.selectedMap = {};\n      }\n      var selectedMap = option.selectedMap;\n      for (var i = 0; i < len; i++) {\n        var dataIndex = innerDataIndices[i];\n        // TODO different types of data share same object.\n        var nameOrId = getSelectionKey(data, dataIndex);\n        selectedMap[nameOrId] = true;\n        this._selectedDataIndicesMap[nameOrId] = data.getRawIndex(dataIndex);\n      }\n    } else if (selectedMode === 'single' || selectedMode === true) {\n      var lastDataIndex = innerDataIndices[len - 1];\n      var nameOrId = getSelectionKey(data, lastDataIndex);\n      option.selectedMap = (_a = {}, _a[nameOrId] = true, _a);\n      this._selectedDataIndicesMap = (_b = {}, _b[nameOrId] = data.getRawIndex(lastDataIndex), _b);\n    }\n  };\n  SeriesModel.prototype._initSelectedMapFromData = function (data) {\n    // Ignore select info in data if selectedMap exists.\n    // NOTE It's only for legacy usage. edge data is not supported.\n    if (this.option.selectedMap) {\n      return;\n    }\n    var dataIndices = [];\n    if (data.hasItemOption) {\n      data.each(function (idx) {\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem.selected) {\n          dataIndices.push(idx);\n        }\n      });\n    }\n    if (dataIndices.length > 0) {\n      this._innerSelect(data, dataIndices);\n    }\n  };\n  // /**\n  //  * @see {module:echarts/stream/Scheduler}\n  //  */\n  // abstract pipeTask: null\n  SeriesModel.registerClass = function (clz) {\n    return ComponentModel.registerClass(clz);\n  };\n  SeriesModel.protoInitialize = function () {\n    var proto = SeriesModel.prototype;\n    proto.type = 'series.__base__';\n    proto.seriesIndex = 0;\n    proto.ignoreStyleOnData = false;\n    proto.hasSymbolVisual = false;\n    proto.defaultSymbol = 'circle';\n    // Make sure the values can be accessed!\n    proto.visualStyleAccessPath = 'itemStyle';\n    proto.visualDrawType = 'fill';\n  }();\n  return SeriesModel;\n}(ComponentModel);\nzrUtil.mixin(SeriesModel, DataFormatMixin);\nzrUtil.mixin(SeriesModel, PaletteMixin);\nmountExtend(SeriesModel, ComponentModel);\n/**\r\n * MUST be called after `prepareSource` called\r\n * Here we need to make auto series, especially for auto legend. But we\r\n * do not modify series.name in option to avoid side effects.\r\n */\nfunction autoSeriesName(seriesModel) {\n  // User specified name has higher priority, otherwise it may cause\n  // series can not be queried unexpectedly.\n  var name = seriesModel.name;\n  if (!modelUtil.isNameSpecified(seriesModel)) {\n    seriesModel.name = getSeriesAutoName(seriesModel) || name;\n  }\n}\nfunction getSeriesAutoName(seriesModel) {\n  var data = seriesModel.getRawData();\n  var dataDims = data.mapDimensionsAll('seriesName');\n  var nameArr = [];\n  zrUtil.each(dataDims, function (dataDim) {\n    var dimInfo = data.getDimensionInfo(dataDim);\n    dimInfo.displayName && nameArr.push(dimInfo.displayName);\n  });\n  return nameArr.join(' ');\n}\nfunction dataTaskCount(context) {\n  return context.model.getRawData().count();\n}\nfunction dataTaskReset(context) {\n  var seriesModel = context.model;\n  seriesModel.setData(seriesModel.getRawData().cloneShallow());\n  return dataTaskProgress;\n}\nfunction dataTaskProgress(param, context) {\n  // Avoid repeat cloneShallow when data just created in reset.\n  if (context.outputData && param.end > context.outputData.count()) {\n    context.model.getRawData().cloneShallow(context.outputData);\n  }\n}\n// TODO refactor\nfunction wrapData(data, seriesModel) {\n  zrUtil.each(zrUtil.concatArray(data.CHANGABLE_METHODS, data.DOWNSAMPLE_METHODS), function (methodName) {\n    data.wrapMethod(methodName, zrUtil.curry(onDataChange, seriesModel));\n  });\n}\nfunction onDataChange(seriesModel, newList) {\n  var task = getCurrentTask(seriesModel);\n  if (task) {\n    // Consider case: filter, selectRange\n    task.setOutputEnd((newList || this).count());\n  }\n  return newList;\n}\nfunction getCurrentTask(seriesModel) {\n  var scheduler = (seriesModel.ecModel || {}).scheduler;\n  var pipeline = scheduler && scheduler.getPipeline(seriesModel.uid);\n  if (pipeline) {\n    // When pipline finished, the currrentTask keep the last\n    // task (renderTask).\n    var task = pipeline.currentTask;\n    if (task) {\n      var agentStubMap = task.agentStubMap;\n      if (agentStubMap) {\n        task = agentStubMap.get(seriesModel.uid);\n      }\n    }\n    return task;\n  }\n}\nexport default SeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nvar ComponentView = /** @class */function () {\n  function ComponentView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewComponent');\n  }\n  ComponentView.prototype.init = function (ecModel, api) {};\n  ComponentView.prototype.render = function (model, ecModel, api, payload) {};\n  ComponentView.prototype.dispose = function (ecModel, api) {};\n  ComponentView.prototype.updateView = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateLayout = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  ComponentView.prototype.updateVisual = function (model, ecModel, api, payload) {\n    // Do nothing;\n  };\n  /**\r\n   * Hook for toggle blur target series.\r\n   * Can be used in marker for blur or leave blur the markers\r\n   */\n  ComponentView.prototype.toggleBlurSeries = function (seriesModels, isBlur, ecModel) {\n    // Do nothing;\n  };\n  /**\r\n   * Traverse the new rendered elements.\r\n   *\r\n   * It will traverse the new added element in progressive rendering.\r\n   * And traverse all in normal rendering.\r\n   */\n  ComponentView.prototype.eachRendered = function (cb) {\n    var group = this.group;\n    if (group) {\n      group.traverse(cb);\n    }\n  };\n  return ComponentView;\n}();\n;\nclazzUtil.enableClassExtend(ComponentView);\nclazzUtil.enableClassManagement(ComponentView);\nexport default ComponentView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../../util/model.js';\n/**\r\n * @return {string} If large mode changed, return string 'reset';\r\n */\nexport default function createRenderPlanner() {\n  var inner = makeInner();\n  return function (seriesModel) {\n    var fields = inner(seriesModel);\n    var pipelineContext = seriesModel.pipelineContext;\n    var originalLarge = !!fields.large;\n    var originalProgressive = !!fields.progressiveRender;\n    // FIXME: if the planner works on a filtered series, `pipelineContext` does not\n    // exists. See #11611 . Probably we need to modify this structure, see the comment\n    // on `performRawSeries` in `Schedular.js`.\n    var large = fields.large = !!(pipelineContext && pipelineContext.large);\n    var progressive = fields.progressiveRender = !!(pipelineContext && pipelineContext.progressiveRender);\n    return !!(originalLarge !== large || originalProgressive !== progressive) && 'reset';\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each } from 'zrender/lib/core/util.js';\nimport Group from 'zrender/lib/graphic/Group.js';\nimport * as componentUtil from '../util/component.js';\nimport * as clazzUtil from '../util/clazz.js';\nimport * as modelUtil from '../util/model.js';\nimport { enterEmphasis, leaveEmphasis, getHighlightDigit, isHighDownDispatcher } from '../util/states.js';\nimport { createTask } from '../core/task.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { traverseElements } from '../util/graphic.js';\nimport { error } from '../util/log.js';\nvar inner = modelUtil.makeInner();\nvar renderPlanner = createRenderPlanner();\nvar ChartView = /** @class */function () {\n  function ChartView() {\n    this.group = new Group();\n    this.uid = componentUtil.getUID('viewChart');\n    this.renderTask = createTask({\n      plan: renderTaskPlan,\n      reset: renderTaskReset\n    });\n    this.renderTask.context = {\n      view: this\n    };\n  }\n  ChartView.prototype.init = function (ecModel, api) {};\n  ChartView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error('render method must been implemented');\n    }\n  };\n  /**\r\n   * Highlight series or specified data item.\r\n   */\n  ChartView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'emphasis');\n  };\n  /**\r\n   * Downplay series or specified data item.\r\n   */\n  ChartView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData(payload && payload.dataType);\n    if (!data) {\n      if (process.env.NODE_ENV !== 'production') {\n        error(\"Unknown dataType \" + payload.dataType);\n      }\n      return;\n    }\n    toggleHighlight(data, payload, 'normal');\n  };\n  /**\r\n   * Remove self.\r\n   */\n  ChartView.prototype.remove = function (ecModel, api) {\n    this.group.removeAll();\n  };\n  /**\r\n   * Dispose self.\r\n   */\n  ChartView.prototype.dispose = function (ecModel, api) {};\n  ChartView.prototype.updateView = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateLayout = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  // FIXME never used?\n  ChartView.prototype.updateVisual = function (seriesModel, ecModel, api, payload) {\n    this.render(seriesModel, ecModel, api, payload);\n  };\n  /**\r\n   * Traverse the new rendered elements.\r\n   *\r\n   * It will traverse the new added element in progressive rendering.\r\n   * And traverse all in normal rendering.\r\n   */\n  ChartView.prototype.eachRendered = function (cb) {\n    traverseElements(this.group, cb);\n  };\n  ChartView.markUpdateMethod = function (payload, methodName) {\n    inner(payload).updateMethod = methodName;\n  };\n  ChartView.protoInitialize = function () {\n    var proto = ChartView.prototype;\n    proto.type = 'chart';\n  }();\n  return ChartView;\n}();\n;\n/**\r\n * Set state of single element\r\n */\nfunction elSetState(el, state, highlightDigit) {\n  if (el && isHighDownDispatcher(el)) {\n    (state === 'emphasis' ? enterEmphasis : leaveEmphasis)(el, highlightDigit);\n  }\n}\nfunction toggleHighlight(data, payload, state) {\n  var dataIndex = modelUtil.queryDataIndex(data, payload);\n  var highlightDigit = payload && payload.highlightKey != null ? getHighlightDigit(payload.highlightKey) : null;\n  if (dataIndex != null) {\n    each(modelUtil.normalizeToArray(dataIndex), function (dataIdx) {\n      elSetState(data.getItemGraphicEl(dataIdx), state, highlightDigit);\n    });\n  } else {\n    data.eachItemGraphicEl(function (el) {\n      elSetState(el, state, highlightDigit);\n    });\n  }\n}\nclazzUtil.enableClassExtend(ChartView, ['dispose']);\nclazzUtil.enableClassManagement(ChartView);\nfunction renderTaskPlan(context) {\n  return renderPlanner(context.model);\n}\nfunction renderTaskReset(context) {\n  var seriesModel = context.model;\n  var ecModel = context.ecModel;\n  var api = context.api;\n  var payload = context.payload;\n  // FIXME: remove updateView updateVisual\n  var progressiveRender = seriesModel.pipelineContext.progressiveRender;\n  var view = context.view;\n  var updateMethod = payload && inner(payload).updateMethod;\n  var methodName = progressiveRender ? 'incrementalPrepareRender' : updateMethod && view[updateMethod] ? updateMethod\n  // `appendData` is also supported when data amount\n  // is less than progressive threshold.\n  : 'render';\n  if (methodName !== 'render') {\n    view[methodName](seriesModel, ecModel, api, payload);\n  }\n  return progressMethodMap[methodName];\n}\nvar progressMethodMap = {\n  incrementalPrepareRender: {\n    progress: function (params, context) {\n      context.view.incrementalRender(params, context.model, context.ecModel, context.api, context.payload);\n    }\n  },\n  render: {\n    // Put view.render in `progress` to support appendData. But in this case\n    // view.render should not be called in reset, otherwise it will be called\n    // twise. Use `forceFirstProgress` to make sure that view.render is called\n    // in any cases.\n    forceFirstProgress: true,\n    progress: function (params, context) {\n      context.view.render(context.model, context.ecModel, context.api, context.payload);\n    }\n  }\n};\nexport default ChartView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar ORIGIN_METHOD = '\\0__throttleOriginMethod';\nvar RATE = '\\0__throttleRate';\nvar THROTTLE_TYPE = '\\0__throttleType';\n;\n/**\r\n * @public\r\n * @param {(Function)} fn\r\n * @param {number} [delay=0] Unit: ms.\r\n * @param {boolean} [debounce=false]\r\n *        true: If call interval less than `delay`, only the last call works.\r\n *        false: If call interval less than `delay, call works on fixed rate.\r\n * @return {(Function)} throttled fn.\r\n */\nexport function throttle(fn, delay, debounce) {\n  var currCall;\n  var lastCall = 0;\n  var lastExec = 0;\n  var timer = null;\n  var diff;\n  var scope;\n  var args;\n  var debounceNextCall;\n  delay = delay || 0;\n  function exec() {\n    lastExec = new Date().getTime();\n    timer = null;\n    fn.apply(scope, args || []);\n  }\n  var cb = function () {\n    var cbArgs = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      cbArgs[_i] = arguments[_i];\n    }\n    currCall = new Date().getTime();\n    scope = this;\n    args = cbArgs;\n    var thisDelay = debounceNextCall || delay;\n    var thisDebounce = debounceNextCall || debounce;\n    debounceNextCall = null;\n    diff = currCall - (thisDebounce ? lastCall : lastExec) - thisDelay;\n    clearTimeout(timer);\n    // Here we should make sure that: the `exec` SHOULD NOT be called later\n    // than a new call of `cb`, that is, preserving the command order. Consider\n    // calculating \"scale rate\" when roaming as an example. When a call of `cb`\n    // happens, either the `exec` is called dierectly, or the call is delayed.\n    // But the delayed call should never be later than next call of `cb`. Under\n    // this assurance, we can simply update view state each time `dispatchAction`\n    // triggered by user roaming, but not need to add extra code to avoid the\n    // state being \"rolled-back\".\n    if (thisDebounce) {\n      timer = setTimeout(exec, thisDelay);\n    } else {\n      if (diff >= 0) {\n        exec();\n      } else {\n        timer = setTimeout(exec, -diff);\n      }\n    }\n    lastCall = currCall;\n  };\n  /**\r\n   * Clear throttle.\r\n   * @public\r\n   */\n  cb.clear = function () {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  };\n  /**\r\n   * Enable debounce once.\r\n   */\n  cb.debounceNextCall = function (debounceDelay) {\n    debounceNextCall = debounceDelay;\n  };\n  return cb;\n}\n/**\r\n * Create throttle method or update throttle rate.\r\n *\r\n * @example\r\n * ComponentView.prototype.render = function () {\r\n *     ...\r\n *     throttle.createOrUpdate(\r\n *         this,\r\n *         '_dispatchAction',\r\n *         this.model.get('throttle'),\r\n *         'fixRate'\r\n *     );\r\n * };\r\n * ComponentView.prototype.remove = function () {\r\n *     throttle.clear(this, '_dispatchAction');\r\n * };\r\n * ComponentView.prototype.dispose = function () {\r\n *     throttle.clear(this, '_dispatchAction');\r\n * };\r\n *\r\n */\nexport function createOrUpdate(obj, fnAttr, rate, throttleType) {\n  var fn = obj[fnAttr];\n  if (!fn) {\n    return;\n  }\n  var originFn = fn[ORIGIN_METHOD] || fn;\n  var lastThrottleType = fn[THROTTLE_TYPE];\n  var lastRate = fn[RATE];\n  if (lastRate !== rate || lastThrottleType !== throttleType) {\n    if (rate == null || !throttleType) {\n      return obj[fnAttr] = originFn;\n    }\n    fn = obj[fnAttr] = throttle(originFn, rate, throttleType === 'debounce');\n    fn[ORIGIN_METHOD] = originFn;\n    fn[THROTTLE_TYPE] = throttleType;\n    fn[RATE] = rate;\n  }\n  return fn;\n}\n/**\r\n * Clear throttle. Example see throttle.createOrUpdate.\r\n */\nexport function clear(obj, fnAttr) {\n  var fn = obj[fnAttr];\n  if (fn && fn[ORIGIN_METHOD]) {\n    // Clear throttle\n    fn.clear && fn.clear();\n    obj[fnAttr] = fn[ORIGIN_METHOD];\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, extend, createHashMap } from 'zrender/lib/core/util.js';\nimport makeStyleMapper from '../model/mixin/makeStyleMapper.js';\nimport { ITEM_STYLE_KEY_MAP } from '../model/mixin/itemStyle.js';\nimport { LINE_STYLE_KEY_MAP } from '../model/mixin/lineStyle.js';\nimport Model from '../model/Model.js';\nimport { makeInner } from '../util/model.js';\nvar inner = makeInner();\nvar defaultStyleMappers = {\n  itemStyle: makeStyleMapper(ITEM_STYLE_KEY_MAP, true),\n  lineStyle: makeStyleMapper(LINE_STYLE_KEY_MAP, true)\n};\nvar defaultColorKey = {\n  lineStyle: 'stroke',\n  itemStyle: 'fill'\n};\nfunction getStyleMapper(seriesModel, stylePath) {\n  var styleMapper = seriesModel.visualStyleMapper || defaultStyleMappers[stylePath];\n  if (!styleMapper) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return defaultStyleMappers.itemStyle;\n  }\n  return styleMapper;\n}\nfunction getDefaultColorKey(seriesModel, stylePath) {\n  // return defaultColorKey[stylePath] ||\n  var colorKey = seriesModel.visualDrawType || defaultColorKey[stylePath];\n  if (!colorKey) {\n    console.warn(\"Unknown style type '\" + stylePath + \"'.\");\n    return 'fill';\n  }\n  return colorKey;\n}\nvar seriesStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var styleModel = seriesModel.getModel(stylePath);\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var globalStyle = getStyle(styleModel);\n    var decalOption = styleModel.getShallow('decal');\n    if (decalOption) {\n      data.setVisual('decal', decalOption);\n      decalOption.dirty = true;\n    }\n    // TODO\n    var colorKey = getDefaultColorKey(seriesModel, stylePath);\n    var color = globalStyle[colorKey];\n    // TODO style callback\n    var colorCallback = isFunction(color) ? color : null;\n    var hasAutoColor = globalStyle.fill === 'auto' || globalStyle.stroke === 'auto';\n    // Get from color palette by default.\n    if (!globalStyle[colorKey] || colorCallback || hasAutoColor) {\n      // Note: If some series has color specified (e.g., by itemStyle.color), we DO NOT\n      // make it effect palette. Because some scenarios users need to make some series\n      // transparent or as background, which should better not effect the palette.\n      var colorPalette = seriesModel.getColorFromPalette(\n      // TODO series count changed.\n      seriesModel.name, null, ecModel.getSeriesCount());\n      if (!globalStyle[colorKey]) {\n        globalStyle[colorKey] = colorPalette;\n        data.setVisual('colorFromPalette', true);\n      }\n      globalStyle.fill = globalStyle.fill === 'auto' || isFunction(globalStyle.fill) ? colorPalette : globalStyle.fill;\n      globalStyle.stroke = globalStyle.stroke === 'auto' || isFunction(globalStyle.stroke) ? colorPalette : globalStyle.stroke;\n    }\n    data.setVisual('style', globalStyle);\n    data.setVisual('drawType', colorKey);\n    // Only visible series has each data be visual encoded\n    if (!ecModel.isSeriesFiltered(seriesModel) && colorCallback) {\n      data.setVisual('colorFromPalette', false);\n      return {\n        dataEach: function (data, idx) {\n          var dataParams = seriesModel.getDataParams(idx);\n          var itemStyle = extend({}, globalStyle);\n          itemStyle[colorKey] = colorCallback(dataParams);\n          data.setItemVisual(idx, 'style', itemStyle);\n        }\n      };\n    }\n  }\n};\nvar sharedModel = new Model();\nvar dataStyleTask = {\n  createOnAllSeries: true,\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (seriesModel.ignoreStyleOnData || ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n    // Set in itemStyle\n    var getStyle = getStyleMapper(seriesModel, stylePath);\n    var colorKey = data.getVisual('drawType');\n    return {\n      dataEach: data.hasItemOption ? function (data, idx) {\n        // Not use getItemModel for performance considuration\n        var rawItem = data.getRawDataItem(idx);\n        if (rawItem && rawItem[stylePath]) {\n          sharedModel.option = rawItem[stylePath];\n          var style = getStyle(sharedModel);\n          var existsStyle = data.ensureUniqueItemVisual(idx, 'style');\n          extend(existsStyle, style);\n          if (sharedModel.option.decal) {\n            data.setItemVisual(idx, 'decal', sharedModel.option.decal);\n            sharedModel.option.decal.dirty = true;\n          }\n          if (colorKey in style) {\n            data.setItemVisual(idx, 'colorFromPalette', false);\n          }\n        }\n      } : null\n    };\n  }\n};\n// Pick color from palette for the data which has not been set with color yet.\n// Note: do not support stream rendering. No such cases yet.\nvar dataColorPaletteTask = {\n  performRawSeries: true,\n  overallReset: function (ecModel) {\n    // Each type of series uses one scope.\n    // Pie and funnel are using different scopes.\n    var paletteScopeGroupByType = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var colorBy = seriesModel.getColorBy();\n      if (seriesModel.isColorBySeries()) {\n        return;\n      }\n      var key = seriesModel.type + '-' + colorBy;\n      var colorScope = paletteScopeGroupByType.get(key);\n      if (!colorScope) {\n        colorScope = {};\n        paletteScopeGroupByType.set(key, colorScope);\n      }\n      inner(seriesModel).scope = colorScope;\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.isColorBySeries() || ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      var colorScope = inner(seriesModel).scope;\n      var stylePath = seriesModel.visualStyleAccessPath || 'itemStyle';\n      var colorKey = getDefaultColorKey(seriesModel, stylePath);\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      // Iterate on data before filtered. To make sure color from palette can be\n      // Consistent when toggling legend.\n      dataAll.each(function (rawIdx) {\n        var idx = idxMap[rawIdx];\n        var fromPalette = data.getItemVisual(idx, 'colorFromPalette');\n        // Get color from palette for each data only when the color is inherited from series color, which is\n        // also picked from color palette. So following situation is not in the case:\n        // 1. series.itemStyle.color is set\n        // 2. color is encoded by visualMap\n        if (fromPalette) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          var name_1 = dataAll.getName(rawIdx) || rawIdx + '';\n          var dataCount = dataAll.count();\n          itemStyle[colorKey] = seriesModel.getColorFromPalette(name_1, colorScope, dataCount);\n        }\n      });\n    });\n  }\n};\nexport { seriesStyleTask, dataStyleTask, dataColorPaletteTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../util/graphic.js';\nvar PI = Math.PI;\n/**\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Object} [opts]\r\n * @param {string} [opts.text]\r\n * @param {string} [opts.color]\r\n * @param {string} [opts.textColor]\r\n * @return {module:zrender/Element}\r\n */\nexport default function defaultLoading(api, opts) {\n  opts = opts || {};\n  zrUtil.defaults(opts, {\n    text: 'loading',\n    textColor: '#000',\n    fontSize: 12,\n    fontWeight: 'normal',\n    fontStyle: 'normal',\n    fontFamily: 'sans-serif',\n    maskColor: 'rgba(255, 255, 255, 0.8)',\n    showSpinner: true,\n    color: '#5470c6',\n    spinnerRadius: 10,\n    lineWidth: 5,\n    zlevel: 0\n  });\n  var group = new graphic.Group();\n  var mask = new graphic.Rect({\n    style: {\n      fill: opts.maskColor\n    },\n    zlevel: opts.zlevel,\n    z: 10000\n  });\n  group.add(mask);\n  var textContent = new graphic.Text({\n    style: {\n      text: opts.text,\n      fill: opts.textColor,\n      fontSize: opts.fontSize,\n      fontWeight: opts.fontWeight,\n      fontStyle: opts.fontStyle,\n      fontFamily: opts.fontFamily\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  var labelRect = new graphic.Rect({\n    style: {\n      fill: 'none'\n    },\n    textContent: textContent,\n    textConfig: {\n      position: 'right',\n      distance: 10\n    },\n    zlevel: opts.zlevel,\n    z: 10001\n  });\n  group.add(labelRect);\n  var arc;\n  if (opts.showSpinner) {\n    arc = new graphic.Arc({\n      shape: {\n        startAngle: -PI / 2,\n        endAngle: -PI / 2 + 0.1,\n        r: opts.spinnerRadius\n      },\n      style: {\n        stroke: opts.color,\n        lineCap: 'round',\n        lineWidth: opts.lineWidth\n      },\n      zlevel: opts.zlevel,\n      z: 10001\n    });\n    arc.animateShape(true).when(1000, {\n      endAngle: PI * 3 / 2\n    }).start('circularInOut');\n    arc.animateShape(true).when(1000, {\n      startAngle: PI * 3 / 2\n    }).delay(300).start('circularInOut');\n    group.add(arc);\n  }\n  // Inject resize\n  group.resize = function () {\n    var textWidth = textContent.getBoundingRect().width;\n    var r = opts.showSpinner ? opts.spinnerRadius : 0;\n    // cx = (containerWidth - arcDiameter - textDistance - textWidth) / 2\n    // textDistance needs to be calculated when both animation and text exist\n    var cx = (api.getWidth() - r * 2 - (opts.showSpinner && textWidth ? 10 : 0) - textWidth) / 2 - (opts.showSpinner && textWidth ? 0 : 5 + textWidth / 2)\n    // only show the text\n    + (opts.showSpinner ? 0 : textWidth / 2)\n    // only show the spinner\n    + (textWidth ? 0 : r);\n    var cy = api.getHeight() / 2;\n    opts.showSpinner && arc.setShape({\n      cx: cx,\n      cy: cy\n    });\n    labelRect.setShape({\n      x: cx - r,\n      y: cy - r,\n      width: r * 2,\n      height: r * 2\n    });\n    mask.setShape({\n      x: 0,\n      y: 0,\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n  };\n  group.resize();\n  return group;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, map, isFunction, createHashMap, noop, assert } from 'zrender/lib/core/util.js';\nimport { createTask } from './task.js';\nimport { getUID } from '../util/component.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport { normalizeToArray } from '../util/model.js';\n;\nvar Scheduler = /** @class */function () {\n  function Scheduler(ecInstance, api, dataProcessorHandlers, visualHandlers) {\n    // key: handlerUID\n    this._stageTaskMap = createHashMap();\n    this.ecInstance = ecInstance;\n    this.api = api;\n    // Fix current processors in case that in some rear cases that\n    // processors might be registered after echarts instance created.\n    // Register processors incrementally for a echarts instance is\n    // not supported by this stream architecture.\n    dataProcessorHandlers = this._dataProcessorHandlers = dataProcessorHandlers.slice();\n    visualHandlers = this._visualHandlers = visualHandlers.slice();\n    this._allHandlers = dataProcessorHandlers.concat(visualHandlers);\n  }\n  Scheduler.prototype.restoreData = function (ecModel, payload) {\n    // TODO: Only restore needed series and components, but not all components.\n    // Currently `restoreData` of all of the series and component will be called.\n    // But some independent components like `title`, `legend`, `graphic`, `toolbox`,\n    // `tooltip`, `axisPointer`, etc, do not need series refresh when `setOption`,\n    // and some components like coordinate system, axes, dataZoom, visualMap only\n    // need their target series refresh.\n    // (1) If we are implementing this feature some day, we should consider these cases:\n    // if a data processor depends on a component (e.g., dataZoomProcessor depends\n    // on the settings of `dataZoom`), it should be re-performed if the component\n    // is modified by `setOption`.\n    // (2) If a processor depends on sevral series, speicified by its `getTargetSeries`,\n    // it should be re-performed when the result array of `getTargetSeries` changed.\n    // We use `dependencies` to cover these issues.\n    // (3) How to update target series when coordinate system related components modified.\n    // TODO: simply the dirty mechanism? Check whether only the case here can set tasks dirty,\n    // and this case all of the tasks will be set as dirty.\n    ecModel.restoreData(payload);\n    // Theoretically an overall task not only depends on each of its target series, but also\n    // depends on all of the series.\n    // The overall task is not in pipeline, and `ecModel.restoreData` only set pipeline tasks\n    // dirty. If `getTargetSeries` of an overall task returns nothing, we should also ensure\n    // that the overall task is set as dirty and to be performed, otherwise it probably cause\n    // state chaos. So we have to set dirty of all of the overall tasks manually, otherwise it\n    // probably cause state chaos (consider `dataZoomProcessor`).\n    this._stageTaskMap.each(function (taskRecord) {\n      var overallTask = taskRecord.overallTask;\n      overallTask && overallTask.dirty();\n    });\n  };\n  // If seriesModel provided, incremental threshold is check by series data.\n  Scheduler.prototype.getPerformArgs = function (task, isBlock) {\n    // For overall task\n    if (!task.__pipeline) {\n      return;\n    }\n    var pipeline = this._pipelineMap.get(task.__pipeline.id);\n    var pCtx = pipeline.context;\n    var incremental = !isBlock && pipeline.progressiveEnabled && (!pCtx || pCtx.progressiveRender) && task.__idxInPipeline > pipeline.blockIndex;\n    var step = incremental ? pipeline.step : null;\n    var modDataCount = pCtx && pCtx.modDataCount;\n    var modBy = modDataCount != null ? Math.ceil(modDataCount / step) : null;\n    return {\n      step: step,\n      modBy: modBy,\n      modDataCount: modDataCount\n    };\n  };\n  Scheduler.prototype.getPipeline = function (pipelineId) {\n    return this._pipelineMap.get(pipelineId);\n  };\n  /**\r\n   * Current, progressive rendering starts from visual and layout.\r\n   * Always detect render mode in the same stage, avoiding that incorrect\r\n   * detection caused by data filtering.\r\n   * Caution:\r\n   * `updateStreamModes` use `seriesModel.getData()`.\r\n   */\n  Scheduler.prototype.updateStreamModes = function (seriesModel, view) {\n    var pipeline = this._pipelineMap.get(seriesModel.uid);\n    var data = seriesModel.getData();\n    var dataLen = data.count();\n    // `progressiveRender` means that can render progressively in each\n    // animation frame. Note that some types of series do not provide\n    // `view.incrementalPrepareRender` but support `chart.appendData`. We\n    // use the term `incremental` but not `progressive` to describe the\n    // case that `chart.appendData`.\n    var progressiveRender = pipeline.progressiveEnabled && view.incrementalPrepareRender && dataLen >= pipeline.threshold;\n    var large = seriesModel.get('large') && dataLen >= seriesModel.get('largeThreshold');\n    // TODO: modDataCount should not updated if `appendData`, otherwise cause whole repaint.\n    // see `test/candlestick-large3.html`\n    var modDataCount = seriesModel.get('progressiveChunkMode') === 'mod' ? dataLen : null;\n    seriesModel.pipelineContext = pipeline.context = {\n      progressiveRender: progressiveRender,\n      modDataCount: modDataCount,\n      large: large\n    };\n  };\n  Scheduler.prototype.restorePipelines = function (ecModel) {\n    var scheduler = this;\n    var pipelineMap = scheduler._pipelineMap = createHashMap();\n    ecModel.eachSeries(function (seriesModel) {\n      var progressive = seriesModel.getProgressive();\n      var pipelineId = seriesModel.uid;\n      pipelineMap.set(pipelineId, {\n        id: pipelineId,\n        head: null,\n        tail: null,\n        threshold: seriesModel.getProgressiveThreshold(),\n        progressiveEnabled: progressive && !(seriesModel.preventIncremental && seriesModel.preventIncremental()),\n        blockIndex: -1,\n        step: Math.round(progressive || 700),\n        count: 0\n      });\n      scheduler._pipe(seriesModel, seriesModel.dataTask);\n    });\n  };\n  Scheduler.prototype.prepareStageTasks = function () {\n    var stageTaskMap = this._stageTaskMap;\n    var ecModel = this.api.getModel();\n    var api = this.api;\n    each(this._allHandlers, function (handler) {\n      var record = stageTaskMap.get(handler.uid) || stageTaskMap.set(handler.uid, {});\n      var errMsg = '';\n      if (process.env.NODE_ENV !== 'production') {\n        // Currently do not need to support to sepecify them both.\n        errMsg = '\"reset\" and \"overallReset\" must not be both specified.';\n      }\n      assert(!(handler.reset && handler.overallReset), errMsg);\n      handler.reset && this._createSeriesStageTask(handler, record, ecModel, api);\n      handler.overallReset && this._createOverallStageTask(handler, record, ecModel, api);\n    }, this);\n  };\n  Scheduler.prototype.prepareView = function (view, model, ecModel, api) {\n    var renderTask = view.renderTask;\n    var context = renderTask.context;\n    context.model = model;\n    context.ecModel = ecModel;\n    context.api = api;\n    renderTask.__block = !view.incrementalPrepareRender;\n    this._pipe(model, renderTask);\n  };\n  Scheduler.prototype.performDataProcessorTasks = function (ecModel, payload) {\n    // If we do not use `block` here, it should be considered when to update modes.\n    this._performStageTasks(this._dataProcessorHandlers, ecModel, payload, {\n      block: true\n    });\n  };\n  Scheduler.prototype.performVisualTasks = function (ecModel, payload, opt) {\n    this._performStageTasks(this._visualHandlers, ecModel, payload, opt);\n  };\n  Scheduler.prototype._performStageTasks = function (stageHandlers, ecModel, payload, opt) {\n    opt = opt || {};\n    var unfinished = false;\n    var scheduler = this;\n    each(stageHandlers, function (stageHandler, idx) {\n      if (opt.visualType && opt.visualType !== stageHandler.visualType) {\n        return;\n      }\n      var stageHandlerRecord = scheduler._stageTaskMap.get(stageHandler.uid);\n      var seriesTaskMap = stageHandlerRecord.seriesTaskMap;\n      var overallTask = stageHandlerRecord.overallTask;\n      if (overallTask) {\n        var overallNeedDirty_1;\n        var agentStubMap = overallTask.agentStubMap;\n        agentStubMap.each(function (stub) {\n          if (needSetDirty(opt, stub)) {\n            stub.dirty();\n            overallNeedDirty_1 = true;\n          }\n        });\n        overallNeedDirty_1 && overallTask.dirty();\n        scheduler.updatePayload(overallTask, payload);\n        var performArgs_1 = scheduler.getPerformArgs(overallTask, opt.block);\n        // Execute stubs firstly, which may set the overall task dirty,\n        // then execute the overall task. And stub will call seriesModel.setData,\n        // which ensures that in the overallTask seriesModel.getData() will not\n        // return incorrect data.\n        agentStubMap.each(function (stub) {\n          stub.perform(performArgs_1);\n        });\n        if (overallTask.perform(performArgs_1)) {\n          unfinished = true;\n        }\n      } else if (seriesTaskMap) {\n        seriesTaskMap.each(function (task, pipelineId) {\n          if (needSetDirty(opt, task)) {\n            task.dirty();\n          }\n          var performArgs = scheduler.getPerformArgs(task, opt.block);\n          // FIXME\n          // if intending to declare `performRawSeries` in handlers, only\n          // stream-independent (specifically, data item independent) operations can be\n          // performed. Because if a series is filtered, most of the tasks will not\n          // be performed. A stream-dependent operation probably cause wrong biz logic.\n          // Perhaps we should not provide a separate callback for this case instead\n          // of providing the config `performRawSeries`. The stream-dependent operations\n          // and stream-independent operations should better not be mixed.\n          performArgs.skip = !stageHandler.performRawSeries && ecModel.isSeriesFiltered(task.context.model);\n          scheduler.updatePayload(task, payload);\n          if (task.perform(performArgs)) {\n            unfinished = true;\n          }\n        });\n      }\n    });\n    function needSetDirty(opt, task) {\n      return opt.setDirty && (!opt.dirtyMap || opt.dirtyMap.get(task.__pipeline.id));\n    }\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.performSeriesTasks = function (ecModel) {\n    var unfinished;\n    ecModel.eachSeries(function (seriesModel) {\n      // Progress to the end for dataInit and dataRestore.\n      unfinished = seriesModel.dataTask.perform() || unfinished;\n    });\n    this.unfinished = unfinished || this.unfinished;\n  };\n  Scheduler.prototype.plan = function () {\n    // Travel pipelines, check block.\n    this._pipelineMap.each(function (pipeline) {\n      var task = pipeline.tail;\n      do {\n        if (task.__block) {\n          pipeline.blockIndex = task.__idxInPipeline;\n          break;\n        }\n        task = task.getUpstream();\n      } while (task);\n    });\n  };\n  Scheduler.prototype.updatePayload = function (task, payload) {\n    payload !== 'remain' && (task.context.payload = payload);\n  };\n  Scheduler.prototype._createSeriesStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var oldSeriesTaskMap = stageHandlerRecord.seriesTaskMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newSeriesTaskMap = stageHandlerRecord.seriesTaskMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    // If a stageHandler should cover all series, `createOnAllSeries` should be declared mandatorily,\n    // to avoid some typo or abuse. Otherwise if an extension do not specify a `seriesType`,\n    // it works but it may cause other irrelevant charts blocked.\n    if (stageHandler.createOnAllSeries) {\n      ecModel.eachRawSeries(create);\n    } else if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, create);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(create);\n    }\n    function create(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      // Init tasks for each seriesModel only once.\n      // Reuse original task instance.\n      var task = newSeriesTaskMap.set(pipelineId, oldSeriesTaskMap && oldSeriesTaskMap.get(pipelineId) || createTask({\n        plan: seriesTaskPlan,\n        reset: seriesTaskReset,\n        count: seriesTaskCount\n      }));\n      task.context = {\n        model: seriesModel,\n        ecModel: ecModel,\n        api: api,\n        // PENDING: `useClearVisual` not used?\n        useClearVisual: stageHandler.isVisual && !stageHandler.isLayout,\n        plan: stageHandler.plan,\n        reset: stageHandler.reset,\n        scheduler: scheduler\n      };\n      scheduler._pipe(seriesModel, task);\n    }\n  };\n  Scheduler.prototype._createOverallStageTask = function (stageHandler, stageHandlerRecord, ecModel, api) {\n    var scheduler = this;\n    var overallTask = stageHandlerRecord.overallTask = stageHandlerRecord.overallTask\n    // For overall task, the function only be called on reset stage.\n    || createTask({\n      reset: overallTaskReset\n    });\n    overallTask.context = {\n      ecModel: ecModel,\n      api: api,\n      overallReset: stageHandler.overallReset,\n      scheduler: scheduler\n    };\n    var oldAgentStubMap = overallTask.agentStubMap;\n    // The count of stages are totally about only several dozen, so\n    // do not need to reuse the map.\n    var newAgentStubMap = overallTask.agentStubMap = createHashMap();\n    var seriesType = stageHandler.seriesType;\n    var getTargetSeries = stageHandler.getTargetSeries;\n    var overallProgress = true;\n    var shouldOverallTaskDirty = false;\n    // FIXME:TS never used, so comment it\n    // let modifyOutputEnd = stageHandler.modifyOutputEnd;\n    // An overall task with seriesType detected or has `getTargetSeries`, we add\n    // stub in each pipelines, it will set the overall task dirty when the pipeline\n    // progress. Moreover, to avoid call the overall task each frame (too frequent),\n    // we set the pipeline block.\n    var errMsg = '';\n    if (process.env.NODE_ENV !== 'production') {\n      errMsg = '\"createOnAllSeries\" is not supported for \"overallReset\", ' + 'because it will block all streams.';\n    }\n    assert(!stageHandler.createOnAllSeries, errMsg);\n    if (seriesType) {\n      ecModel.eachRawSeriesByType(seriesType, createStub);\n    } else if (getTargetSeries) {\n      getTargetSeries(ecModel, api).each(createStub);\n    }\n    // Otherwise, (usually it is legacy case), the overall task will only be\n    // executed when upstream is dirty. Otherwise the progressive rendering of all\n    // pipelines will be disabled unexpectedly. But it still needs stubs to receive\n    // dirty info from upstream.\n    else {\n      overallProgress = false;\n      each(ecModel.getSeries(), createStub);\n    }\n    function createStub(seriesModel) {\n      var pipelineId = seriesModel.uid;\n      var stub = newAgentStubMap.set(pipelineId, oldAgentStubMap && oldAgentStubMap.get(pipelineId) || (\n      // When the result of `getTargetSeries` changed, the overallTask\n      // should be set as dirty and re-performed.\n      shouldOverallTaskDirty = true, createTask({\n        reset: stubReset,\n        onDirty: stubOnDirty\n      })));\n      stub.context = {\n        model: seriesModel,\n        overallProgress: overallProgress\n        // FIXME:TS never used, so comment it\n        // modifyOutputEnd: modifyOutputEnd\n      };\n      stub.agent = overallTask;\n      stub.__block = overallProgress;\n      scheduler._pipe(seriesModel, stub);\n    }\n    if (shouldOverallTaskDirty) {\n      overallTask.dirty();\n    }\n  };\n  Scheduler.prototype._pipe = function (seriesModel, task) {\n    var pipelineId = seriesModel.uid;\n    var pipeline = this._pipelineMap.get(pipelineId);\n    !pipeline.head && (pipeline.head = task);\n    pipeline.tail && pipeline.tail.pipe(task);\n    pipeline.tail = task;\n    task.__idxInPipeline = pipeline.count++;\n    task.__pipeline = pipeline;\n  };\n  Scheduler.wrapStageHandler = function (stageHandler, visualType) {\n    if (isFunction(stageHandler)) {\n      stageHandler = {\n        overallReset: stageHandler,\n        seriesType: detectSeriseType(stageHandler)\n      };\n    }\n    stageHandler.uid = getUID('stageHandler');\n    visualType && (stageHandler.visualType = visualType);\n    return stageHandler;\n  };\n  ;\n  return Scheduler;\n}();\nfunction overallTaskReset(context) {\n  context.overallReset(context.ecModel, context.api, context.payload);\n}\nfunction stubReset(context) {\n  return context.overallProgress && stubProgress;\n}\nfunction stubProgress() {\n  this.agent.dirty();\n  this.getDownstream().dirty();\n}\nfunction stubOnDirty() {\n  this.agent && this.agent.dirty();\n}\nfunction seriesTaskPlan(context) {\n  return context.plan ? context.plan(context.model, context.ecModel, context.api, context.payload) : null;\n}\nfunction seriesTaskReset(context) {\n  if (context.useClearVisual) {\n    context.data.clearAllVisual();\n  }\n  var resetDefines = context.resetDefines = normalizeToArray(context.reset(context.model, context.ecModel, context.api, context.payload));\n  return resetDefines.length > 1 ? map(resetDefines, function (v, idx) {\n    return makeSeriesTaskProgress(idx);\n  }) : singleSeriesTaskProgress;\n}\nvar singleSeriesTaskProgress = makeSeriesTaskProgress(0);\nfunction makeSeriesTaskProgress(resetDefineIdx) {\n  return function (params, context) {\n    var data = context.data;\n    var resetDefine = context.resetDefines[resetDefineIdx];\n    if (resetDefine && resetDefine.dataEach) {\n      for (var i = params.start; i < params.end; i++) {\n        resetDefine.dataEach(data, i);\n      }\n    } else if (resetDefine && resetDefine.progress) {\n      resetDefine.progress(params, data);\n    }\n  };\n}\nfunction seriesTaskCount(context) {\n  return context.data.count();\n}\n/**\r\n * Only some legacy stage handlers (usually in echarts extensions) are pure function.\r\n * To ensure that they can work normally, they should work in block mode, that is,\r\n * they should not be started util the previous tasks finished. So they cause the\r\n * progressive rendering disabled. We try to detect the series type, to narrow down\r\n * the block range to only the series type they concern, but not all series.\r\n */\nfunction detectSeriseType(legacyFunc) {\n  seriesType = null;\n  try {\n    // Assume there is no async when calling `eachSeriesByType`.\n    legacyFunc(ecModelMock, apiMock);\n  } catch (e) {}\n  return seriesType;\n}\nvar ecModelMock = {};\nvar apiMock = {};\nvar seriesType;\nmockMethods(ecModelMock, GlobalModel);\nmockMethods(apiMock, ExtensionAPI);\necModelMock.eachSeriesByType = ecModelMock.eachRawSeriesByType = function (type) {\n  seriesType = type;\n};\necModelMock.eachComponent = function (cond) {\n  if (cond.mainType === 'series' && cond.subType) {\n    seriesType = cond.subType;\n  }\n};\nfunction mockMethods(target, Clz) {\n  /* eslint-disable */\n  for (var name_1 in Clz.prototype) {\n    // Do not use hasOwnProperty\n    target[name_1] = noop;\n  }\n  /* eslint-enable */\n}\nexport default Scheduler;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar colorAll = ['#37A2DA', '#32C5E9', '#67E0E3', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#E062AE', '#E690D1', '#e7bcf3', '#9d96f5', '#8378EA', '#96BFFF'];\nexport default {\n  color: colorAll,\n  colorLayer: [['#37A2DA', '#ffd85c', '#fd7b5f'], ['#37A2DA', '#67E0E3', '#FFDB5C', '#ff9f7f', '#E062AE', '#9d96f5'], ['#37A2DA', '#32C5E9', '#9FE6B8', '#FFDB5C', '#ff9f7f', '#fb7293', '#e7bcf3', '#8378EA', '#96BFFF'], colorAll]\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar contrastColor = '#B9B8CE';\nvar backgroundColor = '#100C2A';\nvar axisCommon = function () {\n  return {\n    axisLine: {\n      lineStyle: {\n        color: contrastColor\n      }\n    },\n    splitLine: {\n      lineStyle: {\n        color: '#484753'\n      }\n    },\n    splitArea: {\n      areaStyle: {\n        color: ['rgba(255,255,255,0.02)', 'rgba(255,255,255,0.05)']\n      }\n    },\n    minorSplitLine: {\n      lineStyle: {\n        color: '#20203B'\n      }\n    }\n  };\n};\nvar colorPalette = ['#4992ff', '#7cffb2', '#fddd60', '#ff6e76', '#58d9f9', '#05c091', '#ff8a45', '#8d48e3', '#dd79ff'];\nvar theme = {\n  darkMode: true,\n  color: colorPalette,\n  backgroundColor: backgroundColor,\n  axisPointer: {\n    lineStyle: {\n      color: '#817f91'\n    },\n    crossStyle: {\n      color: '#817f91'\n    },\n    label: {\n      // TODO Contrast of label backgorundColor\n      color: '#fff'\n    }\n  },\n  legend: {\n    textStyle: {\n      color: contrastColor\n    },\n    pageTextStyle: {\n      color: contrastColor\n    }\n  },\n  textStyle: {\n    color: contrastColor\n  },\n  title: {\n    textStyle: {\n      color: '#EEF1FA'\n    },\n    subtextStyle: {\n      color: '#B9B8CE'\n    }\n  },\n  toolbox: {\n    iconStyle: {\n      borderColor: contrastColor\n    }\n  },\n  dataZoom: {\n    borderColor: '#71708A',\n    textStyle: {\n      color: contrastColor\n    },\n    brushStyle: {\n      color: 'rgba(135,163,206,0.3)'\n    },\n    handleStyle: {\n      color: '#353450',\n      borderColor: '#C5CBE3'\n    },\n    moveHandleStyle: {\n      color: '#B0B6C3',\n      opacity: 0.3\n    },\n    fillerColor: 'rgba(135,163,206,0.2)',\n    emphasis: {\n      handleStyle: {\n        borderColor: '#91B7F2',\n        color: '#4D587D'\n      },\n      moveHandleStyle: {\n        color: '#636D9A',\n        opacity: 0.7\n      }\n    },\n    dataBackground: {\n      lineStyle: {\n        color: '#71708A',\n        width: 1\n      },\n      areaStyle: {\n        color: '#71708A'\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#87A3CE'\n      },\n      areaStyle: {\n        color: '#87A3CE'\n      }\n    }\n  },\n  visualMap: {\n    textStyle: {\n      color: contrastColor\n    }\n  },\n  timeline: {\n    lineStyle: {\n      color: contrastColor\n    },\n    label: {\n      color: contrastColor\n    },\n    controlStyle: {\n      color: contrastColor,\n      borderColor: contrastColor\n    }\n  },\n  calendar: {\n    itemStyle: {\n      color: backgroundColor\n    },\n    dayLabel: {\n      color: contrastColor\n    },\n    monthLabel: {\n      color: contrastColor\n    },\n    yearLabel: {\n      color: contrastColor\n    }\n  },\n  timeAxis: axisCommon(),\n  logAxis: axisCommon(),\n  valueAxis: axisCommon(),\n  categoryAxis: axisCommon(),\n  line: {\n    symbol: 'circle'\n  },\n  graph: {\n    color: colorPalette\n  },\n  gauge: {\n    title: {\n      color: contrastColor\n    },\n    axisLine: {\n      lineStyle: {\n        color: [[1, 'rgba(207,212,219,0.2)']]\n      }\n    },\n    axisLabel: {\n      color: contrastColor\n    },\n    detail: {\n      color: '#EEF1FA'\n    }\n  },\n  candlestick: {\n    itemStyle: {\n      color: '#f64e56',\n      color0: '#54ea92',\n      borderColor: '#f64e56',\n      borderColor0: '#54ea92'\n      // borderColor: '#ca2824',\n      // borderColor0: '#09a443'\n    }\n  }\n};\ntheme.categoryAxis.splitLine.show = false;\nexport default theme;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\r\n * Usage of query:\r\n * `chart.on('click', query, handler);`\r\n * The `query` can be:\r\n * + The component type query string, only `mainType` or `mainType.subType`,\r\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\r\n * + The component query object, like:\r\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\r\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\r\n * + The data query object, like:\r\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\r\n * + The other query object (cmponent customized query), like:\r\n *   `{element: 'some'}` (only available in custom series).\r\n *\r\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\r\n * same as there is no such prop in the `query` object.\r\n */\nvar ECEventProcessor = /** @class */function () {\n  function ECEventProcessor() {}\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {};\n    // `query` is `mainType` or `mainType.subType` of component.\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query);\n      // `.main` and `.sub` may be ''.\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    }\n    // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n      // can not be used in `compomentModel.filterForExposedEvent`.\n      var suffixes_1 = ['Index', 'Name', 'Id'];\n      var dataKeys_1 = {\n        name: 1,\n        dataIndex: 1,\n        dataType: 1\n      };\n      zrUtil.each(query, function (val, key) {\n        var reserved = false;\n        for (var i = 0; i < suffixes_1.length; i++) {\n          var propSuffix = suffixes_1[i];\n          var suffixPos = key.lastIndexOf(propSuffix);\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n            var mainType = key.slice(0, suffixPos);\n            // Consider `dataIndex`.\n            if (mainType !== 'data') {\n              cptQuery.mainType = mainType;\n              cptQuery[propSuffix.toLowerCase()] = val;\n              reserved = true;\n            }\n          }\n        }\n        if (dataKeys_1.hasOwnProperty(key)) {\n          dataQuery[key] = val;\n          reserved = true;\n        }\n        if (!reserved) {\n          otherQuery[key] = val;\n        }\n      });\n    }\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n    if (!eventInfo) {\n      return true;\n    }\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view;\n    // For event like 'globalout'.\n    if (!model || !view) {\n      return true;\n    }\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo won't be used in next trigger.\n    this.eventInfo = null;\n  };\n  return ECEventProcessor;\n}();\nexport { ECEventProcessor };\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, isFunction, keys } from 'zrender/lib/core/util.js';\nvar SYMBOL_PROPS_WITH_CB = ['symbol', 'symbolSize', 'symbolRotate', 'symbolOffset'];\nvar SYMBOL_PROPS = SYMBOL_PROPS_WITH_CB.concat(['symbolKeepAspect']);\n// Encoding visual for all series include which is filtered for legend drawing\nvar seriesSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    var data = seriesModel.getData();\n    if (seriesModel.legendIcon) {\n      data.setVisual('legendIcon', seriesModel.legendIcon);\n    }\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    var symbolOptions = {};\n    var symbolOptionsCb = {};\n    var hasCallback = false;\n    for (var i = 0; i < SYMBOL_PROPS_WITH_CB.length; i++) {\n      var symbolPropName = SYMBOL_PROPS_WITH_CB[i];\n      var val = seriesModel.get(symbolPropName);\n      if (isFunction(val)) {\n        hasCallback = true;\n        symbolOptionsCb[symbolPropName] = val;\n      } else {\n        symbolOptions[symbolPropName] = val;\n      }\n    }\n    symbolOptions.symbol = symbolOptions.symbol || seriesModel.defaultSymbol;\n    data.setVisual(extend({\n      legendIcon: seriesModel.legendIcon || symbolOptions.symbol,\n      symbolKeepAspect: seriesModel.get('symbolKeepAspect')\n    }, symbolOptions));\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var symbolPropsCb = keys(symbolOptionsCb);\n    function dataEach(data, idx) {\n      var rawValue = seriesModel.getRawValue(idx);\n      var params = seriesModel.getDataParams(idx);\n      for (var i = 0; i < symbolPropsCb.length; i++) {\n        var symbolPropName = symbolPropsCb[i];\n        data.setItemVisual(idx, symbolPropName, symbolOptionsCb[symbolPropName](rawValue, params));\n      }\n    }\n    return {\n      dataEach: hasCallback ? dataEach : null\n    };\n  }\n};\nvar dataSymbolTask = {\n  createOnAllSeries: true,\n  // For legend.\n  performRawSeries: true,\n  reset: function (seriesModel, ecModel) {\n    if (!seriesModel.hasSymbolVisual) {\n      return;\n    }\n    // Only visible series has each data be visual encoded\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    function dataEach(data, idx) {\n      var itemModel = data.getItemModel(idx);\n      for (var i = 0; i < SYMBOL_PROPS.length; i++) {\n        var symbolPropName = SYMBOL_PROPS[i];\n        var val = itemModel.getShallow(symbolPropName, true);\n        if (val != null) {\n          data.setItemVisual(idx, symbolPropName, val);\n        }\n      }\n    }\n    return {\n      dataEach: data.hasItemOption ? dataEach : null\n    };\n  }\n};\nexport { seriesSymbolTask, dataSymbolTask };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function getItemVisualFromData(data, dataIndex, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getItemVisual(dataIndex, 'style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getItemVisual(dataIndex, 'style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getItemVisual(dataIndex, key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function getVisualFromData(data, key) {\n  switch (key) {\n    case 'color':\n      var style = data.getVisual('style');\n      return style[data.getVisual('drawType')];\n    case 'opacity':\n      return data.getVisual('style').opacity;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      return data.getVisual(key);\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}\nexport function setItemVisualFromData(data, dataIndex, key, value) {\n  switch (key) {\n    case 'color':\n      // Make sure not sharing style object.\n      var style = data.ensureUniqueItemVisual(dataIndex, 'style');\n      style[data.getVisual('drawType')] = value;\n      // Mark the color has been changed, not from palette anymore\n      data.setItemVisual(dataIndex, 'colorFromPalette', false);\n      break;\n    case 'opacity':\n      data.ensureUniqueItemVisual(dataIndex, 'style').opacity = value;\n      break;\n    case 'symbol':\n    case 'symbolSize':\n    case 'liftZ':\n      data.setItemVisual(dataIndex, key, value);\n      break;\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        console.warn(\"Unknown visual type \" + key);\n      }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { extend, each, isArray, isString } from 'zrender/lib/core/util.js';\nimport { deprecateReplaceLog, deprecateLog } from '../util/log.js';\nimport { queryDataIndex } from '../util/model.js';\n// Legacy data selection action.\n// Includes: pieSelect, pieUnSelect, pieToggleSelect, mapSelect, mapUnSelect, mapToggleSelect\nexport function createLegacyDataSelectAction(seriesType, ecRegisterAction) {\n  function getSeriesIndices(ecModel, payload) {\n    var seriesIndices = [];\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: seriesType,\n      query: payload\n    }, function (seriesModel) {\n      seriesIndices.push(seriesModel.seriesIndex);\n    });\n    return seriesIndices;\n  }\n  each([[seriesType + 'ToggleSelect', 'toggleSelect'], [seriesType + 'Select', 'select'], [seriesType + 'UnSelect', 'unselect']], function (eventsMap) {\n    ecRegisterAction(eventsMap[0], function (payload, ecModel, api) {\n      payload = extend({}, payload);\n      if (process.env.NODE_ENV !== 'production') {\n        deprecateReplaceLog(payload.type, eventsMap[1]);\n      }\n      api.dispatchAction(extend(payload, {\n        type: eventsMap[1],\n        seriesIndex: getSeriesIndices(ecModel, payload)\n      }));\n    });\n  });\n}\nfunction handleSeriesLegacySelectEvents(type, eventPostfix, ecIns, ecModel, payload) {\n  var legacyEventName = type + eventPostfix;\n  if (!ecIns.isSilent(legacyEventName)) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateLog(\"event \" + legacyEventName + \" is deprecated.\");\n    }\n    ecModel.eachComponent({\n      mainType: 'series',\n      subType: 'pie'\n    }, function (seriesModel) {\n      var seriesIndex = seriesModel.seriesIndex;\n      var selectedMap = seriesModel.option.selectedMap;\n      var selected = payload.selected;\n      for (var i = 0; i < selected.length; i++) {\n        if (selected[i].seriesIndex === seriesIndex) {\n          var data = seriesModel.getData();\n          var dataIndex = queryDataIndex(data, payload.fromActionPayload);\n          ecIns.trigger(legacyEventName, {\n            type: legacyEventName,\n            seriesId: seriesModel.id,\n            name: isArray(dataIndex) ? data.getName(dataIndex[0]) : data.getName(dataIndex),\n            selected: isString(selectedMap) ? selectedMap : extend({}, selectedMap)\n          });\n        }\n      }\n    });\n  }\n}\nexport function handleLegacySelectEvents(messageCenter, ecIns, api) {\n  messageCenter.on('selectchanged', function (params) {\n    var ecModel = api.getModel();\n    if (params.isFromClick) {\n      handleSeriesLegacySelectEvents('map', 'selectchanged', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selectchanged', ecIns, ecModel, params);\n    } else if (params.fromAction === 'select') {\n      handleSeriesLegacySelectEvents('map', 'selected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'selected', ecIns, ecModel, params);\n    } else if (params.fromAction === 'unselect') {\n      handleSeriesLegacySelectEvents('map', 'unselected', ecIns, ecModel, params);\n      handleSeriesLegacySelectEvents('pie', 'unselected', ecIns, ecModel, params);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function findEventDispatcher(target, det, returnFirstMatch) {\n  var found;\n  while (target) {\n    if (det(target)) {\n      found = target;\n      if (returnFirstMatch) {\n        break;\n      }\n    }\n    target = target.__hostTarget || target.parent;\n  }\n  return found;\n}","var wmUniqueIndex = Math.round(Math.random() * 9);\nvar supportDefineProperty = typeof Object.defineProperty === 'function';\nvar WeakMap = (function () {\n    function WeakMap() {\n        this._id = '__ec_inner_' + wmUniqueIndex++;\n    }\n    WeakMap.prototype.get = function (key) {\n        return this._guard(key)[this._id];\n    };\n    WeakMap.prototype.set = function (key, value) {\n        var target = this._guard(key);\n        if (supportDefineProperty) {\n            Object.defineProperty(target, this._id, {\n                value: value,\n                enumerable: false,\n                configurable: true\n            });\n        }\n        else {\n            target[this._id] = value;\n        }\n        return this;\n    };\n    WeakMap.prototype[\"delete\"] = function (key) {\n        if (this.has(key)) {\n            delete this._guard(key)[this._id];\n            return true;\n        }\n        return false;\n    };\n    WeakMap.prototype.has = function (key) {\n        return !!this._guard(key)[this._id];\n    };\n    WeakMap.prototype._guard = function (key) {\n        if (key !== Object(key)) {\n            throw TypeError('Value of WeakMap is not a non-null object.');\n        }\n        return key;\n    };\n    return WeakMap;\n}());\nexport default WeakMap;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Symbol factory\nimport { each, isArray, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from './graphic.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { calculateTextPosition } from 'zrender/lib/contain/text.js';\nimport { parsePercent } from './number.js';\n/**\r\n * Triangle shape\r\n * @inner\r\n */\nvar Triangle = graphic.Path.extend({\n  type: 'triangle',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy + height);\n    path.lineTo(cx - width, cy + height);\n    path.closePath();\n  }\n});\n/**\r\n * Diamond shape\r\n * @inner\r\n */\nvar Diamond = graphic.Path.extend({\n  type: 'diamond',\n  shape: {\n    cx: 0,\n    cy: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var cx = shape.cx;\n    var cy = shape.cy;\n    var width = shape.width / 2;\n    var height = shape.height / 2;\n    path.moveTo(cx, cy - height);\n    path.lineTo(cx + width, cy);\n    path.lineTo(cx, cy + height);\n    path.lineTo(cx - width, cy);\n    path.closePath();\n  }\n});\n/**\r\n * Pin shape\r\n * @inner\r\n */\nvar Pin = graphic.Path.extend({\n  type: 'pin',\n  shape: {\n    // x, y on the cusp\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (path, shape) {\n    var x = shape.x;\n    var y = shape.y;\n    var w = shape.width / 5 * 3;\n    // Height must be larger than width\n    var h = Math.max(w, shape.height);\n    var r = w / 2;\n    // Dist on y with tangent point and circle center\n    var dy = r * r / (h - r);\n    var cy = y - h + r + dy;\n    var angle = Math.asin(dy / r);\n    // Dist on x with tangent point and circle center\n    var dx = Math.cos(angle) * r;\n    var tanX = Math.sin(angle);\n    var tanY = Math.cos(angle);\n    var cpLen = r * 0.6;\n    var cpLen2 = r * 0.7;\n    path.moveTo(x - dx, cy + dy);\n    path.arc(x, cy, r, Math.PI - angle, Math.PI * 2 + angle);\n    path.bezierCurveTo(x + dx - tanX * cpLen, cy + dy + tanY * cpLen, x, y - cpLen2, x, y);\n    path.bezierCurveTo(x, y - cpLen2, x - dx + tanX * cpLen, cy + dy + tanY * cpLen, x - dx, cy + dy);\n    path.closePath();\n  }\n});\n/**\r\n * Arrow shape\r\n * @inner\r\n */\nvar Arrow = graphic.Path.extend({\n  type: 'arrow',\n  shape: {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  buildPath: function (ctx, shape) {\n    var height = shape.height;\n    var width = shape.width;\n    var x = shape.x;\n    var y = shape.y;\n    var dx = width / 3 * 2;\n    ctx.moveTo(x, y);\n    ctx.lineTo(x + dx, y + height);\n    ctx.lineTo(x, y + height / 4 * 3);\n    ctx.lineTo(x - dx, y + height);\n    ctx.lineTo(x, y);\n    ctx.closePath();\n  }\n});\n/**\r\n * Map of path constructors\r\n */\n// TODO Use function to build symbol path.\nvar symbolCtors = {\n  line: graphic.Line,\n  rect: graphic.Rect,\n  roundRect: graphic.Rect,\n  square: graphic.Rect,\n  circle: graphic.Circle,\n  diamond: Diamond,\n  pin: Pin,\n  arrow: Arrow,\n  triangle: Triangle\n};\nvar symbolShapeMakers = {\n  line: function (x, y, w, h, shape) {\n    shape.x1 = x;\n    shape.y1 = y + h / 2;\n    shape.x2 = x + w;\n    shape.y2 = y + h / 2;\n  },\n  rect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n  },\n  roundRect: function (x, y, w, h, shape) {\n    shape.x = x;\n    shape.y = y;\n    shape.width = w;\n    shape.height = h;\n    shape.r = Math.min(w, h) / 4;\n  },\n  square: function (x, y, w, h, shape) {\n    var size = Math.min(w, h);\n    shape.x = x;\n    shape.y = y;\n    shape.width = size;\n    shape.height = size;\n  },\n  circle: function (x, y, w, h, shape) {\n    // Put circle in the center of square\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.r = Math.min(w, h) / 2;\n  },\n  diamond: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  pin: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  arrow: function (x, y, w, h, shape) {\n    shape.x = x + w / 2;\n    shape.y = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  },\n  triangle: function (x, y, w, h, shape) {\n    shape.cx = x + w / 2;\n    shape.cy = y + h / 2;\n    shape.width = w;\n    shape.height = h;\n  }\n};\nexport var symbolBuildProxies = {};\neach(symbolCtors, function (Ctor, name) {\n  symbolBuildProxies[name] = new Ctor();\n});\nvar SymbolClz = graphic.Path.extend({\n  type: 'symbol',\n  shape: {\n    symbolType: '',\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  },\n  calculateTextPosition: function (out, config, rect) {\n    var res = calculateTextPosition(out, config, rect);\n    var shape = this.shape;\n    if (shape && shape.symbolType === 'pin' && config.position === 'inside') {\n      res.y = rect.y + rect.height * 0.4;\n    }\n    return res;\n  },\n  buildPath: function (ctx, shape, inBundle) {\n    var symbolType = shape.symbolType;\n    if (symbolType !== 'none') {\n      var proxySymbol = symbolBuildProxies[symbolType];\n      if (!proxySymbol) {\n        // Default rect\n        symbolType = 'rect';\n        proxySymbol = symbolBuildProxies[symbolType];\n      }\n      symbolShapeMakers[symbolType](shape.x, shape.y, shape.width, shape.height, proxySymbol.shape);\n      proxySymbol.buildPath(ctx, proxySymbol.shape, inBundle);\n    }\n  }\n});\n// Provide setColor helper method to avoid determine if set the fill or stroke outside\nfunction symbolPathSetColor(color, innerColor) {\n  if (this.type !== 'image') {\n    var symbolStyle = this.style;\n    if (this.__isEmptyBrush) {\n      symbolStyle.stroke = color;\n      symbolStyle.fill = innerColor || '#fff';\n      // TODO Same width with lineStyle in LineView\n      symbolStyle.lineWidth = 2;\n    } else if (this.shape.symbolType === 'line') {\n      symbolStyle.stroke = color;\n    } else {\n      symbolStyle.fill = color;\n    }\n    this.markRedraw();\n  }\n}\n/**\r\n * Create a symbol element with given symbol configuration: shape, x, y, width, height, color\r\n */\nexport function createSymbol(symbolType, x, y, w, h, color,\n// whether to keep the ratio of w/h,\nkeepAspect) {\n  // TODO Support image object, DynamicImage.\n  var isEmpty = symbolType.indexOf('empty') === 0;\n  if (isEmpty) {\n    symbolType = symbolType.substr(5, 1).toLowerCase() + symbolType.substr(6);\n  }\n  var symbolPath;\n  if (symbolType.indexOf('image://') === 0) {\n    symbolPath = graphic.makeImage(symbolType.slice(8), new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else if (symbolType.indexOf('path://') === 0) {\n    symbolPath = graphic.makePath(symbolType.slice(7), {}, new BoundingRect(x, y, w, h), keepAspect ? 'center' : 'cover');\n  } else {\n    symbolPath = new SymbolClz({\n      shape: {\n        symbolType: symbolType,\n        x: x,\n        y: y,\n        width: w,\n        height: h\n      }\n    });\n  }\n  symbolPath.__isEmptyBrush = isEmpty;\n  // TODO Should deprecate setColor\n  symbolPath.setColor = symbolPathSetColor;\n  if (color) {\n    symbolPath.setColor(color);\n  }\n  return symbolPath;\n}\nexport function normalizeSymbolSize(symbolSize) {\n  if (!isArray(symbolSize)) {\n    symbolSize = [+symbolSize, +symbolSize];\n  }\n  return [symbolSize[0] || 0, symbolSize[1] || 0];\n}\nexport function normalizeSymbolOffset(symbolOffset, symbolSize) {\n  if (symbolOffset == null) {\n    return;\n  }\n  if (!isArray(symbolOffset)) {\n    symbolOffset = [symbolOffset, symbolOffset];\n  }\n  return [parsePercent(symbolOffset[0], symbolSize[0]) || 0, parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]), symbolSize[1]) || 0];\n}","function isSafeNum(num) {\n    return isFinite(num);\n}\nexport function createLinearGradient(ctx, obj, rect) {\n    var x = obj.x == null ? 0 : obj.x;\n    var x2 = obj.x2 == null ? 1 : obj.x2;\n    var y = obj.y == null ? 0 : obj.y;\n    var y2 = obj.y2 == null ? 0 : obj.y2;\n    if (!obj.global) {\n        x = x * rect.width + rect.x;\n        x2 = x2 * rect.width + rect.x;\n        y = y * rect.height + rect.y;\n        y2 = y2 * rect.height + rect.y;\n    }\n    x = isSafeNum(x) ? x : 0;\n    x2 = isSafeNum(x2) ? x2 : 1;\n    y = isSafeNum(y) ? y : 0;\n    y2 = isSafeNum(y2) ? y2 : 0;\n    var canvasGradient = ctx.createLinearGradient(x, y, x2, y2);\n    return canvasGradient;\n}\nexport function createRadialGradient(ctx, obj, rect) {\n    var width = rect.width;\n    var height = rect.height;\n    var min = Math.min(width, height);\n    var x = obj.x == null ? 0.5 : obj.x;\n    var y = obj.y == null ? 0.5 : obj.y;\n    var r = obj.r == null ? 0.5 : obj.r;\n    if (!obj.global) {\n        x = x * width + rect.x;\n        y = y * height + rect.y;\n        r = r * min;\n    }\n    x = isSafeNum(x) ? x : 0.5;\n    y = isSafeNum(y) ? y : 0.5;\n    r = r >= 0 && isSafeNum(r) ? r : 0.5;\n    var canvasGradient = ctx.createRadialGradient(x, y, 0, x, y, r);\n    return canvasGradient;\n}\nexport function getCanvasGradient(ctx, obj, rect) {\n    var canvasGradient = obj.type === 'radial'\n        ? createRadialGradient(ctx, obj, rect)\n        : createLinearGradient(ctx, obj, rect);\n    var colorStops = obj.colorStops;\n    for (var i = 0; i < colorStops.length; i++) {\n        canvasGradient.addColorStop(colorStops[i].offset, colorStops[i].color);\n    }\n    return canvasGradient;\n}\nexport function isClipPathChanged(clipPaths, prevClipPaths) {\n    if (clipPaths === prevClipPaths || (!clipPaths && !prevClipPaths)) {\n        return false;\n    }\n    if (!clipPaths || !prevClipPaths || (clipPaths.length !== prevClipPaths.length)) {\n        return true;\n    }\n    for (var i = 0; i < clipPaths.length; i++) {\n        if (clipPaths[i] !== prevClipPaths[i]) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport function getSize(root, whIdx, opts) {\n    var wh = ['width', 'height'][whIdx];\n    var cwh = ['clientWidth', 'clientHeight'][whIdx];\n    var plt = ['paddingLeft', 'paddingTop'][whIdx];\n    var prb = ['paddingRight', 'paddingBottom'][whIdx];\n    if (opts[wh] != null && opts[wh] !== 'auto') {\n        return parseFloat(opts[wh]);\n    }\n    var stl = document.defaultView.getComputedStyle(root);\n    return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n        - (parseInt10(stl[plt]) || 0)\n        - (parseInt10(stl[prb]) || 0)) | 0;\n}\n","import { isArray, isNumber, map } from '../core/util.js';\nexport function normalizeLineDash(lineType, lineWidth) {\n    if (!lineType || lineType === 'solid' || !(lineWidth > 0)) {\n        return null;\n    }\n    return lineType === 'dashed'\n        ? [4 * lineWidth, 2 * lineWidth]\n        : lineType === 'dotted'\n            ? [lineWidth]\n            : isNumber(lineType)\n                ? [lineType] : isArray(lineType) ? lineType : null;\n}\nexport function getLineDash(el) {\n    var style = el.style;\n    var lineDash = style.lineDash && style.lineWidth > 0 && normalizeLineDash(style.lineDash, style.lineWidth);\n    var lineDashOffset = style.lineDashOffset;\n    if (lineDash) {\n        var lineScale_1 = (style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1;\n        if (lineScale_1 && lineScale_1 !== 1) {\n            lineDash = map(lineDash, function (rawVal) {\n                return rawVal / lineScale_1;\n            });\n            lineDashOffset /= lineScale_1;\n        }\n    }\n    return [lineDash, lineDashOffset];\n}\n","import { DEFAULT_COMMON_STYLE } from '../graphic/Displayable.js';\nimport PathProxy from '../core/PathProxy.js';\nimport { createOrUpdateImage, isImageReady } from '../graphic/helper/image.js';\nimport { getCanvasGradient, isClipPathChanged } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport TSpan from '../graphic/TSpan.js';\nimport { RADIAN_TO_DEGREE } from '../core/util.js';\nimport { getLineDash } from './dashStyle.js';\nimport { REDRAW_BIT, SHAPE_CHANGED_BIT } from '../graphic/constants.js';\nimport { DEFAULT_FONT } from '../core/platform.js';\nvar pathProxyForDraw = new PathProxy(true);\nfunction styleHasStroke(style) {\n    var stroke = style.stroke;\n    return !(stroke == null || stroke === 'none' || !(style.lineWidth > 0));\n}\nfunction isValidStrokeFillStyle(strokeOrFill) {\n    return typeof strokeOrFill === 'string' && strokeOrFill !== 'none';\n}\nfunction styleHasFill(style) {\n    var fill = style.fill;\n    return fill != null && fill !== 'none';\n}\nfunction doFillPath(ctx, style) {\n    if (style.fillOpacity != null && style.fillOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.fillOpacity * style.opacity;\n        ctx.fill();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.fill();\n    }\n}\nfunction doStrokePath(ctx, style) {\n    if (style.strokeOpacity != null && style.strokeOpacity !== 1) {\n        var originalGlobalAlpha = ctx.globalAlpha;\n        ctx.globalAlpha = style.strokeOpacity * style.opacity;\n        ctx.stroke();\n        ctx.globalAlpha = originalGlobalAlpha;\n    }\n    else {\n        ctx.stroke();\n    }\n}\nexport function createCanvasPattern(ctx, pattern, el) {\n    var image = createOrUpdateImage(pattern.image, pattern.__image, el);\n    if (isImageReady(image)) {\n        var canvasPattern = ctx.createPattern(image, pattern.repeat || 'repeat');\n        if (typeof DOMMatrix === 'function'\n            && canvasPattern\n            && canvasPattern.setTransform) {\n            var matrix = new DOMMatrix();\n            matrix.translateSelf((pattern.x || 0), (pattern.y || 0));\n            matrix.rotateSelf(0, 0, (pattern.rotation || 0) * RADIAN_TO_DEGREE);\n            matrix.scaleSelf((pattern.scaleX || 1), (pattern.scaleY || 1));\n            canvasPattern.setTransform(matrix);\n        }\n        return canvasPattern;\n    }\n}\nfunction brushPath(ctx, el, style, inBatch) {\n    var _a;\n    var hasStroke = styleHasStroke(style);\n    var hasFill = styleHasFill(style);\n    var strokePercent = style.strokePercent;\n    var strokePart = strokePercent < 1;\n    var firstDraw = !el.path;\n    if ((!el.silent || strokePart) && firstDraw) {\n        el.createPathProxy();\n    }\n    var path = el.path || pathProxyForDraw;\n    var dirtyFlag = el.__dirty;\n    if (!inBatch) {\n        var fill = style.fill;\n        var stroke = style.stroke;\n        var hasFillGradient = hasFill && !!fill.colorStops;\n        var hasStrokeGradient = hasStroke && !!stroke.colorStops;\n        var hasFillPattern = hasFill && !!fill.image;\n        var hasStrokePattern = hasStroke && !!stroke.image;\n        var fillGradient = void 0;\n        var strokeGradient = void 0;\n        var fillPattern = void 0;\n        var strokePattern = void 0;\n        var rect = void 0;\n        if (hasFillGradient || hasStrokeGradient) {\n            rect = el.getBoundingRect();\n        }\n        if (hasFillGradient) {\n            fillGradient = dirtyFlag\n                ? getCanvasGradient(ctx, fill, rect)\n                : el.__canvasFillGradient;\n            el.__canvasFillGradient = fillGradient;\n        }\n        if (hasStrokeGradient) {\n            strokeGradient = dirtyFlag\n                ? getCanvasGradient(ctx, stroke, rect)\n                : el.__canvasStrokeGradient;\n            el.__canvasStrokeGradient = strokeGradient;\n        }\n        if (hasFillPattern) {\n            fillPattern = (dirtyFlag || !el.__canvasFillPattern)\n                ? createCanvasPattern(ctx, fill, el)\n                : el.__canvasFillPattern;\n            el.__canvasFillPattern = fillPattern;\n        }\n        if (hasStrokePattern) {\n            strokePattern = (dirtyFlag || !el.__canvasStrokePattern)\n                ? createCanvasPattern(ctx, stroke, el)\n                : el.__canvasStrokePattern;\n            el.__canvasStrokePattern = fillPattern;\n        }\n        if (hasFillGradient) {\n            ctx.fillStyle = fillGradient;\n        }\n        else if (hasFillPattern) {\n            if (fillPattern) {\n                ctx.fillStyle = fillPattern;\n            }\n            else {\n                hasFill = false;\n            }\n        }\n        if (hasStrokeGradient) {\n            ctx.strokeStyle = strokeGradient;\n        }\n        else if (hasStrokePattern) {\n            if (strokePattern) {\n                ctx.strokeStyle = strokePattern;\n            }\n            else {\n                hasStroke = false;\n            }\n        }\n    }\n    var scale = el.getGlobalScale();\n    path.setScale(scale[0], scale[1], el.segmentIgnoreThreshold);\n    var lineDash;\n    var lineDashOffset;\n    if (ctx.setLineDash && style.lineDash) {\n        _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n    }\n    var needsRebuild = true;\n    if (firstDraw || (dirtyFlag & SHAPE_CHANGED_BIT)) {\n        path.setDPR(ctx.dpr);\n        if (strokePart) {\n            path.setContext(null);\n        }\n        else {\n            path.setContext(ctx);\n            needsRebuild = false;\n        }\n        path.reset();\n        el.buildPath(path, el.shape, inBatch);\n        path.toStatic();\n        el.pathUpdated();\n    }\n    if (needsRebuild) {\n        path.rebuildPath(ctx, strokePart ? strokePercent : 1);\n    }\n    if (lineDash) {\n        ctx.setLineDash(lineDash);\n        ctx.lineDashOffset = lineDashOffset;\n    }\n    if (!inBatch) {\n        if (style.strokeFirst) {\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n        }\n        else {\n            if (hasFill) {\n                doFillPath(ctx, style);\n            }\n            if (hasStroke) {\n                doStrokePath(ctx, style);\n            }\n        }\n    }\n    if (lineDash) {\n        ctx.setLineDash([]);\n    }\n}\nfunction brushImage(ctx, el, style) {\n    var image = el.__image = createOrUpdateImage(style.image, el.__image, el, el.onload);\n    if (!image || !isImageReady(image)) {\n        return;\n    }\n    var x = style.x || 0;\n    var y = style.y || 0;\n    var width = el.getWidth();\n    var height = el.getHeight();\n    var aspect = image.width / image.height;\n    if (width == null && height != null) {\n        width = height * aspect;\n    }\n    else if (height == null && width != null) {\n        height = width / aspect;\n    }\n    else if (width == null && height == null) {\n        width = image.width;\n        height = image.height;\n    }\n    if (style.sWidth && style.sHeight) {\n        var sx = style.sx || 0;\n        var sy = style.sy || 0;\n        ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);\n    }\n    else if (style.sx && style.sy) {\n        var sx = style.sx;\n        var sy = style.sy;\n        var sWidth = width - sx;\n        var sHeight = height - sy;\n        ctx.drawImage(image, sx, sy, sWidth, sHeight, x, y, width, height);\n    }\n    else {\n        ctx.drawImage(image, x, y, width, height);\n    }\n}\nfunction brushText(ctx, el, style) {\n    var _a;\n    var text = style.text;\n    text != null && (text += '');\n    if (text) {\n        ctx.font = style.font || DEFAULT_FONT;\n        ctx.textAlign = style.textAlign;\n        ctx.textBaseline = style.textBaseline;\n        var lineDash = void 0;\n        var lineDashOffset = void 0;\n        if (ctx.setLineDash && style.lineDash) {\n            _a = getLineDash(el), lineDash = _a[0], lineDashOffset = _a[1];\n        }\n        if (lineDash) {\n            ctx.setLineDash(lineDash);\n            ctx.lineDashOffset = lineDashOffset;\n        }\n        if (style.strokeFirst) {\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n        }\n        else {\n            if (styleHasFill(style)) {\n                ctx.fillText(text, style.x, style.y);\n            }\n            if (styleHasStroke(style)) {\n                ctx.strokeText(text, style.x, style.y);\n            }\n        }\n        if (lineDash) {\n            ctx.setLineDash([]);\n        }\n    }\n}\nvar SHADOW_NUMBER_PROPS = ['shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\nvar STROKE_PROPS = [\n    ['lineCap', 'butt'], ['lineJoin', 'miter'], ['miterLimit', 10]\n];\nfunction bindCommonProps(ctx, style, prevStyle, forceSetAll, scope) {\n    var styleChanged = false;\n    if (!forceSetAll) {\n        prevStyle = prevStyle || {};\n        if (style === prevStyle) {\n            return false;\n        }\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        flushPathDrawn(ctx, scope);\n        styleChanged = true;\n        var opacity = Math.max(Math.min(style.opacity, 1), 0);\n        ctx.globalAlpha = isNaN(opacity) ? DEFAULT_COMMON_STYLE.opacity : opacity;\n    }\n    if (forceSetAll || style.blend !== prevStyle.blend) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalCompositeOperation = style.blend || DEFAULT_COMMON_STYLE.blend;\n    }\n    for (var i = 0; i < SHADOW_NUMBER_PROPS.length; i++) {\n        var propName = SHADOW_NUMBER_PROPS[i];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = ctx.dpr * (style[propName] || 0);\n        }\n    }\n    if (forceSetAll || style.shadowColor !== prevStyle.shadowColor) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.shadowColor = style.shadowColor || DEFAULT_COMMON_STYLE.shadowColor;\n    }\n    return styleChanged;\n}\nfunction bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetAll, scope) {\n    var style = getStyle(el, scope.inHover);\n    var prevStyle = forceSetAll\n        ? null\n        : (prevEl && getStyle(prevEl, scope.inHover) || {});\n    if (style === prevStyle) {\n        return false;\n    }\n    var styleChanged = bindCommonProps(ctx, style, prevStyle, forceSetAll, scope);\n    if (forceSetAll || style.fill !== prevStyle.fill) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.fill) && (ctx.fillStyle = style.fill);\n    }\n    if (forceSetAll || style.stroke !== prevStyle.stroke) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        isValidStrokeFillStyle(style.stroke) && (ctx.strokeStyle = style.stroke);\n    }\n    if (forceSetAll || style.opacity !== prevStyle.opacity) {\n        if (!styleChanged) {\n            flushPathDrawn(ctx, scope);\n            styleChanged = true;\n        }\n        ctx.globalAlpha = style.opacity == null ? 1 : style.opacity;\n    }\n    if (el.hasStroke()) {\n        var lineWidth = style.lineWidth;\n        var newLineWidth = lineWidth / ((style.strokeNoScale && el.getLineScale) ? el.getLineScale() : 1);\n        if (ctx.lineWidth !== newLineWidth) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx.lineWidth = newLineWidth;\n        }\n    }\n    for (var i = 0; i < STROKE_PROPS.length; i++) {\n        var prop = STROKE_PROPS[i];\n        var propName = prop[0];\n        if (forceSetAll || style[propName] !== prevStyle[propName]) {\n            if (!styleChanged) {\n                flushPathDrawn(ctx, scope);\n                styleChanged = true;\n            }\n            ctx[propName] = style[propName] || prop[1];\n        }\n    }\n    return styleChanged;\n}\nfunction bindImageStyle(ctx, el, prevEl, forceSetAll, scope) {\n    return bindCommonProps(ctx, getStyle(el, scope.inHover), prevEl && getStyle(prevEl, scope.inHover), forceSetAll, scope);\n}\nfunction setContextTransform(ctx, el) {\n    var m = el.transform;\n    var dpr = ctx.dpr || 1;\n    if (m) {\n        ctx.setTransform(dpr * m[0], dpr * m[1], dpr * m[2], dpr * m[3], dpr * m[4], dpr * m[5]);\n    }\n    else {\n        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n    }\n}\nfunction updateClipStatus(clipPaths, ctx, scope) {\n    var allClipped = false;\n    for (var i = 0; i < clipPaths.length; i++) {\n        var clipPath = clipPaths[i];\n        allClipped = allClipped || clipPath.isZeroArea();\n        setContextTransform(ctx, clipPath);\n        ctx.beginPath();\n        clipPath.buildPath(ctx, clipPath.shape);\n        ctx.clip();\n    }\n    scope.allClipped = allClipped;\n}\nfunction isTransformChanged(m0, m1) {\n    if (m0 && m1) {\n        return m0[0] !== m1[0]\n            || m0[1] !== m1[1]\n            || m0[2] !== m1[2]\n            || m0[3] !== m1[3]\n            || m0[4] !== m1[4]\n            || m0[5] !== m1[5];\n    }\n    else if (!m0 && !m1) {\n        return false;\n    }\n    return true;\n}\nvar DRAW_TYPE_PATH = 1;\nvar DRAW_TYPE_IMAGE = 2;\nvar DRAW_TYPE_TEXT = 3;\nvar DRAW_TYPE_INCREMENTAL = 4;\nfunction canPathBatch(style) {\n    var hasFill = styleHasFill(style);\n    var hasStroke = styleHasStroke(style);\n    return !(style.lineDash\n        || !(+hasFill ^ +hasStroke)\n        || (hasFill && typeof style.fill !== 'string')\n        || (hasStroke && typeof style.stroke !== 'string')\n        || style.strokePercent < 1\n        || style.strokeOpacity < 1\n        || style.fillOpacity < 1);\n}\nfunction flushPathDrawn(ctx, scope) {\n    scope.batchFill && ctx.fill();\n    scope.batchStroke && ctx.stroke();\n    scope.batchFill = '';\n    scope.batchStroke = '';\n}\nfunction getStyle(el, inHover) {\n    return inHover ? (el.__hoverStyle || el.style) : el.style;\n}\nexport function brushSingle(ctx, el) {\n    brush(ctx, el, { inHover: false, viewWidth: 0, viewHeight: 0 }, true);\n}\nexport function brush(ctx, el, scope, isLast) {\n    var m = el.transform;\n    if (!el.shouldBePainted(scope.viewWidth, scope.viewHeight, false, false)) {\n        el.__dirty &= ~REDRAW_BIT;\n        el.__isRendered = false;\n        return;\n    }\n    var clipPaths = el.__clipPaths;\n    var prevElClipPaths = scope.prevElClipPaths;\n    var forceSetTransform = false;\n    var forceSetStyle = false;\n    if (!prevElClipPaths || isClipPathChanged(clipPaths, prevElClipPaths)) {\n        if (prevElClipPaths && prevElClipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.restore();\n            forceSetStyle = forceSetTransform = true;\n            scope.prevElClipPaths = null;\n            scope.allClipped = false;\n            scope.prevEl = null;\n        }\n        if (clipPaths && clipPaths.length) {\n            flushPathDrawn(ctx, scope);\n            ctx.save();\n            updateClipStatus(clipPaths, ctx, scope);\n            forceSetTransform = true;\n        }\n        scope.prevElClipPaths = clipPaths;\n    }\n    if (scope.allClipped) {\n        el.__isRendered = false;\n        return;\n    }\n    el.beforeBrush && el.beforeBrush();\n    el.innerBeforeBrush();\n    var prevEl = scope.prevEl;\n    if (!prevEl) {\n        forceSetStyle = forceSetTransform = true;\n    }\n    var canBatchPath = el instanceof Path\n        && el.autoBatch\n        && canPathBatch(el.style);\n    if (forceSetTransform || isTransformChanged(m, prevEl.transform)) {\n        flushPathDrawn(ctx, scope);\n        setContextTransform(ctx, el);\n    }\n    else if (!canBatchPath) {\n        flushPathDrawn(ctx, scope);\n    }\n    var style = getStyle(el, scope.inHover);\n    if (el instanceof Path) {\n        if (scope.lastDrawType !== DRAW_TYPE_PATH) {\n            forceSetStyle = true;\n            scope.lastDrawType = DRAW_TYPE_PATH;\n        }\n        bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n        if (!canBatchPath || (!scope.batchFill && !scope.batchStroke)) {\n            ctx.beginPath();\n        }\n        brushPath(ctx, el, style, canBatchPath);\n        if (canBatchPath) {\n            scope.batchFill = style.fill || '';\n            scope.batchStroke = style.stroke || '';\n        }\n    }\n    else {\n        if (el instanceof TSpan) {\n            if (scope.lastDrawType !== DRAW_TYPE_TEXT) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_TEXT;\n            }\n            bindPathAndTextCommonStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushText(ctx, el, style);\n        }\n        else if (el instanceof ZRImage) {\n            if (scope.lastDrawType !== DRAW_TYPE_IMAGE) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_IMAGE;\n            }\n            bindImageStyle(ctx, el, prevEl, forceSetStyle, scope);\n            brushImage(ctx, el, style);\n        }\n        else if (el.getTemporalDisplayables) {\n            if (scope.lastDrawType !== DRAW_TYPE_INCREMENTAL) {\n                forceSetStyle = true;\n                scope.lastDrawType = DRAW_TYPE_INCREMENTAL;\n            }\n            brushIncremental(ctx, el, scope);\n        }\n    }\n    if (canBatchPath && isLast) {\n        flushPathDrawn(ctx, scope);\n    }\n    el.innerAfterBrush();\n    el.afterBrush && el.afterBrush();\n    scope.prevEl = el;\n    el.__dirty = 0;\n    el.__isRendered = true;\n}\nfunction brushIncremental(ctx, el, scope) {\n    var displayables = el.getDisplayables();\n    var temporalDisplayables = el.getTemporalDisplayables();\n    ctx.save();\n    var innerScope = {\n        prevElClipPaths: null,\n        prevEl: null,\n        allClipped: false,\n        viewWidth: scope.viewWidth,\n        viewHeight: scope.viewHeight,\n        inHover: scope.inHover\n    };\n    var i;\n    var len;\n    for (i = el.getCursor(), len = displayables.length; i < len; i++) {\n        var displayable = displayables[i];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i === len - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    for (var i_1 = 0, len_1 = temporalDisplayables.length; i_1 < len_1; i_1++) {\n        var displayable = temporalDisplayables[i_1];\n        displayable.beforeBrush && displayable.beforeBrush();\n        displayable.innerBeforeBrush();\n        brush(ctx, displayable, innerScope, i_1 === len_1 - 1);\n        displayable.innerAfterBrush();\n        displayable.afterBrush && displayable.afterBrush();\n        innerScope.prevEl = displayable;\n    }\n    el.clearTemporalDisplayables();\n    el.notClear = true;\n    ctx.restore();\n}\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport WeakMap from 'zrender/lib/core/WeakMap.js';\nimport LRU from 'zrender/lib/core/LRU.js';\nimport { defaults, map, isArray, isString, isNumber } from 'zrender/lib/core/util.js';\nimport { getLeastCommonMultiple } from './number.js';\nimport { createSymbol } from './symbol.js';\nimport { brushSingle } from 'zrender/lib/canvas/graphic.js';\nimport { platformApi } from 'zrender/lib/core/platform.js';\nvar decalMap = new WeakMap();\nvar decalCache = new LRU(100);\nvar decalKeys = ['symbol', 'symbolSize', 'symbolKeepAspect', 'color', 'backgroundColor', 'dashArrayX', 'dashArrayY', 'maxTileWidth', 'maxTileHeight'];\n/**\r\n * Create or update pattern image from decal options\r\n *\r\n * @param {InnerDecalObject | 'none'} decalObject decal options, 'none' if no decal\r\n * @return {Pattern} pattern with generated image, null if no decal\r\n */\nexport function createOrUpdatePatternFromDecal(decalObject, api) {\n  if (decalObject === 'none') {\n    return null;\n  }\n  var dpr = api.getDevicePixelRatio();\n  var zr = api.getZr();\n  var isSVG = zr.painter.type === 'svg';\n  if (decalObject.dirty) {\n    decalMap[\"delete\"](decalObject);\n  }\n  var oldPattern = decalMap.get(decalObject);\n  if (oldPattern) {\n    return oldPattern;\n  }\n  var decalOpt = defaults(decalObject, {\n    symbol: 'rect',\n    symbolSize: 1,\n    symbolKeepAspect: true,\n    color: 'rgba(0, 0, 0, 0.2)',\n    backgroundColor: null,\n    dashArrayX: 5,\n    dashArrayY: 5,\n    rotation: 0,\n    maxTileWidth: 512,\n    maxTileHeight: 512\n  });\n  if (decalOpt.backgroundColor === 'none') {\n    decalOpt.backgroundColor = null;\n  }\n  var pattern = {\n    repeat: 'repeat'\n  };\n  setPatternnSource(pattern);\n  pattern.rotation = decalOpt.rotation;\n  pattern.scaleX = pattern.scaleY = isSVG ? 1 : 1 / dpr;\n  decalMap.set(decalObject, pattern);\n  decalObject.dirty = false;\n  return pattern;\n  function setPatternnSource(pattern) {\n    var keys = [dpr];\n    var isValidKey = true;\n    for (var i = 0; i < decalKeys.length; ++i) {\n      var value = decalOpt[decalKeys[i]];\n      if (value != null && !isArray(value) && !isString(value) && !isNumber(value) && typeof value !== 'boolean') {\n        isValidKey = false;\n        break;\n      }\n      keys.push(value);\n    }\n    var cacheKey;\n    if (isValidKey) {\n      cacheKey = keys.join(',') + (isSVG ? '-svg' : '');\n      var cache = decalCache.get(cacheKey);\n      if (cache) {\n        isSVG ? pattern.svgElement = cache : pattern.image = cache;\n      }\n    }\n    var dashArrayX = normalizeDashArrayX(decalOpt.dashArrayX);\n    var dashArrayY = normalizeDashArrayY(decalOpt.dashArrayY);\n    var symbolArray = normalizeSymbolArray(decalOpt.symbol);\n    var lineBlockLengthsX = getLineBlockLengthX(dashArrayX);\n    var lineBlockLengthY = getLineBlockLengthY(dashArrayY);\n    var canvas = !isSVG && platformApi.createCanvas();\n    var svgRoot = isSVG && {\n      tag: 'g',\n      attrs: {},\n      key: 'dcl',\n      children: []\n    };\n    var pSize = getPatternSize();\n    var ctx;\n    if (canvas) {\n      canvas.width = pSize.width * dpr;\n      canvas.height = pSize.height * dpr;\n      ctx = canvas.getContext('2d');\n    }\n    brushDecal();\n    if (isValidKey) {\n      decalCache.put(cacheKey, canvas || svgRoot);\n    }\n    pattern.image = canvas;\n    pattern.svgElement = svgRoot;\n    pattern.svgWidth = pSize.width;\n    pattern.svgHeight = pSize.height;\n    /**\r\n     * Get minimum length that can make a repeatable pattern.\r\n     *\r\n     * @return {Object} pattern width and height\r\n     */\n    function getPatternSize() {\n      /**\r\n       * For example, if dash is [[3, 2], [2, 1]] for X, it looks like\r\n       * |---  ---  ---  ---  --- ...\r\n       * |-- -- -- -- -- -- -- -- ...\r\n       * |---  ---  ---  ---  --- ...\r\n       * |-- -- -- -- -- -- -- -- ...\r\n       * So the minimum length of X is 15,\r\n       * which is the least common multiple of `3 + 2` and `2 + 1`\r\n       * |---  ---  ---  |---  --- ...\r\n       * |-- -- -- -- -- |-- -- -- ...\r\n       */\n      var width = 1;\n      for (var i = 0, xlen = lineBlockLengthsX.length; i < xlen; ++i) {\n        width = getLeastCommonMultiple(width, lineBlockLengthsX[i]);\n      }\n      var symbolRepeats = 1;\n      for (var i = 0, xlen = symbolArray.length; i < xlen; ++i) {\n        symbolRepeats = getLeastCommonMultiple(symbolRepeats, symbolArray[i].length);\n      }\n      width *= symbolRepeats;\n      var height = lineBlockLengthY * lineBlockLengthsX.length * symbolArray.length;\n      if (process.env.NODE_ENV !== 'production') {\n        var warn = function (attrName) {\n          /* eslint-disable-next-line */\n          console.warn(\"Calculated decal size is greater than \" + attrName + \" due to decal option settings so \" + attrName + \" is used for the decal size. Please consider changing the decal option to make a smaller decal or set \" + attrName + \" to be larger to avoid incontinuity.\");\n        };\n        if (width > decalOpt.maxTileWidth) {\n          warn('maxTileWidth');\n        }\n        if (height > decalOpt.maxTileHeight) {\n          warn('maxTileHeight');\n        }\n      }\n      return {\n        width: Math.max(1, Math.min(width, decalOpt.maxTileWidth)),\n        height: Math.max(1, Math.min(height, decalOpt.maxTileHeight))\n      };\n    }\n    function brushDecal() {\n      if (ctx) {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if (decalOpt.backgroundColor) {\n          ctx.fillStyle = decalOpt.backgroundColor;\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n      }\n      var ySum = 0;\n      for (var i = 0; i < dashArrayY.length; ++i) {\n        ySum += dashArrayY[i];\n      }\n      if (ySum <= 0) {\n        // dashArrayY is 0, draw nothing\n        return;\n      }\n      var y = -lineBlockLengthY;\n      var yId = 0;\n      var yIdTotal = 0;\n      var xId0 = 0;\n      while (y < pSize.height) {\n        if (yId % 2 === 0) {\n          var symbolYId = yIdTotal / 2 % symbolArray.length;\n          var x = 0;\n          var xId1 = 0;\n          var xId1Total = 0;\n          while (x < pSize.width * 2) {\n            var xSum = 0;\n            for (var i = 0; i < dashArrayX[xId0].length; ++i) {\n              xSum += dashArrayX[xId0][i];\n            }\n            if (xSum <= 0) {\n              // Skip empty line\n              break;\n            }\n            // E.g., [15, 5, 20, 5] draws only for 15 and 20\n            if (xId1 % 2 === 0) {\n              var size = (1 - decalOpt.symbolSize) * 0.5;\n              var left = x + dashArrayX[xId0][xId1] * size;\n              var top_1 = y + dashArrayY[yId] * size;\n              var width = dashArrayX[xId0][xId1] * decalOpt.symbolSize;\n              var height = dashArrayY[yId] * decalOpt.symbolSize;\n              var symbolXId = xId1Total / 2 % symbolArray[symbolYId].length;\n              brushSymbol(left, top_1, width, height, symbolArray[symbolYId][symbolXId]);\n            }\n            x += dashArrayX[xId0][xId1];\n            ++xId1Total;\n            ++xId1;\n            if (xId1 === dashArrayX[xId0].length) {\n              xId1 = 0;\n            }\n          }\n          ++xId0;\n          if (xId0 === dashArrayX.length) {\n            xId0 = 0;\n          }\n        }\n        y += dashArrayY[yId];\n        ++yIdTotal;\n        ++yId;\n        if (yId === dashArrayY.length) {\n          yId = 0;\n        }\n      }\n      function brushSymbol(x, y, width, height, symbolType) {\n        var scale = isSVG ? 1 : dpr;\n        var symbol = createSymbol(symbolType, x * scale, y * scale, width * scale, height * scale, decalOpt.color, decalOpt.symbolKeepAspect);\n        if (isSVG) {\n          var symbolVNode = zr.painter.renderOneToVNode(symbol);\n          if (symbolVNode) {\n            svgRoot.children.push(symbolVNode);\n          }\n        } else {\n          // Paint to canvas for all other renderers.\n          brushSingle(ctx, symbol);\n        }\n      }\n    }\n  }\n}\n/**\r\n * Convert symbol array into normalized array\r\n *\r\n * @param {string | (string | string[])[]} symbol symbol input\r\n * @return {string[][]} normolized symbol array\r\n */\nfunction normalizeSymbolArray(symbol) {\n  if (!symbol || symbol.length === 0) {\n    return [['rect']];\n  }\n  if (isString(symbol)) {\n    return [[symbol]];\n  }\n  var isAllString = true;\n  for (var i = 0; i < symbol.length; ++i) {\n    if (!isString(symbol[i])) {\n      isAllString = false;\n      break;\n    }\n  }\n  if (isAllString) {\n    return normalizeSymbolArray([symbol]);\n  }\n  var result = [];\n  for (var i = 0; i < symbol.length; ++i) {\n    if (isString(symbol[i])) {\n      result.push([symbol[i]]);\n    } else {\n      result.push(symbol[i]);\n    }\n  }\n  return result;\n}\n/**\r\n * Convert dash input into dashArray\r\n *\r\n * @param {DecalDashArrayX} dash dash input\r\n * @return {number[][]} normolized dash array\r\n */\nfunction normalizeDashArrayX(dash) {\n  if (!dash || dash.length === 0) {\n    return [[0, 0]];\n  }\n  if (isNumber(dash)) {\n    var dashValue = Math.ceil(dash);\n    return [[dashValue, dashValue]];\n  }\n  /**\r\n   * [20, 5] should be normalized into [[20, 5]],\r\n   * while [20, [5, 10]] should be normalized into [[20, 20], [5, 10]]\r\n   */\n  var isAllNumber = true;\n  for (var i = 0; i < dash.length; ++i) {\n    if (!isNumber(dash[i])) {\n      isAllNumber = false;\n      break;\n    }\n  }\n  if (isAllNumber) {\n    return normalizeDashArrayX([dash]);\n  }\n  var result = [];\n  for (var i = 0; i < dash.length; ++i) {\n    if (isNumber(dash[i])) {\n      var dashValue = Math.ceil(dash[i]);\n      result.push([dashValue, dashValue]);\n    } else {\n      var dashValue = map(dash[i], function (n) {\n        return Math.ceil(n);\n      });\n      if (dashValue.length % 2 === 1) {\n        // [4, 2, 1] means |----  -    -- |----  -    -- |\n        // so normalize it to be [4, 2, 1, 4, 2, 1]\n        result.push(dashValue.concat(dashValue));\n      } else {\n        result.push(dashValue);\n      }\n    }\n  }\n  return result;\n}\n/**\r\n * Convert dash input into dashArray\r\n *\r\n * @param {DecalDashArrayY} dash dash input\r\n * @return {number[]} normolized dash array\r\n */\nfunction normalizeDashArrayY(dash) {\n  if (!dash || typeof dash === 'object' && dash.length === 0) {\n    return [0, 0];\n  }\n  if (isNumber(dash)) {\n    var dashValue_1 = Math.ceil(dash);\n    return [dashValue_1, dashValue_1];\n  }\n  var dashValue = map(dash, function (n) {\n    return Math.ceil(n);\n  });\n  return dash.length % 2 ? dashValue.concat(dashValue) : dashValue;\n}\n/**\r\n * Get block length of each line. A block is the length of dash line and space.\r\n * For example, a line with [4, 1] has a dash line of 4 and a space of 1 after\r\n * that, so the block length of this line is 5.\r\n *\r\n * @param {number[][]} dash dash array of X or Y\r\n * @return {number[]} block length of each line\r\n */\nfunction getLineBlockLengthX(dash) {\n  return map(dash, function (line) {\n    return getLineBlockLengthY(line);\n  });\n}\nfunction getLineBlockLengthY(dash) {\n  var blockLength = 0;\n  for (var i = 0; i < dash.length; ++i) {\n    blockLength += dash[i];\n  }\n  if (dash.length % 2 === 1) {\n    // [4, 2, 1] means |----  -    -- |----  -    -- |\n    // So total length is (4 + 2 + 1) * 2\n    return blockLength * 2;\n  }\n  return blockLength;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createOrUpdatePatternFromDecal } from '../util/decal.js';\nexport default function decalVisual(ecModel, api) {\n  ecModel.eachRawSeries(function (seriesModel) {\n    if (ecModel.isSeriesFiltered(seriesModel)) {\n      return;\n    }\n    var data = seriesModel.getData();\n    if (data.hasItemVisual()) {\n      data.each(function (idx) {\n        var decal = data.getItemVisual(idx, 'decal');\n        if (decal) {\n          var itemStyle = data.ensureUniqueItemVisual(idx, 'style');\n          itemStyle.decal = createOrUpdatePatternFromDecal(decal, api);\n        }\n      });\n    }\n    var decal = data.getVisual('decal');\n    if (decal) {\n      var style = data.getVisual('style');\n      style.decal = createOrUpdatePatternFromDecal(decal, api);\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Eventful from 'zrender/lib/core/Eventful.js';\n;\nvar lifecycle = new Eventful();\nexport default lifecycle;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { error } from '../util/log.js';\n// Implementation of exported APIs. For example registerMap, getMap.\n// The implementations will be registered when installing the component.\n// Avoid these code being bundled to the core module.\nvar implsStore = {};\n// TODO Type\nexport function registerImpl(name, impl) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (implsStore[name]) {\n      error(\"Already has an implementation of \" + name + \".\");\n    }\n  }\n  implsStore[name] = impl;\n}\nexport function getImpl(name) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!implsStore[name]) {\n      error(\"Implementation of \" + name + \" doesn't exists.\");\n    }\n  }\n  return implsStore[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrender from 'zrender/lib/zrender.js';\nimport { assert, each, isFunction, isObject, indexOf, bind, clone, setAsPrimitive, extend, createHashMap, map, defaults, isDom, isArray, noop, isString, retrieve2 } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport timsort from 'zrender/lib/core/timsort.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport GlobalModel from '../model/Global.js';\nimport ExtensionAPI from './ExtensionAPI.js';\nimport CoordinateSystemManager from './CoordinateSystem.js';\nimport OptionManager from '../model/OptionManager.js';\nimport backwardCompat from '../preprocessor/backwardCompat.js';\nimport dataStack from '../processor/dataStack.js';\nimport SeriesModel from '../model/Series.js';\nimport ComponentView from '../view/Component.js';\nimport ChartView from '../view/Chart.js';\nimport * as graphic from '../util/graphic.js';\nimport { getECData } from '../util/innerStore.js';\nimport { isHighDownDispatcher, HOVER_STATE_EMPHASIS, HOVER_STATE_BLUR, blurSeriesFromHighlightPayload, toggleSelectionFromPayload, updateSeriesElementSelection, getAllSelectedIndices, isSelectChangePayload, isHighDownPayload, HIGHLIGHT_ACTION_TYPE, DOWNPLAY_ACTION_TYPE, SELECT_ACTION_TYPE, UNSELECT_ACTION_TYPE, TOGGLE_SELECT_ACTION_TYPE, savePathStates, enterEmphasis, leaveEmphasis, leaveBlur, enterSelect, leaveSelect, enterBlur, allLeaveBlur, findComponentHighDownDispatchers, blurComponent, handleGlobalMouseOverForHighDown, handleGlobalMouseOutForHighDown } from '../util/states.js';\nimport * as modelUtil from '../util/model.js';\nimport { throttle } from '../util/throttle.js';\nimport { seriesStyleTask, dataStyleTask, dataColorPaletteTask } from '../visual/style.js';\nimport loadingDefault from '../loading/default.js';\nimport Scheduler from './Scheduler.js';\nimport lightTheme from '../theme/light.js';\nimport darkTheme from '../theme/dark.js';\nimport { parseClassType } from '../util/clazz.js';\nimport { ECEventProcessor } from '../util/ECEventProcessor.js';\nimport { seriesSymbolTask, dataSymbolTask } from '../visual/symbol.js';\nimport { getVisualFromData, getItemVisualFromData } from '../visual/helper.js';\nimport { deprecateLog, deprecateReplaceLog, error, warn } from '../util/log.js';\nimport { handleLegacySelectEvents } from '../legacy/dataSelectAction.js';\nimport { registerExternalTransform } from '../data/helper/transform.js';\nimport { createLocaleObject, SYSTEM_LANG } from './locale.js';\nimport { findEventDispatcher } from '../util/event.js';\nimport decal from '../visual/decal.js';\nimport lifecycle from './lifecycle.js';\nimport { platformApi, setPlatformAPI } from 'zrender/lib/core/platform.js';\nimport { getImpl } from './impl.js';\nexport var version = '5.6.0';\nexport var dependencies = {\n  zrender: '5.6.1'\n};\nvar TEST_FRAME_REMAIN_TIME = 1;\nvar PRIORITY_PROCESSOR_SERIES_FILTER = 800;\n// Some data processors depends on the stack result dimension (to calculate data extent).\n// So data stack stage should be in front of data processing stage.\nvar PRIORITY_PROCESSOR_DATASTACK = 900;\n// \"Data filter\" will block the stream, so it should be\n// put at the beginning of data processing.\nvar PRIORITY_PROCESSOR_FILTER = 1000;\nvar PRIORITY_PROCESSOR_DEFAULT = 2000;\nvar PRIORITY_PROCESSOR_STATISTIC = 5000;\nvar PRIORITY_VISUAL_LAYOUT = 1000;\nvar PRIORITY_VISUAL_PROGRESSIVE_LAYOUT = 1100;\nvar PRIORITY_VISUAL_GLOBAL = 2000;\nvar PRIORITY_VISUAL_CHART = 3000;\nvar PRIORITY_VISUAL_COMPONENT = 4000;\n// Visual property in data. Greater than `PRIORITY_VISUAL_COMPONENT` to enable to\n// overwrite the viusal result of component (like `visualMap`)\n// using data item specific setting (like itemStyle.xxx on data item)\nvar PRIORITY_VISUAL_CHART_DATA_CUSTOM = 4500;\n// Greater than `PRIORITY_VISUAL_CHART_DATA_CUSTOM` to enable to layout based on\n// visual result like `symbolSize`.\nvar PRIORITY_VISUAL_POST_CHART_LAYOUT = 4600;\nvar PRIORITY_VISUAL_BRUSH = 5000;\nvar PRIORITY_VISUAL_ARIA = 6000;\nvar PRIORITY_VISUAL_DECAL = 7000;\nexport var PRIORITY = {\n  PROCESSOR: {\n    FILTER: PRIORITY_PROCESSOR_FILTER,\n    SERIES_FILTER: PRIORITY_PROCESSOR_SERIES_FILTER,\n    STATISTIC: PRIORITY_PROCESSOR_STATISTIC\n  },\n  VISUAL: {\n    LAYOUT: PRIORITY_VISUAL_LAYOUT,\n    PROGRESSIVE_LAYOUT: PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,\n    GLOBAL: PRIORITY_VISUAL_GLOBAL,\n    CHART: PRIORITY_VISUAL_CHART,\n    POST_CHART_LAYOUT: PRIORITY_VISUAL_POST_CHART_LAYOUT,\n    COMPONENT: PRIORITY_VISUAL_COMPONENT,\n    BRUSH: PRIORITY_VISUAL_BRUSH,\n    CHART_ITEM: PRIORITY_VISUAL_CHART_DATA_CUSTOM,\n    ARIA: PRIORITY_VISUAL_ARIA,\n    DECAL: PRIORITY_VISUAL_DECAL\n  }\n};\n// Main process have three entries: `setOption`, `dispatchAction` and `resize`,\n// where they must not be invoked nestedly, except the only case: invoke\n// dispatchAction with updateMethod \"none\" in main process.\n// This flag is used to carry out this rule.\n// All events will be triggered out side main process (i.e. when !this[IN_MAIN_PROCESS]).\nvar IN_MAIN_PROCESS_KEY = '__flagInMainProcess';\nvar PENDING_UPDATE = '__pendingUpdate';\nvar STATUS_NEEDS_UPDATE_KEY = '__needsUpdateStatus';\nvar ACTION_REG = /^[a-zA-Z0-9_]+$/;\nvar CONNECT_STATUS_KEY = '__connectUpdateStatus';\nvar CONNECT_STATUS_PENDING = 0;\nvar CONNECT_STATUS_UPDATING = 1;\nvar CONNECT_STATUS_UPDATED = 2;\n;\n;\nfunction createRegisterEventWithLowercaseECharts(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    if (this.isDisposed()) {\n      disposedWarning(this.id);\n      return;\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction createRegisterEventWithLowercaseMessageCenter(method) {\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return toLowercaseNameAndCallEventful(this, method, args);\n  };\n}\nfunction toLowercaseNameAndCallEventful(host, method, args) {\n  // `args[0]` is event name. Event name is all lowercase.\n  args[0] = args[0] && args[0].toLowerCase();\n  return Eventful.prototype[method].apply(host, args);\n}\nvar MessageCenter = /** @class */function (_super) {\n  __extends(MessageCenter, _super);\n  function MessageCenter() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return MessageCenter;\n}(Eventful);\nvar messageCenterProto = MessageCenter.prototype;\nmessageCenterProto.on = createRegisterEventWithLowercaseMessageCenter('on');\nmessageCenterProto.off = createRegisterEventWithLowercaseMessageCenter('off');\n// ---------------------------------------\n// Internal method names for class ECharts\n// ---------------------------------------\nvar prepare;\nvar prepareView;\nvar updateDirectly;\nvar updateMethods;\nvar doConvertPixel;\nvar updateStreamModes;\nvar doDispatchAction;\nvar flushPendingActions;\nvar triggerUpdatedEvent;\nvar bindRenderedEvent;\nvar bindMouseEvent;\nvar render;\nvar renderComponents;\nvar renderSeries;\nvar createExtensionAPI;\nvar enableConnect;\nvar markStatusToUpdate;\nvar applyChangedStates;\nvar ECharts = /** @class */function (_super) {\n  __extends(ECharts, _super);\n  function ECharts(dom,\n  // Theme name or themeOption.\n  theme, opts) {\n    var _this = _super.call(this, new ECEventProcessor()) || this;\n    _this._chartsViews = [];\n    _this._chartsMap = {};\n    _this._componentsViews = [];\n    _this._componentsMap = {};\n    // Can't dispatch action during rendering procedure\n    _this._pendingActions = [];\n    opts = opts || {};\n    // Get theme by name\n    if (isString(theme)) {\n      theme = themeStorage[theme];\n    }\n    _this._dom = dom;\n    var defaultRenderer = 'canvas';\n    var defaultCoarsePointer = 'auto';\n    var defaultUseDirtyRect = false;\n    if (process.env.NODE_ENV !== 'production') {\n      var root = /* eslint-disable-next-line */\n      env.hasGlobalWindow ? window : global;\n      if (root) {\n        defaultRenderer = retrieve2(root.__ECHARTS__DEFAULT__RENDERER__, defaultRenderer);\n        defaultCoarsePointer = retrieve2(root.__ECHARTS__DEFAULT__COARSE_POINTER, defaultCoarsePointer);\n        defaultUseDirtyRect = retrieve2(root.__ECHARTS__DEFAULT__USE_DIRTY_RECT__, defaultUseDirtyRect);\n      }\n    }\n    if (opts.ssr) {\n      zrender.registerSSRDataGetter(function (el) {\n        var ecData = getECData(el);\n        var dataIndex = ecData.dataIndex;\n        if (dataIndex == null) {\n          return;\n        }\n        var hashMap = createHashMap();\n        hashMap.set('series_index', ecData.seriesIndex);\n        hashMap.set('data_index', dataIndex);\n        ecData.ssrType && hashMap.set('ssr_type', ecData.ssrType);\n        return hashMap;\n      });\n    }\n    var zr = _this._zr = zrender.init(dom, {\n      renderer: opts.renderer || defaultRenderer,\n      devicePixelRatio: opts.devicePixelRatio,\n      width: opts.width,\n      height: opts.height,\n      ssr: opts.ssr,\n      useDirtyRect: retrieve2(opts.useDirtyRect, defaultUseDirtyRect),\n      useCoarsePointer: retrieve2(opts.useCoarsePointer, defaultCoarsePointer),\n      pointerSize: opts.pointerSize\n    });\n    _this._ssr = opts.ssr;\n    // Expect 60 fps.\n    _this._throttledZrFlush = throttle(bind(zr.flush, zr), 17);\n    theme = clone(theme);\n    theme && backwardCompat(theme, true);\n    _this._theme = theme;\n    _this._locale = createLocaleObject(opts.locale || SYSTEM_LANG);\n    _this._coordSysMgr = new CoordinateSystemManager();\n    var api = _this._api = createExtensionAPI(_this);\n    // Sort on demand\n    function prioritySortFunc(a, b) {\n      return a.__prio - b.__prio;\n    }\n    timsort(visualFuncs, prioritySortFunc);\n    timsort(dataProcessorFuncs, prioritySortFunc);\n    _this._scheduler = new Scheduler(_this, api, dataProcessorFuncs, visualFuncs);\n    _this._messageCenter = new MessageCenter();\n    // Init mouse events\n    _this._initEvents();\n    // In case some people write `window.onresize = chart.resize`\n    _this.resize = bind(_this.resize, _this);\n    zr.animation.on('frame', _this._onframe, _this);\n    bindRenderedEvent(zr, _this);\n    bindMouseEvent(zr, _this);\n    // ECharts instance can be used as value.\n    setAsPrimitive(_this);\n    return _this;\n  }\n  ECharts.prototype._onframe = function () {\n    if (this._disposed) {\n      return;\n    }\n    applyChangedStates(this);\n    var scheduler = this._scheduler;\n    // Lazy update\n    if (this[PENDING_UPDATE]) {\n      var silent = this[PENDING_UPDATE].silent;\n      this[IN_MAIN_PROCESS_KEY] = true;\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, this[PENDING_UPDATE].updateParams);\n      } catch (e) {\n        this[IN_MAIN_PROCESS_KEY] = false;\n        this[PENDING_UPDATE] = null;\n        throw e;\n      }\n      // At present, in each frame, zrender performs:\n      //   (1) animation step forward.\n      //   (2) trigger('frame') (where this `_onframe` is called)\n      //   (3) zrender flush (render).\n      // If we do nothing here, since we use `setToFinal: true`, the step (3) above\n      // will render the final state of the elements before the real animation started.\n      this._zr.flush();\n      this[IN_MAIN_PROCESS_KEY] = false;\n      this[PENDING_UPDATE] = null;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n    // Avoid do both lazy update and progress in one frame.\n    else if (scheduler.unfinished) {\n      // Stream progress.\n      var remainTime = TEST_FRAME_REMAIN_TIME;\n      var ecModel = this._model;\n      var api = this._api;\n      scheduler.unfinished = false;\n      do {\n        var startTime = +new Date();\n        scheduler.performSeriesTasks(ecModel);\n        // Currently dataProcessorFuncs do not check threshold.\n        scheduler.performDataProcessorTasks(ecModel);\n        updateStreamModes(this, ecModel);\n        // Do not update coordinate system here. Because that coord system update in\n        // each frame is not a good user experience. So we follow the rule that\n        // the extent of the coordinate system is determined in the first frame (the\n        // frame is executed immediately after task reset.\n        // this._coordSysMgr.update(ecModel, api);\n        // console.log('--- ec frame visual ---', remainTime);\n        scheduler.performVisualTasks(ecModel);\n        renderSeries(this, this._model, api, 'remain', {});\n        remainTime -= +new Date() - startTime;\n      } while (remainTime > 0 && scheduler.unfinished);\n      // Call flush explicitly for trigger finished event.\n      if (!scheduler.unfinished) {\n        this._zr.flush();\n      }\n      // Else, zr flushing be ensue within the same frame,\n      // because zr flushing is after onframe event.\n    }\n  };\n  ECharts.prototype.getDom = function () {\n    return this._dom;\n  };\n  ECharts.prototype.getId = function () {\n    return this.id;\n  };\n  ECharts.prototype.getZr = function () {\n    return this._zr;\n  };\n  ECharts.prototype.isSSR = function () {\n    return this._ssr;\n  };\n  /* eslint-disable-next-line */\n  ECharts.prototype.setOption = function (option, notMerge, lazyUpdate) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`setOption` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var silent;\n    var replaceMerge;\n    var transitionOpt;\n    if (isObject(notMerge)) {\n      lazyUpdate = notMerge.lazyUpdate;\n      silent = notMerge.silent;\n      replaceMerge = notMerge.replaceMerge;\n      transitionOpt = notMerge.transition;\n      notMerge = notMerge.notMerge;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    if (!this._model || notMerge) {\n      var optionManager = new OptionManager(this._api);\n      var theme = this._theme;\n      var ecModel = this._model = new GlobalModel();\n      ecModel.scheduler = this._scheduler;\n      ecModel.ssr = this._ssr;\n      ecModel.init(null, null, null, theme, this._locale, optionManager);\n    }\n    this._model.setOption(option, {\n      replaceMerge: replaceMerge\n    }, optionPreprocessorFuncs);\n    var updateParams = {\n      seriesTransition: transitionOpt,\n      optionChanged: true\n    };\n    if (lazyUpdate) {\n      this[PENDING_UPDATE] = {\n        silent: silent,\n        updateParams: updateParams\n      };\n      this[IN_MAIN_PROCESS_KEY] = false;\n      // `setOption(option, {lazyMode: true})` may be called when zrender has been slept.\n      // It should wake it up to make sure zrender start to render at the next frame.\n      this.getZr().wakeUp();\n    } else {\n      try {\n        prepare(this);\n        updateMethods.update.call(this, null, updateParams);\n      } catch (e) {\n        this[PENDING_UPDATE] = null;\n        this[IN_MAIN_PROCESS_KEY] = false;\n        throw e;\n      }\n      // Ensure zr refresh sychronously, and then pixel in canvas can be\n      // fetched after `setOption`.\n      if (!this._ssr) {\n        // not use flush when using ssr mode.\n        this._zr.flush();\n      }\n      this[PENDING_UPDATE] = null;\n      this[IN_MAIN_PROCESS_KEY] = false;\n      flushPendingActions.call(this, silent);\n      triggerUpdatedEvent.call(this, silent);\n    }\n  };\n  /**\r\n   * @deprecated\r\n   */\n  ECharts.prototype.setTheme = function () {\n    deprecateLog('ECharts#setTheme() is DEPRECATED in ECharts 3.0');\n  };\n  // We don't want developers to use getModel directly.\n  ECharts.prototype.getModel = function () {\n    return this._model;\n  };\n  ECharts.prototype.getOption = function () {\n    return this._model && this._model.getOption();\n  };\n  ECharts.prototype.getWidth = function () {\n    return this._zr.getWidth();\n  };\n  ECharts.prototype.getHeight = function () {\n    return this._zr.getHeight();\n  };\n  ECharts.prototype.getDevicePixelRatio = function () {\n    return this._zr.painter.dpr\n    /* eslint-disable-next-line */ || env.hasGlobalWindow && window.devicePixelRatio || 1;\n  };\n  /**\r\n   * Get canvas which has all thing rendered\r\n   * @deprecated Use renderToCanvas instead.\r\n   */\n  ECharts.prototype.getRenderedCanvas = function (opts) {\n    if (process.env.NODE_ENV !== 'production') {\n      deprecateReplaceLog('getRenderedCanvas', 'renderToCanvas');\n    }\n    return this.renderToCanvas(opts);\n  };\n  ECharts.prototype.renderToCanvas = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'canvas') {\n        throw new Error('renderToCanvas can only be used in the canvas renderer.');\n      }\n    }\n    return painter.getRenderedCanvas({\n      backgroundColor: opts.backgroundColor || this._model.get('backgroundColor'),\n      pixelRatio: opts.pixelRatio || this.getDevicePixelRatio()\n    });\n  };\n  ECharts.prototype.renderToSVGString = function (opts) {\n    opts = opts || {};\n    var painter = this._zr.painter;\n    if (process.env.NODE_ENV !== 'production') {\n      if (painter.type !== 'svg') {\n        throw new Error('renderToSVGString can only be used in the svg renderer.');\n      }\n    }\n    return painter.renderToString({\n      useViewBox: opts.useViewBox\n    });\n  };\n  /**\r\n   * Get svg data url\r\n   */\n  ECharts.prototype.getSvgDataURL = function () {\n    if (!env.svgSupported) {\n      return;\n    }\n    var zr = this._zr;\n    var list = zr.storage.getDisplayList();\n    // Stop animations\n    each(list, function (el) {\n      el.stopAnimation(null, true);\n    });\n    return zr.painter.toDataURL();\n  };\n  ECharts.prototype.getDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    opts = opts || {};\n    var excludeComponents = opts.excludeComponents;\n    var ecModel = this._model;\n    var excludesComponentViews = [];\n    var self = this;\n    each(excludeComponents, function (componentType) {\n      ecModel.eachComponent({\n        mainType: componentType\n      }, function (component) {\n        var view = self._componentsMap[component.__viewId];\n        if (!view.group.ignore) {\n          excludesComponentViews.push(view);\n          view.group.ignore = true;\n        }\n      });\n    });\n    var url = this._zr.painter.getType() === 'svg' ? this.getSvgDataURL() : this.renderToCanvas(opts).toDataURL('image/' + (opts && opts.type || 'png'));\n    each(excludesComponentViews, function (view) {\n      view.group.ignore = false;\n    });\n    return url;\n  };\n  ECharts.prototype.getConnectedDataURL = function (opts) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var isSvg = opts.type === 'svg';\n    var groupId = this.group;\n    var mathMin = Math.min;\n    var mathMax = Math.max;\n    var MAX_NUMBER = Infinity;\n    if (connectedGroups[groupId]) {\n      var left_1 = MAX_NUMBER;\n      var top_1 = MAX_NUMBER;\n      var right_1 = -MAX_NUMBER;\n      var bottom_1 = -MAX_NUMBER;\n      var canvasList_1 = [];\n      var dpr_1 = opts && opts.pixelRatio || this.getDevicePixelRatio();\n      each(instances, function (chart, id) {\n        if (chart.group === groupId) {\n          var canvas = isSvg ? chart.getZr().painter.getSvgDom().innerHTML : chart.renderToCanvas(clone(opts));\n          var boundingRect = chart.getDom().getBoundingClientRect();\n          left_1 = mathMin(boundingRect.left, left_1);\n          top_1 = mathMin(boundingRect.top, top_1);\n          right_1 = mathMax(boundingRect.right, right_1);\n          bottom_1 = mathMax(boundingRect.bottom, bottom_1);\n          canvasList_1.push({\n            dom: canvas,\n            left: boundingRect.left,\n            top: boundingRect.top\n          });\n        }\n      });\n      left_1 *= dpr_1;\n      top_1 *= dpr_1;\n      right_1 *= dpr_1;\n      bottom_1 *= dpr_1;\n      var width = right_1 - left_1;\n      var height = bottom_1 - top_1;\n      var targetCanvas = platformApi.createCanvas();\n      var zr_1 = zrender.init(targetCanvas, {\n        renderer: isSvg ? 'svg' : 'canvas'\n      });\n      zr_1.resize({\n        width: width,\n        height: height\n      });\n      if (isSvg) {\n        var content_1 = '';\n        each(canvasList_1, function (item) {\n          var x = item.left - left_1;\n          var y = item.top - top_1;\n          content_1 += '<g transform=\"translate(' + x + ',' + y + ')\">' + item.dom + '</g>';\n        });\n        zr_1.painter.getSvgRoot().innerHTML = content_1;\n        if (opts.connectedBackgroundColor) {\n          zr_1.painter.setBackgroundColor(opts.connectedBackgroundColor);\n        }\n        zr_1.refreshImmediately();\n        return zr_1.painter.toDataURL();\n      } else {\n        // Background between the charts\n        if (opts.connectedBackgroundColor) {\n          zr_1.add(new graphic.Rect({\n            shape: {\n              x: 0,\n              y: 0,\n              width: width,\n              height: height\n            },\n            style: {\n              fill: opts.connectedBackgroundColor\n            }\n          }));\n        }\n        each(canvasList_1, function (item) {\n          var img = new graphic.Image({\n            style: {\n              x: item.left * dpr_1 - left_1,\n              y: item.top * dpr_1 - top_1,\n              image: item.dom\n            }\n          });\n          zr_1.add(img);\n        });\n        zr_1.refreshImmediately();\n        return targetCanvas.toDataURL('image/' + (opts && opts.type || 'png'));\n      }\n    } else {\n      return this.getDataURL(opts);\n    }\n  };\n  ECharts.prototype.convertToPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertToPixel', finder, value);\n  };\n  ECharts.prototype.convertFromPixel = function (finder, value) {\n    return doConvertPixel(this, 'convertFromPixel', finder, value);\n  };\n  /**\r\n   * Is the specified coordinate systems or components contain the given pixel point.\r\n   * @param {Array|number} value\r\n   * @return {boolean} result\r\n   */\n  ECharts.prototype.containPixel = function (finder, value) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var ecModel = this._model;\n    var result;\n    var findResult = modelUtil.parseFinder(ecModel, finder);\n    each(findResult, function (models, key) {\n      key.indexOf('Models') >= 0 && each(models, function (model) {\n        var coordSys = model.coordinateSystem;\n        if (coordSys && coordSys.containPoint) {\n          result = result || !!coordSys.containPoint(value);\n        } else if (key === 'seriesModels') {\n          var view = this._chartsMap[model.__viewId];\n          if (view && view.containPoint) {\n            result = result || view.containPoint(value, model);\n          } else {\n            if (process.env.NODE_ENV !== 'production') {\n              warn(key + ': ' + (view ? 'The found component do not support containPoint.' : 'No view mapping to the found component.'));\n            }\n          }\n        } else {\n          if (process.env.NODE_ENV !== 'production') {\n            warn(key + ': containPoint is not supported');\n          }\n        }\n      }, this);\n    }, this);\n    return !!result;\n  };\n  /**\r\n   * Get visual from series or data.\r\n   * @param finder\r\n   *        If string, e.g., 'series', means {seriesIndex: 0}.\r\n   *        If Object, could contain some of these properties below:\r\n   *        {\r\n   *            seriesIndex / seriesId / seriesName,\r\n   *            dataIndex / dataIndexInside\r\n   *        }\r\n   *        If dataIndex is not specified, series visual will be fetched,\r\n   *        but not data item visual.\r\n   *        If all of seriesIndex, seriesId, seriesName are not specified,\r\n   *        visual will be fetched from first series.\r\n   * @param visualType 'color', 'symbol', 'symbolSize'\r\n   */\n  ECharts.prototype.getVisual = function (finder, visualType) {\n    var ecModel = this._model;\n    var parsedFinder = modelUtil.parseFinder(ecModel, finder, {\n      defaultMainType: 'series'\n    });\n    var seriesModel = parsedFinder.seriesModel;\n    if (process.env.NODE_ENV !== 'production') {\n      if (!seriesModel) {\n        warn('There is no specified series model');\n      }\n    }\n    var data = seriesModel.getData();\n    var dataIndexInside = parsedFinder.hasOwnProperty('dataIndexInside') ? parsedFinder.dataIndexInside : parsedFinder.hasOwnProperty('dataIndex') ? data.indexOfRawIndex(parsedFinder.dataIndex) : null;\n    return dataIndexInside != null ? getItemVisualFromData(data, dataIndexInside, visualType) : getVisualFromData(data, visualType);\n  };\n  /**\r\n   * Get view of corresponding component model\r\n   */\n  ECharts.prototype.getViewOfComponentModel = function (componentModel) {\n    return this._componentsMap[componentModel.__viewId];\n  };\n  /**\r\n   * Get view of corresponding series model\r\n   */\n  ECharts.prototype.getViewOfSeriesModel = function (seriesModel) {\n    return this._chartsMap[seriesModel.__viewId];\n  };\n  ECharts.prototype._initEvents = function () {\n    var _this = this;\n    each(MOUSE_EVENT_NAMES, function (eveName) {\n      var handler = function (e) {\n        var ecModel = _this.getModel();\n        var el = e.target;\n        var params;\n        var isGlobalOut = eveName === 'globalout';\n        // no e.target when 'globalout'.\n        if (isGlobalOut) {\n          params = {};\n        } else {\n          el && findEventDispatcher(el, function (parent) {\n            var ecData = getECData(parent);\n            if (ecData && ecData.dataIndex != null) {\n              var dataModel = ecData.dataModel || ecModel.getSeriesByIndex(ecData.seriesIndex);\n              params = dataModel && dataModel.getDataParams(ecData.dataIndex, ecData.dataType, el) || {};\n              return true;\n            }\n            // If element has custom eventData of components\n            else if (ecData.eventData) {\n              params = extend({}, ecData.eventData);\n              return true;\n            }\n          }, true);\n        }\n        // Contract: if params prepared in mouse event,\n        // these properties must be specified:\n        // {\n        //    componentType: string (component main type)\n        //    componentIndex: number\n        // }\n        // Otherwise event query can not work.\n        if (params) {\n          var componentType = params.componentType;\n          var componentIndex = params.componentIndex;\n          // Special handling for historic reason: when trigger by\n          // markLine/markPoint/markArea, the componentType is\n          // 'markLine'/'markPoint'/'markArea', but we should better\n          // enable them to be queried by seriesIndex, since their\n          // option is set in each series.\n          if (componentType === 'markLine' || componentType === 'markPoint' || componentType === 'markArea') {\n            componentType = 'series';\n            componentIndex = params.seriesIndex;\n          }\n          var model = componentType && componentIndex != null && ecModel.getComponent(componentType, componentIndex);\n          var view = model && _this[model.mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId];\n          if (process.env.NODE_ENV !== 'production') {\n            // `event.componentType` and `event[componentTpype + 'Index']` must not\n            // be missed, otherwise there is no way to distinguish source component.\n            // See `dataFormat.getDataParams`.\n            if (!isGlobalOut && !(model && view)) {\n              warn('model or view can not be found by params');\n            }\n          }\n          params.event = e;\n          params.type = eveName;\n          _this._$eventProcessor.eventInfo = {\n            targetEl: el,\n            packedEvent: params,\n            model: model,\n            view: view\n          };\n          _this.trigger(eveName, params);\n        }\n      };\n      // Consider that some component (like tooltip, brush, ...)\n      // register zr event handler, but user event handler might\n      // do anything, such as call `setOption` or `dispatchAction`,\n      // which probably update any of the content and probably\n      // cause problem if it is called previous other inner handlers.\n      handler.zrEventfulCallAtLast = true;\n      _this._zr.on(eveName, handler, _this);\n    });\n    each(eventActionMap, function (actionType, eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    // Extra events\n    // TODO register?\n    each(['selectchanged'], function (eventType) {\n      _this._messageCenter.on(eventType, function (event) {\n        this.trigger(eventType, event);\n      }, _this);\n    });\n    handleLegacySelectEvents(this._messageCenter, this, this._api);\n  };\n  ECharts.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ECharts.prototype.clear = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this.setOption({\n      series: []\n    }, true);\n  };\n  ECharts.prototype.dispose = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._disposed = true;\n    var dom = this.getDom();\n    if (dom) {\n      modelUtil.setAttribute(this.getDom(), DOM_ATTRIBUTE_KEY, '');\n    }\n    var chart = this;\n    var api = chart._api;\n    var ecModel = chart._model;\n    each(chart._componentsViews, function (component) {\n      component.dispose(ecModel, api);\n    });\n    each(chart._chartsViews, function (chart) {\n      chart.dispose(ecModel, api);\n    });\n    // Dispose after all views disposed\n    chart._zr.dispose();\n    // Set properties to null.\n    // To reduce the memory cost in case the top code still holds this instance unexpectedly.\n    chart._dom = chart._model = chart._chartsMap = chart._componentsMap = chart._chartsViews = chart._componentsViews = chart._scheduler = chart._api = chart._zr = chart._throttledZrFlush = chart._theme = chart._coordSysMgr = chart._messageCenter = null;\n    delete instances[chart.id];\n  };\n  /**\r\n   * Resize the chart\r\n   */\n  ECharts.prototype.resize = function (opts) {\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      if (process.env.NODE_ENV !== 'production') {\n        error('`resize` should not be called during main process.');\n      }\n      return;\n    }\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._zr.resize(opts);\n    var ecModel = this._model;\n    // Resize loading effect\n    this._loadingFX && this._loadingFX.resize();\n    if (!ecModel) {\n      return;\n    }\n    var needPrepare = ecModel.resetOption('media');\n    var silent = opts && opts.silent;\n    // There is some real cases that:\n    // chart.setOption(option, { lazyUpdate: true });\n    // chart.resize();\n    if (this[PENDING_UPDATE]) {\n      if (silent == null) {\n        silent = this[PENDING_UPDATE].silent;\n      }\n      needPrepare = true;\n      this[PENDING_UPDATE] = null;\n    }\n    this[IN_MAIN_PROCESS_KEY] = true;\n    try {\n      needPrepare && prepare(this);\n      updateMethods.update.call(this, {\n        type: 'resize',\n        animation: extend({\n          // Disable animation\n          duration: 0\n        }, opts && opts.animation)\n      });\n    } catch (e) {\n      this[IN_MAIN_PROCESS_KEY] = false;\n      throw e;\n    }\n    this[IN_MAIN_PROCESS_KEY] = false;\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.showLoading = function (name, cfg) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (isObject(name)) {\n      cfg = name;\n      name = '';\n    }\n    name = name || 'default';\n    this.hideLoading();\n    if (!loadingEffects[name]) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('Loading effects ' + name + ' not exists.');\n      }\n      return;\n    }\n    var el = loadingEffects[name](this._api, cfg);\n    var zr = this._zr;\n    this._loadingFX = el;\n    zr.add(el);\n  };\n  /**\r\n   * Hide loading effect\r\n   */\n  ECharts.prototype.hideLoading = function () {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    this._loadingFX && this._zr.remove(this._loadingFX);\n    this._loadingFX = null;\n  };\n  ECharts.prototype.makeActionFromEvent = function (eventObj) {\n    var payload = extend({}, eventObj);\n    payload.type = eventActionMap[eventObj.type];\n    return payload;\n  };\n  /**\r\n   * @param opt If pass boolean, means opt.silent\r\n   * @param opt.silent Default `false`. Whether trigger events.\r\n   * @param opt.flush Default `undefined`.\r\n   *        true: Flush immediately, and then pixel in canvas can be fetched\r\n   *            immediately. Caution: it might affect performance.\r\n   *        false: Not flush.\r\n   *        undefined: Auto decide whether perform flush.\r\n   */\n  ECharts.prototype.dispatchAction = function (payload, opt) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    if (!isObject(opt)) {\n      opt = {\n        silent: !!opt\n      };\n    }\n    if (!actions[payload.type]) {\n      return;\n    }\n    // Avoid dispatch action before setOption. Especially in `connect`.\n    if (!this._model) {\n      return;\n    }\n    // May dispatchAction in rendering procedure\n    if (this[IN_MAIN_PROCESS_KEY]) {\n      this._pendingActions.push(payload);\n      return;\n    }\n    var silent = opt.silent;\n    doDispatchAction.call(this, payload, silent);\n    var flush = opt.flush;\n    if (flush) {\n      this._zr.flush();\n    } else if (flush !== false && env.browser.weChat) {\n      // In WeChat embedded browser, `requestAnimationFrame` and `setInterval`\n      // hang when sliding page (on touch event), which cause that zr does not\n      // refresh until user interaction finished, which is not expected.\n      // But `dispatchAction` may be called too frequently when pan on touch\n      // screen, which impacts performance if do not throttle them.\n      this._throttledZrFlush();\n    }\n    flushPendingActions.call(this, silent);\n    triggerUpdatedEvent.call(this, silent);\n  };\n  ECharts.prototype.updateLabelLayout = function () {\n    lifecycle.trigger('series:layoutlabels', this._model, this._api, {\n      // Not adding series labels.\n      // TODO\n      updatedSeries: []\n    });\n  };\n  ECharts.prototype.appendData = function (params) {\n    if (this._disposed) {\n      disposedWarning(this.id);\n      return;\n    }\n    var seriesIndex = params.seriesIndex;\n    var ecModel = this.getModel();\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (process.env.NODE_ENV !== 'production') {\n      assert(params.data && seriesModel);\n    }\n    seriesModel.appendData(params);\n    // Note: `appendData` does not support that update extent of coordinate\n    // system, util some scenario require that. In the expected usage of\n    // `appendData`, the initial extent of coordinate system should better\n    // be fixed by axis `min`/`max` setting or initial data, otherwise if\n    // the extent changed while `appendData`, the location of the painted\n    // graphic elements have to be changed, which make the usage of\n    // `appendData` meaningless.\n    this._scheduler.unfinished = true;\n    this.getZr().wakeUp();\n  };\n  // A work around for no `internal` modifier in ts yet but\n  // need to strictly hide private methods to JS users.\n  ECharts.internalField = function () {\n    prepare = function (ecIns) {\n      var scheduler = ecIns._scheduler;\n      scheduler.restorePipelines(ecIns._model);\n      scheduler.prepareStageTasks();\n      prepareView(ecIns, true);\n      prepareView(ecIns, false);\n      scheduler.plan();\n    };\n    /**\r\n     * Prepare view instances of charts and components\r\n     */\n    prepareView = function (ecIns, isComponent) {\n      var ecModel = ecIns._model;\n      var scheduler = ecIns._scheduler;\n      var viewList = isComponent ? ecIns._componentsViews : ecIns._chartsViews;\n      var viewMap = isComponent ? ecIns._componentsMap : ecIns._chartsMap;\n      var zr = ecIns._zr;\n      var api = ecIns._api;\n      for (var i = 0; i < viewList.length; i++) {\n        viewList[i].__alive = false;\n      }\n      isComponent ? ecModel.eachComponent(function (componentType, model) {\n        componentType !== 'series' && doPrepare(model);\n      }) : ecModel.eachSeries(doPrepare);\n      function doPrepare(model) {\n        // By default view will be reused if possible for the case that `setOption` with \"notMerge\"\n        // mode and need to enable transition animation. (Usually, when they have the same id, or\n        // especially no id but have the same type & name & index. See the `model.id` generation\n        // rule in `makeIdAndName` and `viewId` generation rule here).\n        // But in `replaceMerge` mode, this feature should be able to disabled when it is clear that\n        // the new model has nothing to do with the old model.\n        var requireNewView = model.__requireNewView;\n        // This command should not work twice.\n        model.__requireNewView = false;\n        // Consider: id same and type changed.\n        var viewId = '_ec_' + model.id + '_' + model.type;\n        var view = !requireNewView && viewMap[viewId];\n        if (!view) {\n          var classType = parseClassType(model.type);\n          var Clazz = isComponent ? ComponentView.getClass(classType.main, classType.sub) :\n          // FIXME:TS\n          // (ChartView as ChartViewConstructor).getClass('series', classType.sub)\n          // For backward compat, still support a chart type declared as only subType\n          // like \"liquidfill\", but recommend \"series.liquidfill\"\n          // But need a base class to make a type series.\n          ChartView.getClass(classType.sub);\n          if (process.env.NODE_ENV !== 'production') {\n            assert(Clazz, classType.sub + ' does not exist.');\n          }\n          view = new Clazz();\n          view.init(ecModel, api);\n          viewMap[viewId] = view;\n          viewList.push(view);\n          zr.add(view.group);\n        }\n        model.__viewId = view.__id = viewId;\n        view.__alive = true;\n        view.__model = model;\n        view.group.__ecComponentInfo = {\n          mainType: model.mainType,\n          index: model.componentIndex\n        };\n        !isComponent && scheduler.prepareView(view, model, ecModel, api);\n      }\n      for (var i = 0; i < viewList.length;) {\n        var view = viewList[i];\n        if (!view.__alive) {\n          !isComponent && view.renderTask.dispose();\n          zr.remove(view.group);\n          view.dispose(ecModel, api);\n          viewList.splice(i, 1);\n          if (viewMap[view.__id] === view) {\n            delete viewMap[view.__id];\n          }\n          view.__id = view.group.__ecComponentInfo = null;\n        } else {\n          i++;\n        }\n      }\n    };\n    updateDirectly = function (ecIns, method, payload, mainType, subType) {\n      var ecModel = ecIns._model;\n      ecModel.setUpdatePayload(payload);\n      // broadcast\n      if (!mainType) {\n        // FIXME\n        // Chart will not be update directly here, except set dirty.\n        // But there is no such scenario now.\n        each([].concat(ecIns._componentsViews).concat(ecIns._chartsViews), callView);\n        return;\n      }\n      var query = {};\n      query[mainType + 'Id'] = payload[mainType + 'Id'];\n      query[mainType + 'Index'] = payload[mainType + 'Index'];\n      query[mainType + 'Name'] = payload[mainType + 'Name'];\n      var condition = {\n        mainType: mainType,\n        query: query\n      };\n      subType && (condition.subType = subType); // subType may be '' by parseClassType;\n      var excludeSeriesId = payload.excludeSeriesId;\n      var excludeSeriesIdMap;\n      if (excludeSeriesId != null) {\n        excludeSeriesIdMap = createHashMap();\n        each(modelUtil.normalizeToArray(excludeSeriesId), function (id) {\n          var modelId = modelUtil.convertOptionIdName(id, null);\n          if (modelId != null) {\n            excludeSeriesIdMap.set(modelId, true);\n          }\n        });\n      }\n      // If dispatchAction before setOption, do nothing.\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        if (isHighDownPayload(payload)) {\n          if (model instanceof SeriesModel) {\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && !payload.notBlur && !model.get(['emphasis', 'disabled'])) {\n              blurSeriesFromHighlightPayload(model, payload, ecIns._api);\n            }\n          } else {\n            var _a = findComponentHighDownDispatchers(model.mainType, model.componentIndex, payload.name, ecIns._api),\n              focusSelf = _a.focusSelf,\n              dispatchers = _a.dispatchers;\n            if (payload.type === HIGHLIGHT_ACTION_TYPE && focusSelf && !payload.notBlur) {\n              blurComponent(model.mainType, model.componentIndex, ecIns._api);\n            }\n            // PENDING:\n            // Whether to put this \"enter emphasis\" code in `ComponentView`,\n            // which will be the same as `ChartView` but might be not necessary\n            // and will be far from this logic.\n            if (dispatchers) {\n              each(dispatchers, function (dispatcher) {\n                payload.type === HIGHLIGHT_ACTION_TYPE ? enterEmphasis(dispatcher) : leaveEmphasis(dispatcher);\n              });\n            }\n          }\n        } else if (isSelectChangePayload(payload)) {\n          // TODO geo\n          if (model instanceof SeriesModel) {\n            toggleSelectionFromPayload(model, payload, ecIns._api);\n            updateSeriesElementSelection(model);\n            markStatusToUpdate(ecIns);\n          }\n        }\n      }, ecIns);\n      ecModel && ecModel.eachComponent(condition, function (model) {\n        var isExcluded = excludeSeriesIdMap && excludeSeriesIdMap.get(model.id) != null;\n        if (isExcluded) {\n          return;\n        }\n        ;\n        callView(ecIns[mainType === 'series' ? '_chartsMap' : '_componentsMap'][model.__viewId]);\n      }, ecIns);\n      function callView(view) {\n        view && view.__alive && view[method] && view[method](view.__model, ecModel, ecIns._api, payload);\n      }\n    };\n    updateMethods = {\n      prepareAndUpdate: function (payload) {\n        prepare(this);\n        updateMethods.update.call(this, payload, {\n          // Needs to mark option changed if newOption is given.\n          // It's from MagicType.\n          // TODO If use a separate flag optionChanged in payload?\n          optionChanged: payload.newOption != null\n        });\n      },\n      update: function (payload, updateParams) {\n        var ecModel = this._model;\n        var api = this._api;\n        var zr = this._zr;\n        var coordSysMgr = this._coordSysMgr;\n        var scheduler = this._scheduler;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        scheduler.restoreData(ecModel, payload);\n        scheduler.performSeriesTasks(ecModel);\n        // TODO\n        // Save total ecModel here for undo/redo (after restoring data and before processing data).\n        // Undo (restoration of total ecModel) can be carried out in 'action' or outside API call.\n        // Create new coordinate system each update\n        // In LineView may save the old coordinate system and use it to get the original point.\n        coordSysMgr.create(ecModel, api);\n        scheduler.performDataProcessorTasks(ecModel, payload);\n        // Current stream render is not supported in data process. So we can update\n        // stream modes after data processing, where the filtered data is used to\n        // determine whether to use progressive rendering.\n        updateStreamModes(this, ecModel);\n        // We update stream modes before coordinate system updated, then the modes info\n        // can be fetched when coord sys updating (consider the barGrid extent fix). But\n        // the drawback is the full coord info can not be fetched. Fortunately this full\n        // coord is not required in stream mode updater currently.\n        coordSysMgr.update(ecModel, api);\n        clearColorPalette(ecModel);\n        scheduler.performVisualTasks(ecModel, payload);\n        render(this, ecModel, api, payload, updateParams);\n        // Set background\n        var backgroundColor = ecModel.get('backgroundColor') || 'transparent';\n        var darkMode = ecModel.get('darkMode');\n        zr.setBackgroundColor(backgroundColor);\n        // Force set dark mode.\n        if (darkMode != null && darkMode !== 'auto') {\n          zr.setDarkMode(darkMode);\n        }\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateTransform: function (payload) {\n        var _this = this;\n        var ecModel = this._model;\n        var api = this._api;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // ChartView.markUpdateMethod(payload, 'updateTransform');\n        var componentDirtyList = [];\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType === 'series') {\n            return;\n          }\n          var componentView = _this.getViewOfComponentModel(componentModel);\n          if (componentView && componentView.__alive) {\n            if (componentView.updateTransform) {\n              var result = componentView.updateTransform(componentModel, ecModel, api, payload);\n              result && result.update && componentDirtyList.push(componentView);\n            } else {\n              componentDirtyList.push(componentView);\n            }\n          }\n        });\n        var seriesDirtyMap = createHashMap();\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          if (chartView.updateTransform) {\n            var result = chartView.updateTransform(seriesModel, ecModel, api, payload);\n            result && result.update && seriesDirtyMap.set(seriesModel.uid, 1);\n          } else {\n            seriesDirtyMap.set(seriesModel.uid, 1);\n          }\n        });\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        // this._scheduler.performVisualTasks(ecModel, payload, 'layout', true);\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true,\n          dirtyMap: seriesDirtyMap\n        });\n        // Currently, not call render of components. Geo render cost a lot.\n        // renderComponents(ecIns, ecModel, api, payload, componentDirtyList);\n        renderSeries(this, ecModel, api, payload, {}, seriesDirtyMap);\n        lifecycle.trigger('afterupdate', ecModel, api);\n      },\n      updateView: function (payload) {\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        ChartView.markUpdateMethod(payload, 'updateView');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          setDirty: true\n        });\n        render(this, ecModel, this._api, payload, {});\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateVisual: function (payload) {\n        // updateMethods.update.call(this, payload);\n        var _this = this;\n        var ecModel = this._model;\n        // update before setOption\n        if (!ecModel) {\n          return;\n        }\n        ecModel.setUpdatePayload(payload);\n        // clear all visual\n        ecModel.eachSeries(function (seriesModel) {\n          seriesModel.getData().clearAllVisual();\n        });\n        // Perform visual\n        ChartView.markUpdateMethod(payload, 'updateVisual');\n        clearColorPalette(ecModel);\n        // Keep pipe to the exist pipeline because it depends on the render task of the full pipeline.\n        this._scheduler.performVisualTasks(ecModel, payload, {\n          visualType: 'visual',\n          setDirty: true\n        });\n        ecModel.eachComponent(function (componentType, componentModel) {\n          if (componentType !== 'series') {\n            var componentView = _this.getViewOfComponentModel(componentModel);\n            componentView && componentView.__alive && componentView.updateVisual(componentModel, ecModel, _this._api, payload);\n          }\n        });\n        ecModel.eachSeries(function (seriesModel) {\n          var chartView = _this._chartsMap[seriesModel.__viewId];\n          chartView.updateVisual(seriesModel, ecModel, _this._api, payload);\n        });\n        lifecycle.trigger('afterupdate', ecModel, this._api);\n      },\n      updateLayout: function (payload) {\n        updateMethods.update.call(this, payload);\n      }\n    };\n    doConvertPixel = function (ecIns, methodName, finder, value) {\n      if (ecIns._disposed) {\n        disposedWarning(ecIns.id);\n        return;\n      }\n      var ecModel = ecIns._model;\n      var coordSysList = ecIns._coordSysMgr.getCoordinateSystems();\n      var result;\n      var parsedFinder = modelUtil.parseFinder(ecModel, finder);\n      for (var i = 0; i < coordSysList.length; i++) {\n        var coordSys = coordSysList[i];\n        if (coordSys[methodName] && (result = coordSys[methodName](ecModel, parsedFinder, value)) != null) {\n          return result;\n        }\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        warn('No coordinate system that supports ' + methodName + ' found by the given finder.');\n      }\n    };\n    updateStreamModes = function (ecIns, ecModel) {\n      var chartsMap = ecIns._chartsMap;\n      var scheduler = ecIns._scheduler;\n      ecModel.eachSeries(function (seriesModel) {\n        scheduler.updateStreamModes(seriesModel, chartsMap[seriesModel.__viewId]);\n      });\n    };\n    doDispatchAction = function (payload, silent) {\n      var _this = this;\n      var ecModel = this.getModel();\n      var payloadType = payload.type;\n      var escapeConnect = payload.escapeConnect;\n      var actionWrap = actions[payloadType];\n      var actionInfo = actionWrap.actionInfo;\n      var cptTypeTmp = (actionInfo.update || 'update').split(':');\n      var updateMethod = cptTypeTmp.pop();\n      var cptType = cptTypeTmp[0] != null && parseClassType(cptTypeTmp[0]);\n      this[IN_MAIN_PROCESS_KEY] = true;\n      var payloads = [payload];\n      var batched = false;\n      // Batch action\n      if (payload.batch) {\n        batched = true;\n        payloads = map(payload.batch, function (item) {\n          item = defaults(extend({}, item), payload);\n          item.batch = null;\n          return item;\n        });\n      }\n      var eventObjBatch = [];\n      var eventObj;\n      var isSelectChange = isSelectChangePayload(payload);\n      var isHighDown = isHighDownPayload(payload);\n      // Only leave blur once if there are multiple batches.\n      if (isHighDown) {\n        allLeaveBlur(this._api);\n      }\n      each(payloads, function (batchItem) {\n        // Action can specify the event by return it.\n        eventObj = actionWrap.action(batchItem, _this._model, _this._api);\n        // Emit event outside\n        eventObj = eventObj || extend({}, batchItem);\n        // Convert type to eventType\n        eventObj.type = actionInfo.event || eventObj.type;\n        eventObjBatch.push(eventObj);\n        // light update does not perform data process, layout and visual.\n        if (isHighDown) {\n          var _a = modelUtil.preParseFinder(payload),\n            queryOptionMap = _a.queryOptionMap,\n            mainTypeSpecified = _a.mainTypeSpecified;\n          var componentMainType = mainTypeSpecified ? queryOptionMap.keys()[0] : 'series';\n          updateDirectly(_this, updateMethod, batchItem, componentMainType);\n          markStatusToUpdate(_this);\n        } else if (isSelectChange) {\n          // At present `dispatchAction({ type: 'select', ... })` is not supported on components.\n          // geo still use 'geoselect'.\n          updateDirectly(_this, updateMethod, batchItem, 'series');\n          markStatusToUpdate(_this);\n        } else if (cptType) {\n          updateDirectly(_this, updateMethod, batchItem, cptType.main, cptType.sub);\n        }\n      });\n      if (updateMethod !== 'none' && !isHighDown && !isSelectChange && !cptType) {\n        try {\n          // Still dirty\n          if (this[PENDING_UPDATE]) {\n            prepare(this);\n            updateMethods.update.call(this, payload);\n            this[PENDING_UPDATE] = null;\n          } else {\n            updateMethods[updateMethod].call(this, payload);\n          }\n        } catch (e) {\n          this[IN_MAIN_PROCESS_KEY] = false;\n          throw e;\n        }\n      }\n      // Follow the rule of action batch\n      if (batched) {\n        eventObj = {\n          type: actionInfo.event || payloadType,\n          escapeConnect: escapeConnect,\n          batch: eventObjBatch\n        };\n      } else {\n        eventObj = eventObjBatch[0];\n      }\n      this[IN_MAIN_PROCESS_KEY] = false;\n      if (!silent) {\n        var messageCenter = this._messageCenter;\n        messageCenter.trigger(eventObj.type, eventObj);\n        // Extra triggered 'selectchanged' event\n        if (isSelectChange) {\n          var newObj = {\n            type: 'selectchanged',\n            escapeConnect: escapeConnect,\n            selected: getAllSelectedIndices(ecModel),\n            isFromClick: payload.isFromClick || false,\n            fromAction: payload.type,\n            fromActionPayload: payload\n          };\n          messageCenter.trigger(newObj.type, newObj);\n        }\n      }\n    };\n    flushPendingActions = function (silent) {\n      var pendingActions = this._pendingActions;\n      while (pendingActions.length) {\n        var payload = pendingActions.shift();\n        doDispatchAction.call(this, payload, silent);\n      }\n    };\n    triggerUpdatedEvent = function (silent) {\n      !silent && this.trigger('updated');\n    };\n    /**\r\n     * Event `rendered` is triggered when zr\r\n     * rendered. It is useful for realtime\r\n     * snapshot (reflect animation).\r\n     *\r\n     * Event `finished` is triggered when:\r\n     * (1) zrender rendering finished.\r\n     * (2) initial animation finished.\r\n     * (3) progressive rendering finished.\r\n     * (4) no pending action.\r\n     * (5) no delayed setOption needs to be processed.\r\n     */\n    bindRenderedEvent = function (zr, ecIns) {\n      zr.on('rendered', function (params) {\n        ecIns.trigger('rendered', params);\n        // The `finished` event should not be triggered repeatedly,\n        // so it should only be triggered when rendering indeed happens\n        // in zrender. (Consider the case that dipatchAction is keep\n        // triggering when mouse move).\n        if (\n        // Although zr is dirty if initial animation is not finished\n        // and this checking is called on frame, we also check\n        // animation finished for robustness.\n        zr.animation.isFinished() && !ecIns[PENDING_UPDATE] && !ecIns._scheduler.unfinished && !ecIns._pendingActions.length) {\n          ecIns.trigger('finished');\n        }\n      });\n    };\n    bindMouseEvent = function (zr, ecIns) {\n      zr.on('mouseover', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOverForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('mouseout', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, isHighDownDispatcher);\n        if (dispatcher) {\n          handleGlobalMouseOutForHighDown(dispatcher, e, ecIns._api);\n          markStatusToUpdate(ecIns);\n        }\n      }).on('click', function (e) {\n        var el = e.target;\n        var dispatcher = findEventDispatcher(el, function (target) {\n          return getECData(target).dataIndex != null;\n        }, true);\n        if (dispatcher) {\n          var actionType = dispatcher.selected ? 'unselect' : 'select';\n          var ecData = getECData(dispatcher);\n          ecIns._api.dispatchAction({\n            type: actionType,\n            dataType: ecData.dataType,\n            dataIndexInside: ecData.dataIndex,\n            seriesIndex: ecData.seriesIndex,\n            isFromClick: true\n          });\n        }\n      });\n    };\n    function clearColorPalette(ecModel) {\n      ecModel.clearColorPalette();\n      ecModel.eachSeries(function (seriesModel) {\n        seriesModel.clearColorPalette();\n      });\n    }\n    ;\n    // Allocate zlevels for series and components\n    function allocateZlevels(ecModel) {\n      ;\n      var componentZLevels = [];\n      var seriesZLevels = [];\n      var hasSeparateZLevel = false;\n      ecModel.eachComponent(function (componentType, componentModel) {\n        var zlevel = componentModel.get('zlevel') || 0;\n        var z = componentModel.get('z') || 0;\n        var zlevelKey = componentModel.getZLevelKey();\n        hasSeparateZLevel = hasSeparateZLevel || !!zlevelKey;\n        (componentType === 'series' ? seriesZLevels : componentZLevels).push({\n          zlevel: zlevel,\n          z: z,\n          idx: componentModel.componentIndex,\n          type: componentType,\n          key: zlevelKey\n        });\n      });\n      if (hasSeparateZLevel) {\n        // Series after component\n        var zLevels = componentZLevels.concat(seriesZLevels);\n        var lastSeriesZLevel_1;\n        var lastSeriesKey_1;\n        timsort(zLevels, function (a, b) {\n          if (a.zlevel === b.zlevel) {\n            return a.z - b.z;\n          }\n          return a.zlevel - b.zlevel;\n        });\n        each(zLevels, function (item) {\n          var componentModel = ecModel.getComponent(item.type, item.idx);\n          var zlevel = item.zlevel;\n          var key = item.key;\n          if (lastSeriesZLevel_1 != null) {\n            zlevel = Math.max(lastSeriesZLevel_1, zlevel);\n          }\n          if (key) {\n            if (zlevel === lastSeriesZLevel_1 && key !== lastSeriesKey_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = key;\n          } else if (lastSeriesKey_1) {\n            if (zlevel === lastSeriesZLevel_1) {\n              zlevel++;\n            }\n            lastSeriesKey_1 = '';\n          }\n          lastSeriesZLevel_1 = zlevel;\n          componentModel.setZLevel(zlevel);\n        });\n      }\n    }\n    render = function (ecIns, ecModel, api, payload, updateParams) {\n      allocateZlevels(ecModel);\n      renderComponents(ecIns, ecModel, api, payload, updateParams);\n      each(ecIns._chartsViews, function (chart) {\n        chart.__alive = false;\n      });\n      renderSeries(ecIns, ecModel, api, payload, updateParams);\n      // Remove groups of unrendered charts\n      each(ecIns._chartsViews, function (chart) {\n        if (!chart.__alive) {\n          chart.remove(ecModel, api);\n        }\n      });\n    };\n    renderComponents = function (ecIns, ecModel, api, payload, updateParams, dirtyList) {\n      each(dirtyList || ecIns._componentsViews, function (componentView) {\n        var componentModel = componentView.__model;\n        clearStates(componentModel, componentView);\n        componentView.render(componentModel, ecModel, api, payload);\n        updateZ(componentModel, componentView);\n        updateStates(componentModel, componentView);\n      });\n    };\n    /**\r\n     * Render each chart and component\r\n     */\n    renderSeries = function (ecIns, ecModel, api, payload, updateParams, dirtyMap) {\n      // Render all charts\n      var scheduler = ecIns._scheduler;\n      updateParams = extend(updateParams || {}, {\n        updatedSeries: ecModel.getSeries()\n      });\n      // TODO progressive?\n      lifecycle.trigger('series:beforeupdate', ecModel, api, updateParams);\n      var unfinished = false;\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        chartView.__alive = true;\n        var renderTask = chartView.renderTask;\n        scheduler.updatePayload(renderTask, payload);\n        // TODO states on marker.\n        clearStates(seriesModel, chartView);\n        if (dirtyMap && dirtyMap.get(seriesModel.uid)) {\n          renderTask.dirty();\n        }\n        if (renderTask.perform(scheduler.getPerformArgs(renderTask))) {\n          unfinished = true;\n        }\n        chartView.group.silent = !!seriesModel.get('silent');\n        // Should not call markRedraw on group, because it will disable zrender\n        // incremental render (always render from the __startIndex each frame)\n        // chartView.group.markRedraw();\n        updateBlend(seriesModel, chartView);\n        updateSeriesElementSelection(seriesModel);\n      });\n      scheduler.unfinished = unfinished || scheduler.unfinished;\n      lifecycle.trigger('series:layoutlabels', ecModel, api, updateParams);\n      // transition after label is layouted.\n      lifecycle.trigger('series:transition', ecModel, api, updateParams);\n      ecModel.eachSeries(function (seriesModel) {\n        var chartView = ecIns._chartsMap[seriesModel.__viewId];\n        // Update Z after labels updated. Before applying states.\n        updateZ(seriesModel, chartView);\n        // NOTE: Update states after label is updated.\n        // label should be in normal status when layouting.\n        updateStates(seriesModel, chartView);\n      });\n      // If use hover layer\n      updateHoverLayerStatus(ecIns, ecModel);\n      lifecycle.trigger('series:afterupdate', ecModel, api, updateParams);\n    };\n    markStatusToUpdate = function (ecIns) {\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = true;\n      // Wake up zrender if it's sleep. Let it update states in the next frame.\n      ecIns.getZr().wakeUp();\n    };\n    applyChangedStates = function (ecIns) {\n      if (!ecIns[STATUS_NEEDS_UPDATE_KEY]) {\n        return;\n      }\n      ecIns.getZr().storage.traverse(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        applyElementStates(el);\n      });\n      ecIns[STATUS_NEEDS_UPDATE_KEY] = false;\n    };\n    function applyElementStates(el) {\n      var newStates = [];\n      var oldStates = el.currentStates;\n      // Keep other states.\n      for (var i = 0; i < oldStates.length; i++) {\n        var stateName = oldStates[i];\n        if (!(stateName === 'emphasis' || stateName === 'blur' || stateName === 'select')) {\n          newStates.push(stateName);\n        }\n      }\n      // Only use states when it's exists.\n      if (el.selected && el.states.select) {\n        newStates.push('select');\n      }\n      if (el.hoverState === HOVER_STATE_EMPHASIS && el.states.emphasis) {\n        newStates.push('emphasis');\n      } else if (el.hoverState === HOVER_STATE_BLUR && el.states.blur) {\n        newStates.push('blur');\n      }\n      el.useStates(newStates);\n    }\n    function updateHoverLayerStatus(ecIns, ecModel) {\n      var zr = ecIns._zr;\n      var storage = zr.storage;\n      var elCount = 0;\n      storage.traverse(function (el) {\n        if (!el.isGroup) {\n          elCount++;\n        }\n      });\n      if (elCount > ecModel.get('hoverLayerThreshold') && !env.node && !env.worker) {\n        ecModel.eachSeries(function (seriesModel) {\n          if (seriesModel.preventUsingHoverLayer) {\n            return;\n          }\n          var chartView = ecIns._chartsMap[seriesModel.__viewId];\n          if (chartView.__alive) {\n            chartView.eachRendered(function (el) {\n              if (el.states.emphasis) {\n                el.states.emphasis.hoverLayer = true;\n              }\n            });\n          }\n        });\n      }\n    }\n    ;\n    /**\r\n     * Update chart and blend.\r\n     */\n    function updateBlend(seriesModel, chartView) {\n      var blendMode = seriesModel.get('blendMode') || null;\n      chartView.eachRendered(function (el) {\n        // FIXME marker and other components\n        if (!el.isGroup) {\n          // DON'T mark the element dirty. In case element is incremental and don't want to rerender.\n          el.style.blend = blendMode;\n        }\n      });\n    }\n    ;\n    function updateZ(model, view) {\n      if (model.preventAutoZ) {\n        return;\n      }\n      var z = model.get('z') || 0;\n      var zlevel = model.get('zlevel') || 0;\n      // Set z and zlevel\n      view.eachRendered(function (el) {\n        doUpdateZ(el, z, zlevel, -Infinity);\n        // Don't traverse the children because it has been traversed in _updateZ.\n        return true;\n      });\n    }\n    ;\n    function doUpdateZ(el, z, zlevel, maxZ2) {\n      // Group may also have textContent\n      var label = el.getTextContent();\n      var labelLine = el.getTextGuideLine();\n      var isGroup = el.isGroup;\n      if (isGroup) {\n        // set z & zlevel of children elements of Group\n        var children = el.childrenRef();\n        for (var i = 0; i < children.length; i++) {\n          maxZ2 = Math.max(doUpdateZ(children[i], z, zlevel, maxZ2), maxZ2);\n        }\n      } else {\n        // not Group\n        el.z = z;\n        el.zlevel = zlevel;\n        maxZ2 = Math.max(el.z2, maxZ2);\n      }\n      // always set z and zlevel if label/labelLine exists\n      if (label) {\n        label.z = z;\n        label.zlevel = zlevel;\n        // lift z2 of text content\n        // TODO if el.emphasis.z2 is spcefied, what about textContent.\n        isFinite(maxZ2) && (label.z2 = maxZ2 + 2);\n      }\n      if (labelLine) {\n        var textGuideLineConfig = el.textGuideLineConfig;\n        labelLine.z = z;\n        labelLine.zlevel = zlevel;\n        isFinite(maxZ2) && (labelLine.z2 = maxZ2 + (textGuideLineConfig && textGuideLineConfig.showAbove ? 1 : -1));\n      }\n      return maxZ2;\n    }\n    // Clear states without animation.\n    // TODO States on component.\n    function clearStates(model, view) {\n      view.eachRendered(function (el) {\n        // Not applied on removed elements, it may still in fading.\n        if (graphic.isElementRemoved(el)) {\n          return;\n        }\n        var textContent = el.getTextContent();\n        var textGuide = el.getTextGuideLine();\n        if (el.stateTransition) {\n          el.stateTransition = null;\n        }\n        if (textContent && textContent.stateTransition) {\n          textContent.stateTransition = null;\n        }\n        if (textGuide && textGuide.stateTransition) {\n          textGuide.stateTransition = null;\n        }\n        // TODO If el is incremental.\n        if (el.hasState()) {\n          el.prevStates = el.currentStates;\n          el.clearStates();\n        } else if (el.prevStates) {\n          el.prevStates = null;\n        }\n      });\n    }\n    function updateStates(model, view) {\n      var stateAnimationModel = model.getModel('stateAnimation');\n      var enableAnimation = model.isAnimationEnabled();\n      var duration = stateAnimationModel.get('duration');\n      var stateTransition = duration > 0 ? {\n        duration: duration,\n        delay: stateAnimationModel.get('delay'),\n        easing: stateAnimationModel.get('easing')\n        // additive: stateAnimationModel.get('additive')\n      } : null;\n      view.eachRendered(function (el) {\n        if (el.states && el.states.emphasis) {\n          // Not applied on removed elements, it may still in fading.\n          if (graphic.isElementRemoved(el)) {\n            return;\n          }\n          if (el instanceof graphic.Path) {\n            savePathStates(el);\n          }\n          // Only updated on changed element. In case element is incremental and don't want to rerender.\n          // TODO, a more proper way?\n          if (el.__dirty) {\n            var prevStates = el.prevStates;\n            // Restore states without animation\n            if (prevStates) {\n              el.useStates(prevStates);\n            }\n          }\n          // Update state transition and enable animation again.\n          if (enableAnimation) {\n            el.stateTransition = stateTransition;\n            var textContent = el.getTextContent();\n            var textGuide = el.getTextGuideLine();\n            // TODO Is it necessary to animate label?\n            if (textContent) {\n              textContent.stateTransition = stateTransition;\n            }\n            if (textGuide) {\n              textGuide.stateTransition = stateTransition;\n            }\n          }\n          // Use highlighted and selected flag to toggle states.\n          if (el.__dirty) {\n            applyElementStates(el);\n          }\n        }\n      });\n    }\n    ;\n    createExtensionAPI = function (ecIns) {\n      return new (/** @class */function (_super) {\n        __extends(class_1, _super);\n        function class_1() {\n          return _super !== null && _super.apply(this, arguments) || this;\n        }\n        class_1.prototype.getCoordinateSystems = function () {\n          return ecIns._coordSysMgr.getCoordinateSystems();\n        };\n        class_1.prototype.getComponentByElement = function (el) {\n          while (el) {\n            var modelInfo = el.__ecComponentInfo;\n            if (modelInfo != null) {\n              return ecIns._model.getComponent(modelInfo.mainType, modelInfo.index);\n            }\n            el = el.parent;\n          }\n        };\n        class_1.prototype.enterEmphasis = function (el, highlightDigit) {\n          enterEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveEmphasis = function (el, highlightDigit) {\n          leaveEmphasis(el, highlightDigit);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterBlur = function (el) {\n          enterBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveBlur = function (el) {\n          leaveBlur(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.enterSelect = function (el) {\n          enterSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.leaveSelect = function (el) {\n          leaveSelect(el);\n          markStatusToUpdate(ecIns);\n        };\n        class_1.prototype.getModel = function () {\n          return ecIns.getModel();\n        };\n        class_1.prototype.getViewOfComponentModel = function (componentModel) {\n          return ecIns.getViewOfComponentModel(componentModel);\n        };\n        class_1.prototype.getViewOfSeriesModel = function (seriesModel) {\n          return ecIns.getViewOfSeriesModel(seriesModel);\n        };\n        return class_1;\n      }(ExtensionAPI))(ecIns);\n    };\n    enableConnect = function (chart) {\n      function updateConnectedChartsStatus(charts, status) {\n        for (var i = 0; i < charts.length; i++) {\n          var otherChart = charts[i];\n          otherChart[CONNECT_STATUS_KEY] = status;\n        }\n      }\n      each(eventActionMap, function (actionType, eventType) {\n        chart._messageCenter.on(eventType, function (event) {\n          if (connectedGroups[chart.group] && chart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_PENDING) {\n            if (event && event.escapeConnect) {\n              return;\n            }\n            var action_1 = chart.makeActionFromEvent(event);\n            var otherCharts_1 = [];\n            each(instances, function (otherChart) {\n              if (otherChart !== chart && otherChart.group === chart.group) {\n                otherCharts_1.push(otherChart);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_PENDING);\n            each(otherCharts_1, function (otherChart) {\n              if (otherChart[CONNECT_STATUS_KEY] !== CONNECT_STATUS_UPDATING) {\n                otherChart.dispatchAction(action_1);\n              }\n            });\n            updateConnectedChartsStatus(otherCharts_1, CONNECT_STATUS_UPDATED);\n          }\n        });\n      });\n    };\n  }();\n  return ECharts;\n}(Eventful);\nvar echartsProto = ECharts.prototype;\nechartsProto.on = createRegisterEventWithLowercaseECharts('on');\nechartsProto.off = createRegisterEventWithLowercaseECharts('off');\n/**\r\n * @deprecated\r\n */\n// @ts-ignore\nechartsProto.one = function (eventName, cb, ctx) {\n  var self = this;\n  deprecateLog('ECharts#one is deprecated.');\n  function wrapped() {\n    var args2 = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args2[_i] = arguments[_i];\n    }\n    cb && cb.apply && cb.apply(this, args2);\n    // @ts-ignore\n    self.off(eventName, wrapped);\n  }\n  ;\n  // @ts-ignore\n  this.on.call(this, eventName, wrapped, ctx);\n};\nvar MOUSE_EVENT_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove', 'mousedown', 'mouseup', 'globalout', 'contextmenu'];\nfunction disposedWarning(id) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('Instance ' + id + ' has been disposed');\n  }\n}\nvar actions = {};\n/**\r\n * Map eventType to actionType\r\n */\nvar eventActionMap = {};\nvar dataProcessorFuncs = [];\nvar optionPreprocessorFuncs = [];\nvar visualFuncs = [];\nvar themeStorage = {};\nvar loadingEffects = {};\nvar instances = {};\nvar connectedGroups = {};\nvar idBase = +new Date() - 0;\nvar groupIdBase = +new Date() - 0;\nvar DOM_ATTRIBUTE_KEY = '_echarts_instance_';\n/**\r\n * @param opts.devicePixelRatio Use window.devicePixelRatio by default\r\n * @param opts.renderer Can choose 'canvas' or 'svg' to render the chart.\r\n * @param opts.width Use clientWidth of the input `dom` by default.\r\n *        Can be 'auto' (the same as null/undefined)\r\n * @param opts.height Use clientHeight of the input `dom` by default.\r\n *        Can be 'auto' (the same as null/undefined)\r\n * @param opts.locale Specify the locale.\r\n * @param opts.useDirtyRect Enable dirty rectangle rendering or not.\r\n */\nexport function init(dom, theme, opts) {\n  var isClient = !(opts && opts.ssr);\n  if (isClient) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!dom) {\n        throw new Error('Initialize failed: invalid dom.');\n      }\n    }\n    var existInstance = getInstanceByDom(dom);\n    if (existInstance) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('There is a chart instance already initialized on the dom.');\n      }\n      return existInstance;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      if (isDom(dom) && dom.nodeName.toUpperCase() !== 'CANVAS' && (!dom.clientWidth && (!opts || opts.width == null) || !dom.clientHeight && (!opts || opts.height == null))) {\n        warn('Can\\'t get DOM width or height. Please check ' + 'dom.clientWidth and dom.clientHeight. They should not be 0.' + 'For example, you may need to call this in the callback ' + 'of window.onload.');\n      }\n    }\n  }\n  var chart = new ECharts(dom, theme, opts);\n  chart.id = 'ec_' + idBase++;\n  instances[chart.id] = chart;\n  isClient && modelUtil.setAttribute(dom, DOM_ATTRIBUTE_KEY, chart.id);\n  enableConnect(chart);\n  lifecycle.trigger('afterinit', chart);\n  return chart;\n}\n/**\r\n * @usage\r\n * (A)\r\n * ```js\r\n * let chart1 = echarts.init(dom1);\r\n * let chart2 = echarts.init(dom2);\r\n * chart1.group = 'xxx';\r\n * chart2.group = 'xxx';\r\n * echarts.connect('xxx');\r\n * ```\r\n * (B)\r\n * ```js\r\n * let chart1 = echarts.init(dom1);\r\n * let chart2 = echarts.init(dom2);\r\n * echarts.connect('xxx', [chart1, chart2]);\r\n * ```\r\n */\nexport function connect(groupId) {\n  // Is array of charts\n  if (isArray(groupId)) {\n    var charts = groupId;\n    groupId = null;\n    // If any chart has group\n    each(charts, function (chart) {\n      if (chart.group != null) {\n        groupId = chart.group;\n      }\n    });\n    groupId = groupId || 'g_' + groupIdBase++;\n    each(charts, function (chart) {\n      chart.group = groupId;\n    });\n  }\n  connectedGroups[groupId] = true;\n  return groupId;\n}\nexport function disconnect(groupId) {\n  connectedGroups[groupId] = false;\n}\n/**\r\n * Alias and backward compatibility\r\n * @deprecated\r\n */\nexport var disConnect = disconnect;\n/**\r\n * Dispose a chart instance\r\n */\nexport function dispose(chart) {\n  if (isString(chart)) {\n    chart = instances[chart];\n  } else if (!(chart instanceof ECharts)) {\n    // Try to treat as dom\n    chart = getInstanceByDom(chart);\n  }\n  if (chart instanceof ECharts && !chart.isDisposed()) {\n    chart.dispose();\n  }\n}\nexport function getInstanceByDom(dom) {\n  return instances[modelUtil.getAttribute(dom, DOM_ATTRIBUTE_KEY)];\n}\nexport function getInstanceById(key) {\n  return instances[key];\n}\n/**\r\n * Register theme\r\n */\nexport function registerTheme(name, theme) {\n  themeStorage[name] = theme;\n}\n/**\r\n * Register option preprocessor\r\n */\nexport function registerPreprocessor(preprocessorFunc) {\n  if (indexOf(optionPreprocessorFuncs, preprocessorFunc) < 0) {\n    optionPreprocessorFuncs.push(preprocessorFunc);\n  }\n}\nexport function registerProcessor(priority, processor) {\n  normalizeRegister(dataProcessorFuncs, priority, processor, PRIORITY_PROCESSOR_DEFAULT);\n}\n/**\r\n * Register postIniter\r\n * @param {Function} postInitFunc\r\n */\nexport function registerPostInit(postInitFunc) {\n  registerUpdateLifecycle('afterinit', postInitFunc);\n}\n/**\r\n * Register postUpdater\r\n * @param {Function} postUpdateFunc\r\n */\nexport function registerPostUpdate(postUpdateFunc) {\n  registerUpdateLifecycle('afterupdate', postUpdateFunc);\n}\nexport function registerUpdateLifecycle(name, cb) {\n  lifecycle.on(name, cb);\n}\nexport function registerAction(actionInfo, eventName, action) {\n  if (isFunction(eventName)) {\n    action = eventName;\n    eventName = '';\n  }\n  var actionType = isObject(actionInfo) ? actionInfo.type : [actionInfo, actionInfo = {\n    event: eventName\n  }][0];\n  // Event name is all lowercase\n  actionInfo.event = (actionInfo.event || actionType).toLowerCase();\n  eventName = actionInfo.event;\n  if (eventActionMap[eventName]) {\n    // Already registered.\n    return;\n  }\n  // Validate action type and event name.\n  assert(ACTION_REG.test(actionType) && ACTION_REG.test(eventName));\n  if (!actions[actionType]) {\n    actions[actionType] = {\n      action: action,\n      actionInfo: actionInfo\n    };\n  }\n  eventActionMap[eventName] = actionType;\n}\nexport function registerCoordinateSystem(type, coordSysCreator) {\n  CoordinateSystemManager.register(type, coordSysCreator);\n}\n/**\r\n * Get dimensions of specified coordinate system.\r\n * @param {string} type\r\n * @return {Array.<string|Object>}\r\n */\nexport function getCoordinateSystemDimensions(type) {\n  var coordSysCreator = CoordinateSystemManager.get(type);\n  if (coordSysCreator) {\n    return coordSysCreator.getDimensionsInfo ? coordSysCreator.getDimensionsInfo() : coordSysCreator.dimensions.slice();\n  }\n}\nexport { registerLocale } from './locale.js';\nfunction registerLayout(priority, layoutTask) {\n  normalizeRegister(visualFuncs, priority, layoutTask, PRIORITY_VISUAL_LAYOUT, 'layout');\n}\nfunction registerVisual(priority, visualTask) {\n  normalizeRegister(visualFuncs, priority, visualTask, PRIORITY_VISUAL_CHART, 'visual');\n}\nexport { registerLayout, registerVisual };\nvar registeredTasks = [];\nfunction normalizeRegister(targetList, priority, fn, defaultPriority, visualType) {\n  if (isFunction(priority) || isObject(priority)) {\n    fn = priority;\n    priority = defaultPriority;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNaN(priority) || priority == null) {\n      throw new Error('Illegal priority');\n    }\n    // Check duplicate\n    each(targetList, function (wrap) {\n      assert(wrap.__raw !== fn);\n    });\n  }\n  // Already registered\n  if (indexOf(registeredTasks, fn) >= 0) {\n    return;\n  }\n  registeredTasks.push(fn);\n  var stageHandler = Scheduler.wrapStageHandler(fn, visualType);\n  stageHandler.__prio = priority;\n  stageHandler.__raw = fn;\n  targetList.push(stageHandler);\n}\nexport function registerLoading(name, loadingFx) {\n  loadingEffects[name] = loadingFx;\n}\n/**\r\n * ZRender need a canvas context to do measureText.\r\n * But in node environment canvas may be created by node-canvas.\r\n * So we need to specify how to create a canvas instead of using document.createElement('canvas')\r\n *\r\n *\r\n * @deprecated use setPlatformAPI({ createCanvas }) instead.\r\n *\r\n * @example\r\n *     let Canvas = require('canvas');\r\n *     let echarts = require('echarts');\r\n *     echarts.setCanvasCreator(function () {\r\n *         // Small size is enough.\r\n *         return new Canvas(32, 32);\r\n *     });\r\n */\nexport function setCanvasCreator(creator) {\n  if (process.env.NODE_ENV !== 'production') {\n    deprecateLog('setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead.');\n  }\n  setPlatformAPI({\n    createCanvas: creator\n  });\n}\n/**\r\n * The parameters and usage: see `geoSourceManager.registerMap`.\r\n * Compatible with previous `echarts.registerMap`.\r\n */\nexport function registerMap(mapName, geoJson, specialAreas) {\n  var registerMap = getImpl('registerMap');\n  registerMap && registerMap(mapName, geoJson, specialAreas);\n}\nexport function getMap(mapName) {\n  var getMap = getImpl('getMap');\n  return getMap && getMap(mapName);\n}\nexport var registerTransform = registerExternalTransform;\n/**\r\n * Globa dispatchAction to a specified chart instance.\r\n */\n// export function dispatchAction(payload: { chartId: string } & Payload, opt?: Parameters<ECharts['dispatchAction']>[1]) {\n//     if (!payload || !payload.chartId) {\n//         // Must have chartId to find chart\n//         return;\n//     }\n//     const chart = instances[payload.chartId];\n//     if (chart) {\n//         chart.dispatchAction(payload, opt);\n//     }\n// }\n// Builtin global visual\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataStyleTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataColorPaletteTask);\nregisterVisual(PRIORITY_VISUAL_GLOBAL, seriesSymbolTask);\nregisterVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM, dataSymbolTask);\nregisterVisual(PRIORITY_VISUAL_DECAL, decal);\nregisterPreprocessor(backwardCompat);\nregisterProcessor(PRIORITY_PROCESSOR_DATASTACK, dataStack);\nregisterLoading('default', loadingDefault);\n// Default actions\nregisterAction({\n  type: HIGHLIGHT_ACTION_TYPE,\n  event: HIGHLIGHT_ACTION_TYPE,\n  update: HIGHLIGHT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: DOWNPLAY_ACTION_TYPE,\n  event: DOWNPLAY_ACTION_TYPE,\n  update: DOWNPLAY_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: SELECT_ACTION_TYPE,\n  event: SELECT_ACTION_TYPE,\n  update: SELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: UNSELECT_ACTION_TYPE,\n  event: UNSELECT_ACTION_TYPE,\n  update: UNSELECT_ACTION_TYPE\n}, noop);\nregisterAction({\n  type: TOGGLE_SELECT_ACTION_TYPE,\n  event: TOGGLE_SELECT_ACTION_TYPE,\n  update: TOGGLE_SELECT_ACTION_TYPE\n}, noop);\n// Default theme\nregisterTheme('light', lightTheme);\nregisterTheme('dark', darkTheme);\n// For backward compatibility, where the namespace `dataTool` will\n// be mounted on `echarts` is the extension `dataTool` is imported.\nexport var dataTool = {};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nfunction dataIndexMapValueLength(valNumOrArrLengthMoreThan2) {\n  return valNumOrArrLengthMoreThan2 == null ? 0 : valNumOrArrLengthMoreThan2.length || 1;\n}\nfunction defaultKeyGetter(item) {\n  return item;\n}\nvar DataDiffer = /** @class */function () {\n  /**\r\n   * @param context Can be visited by this.context in callback.\r\n   */\n  function DataDiffer(oldArr, newArr, oldKeyGetter, newKeyGetter, context,\n  // By default: 'oneToOne'.\n  diffMode) {\n    this._old = oldArr;\n    this._new = newArr;\n    this._oldKeyGetter = oldKeyGetter || defaultKeyGetter;\n    this._newKeyGetter = newKeyGetter || defaultKeyGetter;\n    // Visible in callback via `this.context`;\n    this.context = context;\n    this._diffModeMultiple = diffMode === 'multiple';\n  }\n  /**\r\n   * Callback function when add a data\r\n   */\n  DataDiffer.prototype.add = function (func) {\n    this._add = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data\r\n   */\n  DataDiffer.prototype.update = function (func) {\n    this._update = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\n  DataDiffer.prototype.updateManyToOne = function (func) {\n    this._updateManyToOne = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\n  DataDiffer.prototype.updateOneToMany = function (func) {\n    this._updateOneToMany = func;\n    return this;\n  };\n  /**\r\n   * Callback function when update a data and only work in `cbMode: 'byKey'`.\r\n   */\n  DataDiffer.prototype.updateManyToMany = function (func) {\n    this._updateManyToMany = func;\n    return this;\n  };\n  /**\r\n   * Callback function when remove a data\r\n   */\n  DataDiffer.prototype.remove = function (func) {\n    this._remove = func;\n    return this;\n  };\n  DataDiffer.prototype.execute = function () {\n    this[this._diffModeMultiple ? '_executeMultiple' : '_executeOneToOne']();\n  };\n  DataDiffer.prototype._executeOneToOne = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var newDataIndexMap = {};\n    var oldDataKeyArr = new Array(oldArr.length);\n    var newDataKeyArr = new Array(newArr.length);\n    this._initIndexMap(oldArr, null, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      // idx can never be empty array here. see 'set null' logic below.\n      if (newIdxMapValLen > 1) {\n        // Consider there is duplicate key (for example, use dataItem.name as key).\n        // We should make sure every item in newArr and oldArr can be visited.\n        var newIdx = newIdxMapVal.shift();\n        if (newIdxMapVal.length === 1) {\n          newDataIndexMap[oldKey] = newIdxMapVal[0];\n        }\n        this._update && this._update(newIdx, i);\n      } else if (newIdxMapValLen === 1) {\n        newDataIndexMap[oldKey] = null;\n        this._update && this._update(newIdxMapVal, i);\n      } else {\n        this._remove && this._remove(i);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  /**\r\n   * For example, consider the case:\r\n   * oldData: [o0, o1, o2, o3, o4, o5, o6, o7],\r\n   * newData: [n0, n1, n2, n3, n4, n5, n6, n7, n8],\r\n   * Where:\r\n   *     o0, o1, n0 has key 'a' (many to one)\r\n   *     o5, n4, n5, n6 has key 'b' (one to many)\r\n   *     o2, n1 has key 'c' (one to one)\r\n   *     n2, n3 has key 'd' (add)\r\n   *     o3, o4 has key 'e' (remove)\r\n   *     o6, o7, n7, n8 has key 'f' (many to many, treated as add and remove)\r\n   * Then:\r\n   *     (The order of the following directives are not ensured.)\r\n   *     this._updateManyToOne(n0, [o0, o1]);\r\n   *     this._updateOneToMany([n4, n5, n6], o5);\r\n   *     this._update(n1, o2);\r\n   *     this._remove(o3);\r\n   *     this._remove(o4);\r\n   *     this._remove(o6);\r\n   *     this._remove(o7);\r\n   *     this._add(n2);\r\n   *     this._add(n3);\r\n   *     this._add(n7);\r\n   *     this._add(n8);\r\n   */\n  DataDiffer.prototype._executeMultiple = function () {\n    var oldArr = this._old;\n    var newArr = this._new;\n    var oldDataIndexMap = {};\n    var newDataIndexMap = {};\n    var oldDataKeyArr = [];\n    var newDataKeyArr = [];\n    this._initIndexMap(oldArr, oldDataIndexMap, oldDataKeyArr, '_oldKeyGetter');\n    this._initIndexMap(newArr, newDataIndexMap, newDataKeyArr, '_newKeyGetter');\n    for (var i = 0; i < oldDataKeyArr.length; i++) {\n      var oldKey = oldDataKeyArr[i];\n      var oldIdxMapVal = oldDataIndexMap[oldKey];\n      var newIdxMapVal = newDataIndexMap[oldKey];\n      var oldIdxMapValLen = dataIndexMapValueLength(oldIdxMapVal);\n      var newIdxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (oldIdxMapValLen > 1 && newIdxMapValLen === 1) {\n        this._updateManyToOne && this._updateManyToOne(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen > 1) {\n        this._updateOneToMany && this._updateOneToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen === 1 && newIdxMapValLen === 1) {\n        this._update && this._update(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1 && newIdxMapValLen > 1) {\n        this._updateManyToMany && this._updateManyToMany(newIdxMapVal, oldIdxMapVal);\n        newDataIndexMap[oldKey] = null;\n      } else if (oldIdxMapValLen > 1) {\n        for (var i_1 = 0; i_1 < oldIdxMapValLen; i_1++) {\n          this._remove && this._remove(oldIdxMapVal[i_1]);\n        }\n      } else {\n        this._remove && this._remove(oldIdxMapVal);\n      }\n    }\n    this._performRestAdd(newDataKeyArr, newDataIndexMap);\n  };\n  DataDiffer.prototype._performRestAdd = function (newDataKeyArr, newDataIndexMap) {\n    for (var i = 0; i < newDataKeyArr.length; i++) {\n      var newKey = newDataKeyArr[i];\n      var newIdxMapVal = newDataIndexMap[newKey];\n      var idxMapValLen = dataIndexMapValueLength(newIdxMapVal);\n      if (idxMapValLen > 1) {\n        for (var j = 0; j < idxMapValLen; j++) {\n          this._add && this._add(newIdxMapVal[j]);\n        }\n      } else if (idxMapValLen === 1) {\n        this._add && this._add(newIdxMapVal);\n      }\n      // Support both `newDataKeyArr` are duplication removed or not removed.\n      newDataIndexMap[newKey] = null;\n    }\n  };\n  DataDiffer.prototype._initIndexMap = function (arr,\n  // Can be null.\n  map,\n  // In 'byKey', the output `keyArr` is duplication removed.\n  // In 'byIndex', the output `keyArr` is not duplication removed and\n  //     its indices are accurately corresponding to `arr`.\n  keyArr, keyGetterName) {\n    var cbModeMultiple = this._diffModeMultiple;\n    for (var i = 0; i < arr.length; i++) {\n      // Add prefix to avoid conflict with Object.prototype.\n      var key = '_ec_' + this[keyGetterName](arr[i], i);\n      if (!cbModeMultiple) {\n        keyArr[i] = key;\n      }\n      if (!map) {\n        continue;\n      }\n      var idxMapVal = map[key];\n      var idxMapValLen = dataIndexMapValueLength(idxMapVal);\n      if (idxMapValLen === 0) {\n        // Simple optimize: in most cases, one index has one key,\n        // do not need array.\n        map[key] = i;\n        if (cbModeMultiple) {\n          keyArr.push(key);\n        }\n      } else if (idxMapValLen === 1) {\n        map[key] = [idxMapVal, i];\n      } else {\n        idxMapVal.push(i);\n      }\n    }\n  };\n  return DataDiffer;\n}();\nexport default DataDiffer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, createHashMap, assert, map } from 'zrender/lib/core/util.js';\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nvar DimensionUserOuput = /** @class */function () {\n  function DimensionUserOuput(encode, dimRequest) {\n    this._encode = encode;\n    this._schema = dimRequest;\n  }\n  DimensionUserOuput.prototype.get = function () {\n    return {\n      // Do not generate full dimension name until fist used.\n      fullDimensions: this._getFullDimensionNames(),\n      encode: this._encode\n    };\n  };\n  /**\r\n   * Get all data store dimension names.\r\n   * Theoretically a series data store is defined both by series and used dataset (if any).\r\n   * If some dimensions are omitted for performance reason in `this.dimensions`,\r\n   * the dimension name may not be auto-generated if user does not specify a dimension name.\r\n   * In this case, the dimension name is `null`/`undefined`.\r\n   */\n  DimensionUserOuput.prototype._getFullDimensionNames = function () {\n    if (!this._cachedDimNames) {\n      this._cachedDimNames = this._schema ? this._schema.makeOutputDimensionNames() : [];\n    }\n    return this._cachedDimNames;\n  };\n  return DimensionUserOuput;\n}();\n;\nexport function summarizeDimensions(data, schema) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = [];\n  var userOutputEncode = {};\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n    if (coordDim) {\n      if (process.env.NODE_ENV !== 'production') {\n        assert(VISUAL_DIMENSIONS.get(coordDim) == null);\n      }\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1);\n        // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        }\n        // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n        getOrCreateEncodeArr(userOutputEncode, coordDim)[coordDimIndex] = data.getDimensionIndex(dimItem.name);\n      }\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n    VISUAL_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim];\n    encodeFirstDimNotExtra[coordDim] = dimArr[0];\n    // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.dataDimIndicesOnCoord = map(dataDimsOnCoord, function (dimName) {\n    return data.getDimensionInfo(dimName).storeDimIndex;\n  });\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label;\n  // FIXME `encode.label` is not recommended, because formatter cannot be set\n  // in this way. Use label.formatter instead. Maybe remove this approach someday.\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n  var encodeTooltip = encode.tooltip;\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  summary.userOutput = new DimensionUserOuput(userOutputEncode, schema);\n  return summary;\n}\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n  return encode[dim];\n}\n// FIXME:TS should be type `AxisType`\nexport function getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n}\n// function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     let dimensions = data.dimensions.slice();\n//     let valueType;\n//     let valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar SeriesDimensionDefine = /** @class */function () {\n  /**\r\n   * @param opt All of the fields will be shallow copied.\r\n   */\n  function SeriesDimensionDefine(opt) {\n    /**\r\n     * The format of `otherDims` is:\r\n     * ```js\r\n     * {\r\n     *     tooltip?: number\r\n     *     label?: number\r\n     *     itemName?: number\r\n     *     seriesName?: number\r\n     * }\r\n     * ```\r\n     *\r\n     * A `series.encode` can specified these fields:\r\n     * ```js\r\n     * encode: {\r\n     *     // \"3, 1, 5\" is the index of data dimension.\r\n     *     tooltip: [3, 1, 5],\r\n     *     label: [0, 3],\r\n     *     ...\r\n     * }\r\n     * ```\r\n     * `otherDims` is the parse result of the `series.encode` above, like:\r\n     * ```js\r\n     * // Suppose the index of this data dimension is `3`.\r\n     * this.otherDims = {\r\n     *     // `3` is at the index `0` of the `encode.tooltip`\r\n     *     tooltip: 0,\r\n     *     // `3` is at the index `1` of the `encode.label`\r\n     *     label: 1\r\n     * };\r\n     * ```\r\n     *\r\n     * This prop should never be `null`/`undefined` after initialized.\r\n     */\n    this.otherDims = {};\n    if (opt != null) {\n      zrUtil.extend(this, opt);\n    }\n  }\n  return SeriesDimensionDefine;\n}();\n;\nexport default SeriesDimensionDefine;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, isObject, retrieve2 } from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nimport { shouldRetrieveDataByName } from '../Source.js';\nvar inner = makeInner();\nvar dimTypeShort = {\n  float: 'f',\n  int: 'i',\n  ordinal: 'o',\n  number: 'n',\n  time: 't'\n};\n/**\r\n * Represents the dimension requirement of a series.\r\n *\r\n * NOTICE:\r\n * When there are too many dimensions in dataset and many series, only the used dimensions\r\n * (i.e., used by coord sys and declared in `series.encode`) are add to `dimensionDefineList`.\r\n * But users may query data by other unused dimension names.\r\n * In this case, users can only query data if and only if they have defined dimension names\r\n * via ec option, so we provide `getDimensionIndexFromSource`, which only query them from\r\n * `source` dimensions.\r\n */\nvar SeriesDataSchema = /** @class */function () {\n  function SeriesDataSchema(opt) {\n    this.dimensions = opt.dimensions;\n    this._dimOmitted = opt.dimensionOmitted;\n    this.source = opt.source;\n    this._fullDimCount = opt.fullDimensionCount;\n    this._updateDimOmitted(opt.dimensionOmitted);\n  }\n  SeriesDataSchema.prototype.isDimensionOmitted = function () {\n    return this._dimOmitted;\n  };\n  SeriesDataSchema.prototype._updateDimOmitted = function (dimensionOmitted) {\n    this._dimOmitted = dimensionOmitted;\n    if (!dimensionOmitted) {\n      return;\n    }\n    if (!this._dimNameMap) {\n      this._dimNameMap = ensureSourceDimNameMap(this.source);\n    }\n  };\n  /**\r\n   * @caution Can only be used when `dimensionOmitted: true`.\r\n   *\r\n   * Get index by user defined dimension name (i.e., not internal generate name).\r\n   * That is, get index from `dimensionsDefine`.\r\n   * If no `dimensionsDefine`, or no name get, return -1.\r\n   */\n  SeriesDataSchema.prototype.getSourceDimensionIndex = function (dimName) {\n    return retrieve2(this._dimNameMap.get(dimName), -1);\n  };\n  /**\r\n   * @caution Can only be used when `dimensionOmitted: true`.\r\n   *\r\n   * Notice: may return `null`/`undefined` if user not specify dimension names.\r\n   */\n  SeriesDataSchema.prototype.getSourceDimension = function (dimIndex) {\n    var dimensionsDefine = this.source.dimensionsDefine;\n    if (dimensionsDefine) {\n      return dimensionsDefine[dimIndex];\n    }\n  };\n  SeriesDataSchema.prototype.makeStoreSchema = function () {\n    var dimCount = this._fullDimCount;\n    var willRetrieveDataByName = shouldRetrieveDataByName(this.source);\n    var makeHashStrict = !shouldOmitUnusedDimensions(dimCount);\n    // If source don't have dimensions or series don't omit unsed dimensions.\n    // Generate from seriesDimList directly\n    var dimHash = '';\n    var dims = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < dimCount; fullDimIdx++) {\n      var property = void 0;\n      var type = void 0;\n      var ordinalMeta = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        property = willRetrieveDataByName ? seriesDimDef.name : null;\n        type = seriesDimDef.type;\n        ordinalMeta = seriesDimDef.ordinalMeta;\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          property = willRetrieveDataByName ? sourceDimDef.name : null;\n          type = sourceDimDef.type;\n        }\n      }\n      dims.push({\n        property: property,\n        type: type,\n        ordinalMeta: ordinalMeta\n      });\n      // If retrieving data by index,\n      //   use <index, type, ordinalMeta> to determine whether data can be shared.\n      //   (Because in this case there might be no dimension name defined in dataset, but indices always exists).\n      //   (Indices are always 0, 1, 2, ..., so we can ignore them to shorten the hash).\n      // Otherwise if retrieving data by property name (like `data: [{aa: 123, bb: 765}, ...]`),\n      //   use <property, type, ordinalMeta> in hash.\n      if (willRetrieveDataByName && property != null\n      // For data stack, we have make sure each series has its own dim on this store.\n      // So we do not add property to hash to make sure they can share this store.\n      && (!seriesDimDef || !seriesDimDef.isCalculationCoord)) {\n        dimHash += makeHashStrict\n        // Use escape character '`' in case that property name contains '$'.\n        ? property.replace(/\\`/g, '`1').replace(/\\$/g, '`2')\n        // For better performance, when there are large dimensions, tolerant this defects that hardly meet.\n        : property;\n      }\n      dimHash += '$';\n      dimHash += dimTypeShort[type] || 'f';\n      if (ordinalMeta) {\n        dimHash += ordinalMeta.uid;\n      }\n      dimHash += '$';\n    }\n    // Source from endpoint(usually series) will be read differently\n    // when seriesLayoutBy or startIndex(which is affected by sourceHeader) are different.\n    // So we use this three props as key.\n    var source = this.source;\n    var hash = [source.seriesLayoutBy, source.startIndex, dimHash].join('$$');\n    return {\n      dimensions: dims,\n      hash: hash\n    };\n  };\n  SeriesDataSchema.prototype.makeOutputDimensionNames = function () {\n    var result = [];\n    for (var fullDimIdx = 0, seriesDimIdx = 0; fullDimIdx < this._fullDimCount; fullDimIdx++) {\n      var name_1 = void 0;\n      var seriesDimDef = this.dimensions[seriesDimIdx];\n      // The list has been sorted by `storeDimIndex` asc.\n      if (seriesDimDef && seriesDimDef.storeDimIndex === fullDimIdx) {\n        if (!seriesDimDef.isCalculationCoord) {\n          name_1 = seriesDimDef.name;\n        }\n        seriesDimIdx++;\n      } else {\n        var sourceDimDef = this.getSourceDimension(fullDimIdx);\n        if (sourceDimDef) {\n          name_1 = sourceDimDef.name;\n        }\n      }\n      result.push(name_1);\n    }\n    return result;\n  };\n  SeriesDataSchema.prototype.appendCalculationDimension = function (dimDef) {\n    this.dimensions.push(dimDef);\n    dimDef.isCalculationCoord = true;\n    this._fullDimCount++;\n    // If append dimension on a data store, consider the store\n    // might be shared by different series, series dimensions not\n    // really map to store dimensions.\n    this._updateDimOmitted(true);\n  };\n  return SeriesDataSchema;\n}();\nexport { SeriesDataSchema };\nexport function isSeriesDataSchema(schema) {\n  return schema instanceof SeriesDataSchema;\n}\nexport function createDimNameMap(dimsDef) {\n  var dataDimNameMap = createHashMap();\n  for (var i = 0; i < (dimsDef || []).length; i++) {\n    var dimDefItemRaw = dimsDef[i];\n    var userDimName = isObject(dimDefItemRaw) ? dimDefItemRaw.name : dimDefItemRaw;\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      dataDimNameMap.set(userDimName, i);\n    }\n  }\n  return dataDimNameMap;\n}\nexport function ensureSourceDimNameMap(source) {\n  var innerSource = inner(source);\n  return innerSource.dimNameMap || (innerSource.dimNameMap = createDimNameMap(source.dimensionsDefine));\n}\nexport function shouldOmitUnusedDimensions(dimCount) {\n  return dimCount > 30;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/* global Int32Array */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../model/Model.js';\nimport DataDiffer from './DataDiffer.js';\nimport { DefaultDataProvider } from './helper/dataProvider.js';\nimport { summarizeDimensions } from './helper/dimensionHelper.js';\nimport SeriesDimensionDefine from './SeriesDimensionDefine.js';\nimport { SOURCE_FORMAT_TYPED_ARRAY, SOURCE_FORMAT_ORIGINAL } from '../util/types.js';\nimport { convertOptionIdName, isDataItemOption } from '../util/model.js';\nimport { setCommonECData } from '../util/innerStore.js';\nimport { isSourceInstance } from './Source.js';\nimport DataStore from './DataStore.js';\nimport { isSeriesDataSchema } from './helper/SeriesDataSchema.js';\nvar isObject = zrUtil.isObject;\nvar map = zrUtil.map;\nvar CtorInt32Array = typeof Int32Array === 'undefined' ? Array : Int32Array;\n// Use prefix to avoid index to be the same as otherIdList[idx],\n// which will cause weird update animation.\nvar ID_PREFIX = 'e\\0\\0';\nvar INDEX_NOT_FOUND = -1;\n// type SeriesDimensionIndex = DimensionIndex;\nvar TRANSFERABLE_PROPERTIES = ['hasItemOption', '_nameList', '_idList', '_invertedIndicesMap', '_dimSummary', 'userOutput', '_rawData', '_dimValueGetter', '_nameDimIdx', '_idDimIdx', '_nameRepeatCount'];\nvar CLONE_PROPERTIES = ['_approximateExtent'];\n// -----------------------------\n// Internal method declarations:\n// -----------------------------\nvar prepareInvertedIndex;\nvar getId;\nvar getIdNameFromStore;\nvar normalizeDimensions;\nvar transferProperties;\nvar cloneListForMapAndSample;\nvar makeIdFromName;\nvar SeriesData = /** @class */function () {\n  /**\r\n   * @param dimensionsInput.dimensions\r\n   *        For example, ['someDimName', {name: 'someDimName', type: 'someDimType'}, ...].\r\n   *        Dimensions should be concrete names like x, y, z, lng, lat, angle, radius\r\n   */\n  function SeriesData(dimensionsInput, hostModel) {\n    this.type = 'list';\n    this._dimOmitted = false;\n    this._nameList = [];\n    this._idList = [];\n    // Models of data option is stored sparse for optimizing memory cost\n    // Never used yet (not used yet).\n    // private _optionModels: Model[] = [];\n    // Global visual properties after visual coding\n    this._visual = {};\n    // Global layout properties.\n    this._layout = {};\n    // Item visual properties after visual coding\n    this._itemVisuals = [];\n    // Item layout properties after layout\n    this._itemLayouts = [];\n    // Graphic elements\n    this._graphicEls = [];\n    // key: dim, value: extent\n    this._approximateExtent = {};\n    this._calculationInfo = {};\n    // Having detected that there is data item is non primitive type\n    // (in type `OptionDataItemObject`).\n    // Like `data: [ { value: xx, itemStyle: {...} }, ...]`\n    // At present it only happen in `SOURCE_FORMAT_ORIGINAL`.\n    this.hasItemOption = false;\n    // Methods that create a new list based on this list should be listed here.\n    // Notice that those method should `RETURN` the new list.\n    this.TRANSFERABLE_METHODS = ['cloneShallow', 'downSample', 'minmaxDownSample', 'lttbDownSample', 'map'];\n    // Methods that change indices of this list should be listed here.\n    this.CHANGABLE_METHODS = ['filterSelf', 'selectRange'];\n    this.DOWNSAMPLE_METHODS = ['downSample', 'minmaxDownSample', 'lttbDownSample'];\n    var dimensions;\n    var assignStoreDimIdx = false;\n    if (isSeriesDataSchema(dimensionsInput)) {\n      dimensions = dimensionsInput.dimensions;\n      this._dimOmitted = dimensionsInput.isDimensionOmitted();\n      this._schema = dimensionsInput;\n    } else {\n      assignStoreDimIdx = true;\n      dimensions = dimensionsInput;\n    }\n    dimensions = dimensions || ['x', 'y'];\n    var dimensionInfos = {};\n    var dimensionNames = [];\n    var invertedIndicesMap = {};\n    var needsHasOwn = false;\n    var emptyObj = {};\n    for (var i = 0; i < dimensions.length; i++) {\n      // Use the original dimensions[i], where other flag props may exists.\n      var dimInfoInput = dimensions[i];\n      var dimensionInfo = zrUtil.isString(dimInfoInput) ? new SeriesDimensionDefine({\n        name: dimInfoInput\n      }) : !(dimInfoInput instanceof SeriesDimensionDefine) ? new SeriesDimensionDefine(dimInfoInput) : dimInfoInput;\n      var dimensionName = dimensionInfo.name;\n      dimensionInfo.type = dimensionInfo.type || 'float';\n      if (!dimensionInfo.coordDim) {\n        dimensionInfo.coordDim = dimensionName;\n        dimensionInfo.coordDimIndex = 0;\n      }\n      var otherDims = dimensionInfo.otherDims = dimensionInfo.otherDims || {};\n      dimensionNames.push(dimensionName);\n      dimensionInfos[dimensionName] = dimensionInfo;\n      if (emptyObj[dimensionName] != null) {\n        needsHasOwn = true;\n      }\n      if (dimensionInfo.createInvertedIndices) {\n        invertedIndicesMap[dimensionName] = [];\n      }\n      if (otherDims.itemName === 0) {\n        this._nameDimIdx = i;\n      }\n      if (otherDims.itemId === 0) {\n        this._idDimIdx = i;\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        zrUtil.assert(assignStoreDimIdx || dimensionInfo.storeDimIndex >= 0);\n      }\n      if (assignStoreDimIdx) {\n        dimensionInfo.storeDimIndex = i;\n      }\n    }\n    this.dimensions = dimensionNames;\n    this._dimInfos = dimensionInfos;\n    this._initGetDimensionInfo(needsHasOwn);\n    this.hostModel = hostModel;\n    this._invertedIndicesMap = invertedIndicesMap;\n    if (this._dimOmitted) {\n      var dimIdxToName_1 = this._dimIdxToName = zrUtil.createHashMap();\n      zrUtil.each(dimensionNames, function (dimName) {\n        dimIdxToName_1.set(dimensionInfos[dimName].storeDimIndex, dimName);\n      });\n    }\n  }\n  /**\r\n   *\r\n   * Get concrete dimension name by dimension name or dimension index.\r\n   * If input a dimension name, do not validate whether the dimension name exits.\r\n   *\r\n   * @caution\r\n   * @param dim Must make sure the dimension is `SeriesDimensionLoose`.\r\n   * Because only those dimensions will have auto-generated dimension names if not\r\n   * have a user-specified name, and other dimensions will get a return of null/undefined.\r\n   *\r\n   * @notice Because of this reason, should better use `getDimensionIndex` instead, for examples:\r\n   * ```js\r\n   * const val = data.getStore().get(data.getDimensionIndex(dim), dataIdx);\r\n   * ```\r\n   *\r\n   * @return Concrete dim name.\r\n   */\n  SeriesData.prototype.getDimension = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx == null) {\n      return dim;\n    }\n    dimIdx = dim;\n    if (!this._dimOmitted) {\n      return this.dimensions[dimIdx];\n    }\n    // Retrieve from series dimension definition because it probably contains\n    // generated dimension name (like 'x', 'y').\n    var dimName = this._dimIdxToName.get(dimIdx);\n    if (dimName != null) {\n      return dimName;\n    }\n    var sourceDimDef = this._schema.getSourceDimension(dimIdx);\n    if (sourceDimDef) {\n      return sourceDimDef.name;\n    }\n  };\n  /**\r\n   * Get dimension index in data store. Return -1 if not found.\r\n   * Can be used to index value from getRawValue.\r\n   */\n  SeriesData.prototype.getDimensionIndex = function (dim) {\n    var dimIdx = this._recognizeDimIndex(dim);\n    if (dimIdx != null) {\n      return dimIdx;\n    }\n    if (dim == null) {\n      return -1;\n    }\n    var dimInfo = this._getDimInfo(dim);\n    return dimInfo ? dimInfo.storeDimIndex : this._dimOmitted ? this._schema.getSourceDimensionIndex(dim) : -1;\n  };\n  /**\r\n   * The meanings of the input parameter `dim`:\r\n   *\r\n   * + If dim is a number (e.g., `1`), it means the index of the dimension.\r\n   *   For example, `getDimension(0)` will return 'x' or 'lng' or 'radius'.\r\n   * + If dim is a number-like string (e.g., `\"1\"`):\r\n   *     + If there is the same concrete dim name defined in `series.dimensions` or `dataset.dimensions`,\r\n   *        it means that concrete name.\r\n   *     + If not, it will be converted to a number, which means the index of the dimension.\r\n   *        (why? because of the backward compatibility. We have been tolerating number-like string in\r\n   *        dimension setting, although now it seems that it is not a good idea.)\r\n   *     For example, `visualMap[i].dimension: \"1\"` is the same meaning as `visualMap[i].dimension: 1`,\r\n   *     if no dimension name is defined as `\"1\"`.\r\n   * + If dim is a not-number-like string, it means the concrete dim name.\r\n   *   For example, it can be be default name `\"x\"`, `\"y\"`, `\"z\"`, `\"lng\"`, `\"lat\"`, `\"angle\"`, `\"radius\"`,\r\n   *   or customized in `dimensions` property of option like `\"age\"`.\r\n   *\r\n   * @return recognized `DimensionIndex`. Otherwise return null/undefined (means that dim is `DimensionName`).\r\n   */\n  SeriesData.prototype._recognizeDimIndex = function (dim) {\n    if (zrUtil.isNumber(dim)\n    // If being a number-like string but not being defined as a dimension name.\n    || dim != null && !isNaN(dim) && !this._getDimInfo(dim) && (!this._dimOmitted || this._schema.getSourceDimensionIndex(dim) < 0)) {\n      return +dim;\n    }\n  };\n  SeriesData.prototype._getStoreDimIndex = function (dim) {\n    var dimIdx = this.getDimensionIndex(dim);\n    if (process.env.NODE_ENV !== 'production') {\n      if (dimIdx == null) {\n        throw new Error('Unknown dimension ' + dim);\n      }\n    }\n    return dimIdx;\n  };\n  /**\r\n   * Get type and calculation info of particular dimension\r\n   * @param dim\r\n   *        Dimension can be concrete names like x, y, z, lng, lat, angle, radius\r\n   *        Or a ordinal number. For example getDimensionInfo(0) will return 'x' or 'lng' or 'radius'\r\n   */\n  SeriesData.prototype.getDimensionInfo = function (dim) {\n    // Do not clone, because there may be categories in dimInfo.\n    return this._getDimInfo(this.getDimension(dim));\n  };\n  SeriesData.prototype._initGetDimensionInfo = function (needsHasOwn) {\n    var dimensionInfos = this._dimInfos;\n    this._getDimInfo = needsHasOwn ? function (dimName) {\n      return dimensionInfos.hasOwnProperty(dimName) ? dimensionInfos[dimName] : undefined;\n    } : function (dimName) {\n      return dimensionInfos[dimName];\n    };\n  };\n  /**\r\n   * concrete dimension name list on coord.\r\n   */\n  SeriesData.prototype.getDimensionsOnCoord = function () {\n    return this._dimSummary.dataDimsOnCoord.slice();\n  };\n  SeriesData.prototype.mapDimension = function (coordDim, idx) {\n    var dimensionsSummary = this._dimSummary;\n    if (idx == null) {\n      return dimensionsSummary.encodeFirstDimNotExtra[coordDim];\n    }\n    var dims = dimensionsSummary.encode[coordDim];\n    return dims ? dims[idx] : null;\n  };\n  SeriesData.prototype.mapDimensionsAll = function (coordDim) {\n    var dimensionsSummary = this._dimSummary;\n    var dims = dimensionsSummary.encode[coordDim];\n    return (dims || []).slice();\n  };\n  SeriesData.prototype.getStore = function () {\n    return this._store;\n  };\n  /**\r\n   * Initialize from data\r\n   * @param data source or data or data store.\r\n   * @param nameList The name of a datum is used on data diff and\r\n   *        default label/tooltip.\r\n   *        A name can be specified in encode.itemName,\r\n   *        or dataItem.name (only for series option data),\r\n   *        or provided in nameList from outside.\r\n   */\n  SeriesData.prototype.initData = function (data, nameList, dimValueGetter) {\n    var _this = this;\n    var store;\n    if (data instanceof DataStore) {\n      store = data;\n    }\n    if (!store) {\n      var dimensions = this.dimensions;\n      var provider = isSourceInstance(data) || zrUtil.isArrayLike(data) ? new DefaultDataProvider(data, dimensions.length) : data;\n      store = new DataStore();\n      var dimensionInfos = map(dimensions, function (dimName) {\n        return {\n          type: _this._dimInfos[dimName].type,\n          property: dimName\n        };\n      });\n      store.initData(provider, dimensionInfos, dimValueGetter);\n    }\n    this._store = store;\n    // Reset\n    this._nameList = (nameList || []).slice();\n    this._idList = [];\n    this._nameRepeatCount = {};\n    this._doInit(0, store.count());\n    // Cache summary info for fast visit. See \"dimensionHelper\".\n    // Needs to be initialized after store is prepared.\n    this._dimSummary = summarizeDimensions(this, this._schema);\n    this.userOutput = this._dimSummary.userOutput;\n  };\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   */\n  SeriesData.prototype.appendData = function (data) {\n    var range = this._store.appendData(data);\n    this._doInit(range[0], range[1]);\n  };\n  /**\r\n   * Caution: Can be only called on raw data (before `this._indices` created).\r\n   * This method does not modify `rawData` (`dataProvider`), but only\r\n   * add values to store.\r\n   *\r\n   * The final count will be increased by `Math.max(values.length, names.length)`.\r\n   *\r\n   * @param values That is the SourceType: 'arrayRows', like\r\n   *        [\r\n   *            [12, 33, 44],\r\n   *            [NaN, 43, 1],\r\n   *            ['-', 'asdf', 0]\r\n   *        ]\r\n   *        Each item is exactly corresponding to a dimension.\r\n   */\n  SeriesData.prototype.appendValues = function (values, names) {\n    var _a = this._store.appendValues(values, names && names.length),\n      start = _a.start,\n      end = _a.end;\n    var shouldMakeIdFromName = this._shouldMakeIdFromName();\n    this._updateOrdinalMeta();\n    if (names) {\n      for (var idx = start; idx < end; idx++) {\n        var sourceIdx = idx - start;\n        this._nameList[idx] = names[sourceIdx];\n        if (shouldMakeIdFromName) {\n          makeIdFromName(this, idx);\n        }\n      }\n    }\n  };\n  SeriesData.prototype._updateOrdinalMeta = function () {\n    var store = this._store;\n    var dimensions = this.dimensions;\n    for (var i = 0; i < dimensions.length; i++) {\n      var dimInfo = this._dimInfos[dimensions[i]];\n      if (dimInfo.ordinalMeta) {\n        store.collectOrdinalMeta(dimInfo.storeDimIndex, dimInfo.ordinalMeta);\n      }\n    }\n  };\n  SeriesData.prototype._shouldMakeIdFromName = function () {\n    var provider = this._store.getProvider();\n    return this._idDimIdx == null && provider.getSource().sourceFormat !== SOURCE_FORMAT_TYPED_ARRAY && !provider.fillStorage;\n  };\n  SeriesData.prototype._doInit = function (start, end) {\n    if (start >= end) {\n      return;\n    }\n    var store = this._store;\n    var provider = store.getProvider();\n    this._updateOrdinalMeta();\n    var nameList = this._nameList;\n    var idList = this._idList;\n    var sourceFormat = provider.getSource().sourceFormat;\n    var isFormatOriginal = sourceFormat === SOURCE_FORMAT_ORIGINAL;\n    // Each data item is value\n    // [1, 2]\n    // 2\n    // Bar chart, line chart which uses category axis\n    // only gives the 'y' value. 'x' value is the indices of category\n    // Use a tempValue to normalize the value to be a (x, y) value\n    // If dataItem is {name: ...} or {id: ...}, it has highest priority.\n    // This kind of ids and names are always stored `_nameList` and `_idList`.\n    if (isFormatOriginal && !provider.pure) {\n      var sharedDataItem = [];\n      for (var idx = start; idx < end; idx++) {\n        // NOTICE: Try not to write things into dataItem\n        var dataItem = provider.getItem(idx, sharedDataItem);\n        if (!this.hasItemOption && isDataItemOption(dataItem)) {\n          this.hasItemOption = true;\n        }\n        if (dataItem) {\n          var itemName = dataItem.name;\n          if (nameList[idx] == null && itemName != null) {\n            nameList[idx] = convertOptionIdName(itemName, null);\n          }\n          var itemId = dataItem.id;\n          if (idList[idx] == null && itemId != null) {\n            idList[idx] = convertOptionIdName(itemId, null);\n          }\n        }\n      }\n    }\n    if (this._shouldMakeIdFromName()) {\n      for (var idx = start; idx < end; idx++) {\n        makeIdFromName(this, idx);\n      }\n    }\n    prepareInvertedIndex(this);\n  };\n  /**\r\n   * PENDING: In fact currently this function is only used to short-circuit\r\n   * the calling of `scale.unionExtentFromData` when data have been filtered by modules\r\n   * like \"dataZoom\". `scale.unionExtentFromData` is used to calculate data extent for series on\r\n   * an axis, but if a \"axis related data filter module\" is used, the extent of the axis have\r\n   * been fixed and no need to calling `scale.unionExtentFromData` actually.\r\n   * But if we add \"custom data filter\" in future, which is not \"axis related\", this method may\r\n   * be still needed.\r\n   *\r\n   * Optimize for the scenario that data is filtered by a given extent.\r\n   * Consider that if data amount is more than hundreds of thousand,\r\n   * extent calculation will cost more than 10ms and the cache will\r\n   * be erased because of the filtering.\r\n   */\n  SeriesData.prototype.getApproximateExtent = function (dim) {\n    return this._approximateExtent[dim] || this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  /**\r\n   * Calculate extent on a filtered data might be time consuming.\r\n   * Approximate extent is only used for: calculate extent of filtered data outside.\r\n   */\n  SeriesData.prototype.setApproximateExtent = function (extent, dim) {\n    dim = this.getDimension(dim);\n    this._approximateExtent[dim] = extent.slice();\n  };\n  SeriesData.prototype.getCalculationInfo = function (key) {\n    return this._calculationInfo[key];\n  };\n  SeriesData.prototype.setCalculationInfo = function (key, value) {\n    isObject(key) ? zrUtil.extend(this._calculationInfo, key) : this._calculationInfo[key] = value;\n  };\n  /**\r\n   * @return Never be null/undefined. `number` will be converted to string. Because:\r\n   * In most cases, name is used in display, where returning a string is more convenient.\r\n   * In other cases, name is used in query (see `indexOfName`), where we can keep the\r\n   * rule that name `2` equals to name `'2'`.\r\n   */\n  SeriesData.prototype.getName = function (idx) {\n    var rawIndex = this.getRawIndex(idx);\n    var name = this._nameList[rawIndex];\n    if (name == null && this._nameDimIdx != null) {\n      name = getIdNameFromStore(this, this._nameDimIdx, rawIndex);\n    }\n    if (name == null) {\n      name = '';\n    }\n    return name;\n  };\n  SeriesData.prototype._getCategory = function (dimIdx, idx) {\n    var ordinal = this._store.get(dimIdx, idx);\n    var ordinalMeta = this._store.getOrdinalMeta(dimIdx);\n    if (ordinalMeta) {\n      return ordinalMeta.categories[ordinal];\n    }\n    return ordinal;\n  };\n  /**\r\n   * @return Never null/undefined. `number` will be converted to string. Because:\r\n   * In all cases having encountered at present, id is used in making diff comparison, which\r\n   * are usually based on hash map. We can keep the rule that the internal id are always string\r\n   * (treat `2` is the same as `'2'`) to make the related logic simple.\r\n   */\n  SeriesData.prototype.getId = function (idx) {\n    return getId(this, this.getRawIndex(idx));\n  };\n  SeriesData.prototype.count = function () {\n    return this._store.count();\n  };\n  /**\r\n   * Get value. Return NaN if idx is out of range.\r\n   *\r\n   * @notice Should better to use `data.getStore().get(dimIndex, dataIdx)` instead.\r\n   */\n  SeriesData.prototype.get = function (dim, idx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.get(dimInfo.storeDimIndex, idx);\n    }\n  };\n  /**\r\n   * @notice Should better to use `data.getStore().getByRawIndex(dimIndex, dataIdx)` instead.\r\n   */\n  SeriesData.prototype.getByRawIndex = function (dim, rawIdx) {\n    var store = this._store;\n    var dimInfo = this._dimInfos[dim];\n    if (dimInfo) {\n      return store.getByRawIndex(dimInfo.storeDimIndex, rawIdx);\n    }\n  };\n  SeriesData.prototype.getIndices = function () {\n    return this._store.getIndices();\n  };\n  SeriesData.prototype.getDataExtent = function (dim) {\n    return this._store.getDataExtent(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getSum = function (dim) {\n    return this._store.getSum(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getMedian = function (dim) {\n    return this._store.getMedian(this._getStoreDimIndex(dim));\n  };\n  SeriesData.prototype.getValues = function (dimensions, idx) {\n    var _this = this;\n    var store = this._store;\n    return zrUtil.isArray(dimensions) ? store.getValues(map(dimensions, function (dim) {\n      return _this._getStoreDimIndex(dim);\n    }), idx) : store.getValues(dimensions);\n  };\n  /**\r\n   * If value is NaN. Including '-'\r\n   * Only check the coord dimensions.\r\n   */\n  SeriesData.prototype.hasValue = function (idx) {\n    var dataDimIndicesOnCoord = this._dimSummary.dataDimIndicesOnCoord;\n    for (var i = 0, len = dataDimIndicesOnCoord.length; i < len; i++) {\n      // Ordinal type originally can be string or number.\n      // But when an ordinal type is used on coord, it can\n      // not be string but only number. So we can also use isNaN.\n      if (isNaN(this._store.get(dataDimIndicesOnCoord[i], idx))) {\n        return false;\n      }\n    }\n    return true;\n  };\n  /**\r\n   * Retrieve the index with given name\r\n   */\n  SeriesData.prototype.indexOfName = function (name) {\n    for (var i = 0, len = this._store.count(); i < len; i++) {\n      if (this.getName(i) === name) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  SeriesData.prototype.getRawIndex = function (idx) {\n    return this._store.getRawIndex(idx);\n  };\n  SeriesData.prototype.indexOfRawIndex = function (rawIndex) {\n    return this._store.indexOfRawIndex(rawIndex);\n  };\n  /**\r\n   * Only support the dimension which inverted index created.\r\n   * Do not support other cases until required.\r\n   * @param dim concrete dim\r\n   * @param value ordinal index\r\n   * @return rawIndex\r\n   */\n  SeriesData.prototype.rawIndexOf = function (dim, value) {\n    var invertedIndices = dim && this._invertedIndicesMap[dim];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!invertedIndices) {\n        throw new Error('Do not supported yet');\n      }\n    }\n    var rawIndex = invertedIndices && invertedIndices[value];\n    if (rawIndex == null || isNaN(rawIndex)) {\n      return INDEX_NOT_FOUND;\n    }\n    return rawIndex;\n  };\n  /**\r\n   * Retrieve the index of nearest value\r\n   * @param dim\r\n   * @param value\r\n   * @param [maxDistance=Infinity]\r\n   * @return If and only if multiple indices has\r\n   *         the same value, they are put to the result.\r\n   */\n  SeriesData.prototype.indicesOfNearest = function (dim, value, maxDistance) {\n    return this._store.indicesOfNearest(this._getStoreDimIndex(dim), value, maxDistance);\n  };\n  SeriesData.prototype.each = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store.each(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  SeriesData.prototype.filterSelf = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    this._store = this._store.filter(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return this;\n  };\n  /**\r\n   * Select data in range. (For optimization of filter)\r\n   * (Manually inline code, support 5 million data filtering in data zoom.)\r\n   */\n  SeriesData.prototype.selectRange = function (range) {\n    'use strict';\n\n    var _this = this;\n    var innerRange = {};\n    var dims = zrUtil.keys(range);\n    var dimIndices = [];\n    zrUtil.each(dims, function (dim) {\n      var dimIdx = _this._getStoreDimIndex(dim);\n      innerRange[dimIdx] = range[dim];\n      dimIndices.push(dimIdx);\n    });\n    this._store = this._store.selectRange(innerRange);\n    return this;\n  };\n  /* eslint-enable max-len */\n  SeriesData.prototype.mapArray = function (dims, cb, ctx) {\n    'use strict';\n\n    if (zrUtil.isFunction(dims)) {\n      ctx = cb;\n      cb = dims;\n      dims = [];\n    }\n    // ctxCompat just for compat echarts3\n    ctx = ctx || this;\n    var result = [];\n    this.each(dims, function () {\n      result.push(cb && cb.apply(this, arguments));\n    }, ctx);\n    return result;\n  };\n  SeriesData.prototype.map = function (dims, cb, ctx, ctxCompat) {\n    'use strict';\n\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.map(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n    return list;\n  };\n  SeriesData.prototype.modify = function (dims, cb, ctx, ctxCompat) {\n    var _this = this;\n    // ctxCompat just for compat echarts3\n    var fCtx = ctx || ctxCompat || this;\n    if (process.env.NODE_ENV !== 'production') {\n      zrUtil.each(normalizeDimensions(dims), function (dim) {\n        var dimInfo = _this.getDimensionInfo(dim);\n        if (!dimInfo.isCalculationCoord) {\n          console.error('Danger: only stack dimension can be modified');\n        }\n      });\n    }\n    var dimIndices = map(normalizeDimensions(dims), this._getStoreDimIndex, this);\n    // If do shallow clone here, if there are too many stacked series,\n    // it still cost lots of memory, because `_store.dimensions` are not shared.\n    // We should consider there probably be shallow clone happen in each series\n    // in consequent filter/map.\n    this._store.modify(dimIndices, fCtx ? zrUtil.bind(cb, fCtx) : cb);\n  };\n  /**\r\n   * Large data down sampling on given dimension\r\n   * @param sampleIndex Sample index for name and id\r\n   */\n  SeriesData.prototype.downSample = function (dimension, rate, sampleValue, sampleIndex) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.downSample(this._getStoreDimIndex(dimension), rate, sampleValue, sampleIndex);\n    return list;\n  };\n  /**\r\n   * Large data down sampling using min-max\r\n   * @param {string} valueDimension\r\n   * @param {number} rate\r\n   */\n  SeriesData.prototype.minmaxDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.minmaxDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  /**\r\n   * Large data down sampling using largest-triangle-three-buckets\r\n   * @param {string} valueDimension\r\n   * @param {number} targetCount\r\n   */\n  SeriesData.prototype.lttbDownSample = function (valueDimension, rate) {\n    var list = cloneListForMapAndSample(this);\n    list._store = this._store.lttbDownSample(this._getStoreDimIndex(valueDimension), rate);\n    return list;\n  };\n  SeriesData.prototype.getRawDataItem = function (idx) {\n    return this._store.getRawDataItem(idx);\n  };\n  /**\r\n   * Get model of one data item.\r\n   */\n  // TODO: Type of data item\n  SeriesData.prototype.getItemModel = function (idx) {\n    var hostModel = this.hostModel;\n    var dataItem = this.getRawDataItem(idx);\n    return new Model(dataItem, hostModel, hostModel && hostModel.ecModel);\n  };\n  /**\r\n   * Create a data differ\r\n   */\n  SeriesData.prototype.diff = function (otherList) {\n    var thisList = this;\n    return new DataDiffer(otherList ? otherList.getStore().getIndices() : [], this.getStore().getIndices(), function (idx) {\n      return getId(otherList, idx);\n    }, function (idx) {\n      return getId(thisList, idx);\n    });\n  };\n  /**\r\n   * Get visual property.\r\n   */\n  SeriesData.prototype.getVisual = function (key) {\n    var visual = this._visual;\n    return visual && visual[key];\n  };\n  SeriesData.prototype.setVisual = function (kvObj, val) {\n    this._visual = this._visual || {};\n    if (isObject(kvObj)) {\n      zrUtil.extend(this._visual, kvObj);\n    } else {\n      this._visual[kvObj] = val;\n    }\n  };\n  /**\r\n   * Get visual property of single data item\r\n   */\n  // eslint-disable-next-line\n  SeriesData.prototype.getItemVisual = function (idx, key) {\n    var itemVisual = this._itemVisuals[idx];\n    var val = itemVisual && itemVisual[key];\n    if (val == null) {\n      // Use global visual property\n      return this.getVisual(key);\n    }\n    return val;\n  };\n  /**\r\n   * If exists visual property of single data item\r\n   */\n  SeriesData.prototype.hasItemVisual = function () {\n    return this._itemVisuals.length > 0;\n  };\n  /**\r\n   * Make sure itemVisual property is unique\r\n   */\n  // TODO: use key to save visual to reduce memory.\n  SeriesData.prototype.ensureUniqueItemVisual = function (idx, key) {\n    var itemVisuals = this._itemVisuals;\n    var itemVisual = itemVisuals[idx];\n    if (!itemVisual) {\n      itemVisual = itemVisuals[idx] = {};\n    }\n    var val = itemVisual[key];\n    if (val == null) {\n      val = this.getVisual(key);\n      // TODO Performance?\n      if (zrUtil.isArray(val)) {\n        val = val.slice();\n      } else if (isObject(val)) {\n        val = zrUtil.extend({}, val);\n      }\n      itemVisual[key] = val;\n    }\n    return val;\n  };\n  // eslint-disable-next-line\n  SeriesData.prototype.setItemVisual = function (idx, key, value) {\n    var itemVisual = this._itemVisuals[idx] || {};\n    this._itemVisuals[idx] = itemVisual;\n    if (isObject(key)) {\n      zrUtil.extend(itemVisual, key);\n    } else {\n      itemVisual[key] = value;\n    }\n  };\n  /**\r\n   * Clear itemVisuals and list visual.\r\n   */\n  SeriesData.prototype.clearAllVisual = function () {\n    this._visual = {};\n    this._itemVisuals = [];\n  };\n  SeriesData.prototype.setLayout = function (key, val) {\n    isObject(key) ? zrUtil.extend(this._layout, key) : this._layout[key] = val;\n  };\n  /**\r\n   * Get layout property.\r\n   */\n  SeriesData.prototype.getLayout = function (key) {\n    return this._layout[key];\n  };\n  /**\r\n   * Get layout of single data item\r\n   */\n  SeriesData.prototype.getItemLayout = function (idx) {\n    return this._itemLayouts[idx];\n  };\n  /**\r\n   * Set layout of single data item\r\n   */\n  SeriesData.prototype.setItemLayout = function (idx, layout, merge) {\n    this._itemLayouts[idx] = merge ? zrUtil.extend(this._itemLayouts[idx] || {}, layout) : layout;\n  };\n  /**\r\n   * Clear all layout of single data item\r\n   */\n  SeriesData.prototype.clearItemLayouts = function () {\n    this._itemLayouts.length = 0;\n  };\n  /**\r\n   * Set graphic element relative to data. It can be set as null\r\n   */\n  SeriesData.prototype.setItemGraphicEl = function (idx, el) {\n    var seriesIndex = this.hostModel && this.hostModel.seriesIndex;\n    setCommonECData(seriesIndex, this.dataType, idx, el);\n    this._graphicEls[idx] = el;\n  };\n  SeriesData.prototype.getItemGraphicEl = function (idx) {\n    return this._graphicEls[idx];\n  };\n  SeriesData.prototype.eachItemGraphicEl = function (cb, context) {\n    zrUtil.each(this._graphicEls, function (el, idx) {\n      if (el) {\n        cb && cb.call(context, el, idx);\n      }\n    });\n  };\n  /**\r\n   * Shallow clone a new list except visual and layout properties, and graph elements.\r\n   * New list only change the indices.\r\n   */\n  SeriesData.prototype.cloneShallow = function (list) {\n    if (!list) {\n      list = new SeriesData(this._schema ? this._schema : map(this.dimensions, this._getDimInfo, this), this.hostModel);\n    }\n    transferProperties(list, this);\n    list._store = this._store;\n    return list;\n  };\n  /**\r\n   * Wrap some method to add more feature\r\n   */\n  SeriesData.prototype.wrapMethod = function (methodName, injectFunction) {\n    var originalMethod = this[methodName];\n    if (!zrUtil.isFunction(originalMethod)) {\n      return;\n    }\n    this.__wrappedMethods = this.__wrappedMethods || [];\n    this.__wrappedMethods.push(methodName);\n    this[methodName] = function () {\n      var res = originalMethod.apply(this, arguments);\n      return injectFunction.apply(this, [res].concat(zrUtil.slice(arguments)));\n    };\n  };\n  // ----------------------------------------------------------\n  // A work around for internal method visiting private member.\n  // ----------------------------------------------------------\n  SeriesData.internalField = function () {\n    prepareInvertedIndex = function (data) {\n      var invertedIndicesMap = data._invertedIndicesMap;\n      zrUtil.each(invertedIndicesMap, function (invertedIndices, dim) {\n        var dimInfo = data._dimInfos[dim];\n        // Currently, only dimensions that has ordinalMeta can create inverted indices.\n        var ordinalMeta = dimInfo.ordinalMeta;\n        var store = data._store;\n        if (ordinalMeta) {\n          invertedIndices = invertedIndicesMap[dim] = new CtorInt32Array(ordinalMeta.categories.length);\n          // The default value of TypedArray is 0. To avoid miss\n          // mapping to 0, we should set it as INDEX_NOT_FOUND.\n          for (var i = 0; i < invertedIndices.length; i++) {\n            invertedIndices[i] = INDEX_NOT_FOUND;\n          }\n          for (var i = 0; i < store.count(); i++) {\n            // Only support the case that all values are distinct.\n            invertedIndices[store.get(dimInfo.storeDimIndex, i)] = i;\n          }\n        }\n      });\n    };\n    getIdNameFromStore = function (data, dimIdx, idx) {\n      return convertOptionIdName(data._getCategory(dimIdx, idx), null);\n    };\n    /**\r\n     * @see the comment of `List['getId']`.\r\n     */\n    getId = function (data, rawIndex) {\n      var id = data._idList[rawIndex];\n      if (id == null && data._idDimIdx != null) {\n        id = getIdNameFromStore(data, data._idDimIdx, rawIndex);\n      }\n      if (id == null) {\n        id = ID_PREFIX + rawIndex;\n      }\n      return id;\n    };\n    normalizeDimensions = function (dimensions) {\n      if (!zrUtil.isArray(dimensions)) {\n        dimensions = dimensions != null ? [dimensions] : [];\n      }\n      return dimensions;\n    };\n    /**\r\n     * Data in excludeDimensions is copied, otherwise transferred.\r\n     */\n    cloneListForMapAndSample = function (original) {\n      var list = new SeriesData(original._schema ? original._schema : map(original.dimensions, original._getDimInfo, original), original.hostModel);\n      // FIXME If needs stackedOn, value may already been stacked\n      transferProperties(list, original);\n      return list;\n    };\n    transferProperties = function (target, source) {\n      zrUtil.each(TRANSFERABLE_PROPERTIES.concat(source.__wrappedMethods || []), function (propName) {\n        if (source.hasOwnProperty(propName)) {\n          target[propName] = source[propName];\n        }\n      });\n      target.__wrappedMethods = source.__wrappedMethods;\n      zrUtil.each(CLONE_PROPERTIES, function (propName) {\n        target[propName] = zrUtil.clone(source[propName]);\n      });\n      target._calculationInfo = zrUtil.extend({}, source._calculationInfo);\n    };\n    makeIdFromName = function (data, idx) {\n      var nameList = data._nameList;\n      var idList = data._idList;\n      var nameDimIdx = data._nameDimIdx;\n      var idDimIdx = data._idDimIdx;\n      var name = nameList[idx];\n      var id = idList[idx];\n      if (name == null && nameDimIdx != null) {\n        nameList[idx] = name = getIdNameFromStore(data, nameDimIdx, idx);\n      }\n      if (id == null && idDimIdx != null) {\n        idList[idx] = id = getIdNameFromStore(data, idDimIdx, idx);\n      }\n      if (id == null && name != null) {\n        var nameRepeatCount = data._nameRepeatCount;\n        var nmCnt = nameRepeatCount[name] = (nameRepeatCount[name] || 0) + 1;\n        id = name;\n        if (nmCnt > 1) {\n          id += '__ec__' + nmCnt;\n        }\n        idList[idx] = id;\n      }\n    };\n  }();\n  return SeriesData;\n}();\nexport default SeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { VISUAL_DIMENSIONS } from '../../util/types.js';\nimport SeriesDimensionDefine from '../SeriesDimensionDefine.js';\nimport { createHashMap, defaults, each, extend, isObject, isString } from 'zrender/lib/core/util.js';\nimport { createSourceFromSeriesDataOption, isSourceInstance } from '../Source.js';\nimport { CtorInt32Array } from '../DataStore.js';\nimport { normalizeToArray } from '../../util/model.js';\nimport { BE_ORDINAL, guessOrdinal } from './sourceHelper.js';\nimport { createDimNameMap, ensureSourceDimNameMap, SeriesDataSchema, shouldOmitUnusedDimensions } from './SeriesDataSchema.js';\n/**\r\n * For outside usage compat (like echarts-gl are using it).\r\n */\nexport function createDimensions(source, opt) {\n  return prepareSeriesDataSchema(source, opt).dimensions;\n}\n/**\r\n * This method builds the relationship between:\r\n * + \"what the coord sys or series requires (see `coordDimensions`)\",\r\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimensionsDefine` and `opt.encodeDefine`)\"\r\n * + \"what the data source provids (see `source`)\".\r\n *\r\n * Some guess strategy will be adapted if user does not define something.\r\n * If no 'value' dimension specified, the first no-named dimension will be\r\n * named as 'value'.\r\n *\r\n * @return The results are always sorted by `storeDimIndex` asc.\r\n */\nexport default function prepareSeriesDataSchema(\n// TODO: TYPE completeDimensions type\nsource, opt) {\n  if (!isSourceInstance(source)) {\n    source = createSourceFromSeriesDataOption(source);\n  }\n  opt = opt || {};\n  var sysDims = opt.coordDimensions || [];\n  var dimsDef = opt.dimensionsDefine || source.dimensionsDefine || [];\n  var coordDimNameMap = createHashMap();\n  var resultList = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimensionsCount);\n  // Try to ignore unused dimensions if sharing a high dimension datastore\n  // 30 is an experience value.\n  var omitUnusedDimensions = opt.canOmitUnusedDimensions && shouldOmitUnusedDimensions(dimCount);\n  var isUsingSourceDimensionsDef = dimsDef === source.dimensionsDefine;\n  var dataDimNameMap = isUsingSourceDimensionsDef ? ensureSourceDimNameMap(source) : createDimNameMap(dimsDef);\n  var encodeDef = opt.encodeDefine;\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n  var encodeDefMap = createHashMap(encodeDef);\n  var indicesMap = new CtorInt32Array(dimCount);\n  for (var i = 0; i < indicesMap.length; i++) {\n    indicesMap[i] = -1;\n  }\n  function getResultItem(dimIdx) {\n    var idx = indicesMap[dimIdx];\n    if (idx < 0) {\n      var dimDefItemRaw = dimsDef[dimIdx];\n      var dimDefItem = isObject(dimDefItemRaw) ? dimDefItemRaw : {\n        name: dimDefItemRaw\n      };\n      var resultItem = new SeriesDimensionDefine();\n      var userDimName = dimDefItem.name;\n      if (userDimName != null && dataDimNameMap.get(userDimName) != null) {\n        // Only if `series.dimensions` is defined in option\n        // displayName, will be set, and dimension will be displayed vertically in\n        // tooltip by default.\n        resultItem.name = resultItem.displayName = userDimName;\n      }\n      dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n      dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n      var newIdx = resultList.length;\n      indicesMap[dimIdx] = newIdx;\n      resultItem.storeDimIndex = dimIdx;\n      resultList.push(resultItem);\n      return resultItem;\n    }\n    return resultList[idx];\n  }\n  if (!omitUnusedDimensions) {\n    for (var i = 0; i < dimCount; i++) {\n      getResultItem(i);\n    }\n  }\n  // Set `coordDim` and `coordDimIndex` by `encodeDefMap` and normalize `encodeDefMap`.\n  encodeDefMap.each(function (dataDimsRaw, coordDim) {\n    var dataDims = normalizeToArray(dataDimsRaw).slice();\n    // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDefMap.set(coordDim, false);\n      return;\n    }\n    var validDataDims = encodeDefMap.set(coordDim, []);\n    each(dataDims, function (resultDimIdxOrName, idx) {\n      // The input resultDimIdx can be dim name or index.\n      var resultDimIdx = isString(resultDimIdxOrName) ? dataDimNameMap.get(resultDimIdxOrName) : resultDimIdxOrName;\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(getResultItem(resultDimIdx), coordDim, idx);\n      }\n    });\n  });\n  // Apply templates and default order from `sysDims`.\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItemRaw) {\n    var coordDim;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n    var sysDimItem;\n    if (isString(sysDimItemRaw)) {\n      coordDim = sysDimItemRaw;\n      sysDimItem = {};\n    } else {\n      sysDimItem = sysDimItemRaw;\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = extend({}, sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta;\n      // `coordDimIndex` should not be set directly.\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n    var dataDims = encodeDefMap.get(coordDim);\n    // negative resultDimIdx means no need to mapping.\n    if (dataDims === false) {\n      return;\n    }\n    dataDims = normalizeToArray(dataDims);\n    // dimensions provides default dim sequences.\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < dimCount && getResultItem(availDimIdx).coordDim != null) {\n          availDimIdx++;\n        }\n        availDimIdx < dimCount && dataDims.push(availDimIdx++);\n      }\n    }\n    // Apply templates.\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = getResultItem(resultDimIdx);\n      // Coordinate system has a higher priority on dim type than source.\n      if (isUsingSourceDimensionsDef && sysDimItem.type != null) {\n        resultItem.type = sysDimItem.type;\n      }\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      }\n      // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (VISUAL_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  }\n  // Make sure the first extra dim is 'value'.\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value';\n  function ifNoNameFillWithCoordName(resultItem) {\n    if (resultItem.name == null) {\n      // Duplication will be removed in the next step.\n      resultItem.name = resultItem.coordDim;\n    }\n  }\n  // Set dim `name` and other `coordDim` and other props.\n  if (!omitUnusedDimensions) {\n    for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n      var resultItem = getResultItem(resultDimIdx);\n      var coordDim = resultItem.coordDim;\n      if (coordDim == null) {\n        // TODO no need to generate coordDim for isExtraCoord?\n        resultItem.coordDim = genCoordDimName(extra, coordDimNameMap, fromZero);\n        resultItem.coordDimIndex = 0;\n        // Series specified generateCoord is using out.\n        if (!generateCoord || generateCoordCount <= 0) {\n          resultItem.isExtraCoord = true;\n        }\n        generateCoordCount--;\n      }\n      ifNoNameFillWithCoordName(resultItem);\n      if (resultItem.type == null && (guessOrdinal(source, resultDimIdx) === BE_ORDINAL.Must\n      // Consider the case:\n      // {\n      //    dataset: {source: [\n      //        ['2001', 123],\n      //        ['2002', 456],\n      //        ...\n      //        ['The others', 987],\n      //    ]},\n      //    series: {type: 'pie'}\n      // }\n      // The first column should better be treated as a \"ordinal\" although it\n      // might not be detected as an \"ordinal\" by `guessOrdinal`.\n      || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n        resultItem.type = 'ordinal';\n      }\n    }\n  } else {\n    each(resultList, function (resultItem) {\n      // PENDING: guessOrdinal or let user specify type: 'ordinal' manually?\n      ifNoNameFillWithCoordName(resultItem);\n    });\n    // Sort dimensions: there are some rule that use the last dim as label,\n    // and for some latter travel process easier.\n    resultList.sort(function (item0, item1) {\n      return item0.storeDimIndex - item1.storeDimIndex;\n    });\n  }\n  removeDuplication(resultList);\n  return new SeriesDataSchema({\n    source: source,\n    dimensions: resultList,\n    fullDimensionCount: dimCount,\n    dimensionOmitted: omitUnusedDimensions\n  });\n}\nfunction removeDuplication(result) {\n  var duplicationMap = createHashMap();\n  for (var i = 0; i < result.length; i++) {\n    var dim = result[i];\n    var dimOriginalName = dim.name;\n    var count = duplicationMap.get(dimOriginalName) || 0;\n    if (count > 0) {\n      // Starts from 0.\n      dim.name = dimOriginalName + (count - 1);\n    }\n    count++;\n    duplicationMap.set(dimOriginalName, count);\n  }\n}\n// ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calculate bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in data store?\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectedCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef;\n    if (isObject(sysDimItem) && (sysDimItemDimsDef = sysDimItem.dimsDef)) {\n      dimCount = Math.max(dimCount, sysDimItemDimsDef.length);\n    }\n  });\n  return dimCount;\n}\nfunction genCoordDimName(name, map, fromZero) {\n  if (fromZero || map.hasKey(name)) {\n    var i = 0;\n    while (map.hasKey(name + i)) {\n      i++;\n    }\n    name += i;\n  }\n  map.set(name, true);\n  return name;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Helper for model references.\r\n * There are many manners to refer axis/coordSys.\r\n */\n// TODO\n// merge relevant logic to this file?\n// check: \"modelHelper\" of tooltip and \"BrushTargetManager\".\nimport { createHashMap, retrieve, each } from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../util/model.js';\n/**\r\n * @class\r\n * For example:\r\n * {\r\n *     coordSysName: 'cartesian2d',\r\n *     coordSysDims: ['x', 'y', ...],\r\n *     axisMap: HashMap({\r\n *         x: xAxisModel,\r\n *         y: yAxisModel\r\n *     }),\r\n *     categoryAxisMap: HashMap({\r\n *         x: xAxisModel,\r\n *         y: undefined\r\n *     }),\r\n *     // The index of the first category axis in `coordSysDims`.\r\n *     // `null/undefined` means no category axis exists.\r\n *     firstCategoryDimIndex: 1,\r\n *     // To replace user specified encode.\r\n * }\r\n */\nvar CoordSysInfo = /** @class */function () {\n  function CoordSysInfo(coordSysName) {\n    this.coordSysDims = [];\n    this.axisMap = createHashMap();\n    this.categoryAxisMap = createHashMap();\n    this.coordSysName = coordSysName;\n  }\n  return CoordSysInfo;\n}();\nexport function getCoordSysInfoBySeries(seriesModel) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var result = new CoordSysInfo(coordSysName);\n  var fetch = fetchers[coordSysName];\n  if (fetch) {\n    fetch(seriesModel, result, result.axisMap, result.categoryAxisMap);\n    return result;\n  }\n}\nvar fetchers = {\n  cartesian2d: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var xAxisModel = seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!xAxisModel) {\n        throw new Error('xAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('xAxisId'), 0) + '\" not found');\n      }\n      if (!yAxisModel) {\n        throw new Error('yAxis \"' + retrieve(seriesModel.get('xAxisIndex'), seriesModel.get('yAxisId'), 0) + '\" not found');\n      }\n    }\n    result.coordSysDims = ['x', 'y'];\n    axisMap.set('x', xAxisModel);\n    axisMap.set('y', yAxisModel);\n    if (isCategory(xAxisModel)) {\n      categoryAxisMap.set('x', xAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(yAxisModel)) {\n      categoryAxisMap.set('y', yAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  singleAxis: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var singleAxisModel = seriesModel.getReferringComponents('singleAxis', SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!singleAxisModel) {\n        throw new Error('singleAxis should be specified.');\n      }\n    }\n    result.coordSysDims = ['single'];\n    axisMap.set('single', singleAxisModel);\n    if (isCategory(singleAxisModel)) {\n      categoryAxisMap.set('single', singleAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n  },\n  polar: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n    var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n    var angleAxisModel = polarModel.findAxisModel('angleAxis');\n    if (process.env.NODE_ENV !== 'production') {\n      if (!angleAxisModel) {\n        throw new Error('angleAxis option not found');\n      }\n      if (!radiusAxisModel) {\n        throw new Error('radiusAxis option not found');\n      }\n    }\n    result.coordSysDims = ['radius', 'angle'];\n    axisMap.set('radius', radiusAxisModel);\n    axisMap.set('angle', angleAxisModel);\n    if (isCategory(radiusAxisModel)) {\n      categoryAxisMap.set('radius', radiusAxisModel);\n      result.firstCategoryDimIndex = 0;\n    }\n    if (isCategory(angleAxisModel)) {\n      categoryAxisMap.set('angle', angleAxisModel);\n      result.firstCategoryDimIndex == null && (result.firstCategoryDimIndex = 1);\n    }\n  },\n  geo: function (seriesModel, result, axisMap, categoryAxisMap) {\n    result.coordSysDims = ['lng', 'lat'];\n  },\n  parallel: function (seriesModel, result, axisMap, categoryAxisMap) {\n    var ecModel = seriesModel.ecModel;\n    var parallelModel = ecModel.getComponent('parallel', seriesModel.get('parallelIndex'));\n    var coordSysDims = result.coordSysDims = parallelModel.dimensions.slice();\n    each(parallelModel.parallelAxisIndex, function (axisIndex, index) {\n      var axisModel = ecModel.getComponent('parallelAxis', axisIndex);\n      var axisDim = coordSysDims[index];\n      axisMap.set(axisDim, axisModel);\n      if (isCategory(axisModel)) {\n        categoryAxisMap.set(axisDim, axisModel);\n        if (result.firstCategoryDimIndex == null) {\n          result.firstCategoryDimIndex = index;\n        }\n      }\n    });\n  }\n};\nfunction isCategory(axisModel) {\n  return axisModel.get('type') === 'category';\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, isString } from 'zrender/lib/core/util.js';\nimport { isSeriesDataSchema } from './SeriesDataSchema.js';\n/**\r\n * Note that it is too complicated to support 3d stack by value\r\n * (have to create two-dimension inverted index), so in 3d case\r\n * we just support that stacked by index.\r\n *\r\n * @param seriesModel\r\n * @param dimensionsInput The same as the input of <module:echarts/data/SeriesData>.\r\n *        The input will be modified.\r\n * @param opt\r\n * @param opt.stackedCoordDimension Specify a coord dimension if needed.\r\n * @param opt.byIndex=false\r\n * @return calculationInfo\r\n * {\r\n *     stackedDimension: string\r\n *     stackedByDimension: string\r\n *     isStackedByIndex: boolean\r\n *     stackedOverDimension: string\r\n *     stackResultDimension: string\r\n * }\r\n */\nexport function enableDataStack(seriesModel, dimensionsInput, opt) {\n  opt = opt || {};\n  var byIndex = opt.byIndex;\n  var stackedCoordDimension = opt.stackedCoordDimension;\n  var dimensionDefineList;\n  var schema;\n  var store;\n  if (isLegacyDimensionsInput(dimensionsInput)) {\n    dimensionDefineList = dimensionsInput;\n  } else {\n    schema = dimensionsInput.schema;\n    dimensionDefineList = schema.dimensions;\n    store = dimensionsInput.store;\n  }\n  // Compatibal: when `stack` is set as '', do not stack.\n  var mayStack = !!(seriesModel && seriesModel.get('stack'));\n  var stackedByDimInfo;\n  var stackedDimInfo;\n  var stackResultDimension;\n  var stackedOverDimension;\n  each(dimensionDefineList, function (dimensionInfo, index) {\n    if (isString(dimensionInfo)) {\n      dimensionDefineList[index] = dimensionInfo = {\n        name: dimensionInfo\n      };\n    }\n    if (mayStack && !dimensionInfo.isExtraCoord) {\n      // Find the first ordinal dimension as the stackedByDimInfo.\n      if (!byIndex && !stackedByDimInfo && dimensionInfo.ordinalMeta) {\n        stackedByDimInfo = dimensionInfo;\n      }\n      // Find the first stackable dimension as the stackedDimInfo.\n      if (!stackedDimInfo && dimensionInfo.type !== 'ordinal' && dimensionInfo.type !== 'time' && (!stackedCoordDimension || stackedCoordDimension === dimensionInfo.coordDim)) {\n        stackedDimInfo = dimensionInfo;\n      }\n    }\n  });\n  if (stackedDimInfo && !byIndex && !stackedByDimInfo) {\n    // Compatible with previous design, value axis (time axis) only stack by index.\n    // It may make sense if the user provides elaborately constructed data.\n    byIndex = true;\n  }\n  // Add stack dimension, they can be both calculated by coordinate system in `unionExtent`.\n  // That put stack logic in List is for using conveniently in echarts extensions, but it\n  // might not be a good way.\n  if (stackedDimInfo) {\n    // Use a weird name that not duplicated with other names.\n    // Also need to use seriesModel.id as postfix because different\n    // series may share same data store. The stack dimension needs to be distinguished.\n    stackResultDimension = '__\\0ecstackresult_' + seriesModel.id;\n    stackedOverDimension = '__\\0ecstackedover_' + seriesModel.id;\n    // Create inverted index to fast query index by value.\n    if (stackedByDimInfo) {\n      stackedByDimInfo.createInvertedIndices = true;\n    }\n    var stackedDimCoordDim_1 = stackedDimInfo.coordDim;\n    var stackedDimType = stackedDimInfo.type;\n    var stackedDimCoordIndex_1 = 0;\n    each(dimensionDefineList, function (dimensionInfo) {\n      if (dimensionInfo.coordDim === stackedDimCoordDim_1) {\n        stackedDimCoordIndex_1++;\n      }\n    });\n    var stackedOverDimensionDefine = {\n      name: stackResultDimension,\n      coordDim: stackedDimCoordDim_1,\n      coordDimIndex: stackedDimCoordIndex_1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length\n    };\n    var stackResultDimensionDefine = {\n      name: stackedOverDimension,\n      // This dimension contains stack base (generally, 0), so do not set it as\n      // `stackedDimCoordDim` to avoid extent calculation, consider log scale.\n      coordDim: stackedOverDimension,\n      coordDimIndex: stackedDimCoordIndex_1 + 1,\n      type: stackedDimType,\n      isExtraCoord: true,\n      isCalculationCoord: true,\n      storeDimIndex: dimensionDefineList.length + 1\n    };\n    if (schema) {\n      if (store) {\n        stackedOverDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackedOverDimension, stackedDimType);\n        stackResultDimensionDefine.storeDimIndex = store.ensureCalculationDimension(stackResultDimension, stackedDimType);\n      }\n      schema.appendCalculationDimension(stackedOverDimensionDefine);\n      schema.appendCalculationDimension(stackResultDimensionDefine);\n    } else {\n      dimensionDefineList.push(stackedOverDimensionDefine);\n      dimensionDefineList.push(stackResultDimensionDefine);\n    }\n  }\n  return {\n    stackedDimension: stackedDimInfo && stackedDimInfo.name,\n    stackedByDimension: stackedByDimInfo && stackedByDimInfo.name,\n    isStackedByIndex: byIndex,\n    stackedOverDimension: stackedOverDimension,\n    stackResultDimension: stackResultDimension\n  };\n}\nfunction isLegacyDimensionsInput(dimensionsInput) {\n  return !isSeriesDataSchema(dimensionsInput.schema);\n}\nexport function isDimensionStacked(data, stackedDim) {\n  // Each single series only maps to one pair of axis. So we do not need to\n  // check stackByDim, whatever stacked by a dimension or stacked by index.\n  return !!stackedDim && stackedDim === data.getCalculationInfo('stackedDimension');\n}\nexport function getStackedDimension(data, targetDim) {\n  return isDimensionStacked(data, targetDim) ? data.getCalculationInfo('stackResultDimension') : targetDim;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SeriesData from '../../data/SeriesData.js';\nimport prepareSeriesDataSchema from '../../data/helper/createDimensions.js';\nimport { getDimensionTypeByAxis } from '../../data/helper/dimensionHelper.js';\nimport { getDataItemValue } from '../../util/model.js';\nimport CoordinateSystem from '../../core/CoordinateSystem.js';\nimport { getCoordSysInfoBySeries } from '../../model/referHelper.js';\nimport { createSourceFromSeriesDataOption } from '../../data/Source.js';\nimport { enableDataStack } from '../../data/helper/dataStackHelper.js';\nimport { makeSeriesEncodeForAxisCoordSys } from '../../data/helper/sourceHelper.js';\nimport { SOURCE_FORMAT_ORIGINAL } from '../../util/types.js';\nfunction getCoordSysDimDefs(seriesModel, coordSysInfo) {\n  var coordSysName = seriesModel.get('coordinateSystem');\n  var registeredCoordSys = CoordinateSystem.get(coordSysName);\n  var coordSysDimDefs;\n  if (coordSysInfo && coordSysInfo.coordSysDims) {\n    coordSysDimDefs = zrUtil.map(coordSysInfo.coordSysDims, function (dim) {\n      var dimInfo = {\n        name: dim\n      };\n      var axisModel = coordSysInfo.axisMap.get(dim);\n      if (axisModel) {\n        var axisType = axisModel.get('type');\n        dimInfo.type = getDimensionTypeByAxis(axisType);\n      }\n      return dimInfo;\n    });\n  }\n  if (!coordSysDimDefs) {\n    // Get dimensions from registered coordinate system\n    coordSysDimDefs = registeredCoordSys && (registeredCoordSys.getDimensionsInfo ? registeredCoordSys.getDimensionsInfo() : registeredCoordSys.dimensions.slice()) || ['x', 'y'];\n  }\n  return coordSysDimDefs;\n}\nfunction injectOrdinalMeta(dimInfoList, createInvertedIndices, coordSysInfo) {\n  var firstCategoryDimIndex;\n  var hasNameEncode;\n  coordSysInfo && zrUtil.each(dimInfoList, function (dimInfo, dimIndex) {\n    var coordDim = dimInfo.coordDim;\n    var categoryAxisModel = coordSysInfo.categoryAxisMap.get(coordDim);\n    if (categoryAxisModel) {\n      if (firstCategoryDimIndex == null) {\n        firstCategoryDimIndex = dimIndex;\n      }\n      dimInfo.ordinalMeta = categoryAxisModel.getOrdinalMeta();\n      if (createInvertedIndices) {\n        dimInfo.createInvertedIndices = true;\n      }\n    }\n    if (dimInfo.otherDims.itemName != null) {\n      hasNameEncode = true;\n    }\n  });\n  if (!hasNameEncode && firstCategoryDimIndex != null) {\n    dimInfoList[firstCategoryDimIndex].otherDims.itemName = 0;\n  }\n  return firstCategoryDimIndex;\n}\n/**\r\n * Caution: there are side effects to `sourceManager` in this method.\r\n * Should better only be called in `Series['getInitialData']`.\r\n */\nfunction createSeriesData(sourceRaw, seriesModel, opt) {\n  opt = opt || {};\n  var sourceManager = seriesModel.getSourceManager();\n  var source;\n  var isOriginalSource = false;\n  if (sourceRaw) {\n    isOriginalSource = true;\n    source = createSourceFromSeriesDataOption(sourceRaw);\n  } else {\n    source = sourceManager.getSource();\n    // Is series.data. not dataset.\n    isOriginalSource = source.sourceFormat === SOURCE_FORMAT_ORIGINAL;\n  }\n  var coordSysInfo = getCoordSysInfoBySeries(seriesModel);\n  var coordSysDimDefs = getCoordSysDimDefs(seriesModel, coordSysInfo);\n  var useEncodeDefaulter = opt.useEncodeDefaulter;\n  var encodeDefaulter = zrUtil.isFunction(useEncodeDefaulter) ? useEncodeDefaulter : useEncodeDefaulter ? zrUtil.curry(makeSeriesEncodeForAxisCoordSys, coordSysDimDefs, seriesModel) : null;\n  var createDimensionOptions = {\n    coordDimensions: coordSysDimDefs,\n    generateCoord: opt.generateCoord,\n    encodeDefine: seriesModel.getEncode(),\n    encodeDefaulter: encodeDefaulter,\n    canOmitUnusedDimensions: !isOriginalSource\n  };\n  var schema = prepareSeriesDataSchema(source, createDimensionOptions);\n  var firstCategoryDimIndex = injectOrdinalMeta(schema.dimensions, opt.createInvertedIndices, coordSysInfo);\n  var store = !isOriginalSource ? sourceManager.getSharedDataStore(schema) : null;\n  var stackCalculationInfo = enableDataStack(seriesModel, {\n    schema: schema,\n    store: store\n  });\n  var data = new SeriesData(schema, seriesModel);\n  data.setCalculationInfo(stackCalculationInfo);\n  var dimValueGetter = firstCategoryDimIndex != null && isNeedCompleteOrdinalData(source) ? function (itemOpt, dimName, dataIndex, dimIndex) {\n    // Use dataIndex as ordinal value in categoryAxis\n    return dimIndex === firstCategoryDimIndex ? dataIndex : this.defaultDimValueGetter(itemOpt, dimName, dataIndex, dimIndex);\n  } : null;\n  data.hasItemOption = false;\n  data.initData(\n  // Try to reuse the data store in sourceManager if using dataset.\n  isOriginalSource ? source : store, null, dimValueGetter);\n  return data;\n}\nfunction isNeedCompleteOrdinalData(source) {\n  if (source.sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var sampleItem = firstDataNotNull(source.data || []);\n    return !zrUtil.isArray(getDataItemValue(sampleItem));\n  }\n}\nfunction firstDataNotNull(arr) {\n  var i = 0;\n  while (i < arr.length && arr[i] == null) {\n    i++;\n  }\n  return arr[i];\n}\nexport default createSeriesData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as clazzUtil from '../util/clazz.js';\nvar Scale = /** @class */function () {\n  function Scale(setting) {\n    this._setting = setting || {};\n    this._extent = [Infinity, -Infinity];\n  }\n  Scale.prototype.getSetting = function (name) {\n    return this._setting[name];\n  };\n  /**\r\n   * Set extent from data\r\n   */\n  Scale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]);\n    // not setExtent because in log axis it may transformed to power\n    // this.setExtent(extent[0], extent[1]);\n  };\n  /**\r\n   * Set extent from data\r\n   */\n  Scale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\r\n   * Get extent\r\n   *\r\n   * Extent is always in increase order.\r\n   */\n  Scale.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\r\n   * Set extent\r\n   */\n  Scale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent;\n    if (!isNaN(start)) {\n      thisExtent[0] = start;\n    }\n    if (!isNaN(end)) {\n      thisExtent[1] = end;\n    }\n  };\n  /**\r\n   * If value is in extent range\r\n   */\n  Scale.prototype.isInExtentRange = function (value) {\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\n  Scale.prototype.isBlank = function () {\n    return this._isBlank;\n  };\n  /**\r\n   * When axis extent depends on data and no data exists,\r\n   * axis ticks should not be drawn, which is named 'blank'.\r\n   */\n  Scale.prototype.setBlank = function (isBlank) {\n    this._isBlank = isBlank;\n  };\n  return Scale;\n}();\nclazzUtil.enableClassManagement(Scale);\nexport default Scale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, isObject, map, isString } from 'zrender/lib/core/util.js';\nvar uidBase = 0;\nvar OrdinalMeta = /** @class */function () {\n  function OrdinalMeta(opt) {\n    this.categories = opt.categories || [];\n    this._needCollect = opt.needCollect;\n    this._deduplication = opt.deduplication;\n    this.uid = ++uidBase;\n  }\n  OrdinalMeta.createByAxisModel = function (axisModel) {\n    var option = axisModel.option;\n    var data = option.data;\n    var categories = data && map(data, getName);\n    return new OrdinalMeta({\n      categories: categories,\n      needCollect: !categories,\n      // deduplication is default in axis.\n      deduplication: option.dedplication !== false\n    });\n  };\n  ;\n  OrdinalMeta.prototype.getOrdinal = function (category) {\n    // @ts-ignore\n    return this._getOrCreateMap().get(category);\n  };\n  /**\r\n   * @return The ordinal. If not found, return NaN.\r\n   */\n  OrdinalMeta.prototype.parseAndCollect = function (category) {\n    var index;\n    var needCollect = this._needCollect;\n    // The value of category dim can be the index of the given category set.\n    // This feature is only supported when !needCollect, because we should\n    // consider a common case: a value is 2017, which is a number but is\n    // expected to be tread as a category. This case usually happen in dataset,\n    // where it happent to be no need of the index feature.\n    if (!isString(category) && !needCollect) {\n      return category;\n    }\n    // Optimize for the scenario:\n    // category is ['2012-01-01', '2012-01-02', ...], where the input\n    // data has been ensured not duplicate and is large data.\n    // Notice, if a dataset dimension provide categroies, usually echarts\n    // should remove duplication except user tell echarts dont do that\n    // (set axis.deduplication = false), because echarts do not know whether\n    // the values in the category dimension has duplication (consider the\n    // parallel-aqi example)\n    if (needCollect && !this._deduplication) {\n      index = this.categories.length;\n      this.categories[index] = category;\n      return index;\n    }\n    var map = this._getOrCreateMap();\n    // @ts-ignore\n    index = map.get(category);\n    if (index == null) {\n      if (needCollect) {\n        index = this.categories.length;\n        this.categories[index] = category;\n        // @ts-ignore\n        map.set(category, index);\n      } else {\n        index = NaN;\n      }\n    }\n    return index;\n  };\n  // Consider big data, do not create map until needed.\n  OrdinalMeta.prototype._getOrCreateMap = function () {\n    return this._map || (this._map = createHashMap(this.categories));\n  };\n  return OrdinalMeta;\n}();\nfunction getName(obj) {\n  if (isObject(obj) && obj.value != null) {\n    return obj.value;\n  } else {\n    return obj + '';\n  }\n}\nexport default OrdinalMeta;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getPrecision, round, nice, quantityExponent } from '../util/number.js';\nexport function isValueNice(val) {\n  var exp10 = Math.pow(10, quantityExponent(Math.abs(val)));\n  var f = Math.abs(val / exp10);\n  return f === 0 || f === 1 || f === 2 || f === 3 || f === 5;\n}\nexport function isIntervalOrLogScale(scale) {\n  return scale.type === 'interval' || scale.type === 'log';\n}\n/**\r\n * @param extent Both extent[0] and extent[1] should be valid number.\r\n *               Should be extent[0] < extent[1].\r\n * @param splitNumber splitNumber should be >= 1.\r\n */\nexport function intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval) {\n  var result = {};\n  var span = extent[1] - extent[0];\n  var interval = result.interval = nice(span / splitNumber, true);\n  if (minInterval != null && interval < minInterval) {\n    interval = result.interval = minInterval;\n  }\n  if (maxInterval != null && interval > maxInterval) {\n    interval = result.interval = maxInterval;\n  }\n  // Tow more digital for tick.\n  var precision = result.intervalPrecision = getIntervalPrecision(interval);\n  // Niced extent inside original extent\n  var niceTickExtent = result.niceTickExtent = [round(Math.ceil(extent[0] / interval) * interval, precision), round(Math.floor(extent[1] / interval) * interval, precision)];\n  fixExtent(niceTickExtent, extent);\n  return result;\n}\nexport function increaseInterval(interval) {\n  var exp10 = Math.pow(10, quantityExponent(interval));\n  // Increase interval\n  var f = interval / exp10;\n  if (!f) {\n    f = 1;\n  } else if (f === 2) {\n    f = 3;\n  } else if (f === 3) {\n    f = 5;\n  } else {\n    // f is 1 or 5\n    f *= 2;\n  }\n  return round(f * exp10);\n}\n/**\r\n * @return interval precision\r\n */\nexport function getIntervalPrecision(interval) {\n  // Tow more digital for tick.\n  return getPrecision(interval) + 2;\n}\nfunction clamp(niceTickExtent, idx, extent) {\n  niceTickExtent[idx] = Math.max(Math.min(niceTickExtent[idx], extent[1]), extent[0]);\n}\n// In some cases (e.g., splitNumber is 1), niceTickExtent may be out of extent.\nexport function fixExtent(niceTickExtent, extent) {\n  !isFinite(niceTickExtent[0]) && (niceTickExtent[0] = extent[0]);\n  !isFinite(niceTickExtent[1]) && (niceTickExtent[1] = extent[1]);\n  clamp(niceTickExtent, 0, extent);\n  clamp(niceTickExtent, 1, extent);\n  if (niceTickExtent[0] > niceTickExtent[1]) {\n    niceTickExtent[0] = niceTickExtent[1];\n  }\n}\nexport function contain(val, extent) {\n  return val >= extent[0] && val <= extent[1];\n}\nexport function normalize(val, extent) {\n  if (extent[1] === extent[0]) {\n    return 0.5;\n  }\n  return (val - extent[0]) / (extent[1] - extent[0]);\n}\nexport function scale(val, extent) {\n  return val * (extent[1] - extent[0]) + extent[0];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Linear continuous scale\r\n * http://en.wikipedia.org/wiki/Level_of_measurement\r\n */\n// FIXME only one data\nimport Scale from './Scale.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport * as scaleHelper from './helper.js';\nimport { isArray, map, isObject, isString } from 'zrender/lib/core/util.js';\nvar OrdinalScale = /** @class */function (_super) {\n  __extends(OrdinalScale, _super);\n  function OrdinalScale(setting) {\n    var _this = _super.call(this, setting) || this;\n    _this.type = 'ordinal';\n    var ordinalMeta = _this.getSetting('ordinalMeta');\n    // Caution: Should not use instanceof, consider ec-extensions using\n    // import approach to get OrdinalMeta class.\n    if (!ordinalMeta) {\n      ordinalMeta = new OrdinalMeta({});\n    }\n    if (isArray(ordinalMeta)) {\n      ordinalMeta = new OrdinalMeta({\n        categories: map(ordinalMeta, function (item) {\n          return isObject(item) ? item.value : item;\n        })\n      });\n    }\n    _this._ordinalMeta = ordinalMeta;\n    _this._extent = _this.getSetting('extent') || [0, ordinalMeta.categories.length - 1];\n    return _this;\n  }\n  OrdinalScale.prototype.parse = function (val) {\n    // Caution: Math.round(null) will return `0` rather than `NaN`\n    if (val == null) {\n      return NaN;\n    }\n    return isString(val) ? this._ordinalMeta.getOrdinal(val)\n    // val might be float.\n    : Math.round(val);\n  };\n  OrdinalScale.prototype.contain = function (rank) {\n    rank = this.parse(rank);\n    return scaleHelper.contain(rank, this._extent) && this._ordinalMeta.categories[rank] != null;\n  };\n  /**\r\n   * Normalize given rank or name to linear [0, 1]\r\n   * @param val raw ordinal number.\r\n   * @return normalized value in [0, 1].\r\n   */\n  OrdinalScale.prototype.normalize = function (val) {\n    val = this._getTickNumber(this.parse(val));\n    return scaleHelper.normalize(val, this._extent);\n  };\n  /**\r\n   * @param val normalized value in [0, 1].\r\n   * @return raw ordinal number.\r\n   */\n  OrdinalScale.prototype.scale = function (val) {\n    val = Math.round(scaleHelper.scale(val, this._extent));\n    return this.getRawOrdinalNumber(val);\n  };\n  OrdinalScale.prototype.getTicks = function () {\n    var ticks = [];\n    var extent = this._extent;\n    var rank = extent[0];\n    while (rank <= extent[1]) {\n      ticks.push({\n        value: rank\n      });\n      rank++;\n    }\n    return ticks;\n  };\n  OrdinalScale.prototype.getMinorTicks = function (splitNumber) {\n    // Not support.\n    return;\n  };\n  /**\r\n   * @see `Ordinal['_ordinalNumbersByTick']`\r\n   */\n  OrdinalScale.prototype.setSortInfo = function (info) {\n    if (info == null) {\n      this._ordinalNumbersByTick = this._ticksByOrdinalNumber = null;\n      return;\n    }\n    var infoOrdinalNumbers = info.ordinalNumbers;\n    var ordinalsByTick = this._ordinalNumbersByTick = [];\n    var ticksByOrdinal = this._ticksByOrdinalNumber = [];\n    // Unnecessary support negative tick in `realtimeSort`.\n    var tickNum = 0;\n    var allCategoryLen = this._ordinalMeta.categories.length;\n    for (var len = Math.min(allCategoryLen, infoOrdinalNumbers.length); tickNum < len; ++tickNum) {\n      var ordinalNumber = infoOrdinalNumbers[tickNum];\n      ordinalsByTick[tickNum] = ordinalNumber;\n      ticksByOrdinal[ordinalNumber] = tickNum;\n    }\n    // Handle that `series.data` only covers part of the `axis.category.data`.\n    var unusedOrdinal = 0;\n    for (; tickNum < allCategoryLen; ++tickNum) {\n      while (ticksByOrdinal[unusedOrdinal] != null) {\n        unusedOrdinal++;\n      }\n      ;\n      ordinalsByTick.push(unusedOrdinal);\n      ticksByOrdinal[unusedOrdinal] = tickNum;\n    }\n  };\n  OrdinalScale.prototype._getTickNumber = function (ordinal) {\n    var ticksByOrdinalNumber = this._ticksByOrdinalNumber;\n    // also support ordinal out of range of `ordinalMeta.categories.length`,\n    // where ordinal numbers are used as tick value directly.\n    return ticksByOrdinalNumber && ordinal >= 0 && ordinal < ticksByOrdinalNumber.length ? ticksByOrdinalNumber[ordinal] : ordinal;\n  };\n  /**\r\n   * @usage\r\n   * ```js\r\n   * const ordinalNumber = ordinalScale.getRawOrdinalNumber(tickVal);\r\n   *\r\n   * // case0\r\n   * const rawOrdinalValue = axisModel.getCategories()[ordinalNumber];\r\n   * // case1\r\n   * const rawOrdinalValue = this._ordinalMeta.categories[ordinalNumber];\r\n   * // case2\r\n   * const coord = axis.dataToCoord(ordinalNumber);\r\n   * ```\r\n   *\r\n   * @param {OrdinalNumber} tickNumber index of display\r\n   */\n  OrdinalScale.prototype.getRawOrdinalNumber = function (tickNumber) {\n    var ordinalNumbersByTick = this._ordinalNumbersByTick;\n    // tickNumber may be out of range, e.g., when axis max is larger than `ordinalMeta.categories.length`.,\n    // where ordinal numbers are used as tick value directly.\n    return ordinalNumbersByTick && tickNumber >= 0 && tickNumber < ordinalNumbersByTick.length ? ordinalNumbersByTick[tickNumber] : tickNumber;\n  };\n  /**\r\n   * Get item on tick\r\n   */\n  OrdinalScale.prototype.getLabel = function (tick) {\n    if (!this.isBlank()) {\n      var ordinalNumber = this.getRawOrdinalNumber(tick.value);\n      var cateogry = this._ordinalMeta.categories[ordinalNumber];\n      // Note that if no data, ordinalMeta.categories is an empty array.\n      // Return empty if it's not exist.\n      return cateogry == null ? '' : cateogry + '';\n    }\n  };\n  OrdinalScale.prototype.count = function () {\n    return this._extent[1] - this._extent[0] + 1;\n  };\n  OrdinalScale.prototype.unionExtentFromData = function (data, dim) {\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\r\n   * @override\r\n   * If value is in extent range\r\n   */\n  OrdinalScale.prototype.isInExtentRange = function (value) {\n    value = this._getTickNumber(value);\n    return this._extent[0] <= value && this._extent[1] >= value;\n  };\n  OrdinalScale.prototype.getOrdinalMeta = function () {\n    return this._ordinalMeta;\n  };\n  OrdinalScale.prototype.calcNiceTicks = function () {};\n  OrdinalScale.prototype.calcNiceExtent = function () {};\n  OrdinalScale.type = 'ordinal';\n  return OrdinalScale;\n}(Scale);\nScale.registerClass(OrdinalScale);\nexport default OrdinalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as numberUtil from '../util/number.js';\nimport * as formatUtil from '../util/format.js';\nimport Scale from './Scale.js';\nimport * as helper from './helper.js';\nvar roundNumber = numberUtil.round;\nvar IntervalScale = /** @class */function (_super) {\n  __extends(IntervalScale, _super);\n  function IntervalScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'interval';\n    // Step is calculated in adjustExtent.\n    _this._interval = 0;\n    _this._intervalPrecision = 2;\n    return _this;\n  }\n  IntervalScale.prototype.parse = function (val) {\n    return val;\n  };\n  IntervalScale.prototype.contain = function (val) {\n    return helper.contain(val, this._extent);\n  };\n  IntervalScale.prototype.normalize = function (val) {\n    return helper.normalize(val, this._extent);\n  };\n  IntervalScale.prototype.scale = function (val) {\n    return helper.scale(val, this._extent);\n  };\n  IntervalScale.prototype.setExtent = function (start, end) {\n    var thisExtent = this._extent;\n    // start,end may be a Number like '25',so...\n    if (!isNaN(start)) {\n      thisExtent[0] = parseFloat(start);\n    }\n    if (!isNaN(end)) {\n      thisExtent[1] = parseFloat(end);\n    }\n  };\n  IntervalScale.prototype.unionExtent = function (other) {\n    var extent = this._extent;\n    other[0] < extent[0] && (extent[0] = other[0]);\n    other[1] > extent[1] && (extent[1] = other[1]);\n    // unionExtent may called by it's sub classes\n    this.setExtent(extent[0], extent[1]);\n  };\n  IntervalScale.prototype.getInterval = function () {\n    return this._interval;\n  };\n  IntervalScale.prototype.setInterval = function (interval) {\n    this._interval = interval;\n    // Dropped auto calculated niceExtent and use user-set extent.\n    // We assume user wants to set both interval, min, max to get a better result.\n    this._niceExtent = this._extent.slice();\n    this._intervalPrecision = helper.getIntervalPrecision(interval);\n  };\n  /**\r\n   * @param expandToNicedExtent Whether expand the ticks to niced extent.\r\n   */\n  IntervalScale.prototype.getTicks = function (expandToNicedExtent) {\n    var interval = this._interval;\n    var extent = this._extent;\n    var niceTickExtent = this._niceExtent;\n    var intervalPrecision = this._intervalPrecision;\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    // Consider this case: using dataZoom toolbox, zoom and zoom.\n    var safeLimit = 10000;\n    if (extent[0] < niceTickExtent[0]) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(niceTickExtent[0] - interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[0]\n        });\n      }\n    }\n    var tick = niceTickExtent[0];\n    while (tick <= niceTickExtent[1]) {\n      ticks.push({\n        value: tick\n      });\n      // Avoid rounding error\n      tick = roundNumber(tick + interval, intervalPrecision);\n      if (tick === ticks[ticks.length - 1].value) {\n        // Consider out of safe float point, e.g.,\n        // -3711126.9907707 + 2e-10 === -3711126.9907707\n        break;\n      }\n      if (ticks.length > safeLimit) {\n        return [];\n      }\n    }\n    // Consider this case: the last item of ticks is smaller\n    // than niceTickExtent[1] and niceTickExtent[1] === extent[1].\n    var lastNiceTick = ticks.length ? ticks[ticks.length - 1].value : niceTickExtent[1];\n    if (extent[1] > lastNiceTick) {\n      if (expandToNicedExtent) {\n        ticks.push({\n          value: roundNumber(lastNiceTick + interval, intervalPrecision)\n        });\n      } else {\n        ticks.push({\n          value: extent[1]\n        });\n      }\n    }\n    return ticks;\n  };\n  IntervalScale.prototype.getMinorTicks = function (splitNumber) {\n    var ticks = this.getTicks(true);\n    var minorTicks = [];\n    var extent = this.getExtent();\n    for (var i = 1; i < ticks.length; i++) {\n      var nextTick = ticks[i];\n      var prevTick = ticks[i - 1];\n      var count = 0;\n      var minorTicksGroup = [];\n      var interval = nextTick.value - prevTick.value;\n      var minorInterval = interval / splitNumber;\n      while (count < splitNumber - 1) {\n        var minorTick = roundNumber(prevTick.value + (count + 1) * minorInterval);\n        // For the first and last interval. The count may be less than splitNumber.\n        if (minorTick > extent[0] && minorTick < extent[1]) {\n          minorTicksGroup.push(minorTick);\n        }\n        count++;\n      }\n      minorTicks.push(minorTicksGroup);\n    }\n    return minorTicks;\n  };\n  /**\r\n   * @param opt.precision If 'auto', use nice presision.\r\n   * @param opt.pad returns 1.50 but not 1.5 if precision is 2.\r\n   */\n  IntervalScale.prototype.getLabel = function (data, opt) {\n    if (data == null) {\n      return '';\n    }\n    var precision = opt && opt.precision;\n    if (precision == null) {\n      precision = numberUtil.getPrecision(data.value) || 0;\n    } else if (precision === 'auto') {\n      // Should be more precise then tick.\n      precision = this._intervalPrecision;\n    }\n    // (1) If `precision` is set, 12.005 should be display as '12.00500'.\n    // (2) Use roundNumber (toFixed) to avoid scientific notation like '3.5e-7'.\n    var dataNum = roundNumber(data.value, precision, true);\n    return formatUtil.addCommas(dataNum);\n  };\n  /**\r\n   * @param splitNumber By default `5`.\r\n   */\n  IntervalScale.prototype.calcNiceTicks = function (splitNumber, minInterval, maxInterval) {\n    splitNumber = splitNumber || 5;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    if (!isFinite(span)) {\n      return;\n    }\n    // User may set axis min 0 and data are all negative\n    // FIXME If it needs to reverse ?\n    if (span < 0) {\n      span = -span;\n      extent.reverse();\n    }\n    var result = helper.intervalScaleNiceTicks(extent, splitNumber, minInterval, maxInterval);\n    this._intervalPrecision = result.intervalPrecision;\n    this._interval = result.interval;\n    this._niceExtent = result.niceTickExtent;\n  };\n  IntervalScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent;\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      if (extent[0] !== 0) {\n        // Expand extent\n        // Note that extents can be both negative. See #13154\n        var expandSize = Math.abs(extent[0]);\n        // In the fowllowing case\n        //      Axis has been fixed max 100\n        //      Plus data are all 100 and axis extent are [100, 100].\n        // Extend to the both side will cause expanded max is larger than fixed max.\n        // So only expand to the smaller side.\n        if (!opt.fixMax) {\n          extent[1] += expandSize / 2;\n          extent[0] -= expandSize / 2;\n        } else {\n          extent[0] -= expandSize / 2;\n        }\n      } else {\n        extent[1] = 1;\n      }\n    }\n    var span = extent[1] - extent[0];\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (!isFinite(span)) {\n      extent[0] = 0;\n      extent[1] = 1;\n    }\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n    // let extent = this._extent;\n    var interval = this._interval;\n    if (!opt.fixMin) {\n      extent[0] = roundNumber(Math.floor(extent[0] / interval) * interval);\n    }\n    if (!opt.fixMax) {\n      extent[1] = roundNumber(Math.ceil(extent[1] / interval) * interval);\n    }\n  };\n  IntervalScale.prototype.setNiceExtent = function (min, max) {\n    this._niceExtent = [min, max];\n  };\n  IntervalScale.type = 'interval';\n  return IntervalScale;\n}(Scale);\nScale.registerClass(IntervalScale);\nexport default IntervalScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isArray } from 'zrender/lib/core/util.js';\n/* global Float32Array */\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\nexport function createFloat32Array(arg) {\n  if (isArray(arg)) {\n    // Return self directly if don't support TypedArray.\n    return supportFloat32Array ? new Float32Array(arg) : arg;\n  }\n  // Else is number\n  return new Float32ArrayCtor(arg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, defaults, keys } from 'zrender/lib/core/util.js';\nimport { parsePercent } from '../util/number.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { createFloat32Array } from '../util/vendor.js';\nvar STACK_PREFIX = '__ec_stack_';\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || STACK_PREFIX + seriesModel.seriesIndex;\n}\nfunction getAxisKey(axis) {\n  return axis.dim + axis.index;\n}\n/**\r\n * @return {Object} {width, offset, offsetCenter} If axis.type is not 'category', return undefined.\r\n */\nexport function getLayoutOnAxis(opt) {\n  var params = [];\n  var baseAxis = opt.axis;\n  var axisKey = 'axis0';\n  if (baseAxis.type !== 'category') {\n    return;\n  }\n  var bandWidth = baseAxis.getBandWidth();\n  for (var i = 0; i < opt.count || 0; i++) {\n    params.push(defaults({\n      bandWidth: bandWidth,\n      axisKey: axisKey,\n      stackId: STACK_PREFIX + i\n    }, opt));\n  }\n  var widthAndOffsets = doCalBarWidthAndOffset(params);\n  var result = [];\n  for (var i = 0; i < opt.count; i++) {\n    var item = widthAndOffsets[axisKey][STACK_PREFIX + i];\n    item.offsetCenter = item.offset + item.width / 2;\n    result.push(item);\n  }\n  return result;\n}\nexport function prepareLayoutBarSeries(seriesType, ecModel) {\n  var seriesModels = [];\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for cartesian2d only\n    if (isOnCartesian(seriesModel)) {\n      seriesModels.push(seriesModel);\n    }\n  });\n  return seriesModels;\n}\n/**\r\n * Map from (baseAxis.dim + '_' + baseAxis.index) to min gap of two adjacent\r\n * values.\r\n * This works for time axes, value axes, and log axes.\r\n * For a single time axis, return value is in the form like\r\n * {'x_0': [1000000]}.\r\n * The value of 1000000 is in milliseconds.\r\n */\nfunction getValueAxesMinGaps(barSeries) {\n  /**\r\n   * Map from axis.index to values.\r\n   * For a single time axis, axisValues is in the form like\r\n   * {'x_0': [1495555200000, 1495641600000, 1495728000000]}.\r\n   * Items in axisValues[x], e.g. 1495555200000, are time values of all\r\n   * series.\r\n   */\n  var axisValues = {};\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    if (baseAxis.type !== 'time' && baseAxis.type !== 'value') {\n      return;\n    }\n    var data = seriesModel.getData();\n    var key = baseAxis.dim + '_' + baseAxis.index;\n    var dimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n    var store = data.getStore();\n    for (var i = 0, cnt = store.count(); i < cnt; ++i) {\n      var value = store.get(dimIdx, i);\n      if (!axisValues[key]) {\n        // No previous data for the axis\n        axisValues[key] = [value];\n      } else {\n        // No value in previous series\n        axisValues[key].push(value);\n      }\n      // Ignore duplicated time values in the same axis\n    }\n  });\n  var axisMinGaps = {};\n  for (var key in axisValues) {\n    if (axisValues.hasOwnProperty(key)) {\n      var valuesInAxis = axisValues[key];\n      if (valuesInAxis) {\n        // Sort axis values into ascending order to calculate gaps\n        valuesInAxis.sort(function (a, b) {\n          return a - b;\n        });\n        var min = null;\n        for (var j = 1; j < valuesInAxis.length; ++j) {\n          var delta = valuesInAxis[j] - valuesInAxis[j - 1];\n          if (delta > 0) {\n            // Ignore 0 delta because they are of the same axis value\n            min = min === null ? delta : Math.min(min, delta);\n          }\n        }\n        // Set to null if only have one data\n        axisMinGaps[key] = min;\n      }\n    }\n  }\n  return axisMinGaps;\n}\nexport function makeColumnLayout(barSeries) {\n  var axisMinGaps = getValueAxesMinGaps(barSeries);\n  var seriesInfoList = [];\n  each(barSeries, function (seriesModel) {\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth;\n    if (baseAxis.type === 'category') {\n      bandWidth = baseAxis.getBandWidth();\n    } else if (baseAxis.type === 'value' || baseAxis.type === 'time') {\n      var key = baseAxis.dim + '_' + baseAxis.index;\n      var minGap = axisMinGaps[key];\n      var extentSpan = Math.abs(axisExtent[1] - axisExtent[0]);\n      var scale = baseAxis.scale.getExtent();\n      var scaleSpan = Math.abs(scale[1] - scale[0]);\n      bandWidth = minGap ? extentSpan / scaleSpan * minGap : extentSpan; // When there is only one data value\n    } else {\n      var data = seriesModel.getData();\n      bandWidth = Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    }\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barMinWidth = parsePercent(\n    // barMinWidth by default is 0.5 / 1 in cartesian. Because in value axis,\n    // the auto-calculated bar width might be less than 0.5 / 1.\n    seriesModel.get('barMinWidth') || (isInLargeMode(seriesModel) ? 0.5 : 1), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n    seriesInfoList.push({\n      bandWidth: bandWidth,\n      barWidth: barWidth,\n      barMaxWidth: barMaxWidth,\n      barMinWidth: barMinWidth,\n      barGap: barGap,\n      barCategoryGap: barCategoryGap,\n      axisKey: getAxisKey(baseAxis),\n      stackId: getSeriesStackId(seriesModel)\n    });\n  });\n  return doCalBarWidthAndOffset(seriesInfoList);\n}\nfunction doCalBarWidthAndOffset(seriesInfoList) {\n  // Columns info on each category axis. Key is cartesian name\n  var columnsMap = {};\n  each(seriesInfoList, function (seriesInfo, idx) {\n    var axisKey = seriesInfo.axisKey;\n    var bandWidth = seriesInfo.bandWidth;\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: null,\n      gap: '20%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = seriesInfo.stackId;\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    // Caution: In a single coordinate system, these barGrid attributes\n    // will be shared by series. Consider that they have default values,\n    // only the attributes set on the last series will work.\n    // Do not change this fact unless there will be a break change.\n    var barWidth = seriesInfo.barWidth;\n    if (barWidth && !stacks[stackId].width) {\n      // See #6312, do not restrict width.\n      stacks[stackId].width = barWidth;\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n    var barMaxWidth = seriesInfo.barMaxWidth;\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    var barMinWidth = seriesInfo.barMinWidth;\n    barMinWidth && (stacks[stackId].minWidth = barMinWidth);\n    var barGap = seriesInfo.barGap;\n    barGap != null && (columnsOnAxis.gap = barGap);\n    var barCategoryGap = seriesInfo.barCategoryGap;\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGapPercent = columnsOnAxis.categoryGap;\n    if (categoryGapPercent == null) {\n      var columnCount = keys(stacks).length;\n      // More columns in one group\n      // the spaces between group is smaller. Or the column will be too thin.\n      categoryGapPercent = Math.max(35 - columnCount * 4, 15) + '%';\n    }\n    var categoryGap = parsePercent(categoryGapPercent, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    // Find if any auto calculated bar exceeded maxBarWidth\n    each(stacks, function (column) {\n      var maxWidth = column.maxWidth;\n      var minWidth = column.minWidth;\n      if (!column.width) {\n        var finalWidth = autoWidth;\n        if (maxWidth && maxWidth < finalWidth) {\n          finalWidth = Math.min(maxWidth, remainedWidth);\n        }\n        // `minWidth` has higher priority. `minWidth` decide that whether the\n        // bar is able to be visible. So `minWidth` should not be restricted\n        // by `maxWidth` or `remainedWidth` (which is from `bandWidth`). In\n        // the extreme cases for `value` axis, bars are allowed to overlap\n        // with each other if `minWidth` specified.\n        if (minWidth && minWidth > finalWidth) {\n          finalWidth = minWidth;\n        }\n        if (finalWidth !== autoWidth) {\n          column.width = finalWidth;\n          remainedWidth -= finalWidth + barGapPercent * finalWidth;\n          autoWidthCount--;\n        }\n      } else {\n        // `barMinWidth/barMaxWidth` has higher priority than `barWidth`, as\n        // CSS does. Because barWidth can be a percent value, where\n        // `barMaxWidth` can be used to restrict the final width.\n        var finalWidth = column.width;\n        if (maxWidth) {\n          finalWidth = Math.min(finalWidth, maxWidth);\n        }\n        // `minWidth` has higher priority, as described above\n        if (minWidth) {\n          finalWidth = Math.max(finalWidth, minWidth);\n        }\n        column.width = finalWidth;\n        remainedWidth -= finalWidth + barGapPercent * finalWidth;\n        autoWidthCount--;\n      }\n    });\n    // Recalculate width again\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n    var offset = -widthSum / 2;\n    each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        bandWidth: bandWidth,\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\nfunction retrieveColumnLayout(barWidthAndOffset, axis, seriesModel) {\n  if (barWidthAndOffset && axis) {\n    var result = barWidthAndOffset[getAxisKey(axis)];\n    if (result != null && seriesModel != null) {\n      return result[getSeriesStackId(seriesModel)];\n    }\n    return result;\n  }\n}\nexport { retrieveColumnLayout };\nexport function layout(seriesType, ecModel) {\n  var seriesModels = prepareLayoutBarSeries(seriesType, ecModel);\n  var barWidthAndOffset = makeColumnLayout(seriesModels);\n  each(seriesModels, function (seriesModel) {\n    var data = seriesModel.getData();\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[getAxisKey(baseAxis)][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    data.setLayout({\n      bandWidth: columnLayoutInfo.bandWidth,\n      offset: columnOffset,\n      size: columnWidth\n    });\n  });\n}\n// TODO: Do not support stack in large mode yet.\nexport function createProgressiveLayout(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      if (!isOnCartesian(seriesModel)) {\n        return;\n      }\n      var data = seriesModel.getData();\n      var cartesian = seriesModel.coordinateSystem;\n      var baseAxis = cartesian.getBaseAxis();\n      var valueAxis = cartesian.getOtherAxis(baseAxis);\n      var valueDimIdx = data.getDimensionIndex(data.mapDimension(valueAxis.dim));\n      var baseDimIdx = data.getDimensionIndex(data.mapDimension(baseAxis.dim));\n      var drawBackground = seriesModel.get('showBackground', true);\n      var valueDim = data.mapDimension(valueAxis.dim);\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      var stacked = isDimensionStacked(data, valueDim) && !!data.getCalculationInfo('stackedOnSeries');\n      var isValueAxisH = valueAxis.isHorizontal();\n      var valueAxisStart = getValueAxisStart(baseAxis, valueAxis);\n      var isLarge = isInLargeMode(seriesModel);\n      var barMinHeight = seriesModel.get('barMinHeight') || 0;\n      var stackedDimIdx = stackResultDim && data.getDimensionIndex(stackResultDim);\n      // Layout info.\n      var columnWidth = data.getLayout('size');\n      var columnOffset = data.getLayout('offset');\n      return {\n        progress: function (params, data) {\n          var count = params.count;\n          var largePoints = isLarge && createFloat32Array(count * 3);\n          var largeBackgroundPoints = isLarge && drawBackground && createFloat32Array(count * 3);\n          var largeDataIndices = isLarge && createFloat32Array(count);\n          var coordLayout = cartesian.master.getRect();\n          var bgSize = isValueAxisH ? coordLayout.width : coordLayout.height;\n          var dataIndex;\n          var store = data.getStore();\n          var idxOffset = 0;\n          while ((dataIndex = params.next()) != null) {\n            var value = store.get(stacked ? stackedDimIdx : valueDimIdx, dataIndex);\n            var baseValue = store.get(baseDimIdx, dataIndex);\n            var baseCoord = valueAxisStart;\n            var stackStartValue = void 0;\n            // Because of the barMinHeight, we can not use the value in\n            // stackResultDimension directly.\n            if (stacked) {\n              stackStartValue = +value - store.get(valueDimIdx, dataIndex);\n            }\n            var x = void 0;\n            var y = void 0;\n            var width = void 0;\n            var height = void 0;\n            if (isValueAxisH) {\n              var coord = cartesian.dataToPoint([value, baseValue]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([stackStartValue, baseValue]);\n                baseCoord = startCoord[0];\n              }\n              x = baseCoord;\n              y = coord[1] + columnOffset;\n              width = coord[0] - baseCoord;\n              height = columnWidth;\n              if (Math.abs(width) < barMinHeight) {\n                width = (width < 0 ? -1 : 1) * barMinHeight;\n              }\n            } else {\n              var coord = cartesian.dataToPoint([baseValue, value]);\n              if (stacked) {\n                var startCoord = cartesian.dataToPoint([baseValue, stackStartValue]);\n                baseCoord = startCoord[1];\n              }\n              x = coord[0] + columnOffset;\n              y = baseCoord;\n              width = columnWidth;\n              height = coord[1] - baseCoord;\n              if (Math.abs(height) < barMinHeight) {\n                // Include zero to has a positive bar\n                height = (height <= 0 ? -1 : 1) * barMinHeight;\n              }\n            }\n            if (!isLarge) {\n              data.setItemLayout(dataIndex, {\n                x: x,\n                y: y,\n                width: width,\n                height: height\n              });\n            } else {\n              largePoints[idxOffset] = x;\n              largePoints[idxOffset + 1] = y;\n              largePoints[idxOffset + 2] = isValueAxisH ? width : height;\n              if (largeBackgroundPoints) {\n                largeBackgroundPoints[idxOffset] = isValueAxisH ? coordLayout.x : x;\n                largeBackgroundPoints[idxOffset + 1] = isValueAxisH ? y : coordLayout.y;\n                largeBackgroundPoints[idxOffset + 2] = bgSize;\n              }\n              largeDataIndices[dataIndex] = dataIndex;\n            }\n            idxOffset += 3;\n          }\n          if (isLarge) {\n            data.setLayout({\n              largePoints: largePoints,\n              largeDataIndices: largeDataIndices,\n              largeBackgroundPoints: largeBackgroundPoints,\n              valueAxisHorizontal: isValueAxisH\n            });\n          }\n        }\n      };\n    }\n  };\n}\nfunction isOnCartesian(seriesModel) {\n  return seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'cartesian2d';\n}\nfunction isInLargeMode(seriesModel) {\n  return seriesModel.pipelineContext && seriesModel.pipelineContext.large;\n}\n// See cases in `test/bar-start.html` and `#7412`, `#8747`.\nfunction getValueAxisStart(baseAxis, valueAxis) {\n  var startValue = valueAxis.model.get('startValue');\n  if (!startValue) {\n    startValue = 0;\n  }\n  return valueAxis.toGlobalCoord(valueAxis.dataToCoord(valueAxis.type === 'log' ? startValue > 0 ? startValue : 1 : startValue));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/*\r\n* A third-party license is embedded for some of the code in this file:\r\n* The \"scaleLevels\" was originally copied from \"d3.js\" with some\r\n* modifications made for this project.\r\n* (See more details in the comment on the definition of \"scaleLevels\" below.)\r\n* The use of the source code of this file is also subject to the terms\r\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\r\n* </licenses/LICENSE-d3>).\r\n*/\n// [About UTC and local time zone]:\n// In most cases, `number.parseDate` will treat input data string as local time\n// (except time zone is specified in time string). And `format.formateTime` returns\n// local time by default. option.useUTC is false by default. This design has\n// considered these common cases:\n// (1) Time that is persistent in server is in UTC, but it is needed to be displayed\n// in local time by default.\n// (2) By default, the input data string (e.g., '2011-01-02') should be displayed\n// as its original time, without any time difference.\nimport * as numberUtil from '../util/number.js';\nimport { ONE_SECOND, ONE_MINUTE, ONE_HOUR, ONE_DAY, ONE_YEAR, format, leveledFormat, getUnitValue, timeUnits, fullLeveledFormatter, getPrimaryTimeUnit, isPrimaryTimeUnit, getDefaultFormatPrecisionOfInterval, fullYearGetterName, monthSetterName, fullYearSetterName, dateSetterName, hoursGetterName, hoursSetterName, minutesSetterName, secondsSetterName, millisecondsSetterName, monthGetterName, dateGetterName, minutesGetterName, secondsGetterName, millisecondsGetterName } from '../util/time.js';\nimport * as scaleHelper from './helper.js';\nimport IntervalScale from './Interval.js';\nimport Scale from './Scale.js';\nimport { warn } from '../util/log.js';\nimport { filter, isNumber, map } from 'zrender/lib/core/util.js';\n// FIXME \nvar bisect = function (a, x, lo, hi) {\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid][1] < x) {\n      lo = mid + 1;\n    } else {\n      hi = mid;\n    }\n  }\n  return lo;\n};\nvar TimeScale = /** @class */function (_super) {\n  __extends(TimeScale, _super);\n  function TimeScale(settings) {\n    var _this = _super.call(this, settings) || this;\n    _this.type = 'time';\n    return _this;\n  }\n  /**\r\n   * Get label is mainly for other components like dataZoom, tooltip.\r\n   */\n  TimeScale.prototype.getLabel = function (tick) {\n    var useUTC = this.getSetting('useUTC');\n    return format(tick.value, fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))] || fullLeveledFormatter.second, useUTC, this.getSetting('locale'));\n  };\n  TimeScale.prototype.getFormattedLabel = function (tick, idx, labelFormatter) {\n    var isUTC = this.getSetting('useUTC');\n    var lang = this.getSetting('locale');\n    return leveledFormat(tick, idx, labelFormatter, lang, isUTC);\n  };\n  /**\r\n   * @override\r\n   */\n  TimeScale.prototype.getTicks = function () {\n    var interval = this._interval;\n    var extent = this._extent;\n    var ticks = [];\n    // If interval is 0, return [];\n    if (!interval) {\n      return ticks;\n    }\n    ticks.push({\n      value: extent[0],\n      level: 0\n    });\n    var useUTC = this.getSetting('useUTC');\n    var innerTicks = getIntervalTicks(this._minLevelUnit, this._approxInterval, useUTC, extent);\n    ticks = ticks.concat(innerTicks);\n    ticks.push({\n      value: extent[1],\n      level: 0\n    });\n    return ticks;\n  };\n  TimeScale.prototype.calcNiceExtent = function (opt) {\n    var extent = this._extent;\n    // If extent start and end are same, expand them\n    if (extent[0] === extent[1]) {\n      // Expand extent\n      extent[0] -= ONE_DAY;\n      extent[1] += ONE_DAY;\n    }\n    // If there are no data and extent are [Infinity, -Infinity]\n    if (extent[1] === -Infinity && extent[0] === Infinity) {\n      var d = new Date();\n      extent[1] = +new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      extent[0] = extent[1] - ONE_DAY;\n    }\n    this.calcNiceTicks(opt.splitNumber, opt.minInterval, opt.maxInterval);\n  };\n  TimeScale.prototype.calcNiceTicks = function (approxTickNum, minInterval, maxInterval) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    this._approxInterval = span / approxTickNum;\n    if (minInterval != null && this._approxInterval < minInterval) {\n      this._approxInterval = minInterval;\n    }\n    if (maxInterval != null && this._approxInterval > maxInterval) {\n      this._approxInterval = maxInterval;\n    }\n    var scaleIntervalsLen = scaleIntervals.length;\n    var idx = Math.min(bisect(scaleIntervals, this._approxInterval, 0, scaleIntervalsLen), scaleIntervalsLen - 1);\n    // Interval that can be used to calculate ticks\n    this._interval = scaleIntervals[idx][1];\n    // Min level used when picking ticks from top down.\n    // We check one more level to avoid the ticks are to sparse in some case.\n    this._minLevelUnit = scaleIntervals[Math.max(idx - 1, 0)][0];\n  };\n  TimeScale.prototype.parse = function (val) {\n    // val might be float.\n    return isNumber(val) ? val : +numberUtil.parseDate(val);\n  };\n  TimeScale.prototype.contain = function (val) {\n    return scaleHelper.contain(this.parse(val), this._extent);\n  };\n  TimeScale.prototype.normalize = function (val) {\n    return scaleHelper.normalize(this.parse(val), this._extent);\n  };\n  TimeScale.prototype.scale = function (val) {\n    return scaleHelper.scale(val, this._extent);\n  };\n  TimeScale.type = 'time';\n  return TimeScale;\n}(IntervalScale);\n/**\r\n * This implementation was originally copied from \"d3.js\"\r\n * <https://github.com/d3/d3/blob/b516d77fb8566b576088e73410437494717ada26/src/time/scale.js>\r\n * with some modifications made for this program.\r\n * See the license statement at the head of this file.\r\n */\nvar scaleIntervals = [\n// Format                           interval\n['second', ONE_SECOND], ['minute', ONE_MINUTE], ['hour', ONE_HOUR], ['quarter-day', ONE_HOUR * 6], ['half-day', ONE_HOUR * 12], ['day', ONE_DAY * 1.2], ['half-week', ONE_DAY * 3.5], ['week', ONE_DAY * 7], ['month', ONE_DAY * 31], ['quarter', ONE_DAY * 95], ['half-year', ONE_YEAR / 2], ['year', ONE_YEAR] // 1Y\n];\nfunction isUnitValueSame(unit, valueA, valueB, isUTC) {\n  var dateA = numberUtil.parseDate(valueA);\n  var dateB = numberUtil.parseDate(valueB);\n  var isSame = function (unit) {\n    return getUnitValue(dateA, unit, isUTC) === getUnitValue(dateB, unit, isUTC);\n  };\n  var isSameYear = function () {\n    return isSame('year');\n  };\n  // const isSameHalfYear = () => isSameYear() && isSame('half-year');\n  // const isSameQuater = () => isSameYear() && isSame('quarter');\n  var isSameMonth = function () {\n    return isSameYear() && isSame('month');\n  };\n  var isSameDay = function () {\n    return isSameMonth() && isSame('day');\n  };\n  // const isSameHalfDay = () => isSameDay() && isSame('half-day');\n  var isSameHour = function () {\n    return isSameDay() && isSame('hour');\n  };\n  var isSameMinute = function () {\n    return isSameHour() && isSame('minute');\n  };\n  var isSameSecond = function () {\n    return isSameMinute() && isSame('second');\n  };\n  var isSameMilliSecond = function () {\n    return isSameSecond() && isSame('millisecond');\n  };\n  switch (unit) {\n    case 'year':\n      return isSameYear();\n    case 'month':\n      return isSameMonth();\n    case 'day':\n      return isSameDay();\n    case 'hour':\n      return isSameHour();\n    case 'minute':\n      return isSameMinute();\n    case 'second':\n      return isSameSecond();\n    case 'millisecond':\n      return isSameMilliSecond();\n  }\n}\n// const primaryUnitGetters = {\n//     year: fullYearGetterName(),\n//     month: monthGetterName(),\n//     day: dateGetterName(),\n//     hour: hoursGetterName(),\n//     minute: minutesGetterName(),\n//     second: secondsGetterName(),\n//     millisecond: millisecondsGetterName()\n// };\n// const primaryUnitUTCGetters = {\n//     year: fullYearGetterName(true),\n//     month: monthGetterName(true),\n//     day: dateGetterName(true),\n//     hour: hoursGetterName(true),\n//     minute: minutesGetterName(true),\n//     second: secondsGetterName(true),\n//     millisecond: millisecondsGetterName(true)\n// };\n// function moveTick(date: Date, unitName: TimeUnit, step: number, isUTC: boolean) {\n//     step = step || 1;\n//     switch (getPrimaryTimeUnit(unitName)) {\n//         case 'year':\n//             date[fullYearSetterName(isUTC)](date[fullYearGetterName(isUTC)]() + step);\n//             break;\n//         case 'month':\n//             date[monthSetterName(isUTC)](date[monthGetterName(isUTC)]() + step);\n//             break;\n//         case 'day':\n//             date[dateSetterName(isUTC)](date[dateGetterName(isUTC)]() + step);\n//             break;\n//         case 'hour':\n//             date[hoursSetterName(isUTC)](date[hoursGetterName(isUTC)]() + step);\n//             break;\n//         case 'minute':\n//             date[minutesSetterName(isUTC)](date[minutesGetterName(isUTC)]() + step);\n//             break;\n//         case 'second':\n//             date[secondsSetterName(isUTC)](date[secondsGetterName(isUTC)]() + step);\n//             break;\n//         case 'millisecond':\n//             date[millisecondsSetterName(isUTC)](date[millisecondsGetterName(isUTC)]() + step);\n//             break;\n//     }\n//     return date.getTime();\n// }\n// const DATE_INTERVALS = [[8, 7.5], [4, 3.5], [2, 1.5]];\n// const MONTH_INTERVALS = [[6, 5.5], [3, 2.5], [2, 1.5]];\n// const MINUTES_SECONDS_INTERVALS = [[30, 30], [20, 20], [15, 15], [10, 10], [5, 5], [2, 2]];\nfunction getDateInterval(approxInterval, daysInMonth) {\n  approxInterval /= ONE_DAY;\n  return approxInterval > 16 ? 16\n  // Math.floor(daysInMonth / 2) + 1  // In this case we only want one tick between two months.\n  : approxInterval > 7.5 ? 7 // TODO week 7 or day 8?\n  : approxInterval > 3.5 ? 4 : approxInterval > 1.5 ? 2 : 1;\n}\nfunction getMonthInterval(approxInterval) {\n  var APPROX_ONE_MONTH = 30 * ONE_DAY;\n  approxInterval /= APPROX_ONE_MONTH;\n  return approxInterval > 6 ? 6 : approxInterval > 3 ? 3 : approxInterval > 2 ? 2 : 1;\n}\nfunction getHourInterval(approxInterval) {\n  approxInterval /= ONE_HOUR;\n  return approxInterval > 12 ? 12 : approxInterval > 6 ? 6 : approxInterval > 3.5 ? 4 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMinutesAndSecondsInterval(approxInterval, isMinutes) {\n  approxInterval /= isMinutes ? ONE_MINUTE : ONE_SECOND;\n  return approxInterval > 30 ? 30 : approxInterval > 20 ? 20 : approxInterval > 15 ? 15 : approxInterval > 10 ? 10 : approxInterval > 5 ? 5 : approxInterval > 2 ? 2 : 1;\n}\nfunction getMillisecondsInterval(approxInterval) {\n  return numberUtil.nice(approxInterval, true);\n}\nfunction getFirstTimestampOfUnit(date, unitName, isUTC) {\n  var outDate = new Date(date);\n  switch (getPrimaryTimeUnit(unitName)) {\n    case 'year':\n    case 'month':\n      outDate[monthSetterName(isUTC)](0);\n    case 'day':\n      outDate[dateSetterName(isUTC)](1);\n    case 'hour':\n      outDate[hoursSetterName(isUTC)](0);\n    case 'minute':\n      outDate[minutesSetterName(isUTC)](0);\n    case 'second':\n      outDate[secondsSetterName(isUTC)](0);\n      outDate[millisecondsSetterName(isUTC)](0);\n  }\n  return outDate.getTime();\n}\nfunction getIntervalTicks(bottomUnitName, approxInterval, isUTC, extent) {\n  var safeLimit = 10000;\n  var unitNames = timeUnits;\n  var iter = 0;\n  function addTicksInSpan(interval, minTimestamp, maxTimestamp, getMethodName, setMethodName, isDate, out) {\n    var date = new Date(minTimestamp);\n    var dateTime = minTimestamp;\n    var d = date[getMethodName]();\n    // if (isDate) {\n    //     d -= 1; // Starts with 0;   PENDING\n    // }\n    while (dateTime < maxTimestamp && dateTime <= extent[1]) {\n      out.push({\n        value: dateTime\n      });\n      d += interval;\n      date[setMethodName](d);\n      dateTime = date.getTime();\n    }\n    // This extra tick is for calcuating ticks of next level. Will not been added to the final result\n    out.push({\n      value: dateTime,\n      notAdd: true\n    });\n  }\n  function addLevelTicks(unitName, lastLevelTicks, levelTicks) {\n    var newAddedTicks = [];\n    var isFirstLevel = !lastLevelTicks.length;\n    if (isUnitValueSame(getPrimaryTimeUnit(unitName), extent[0], extent[1], isUTC)) {\n      return;\n    }\n    if (isFirstLevel) {\n      lastLevelTicks = [{\n        // TODO Optimize. Not include so may ticks.\n        value: getFirstTimestampOfUnit(new Date(extent[0]), unitName, isUTC)\n      }, {\n        value: extent[1]\n      }];\n    }\n    for (var i = 0; i < lastLevelTicks.length - 1; i++) {\n      var startTick = lastLevelTicks[i].value;\n      var endTick = lastLevelTicks[i + 1].value;\n      if (startTick === endTick) {\n        continue;\n      }\n      var interval = void 0;\n      var getterName = void 0;\n      var setterName = void 0;\n      var isDate = false;\n      switch (unitName) {\n        case 'year':\n          interval = Math.max(1, Math.round(approxInterval / ONE_DAY / 365));\n          getterName = fullYearGetterName(isUTC);\n          setterName = fullYearSetterName(isUTC);\n          break;\n        case 'half-year':\n        case 'quarter':\n        case 'month':\n          interval = getMonthInterval(approxInterval);\n          getterName = monthGetterName(isUTC);\n          setterName = monthSetterName(isUTC);\n          break;\n        case 'week': // PENDING If week is added. Ignore day.\n        case 'half-week':\n        case 'day':\n          interval = getDateInterval(approxInterval, 31); // Use 32 days and let interval been 16\n          getterName = dateGetterName(isUTC);\n          setterName = dateSetterName(isUTC);\n          isDate = true;\n          break;\n        case 'half-day':\n        case 'quarter-day':\n        case 'hour':\n          interval = getHourInterval(approxInterval);\n          getterName = hoursGetterName(isUTC);\n          setterName = hoursSetterName(isUTC);\n          break;\n        case 'minute':\n          interval = getMinutesAndSecondsInterval(approxInterval, true);\n          getterName = minutesGetterName(isUTC);\n          setterName = minutesSetterName(isUTC);\n          break;\n        case 'second':\n          interval = getMinutesAndSecondsInterval(approxInterval, false);\n          getterName = secondsGetterName(isUTC);\n          setterName = secondsSetterName(isUTC);\n          break;\n        case 'millisecond':\n          interval = getMillisecondsInterval(approxInterval);\n          getterName = millisecondsGetterName(isUTC);\n          setterName = millisecondsSetterName(isUTC);\n          break;\n      }\n      addTicksInSpan(interval, startTick, endTick, getterName, setterName, isDate, newAddedTicks);\n      if (unitName === 'year' && levelTicks.length > 1 && i === 0) {\n        // Add nearest years to the left extent.\n        levelTicks.unshift({\n          value: levelTicks[0].value - interval\n        });\n      }\n    }\n    for (var i = 0; i < newAddedTicks.length; i++) {\n      levelTicks.push(newAddedTicks[i]);\n    }\n    // newAddedTicks.length && console.log(unitName, newAddedTicks);\n    return newAddedTicks;\n  }\n  var levelsTicks = [];\n  var currentLevelTicks = [];\n  var tickCount = 0;\n  var lastLevelTickCount = 0;\n  for (var i = 0; i < unitNames.length && iter++ < safeLimit; ++i) {\n    var primaryTimeUnit = getPrimaryTimeUnit(unitNames[i]);\n    if (!isPrimaryTimeUnit(unitNames[i])) {\n      // TODO\n      continue;\n    }\n    addLevelTicks(unitNames[i], levelsTicks[levelsTicks.length - 1] || [], currentLevelTicks);\n    var nextPrimaryTimeUnit = unitNames[i + 1] ? getPrimaryTimeUnit(unitNames[i + 1]) : null;\n    if (primaryTimeUnit !== nextPrimaryTimeUnit) {\n      if (currentLevelTicks.length) {\n        lastLevelTickCount = tickCount;\n        // Remove the duplicate so the tick count can be precisely.\n        currentLevelTicks.sort(function (a, b) {\n          return a.value - b.value;\n        });\n        var levelTicksRemoveDuplicated = [];\n        for (var i_1 = 0; i_1 < currentLevelTicks.length; ++i_1) {\n          var tickValue = currentLevelTicks[i_1].value;\n          if (i_1 === 0 || currentLevelTicks[i_1 - 1].value !== tickValue) {\n            levelTicksRemoveDuplicated.push(currentLevelTicks[i_1]);\n            if (tickValue >= extent[0] && tickValue <= extent[1]) {\n              tickCount++;\n            }\n          }\n        }\n        var targetTickNum = (extent[1] - extent[0]) / approxInterval;\n        // Added too much in this level and not too less in last level\n        if (tickCount > targetTickNum * 1.5 && lastLevelTickCount > targetTickNum / 1.5) {\n          break;\n        }\n        // Only treat primary time unit as one level.\n        levelsTicks.push(levelTicksRemoveDuplicated);\n        if (tickCount > targetTickNum || bottomUnitName === unitNames[i]) {\n          break;\n        }\n      }\n      // Reset if next unitName is primary\n      currentLevelTicks = [];\n    }\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    if (iter >= safeLimit) {\n      warn('Exceed safe limit.');\n    }\n  }\n  var levelsTicksInExtent = filter(map(levelsTicks, function (levelTicks) {\n    return filter(levelTicks, function (tick) {\n      return tick.value >= extent[0] && tick.value <= extent[1] && !tick.notAdd;\n    });\n  }), function (levelTicks) {\n    return levelTicks.length > 0;\n  });\n  var ticks = [];\n  var maxLevel = levelsTicksInExtent.length - 1;\n  for (var i = 0; i < levelsTicksInExtent.length; ++i) {\n    var levelTicks = levelsTicksInExtent[i];\n    for (var k = 0; k < levelTicks.length; ++k) {\n      ticks.push({\n        value: levelTicks[k].value,\n        level: maxLevel - i\n      });\n    }\n  }\n  ticks.sort(function (a, b) {\n    return a.value - b.value;\n  });\n  // Remove duplicates\n  var result = [];\n  for (var i = 0; i < ticks.length; ++i) {\n    if (i === 0 || ticks[i].value !== ticks[i - 1].value) {\n      result.push(ticks[i]);\n    }\n  }\n  return result;\n}\nScale.registerClass(TimeScale);\nexport default TimeScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Scale from './Scale.js';\nimport * as numberUtil from '../util/number.js';\nimport * as scaleHelper from './helper.js';\n// Use some method of IntervalScale\nimport IntervalScale from './Interval.js';\nvar scaleProto = Scale.prototype;\n// FIXME:TS refactor: not good to call it directly with `this`?\nvar intervalScaleProto = IntervalScale.prototype;\nvar roundingErrorFix = numberUtil.round;\nvar mathFloor = Math.floor;\nvar mathCeil = Math.ceil;\nvar mathPow = Math.pow;\nvar mathLog = Math.log;\nvar LogScale = /** @class */function (_super) {\n  __extends(LogScale, _super);\n  function LogScale() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'log';\n    _this.base = 10;\n    _this._originalScale = new IntervalScale();\n    // FIXME:TS actually used by `IntervalScale`\n    _this._interval = 0;\n    return _this;\n  }\n  /**\r\n   * @param Whether expand the ticks to niced extent.\r\n   */\n  LogScale.prototype.getTicks = function (expandToNicedExtent) {\n    var originalScale = this._originalScale;\n    var extent = this._extent;\n    var originalExtent = originalScale.getExtent();\n    var ticks = intervalScaleProto.getTicks.call(this, expandToNicedExtent);\n    return zrUtil.map(ticks, function (tick) {\n      var val = tick.value;\n      var powVal = numberUtil.round(mathPow(this.base, val));\n      // Fix #4158\n      powVal = val === extent[0] && this._fixMin ? fixRoundingError(powVal, originalExtent[0]) : powVal;\n      powVal = val === extent[1] && this._fixMax ? fixRoundingError(powVal, originalExtent[1]) : powVal;\n      return {\n        value: powVal\n      };\n    }, this);\n  };\n  LogScale.prototype.setExtent = function (start, end) {\n    var base = mathLog(this.base);\n    // log(-Infinity) is NaN, so safe guard here\n    start = mathLog(Math.max(0, start)) / base;\n    end = mathLog(Math.max(0, end)) / base;\n    intervalScaleProto.setExtent.call(this, start, end);\n  };\n  /**\r\n   * @return {number} end\r\n   */\n  LogScale.prototype.getExtent = function () {\n    var base = this.base;\n    var extent = scaleProto.getExtent.call(this);\n    extent[0] = mathPow(base, extent[0]);\n    extent[1] = mathPow(base, extent[1]);\n    // Fix #4158\n    var originalScale = this._originalScale;\n    var originalExtent = originalScale.getExtent();\n    this._fixMin && (extent[0] = fixRoundingError(extent[0], originalExtent[0]));\n    this._fixMax && (extent[1] = fixRoundingError(extent[1], originalExtent[1]));\n    return extent;\n  };\n  LogScale.prototype.unionExtent = function (extent) {\n    this._originalScale.unionExtent(extent);\n    var base = this.base;\n    extent[0] = mathLog(extent[0]) / mathLog(base);\n    extent[1] = mathLog(extent[1]) / mathLog(base);\n    scaleProto.unionExtent.call(this, extent);\n  };\n  LogScale.prototype.unionExtentFromData = function (data, dim) {\n    // TODO\n    // filter value that <= 0\n    this.unionExtent(data.getApproximateExtent(dim));\n  };\n  /**\r\n   * Update interval and extent of intervals for nice ticks\r\n   * @param approxTickNum default 10 Given approx tick number\r\n   */\n  LogScale.prototype.calcNiceTicks = function (approxTickNum) {\n    approxTickNum = approxTickNum || 10;\n    var extent = this._extent;\n    var span = extent[1] - extent[0];\n    if (span === Infinity || span <= 0) {\n      return;\n    }\n    var interval = numberUtil.quantity(span);\n    var err = approxTickNum / span * interval;\n    // Filter ticks to get closer to the desired count.\n    if (err <= 0.5) {\n      interval *= 10;\n    }\n    // Interval should be integer\n    while (!isNaN(interval) && Math.abs(interval) < 1 && Math.abs(interval) > 0) {\n      interval *= 10;\n    }\n    var niceExtent = [numberUtil.round(mathCeil(extent[0] / interval) * interval), numberUtil.round(mathFloor(extent[1] / interval) * interval)];\n    this._interval = interval;\n    this._niceExtent = niceExtent;\n  };\n  LogScale.prototype.calcNiceExtent = function (opt) {\n    intervalScaleProto.calcNiceExtent.call(this, opt);\n    this._fixMin = opt.fixMin;\n    this._fixMax = opt.fixMax;\n  };\n  LogScale.prototype.parse = function (val) {\n    return val;\n  };\n  LogScale.prototype.contain = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.contain(val, this._extent);\n  };\n  LogScale.prototype.normalize = function (val) {\n    val = mathLog(val) / mathLog(this.base);\n    return scaleHelper.normalize(val, this._extent);\n  };\n  LogScale.prototype.scale = function (val) {\n    val = scaleHelper.scale(val, this._extent);\n    return mathPow(this.base, val);\n  };\n  LogScale.type = 'log';\n  return LogScale;\n}(Scale);\nvar proto = LogScale.prototype;\nproto.getMinorTicks = intervalScaleProto.getMinorTicks;\nproto.getLabel = intervalScaleProto.getLabel;\nfunction fixRoundingError(val, originalVal) {\n  return roundingErrorFix(val, numberUtil.getPrecision(originalVal));\n}\nScale.registerClass(LogScale);\nexport default LogScale;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { assert, isArray, eqNaN, isFunction } from 'zrender/lib/core/util.js';\nimport { parsePercent } from 'zrender/lib/contain/text.js';\nvar ScaleRawExtentInfo = /** @class */function () {\n  function ScaleRawExtentInfo(scale, model,\n  // Usually: data extent from all series on this axis.\n  originalExtent) {\n    this._prepareParams(scale, model, originalExtent);\n  }\n  /**\r\n   * Parameters depending on outside (like model, user callback)\r\n   * are prepared and fixed here.\r\n   */\n  ScaleRawExtentInfo.prototype._prepareParams = function (scale, model,\n  // Usually: data extent from all series on this axis.\n  dataExtent) {\n    if (dataExtent[1] < dataExtent[0]) {\n      dataExtent = [NaN, NaN];\n    }\n    this._dataMin = dataExtent[0];\n    this._dataMax = dataExtent[1];\n    var isOrdinal = this._isOrdinal = scale.type === 'ordinal';\n    this._needCrossZero = scale.type === 'interval' && model.getNeedCrossZero && model.getNeedCrossZero();\n    var axisMinValue = model.get('min', true);\n    if (axisMinValue == null) {\n      axisMinValue = model.get('startValue', true);\n    }\n    var modelMinRaw = this._modelMinRaw = axisMinValue;\n    if (isFunction(modelMinRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMinRaw !== 'dataMin') {\n      this._modelMinNum = parseAxisModelMinMax(scale, modelMinRaw);\n    }\n    var modelMaxRaw = this._modelMaxRaw = model.get('max', true);\n    if (isFunction(modelMaxRaw)) {\n      // This callback always provides users the full data extent (before data is filtered).\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw({\n        min: dataExtent[0],\n        max: dataExtent[1]\n      }));\n    } else if (modelMaxRaw !== 'dataMax') {\n      this._modelMaxNum = parseAxisModelMinMax(scale, modelMaxRaw);\n    }\n    if (isOrdinal) {\n      // FIXME: there is a flaw here: if there is no \"block\" data processor like `dataZoom`,\n      // and progressive rendering is using, here the category result might just only contain\n      // the processed chunk rather than the entire result.\n      this._axisDataLen = model.getCategories().length;\n    } else {\n      var boundaryGap = model.get('boundaryGap');\n      var boundaryGapArr = isArray(boundaryGap) ? boundaryGap : [boundaryGap || 0, boundaryGap || 0];\n      if (typeof boundaryGapArr[0] === 'boolean' || typeof boundaryGapArr[1] === 'boolean') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn('Boolean type for boundaryGap is only ' + 'allowed for ordinal axis. Please use string in ' + 'percentage instead, e.g., \"20%\". Currently, ' + 'boundaryGap is set to be 0.');\n        }\n        this._boundaryGapInner = [0, 0];\n      } else {\n        this._boundaryGapInner = [parsePercent(boundaryGapArr[0], 1), parsePercent(boundaryGapArr[1], 1)];\n      }\n    }\n  };\n  /**\r\n   * Calculate extent by prepared parameters.\r\n   * This method has no external dependency and can be called duplicatedly,\r\n   * getting the same result.\r\n   * If parameters changed, should call this method to recalcuate.\r\n   */\n  ScaleRawExtentInfo.prototype.calculate = function () {\n    // Notice: When min/max is not set (that is, when there are null/undefined,\n    // which is the most common case), these cases should be ensured:\n    // (1) For 'ordinal', show all axis.data.\n    // (2) For others:\n    //      + `boundaryGap` is applied (if min/max set, boundaryGap is\n    //      disabled).\n    //      + If `needCrossZero`, min/max should be zero, otherwise, min/max should\n    //      be the result that originalExtent enlarged by boundaryGap.\n    // (3) If no data, it should be ensured that `scale.setBlank` is set.\n    var isOrdinal = this._isOrdinal;\n    var dataMin = this._dataMin;\n    var dataMax = this._dataMax;\n    var axisDataLen = this._axisDataLen;\n    var boundaryGapInner = this._boundaryGapInner;\n    var span = !isOrdinal ? dataMax - dataMin || Math.abs(dataMin) : null;\n    // Currently if a `'value'` axis model min is specified as 'dataMin'/'dataMax',\n    // `boundaryGap` will not be used. It's the different from specifying as `null`/`undefined`.\n    var min = this._modelMinRaw === 'dataMin' ? dataMin : this._modelMinNum;\n    var max = this._modelMaxRaw === 'dataMax' ? dataMax : this._modelMaxNum;\n    // If `_modelMinNum`/`_modelMaxNum` is `null`/`undefined`, should not be fixed.\n    var minFixed = min != null;\n    var maxFixed = max != null;\n    if (min == null) {\n      min = isOrdinal ? axisDataLen ? 0 : NaN : dataMin - boundaryGapInner[0] * span;\n    }\n    if (max == null) {\n      max = isOrdinal ? axisDataLen ? axisDataLen - 1 : NaN : dataMax + boundaryGapInner[1] * span;\n    }\n    (min == null || !isFinite(min)) && (min = NaN);\n    (max == null || !isFinite(max)) && (max = NaN);\n    var isBlank = eqNaN(min) || eqNaN(max) || isOrdinal && !axisDataLen;\n    // If data extent modified, need to recalculated to ensure cross zero.\n    if (this._needCrossZero) {\n      // Axis is over zero and min is not set\n      if (min > 0 && max > 0 && !minFixed) {\n        min = 0;\n        // minFixed = true;\n      }\n      // Axis is under zero and max is not set\n      if (min < 0 && max < 0 && !maxFixed) {\n        max = 0;\n        // maxFixed = true;\n      }\n      // PENDING:\n      // When `needCrossZero` and all data is positive/negative, should it be ensured\n      // that the results processed by boundaryGap are positive/negative?\n      // If so, here `minFixed`/`maxFixed` need to be set.\n    }\n    var determinedMin = this._determinedMin;\n    var determinedMax = this._determinedMax;\n    if (determinedMin != null) {\n      min = determinedMin;\n      minFixed = true;\n    }\n    if (determinedMax != null) {\n      max = determinedMax;\n      maxFixed = true;\n    }\n    // Ensure min/max be finite number or NaN here. (not to be null/undefined)\n    // `NaN` means min/max axis is blank.\n    return {\n      min: min,\n      max: max,\n      minFixed: minFixed,\n      maxFixed: maxFixed,\n      isBlank: isBlank\n    };\n  };\n  ScaleRawExtentInfo.prototype.modifyDataMinMax = function (minMaxName, val) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen);\n    }\n    this[DATA_MIN_MAX_ATTR[minMaxName]] = val;\n  };\n  ScaleRawExtentInfo.prototype.setDeterminedMinMax = function (minMaxName, val) {\n    var attr = DETERMINED_MIN_MAX_ATTR[minMaxName];\n    if (process.env.NODE_ENV !== 'production') {\n      assert(!this.frozen\n      // Earse them usually means logic flaw.\n      && this[attr] == null);\n    }\n    this[attr] = val;\n  };\n  ScaleRawExtentInfo.prototype.freeze = function () {\n    // @ts-ignore\n    this.frozen = true;\n  };\n  return ScaleRawExtentInfo;\n}();\nexport { ScaleRawExtentInfo };\nvar DETERMINED_MIN_MAX_ATTR = {\n  min: '_determinedMin',\n  max: '_determinedMax'\n};\nvar DATA_MIN_MAX_ATTR = {\n  min: '_dataMin',\n  max: '_dataMax'\n};\n/**\r\n * Get scale min max and related info only depends on model settings.\r\n * This method can be called after coordinate system created.\r\n * For example, in data processing stage.\r\n *\r\n * Scale extent info probably be required multiple times during a workflow.\r\n * For example:\r\n * (1) `dataZoom` depends it to get the axis extent in \"100%\" state.\r\n * (2) `processor/extentCalculator` depends it to make sure whether axis extent is specified.\r\n * (3) `coordSys.update` use it to finally decide the scale extent.\r\n * But the callback of `min`/`max` should not be called multiple times.\r\n * The code below should not be implemented repeatedly either.\r\n * So we cache the result in the scale instance, which will be recreated at the beginning\r\n * of the workflow (because `scale` instance will be recreated each round of the workflow).\r\n */\nexport function ensureScaleRawExtentInfo(scale, model,\n// Usually: data extent from all series on this axis.\noriginalExtent) {\n  // Do not permit to recreate.\n  var rawExtentInfo = scale.rawExtentInfo;\n  if (rawExtentInfo) {\n    return rawExtentInfo;\n  }\n  rawExtentInfo = new ScaleRawExtentInfo(scale, model, originalExtent);\n  // @ts-ignore\n  scale.rawExtentInfo = rawExtentInfo;\n  return rawExtentInfo;\n}\nexport function parseAxisModelMinMax(scale, minMax) {\n  return minMax == null ? null : eqNaN(minMax) ? NaN : scale.parse(minMax);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport OrdinalScale from '../scale/Ordinal.js';\nimport IntervalScale from '../scale/Interval.js';\nimport Scale from '../scale/Scale.js';\nimport { prepareLayoutBarSeries, makeColumnLayout, retrieveColumnLayout } from '../layout/barGrid.js';\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport TimeScale from '../scale/Time.js';\nimport LogScale from '../scale/Log.js';\nimport { getStackedDimension } from '../data/helper/dataStackHelper.js';\nimport { ensureScaleRawExtentInfo } from './scaleRawExtentInfo.js';\n/**\r\n * Get axis scale extent before niced.\r\n * Item of returned array can only be number (including Infinity and NaN).\r\n *\r\n * Caution:\r\n * Precondition of calling this method:\r\n * The scale extent has been initialized using series data extent via\r\n * `scale.setExtent` or `scale.unionExtentFromData`;\r\n */\nexport function getScaleExtent(scale, model) {\n  var scaleType = scale.type;\n  var rawExtentResult = ensureScaleRawExtentInfo(scale, model, scale.getExtent()).calculate();\n  scale.setBlank(rawExtentResult.isBlank);\n  var min = rawExtentResult.min;\n  var max = rawExtentResult.max;\n  // If bars are placed on a base axis of type time or interval account for axis boundary overflow and current axis\n  // is base axis\n  // FIXME\n  // (1) Consider support value axis, where below zero and axis `onZero` should be handled properly.\n  // (2) Refactor the logic with `barGrid`. Is it not need to `makeBarWidthAndOffsetInfo` twice with different extent?\n  //     Should not depend on series type `bar`?\n  // (3) Fix that might overlap when using dataZoom.\n  // (4) Consider other chart types using `barGrid`?\n  // See #6728, #4862, `test/bar-overflow-time-plot.html`\n  var ecModel = model.ecModel;\n  if (ecModel && scaleType === 'time' /* || scaleType === 'interval' */) {\n    var barSeriesModels = prepareLayoutBarSeries('bar', ecModel);\n    var isBaseAxisAndHasBarSeries_1 = false;\n    zrUtil.each(barSeriesModels, function (seriesModel) {\n      isBaseAxisAndHasBarSeries_1 = isBaseAxisAndHasBarSeries_1 || seriesModel.getBaseAxis() === model.axis;\n    });\n    if (isBaseAxisAndHasBarSeries_1) {\n      // Calculate placement of bars on axis. TODO should be decoupled\n      // with barLayout\n      var barWidthAndOffset = makeColumnLayout(barSeriesModels);\n      // Adjust axis min and max to account for overflow\n      var adjustedScale = adjustScaleForOverflow(min, max, model, barWidthAndOffset);\n      min = adjustedScale.min;\n      max = adjustedScale.max;\n    }\n  }\n  return {\n    extent: [min, max],\n    // \"fix\" means \"fixed\", the value should not be\n    // changed in the subsequent steps.\n    fixMin: rawExtentResult.minFixed,\n    fixMax: rawExtentResult.maxFixed\n  };\n}\nfunction adjustScaleForOverflow(min, max, model,\n// Only support cartesian coord yet.\nbarWidthAndOffset) {\n  // Get Axis Length\n  var axisExtent = model.axis.getExtent();\n  var axisLength = Math.abs(axisExtent[1] - axisExtent[0]);\n  // Get bars on current base axis and calculate min and max overflow\n  var barsOnCurrentAxis = retrieveColumnLayout(barWidthAndOffset, model.axis);\n  if (barsOnCurrentAxis === undefined) {\n    return {\n      min: min,\n      max: max\n    };\n  }\n  var minOverflow = Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    minOverflow = Math.min(item.offset, minOverflow);\n  });\n  var maxOverflow = -Infinity;\n  zrUtil.each(barsOnCurrentAxis, function (item) {\n    maxOverflow = Math.max(item.offset + item.width, maxOverflow);\n  });\n  minOverflow = Math.abs(minOverflow);\n  maxOverflow = Math.abs(maxOverflow);\n  var totalOverFlow = minOverflow + maxOverflow;\n  // Calculate required buffer based on old range and overflow\n  var oldRange = max - min;\n  var oldRangePercentOfNew = 1 - (minOverflow + maxOverflow) / axisLength;\n  var overflowBuffer = oldRange / oldRangePercentOfNew - oldRange;\n  max += overflowBuffer * (maxOverflow / totalOverFlow);\n  min -= overflowBuffer * (minOverflow / totalOverFlow);\n  return {\n    min: min,\n    max: max\n  };\n}\n// Precondition of calling this method:\n// The scale extent has been initialized using series data extent via\n// `scale.setExtent` or `scale.unionExtentFromData`;\nexport function niceScaleExtent(scale, inModel) {\n  var model = inModel;\n  var extentInfo = getScaleExtent(scale, model);\n  var extent = extentInfo.extent;\n  var splitNumber = model.get('splitNumber');\n  if (scale instanceof LogScale) {\n    scale.base = model.get('logBase');\n  }\n  var scaleType = scale.type;\n  var interval = model.get('interval');\n  var isIntervalOrTime = scaleType === 'interval' || scaleType === 'time';\n  scale.setExtent(extent[0], extent[1]);\n  scale.calcNiceExtent({\n    splitNumber: splitNumber,\n    fixMin: extentInfo.fixMin,\n    fixMax: extentInfo.fixMax,\n    minInterval: isIntervalOrTime ? model.get('minInterval') : null,\n    maxInterval: isIntervalOrTime ? model.get('maxInterval') : null\n  });\n  // If some one specified the min, max. And the default calculated interval\n  // is not good enough. He can specify the interval. It is often appeared\n  // in angle axis with angle 0 - 360. Interval calculated in interval scale is hard\n  // to be 60.\n  // FIXME\n  if (interval != null) {\n    scale.setInterval && scale.setInterval(interval);\n  }\n}\n/**\r\n * @param axisType Default retrieve from model.type\r\n */\nexport function createScaleByModel(model, axisType) {\n  axisType = axisType || model.get('type');\n  if (axisType) {\n    switch (axisType) {\n      // Buildin scale\n      case 'category':\n        return new OrdinalScale({\n          ordinalMeta: model.getOrdinalMeta ? model.getOrdinalMeta() : model.getCategories(),\n          extent: [Infinity, -Infinity]\n        });\n      case 'time':\n        return new TimeScale({\n          locale: model.ecModel.getLocaleModel(),\n          useUTC: model.ecModel.get('useUTC')\n        });\n      default:\n        // case 'value'/'interval', 'log', or others.\n        return new (Scale.getClass(axisType) || IntervalScale)();\n    }\n  }\n}\n/**\r\n * Check if the axis cross 0\r\n */\nexport function ifAxisCrossZero(axis) {\n  var dataExtent = axis.scale.getExtent();\n  var min = dataExtent[0];\n  var max = dataExtent[1];\n  return !(min > 0 && max > 0 || min < 0 && max < 0);\n}\n/**\r\n * @param axis\r\n * @return Label formatter function.\r\n *         param: {number} tickValue,\r\n *         param: {number} idx, the index in all ticks.\r\n *                         If category axis, this param is not required.\r\n *         return: {string} label string.\r\n */\nexport function makeLabelFormatter(axis) {\n  var labelFormatter = axis.getLabelModel().get('formatter');\n  var categoryTickStart = axis.type === 'category' ? axis.scale.getExtent()[0] : null;\n  if (axis.scale.type === 'time') {\n    return function (tpl) {\n      return function (tick, idx) {\n        return axis.scale.getFormattedLabel(tick, idx, tpl);\n      };\n    }(labelFormatter);\n  } else if (zrUtil.isString(labelFormatter)) {\n    return function (tpl) {\n      return function (tick) {\n        // For category axis, get raw value; for numeric axis,\n        // get formatted label like '1,333,444'.\n        var label = axis.scale.getLabel(tick);\n        var text = tpl.replace('{value}', label != null ? label : '');\n        return text;\n      };\n    }(labelFormatter);\n  } else if (zrUtil.isFunction(labelFormatter)) {\n    return function (cb) {\n      return function (tick, idx) {\n        // The original intention of `idx` is \"the index of the tick in all ticks\".\n        // But the previous implementation of category axis do not consider the\n        // `axisLabel.interval`, which cause that, for example, the `interval` is\n        // `1`, then the ticks \"name5\", \"name7\", \"name9\" are displayed, where the\n        // corresponding `idx` are `0`, `2`, `4`, but not `0`, `1`, `2`. So we keep\n        // the definition here for back compatibility.\n        if (categoryTickStart != null) {\n          idx = tick.value - categoryTickStart;\n        }\n        return cb(getAxisRawValue(axis, tick), idx, tick.level != null ? {\n          level: tick.level\n        } : null);\n      };\n    }(labelFormatter);\n  } else {\n    return function (tick) {\n      return axis.scale.getLabel(tick);\n    };\n  }\n}\nexport function getAxisRawValue(axis, tick) {\n  // In category axis with data zoom, tick is not the original\n  // index of axis.data. So tick should not be exposed to user\n  // in category axis.\n  return axis.type === 'category' ? axis.scale.getLabel(tick) : tick.value;\n}\n/**\r\n * @param axis\r\n * @return Be null/undefined if no labels.\r\n */\nexport function estimateLabelUnionRect(axis) {\n  var axisModel = axis.model;\n  var scale = axis.scale;\n  if (!axisModel.get(['axisLabel', 'show']) || scale.isBlank()) {\n    return;\n  }\n  var realNumberScaleTicks;\n  var tickCount;\n  var categoryScaleExtent = scale.getExtent();\n  // Optimize for large category data, avoid call `getTicks()`.\n  if (scale instanceof OrdinalScale) {\n    tickCount = scale.count();\n  } else {\n    realNumberScaleTicks = scale.getTicks();\n    tickCount = realNumberScaleTicks.length;\n  }\n  var axisLabelModel = axis.getLabelModel();\n  var labelFormatter = makeLabelFormatter(axis);\n  var rect;\n  var step = 1;\n  // Simple optimization for large amount of labels\n  if (tickCount > 40) {\n    step = Math.ceil(tickCount / 40);\n  }\n  for (var i = 0; i < tickCount; i += step) {\n    var tick = realNumberScaleTicks ? realNumberScaleTicks[i] : {\n      value: categoryScaleExtent[0] + i\n    };\n    var label = labelFormatter(tick, i);\n    var unrotatedSingleRect = axisLabelModel.getTextRect(label);\n    var singleRect = rotateTextRect(unrotatedSingleRect, axisLabelModel.get('rotate') || 0);\n    rect ? rect.union(singleRect) : rect = singleRect;\n  }\n  return rect;\n}\nfunction rotateTextRect(textRect, rotate) {\n  var rotateRadians = rotate * Math.PI / 180;\n  var beforeWidth = textRect.width;\n  var beforeHeight = textRect.height;\n  var afterWidth = beforeWidth * Math.abs(Math.cos(rotateRadians)) + Math.abs(beforeHeight * Math.sin(rotateRadians));\n  var afterHeight = beforeWidth * Math.abs(Math.sin(rotateRadians)) + Math.abs(beforeHeight * Math.cos(rotateRadians));\n  var rotatedRect = new BoundingRect(textRect.x, textRect.y, afterWidth, afterHeight);\n  return rotatedRect;\n}\n/**\r\n * @param model axisLabelModel or axisTickModel\r\n * @return {number|String} Can be null|'auto'|number|function\r\n */\nexport function getOptionCategoryInterval(model) {\n  var interval = model.get('interval');\n  return interval == null ? 'auto' : interval;\n}\n/**\r\n * Set `categoryInterval` as 0 implicitly indicates that\r\n * show all labels regardless of overlap.\r\n * @param {Object} axis axisModel.axis\r\n */\nexport function shouldShowAllLabels(axis) {\n  return axis.type === 'category' && getOptionCategoryInterval(axis.getLabelModel()) === 0;\n}\nexport function getDataDimensionsOnAxis(data, axisDim) {\n  // Remove duplicated dat dimensions caused by `getStackedDimension`.\n  var dataDimMap = {};\n  // Currently `mapDimensionsAll` will contain stack result dimension ('__\\0ecstackresult').\n  // PENDING: is it reasonable? Do we need to remove the original dim from \"coord dim\" since\n  // there has been stacked result dim?\n  zrUtil.each(data.mapDimensionsAll(axisDim), function (dataDim) {\n    // For example, the extent of the original dimension\n    // is [0.1, 0.5], the extent of the `stackResultDimension`\n    // is [7, 9], the final extent should NOT include [0.1, 0.5],\n    // because there is no graphic corresponding to [0.1, 0.5].\n    // See the case in `test/area-stack.html` `main1`, where area line\n    // stack needs `yAxis` not start from 0.\n    dataDimMap[getStackedDimension(data, dataDim)] = true;\n  });\n  return zrUtil.keys(dataDimMap);\n}\nexport function unionAxisExtentFromData(dataExtent, data, axisDim) {\n  if (data) {\n    zrUtil.each(getDataDimensionsOnAxis(data, axisDim), function (dim) {\n      var seriesExtent = data.getApproximateExtent(dim);\n      seriesExtent[0] < dataExtent[0] && (dataExtent[0] = seriesExtent[0]);\n      seriesExtent[1] > dataExtent[1] && (dataExtent[1] = seriesExtent[1]);\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nvar AxisModelCommonMixin = /** @class */function () {\n  function AxisModelCommonMixin() {}\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\r\n   * Should be implemented by each axis model if necessary.\r\n   * @return coordinate system model\r\n   */\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n  return AxisModelCommonMixin;\n}();\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { registerPreprocessor, registerProcessor, registerPostInit, registerPostUpdate, registerAction, registerCoordinateSystem, registerLayout, registerVisual, registerTransform, registerLoading, registerMap, registerUpdateLifecycle, PRIORITY } from './core/echarts.js';\nimport ComponentView from './view/Component.js';\nimport ChartView from './view/Chart.js';\nimport ComponentModel from './model/Component.js';\nimport SeriesModel from './model/Series.js';\nimport { isFunction, indexOf, isArray, each } from 'zrender/lib/core/util.js';\nimport { registerImpl } from './core/impl.js';\nimport { registerPainter } from 'zrender/lib/zrender.js';\nvar extensions = [];\nvar extensionRegisters = {\n  registerPreprocessor: registerPreprocessor,\n  registerProcessor: registerProcessor,\n  registerPostInit: registerPostInit,\n  registerPostUpdate: registerPostUpdate,\n  registerUpdateLifecycle: registerUpdateLifecycle,\n  registerAction: registerAction,\n  registerCoordinateSystem: registerCoordinateSystem,\n  registerLayout: registerLayout,\n  registerVisual: registerVisual,\n  registerTransform: registerTransform,\n  registerLoading: registerLoading,\n  registerMap: registerMap,\n  registerImpl: registerImpl,\n  PRIORITY: PRIORITY,\n  ComponentModel: ComponentModel,\n  ComponentView: ComponentView,\n  SeriesModel: SeriesModel,\n  ChartView: ChartView,\n  // TODO Use ComponentModel and SeriesModel instead of Constructor\n  registerComponentModel: function (ComponentModelClass) {\n    ComponentModel.registerClass(ComponentModelClass);\n  },\n  registerComponentView: function (ComponentViewClass) {\n    ComponentView.registerClass(ComponentViewClass);\n  },\n  registerSeriesModel: function (SeriesModelClass) {\n    SeriesModel.registerClass(SeriesModelClass);\n  },\n  registerChartView: function (ChartViewClass) {\n    ChartView.registerClass(ChartViewClass);\n  },\n  registerSubTypeDefaulter: function (componentType, defaulter) {\n    ComponentModel.registerSubTypeDefaulter(componentType, defaulter);\n  },\n  registerPainter: function (painterType, PainterCtor) {\n    registerPainter(painterType, PainterCtor);\n  }\n};\nexport function use(ext) {\n  if (isArray(ext)) {\n    // use([ChartLine, ChartBar]);\n    each(ext, function (singleExt) {\n      use(singleExt);\n    });\n    return;\n  }\n  if (indexOf(extensions, ext) >= 0) {\n    return;\n  }\n  extensions.push(ext);\n  if (isFunction(ext)) {\n    ext = {\n      install: ext\n    };\n  }\n  ext.install(extensionRegisters);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport { makeInner } from '../util/model.js';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper.js';\nvar inner = makeInner();\nfunction tickValuesToNumbers(axis, values) {\n  var nums = zrUtil.map(values, function (val) {\n    return axis.scale.parse(val);\n  });\n  if (axis.type === 'time' && nums.length > 0) {\n    // Time axis needs duplicate first/last tick (see TimeScale.getTicks())\n    // The first and last tick/label don't get drawn\n    nums.sort();\n    nums.unshift(nums[0]);\n    nums.push(nums[nums.length - 1]);\n  }\n  return nums;\n}\nexport function createAxisLabels(axis) {\n  var custom = axis.getLabelModel().get('customValues');\n  if (custom) {\n    var labelFormatter_1 = makeLabelFormatter(axis);\n    var extent_1 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    var ticks = zrUtil.filter(tickNumbers, function (val) {\n      return val >= extent_1[0] && val <= extent_1[1];\n    });\n    return {\n      labels: zrUtil.map(ticks, function (numval) {\n        var tick = {\n          value: numval\n        };\n        return {\n          formattedLabel: labelFormatter_1(tick),\n          rawLabel: axis.scale.getLabel(tick),\n          tickValue: numval\n        };\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\r\n * @param {module:echats/coord/Axis} axis\r\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\r\n * @return {Object} {\r\n *     ticks: Array.<number>\r\n *     tickCategoryInterval: number\r\n * }\r\n */\nexport function createAxisTicks(axis, tickModel) {\n  var custom = axis.getTickModel().get('customValues');\n  if (custom) {\n    var extent_2 = axis.scale.getExtent();\n    var tickNumbers = tickValuesToNumbers(axis, custom);\n    return {\n      ticks: zrUtil.filter(tickNumbers, function (val) {\n        return val >= extent_2[0] && val <= extent_2[1];\n      })\n    };\n  }\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n  if (result) {\n    return result;\n  }\n  var labels;\n  var numericLabelInterval;\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  }\n  // Cache to avoid calling interval function repeatedly.\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n  if (result) {\n    return result;\n  }\n  var ticks;\n  var tickCategoryInterval;\n  // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  }\n  // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n    var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n    tickCategoryInterval = labelsResult.labelCategoryInterval;\n    ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n      return labelItem.tickValue;\n    });\n  } else {\n    tickCategoryInterval = optionTickInterval;\n    ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n  }\n  // Cache to avoid calling interval function repeatedly.\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        level: tick.level,\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\nfunction getListCache(axis, prop) {\n  // Because key can be a function, and cache size always is small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\r\n * Calculate interval for category axis ticks and labels.\r\n * To get precise result, at least one of `getRotate` and `isHorizontal`\r\n * should be implemented in axis.\r\n */\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n  var tickCount = ordinalScale.count();\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n  var step = 1;\n  // Simple optimization. Empirical value: tick count should less than 40.\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0;\n  // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0;\n    // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top');\n    // Magic number\n    width = rect.width * 1.3;\n    height = rect.height * 1.3;\n    // Min size, void long loop.\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n  var dw = maxW / unitW;\n  var dh = maxH / unitH;\n  // 0/0 is NaN, 1/0 is Infinity.\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount;\n  // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1\n  // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval\n  // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hidden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  }\n  // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n    cache.lastTickCount = tickCount;\n    cache.lastAutoInterval = interval;\n    cache.axisExtent0 = axisExtent[0];\n    cache.axisExtent1 = axisExtent[1];\n  }\n  return interval;\n}\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = [];\n  // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count();\n  // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  }\n  // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  }\n  // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n  var tickValue = startTick;\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n  return result;\n}\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, map } from 'zrender/lib/core/util.js';\nimport { linearMap, getPixelPrecision, round } from '../util/number.js';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder.js';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\r\n * Base class of Axis.\r\n */\nvar Axis = /** @class */function () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\r\n   * If axis extent contain given coord\r\n   */\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\r\n   * If axis extent contain given data\r\n   */\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\r\n   * Get coord extent.\r\n   */\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\r\n   * Get precision used for formatting\r\n   */\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\r\n   * Set coord extent\r\n   */\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\r\n   * Convert data to coord. Data is the rank if it has an ordinal scale\r\n   */\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\r\n   * Convert coord to data. Data is the rank if it has an ordinal scale\r\n   */\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\r\n   * Convert pixel point to data in axis\r\n   */\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\r\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\r\n   * `axis.getTicksCoords` considers `onBand`, which is used by\r\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\r\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\r\n   * @param opt.clamp If `true`, the first and the last\r\n   *        tick must be at the axis end points. Otherwise, clip ticks\r\n   *        that outside the axis extent.\r\n   */\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber');\n    // Protection.\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\r\n   * Notice here we only get the default tick model. For splitLine\r\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\r\n   * manually when calling `getTicksCoords`.\r\n   * In GL, this method may be overridden to:\r\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\r\n   */\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\r\n   * Get width of band\r\n   */\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0);\n    // Fix #2728, avoid NaN when only one data.\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\r\n   * Only be called in category axis.\r\n   * Can be overridden, consider other axes like in 3D.\r\n   * @return Auto interval for cateogry axis tick and label\r\n   */\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n  return Axis;\n}();\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n}\n// If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[1],\n      tickValue: ticksCoords[0].tickValue\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize,\n      tickValue: dataExtent[1] + 1\n    };\n    ticksCoords.push(last);\n  }\n  var inverse = axisExtent[0] > axisExtent[1];\n  // Handling clamp.\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unnecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { BoundingRect, OrientedBoundingRect } from '../util/graphic.js';\nexport function prepareLayoutList(input) {\n  var list = [];\n  for (var i = 0; i < input.length; i++) {\n    var rawItem = input[i];\n    if (rawItem.defaultAttr.ignore) {\n      continue;\n    }\n    var label = rawItem.label;\n    var transform = label.getComputedTransform();\n    // NOTE: Get bounding rect after getComputedTransform, or label may not been updated by the host el.\n    var localRect = label.getBoundingRect();\n    var isAxisAligned = !transform || transform[1] < 1e-5 && transform[2] < 1e-5;\n    var minMargin = label.style.margin || 0;\n    var globalRect = localRect.clone();\n    globalRect.applyTransform(transform);\n    globalRect.x -= minMargin / 2;\n    globalRect.y -= minMargin / 2;\n    globalRect.width += minMargin;\n    globalRect.height += minMargin;\n    var obb = isAxisAligned ? new OrientedBoundingRect(localRect, transform) : null;\n    list.push({\n      label: label,\n      labelLine: rawItem.labelLine,\n      rect: globalRect,\n      localRect: localRect,\n      obb: obb,\n      priority: rawItem.priority,\n      defaultAttr: rawItem.defaultAttr,\n      layoutOption: rawItem.computedLayoutOption,\n      axisAligned: isAxisAligned,\n      transform: transform\n    });\n  }\n  return list;\n}\nfunction shiftLayout(list, xyDim, sizeDim, minBound, maxBound, balanceShift) {\n  var len = list.length;\n  if (len < 2) {\n    return;\n  }\n  list.sort(function (a, b) {\n    return a.rect[xyDim] - b.rect[xyDim];\n  });\n  var lastPos = 0;\n  var delta;\n  var adjusted = false;\n  var shifts = [];\n  var totalShifts = 0;\n  for (var i = 0; i < len; i++) {\n    var item = list[i];\n    var rect = item.rect;\n    delta = rect[xyDim] - lastPos;\n    if (delta < 0) {\n      // shiftForward(i, len, -delta);\n      rect[xyDim] -= delta;\n      item.label[xyDim] -= delta;\n      adjusted = true;\n    }\n    var shift = Math.max(-delta, 0);\n    shifts.push(shift);\n    totalShifts += shift;\n    lastPos = rect[xyDim] + rect[sizeDim];\n  }\n  if (totalShifts > 0 && balanceShift) {\n    // Shift back to make the distribution more equally.\n    shiftList(-totalShifts / len, 0, len);\n  }\n  // TODO bleedMargin?\n  var first = list[0];\n  var last = list[len - 1];\n  var minGap;\n  var maxGap;\n  updateMinMaxGap();\n  // If ends exceed two bounds, squeeze at most 80%, then take the gap of two bounds.\n  minGap < 0 && squeezeGaps(-minGap, 0.8);\n  maxGap < 0 && squeezeGaps(maxGap, 0.8);\n  updateMinMaxGap();\n  takeBoundsGap(minGap, maxGap, 1);\n  takeBoundsGap(maxGap, minGap, -1);\n  // Handle bailout when there is not enough space.\n  updateMinMaxGap();\n  if (minGap < 0) {\n    squeezeWhenBailout(-minGap);\n  }\n  if (maxGap < 0) {\n    squeezeWhenBailout(maxGap);\n  }\n  function updateMinMaxGap() {\n    minGap = first.rect[xyDim] - minBound;\n    maxGap = maxBound - last.rect[xyDim] - last.rect[sizeDim];\n  }\n  function takeBoundsGap(gapThisBound, gapOtherBound, moveDir) {\n    if (gapThisBound < 0) {\n      // Move from other gap if can.\n      var moveFromMaxGap = Math.min(gapOtherBound, -gapThisBound);\n      if (moveFromMaxGap > 0) {\n        shiftList(moveFromMaxGap * moveDir, 0, len);\n        var remained = moveFromMaxGap + gapThisBound;\n        if (remained < 0) {\n          squeezeGaps(-remained * moveDir, 1);\n        }\n      } else {\n        squeezeGaps(-gapThisBound * moveDir, 1);\n      }\n    }\n  }\n  function shiftList(delta, start, end) {\n    if (delta !== 0) {\n      adjusted = true;\n    }\n    for (var i = start; i < end; i++) {\n      var item = list[i];\n      var rect = item.rect;\n      rect[xyDim] += delta;\n      item.label[xyDim] += delta;\n    }\n  }\n  // Squeeze gaps if the labels exceed margin.\n  function squeezeGaps(delta, maxSqeezePercent) {\n    var gaps = [];\n    var totalGaps = 0;\n    for (var i = 1; i < len; i++) {\n      var prevItemRect = list[i - 1].rect;\n      var gap = Math.max(list[i].rect[xyDim] - prevItemRect[xyDim] - prevItemRect[sizeDim], 0);\n      gaps.push(gap);\n      totalGaps += gap;\n    }\n    if (!totalGaps) {\n      return;\n    }\n    var squeezePercent = Math.min(Math.abs(delta) / totalGaps, maxSqeezePercent);\n    if (delta > 0) {\n      for (var i = 0; i < len - 1; i++) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i] * squeezePercent;\n        // Forward\n        shiftList(movement, 0, i + 1);\n      }\n    } else {\n      // Backward\n      for (var i = len - 1; i > 0; i--) {\n        // Distribute the shift delta to all gaps.\n        var movement = gaps[i - 1] * squeezePercent;\n        shiftList(-movement, i, len);\n      }\n    }\n  }\n  /**\r\n   * Squeeze to allow overlap if there is no more space available.\r\n   * Let other overlapping strategy like hideOverlap do the job instead of keep exceeding the bounds.\r\n   */\n  function squeezeWhenBailout(delta) {\n    var dir = delta < 0 ? -1 : 1;\n    delta = Math.abs(delta);\n    var moveForEachLabel = Math.ceil(delta / (len - 1));\n    for (var i = 0; i < len - 1; i++) {\n      if (dir > 0) {\n        // Forward\n        shiftList(moveForEachLabel, 0, i + 1);\n      } else {\n        // Backward\n        shiftList(-moveForEachLabel, len - i - 1, len);\n      }\n      delta -= moveForEachLabel;\n      if (delta <= 0) {\n        return;\n      }\n    }\n  }\n  return adjusted;\n}\n/**\r\n * Adjust labels on x direction to avoid overlap.\r\n */\nexport function shiftLayoutOnX(list, leftBound, rightBound,\n// If average the shifts on all labels and add them to 0\n// TODO: Not sure if should enable it.\n// Pros: The angle of lines will distribute more equally\n// Cons: In some layout. It may not what user wanted. like in pie. the label of last sector is usually changed unexpectedly.\nbalanceShift) {\n  return shiftLayout(list, 'x', 'width', leftBound, rightBound, balanceShift);\n}\n/**\r\n * Adjust labels on y direction to avoid overlap.\r\n */\nexport function shiftLayoutOnY(list, topBound, bottomBound,\n// If average the shifts on all labels and add them to 0\nbalanceShift) {\n  return shiftLayout(list, 'y', 'height', topBound, bottomBound, balanceShift);\n}\nexport function hideOverlap(labelList) {\n  var displayedLabels = [];\n  // TODO, render overflow visible first, put in the displayedLabels.\n  labelList.sort(function (a, b) {\n    return b.priority - a.priority;\n  });\n  var globalRect = new BoundingRect(0, 0, 0, 0);\n  function hideEl(el) {\n    if (!el.ignore) {\n      // Show on emphasis.\n      var emphasisState = el.ensureState('emphasis');\n      if (emphasisState.ignore == null) {\n        emphasisState.ignore = false;\n      }\n    }\n    el.ignore = true;\n  }\n  for (var i = 0; i < labelList.length; i++) {\n    var labelItem = labelList[i];\n    var isAxisAligned = labelItem.axisAligned;\n    var localRect = labelItem.localRect;\n    var transform = labelItem.transform;\n    var label = labelItem.label;\n    var labelLine = labelItem.labelLine;\n    globalRect.copy(labelItem.rect);\n    // Add a threshold because layout may be aligned precisely.\n    globalRect.width -= 0.1;\n    globalRect.height -= 0.1;\n    globalRect.x += 0.05;\n    globalRect.y += 0.05;\n    var obb = labelItem.obb;\n    var overlapped = false;\n    for (var j = 0; j < displayedLabels.length; j++) {\n      var existsTextCfg = displayedLabels[j];\n      // Fast rejection.\n      if (!globalRect.intersect(existsTextCfg.rect)) {\n        continue;\n      }\n      if (isAxisAligned && existsTextCfg.axisAligned) {\n        // Is overlapped\n        overlapped = true;\n        break;\n      }\n      if (!existsTextCfg.obb) {\n        // If self is not axis aligned. But other is.\n        existsTextCfg.obb = new OrientedBoundingRect(existsTextCfg.localRect, existsTextCfg.transform);\n      }\n      if (!obb) {\n        // If self is axis aligned. But other is not.\n        obb = new OrientedBoundingRect(localRect, transform);\n      }\n      if (obb.intersect(existsTextCfg.obb)) {\n        overlapped = true;\n        break;\n      }\n    }\n    // TODO Callback to determine if this overlap should be handled?\n    if (overlapped) {\n      hideEl(label);\n      labelLine && hideEl(labelLine);\n    } else {\n      label.attr('ignore', labelItem.defaultAttr.ignore);\n      labelLine && labelLine.attr('ignore', labelItem.defaultAttr.labelGuideIgnore);\n      displayedLabels.push(labelItem);\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport createSeriesData from '../helper/createSeriesData.js';\nimport SeriesModel from '../../model/Series.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { Group } from '../../util/graphic.js';\nvar LineSeriesModel = /** @class */function (_super) {\n  __extends(LineSeriesModel, _super);\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n    return createSeriesData(null, this, {\n      useEncodeDefaulter: true\n    });\n  };\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType;\n    // Symbol size is 80% when there is a line\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n    return group;\n  };\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    // zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity,\n    universalTransition: {\n      divideShape: 'clone'\n    },\n    triggerLineEvent: false\n  };\n  return LineSeriesModel;\n}(SeriesModel);\nexport default LineSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { retrieveRawValue } from '../../data/helper/dataProvider.js';\nimport { isArray } from 'zrender/lib/core/util.js';\n/**\r\n * @return label string. Not null/undefined\r\n */\nexport function getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  var len = labelDims.length;\n  // Simple optimization (in lots of cases, label dims length is 1)\n  if (len === 1) {\n    var rawVal = retrieveRawValue(data, dataIndex, labelDims[0]);\n    return rawVal != null ? rawVal + '' : null;\n  } else if (len) {\n    var vals = [];\n    for (var i = 0; i < labelDims.length; i++) {\n      vals.push(retrieveRawValue(data, dataIndex, labelDims[i]));\n    }\n    return vals.join(' ');\n  }\n}\nexport function getDefaultInterpolatedLabel(data, interpolatedValue) {\n  var labelDims = data.mapDimensionsAll('defaultedLabel');\n  if (!isArray(interpolatedValue)) {\n    return interpolatedValue + '';\n  }\n  var vals = [];\n  for (var i = 0; i < labelDims.length; i++) {\n    var dimIndex = data.getDimensionIndex(labelDims[i]);\n    if (dimIndex >= 0) {\n      vals.push(interpolatedValue[dimIndex]);\n    }\n  }\n  return vals.join(' ');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol, normalizeSymbolOffset, normalizeSymbolSize } from '../../util/symbol.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { enterEmphasis, leaveEmphasis, toggleHoverEmphasis } from '../../util/states.js';\nimport { getDefaultLabel } from './labelHelper.js';\nimport { extend } from 'zrender/lib/core/util.js';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle.js';\nimport ZRImage from 'zrender/lib/graphic/Image.js';\nimport { saveOldStyle } from '../../animation/basicTransition.js';\nvar Symbol = /** @class */function (_super) {\n  __extends(Symbol, _super);\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n    _this.updateData(data, idx, seriesScope, opts);\n    return _this;\n  }\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll();\n    // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    });\n    // Rewrite drift method\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\r\n   * Stop animation\r\n   * @param {boolean} toLastFrame\r\n   */\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  Symbol.prototype.getSymbolType = function () {\n    return this._symbolType;\n  };\n  /**\r\n   * FIXME:\r\n   * Caution: This method breaks the encapsulation of this module,\r\n   * but it indeed brings convenience. So do not use the method\r\n   * unless you detailedly know all the implements of `Symbol`,\r\n   * especially animation.\r\n   *\r\n   * Get symbol path element.\r\n   */\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\r\n   * Highlight symbol\r\n   */\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\r\n   * Downplay symbol\r\n   */\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\r\n   * @param {number} zlevel\r\n   * @param {number} z\r\n   */\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n  Symbol.prototype.setDraggable = function (draggable, hasCursorOption) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = !hasCursorOption && draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\r\n   * Update symbol properties\r\n   */\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n      saveOldStyle(symbolPath);\n    }\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n    if (disableAnimation) {\n      // Must stop leave transition manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('leave');\n    }\n  };\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var emphasisDisabled;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n      emphasisDisabled = seriesScope.emphasisDisabled;\n    }\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      emphasisDisabled = emphasisModel.get('disabled');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = normalizeSymbolOffset(data.getItemVisual(idx, 'symbolOffset'), symbolSize);\n    if (symbolOffset) {\n      symbolPath.x = symbolOffset[0];\n      symbolPath.y = symbolOffset[1];\n    }\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      }\n      // Disable decal because symbol scale will been applied on the decal.\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    });\n    // Do not execute util needed.\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n    // null / undefined / true means to use default strategy.\n    // 0 / false / negative number / NaN / Infinity means no scale.\n    var scaleRatio = hoverScale == null || hoverScale === true ? Math.max(1.1, 3 / this._sizeY)\n    // PENDING: restrict hoverScale > 1? It seems unreasonable to scale down\n    : isFinite(hoverScale) && hoverScale > 0 ? +hoverScale : 1;\n    // always set scale to allow resetting\n    emphasisState.scaleX = this._sizeX * scaleRatio;\n    emphasisState.scaleY = this._sizeY * scaleRatio;\n    this.setSymbolScale(1);\n    toggleHoverEmphasis(this, focus, blurScope, emphasisDisabled);\n  };\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n  Symbol.prototype.fadeOut = function (cb, seriesModel, opt) {\n    var symbolPath = this.childAt(0);\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation;\n    // Avoid mistaken hover when fading out\n    this.silent = symbolPath.silent = true;\n    // Not show text when animating\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n  Symbol.getSymbolSize = function (data, idx) {\n    return normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n  };\n  return Symbol;\n}(graphic.Group);\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport SymbolClz from './Symbol.js';\nimport { isObject } from 'zrender/lib/core/util.js';\nimport { getLabelStatesModels } from '../../label/labelStyle.js';\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx))\n  // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n  return opt || {};\n}\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    emphasisDisabled: emphasisModel.get('disabled'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\nvar SymbolDraw = /** @class */function () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\r\n   * Update symbols draw by new data\r\n   */\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    // Remove progressive els.\n    this._progressiveEls = null;\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    };\n    // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n    if (!oldData) {\n      group.removeAll();\n    }\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n      var newSymbolType = data.getItemVisual(newIdx, 'symbol') || 'circle';\n      var oldSymbolType = symbolEl && symbolEl.getSymbolType && symbolEl.getSymbolType();\n      if (!symbolEl\n      // Create a new if symbol type changed.\n      || oldSymbolType && oldSymbolType !== newSymbolType) {\n        group.remove(symbolEl);\n        symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      }\n      // Add back\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      }, seriesModel);\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n  ;\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n    var data = this._data;\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n  ;\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n  ;\n  /**\r\n   * Update symbols draw by new data\r\n   */\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    // Clear\n    this._progressiveEls = [];\n    opt = normalizeUpdateOpt(opt);\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n        this._progressiveEls.push(el);\n      }\n    }\n  };\n  ;\n  SymbolDraw.prototype.eachRendered = function (cb) {\n    graphic.traverseElements(this._progressiveEls || this.group, cb);\n  };\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data;\n    // Incremental model do not have this._data.\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        }, data.hostModel);\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n  ;\n  return SymbolDraw;\n}();\nexport default SymbolDraw;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper.js';\nimport { isNumber, map } from 'zrender/lib/core/util.js';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n  if (isDimensionStacked(data, dims[0] /* , dims[1] */)) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n  if (isDimensionStacked(data, dims[1] /* , dims[0] */)) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  }\n  // If origin is specified as a number, use it as\n  // valueStart directly\n  else if (isNumber(valueOrigin) && !isNaN(valueOrigin)) {\n    valueStart = valueOrigin;\n  }\n  // auto\n  else {\n    // Both positive\n    if (extent[0] > 0) {\n      valueStart = extent[0];\n    }\n    // Both negative\n    else if (extent[1] < 0) {\n      valueStart = extent[1];\n    }\n    // If is one positive, and one negative, onZero shall be true\n  }\n  return valueStart;\n}\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData);\n  // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n  var currPoints = [];\n  var nextPoints = [];\n  // Points for stacking base line\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0;\n    // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1];\n        // If previous data is NaN, use next point directly\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n      case '-':\n        pointAdded = false;\n    }\n    // Original indices\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  }\n  // Diff result may be crossed if all items are changed\n  // Sort by data index\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// Poly path support NaN point\nimport Path from 'zrender/lib/graphic/Path.js';\nimport PathProxy from 'zrender/lib/core/PathProxy.js';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve.js';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\r\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\r\n * situations. This should be used when points are non-monotone neither in x or\r\n * y dimension.\r\n */\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n      break;\n    }\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY;\n      // Ignore tiny segment.\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1];\n        // Ignore duplicate point\n        while (nextX === x && nextY === y && k < segLen) {\n          k++;\n          nextIdx += dir;\n          idx += dir;\n          nextX = points[nextIdx * 2];\n          nextY = points[nextIdx * 2 + 1];\n          x = points[idx * 2];\n          y = points[idx * 2 + 1];\n          dx = x - prevX;\n          dy = y - prevY;\n        }\n        var tmpK = k + 1;\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0;\n        // Is last point\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            var dir_1 = vx > 0 ? 1 : -1;\n            cpx1 = x - dir_1 * lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + dir_1 * lenNextSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            var dir_2 = vy > 0 ? 1 : -1;\n            cpx1 = x;\n            cpy1 = y - dir_2 * lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + dir_2 * lenNextSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n            // Use ratio of seg length\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg);\n            // cp0 of next segment\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg;\n            // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y));\n            // Reclaculate cp1 based on the adjusted cp0 of next seg.\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg;\n            // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y));\n            // Adjust next cp0 again.\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n  return k;\n}\nvar ECPolylineShape = /** @class */function () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n  return ECPolylineShape;\n}();\nvar ECPolyline = /** @class */function (_super) {\n  __extends(ECPolyline, _super);\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2;\n    // const result = getBoundingBox(points, shape.smoothConstraint);\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n          x0 = x;\n          y0 = y;\n          break;\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n  return ECPolyline;\n}(Path);\nexport { ECPolyline };\nvar ECPolygonShape = /** @class */function (_super) {\n  __extends(ECPolygonShape, _super);\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return ECPolygonShape;\n}(ECPolylineShape);\nvar ECPolygon = /** @class */function (_super) {\n  __extends(ECPolygon, _super);\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n  return ECPolygon;\n}(Path);\nexport { ECPolygon };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as graphic from '../../util/graphic.js';\nimport { round } from '../../util/number.js';\nimport { isFunction } from 'zrender/lib/core/util.js';\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel, done, during) {\n  var rect = cartesian.getArea();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get(['lineStyle', 'width']) || 0;\n  // Expand the clip path a bit to avoid the border is clipped and looks thinner\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  // fix: https://github.com/apache/incubator-echarts/issues/11369\n  width = Math.ceil(width);\n  if (x !== Math.floor(x)) {\n    x = Math.floor(x);\n    // if no extra 1px on `width`, it will still be clipped since `x` is floored\n    width++;\n  }\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n  if (hasAnimation) {\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = baseAxis.isHorizontal();\n    var isAxisInversed = baseAxis.inverse;\n    if (isHorizontal) {\n      if (isAxisInversed) {\n        clipPath.shape.x += width;\n      }\n      clipPath.shape.width = 0;\n    } else {\n      if (!isAxisInversed) {\n        clipPath.shape.y += height;\n      }\n      clipPath.shape.height = 0;\n    }\n    var duringCb = isFunction(during) ? function (percent) {\n      during(percent, clipPath);\n    } : null;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height,\n        x: x,\n        y: y\n      }\n    }, seriesModel, null, done, duringCb);\n  }\n  return clipPath;\n}\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea();\n  // Avoid float number rounding error for symbol on the edge of axis extent.\n  var r0 = round(sectorArea.r0, 1);\n  var r = round(sectorArea.r, 1);\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: r0,\n      r: r,\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n  if (hasAnimation) {\n    var isRadial = polar.getBaseAxis().dim === 'angle';\n    if (isRadial) {\n      clipPath.shape.endAngle = sectorArea.startAngle;\n    } else {\n      clipPath.shape.r = r0;\n    }\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle,\n        r: r\n      }\n    }, seriesModel);\n  }\n  return clipPath;\n}\nfunction createClipPath(coordSys, hasAnimation, seriesModel, done, during) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel, done, during);\n  }\n  return null;\n}\nexport { createGridClipPath, createPolarClipPath, createClipPath };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport function isCoordinateSystemType(coordSys, type) {\n  return coordSys.type === type;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// FIXME step not support polar\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport SymbolDraw from '../helper/SymbolDraw.js';\nimport SymbolClz from '../helper/Symbol.js';\nimport lineAnimationDiff from './lineAnimationDiff.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as modelUtil from '../../util/model.js';\nimport { ECPolyline, ECPolygon } from './poly.js';\nimport ChartView from '../../view/Chart.js';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper.js';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys.js';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem.js';\nimport { setStatesStylesFromModel, setStatesFlag, toggleHoverEmphasis, SPECIAL_STATES } from '../../util/states.js';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle.js';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createFloat32Array } from '../../util/vendor.js';\nimport { convertToColorString } from '../../util/format.js';\nimport { lerp } from 'zrender/lib/tool/color.js';\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n  return true;\n}\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n  return [[minX, minY], [maxX, maxY]];\n}\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n    min1 = _a[0],\n    max1 = _a[1];\n  var _b = bboxFromPoints(points2),\n    min2 = _b[0],\n    max2 = _b[1];\n  // Get a max value from each corner of two boundings.\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\nfunction getSmooth(smooth) {\n  return zrUtil.isNumber(smooth) ? smooth : smooth ? 0.5 : 0;\n}\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n  return points;\n}\n/**\r\n * Filter the null data and extend data for step considering `stepTurnAt`\r\n *\r\n * @param points data to convert, that may containing null\r\n * @param basePoints base data to reference, used only for areaStyle points\r\n * @param coordSys coordinate system\r\n * @param stepTurnAt 'start' | 'end' | 'middle' | true\r\n * @param connectNulls whether to connect nulls\r\n * @returns converted point positions\r\n */\nfunction turnPointsIntoStep(points, basePoints, coordSys, stepTurnAt, connectNulls) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n  var filteredPoints = [];\n  if (connectNulls) {\n    for (i = 0; i < points.length; i += 2) {\n      /**\r\n       * For areaStyle of stepped lines, `stackedOnPoints` should be\r\n       * filtered the same as `points` so that the base axis values\r\n       * should stay the same as the lines above. See #20021\r\n       */\n      var reference = basePoints || points;\n      if (!isNaN(reference[i]) && !isNaN(reference[i + 1])) {\n        filteredPoints.push(points[i], points[i + 1]);\n      }\n    }\n    points = filteredPoints;\n  }\n  for (i = 0; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  }\n  // Last points\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n/**\r\n * Clip color stops to edge. Avoid creating too large gradients.\r\n * Which may lead to blurry when GPU acceleration is enabled. See #15680\r\n *\r\n * The stops has been sorted from small to large.\r\n */\nfunction clipColorStops(colorStops, maxSize) {\n  var newColorStops = [];\n  var len = colorStops.length;\n  // coord will always < 0 in prevOutOfRangeColorStop.\n  var prevOutOfRangeColorStop;\n  var prevInRangeColorStop;\n  function lerpStop(stop0, stop1, clippedCoord) {\n    var coord0 = stop0.coord;\n    var p = (clippedCoord - coord0) / (stop1.coord - coord0);\n    var color = lerp(p, [stop0.color, stop1.color]);\n    return {\n      coord: clippedCoord,\n      color: color\n    };\n  }\n  for (var i = 0; i < len; i++) {\n    var stop_1 = colorStops[i];\n    var coord = stop_1.coord;\n    if (coord < 0) {\n      prevOutOfRangeColorStop = stop_1;\n    } else if (coord > maxSize) {\n      if (prevInRangeColorStop) {\n        newColorStops.push(lerpStop(prevInRangeColorStop, stop_1, maxSize));\n      } else if (prevOutOfRangeColorStop) {\n        // If there are two stops and coord range is between these two stops\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0), lerpStop(prevOutOfRangeColorStop, stop_1, maxSize));\n      }\n      // All following stop will be out of range. So just ignore them.\n      break;\n    } else {\n      if (prevOutOfRangeColorStop) {\n        newColorStops.push(lerpStop(prevOutOfRangeColorStop, stop_1, 0));\n        // Reset\n        prevOutOfRangeColorStop = null;\n      }\n      newColorStops.push(stop_1);\n      prevInRangeColorStop = stop_1;\n    }\n  }\n  return newColorStops;\n}\nfunction getVisualGradient(data, coordSys, api) {\n  var visualMetaList = data.getVisual('visualMeta');\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n    return;\n  }\n  var coordDim;\n  var visualMeta;\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimInfo = data.getDimensionInfo(visualMetaList[i].dimension);\n    coordDim = dimInfo && dimInfo.coordDim;\n    // Can only be x or y\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n    return;\n  }\n  // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n  var axis = coordSys.getAxis(coordDim);\n  // dataToCoord mapping may not be linear, but must be monotonic.\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    // offset will be calculated later.\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n  var colorStopsInRange = clipColorStops(colorStops, coordDim === 'x' ? api.getWidth() : api.getHeight());\n  var inRangeStopLen = colorStopsInRange.length;\n  if (!inRangeStopLen && stopLen) {\n    // All stops are out of range. All will be the same color.\n    return colorStops[0].coord < 0 ? outerColors[1] ? outerColors[1] : colorStops[stopLen - 1].color : outerColors[0] ? outerColors[0] : colorStops[0].color;\n  }\n  var tinyExtent = 10; // Arbitrary value: 10px\n  var minCoord = colorStopsInRange[0].coord - tinyExtent;\n  var maxCoord = colorStopsInRange[inRangeStopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n  zrUtil.each(colorStopsInRange, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStopsInRange.push({\n    // NOTE: inRangeStopLen may still be 0 if stoplen is zero.\n    offset: inRangeStopLen ? colorStopsInRange[inRangeStopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStopsInRange.unshift({\n    offset: inRangeStopLen ? colorStopsInRange[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  });\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStopsInRange, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n  if (!categoryAxis) {\n    return;\n  }\n  // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n  if (isAuto\n  // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  }\n  // Otherwise follow the label interval strategy on category axis.\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In most cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex\n    // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0]\n    // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n  return len - 1;\n}\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n    prevIndex = i;\n    a = b;\n  }\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\nfunction anyStateShowEndLabel(seriesModel) {\n  if (seriesModel.get(['endLabel', 'show'])) {\n    return true;\n  }\n  for (var i = 0; i < SPECIAL_STATES.length; i++) {\n    if (seriesModel.get([SPECIAL_STATES[i], 'endLabel', 'show'])) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = anyStateShowEndLabel(seriesModel) ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during);\n    // Expand clip shape to avoid clipping when line value exceeds axis\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n    // Set to the final frame. To make sure label layout is right.\n    if (during) {\n      during(1, clipPath);\n    }\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\nvar LineView = /** @class */function (_super) {\n  __extends(LineView, _super);\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n    this._changePolyState = zrUtil.bind(this._changePolyState, this);\n  };\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = !ecModel.ssr && seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var connectNulls = seriesModel.get('connectNulls');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys);\n    // Remove temporary symbols\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    // Remove previous created symbols if showSymbol changed to false\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n    group.add(lineGroup);\n    // FIXME step not support polar\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea();\n      // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys, api) || data.getVisual('style')[data.getVisual('drawType')];\n    // Initialization animation or coordinate system changed\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n      if (step) {\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, points, coordSys, step, connectNulls);\n        }\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, null, coordSys, step, connectNulls);\n      }\n      polyline = this._newPolyline(points);\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // If areaStyle is removed\n      else if (polygon) {\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      }\n      // NOTE: Must update _endLabel before setClipPath.\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      }\n      // NOTE: Must update _endLabel before setClipPath.\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n      // Update clipPath\n      var oldClipPath = lineGroup.getClipPath();\n      if (oldClipPath) {\n        var newClipPath = createLineClipPath(this, coordSys, false, seriesModel);\n        graphic.initProps(oldClipPath, {\n          shape: newClipPath.shape\n        }, seriesModel);\n      } else {\n        lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n      }\n      // Always update, or it is wrong in the case turning on legend\n      // because points are not changed.\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      // In the case data zoom triggered refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing.\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, points, coordSys, step, connectNulls);\n            }\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, null, coordSys, step, connectNulls);\n          }\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n    var emphasisModel = seriesModel.getModel('emphasis');\n    var focus = emphasisModel.get('focus');\n    var blurScope = emphasisModel.get('blurScope');\n    var emphasisDisabled = emphasisModel.get('disabled');\n    polyline.useStyle(zrUtil.defaults(\n    // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    }\n    // Needs seriesIndex for focus\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    toggleHoverEmphasis(polyline, focus, blurScope, emphasisDisabled);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle');\n      // Needs seriesIndex for focus\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      toggleHoverEmphasis(polygon, focus, blurScope, emphasisDisabled);\n    }\n    var changePolyState = this._changePolyState;\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data;\n    // Save the coordinate system for transition animation when data changed\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n    if (seriesModel.get('triggerLineEvent')) {\n      this.packEventData(seriesModel, polyline);\n      polygon && this.packEventData(seriesModel, polygon);\n    }\n  };\n  LineView.prototype.packEventData = function (seriesModel, el) {\n    getECData(el).eventData = {\n      componentType: 'series',\n      componentSubType: 'line',\n      componentIndex: seriesModel.componentIndex,\n      seriesIndex: seriesModel.seriesIndex,\n      seriesName: seriesModel.name,\n      seriesType: 'line'\n    };\n  };\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n    this._changePolyState('emphasis');\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        }\n        // fix #11360: shouldn't draw symbol outside clipShapeForSymbol\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n        var zlevel = seriesModel.get('zlevel') || 0;\n        var z = seriesModel.get('z') || 0;\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z);\n        // ensure label text of the temporary symbol is in front of line and area polygon\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol);\n        // Stop scale animation\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n    this._changePolyState('normal');\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline;\n    // Remove previous created polyline\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n    this._lineGroup.add(polyline);\n    this._polyline = polyline;\n    return polyline;\n  };\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon;\n    // Remove previous created polygon\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n    this._lineGroup.add(polygon);\n    this._polygon = polygon;\n    return polygon;\n  };\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n    if (zrUtil.isFunction(seriesDuration)) {\n      seriesDuration = seriesDuration(null);\n    }\n    var seriesDelay = seriesModel.get('animationDelay') || 0;\n    var seriesDelayValue = zrUtil.isFunction(seriesDelay) ? seriesDelay(null) : seriesDelay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n        var delay = zrUtil.isFunction(seriesDelay) ? seriesDelay(idx) : seriesDuration * ratio + seriesDelayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          setToFinal: true,\n          delay: delay\n        });\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n    if (anyStateShowEndLabel(seriesModel)) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline;\n      // series may be filtered.\n      var points = data_2.getLayout('points');\n      if (!points) {\n        polyline.removeTextContent();\n        this._endLabel = null;\n        return;\n      }\n      var endLabel = this._endLabel;\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      }\n      // Find last non-NaN data to display data\n      var dataIndex = getLastIndexNotNull(points);\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n      this._endLabel = null;\n    }\n  };\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n      if (valueAnimation) {\n        var inner = labelInner(endLabel);\n        if (typeof inner.setLabelText === 'function') {\n          inner.setLabelText(value);\n        }\n      }\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  // FIXME Two value axis\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin, connectNulls) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n    if (step) {\n      // TODO If stacked series is not step\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, diff.current, coordSys, step, connectNulls);\n      current = turnPointsIntoStep(diff.current, null, coordSys, step, connectNulls);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, diff.next, coordSys, step, connectNulls);\n      next = turnPointsIntoStep(diff.next, null, coordSys, step, connectNulls);\n    }\n    // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.stopAnimation();\n      polyline.setShape({\n        points: next\n      });\n      if (polygon) {\n        polygon.stopAnimation();\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n      return;\n    }\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    };\n    // Also animate the original points.\n    // If points reference is changed when turning into step line.\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    }\n    // Stop previous animation.\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n      // If use attr directly in updateProps.\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n          });\n        }\n      }\n    }\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n    this._lineGroup.removeAll();\n    this._symbolDraw.remove(true);\n    // Remove temporary created elements when highlighting\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\nexport default LineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { map } from 'zrender/lib/core/util.js';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner.js';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper.js';\nimport { createFloat32Array } from '../util/vendor.js';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n      if (!coordSys) {\n        return;\n      }\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n      if (isDimensionStacked(data, dims[0])) {\n        dims[0] = stackResultDim;\n      }\n      if (isDimensionStacked(data, dims[1])) {\n        dims[1] = stackResultDim;\n      }\n      var store = data.getStore();\n      var dimIdx0 = data.getDimensionIndex(dims[0]);\n      var dimIdx1 = data.getDimensionIndex(dims[1]);\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n            if (dimLen === 1) {\n              var x = store.get(dimIdx0, i);\n              // NOTE: Make sure the second parameter is null to use default strategy.\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = store.get(dimIdx0, i);\n              tmpIn[1] = store.get(dimIdx1, i);\n              // Let coordinate system to handle the NaN data.\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isFunction, isString } from 'zrender/lib/core/util.js';\nvar samplers = {\n  average: function (frame) {\n    var sum = 0;\n    var count = 0;\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    }\n    // Return NaN if count is 0\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function (frame) {\n    var sum = 0;\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n    return sum;\n  },\n  max: function (frame) {\n    var max = -Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(max) ? max : NaN;\n  },\n  min: function (frame) {\n    var min = Infinity;\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    }\n    // NaN will cause illegal axis extent.\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function (frame) {\n    return frame[0];\n  }\n};\nvar indexSampler = function (frame) {\n  return Math.round(frame.length / 2);\n};\nexport default function dataSample(seriesType) {\n  return {\n    seriesType: seriesType,\n    // FIXME:TS never used, so comment it\n    // modifyOutputEnd: true,\n    reset: function (seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem;\n      var count = data.count();\n      // Only cartesian2d support down sampling. Disable it when there is few data.\n      if (count > 10 && coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent();\n        var dpr = api.getDevicePixelRatio();\n        // Coordinste system has been resized\n        var size = Math.abs(extent[1] - extent[0]) * (dpr || 1);\n        var rate = Math.round(count / size);\n        if (isFinite(rate) && rate > 1) {\n          if (sampling === 'lttb') {\n            seriesModel.setData(data.lttbDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          } else if (sampling === 'minmax') {\n            seriesModel.setData(data.minmaxDownSample(data.mapDimension(valueAxis.dim), 1 / rate));\n          }\n          var sampler = void 0;\n          if (isString(sampling)) {\n            sampler = samplers[sampling];\n          } else if (isFunction(sampling)) {\n            sampler = sampling;\n          }\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LineSeries from './LineSeries.js';\nimport LineView from './LineView.js';\n// In case developer forget to include grid component\nimport layoutPoints from '../../layout/points.js';\nimport dataSample from '../../processor/dataSample.js';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      // Visual coding for legend\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  });\n  // Down sample after filter\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar GridModel = /** @class */function (_super) {\n  __extends(GridModel, _super);\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    // zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar CartesianAxisModel = /** @class */function (_super) {\n  __extends(CartesianAxisModel, _super);\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar defaultOption = {\n  show: true,\n  // zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    showMinLine: true,\n    showMaxLine: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Length of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {\n      // Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault.js';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout.js';\nimport OrdinalMeta from '../data/OrdinalMeta.js';\nimport { AXIS_TYPES } from './axisCommonTypes.js';\nimport { each, merge } from 'zrender/lib/core/util.js';\n/**\r\n * Generate sub axis model class\r\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\r\n */\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n    var AxisModel = /** @class */function (_super) {\n      __extends(AxisModel, _super);\n      function AxisModel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\r\n       * Should not be called before all of 'getInitailData' finished.\r\n       * Because categories are collected during initializing data.\r\n       */\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option;\n        // FIXME\n        // warning if called before all of 'getInitailData' finished.\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n          return this.__ordinalMeta.categories;\n        }\n      };\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nvar Cartesian = /** @class */function () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n    this._dimList.push(dim);\n  };\n  return Cartesian;\n}();\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport Cartesian from './Cartesian.js';\nimport { invert } from 'zrender/lib/core/matrix.js';\nimport { applyTransform } from 'zrender/lib/core/vector.js';\nexport var cartesian2DDimensions = ['x', 'y'];\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\nvar Cartesian2D = /** @class */function (_super) {\n  __extends(Cartesian2D, _super);\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\r\n   * Calculate an affine transform matrix if two axes are time or value.\r\n   * It's mainly for accelartion on the large time series data.\r\n   */\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    }\n    // Accelerate data to point calculation on the special large time series data.\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\r\n   * Base axis will be used on stacking.\r\n   */\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n  Cartesian2D.prototype.containZone = function (data1, data2) {\n    var zoneDiag1 = this.dataToPoint(data1);\n    var zoneDiag2 = this.dataToPoint(data2);\n    var area = this.getArea();\n    var zone = new BoundingRect(zoneDiag1[0], zoneDiag1[1], zoneDiag2[0] - zoneDiag1[0], zoneDiag2[1] - zoneDiag1[1]);\n    return area.intersect(zone);\n  };\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1];\n    // Fast path\n    if (this._transform\n    // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\r\n   * Get rect area of cartesian.\r\n   * Area will have a contain function to determine if a point is in the coordinate system.\r\n   */\n  Cartesian2D.prototype.getArea = function (tolerance) {\n    tolerance = tolerance || 0;\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]) - tolerance;\n    var y = Math.min(yExtent[0], yExtent[1]) - tolerance;\n    var width = Math.max(xExtent[0], xExtent[1]) - x + tolerance;\n    var height = Math.max(yExtent[0], yExtent[1]) - y + tolerance;\n    return new BoundingRect(x, y, width, height);\n  };\n  return Cartesian2D;\n}(Cartesian);\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis.js';\nvar Axis2D = /** @class */function (_super) {\n  __extends(Axis2D, _super);\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\r\n     * Index of axis, can be used as key\r\n     * Injected outside.\r\n     */\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\r\n   * Each item cooresponds to this.getExtent(), which\r\n   * means globalExtent[0] may greater than globalExtent[1],\r\n   * unless `asc` is input.\r\n   *\r\n   * @param {boolean} [asc]\r\n   * @return {Array.<number>}\r\n   */\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\r\n   * Set ordinalSortInfo\r\n   * @param info new OrdinalSortInfo\r\n   */\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n  return Axis2D;\n}(Axis);\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\n/**\r\n * Can only be called after coordinate system creation stage.\r\n * (Can be called before coordinate system update stage).\r\n */\nexport function layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  }\n  // Axis position\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]];\n  // Axis rotation\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1);\n  // Tick and label direction, x y is axisDim\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n  if (axisModel.get(['axisTick', 'inside'])) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get(['axisLabel', 'inside']))) {\n    layout.labelDirection = -layout.labelDirection;\n  }\n  // Special label rotation\n  var labelRotate = axisModel.get(['axisLabel', 'rotate']);\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate;\n  // Over splitLine and splitArea\n  layout.z2 = 1;\n  return layout;\n}\nexport function isCartesian2DSeries(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\nexport function findAxisModels(seriesModel) {\n  var axisModelMap = {\n    xAxisModel: null,\n    yAxisModel: null\n  };\n  zrUtil.each(axisModelMap, function (v, key) {\n    var axisType = key.replace(/Model$/, '');\n    var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n    if (process.env.NODE_ENV !== 'production') {\n      if (!axisModel) {\n        throw new Error(axisType + ' \"' + zrUtil.retrieve3(seriesModel.get(axisType + 'Index'), seriesModel.get(axisType + 'Id'), 0) + '\" not found');\n      }\n    }\n    axisModelMap[key] = axisModel;\n  });\n  return axisModelMap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { getPrecisionSafe, round } from '../util/number.js';\nimport IntervalScale from '../scale/Interval.js';\nimport { getScaleExtent } from './axisHelper.js';\nimport { warn } from '../util/log.js';\nimport { increaseInterval, isValueNice } from '../scale/helper.js';\nvar mathLog = Math.log;\nexport function alignScaleTicks(scale, axisModel, alignToScale) {\n  var intervalScaleProto = IntervalScale.prototype;\n  // NOTE: There is a precondition for log scale  here:\n  // In log scale we store _interval and _extent of exponent value.\n  // So if we use the method of InternalScale to set/get these data.\n  // It process the exponent value, which is linear and what we want here.\n  var alignToTicks = intervalScaleProto.getTicks.call(alignToScale);\n  var alignToNicedTicks = intervalScaleProto.getTicks.call(alignToScale, true);\n  var alignToSplitNumber = alignToTicks.length - 1;\n  var alignToInterval = intervalScaleProto.getInterval.call(alignToScale);\n  var scaleExtent = getScaleExtent(scale, axisModel);\n  var rawExtent = scaleExtent.extent;\n  var isMinFixed = scaleExtent.fixMin;\n  var isMaxFixed = scaleExtent.fixMax;\n  if (scale.type === 'log') {\n    var logBase = mathLog(scale.base);\n    rawExtent = [mathLog(rawExtent[0]) / logBase, mathLog(rawExtent[1]) / logBase];\n  }\n  scale.setExtent(rawExtent[0], rawExtent[1]);\n  scale.calcNiceExtent({\n    splitNumber: alignToSplitNumber,\n    fixMin: isMinFixed,\n    fixMax: isMaxFixed\n  });\n  var extent = intervalScaleProto.getExtent.call(scale);\n  // Need to update the rawExtent.\n  // Because value in rawExtent may be not parsed. e.g. 'dataMin', 'dataMax'\n  if (isMinFixed) {\n    rawExtent[0] = extent[0];\n  }\n  if (isMaxFixed) {\n    rawExtent[1] = extent[1];\n  }\n  var interval = intervalScaleProto.getInterval.call(scale);\n  var min = rawExtent[0];\n  var max = rawExtent[1];\n  if (isMinFixed && isMaxFixed) {\n    // User set min, max, divide to get new interval\n    interval = (max - min) / alignToSplitNumber;\n  } else if (isMinFixed) {\n    max = rawExtent[0] + interval * alignToSplitNumber;\n    // User set min, expand extent on the other side\n    while (max < rawExtent[1] && isFinite(max) && isFinite(rawExtent[1])) {\n      interval = increaseInterval(interval);\n      max = rawExtent[0] + interval * alignToSplitNumber;\n    }\n  } else if (isMaxFixed) {\n    // User set max, expand extent on the other side\n    min = rawExtent[1] - interval * alignToSplitNumber;\n    while (min > rawExtent[0] && isFinite(min) && isFinite(rawExtent[0])) {\n      interval = increaseInterval(interval);\n      min = rawExtent[1] - interval * alignToSplitNumber;\n    }\n  } else {\n    var nicedSplitNumber = scale.getTicks().length - 1;\n    if (nicedSplitNumber > alignToSplitNumber) {\n      interval = increaseInterval(interval);\n    }\n    var range = interval * alignToSplitNumber;\n    max = Math.ceil(rawExtent[1] / interval) * interval;\n    min = round(max - range);\n    // Not change the result that crossing zero.\n    if (min < 0 && rawExtent[0] >= 0) {\n      min = 0;\n      max = round(range);\n    } else if (max > 0 && rawExtent[1] <= 0) {\n      max = 0;\n      min = -round(range);\n    }\n  }\n  // Adjust min, max based on the extent of alignTo. When min or max is set in alignTo scale\n  var t0 = (alignToTicks[0].value - alignToNicedTicks[0].value) / alignToInterval;\n  var t1 = (alignToTicks[alignToSplitNumber].value - alignToNicedTicks[alignToSplitNumber].value) / alignToInterval;\n  // NOTE: Must in setExtent -> setInterval -> setNiceExtent order.\n  intervalScaleProto.setExtent.call(scale, min + interval * t0, max + interval * t1);\n  intervalScaleProto.setInterval.call(scale, interval);\n  if (t0 || t1) {\n    intervalScaleProto.setNiceExtent.call(scale, min + interval, max - interval);\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    var ticks = intervalScaleProto.getTicks.call(scale);\n    if (ticks[1] && (!isValueNice(interval) || getPrecisionSafe(ticks[1].value) > getPrecisionSafe(interval))) {\n      warn(\n      // eslint-disable-next-line\n      \"The ticks may be not readable when set min: \" + axisModel.get('min') + \", max: \" + axisModel.get('max') + \" and alignTicks: true\");\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Grid is a region which contains at most 4 cartesian systems\r\n *\r\n * TODO Default cartesian\r\n */\nimport { isObject, each, indexOf, retrieve3, keys } from 'zrender/lib/core/util.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper.js';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D.js';\nimport Axis2D from './Axis2D.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nimport { alignScaleTicks } from '../axisAlignTicks.js';\nvar Grid = /** @class */function () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n    this._initCartesian(gridModel, ecModel, api);\n    this.model = gridModel;\n  }\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n    this._updateScale(ecModel, this.model);\n    function updateAxisTicks(axes) {\n      var alignTo;\n      // Axis is added in order of axisIndex.\n      var axesIndices = keys(axes);\n      var len = axesIndices.length;\n      if (!len) {\n        return;\n      }\n      var axisNeedsAlign = [];\n      // Process once and calculate the ticks for those don't use alignTicks.\n      for (var i = len - 1; i >= 0; i--) {\n        var idx = +axesIndices[i]; // Convert to number.\n        var axis = axes[idx];\n        var model = axis.model;\n        var scale = axis.scale;\n        if (\n        // Only value and log axis without interval support alignTicks.\n        isIntervalOrLogScale(scale) && model.get('alignTicks') && model.get('interval') == null) {\n          axisNeedsAlign.push(axis);\n        } else {\n          niceScaleExtent(scale, model);\n          if (isIntervalOrLogScale(scale)) {\n            // Can only align to interval or log axis.\n            alignTo = axis;\n          }\n        }\n      }\n      ;\n      // All axes has set alignTicks. Pick the first one.\n      // PENDING. Should we find the axis that both set interval, min, max and align to this one?\n      if (axisNeedsAlign.length) {\n        if (!alignTo) {\n          alignTo = axisNeedsAlign.pop();\n          niceScaleExtent(alignTo.scale, alignTo.model);\n        }\n        each(axisNeedsAlign, function (axis) {\n          alignScaleTicks(axis.scale, axis.model, alignTo.scale);\n        });\n      }\n    }\n    updateAxisTicks(axesMap.x);\n    updateAxisTicks(axesMap.y);\n    // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    });\n    // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n    this.resize(this.model, api);\n  };\n  /**\r\n   * Resize the grid\r\n   */\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes();\n    // Minus label size\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0];\n    }\n  };\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    }\n    // Lowest priority.\n    else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\r\n   * @implements\r\n   */\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\r\n   * Initialize cartesian coordinate systems\r\n   */\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    };\n    // Create axis\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n    this._axesMap = axesMap;\n    // Create cartesian2d\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n        _this._coordsList.push(cartesian);\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n        var axisPosition = axisModel.get('position');\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse');\n        // Inject axis into axisModel\n        axisModel.axis = axis;\n        // Inject axisModel into axis\n        axis.model = axisModel;\n        // Inject grid info axis\n        axis.grid = grid;\n        // Index of axis, can be used as key\n        axis.index = idx;\n        grid._axesList.push(axis);\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\r\n   * Update cartesian properties from series.\r\n   */\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n        unionExtent(data, xAxis);\n        unionExtent(data, yAxis);\n      }\n    }, this);\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\r\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\r\n   */\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx;\n      // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    });\n    // Inject the coordinateSystems into seriesModel\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  };\n  // For deciding which dimensions to use when creating list data\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\r\n * Check if the axis is used in the specified grid.\r\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis,\n// Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  };\n  // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n  if (!onZero) {\n    return;\n  }\n  // If target axis is specified.\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx])\n      // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1];\n  // Fast transform\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { retrieve, defaults, extend, each, isObject, map, isString, isNumber, isFunction, retrieve2 } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport Model from '../../model/Model.js';\nimport { isRadianAroundZero, remRadian } from '../../util/number.js';\nimport { createSymbol, normalizeSymbolOffset } from '../../util/symbol.js';\nimport * as matrixUtil from 'zrender/lib/core/matrix.js';\nimport { applyTransform as v2ApplyTransform } from 'zrender/lib/core/vector.js';\nimport { shouldShowAllLabels } from '../../coord/axisHelper.js';\nimport { prepareLayoutList, hideOverlap } from '../../label/labelLayoutHelper.js';\nvar PI = Math.PI;\n/**\r\n * A final axis is translated and rotated from a \"standard axis\".\r\n * So opt.position and opt.rotation is required.\r\n *\r\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\r\n * for example: (0, 0) ------------> (0, 50)\r\n *\r\n * nameDirection or tickDirection or labelDirection is 1 means tick\r\n * or label is below the standard axis, whereas is -1 means above\r\n * the standard axis. labelOffset means offset between label and axis,\r\n * which is useful when 'onZero', where axisLabel is in the grid and\r\n * label in outside grid.\r\n *\r\n * Tips: like always,\r\n * positive rotation represents anticlockwise, and negative rotation\r\n * represents clockwise.\r\n * The direction of position coordinate is the same as the direction\r\n * of screen coordinate.\r\n *\r\n * Do not need to consider axis 'inverse', which is auto processed by\r\n * axis extent.\r\n */\nvar AxisBuilder = /** @class */function () {\n  function AxisBuilder(axisModel, opt) {\n    this.group = new graphic.Group();\n    this.opt = opt;\n    this.axisModel = axisModel;\n    // Default value\n    defaults(opt, {\n      labelOffset: 0,\n      nameDirection: 1,\n      tickDirection: 1,\n      labelDirection: 1,\n      silent: true,\n      handleAutoShown: function () {\n        return true;\n      }\n    });\n    // FIXME Not use a separate text group?\n    var transformGroup = new graphic.Group({\n      x: opt.position[0],\n      y: opt.position[1],\n      rotation: opt.rotation\n    });\n    // this.group.add(transformGroup);\n    // this._transformGroup = transformGroup;\n    transformGroup.updateTransform();\n    this._transformGroup = transformGroup;\n  }\n  AxisBuilder.prototype.hasBuilder = function (name) {\n    return !!builders[name];\n  };\n  AxisBuilder.prototype.add = function (name) {\n    builders[name](this.opt, this.axisModel, this.group, this._transformGroup);\n  };\n  AxisBuilder.prototype.getGroup = function () {\n    return this.group;\n  };\n  AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n    var rotationDiff = remRadian(textRotation - axisRotation);\n    var textAlign;\n    var textVerticalAlign;\n    if (isRadianAroundZero(rotationDiff)) {\n      // Label is parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n      textAlign = 'center';\n    } else if (isRadianAroundZero(rotationDiff - PI)) {\n      // Label is inverse parallel with axis line.\n      textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n      textAlign = 'center';\n    } else {\n      textVerticalAlign = 'middle';\n      if (rotationDiff > 0 && rotationDiff < PI) {\n        textAlign = direction > 0 ? 'right' : 'left';\n      } else {\n        textAlign = direction > 0 ? 'left' : 'right';\n      }\n    }\n    return {\n      rotation: rotationDiff,\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n  };\n  AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n    var eventData = {\n      componentType: axisModel.mainType,\n      componentIndex: axisModel.componentIndex\n    };\n    eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n    return eventData;\n  };\n  AxisBuilder.isLabelSilent = function (axisModel) {\n    var tooltipOpt = axisModel.get('tooltip');\n    return axisModel.get('silent')\n    // Consider mouse cursor, add these restrictions.\n    || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n  };\n  return AxisBuilder;\n}();\n;\nvar builders = {\n  axisLine: function (opt, axisModel, group, transformGroup) {\n    var shown = axisModel.get(['axisLine', 'show']);\n    if (shown === 'auto' && opt.handleAutoShown) {\n      shown = opt.handleAutoShown('axisLine');\n    }\n    if (!shown) {\n      return;\n    }\n    var extent = axisModel.axis.getExtent();\n    var matrix = transformGroup.transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n    var inverse = pt1[0] > pt2[0];\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel(['axisLine', 'lineStyle']).getLineStyle());\n    var line = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    });\n    graphic.subPixelOptimizeLine(line.shape, line.style.lineWidth);\n    line.anid = 'line';\n    group.add(line);\n    var arrows = axisModel.get(['axisLine', 'symbol']);\n    if (arrows != null) {\n      var arrowSize = axisModel.get(['axisLine', 'symbolSize']);\n      if (isString(arrows)) {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n      if (isString(arrowSize) || isNumber(arrowSize)) {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n      var arrowOffset = normalizeSymbolOffset(axisModel.get(['axisLine', 'symbolOffset']) || 0, arrowSize);\n      var symbolWidth_1 = arrowSize[0];\n      var symbolHeight_1 = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth_1 / 2, -symbolHeight_1 / 2, symbolWidth_1, symbolHeight_1, lineStyle.stroke, true);\n          // Calculate arrow position with offset\n          var r = point.r + point.offset;\n          var pt = inverse ? pt2 : pt1;\n          symbol.attr({\n            rotation: point.rotate,\n            x: pt[0] + r * Math.cos(opt.rotation),\n            y: pt[1] - r * Math.sin(opt.rotation),\n            silent: true,\n            z2: 11\n          });\n          group.add(symbol);\n        }\n      });\n    }\n  },\n  axisTickLabel: function (opt, axisModel, group, transformGroup) {\n    var ticksEls = buildAxisMajorTicks(group, transformGroup, axisModel, opt);\n    var labelEls = buildAxisLabel(group, transformGroup, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(group, transformGroup, axisModel, opt.tickDirection);\n    // This bit fixes the label overlap issue for the time chart.\n    // See https://github.com/apache/echarts/issues/14266 for more.\n    if (axisModel.get(['axisLabel', 'hideOverlap'])) {\n      var labelList = prepareLayoutList(map(labelEls, function (label) {\n        return {\n          label: label,\n          priority: label.z2,\n          defaultAttr: {\n            ignore: label.ignore\n          }\n        };\n      }));\n      hideOverlap(labelList);\n    }\n  },\n  axisName: function (opt, axisModel, group, transformGroup) {\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n    if (!name) {\n      return;\n    }\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2,\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n    var axisNameAvailableWidth;\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = AxisBuilder.innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation,\n      // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt.rotation, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth);\n    var textEl = new graphic.Text({\n      x: pos[0],\n      y: pos[1],\n      rotation: labelLayout.rotation,\n      silent: AxisBuilder.isLabelSilent(axisModel),\n      style: createTextStyle(textStyleModel, {\n        text: name,\n        font: textFont,\n        overflow: 'truncate',\n        width: maxWidth,\n        ellipsis: ellipsis,\n        fill: textStyleModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']),\n        align: textStyleModel.get('align') || labelLayout.textAlign,\n        verticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n      }),\n      z2: 1\n    });\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: name\n    });\n    textEl.__fullText = name;\n    // Id for animation\n    textEl.anid = 'name';\n    if (axisModel.get('triggerEvent')) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisName';\n      eventData.name = name;\n      getECData(textEl).eventData = eventData;\n    }\n    // FIXME\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\nfunction endTextLayout(rotation, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  }\n  // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n  var showMinLabel = axisModel.get(['axisLabel', 'showMinLabel']);\n  var showMaxLabel = axisModel.get(['axisLabel', 'showMaxLabel']);\n  // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\nfunction isTwoLabelOverlapped(current, next) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n  if (!firstRect || !nextRect) {\n    return;\n  }\n  // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, anidPrefix) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    }\n    // Tick line, Not use group transform to have better line draw\n    var tickEl = new graphic.Line({\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      autoBatch: true,\n      silent: true\n    });\n    graphic.subPixelOptimizeLine(tickEl.shape, tickEl.style.lineWidth);\n    tickEl.anid = anidPrefix + '_' + ticksCoords[i].tickValue;\n    tickEls.push(tickEl);\n  }\n  return tickEls;\n}\nfunction buildAxisMajorTicks(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n  var shown = tickModel.get('show');\n  if (shown === 'auto' && opt.handleAutoShown) {\n    shown = opt.handleAutoShown('axisTick');\n  }\n  if (!shown || axis.scale.isBlank()) {\n    return;\n  }\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, transformGroup.transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }), 'ticks');\n  for (var i = 0; i < ticksEls.length; i++) {\n    group.add(ticksEls[i]);\n  }\n  return ticksEls;\n}\nfunction buildAxisMinorTicks(group, transformGroup, axisModel, tickDirection) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n  var minorTicksCoords = axis.getMinorTicksCoords();\n  if (!minorTicksCoords.length) {\n    return;\n  }\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get(['axisLine', 'lineStyle', 'color'])\n  }));\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], transformGroup.transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      group.add(minorTicksEls[k]);\n    }\n  }\n}\nfunction buildAxisLabel(group, transformGroup, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get(['axisLabel', 'show']));\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels();\n  // Special label rotate.\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = AxisBuilder.innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = AxisBuilder.isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = axis.scale.type === 'ordinal' ? axis.scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n    if (rawCategoryData && rawCategoryData[tickValue]) {\n      var rawCategoryItem = rawCategoryData[tickValue];\n      if (isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n        itemLabelModel = new Model(rawCategoryItem.textStyle, labelModel, axisModel.ecModel);\n      }\n    }\n    var textColor = itemLabelModel.getTextColor() || axisModel.get(['axisLine', 'lineStyle', 'color']);\n    var tickCoord = axis.dataToCoord(tickValue);\n    var align = itemLabelModel.getShallow('align', true) || labelLayout.textAlign;\n    var alignMin = retrieve2(itemLabelModel.getShallow('alignMinLabel', true), align);\n    var alignMax = retrieve2(itemLabelModel.getShallow('alignMaxLabel', true), align);\n    var verticalAlign = itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign;\n    var verticalAlignMin = retrieve2(itemLabelModel.getShallow('verticalAlignMinLabel', true), verticalAlign);\n    var verticalAlignMax = retrieve2(itemLabelModel.getShallow('verticalAlignMaxLabel', true), verticalAlign);\n    var textEl = new graphic.Text({\n      x: tickCoord,\n      y: opt.labelOffset + opt.labelDirection * labelMargin,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10 + (labelItem.level || 0),\n      style: createTextStyle(itemLabelModel, {\n        text: formattedLabel,\n        align: index === 0 ? alignMin : index === labels.length - 1 ? alignMax : align,\n        verticalAlign: index === 0 ? verticalAlignMin : index === labels.length - 1 ? verticalAlignMax : verticalAlign,\n        fill: isFunction(textColor) ? textColor(\n        // (1) In category axis with data zoom, tick is not the original\n        // index of axis.data. So tick should not be exposed to user\n        // in category axis.\n        // (2) Compatible with previous version, which always use formatted label as\n        // input. But in interval scale the formatted label is like '223,445', which\n        // maked user replace ','. So we modify it to return original val but remain\n        // it as 'string' to avoid error in replacing.\n        axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n      })\n    });\n    textEl.anid = 'label_' + tickValue;\n    graphic.setTooltipConfig({\n      el: textEl,\n      componentModel: axisModel,\n      itemName: formattedLabel,\n      formatterParamsExtra: {\n        isTruncated: function () {\n          return textEl.isTruncated;\n        },\n        value: rawLabel,\n        tickIndex: index\n      }\n    });\n    // Pack data for mouse event\n    if (triggerEvent) {\n      var eventData = AxisBuilder.makeAxisEventDataBase(axisModel);\n      eventData.targetType = 'axisLabel';\n      eventData.value = rawLabel;\n      eventData.tickIndex = index;\n      if (axis.type === 'category') {\n        eventData.dataIndex = tickValue;\n      }\n      getECData(textEl).eventData = eventData;\n    }\n    // FIXME\n    transformGroup.add(textEl);\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\nexport default AxisBuilder;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport Model from '../../model/Model.js';\nimport { each, curry, clone, defaults, isArray, indexOf } from 'zrender/lib/core/util.js';\n// Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\nexport function collect(ecModel, api) {\n  var result = {\n    /**\r\n     * key: makeKey(axis.model)\r\n     * value: {\r\n     *      axis,\r\n     *      coordSys,\r\n     *      axisPointerModel,\r\n     *      triggerTooltip,\r\n     *      triggerEmphasis,\r\n     *      involveSeries,\r\n     *      snap,\r\n     *      seriesModels,\r\n     *      seriesDataCount\r\n     * }\r\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n    /**\r\n     * key: makeKey(coordSys.model)\r\n     * value: Object: key makeKey(axis.model), value: axisInfo\r\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api);\n  // Check seriesInvolved for performance, in case too many series in some chart.\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer');\n  // links can only be set on global.\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = [];\n  // Collect axes info.\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys;\n    // Set tooltip (like 'cross') is a convenient way to show axisPointer\n    // for user. So we enable setting tooltip on coordSys model.\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null));\n    // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n    if (coordSys.getTooltipAxes && globalTooltipModel\n    // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get(['axisPointer', 'type']) === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get(['axisPointer', 'axis']));\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    }\n    // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var triggerEmphasis = axisPointerModel.get('triggerEmphasis');\n      var axisKey = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category';\n      // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n      var axisInfo = result.axesInfo[axisKey] = {\n        key: axisKey,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        triggerEmphasis: triggerEmphasis,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: [],\n        linkGroup: null\n      };\n      axesInfoInCoordSys[axisKey] = axisInfo;\n      result.seriesInvolved = result.seriesInvolved || involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[axisKey] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var fields = ['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'];\n  var volatileOption = {};\n  each(fields, function (field) {\n    volatileOption[field] = clone(tooltipAxisPointerModel.get(field));\n  });\n  // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip;\n  // Compatible with previous behavior, tooltip axis does not show label by default.\n  // Only these properties can be overridden from tooltip to axisPointer.\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n  var labelOption = volatileOption.label || (volatileOption.label = {});\n  // Follow the convention, do not show label when triggered by tooltip by default.\n  labelOption.show == null && (labelOption.show = false);\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get(['label', 'show']);\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true;\n    // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get(['tooltip', 'trigger'], true);\n    var seriesTooltipShow = seriesModel.get(['tooltip', 'show'], true);\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get(['axisPointer', 'show'], true) === false) {\n      return;\n    }\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  });\n}\n/**\r\n * For example:\r\n * {\r\n *     axisPointer: {\r\n *         links: [{\r\n *             xAxisIndex: [2, 4],\r\n *             yAxisIndex: 'all'\r\n *         }, {\r\n *             xAxisId: ['a5', 'a7'],\r\n *             xAxisName: 'xxx'\r\n *         }]\r\n *     }\r\n * }\r\n */\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || isArray(linkPropValue) && indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\nexport function fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  if (!axisInfo) {\n    return;\n  }\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value');\n  // Parse init value for category and time axis.\n  if (value != null) {\n    value = scale.parse(value);\n  }\n  var useHandle = isHandleTrigger(axisPointerModel);\n  // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n  if (\n  // Pick a value on axis when initializing.\n  value == null\n  // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n  option.value = value;\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\nexport function getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\nexport function getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get(['handle', 'show']);\n}\n/**\r\n * @param {module:echarts/model/Model} model\r\n * @return {string} unique key\r\n */\nexport function makeKey(model) {\n  return model.type + '||' + model.id;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as axisPointerModelHelper from '../axisPointer/modelHelper.js';\nimport ComponentView from '../../view/Component.js';\nvar axisPointerClazz = {};\n/**\r\n * Base class of AxisView.\r\n */\nvar AxisView = /** @class */function (_super) {\n  __extends(AxisView, _super);\n  function AxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisView.type;\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    _super.prototype.render.apply(this, arguments);\n    this._doUpdateAxisPointerClass(axisModel, api, true);\n  };\n  /**\r\n   * Action handler.\r\n   */\n  AxisView.prototype.updateAxisPointer = function (axisModel, ecModel, api, payload) {\n    this._doUpdateAxisPointerClass(axisModel, api, false);\n  };\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.remove = function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n  };\n  /**\r\n   * @override\r\n   */\n  AxisView.prototype.dispose = function (ecModel, api) {\n    this._disposeAxisPointer(api);\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  AxisView.prototype._doUpdateAxisPointerClass = function (axisModel, api, forceRender) {\n    var Clazz = AxisView.getAxisPointerClass(this.axisPointerClass);\n    if (!Clazz) {\n      return;\n    }\n    var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n    axisPointerModel ? (this._axisPointer || (this._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : this._disposeAxisPointer(api);\n  };\n  AxisView.prototype._disposeAxisPointer = function (api) {\n    this._axisPointer && this._axisPointer.dispose(api);\n    this._axisPointer = null;\n  };\n  AxisView.registerAxisPointerClass = function (type, clazz) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (axisPointerClazz[type]) {\n        throw new Error('axisPointer ' + type + ' exists');\n      }\n    }\n    axisPointerClazz[type] = clazz;\n  };\n  ;\n  AxisView.getAxisPointerClass = function (type) {\n    return type && axisPointerClazz[type];\n  };\n  ;\n  AxisView.type = 'axis';\n  return AxisView;\n}(ComponentView);\nexport default AxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n  if (axis.scale.isBlank()) {\n    return;\n  }\n  // TODO: TYPE\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n  if (!ticksCoords.length) {\n    return;\n  }\n  // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport AxisBuilder from './AxisBuilder.js';\nimport AxisView from './AxisView.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper.js';\nimport { isIntervalOrLogScale } from '../../scale/helper.js';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = /** @class */function (_super) {\n  __extends(CartesianAxisView, _super);\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\r\n   * @override\r\n   */\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n    if (!axisModel.get('show')) {\n      return;\n    }\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n        for (var i = 0; i < cartesians.length; i++) {\n          if (isIntervalOrLogScale(cartesians[i].getOtherAxis(axisModel.axis).scale)) {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        }\n        // Not show axisTick or axisLine if other axis is category / time\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    this._axisGroup.add(axisBuilder.getGroup());\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    // THIS is a special case for bar racing chart.\n    // Update the axis label from the natural initial layout to\n    // sorted layout should has no animation.\n    var isInitialSortFromBarRacing = payload && payload.type === 'changeAxisOrder' && payload.isInitSort;\n    if (!isInitialSortFromBarRacing) {\n      graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    }\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    if (axis.scale.isBlank()) {\n      return;\n    }\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var showMinLine = splitLineModel.get('showMinLine') !== false;\n    var showMaxLine = splitLineModel.get('showMaxLine') !== false;\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      if (i === 0 && !showMinLine || i === ticksCoords.length - 1 && !showMaxLine) {\n        continue;\n      }\n      var tickValue = ticksCoords[i].tickValue;\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n      var colorIndex = lineCount++ % lineColors.length;\n      var line = new graphic.Line({\n        anid: tickValue != null ? 'line_' + tickValue : null,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      });\n      graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n      axisGroup.add(line);\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n    if (!minorTicksCoords.length) {\n      return;\n    }\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n        var line = new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        });\n        graphic.subPixelOptimizeLine(line.shape, lineStyle.lineWidth);\n        axisGroup.add(line);\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\nvar CartesianXAxisView = /** @class */function (_super) {\n  __extends(CartesianXAxisView, _super);\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\nexport { CartesianXAxisView };\nvar CartesianYAxisView = /** @class */function (_super) {\n  __extends(CartesianYAxisView, _super);\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nimport GridModel from '../../coord/cartesian/GridModel.js';\nimport { Rect } from '../../util/graphic.js';\nimport { defaults } from 'zrender/lib/core/util.js';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel.js';\nimport axisModelCreator from '../../coord/axisModelCreator.js';\nimport Grid from '../../coord/cartesian/Grid.js';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView.js';\n// Grid view\nvar GridView = /** @class */function (_super) {\n  __extends(GridView, _super);\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'grid';\n    return _this;\n  }\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport * as echarts from '../../core/echarts.js';\nimport { noop } from 'zrender/lib/core/util.js';\nvar ATTR = '\\0_ec_interaction_mutex';\nexport function take(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  store[resourceKey] = userKey;\n}\nexport function release(zr, resourceKey, userKey) {\n  var store = getStore(zr);\n  var uKey = store[resourceKey];\n  if (uKey === userKey) {\n    store[resourceKey] = null;\n  }\n}\nexport function isTaken(zr, resourceKey) {\n  return !!getStore(zr)[resourceKey];\n}\nfunction getStore(zr) {\n  return zr[ATTR] || (zr[ATTR] = {});\n}\n/**\r\n * payload: {\r\n *     type: 'takeGlobalCursor',\r\n *     key: 'dataZoomSelect', or 'brush', or ...,\r\n *         If no userKey, release global cursor.\r\n * }\r\n */\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'takeGlobalCursor',\n  event: 'globalCursorTaken',\n  update: 'update'\n}, noop);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport { isString, bind, defaults, clone } from 'zrender/lib/core/util.js';\n;\nvar RoamController = /** @class */function (_super) {\n  __extends(RoamController, _super);\n  function RoamController(zr) {\n    var _this = _super.call(this) || this;\n    _this._zr = zr;\n    // Avoid two roamController bind the same handler\n    var mousedownHandler = bind(_this._mousedownHandler, _this);\n    var mousemoveHandler = bind(_this._mousemoveHandler, _this);\n    var mouseupHandler = bind(_this._mouseupHandler, _this);\n    var mousewheelHandler = bind(_this._mousewheelHandler, _this);\n    var pinchHandler = bind(_this._pinchHandler, _this);\n    /**\r\n     * Notice: only enable needed types. For example, if 'zoom'\r\n     * is not needed, 'zoom' should not be enabled, otherwise\r\n     * default mousewheel behaviour (scroll page) will be disabled.\r\n     */\n    _this.enable = function (controlType, opt) {\n      // Disable previous first\n      this.disable();\n      this._opt = defaults(clone(opt) || {}, {\n        zoomOnMouseWheel: true,\n        moveOnMouseMove: true,\n        // By default, wheel do not trigger move.\n        moveOnMouseWheel: false,\n        preventDefaultMouseMove: true\n      });\n      if (controlType == null) {\n        controlType = true;\n      }\n      if (controlType === true || controlType === 'move' || controlType === 'pan') {\n        zr.on('mousedown', mousedownHandler);\n        zr.on('mousemove', mousemoveHandler);\n        zr.on('mouseup', mouseupHandler);\n      }\n      if (controlType === true || controlType === 'scale' || controlType === 'zoom') {\n        zr.on('mousewheel', mousewheelHandler);\n        zr.on('pinch', pinchHandler);\n      }\n    };\n    _this.disable = function () {\n      zr.off('mousedown', mousedownHandler);\n      zr.off('mousemove', mousemoveHandler);\n      zr.off('mouseup', mouseupHandler);\n      zr.off('mousewheel', mousewheelHandler);\n      zr.off('pinch', pinchHandler);\n    };\n    return _this;\n  }\n  RoamController.prototype.isDragging = function () {\n    return this._dragging;\n  };\n  RoamController.prototype.isPinching = function () {\n    return this._pinching;\n  };\n  RoamController.prototype.setPointerChecker = function (pointerChecker) {\n    this.pointerChecker = pointerChecker;\n  };\n  RoamController.prototype.dispose = function () {\n    this.disable();\n  };\n  RoamController.prototype._mousedownHandler = function (e) {\n    if (eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      return;\n    }\n    var el = e.target;\n    while (el) {\n      if (el.draggable) {\n        return;\n      }\n      // check if host is draggable\n      el = el.__hostTarget || el.parent;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    // Only check on mosedown, but not mousemove.\n    // Mouse can be out of target when mouse moving.\n    if (this.pointerChecker && this.pointerChecker(e, x, y)) {\n      this._x = x;\n      this._y = y;\n      this._dragging = true;\n    }\n  };\n  RoamController.prototype._mousemoveHandler = function (e) {\n    if (!this._dragging || !isAvailableBehavior('moveOnMouseMove', e, this._opt) || e.gestureEvent === 'pinch' || interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var oldX = this._x;\n    var oldY = this._y;\n    var dx = x - oldX;\n    var dy = y - oldY;\n    this._x = x;\n    this._y = y;\n    this._opt.preventDefaultMouseMove && eventTool.stop(e.event);\n    trigger(this, 'pan', 'moveOnMouseMove', e, {\n      dx: dx,\n      dy: dy,\n      oldX: oldX,\n      oldY: oldY,\n      newX: x,\n      newY: y,\n      isAvailableBehavior: null\n    });\n  };\n  RoamController.prototype._mouseupHandler = function (e) {\n    if (!eventTool.isMiddleOrRightButtonOnMouseUpDown(e)) {\n      this._dragging = false;\n    }\n  };\n  RoamController.prototype._mousewheelHandler = function (e) {\n    var shouldZoom = isAvailableBehavior('zoomOnMouseWheel', e, this._opt);\n    var shouldMove = isAvailableBehavior('moveOnMouseWheel', e, this._opt);\n    var wheelDelta = e.wheelDelta;\n    var absWheelDeltaDelta = Math.abs(wheelDelta);\n    var originX = e.offsetX;\n    var originY = e.offsetY;\n    // wheelDelta maybe -0 in chrome mac.\n    if (wheelDelta === 0 || !shouldZoom && !shouldMove) {\n      return;\n    }\n    // If both `shouldZoom` and `shouldMove` is true, trigger\n    // their event both, and the final behavior is determined\n    // by event listener themselves.\n    if (shouldZoom) {\n      // Convenience:\n      // Mac and VM Windows on Mac: scroll up: zoom out.\n      // Windows: scroll up: zoom in.\n      // FIXME: Should do more test in different environment.\n      // wheelDelta is too complicated in difference nvironment\n      // (https://developer.mozilla.org/en-US/docs/Web/Events/mousewheel),\n      // although it has been normallized by zrender.\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var factor = absWheelDeltaDelta > 3 ? 1.4 : absWheelDeltaDelta > 1 ? 1.2 : 1.1;\n      var scale = wheelDelta > 0 ? factor : 1 / factor;\n      checkPointerAndTrigger(this, 'zoom', 'zoomOnMouseWheel', e, {\n        scale: scale,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n    if (shouldMove) {\n      // FIXME: Should do more test in different environment.\n      var absDelta = Math.abs(wheelDelta);\n      // wheelDelta of mouse wheel is bigger than touch pad.\n      var scrollDelta = (wheelDelta > 0 ? 1 : -1) * (absDelta > 3 ? 0.4 : absDelta > 1 ? 0.15 : 0.05);\n      checkPointerAndTrigger(this, 'scrollMove', 'moveOnMouseWheel', e, {\n        scrollDelta: scrollDelta,\n        originX: originX,\n        originY: originY,\n        isAvailableBehavior: null\n      });\n    }\n  };\n  RoamController.prototype._pinchHandler = function (e) {\n    if (interactionMutex.isTaken(this._zr, 'globalPan')) {\n      return;\n    }\n    var scale = e.pinchScale > 1 ? 1.1 : 1 / 1.1;\n    checkPointerAndTrigger(this, 'zoom', null, e, {\n      scale: scale,\n      originX: e.pinchX,\n      originY: e.pinchY,\n      isAvailableBehavior: null\n    });\n  };\n  return RoamController;\n}(Eventful);\nfunction checkPointerAndTrigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  if (controller.pointerChecker && controller.pointerChecker(e, contollerEvent.originX, contollerEvent.originY)) {\n    // When mouse is out of roamController rect,\n    // default befavoius should not be be disabled, otherwise\n    // page sliding is disabled, contrary to expectation.\n    eventTool.stop(e.event);\n    trigger(controller, eventName, behaviorToCheck, e, contollerEvent);\n  }\n}\nfunction trigger(controller, eventName, behaviorToCheck, e, contollerEvent) {\n  // Also provide behavior checker for event listener, for some case that\n  // multiple components share one listener.\n  contollerEvent.isAvailableBehavior = bind(isAvailableBehavior, null, behaviorToCheck, e);\n  // TODO should not have type issue.\n  controller.trigger(eventName, contollerEvent);\n}\n// settings: {\n//     zoomOnMouseWheel\n//     moveOnMouseMove\n//     moveOnMouseWheel\n// }\n// The value can be: true / false / 'shift' / 'ctrl' / 'alt'.\nfunction isAvailableBehavior(behaviorToCheck, e, settings) {\n  var setting = settings[behaviorToCheck];\n  return !behaviorToCheck || setting && (!isString(setting) || e.event[setting + 'Key']);\n}\nexport default RoamController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nvar IRRELEVANT_EXCLUDES = {\n  'axisPointer': 1,\n  'tooltip': 1,\n  'brush': 1\n};\n/**\r\n * Avoid that: mouse click on a elements that is over geo or graph,\r\n * but roam is triggered.\r\n */\nexport function onIrrelevantElement(e, api, targetCoordSysModel) {\n  var model = api.getComponentByElement(e.topTarget);\n  // If model is axisModel, it works only if it is injected with coordinateSystem.\n  var coordSys = model && model.coordinateSystem;\n  return model && model !== targetCoordSysModel && !IRRELEVANT_EXCLUDES.hasOwnProperty(model.mainType) && coordSys && coordSys.model !== targetCoordSysModel;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n/**\r\n * Calculate slider move result.\r\n * Usage:\r\n * (1) If both handle0 and handle1 are needed to be moved, set minSpan the same as\r\n * maxSpan and the same as `Math.abs(handleEnd[1] - handleEnds[0])`.\r\n * (2) If handle0 is forbidden to cross handle1, set minSpan as `0`.\r\n *\r\n * @param delta Move length.\r\n * @param handleEnds handleEnds[0] can be bigger then handleEnds[1].\r\n *              handleEnds will be modified in this method.\r\n * @param extent handleEnds is restricted by extent.\r\n *              extent[0] should less or equals than extent[1].\r\n * @param handleIndex Can be 'all', means that both move the two handleEnds.\r\n * @param minSpan The range of dataZoom can not be smaller than that.\r\n *              If not set, handle0 and cross handle1. If set as a non-negative\r\n *              number (including `0`), handles will push each other when reaching\r\n *              the minSpan.\r\n * @param maxSpan The range of dataZoom can not be larger than that.\r\n * @return The input handleEnds.\r\n */\nexport default function sliderMove(delta, handleEnds, extent, handleIndex, minSpan, maxSpan) {\n  delta = delta || 0;\n  var extentSpan = extent[1] - extent[0];\n  // Notice maxSpan and minSpan can be null/undefined.\n  if (minSpan != null) {\n    minSpan = restrict(minSpan, [0, extentSpan]);\n  }\n  if (maxSpan != null) {\n    maxSpan = Math.max(maxSpan, minSpan != null ? minSpan : 0);\n  }\n  if (handleIndex === 'all') {\n    var handleSpan = Math.abs(handleEnds[1] - handleEnds[0]);\n    handleSpan = restrict(handleSpan, [0, extentSpan]);\n    minSpan = maxSpan = restrict(handleSpan, [minSpan, maxSpan]);\n    handleIndex = 0;\n  }\n  handleEnds[0] = restrict(handleEnds[0], extent);\n  handleEnds[1] = restrict(handleEnds[1], extent);\n  var originalDistSign = getSpanSign(handleEnds, handleIndex);\n  handleEnds[handleIndex] += delta;\n  // Restrict in extent.\n  var extentMinSpan = minSpan || 0;\n  var realExtent = extent.slice();\n  originalDistSign.sign < 0 ? realExtent[0] += extentMinSpan : realExtent[1] -= extentMinSpan;\n  handleEnds[handleIndex] = restrict(handleEnds[handleIndex], realExtent);\n  // Expand span.\n  var currDistSign;\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (minSpan != null && (currDistSign.sign !== originalDistSign.sign || currDistSign.span < minSpan)) {\n    // If minSpan exists, 'cross' is forbidden.\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + originalDistSign.sign * minSpan;\n  }\n  // Shrink span.\n  currDistSign = getSpanSign(handleEnds, handleIndex);\n  if (maxSpan != null && currDistSign.span > maxSpan) {\n    handleEnds[1 - handleIndex] = handleEnds[handleIndex] + currDistSign.sign * maxSpan;\n  }\n  return handleEnds;\n}\nfunction getSpanSign(handleEnds, handleIndex) {\n  var dist = handleEnds[handleIndex] - handleEnds[1 - handleIndex];\n  // If `handleEnds[0] === handleEnds[1]`, always believe that handleEnd[0]\n  // is at left of handleEnds[1] for non-cross case.\n  return {\n    span: Math.abs(dist),\n    sign: dist > 0 ? -1 : dist < 0 ? 1 : handleIndex ? -1 : 1\n  };\n}\nfunction restrict(value, extend) {\n  return Math.min(extend[1] != null ? extend[1] : Infinity, Math.max(extend[0] != null ? extend[0] : -Infinity, value));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { curry, each, map, bind, merge, clone, defaults, assert } from 'zrender/lib/core/util.js';\nimport Eventful from 'zrender/lib/core/Eventful.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as interactionMutex from './interactionMutex.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nvar BRUSH_PANEL_GLOBAL = true;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\nvar mathPow = Math.pow;\nvar COVER_Z = 10000;\nvar UNSELECT_THRESHOLD = 6;\nvar MIN_RESIZE_LINE_WIDTH = 6;\nvar MUTEX_RESOURCE_KEY = 'globalPan';\nvar DIRECTION_MAP = {\n  w: [0, 0],\n  e: [0, 1],\n  n: [1, 0],\n  s: [1, 1]\n};\nvar CURSOR_MAP = {\n  w: 'ew',\n  e: 'ew',\n  n: 'ns',\n  s: 'ns',\n  ne: 'nesw',\n  sw: 'nesw',\n  nw: 'nwse',\n  se: 'nwse'\n};\nvar DEFAULT_BRUSH_OPT = {\n  brushStyle: {\n    lineWidth: 2,\n    stroke: 'rgba(210,219,238,0.3)',\n    fill: '#D2DBEE'\n  },\n  transformable: true,\n  brushMode: 'single',\n  removeOnClick: false\n};\nvar baseUID = 0;\n/**\r\n * params:\r\n *     areas: Array.<Array>, coord relates to container group,\r\n *                             If no container specified, to global.\r\n *     opt {\r\n *         isEnd: boolean,\r\n *         removeOnClick: boolean\r\n *     }\r\n */\nvar BrushController = /** @class */function (_super) {\n  __extends(BrushController, _super);\n  function BrushController(zr) {\n    var _this = _super.call(this) || this;\n    /**\r\n     * @internal\r\n     */\n    _this._track = [];\n    /**\r\n     * @internal\r\n     */\n    _this._covers = [];\n    _this._handlers = {};\n    if (process.env.NODE_ENV !== 'production') {\n      assert(zr);\n    }\n    _this._zr = zr;\n    _this.group = new graphic.Group();\n    _this._uid = 'brushController_' + baseUID++;\n    each(pointerHandlers, function (handler, eventName) {\n      this._handlers[eventName] = bind(handler, this);\n    }, _this);\n    return _this;\n  }\n  /**\r\n   * If set to `false`, select disabled.\r\n   */\n  BrushController.prototype.enableBrush = function (brushOption) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    this._brushType && this._doDisableBrush();\n    brushOption.brushType && this._doEnableBrush(brushOption);\n    return this;\n  };\n  BrushController.prototype._doEnableBrush = function (brushOption) {\n    var zr = this._zr;\n    // Consider roam, which takes globalPan too.\n    if (!this._enableGlobalPan) {\n      interactionMutex.take(zr, MUTEX_RESOURCE_KEY, this._uid);\n    }\n    each(this._handlers, function (handler, eventName) {\n      zr.on(eventName, handler);\n    });\n    this._brushType = brushOption.brushType;\n    this._brushOption = merge(clone(DEFAULT_BRUSH_OPT), brushOption, true);\n  };\n  BrushController.prototype._doDisableBrush = function () {\n    var zr = this._zr;\n    interactionMutex.release(zr, MUTEX_RESOURCE_KEY, this._uid);\n    each(this._handlers, function (handler, eventName) {\n      zr.off(eventName, handler);\n    });\n    this._brushType = this._brushOption = null;\n  };\n  /**\r\n   * @param panelOpts If not pass, it is global brush.\r\n   */\n  BrushController.prototype.setPanels = function (panelOpts) {\n    if (panelOpts && panelOpts.length) {\n      var panels_1 = this._panels = {};\n      each(panelOpts, function (panelOpts) {\n        panels_1[panelOpts.panelId] = clone(panelOpts);\n      });\n    } else {\n      this._panels = null;\n    }\n    return this;\n  };\n  BrushController.prototype.mount = function (opt) {\n    opt = opt || {};\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = true; // should be at first.\n    }\n    this._enableGlobalPan = opt.enableGlobalPan;\n    var thisGroup = this.group;\n    this._zr.add(thisGroup);\n    thisGroup.attr({\n      x: opt.x || 0,\n      y: opt.y || 0,\n      rotation: opt.rotation || 0,\n      scaleX: opt.scaleX || 1,\n      scaleY: opt.scaleY || 1\n    });\n    this._transform = thisGroup.getLocalTransform();\n    return this;\n  };\n  // eachCover(cb, context): void {\n  //     each(this._covers, cb, context);\n  // }\n  /**\r\n   * Update covers.\r\n   * @param coverConfigList\r\n   *        If coverConfigList is null/undefined, all covers removed.\r\n   */\n  BrushController.prototype.updateCovers = function (coverConfigList) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(this._mounted);\n    }\n    coverConfigList = map(coverConfigList, function (coverConfig) {\n      return merge(clone(DEFAULT_BRUSH_OPT), coverConfig, true);\n    });\n    var tmpIdPrefix = '\\0-brush-index-';\n    var oldCovers = this._covers;\n    var newCovers = this._covers = [];\n    var controller = this;\n    var creatingCover = this._creatingCover;\n    new DataDiffer(oldCovers, coverConfigList, oldGetKey, getKey).add(addOrUpdate).update(addOrUpdate).remove(remove).execute();\n    return this;\n    function getKey(brushOption, index) {\n      return (brushOption.id != null ? brushOption.id : tmpIdPrefix + index) + '-' + brushOption.brushType;\n    }\n    function oldGetKey(cover, index) {\n      return getKey(cover.__brushOption, index);\n    }\n    function addOrUpdate(newIndex, oldIndex) {\n      var newBrushInternal = coverConfigList[newIndex];\n      // Consider setOption in event listener of brushSelect,\n      // where updating cover when creating should be forbidden.\n      if (oldIndex != null && oldCovers[oldIndex] === creatingCover) {\n        newCovers[newIndex] = oldCovers[oldIndex];\n      } else {\n        var cover = newCovers[newIndex] = oldIndex != null ? (oldCovers[oldIndex].__brushOption = newBrushInternal, oldCovers[oldIndex]) : endCreating(controller, createCover(controller, newBrushInternal));\n        updateCoverAfterCreation(controller, cover);\n      }\n    }\n    function remove(oldIndex) {\n      if (oldCovers[oldIndex] !== creatingCover) {\n        controller.group.remove(oldCovers[oldIndex]);\n      }\n    }\n  };\n  BrushController.prototype.unmount = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!this._mounted) {\n        return;\n      }\n    }\n    this.enableBrush(false);\n    // container may 'removeAll' outside.\n    clearCovers(this);\n    this._zr.remove(this.group);\n    if (process.env.NODE_ENV !== 'production') {\n      this._mounted = false; // should be at last.\n    }\n    return this;\n  };\n  BrushController.prototype.dispose = function () {\n    this.unmount();\n    this.off();\n  };\n  return BrushController;\n}(Eventful);\nfunction createCover(controller, brushOption) {\n  var cover = coverRenderers[brushOption.brushType].createCover(controller, brushOption);\n  cover.__brushOption = brushOption;\n  updateZ(cover, brushOption);\n  controller.group.add(cover);\n  return cover;\n}\nfunction endCreating(controller, creatingCover) {\n  var coverRenderer = getCoverRenderer(creatingCover);\n  if (coverRenderer.endCreating) {\n    coverRenderer.endCreating(controller, creatingCover);\n    updateZ(creatingCover, creatingCover.__brushOption);\n  }\n  return creatingCover;\n}\nfunction updateCoverShape(controller, cover) {\n  var brushOption = cover.__brushOption;\n  getCoverRenderer(cover).updateCoverShape(controller, cover, brushOption.range, brushOption);\n}\nfunction updateZ(cover, brushOption) {\n  var z = brushOption.z;\n  z == null && (z = COVER_Z);\n  cover.traverse(function (el) {\n    el.z = z;\n    el.z2 = z; // Consider in given container.\n  });\n}\nfunction updateCoverAfterCreation(controller, cover) {\n  getCoverRenderer(cover).updateCommon(controller, cover);\n  updateCoverShape(controller, cover);\n}\nfunction getCoverRenderer(cover) {\n  return coverRenderers[cover.__brushOption.brushType];\n}\n// return target panel or `true` (means global panel)\nfunction getPanelByPoint(controller, e, localCursorPoint) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panel;\n  var transform = controller._transform;\n  each(panels, function (pn) {\n    pn.isTargetByCursor(e, localCursorPoint, transform) && (panel = pn);\n  });\n  return panel;\n}\n// Return a panel or true\nfunction getPanelByCover(controller, cover) {\n  var panels = controller._panels;\n  if (!panels) {\n    return BRUSH_PANEL_GLOBAL; // Global panel\n  }\n  var panelId = cover.__brushOption.panelId;\n  // User may give cover without coord sys info,\n  // which is then treated as global panel.\n  return panelId != null ? panels[panelId] : BRUSH_PANEL_GLOBAL;\n}\nfunction clearCovers(controller) {\n  var covers = controller._covers;\n  var originalLength = covers.length;\n  each(covers, function (cover) {\n    controller.group.remove(cover);\n  }, controller);\n  covers.length = 0;\n  return !!originalLength;\n}\nfunction trigger(controller, opt) {\n  var areas = map(controller._covers, function (cover) {\n    var brushOption = cover.__brushOption;\n    var range = clone(brushOption.range);\n    return {\n      brushType: brushOption.brushType,\n      panelId: brushOption.panelId,\n      range: range\n    };\n  });\n  controller.trigger('brush', {\n    areas: areas,\n    isEnd: !!opt.isEnd,\n    removeOnClick: !!opt.removeOnClick\n  });\n}\nfunction shouldShowCover(controller) {\n  var track = controller._track;\n  if (!track.length) {\n    return false;\n  }\n  var p2 = track[track.length - 1];\n  var p1 = track[0];\n  var dx = p2[0] - p1[0];\n  var dy = p2[1] - p1[1];\n  var dist = mathPow(dx * dx + dy * dy, 0.5);\n  return dist > UNSELECT_THRESHOLD;\n}\nfunction getTrackEnds(track) {\n  var tail = track.length - 1;\n  tail < 0 && (tail = 0);\n  return [track[0], track[tail]];\n}\n;\nfunction createBaseRectCover(rectRangeConverter, controller, brushOption, edgeNameSequences) {\n  var cover = new graphic.Group();\n  cover.add(new graphic.Rect({\n    name: 'main',\n    style: makeStyle(brushOption),\n    silent: true,\n    draggable: true,\n    cursor: 'move',\n    drift: curry(driftRect, rectRangeConverter, controller, cover, ['n', 's', 'w', 'e']),\n    ondragend: curry(trigger, controller, {\n      isEnd: true\n    })\n  }));\n  each(edgeNameSequences, function (nameSequence) {\n    cover.add(new graphic.Rect({\n      name: nameSequence.join(''),\n      style: {\n        opacity: 0\n      },\n      draggable: true,\n      silent: true,\n      invisible: true,\n      drift: curry(driftRect, rectRangeConverter, controller, cover, nameSequence),\n      ondragend: curry(trigger, controller, {\n        isEnd: true\n      })\n    }));\n  });\n  return cover;\n}\nfunction updateBaseRect(controller, cover, localRange, brushOption) {\n  var lineWidth = brushOption.brushStyle.lineWidth || 0;\n  var handleSize = mathMax(lineWidth, MIN_RESIZE_LINE_WIDTH);\n  var x = localRange[0][0];\n  var y = localRange[1][0];\n  var xa = x - lineWidth / 2;\n  var ya = y - lineWidth / 2;\n  var x2 = localRange[0][1];\n  var y2 = localRange[1][1];\n  var x2a = x2 - handleSize + lineWidth / 2;\n  var y2a = y2 - handleSize + lineWidth / 2;\n  var width = x2 - x;\n  var height = y2 - y;\n  var widtha = width + lineWidth;\n  var heighta = height + lineWidth;\n  updateRectShape(controller, cover, 'main', x, y, width, height);\n  if (brushOption.transformable) {\n    updateRectShape(controller, cover, 'w', xa, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'e', x2a, ya, handleSize, heighta);\n    updateRectShape(controller, cover, 'n', xa, ya, widtha, handleSize);\n    updateRectShape(controller, cover, 's', xa, y2a, widtha, handleSize);\n    updateRectShape(controller, cover, 'nw', xa, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'ne', x2a, ya, handleSize, handleSize);\n    updateRectShape(controller, cover, 'sw', xa, y2a, handleSize, handleSize);\n    updateRectShape(controller, cover, 'se', x2a, y2a, handleSize, handleSize);\n  }\n}\nfunction updateCommon(controller, cover) {\n  var brushOption = cover.__brushOption;\n  var transformable = brushOption.transformable;\n  var mainEl = cover.childAt(0);\n  mainEl.useStyle(makeStyle(brushOption));\n  mainEl.attr({\n    silent: !transformable,\n    cursor: transformable ? 'move' : 'default'\n  });\n  each([['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']], function (nameSequence) {\n    var el = cover.childOfName(nameSequence.join(''));\n    var globalDir = nameSequence.length === 1 ? getGlobalDirection1(controller, nameSequence[0]) : getGlobalDirection2(controller, nameSequence);\n    el && el.attr({\n      silent: !transformable,\n      invisible: !transformable,\n      cursor: transformable ? CURSOR_MAP[globalDir] + '-resize' : null\n    });\n  });\n}\nfunction updateRectShape(controller, cover, name, x, y, w, h) {\n  var el = cover.childOfName(name);\n  el && el.setShape(pointsToRect(clipByPanel(controller, cover, [[x, y], [x + w, y + h]])));\n}\nfunction makeStyle(brushOption) {\n  return defaults({\n    strokeNoScale: true\n  }, brushOption.brushStyle);\n}\nfunction formatRectRange(x, y, x2, y2) {\n  var min = [mathMin(x, x2), mathMin(y, y2)];\n  var max = [mathMax(x, x2), mathMax(y, y2)];\n  return [[min[0], max[0]], [min[1], max[1]] // y range\n  ];\n}\nfunction getTransform(controller) {\n  return graphic.getTransform(controller.group);\n}\nfunction getGlobalDirection1(controller, localDirName) {\n  var map = {\n    w: 'left',\n    e: 'right',\n    n: 'top',\n    s: 'bottom'\n  };\n  var inverseMap = {\n    left: 'w',\n    right: 'e',\n    top: 'n',\n    bottom: 's'\n  };\n  var dir = graphic.transformDirection(map[localDirName], getTransform(controller));\n  return inverseMap[dir];\n}\nfunction getGlobalDirection2(controller, localDirNameSeq) {\n  var globalDir = [getGlobalDirection1(controller, localDirNameSeq[0]), getGlobalDirection1(controller, localDirNameSeq[1])];\n  (globalDir[0] === 'e' || globalDir[0] === 'w') && globalDir.reverse();\n  return globalDir.join('');\n}\nfunction driftRect(rectRangeConverter, controller, cover, dirNameSequence, dx, dy) {\n  var brushOption = cover.__brushOption;\n  var rectRange = rectRangeConverter.toRectRange(brushOption.range);\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(dirNameSequence, function (dirName) {\n    var ind = DIRECTION_MAP[dirName];\n    rectRange[ind[0]][ind[1]] += localDelta[ind[0]];\n  });\n  brushOption.range = rectRangeConverter.fromRectRange(formatRectRange(rectRange[0][0], rectRange[1][0], rectRange[0][1], rectRange[1][1]));\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction driftPolygon(controller, cover, dx, dy) {\n  var range = cover.__brushOption.range;\n  var localDelta = toLocalDelta(controller, dx, dy);\n  each(range, function (point) {\n    point[0] += localDelta[0];\n    point[1] += localDelta[1];\n  });\n  updateCoverAfterCreation(controller, cover);\n  trigger(controller, {\n    isEnd: false\n  });\n}\nfunction toLocalDelta(controller, dx, dy) {\n  var thisGroup = controller.group;\n  var localD = thisGroup.transformCoordToLocal(dx, dy);\n  var localZero = thisGroup.transformCoordToLocal(0, 0);\n  return [localD[0] - localZero[0], localD[1] - localZero[1]];\n}\nfunction clipByPanel(controller, cover, data) {\n  var panel = getPanelByCover(controller, cover);\n  return panel && panel !== BRUSH_PANEL_GLOBAL ? panel.clipPath(data, controller._transform) : clone(data);\n}\nfunction pointsToRect(points) {\n  var xmin = mathMin(points[0][0], points[1][0]);\n  var ymin = mathMin(points[0][1], points[1][1]);\n  var xmax = mathMax(points[0][0], points[1][0]);\n  var ymax = mathMax(points[0][1], points[1][1]);\n  return {\n    x: xmin,\n    y: ymin,\n    width: xmax - xmin,\n    height: ymax - ymin\n  };\n}\nfunction resetCursor(controller, e, localCursorPoint) {\n  if (\n  // Check active\n  !controller._brushType\n  // resetCursor should be always called when mouse is in zr area,\n  // but not called when mouse is out of zr area to avoid bad influence\n  // if `mousemove`, `mouseup` are triggered from `document` event.\n  || isOutsideZrArea(controller, e.offsetX, e.offsetY)) {\n    return;\n  }\n  var zr = controller._zr;\n  var covers = controller._covers;\n  var currPanel = getPanelByPoint(controller, e, localCursorPoint);\n  // Check whether in covers.\n  if (!controller._dragging) {\n    for (var i = 0; i < covers.length; i++) {\n      var brushOption = covers[i].__brushOption;\n      if (currPanel && (currPanel === BRUSH_PANEL_GLOBAL || brushOption.panelId === currPanel.panelId) && coverRenderers[brushOption.brushType].contain(covers[i], localCursorPoint[0], localCursorPoint[1])) {\n        // Use cursor style set on cover.\n        return;\n      }\n    }\n  }\n  currPanel && zr.setCursorStyle('crosshair');\n}\nfunction preventDefault(e) {\n  var rawE = e.event;\n  rawE.preventDefault && rawE.preventDefault();\n}\nfunction mainShapeContain(cover, x, y) {\n  return cover.childOfName('main').contain(x, y);\n}\nfunction updateCoverByMouse(controller, e, localCursorPoint, isEnd) {\n  var creatingCover = controller._creatingCover;\n  var panel = controller._creatingPanel;\n  var thisBrushOption = controller._brushOption;\n  var eventParams;\n  controller._track.push(localCursorPoint.slice());\n  if (shouldShowCover(controller) || creatingCover) {\n    if (panel && !creatingCover) {\n      thisBrushOption.brushMode === 'single' && clearCovers(controller);\n      var brushOption = clone(thisBrushOption);\n      brushOption.brushType = determineBrushType(brushOption.brushType, panel);\n      brushOption.panelId = panel === BRUSH_PANEL_GLOBAL ? null : panel.panelId;\n      creatingCover = controller._creatingCover = createCover(controller, brushOption);\n      controller._covers.push(creatingCover);\n    }\n    if (creatingCover) {\n      var coverRenderer = coverRenderers[determineBrushType(controller._brushType, panel)];\n      var coverBrushOption = creatingCover.__brushOption;\n      coverBrushOption.range = coverRenderer.getCreatingRange(clipByPanel(controller, creatingCover, controller._track));\n      if (isEnd) {\n        endCreating(controller, creatingCover);\n        coverRenderer.updateCommon(controller, creatingCover);\n      }\n      updateCoverShape(controller, creatingCover);\n      eventParams = {\n        isEnd: isEnd\n      };\n    }\n  } else if (isEnd && thisBrushOption.brushMode === 'single' && thisBrushOption.removeOnClick) {\n    // Help user to remove covers easily, only by a tiny drag, in 'single' mode.\n    // But a single click do not clear covers, because user may have casual\n    // clicks (for example, click on other component and do not expect covers\n    // disappear).\n    // Only some cover removed, trigger action, but not every click trigger action.\n    if (getPanelByPoint(controller, e, localCursorPoint) && clearCovers(controller)) {\n      eventParams = {\n        isEnd: isEnd,\n        removeOnClick: true\n      };\n    }\n  }\n  return eventParams;\n}\nfunction determineBrushType(brushType, panel) {\n  if (brushType === 'auto') {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(panel && panel.defaultBrushType, 'MUST have defaultBrushType when brushType is \"atuo\"');\n    }\n    return panel.defaultBrushType;\n  }\n  return brushType;\n}\nvar pointerHandlers = {\n  mousedown: function (e) {\n    if (this._dragging) {\n      // In case some browser do not support globalOut,\n      // and release mouse out side the browser.\n      handleDragEnd(this, e);\n    } else if (!e.target || !e.target.draggable) {\n      preventDefault(e);\n      var localCursorPoint = this.group.transformCoordToLocal(e.offsetX, e.offsetY);\n      this._creatingCover = null;\n      var panel = this._creatingPanel = getPanelByPoint(this, e, localCursorPoint);\n      if (panel) {\n        this._dragging = true;\n        this._track = [localCursorPoint.slice()];\n      }\n    }\n  },\n  mousemove: function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = this.group.transformCoordToLocal(x, y);\n    resetCursor(this, e, localCursorPoint);\n    if (this._dragging) {\n      preventDefault(e);\n      var eventParams = updateCoverByMouse(this, e, localCursorPoint, false);\n      eventParams && trigger(this, eventParams);\n    }\n  },\n  mouseup: function (e) {\n    handleDragEnd(this, e);\n  }\n};\nfunction handleDragEnd(controller, e) {\n  if (controller._dragging) {\n    preventDefault(e);\n    var x = e.offsetX;\n    var y = e.offsetY;\n    var localCursorPoint = controller.group.transformCoordToLocal(x, y);\n    var eventParams = updateCoverByMouse(controller, e, localCursorPoint, true);\n    controller._dragging = false;\n    controller._track = [];\n    controller._creatingCover = null;\n    // trigger event should be at final, after procedure will be nested.\n    eventParams && trigger(controller, eventParams);\n  }\n}\nfunction isOutsideZrArea(controller, x, y) {\n  var zr = controller._zr;\n  return x < 0 || x > zr.getWidth() || y < 0 || y > zr.getHeight();\n}\n/**\r\n * key: brushType\r\n */\nvar coverRenderers = {\n  lineX: getLineRenderer(0),\n  lineY: getLineRenderer(1),\n  rect: {\n    createCover: function (controller, brushOption) {\n      function returnInput(range) {\n        return range;\n      }\n      return createBaseRectCover({\n        toRectRange: returnInput,\n        fromRectRange: returnInput\n      }, controller, brushOption, [['w'], ['e'], ['n'], ['s'], ['s', 'e'], ['s', 'w'], ['n', 'e'], ['n', 'w']]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      return formatRectRange(ends[1][0], ends[1][1], ends[0][0], ends[0][1]);\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      updateBaseRect(controller, cover, localRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  },\n  polygon: {\n    createCover: function (controller, brushOption) {\n      var cover = new graphic.Group();\n      // Do not use graphic.Polygon because graphic.Polyline do not close the\n      // border of the shape when drawing, which is a better experience for user.\n      cover.add(new graphic.Polyline({\n        name: 'main',\n        style: makeStyle(brushOption),\n        silent: true\n      }));\n      return cover;\n    },\n    getCreatingRange: function (localTrack) {\n      return localTrack;\n    },\n    endCreating: function (controller, cover) {\n      cover.remove(cover.childAt(0));\n      // Use graphic.Polygon close the shape.\n      cover.add(new graphic.Polygon({\n        name: 'main',\n        draggable: true,\n        drift: curry(driftPolygon, controller, cover),\n        ondragend: curry(trigger, controller, {\n          isEnd: true\n        })\n      }));\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      cover.childAt(0).setShape({\n        points: clipByPanel(controller, cover, localRange)\n      });\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  }\n};\nfunction getLineRenderer(xyIndex) {\n  return {\n    createCover: function (controller, brushOption) {\n      return createBaseRectCover({\n        toRectRange: function (range) {\n          var rectRange = [range, [0, 100]];\n          xyIndex && rectRange.reverse();\n          return rectRange;\n        },\n        fromRectRange: function (rectRange) {\n          return rectRange[xyIndex];\n        }\n      }, controller, brushOption, [[['w'], ['e']], [['n'], ['s']]][xyIndex]);\n    },\n    getCreatingRange: function (localTrack) {\n      var ends = getTrackEnds(localTrack);\n      var min = mathMin(ends[0][xyIndex], ends[1][xyIndex]);\n      var max = mathMax(ends[0][xyIndex], ends[1][xyIndex]);\n      return [min, max];\n    },\n    updateCoverShape: function (controller, cover, localRange, brushOption) {\n      var otherExtent;\n      // If brushWidth not specified, fit the panel.\n      var panel = getPanelByCover(controller, cover);\n      if (panel !== BRUSH_PANEL_GLOBAL && panel.getLinearBrushOtherExtent) {\n        otherExtent = panel.getLinearBrushOtherExtent(xyIndex);\n      } else {\n        var zr = controller._zr;\n        otherExtent = [0, [zr.getWidth(), zr.getHeight()][1 - xyIndex]];\n      }\n      var rectRange = [localRange, otherExtent];\n      xyIndex && rectRange.reverse();\n      updateBaseRect(controller, cover, rectRange, brushOption);\n    },\n    updateCommon: updateCommon,\n    contain: mainShapeContain\n  };\n}\nexport default BrushController;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport BoundingRect from 'zrender/lib/core/BoundingRect.js';\nimport { onIrrelevantElement } from './cursorHelper.js';\nimport * as graphicUtil from '../../util/graphic.js';\nexport function makeRectPanelClipPath(rect) {\n  rect = normalizeRect(rect);\n  return function (localPoints) {\n    return graphicUtil.clipPointsByRect(localPoints, rect);\n  };\n}\nexport function makeLinearBrushOtherExtent(rect, specifiedXYIndex) {\n  rect = normalizeRect(rect);\n  return function (xyIndex) {\n    var idx = specifiedXYIndex != null ? specifiedXYIndex : xyIndex;\n    var brushWidth = idx ? rect.width : rect.height;\n    var base = idx ? rect.x : rect.y;\n    return [base, base + (brushWidth || 0)];\n  };\n}\nexport function makeRectIsTargetByCursor(rect, api, targetModel) {\n  var boundingRect = normalizeRect(rect);\n  return function (e, localCursorPoint) {\n    return boundingRect.contain(localCursorPoint[0], localCursorPoint[1]) && !onIrrelevantElement(e, api, targetModel);\n  };\n}\n// Consider width/height is negative.\nfunction normalizeRect(rect) {\n  return BoundingRect.create(rect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as axisPointerModelHelper from './modelHelper.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\r\n * Base axis pointer class in 2D.\r\n */\nvar BaseAxisPointer = /** @class */function () {\n  function BaseAxisPointer() {\n    this._dragging = false;\n    /**\r\n     * In px, arbitrary value. Do not set too small,\r\n     * no animation is ok for most cases.\r\n     */\n    this.animationThreshold = 15;\n  }\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.render = function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status');\n    // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api;\n    // Optimize: `render` will be called repeatedly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n    group && group.show();\n    handle && handle.show();\n    // Otherwise status is 'show'\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api);\n    // Enable change axis pointer type.\n    var graphicKey = elOption.graphicKey;\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n    updateMandatoryProps(group, axisPointerModel, true);\n    this._renderHandle(value);\n  };\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.remove = function (api) {\n    this.clear(api);\n  };\n  /**\r\n   * @implement\r\n   */\n  BaseAxisPointer.prototype.dispose = function (api) {\n    this.clear(api);\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.determineAnimation = function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap');\n    // Value axis without snap always do not snap.\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      }\n      // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent();\n        // Approximate band width\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n      return false;\n    }\n    return animation === true;\n  };\n  /**\r\n   * add {pointer, label, graphicKey} to elOption\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    // Should be implemenented by sub-class.\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.createPointerEl = function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.createLabelEl = function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Text(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.updatePointerEl = function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.updateLabelEl = function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        // TODOTODO\n        // shape: elOption.label.shape,\n        x: elOption.label.x,\n        y: elOption.label.y\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  };\n  /**\r\n   * @private\r\n   */\n  BaseAxisPointer.prototype._renderHandle = function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n    var axisPointerModel = this._axisPointerModel;\n    var zr = this._api.getZr();\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n    var isInit;\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // For mobile device, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n    updateMandatoryProps(handle, axisPointerModel, false);\n    // update style\n    handle.setStyle(handleModel.getItemStyle(null, ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY']));\n    // update position\n    var handleSize = handleModel.get('size');\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n    handle.scaleX = handleSize[0] / 2;\n    handle.scaleY = handleSize[1] / 2;\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n    this._moveHandleToValue(value, isInit);\n  };\n  BaseAxisPointer.prototype._moveHandleToValue = function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  };\n  BaseAxisPointer.prototype._onHandleDragMove = function (dx, dy) {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    this._dragging = true;\n    // Persistent for throttle.\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n    this._doDispatchAxisPointer();\n  };\n  /**\r\n   * Throttled method.\r\n   */\n  BaseAxisPointer.prototype._doDispatchAxisPointer = function () {\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  };\n  BaseAxisPointer.prototype._onHandleDragEnd = function () {\n    this._dragging = false;\n    var handle = this._handle;\n    if (!handle) {\n      return;\n    }\n    var value = this._axisPointerModel.get('value');\n    // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n    this._moveHandleToValue(value);\n    // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  };\n  /**\r\n   * @private\r\n   */\n  BaseAxisPointer.prototype.clear = function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n    throttleUtil.clear(this, '_doDispatchAxisPointer');\n  };\n  /**\r\n   * @protected\r\n   */\n  BaseAxisPointer.prototype.doClear = function () {\n    // Implemented by sub-class if necessary.\n  };\n  BaseAxisPointer.prototype.buildLabel = function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  };\n  return BaseAxisPointer;\n}();\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals_1 = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals_1 = equals_1 && propsEqual(lastProps[key], item);\n    });\n    return !!equals_1;\n  } else {\n    return lastProps === newProps;\n  }\n}\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get(['label', 'show']) ? 'show' : 'hide']();\n}\nfunction getHandleTransProps(trans) {\n  return {\n    x: trans.x || 0,\n    y: trans.y || 0,\n    rotation: trans.rotation || 0\n  };\n}\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\nexport default BaseAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as matrix from 'zrender/lib/core/matrix.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport AxisBuilder from '../axis/AxisBuilder.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nexport function buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n  return style;\n}\n/**\r\n * @param {Function} labelPos {align, verticalAlign, position}\r\n */\nexport function buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get(['label', 'precision']),\n    formatter: axisPointerModel.get(['label', 'formatter'])\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2];\n  // Adjust by align.\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2);\n  // Not overflow ec container\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get(['axisLine', 'lineStyle', 'color']);\n  }\n  elOption.label = {\n    // shape: {x: 0, y: 0, width: width, height: height, r: labelModel.get('borderRadius')},\n    x: position[0],\n    y: position[1],\n    style: createTextStyle(labelModel, {\n      text: text,\n      font: font,\n      fill: labelModel.getTextColor(),\n      padding: paddings,\n      backgroundColor: bgColor\n    }),\n    // Label should be over axisPointer.\n    z2: 10\n  };\n}\n// Do not overflow ec container\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\nexport function getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel({\n    value: value\n  }, {\n    // If `precision` is set, width can be fixed (like '12.00500'), which\n    // helps to debounce when when moving label.\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n  if (formatter) {\n    var params_1 = {\n      value: axisHelper.getAxisRawValue(axis, {\n        value: value\n      }),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params_1.seriesData.push(dataParams);\n    });\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params_1);\n    }\n  }\n  return text;\n}\nexport function getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\nexport function buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  // @ts-ignore\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get(['label', 'margin']);\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\nexport function makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\nexport function makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\nexport function makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer.js';\nimport * as viewHelper from './viewHelper.js';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper.js';\nvar CartesianAxisPointer = /** @class */function (_super) {\n  __extends(CartesianAxisPointer, _super);\n  function CartesianAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(\n    // @ts-ignore\n    value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  };\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.getHandleTransform = function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    // @ts-ignore\n    layoutInfo.labelMargin = axisPointerModel.get(['handle', 'margin']);\n    var pos = viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo);\n    return {\n      x: pos[0],\n      y: pos[1],\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  };\n  /**\r\n   * @override\r\n   */\n  CartesianAxisPointer.prototype.updateHandleTransform = function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = [transform.x, transform.y];\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex];\n    // Make tooltip do not overlap axisPointer and in the middle of the grid.\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      x: currPosition[0],\n      y: currPosition[1],\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  };\n  return CartesianAxisPointer;\n}(BaseAxisPointer);\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\nexport default CartesianAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar AxisPointerModel = /** @class */function (_super) {\n  __extends(AxisPointerModel, _super);\n  function AxisPointerModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerModel.type;\n    return _this;\n  }\n  AxisPointerModel.type = 'axisPointer';\n  AxisPointerModel.defaultOption = {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // zlevel: 0,\n    z: 50,\n    type: 'line',\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    triggerEmphasis: true,\n    value: null,\n    status: null,\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#B9BEC9',\n      width: 1,\n      type: 'dashed'\n    },\n    shadowStyle: {\n      color: 'rgba(210,219,238,0.2)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      precision: 'auto',\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      borderColor: null,\n      borderWidth: 0,\n      borderRadius: 3\n    },\n    handle: {\n      show: false,\n      // eslint-disable-next-line\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  };\n  return AxisPointerModel;\n}(ComponentModel);\nexport default AxisPointerModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport { makeInner } from '../../util/model.js';\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\r\n * @param {string} key\r\n * @param {module:echarts/ExtensionAPI} api\r\n * @param {Function} handler\r\n *      param: {string} currTrigger\r\n *      param: {Array.<number>} point\r\n */\nexport function register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove'));\n  // useHandler('mouseout', onLeave);\n  useHandler('globalout', onLeave);\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  };\n  // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\nexport function unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as globalListener from './globalListener.js';\nimport ComponentView from '../../view/Component.js';\nvar AxisPointerView = /** @class */function (_super) {\n  __extends(AxisPointerView, _super);\n  function AxisPointerView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = AxisPointerView.type;\n    return _this;\n  }\n  AxisPointerView.prototype.render = function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click';\n    // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  };\n  AxisPointerView.prototype.remove = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.prototype.dispose = function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n  };\n  AxisPointerView.type = 'axisPointer';\n  return AxisPointerView;\n}(ComponentView);\nexport default AxisPointerView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as modelUtil from '../../util/model.js';\n/**\r\n * @param finder contains {seriesIndex, dataIndex, dataIndexInside}\r\n * @param ecModel\r\n * @return  {point: [x, y], el: ...} point Will not be null.\r\n */\nexport default function findPointFromSeries(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    if (finder.isStacked) {\n      var baseAxis = coordSys.getBaseAxis();\n      var valueAxis = coordSys.getOtherAxis(baseAxis);\n      var valueAxisDim = valueAxis.dim;\n      var baseAxisDim = baseAxis.dim;\n      var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n      var baseDim = data.mapDimension(baseAxisDim);\n      var stackedData = [];\n      stackedData[baseDataOffset] = data.get(baseDim, dataIndex);\n      stackedData[1 - baseDataOffset] = data.get(data.getCalculationInfo('stackResultDimension'), dataIndex);\n      point = coordSys.dataToPoint(stackedData) || [];\n    } else {\n      point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }), dataIndex)) || [];\n    }\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n  return {\n    point: point,\n    el: el\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { makeInner } from '../../util/model.js';\nimport * as modelHelper from './modelHelper.js';\nimport findPointFromSeries from './findPointFromSeries.js';\nimport { each, curry, bind, extend } from 'zrender/lib/core/util.js';\nvar inner = makeInner();\n/**\r\n * Basic logic: check all axis, if they do not demand show/highlight,\r\n * then hide/downplay them.\r\n *\r\n * @return content of event obj for echarts.connect.\r\n */\nexport default function axisTrigger(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n  // Pending\n  // See #6121. But we are not able to reproduce it yet.\n  if (!coordSysAxesInfo) {\n    return;\n  }\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n  var isIllegalPoint = illegalPoint(point);\n  // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputPayload = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  };\n  // Process for triggered axes.\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo);\n      // If no inputAxesInfo, no axis is restricted.\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputPayload);\n      }\n    });\n  });\n  // Process for linked axes.\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup;\n    // If axis has been triggered in the previous stage, it should not be triggered by link.\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey];\n        // If srcValItem exist, source axis is triggered, so link to target axis.\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputPayload);\n  });\n  updateModelActually(showValueMap, axesInfo, outputPayload);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputPayload;\n}\nfunction processOnAxis(axisInfo, newValue, updaters, noSnap, outputFinder) {\n  var axis = axisInfo.axis;\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  }\n  // Heavy calculation. So put it after axis.containData checking.\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue;\n  // Fill content of event obj for echarts.connect.\n  // By default use the first involved series data as a sample to connect.\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    extend(outputFinder, payloadBatch[0]);\n  }\n  // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n  if (!noSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n  updaters.showPointer(axisInfo, newValue, payloadBatch);\n  // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimensionsAll(dim);\n    var seriesNestestValue;\n    var dataIndices;\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value,\n      // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n      if (!dataIndices.length) {\n        return;\n      }\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff);\n    // Consider category case\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel;\n  // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get(['label', 'precision']),\n      formatter: axisPointerModel.get(['label', 'formatter'])\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\nfunction updateModelActually(showValueMap, axesInfo, outputPayload) {\n  var outputAxesInfo = outputPayload.axesInfo = [];\n  // Basic logic: If no 'show' required, 'hide' this axisPointer.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value;\n      // For label formatter param and highlight.\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    }\n    // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n      // If hide, value still need to be set, consider\n      // click legend to toggle axis blank.\n      !axisInfo.useHandle && (option.status = 'hide');\n    }\n    // If status is 'hide', should be no info in payload.\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  }\n  // In most case only one axis (or event one series is used). It is\n  // convenient to fetch payload.seriesIndex and payload.dataIndex\n  // directly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification should be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {};\n  // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && axisInfo.triggerEmphasis && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  });\n  // Diff.\n  var toHighlight = [];\n  var toDownplay = [];\n  each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    // Not blur others when highlight in axisPointer.\n    notBlur: true,\n    batch: toHighlight\n  });\n}\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport AxisView from '../axis/AxisView.js';\nimport CartesianAxisPointer from './CartesianAxisPointer.js';\nimport AxisPointerModel from './AxisPointerModel.js';\nimport AxisPointerView from './AxisPointerView.js';\nimport { isArray } from 'zrender/lib/core/util.js';\nimport { collect } from './modelHelper.js';\nimport axisTrigger from './axisTrigger.js';\nexport function install(registers) {\n  // CartesianAxisPointer is not supposed to be required here. But consider\n  // echarts.simple.js and online build tooltip, which only require gridSimple,\n  // CartesianAxisPointer should be able to required somewhere.\n  AxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\n  registers.registerComponentModel(AxisPointerModel);\n  registers.registerComponentView(AxisPointerView);\n  registers.registerPreprocessor(function (option) {\n    // Always has a global axisPointerModel for default setting.\n    if (option) {\n      (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n      var link = option.axisPointer.link;\n      // Normalize to array to avoid object mergin. But if link\n      // is not set, remain null/undefined, otherwise it will\n      // override existent link setting.\n      if (link && !isArray(link)) {\n        option.axisPointer.link = [link];\n      }\n    }\n  });\n  // This process should proformed after coordinate systems created\n  // and series data processed. So put it on statistic processing stage.\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n    // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n    // allAxesInfo should be updated when setOption performed.\n    ecModel.getComponent('axisPointer').coordSysAxesInfo = collect(ecModel, api);\n  });\n  // Broadcast to all views.\n  registers.registerAction({\n    type: 'updateAxisPointer',\n    event: 'updateAxisPointer',\n    update: ':updateAxisPointer'\n  }, axisTrigger);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { install as installSimple } from './installSimple.js';\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util.js';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single'];\n// Supported coords.\n// FIXME: polar has been broken (but rarely used).\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n  return axisDim + 'AxisId';\n}\n/**\r\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\r\n * This function finds all linked dataZoomModels start from the given payload.\r\n */\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = [];\n  // Key: uid of dataZoomModel\n  var effectedModelMap = createHashMap();\n  // Find the dataZooms specified by payload.\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  });\n  // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n  var foundNewLink;\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n  return effectedModels;\n}\n/**\r\n * Find the first target coordinate system.\r\n * Available after model built.\r\n *\r\n * @return Like {\r\n *                  grid: [\r\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\r\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\r\n *                      ...\r\n *                  ],  // cartesians must not be null/undefined.\r\n *                  polar: [\r\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\r\n *                      ...\r\n *                  ],  // polars must not be null/undefined.\r\n *                  singleAxis: [\r\n *                      {model: coord0, axisModels: [], coordIndex: 0}\r\n *                  ]\r\n *              }\r\n */\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    if (!axisModel) {\n      return;\n    }\n    var coordSysModel = axisModel.getCoordSysModel();\n    if (!coordSysModel) {\n      return;\n    }\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { each, createHashMap, merge, assert } from 'zrender/lib/core/util.js';\nimport ComponentModel from '../../model/Component.js';\nimport { getAxisMainType, DATA_ZOOM_AXIS_DIMENSIONS } from './helper.js';\nimport { MULTIPLE_REFERRING, SINGLE_REFERRING } from '../../util/model.js';\nvar DataZoomAxisInfo = /** @class */function () {\n  function DataZoomAxisInfo() {\n    this.indexList = [];\n    this.indexMap = [];\n  }\n  DataZoomAxisInfo.prototype.add = function (axisCmptIdx) {\n    // Remove duplication.\n    if (!this.indexMap[axisCmptIdx]) {\n      this.indexList.push(axisCmptIdx);\n      this.indexMap[axisCmptIdx] = true;\n    }\n  };\n  return DataZoomAxisInfo;\n}();\nvar DataZoomModel = /** @class */function (_super) {\n  __extends(DataZoomModel, _super);\n  function DataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomModel.type;\n    _this._autoThrottle = true;\n    _this._noTarget = true;\n    /**\r\n     * It is `[rangeModeForMin, rangeModeForMax]`.\r\n     * The optional values for `rangeMode`:\r\n     * + `'value'` mode: the axis extent will always be determined by\r\n     *     `dataZoom.startValue` and `dataZoom.endValue`, despite\r\n     *     how data like and how `axis.min` and `axis.max` are.\r\n     * + `'percent'` mode: `100` represents 100% of the `[dMin, dMax]`,\r\n     *     where `dMin` is `axis.min` if `axis.min` specified, otherwise `data.extent[0]`,\r\n     *     and `dMax` is `axis.max` if `axis.max` specified, otherwise `data.extent[1]`.\r\n     *     Axis extent will be determined by the result of the percent of `[dMin, dMax]`.\r\n     *\r\n     * For example, when users are using dynamic data (update data periodically via `setOption`),\r\n     * if in `'value`' mode, the window will be kept in a fixed value range despite how\r\n     * data are appended, while if in `'percent'` mode, whe window range will be changed alone with\r\n     * the appended data (suppose `axis.min` and `axis.max` are not specified).\r\n     */\n    _this._rangePropMode = ['percent', 'percent'];\n    return _this;\n  }\n  DataZoomModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputRawOption = retrieveRawOption(option);\n    /**\r\n     * Suppose a \"main process\" start at the point that model prepared (that is,\r\n     * model initialized or merged or method called in `action`).\r\n     * We should keep the `main process` idempotent, that is, given a set of values\r\n     * on `option`, we get the same result.\r\n     *\r\n     * But sometimes, values on `option` will be updated for providing users\r\n     * a \"final calculated value\" (`dataZoomProcessor` will do that). Those value\r\n     * should not be the base/input of the `main process`.\r\n     *\r\n     * So in that case we should save and keep the input of the `main process`\r\n     * separately, called `settledOption`.\r\n     *\r\n     * For example, consider the case:\r\n     * (Step_1) brush zoom the grid by `toolbox.dataZoom`,\r\n     *     where the original input `option.startValue`, `option.endValue` are earsed by\r\n     *     calculated value.\r\n     * (Step)2) click the legend to hide and show a series,\r\n     *     where the new range is calculated by the earsed `startValue` and `endValue`,\r\n     *     which brings incorrect result.\r\n     */\n    this.settledOption = inputRawOption;\n    this.mergeDefaultAndTheme(option, ecModel);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype.mergeOption = function (newOption) {\n    var inputRawOption = retrieveRawOption(newOption);\n    // FIX #2591\n    merge(this.option, newOption, true);\n    merge(this.settledOption, inputRawOption, true);\n    this._doInit(inputRawOption);\n  };\n  DataZoomModel.prototype._doInit = function (inputRawOption) {\n    var thisOption = this.option;\n    this._setDefaultThrottle(inputRawOption);\n    this._updateRangeUse(inputRawOption);\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      // start/end has higher priority over startValue/endValue if they\n      // both set, but we should make chart.setOption({endValue: 1000})\n      // effective, rather than chart.setOption({endValue: 1000, end: null}).\n      if (this._rangePropMode[index] === 'value') {\n        thisOption[names[0]] = settledOption[names[0]] = null;\n      }\n      // Otherwise do nothing and use the merge result.\n    }, this);\n    this._resetTarget();\n  };\n  DataZoomModel.prototype._resetTarget = function () {\n    var optionOrient = this.get('orient', true);\n    var targetAxisIndexMap = this._targetAxisInfoMap = createHashMap();\n    var hasAxisSpecified = this._fillSpecifiedTargetAxis(targetAxisIndexMap);\n    if (hasAxisSpecified) {\n      this._orient = optionOrient || this._makeAutoOrientByTargetAxis();\n    } else {\n      this._orient = optionOrient || 'horizontal';\n      this._fillAutoTargetAxisByOrient(targetAxisIndexMap, this._orient);\n    }\n    this._noTarget = true;\n    targetAxisIndexMap.each(function (axisInfo) {\n      if (axisInfo.indexList.length) {\n        this._noTarget = false;\n      }\n    }, this);\n  };\n  DataZoomModel.prototype._fillSpecifiedTargetAxis = function (targetAxisIndexMap) {\n    var hasAxisSpecified = false;\n    each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n      var refering = this.getReferringComponents(getAxisMainType(axisDim), MULTIPLE_REFERRING);\n      // When user set axisIndex as a empty array, we think that user specify axisIndex\n      // but do not want use auto mode. Because empty array may be encountered when\n      // some error occurred.\n      if (!refering.specified) {\n        return;\n      }\n      hasAxisSpecified = true;\n      var axisInfo = new DataZoomAxisInfo();\n      each(refering.models, function (axisModel) {\n        axisInfo.add(axisModel.componentIndex);\n      });\n      targetAxisIndexMap.set(axisDim, axisInfo);\n    }, this);\n    return hasAxisSpecified;\n  };\n  DataZoomModel.prototype._fillAutoTargetAxisByOrient = function (targetAxisIndexMap, orient) {\n    var ecModel = this.ecModel;\n    var needAuto = true;\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisDim = orient === 'vertical' ? 'y' : 'x';\n      var axisModels = ecModel.findComponents({\n        mainType: axisDim + 'Axis'\n      });\n      setParallelAxis(axisModels, axisDim);\n    }\n    // Find axis that parallel to dataZoom as default.\n    if (needAuto) {\n      var axisModels = ecModel.findComponents({\n        mainType: 'singleAxis',\n        filter: function (axisModel) {\n          return axisModel.get('orient', true) === orient;\n        }\n      });\n      setParallelAxis(axisModels, 'single');\n    }\n    function setParallelAxis(axisModels, axisDim) {\n      // At least use the first parallel axis as the target axis.\n      var axisModel = axisModels[0];\n      if (!axisModel) {\n        return;\n      }\n      var axisInfo = new DataZoomAxisInfo();\n      axisInfo.add(axisModel.componentIndex);\n      targetAxisIndexMap.set(axisDim, axisInfo);\n      needAuto = false;\n      // Find parallel axes in the same grid.\n      if (axisDim === 'x' || axisDim === 'y') {\n        var gridModel_1 = axisModel.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n        gridModel_1 && each(axisModels, function (axModel) {\n          if (axisModel.componentIndex !== axModel.componentIndex && gridModel_1 === axModel.getReferringComponents('grid', SINGLE_REFERRING).models[0]) {\n            axisInfo.add(axModel.componentIndex);\n          }\n        });\n      }\n    }\n    if (needAuto) {\n      // If no parallel axis, find the first category axis as default. (Also consider polar).\n      each(DATA_ZOOM_AXIS_DIMENSIONS, function (axisDim) {\n        if (!needAuto) {\n          return;\n        }\n        var axisModels = ecModel.findComponents({\n          mainType: getAxisMainType(axisDim),\n          filter: function (axisModel) {\n            return axisModel.get('type', true) === 'category';\n          }\n        });\n        if (axisModels[0]) {\n          var axisInfo = new DataZoomAxisInfo();\n          axisInfo.add(axisModels[0].componentIndex);\n          targetAxisIndexMap.set(axisDim, axisInfo);\n          needAuto = false;\n        }\n      }, this);\n    }\n  };\n  DataZoomModel.prototype._makeAutoOrientByTargetAxis = function () {\n    var dim;\n    // Find the first axis\n    this.eachTargetAxis(function (axisDim) {\n      !dim && (dim = axisDim);\n    }, this);\n    return dim === 'y' ? 'vertical' : 'horizontal';\n  };\n  DataZoomModel.prototype._setDefaultThrottle = function (inputRawOption) {\n    // When first time user set throttle, auto throttle ends.\n    if (inputRawOption.hasOwnProperty('throttle')) {\n      this._autoThrottle = false;\n    }\n    if (this._autoThrottle) {\n      var globalOption = this.ecModel.option;\n      this.option.throttle = globalOption.animation && globalOption.animationDurationUpdate > 0 ? 100 : 20;\n    }\n  };\n  DataZoomModel.prototype._updateRangeUse = function (inputRawOption) {\n    var rangePropMode = this._rangePropMode;\n    var rangeModeInOption = this.get('rangeMode');\n    each([['start', 'startValue'], ['end', 'endValue']], function (names, index) {\n      var percentSpecified = inputRawOption[names[0]] != null;\n      var valueSpecified = inputRawOption[names[1]] != null;\n      if (percentSpecified && !valueSpecified) {\n        rangePropMode[index] = 'percent';\n      } else if (!percentSpecified && valueSpecified) {\n        rangePropMode[index] = 'value';\n      } else if (rangeModeInOption) {\n        rangePropMode[index] = rangeModeInOption[index];\n      } else if (percentSpecified) {\n        // percentSpecified && valueSpecified\n        rangePropMode[index] = 'percent';\n      }\n      // else remain its original setting.\n    });\n  };\n  DataZoomModel.prototype.noTarget = function () {\n    return this._noTarget;\n  };\n  DataZoomModel.prototype.getFirstTargetAxisModel = function () {\n    var firstAxisModel;\n    this.eachTargetAxis(function (axisDim, axisIndex) {\n      if (firstAxisModel == null) {\n        firstAxisModel = this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n      }\n    }, this);\n    return firstAxisModel;\n  };\n  /**\r\n   * @param {Function} callback param: axisModel, dimNames, axisIndex, dataZoomModel, ecModel\r\n   */\n  DataZoomModel.prototype.eachTargetAxis = function (callback, context) {\n    this._targetAxisInfoMap.each(function (axisInfo, axisDim) {\n      each(axisInfo.indexList, function (axisIndex) {\n        callback.call(context, axisDim, axisIndex);\n      });\n    });\n  };\n  /**\r\n   * @return If not found, return null/undefined.\r\n   */\n  DataZoomModel.prototype.getAxisProxy = function (axisDim, axisIndex) {\n    var axisModel = this.getAxisModel(axisDim, axisIndex);\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n  };\n  /**\r\n   * @return If not found, return null/undefined.\r\n   */\n  DataZoomModel.prototype.getAxisModel = function (axisDim, axisIndex) {\n    if (process.env.NODE_ENV !== 'production') {\n      assert(axisDim && axisIndex != null);\n    }\n    var axisInfo = this._targetAxisInfoMap.get(axisDim);\n    if (axisInfo && axisInfo.indexMap[axisIndex]) {\n      return this.ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n    }\n  };\n  /**\r\n   * If not specified, set to undefined.\r\n   */\n  DataZoomModel.prototype.setRawRange = function (opt) {\n    var thisOption = this.option;\n    var settledOption = this.settledOption;\n    each([['start', 'startValue'], ['end', 'endValue']], function (names) {\n      // Consider the pair <start, startValue>:\n      // If one has value and the other one is `null/undefined`, we both set them\n      // to `settledOption`. This strategy enables the feature to clear the original\n      // value in `settledOption` to `null/undefined`.\n      // But if both of them are `null/undefined`, we do not set them to `settledOption`\n      // and keep `settledOption` with the original value. This strategy enables users to\n      // only set <end or endValue> but not set <start or startValue> when calling\n      // `dispatchAction`.\n      // The pair <end, endValue> is treated in the same way.\n      if (opt[names[0]] != null || opt[names[1]] != null) {\n        thisOption[names[0]] = settledOption[names[0]] = opt[names[0]];\n        thisOption[names[1]] = settledOption[names[1]] = opt[names[1]];\n      }\n    }, this);\n    this._updateRangeUse(opt);\n  };\n  DataZoomModel.prototype.setCalculatedRange = function (opt) {\n    var option = this.option;\n    each(['start', 'startValue', 'end', 'endValue'], function (name) {\n      option[name] = opt[name];\n    });\n  };\n  DataZoomModel.prototype.getPercentRange = function () {\n    var axisProxy = this.findRepresentativeAxisProxy();\n    if (axisProxy) {\n      return axisProxy.getDataPercentWindow();\n    }\n  };\n  /**\r\n   * For example, chart.getModel().getComponent('dataZoom').getValueRange('y', 0);\r\n   *\r\n   * @return [startValue, endValue] value can only be '-' or finite number.\r\n   */\n  DataZoomModel.prototype.getValueRange = function (axisDim, axisIndex) {\n    if (axisDim == null && axisIndex == null) {\n      var axisProxy = this.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        return axisProxy.getDataValueWindow();\n      }\n    } else {\n      return this.getAxisProxy(axisDim, axisIndex).getDataValueWindow();\n    }\n  };\n  /**\r\n   * @param axisModel If axisModel given, find axisProxy\r\n   *      corresponding to the axisModel\r\n   */\n  DataZoomModel.prototype.findRepresentativeAxisProxy = function (axisModel) {\n    if (axisModel) {\n      return axisModel.__dzAxisProxy;\n    }\n    // Find the first hosted axisProxy\n    var firstProxy;\n    var axisDimList = this._targetAxisInfoMap.keys();\n    for (var i = 0; i < axisDimList.length; i++) {\n      var axisDim = axisDimList[i];\n      var axisInfo = this._targetAxisInfoMap.get(axisDim);\n      for (var j = 0; j < axisInfo.indexList.length; j++) {\n        var proxy = this.getAxisProxy(axisDim, axisInfo.indexList[j]);\n        if (proxy.hostedBy(this)) {\n          return proxy;\n        }\n        if (!firstProxy) {\n          firstProxy = proxy;\n        }\n      }\n    }\n    // If no hosted proxy found, still need to return a proxy.\n    // This case always happens in toolbox dataZoom, where axes are all hosted by\n    // other dataZooms.\n    return firstProxy;\n  };\n  DataZoomModel.prototype.getRangePropMode = function () {\n    return this._rangePropMode.slice();\n  };\n  DataZoomModel.prototype.getOrient = function () {\n    if (process.env.NODE_ENV !== 'production') {\n      // Should not be called before initialized.\n      assert(this._orient);\n    }\n    return this._orient;\n  };\n  DataZoomModel.type = 'dataZoom';\n  DataZoomModel.dependencies = ['xAxis', 'yAxis', 'radiusAxis', 'angleAxis', 'singleAxis', 'series', 'toolbox'];\n  DataZoomModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    filterMode: 'filter',\n    start: 0,\n    end: 100\n  };\n  return DataZoomModel;\n}(ComponentModel);\n/**\r\n * Retrieve those raw params from option, which will be cached separately,\r\n * because they will be overwritten by normalized/calculated values in the main\r\n * process.\r\n */\nfunction retrieveRawOption(option) {\n  var ret = {};\n  each(['start', 'end', 'startValue', 'endValue', 'throttle'], function (name) {\n    option.hasOwnProperty(name) && (ret[name] = option[name]);\n  });\n  return ret;\n}\nexport default DataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nvar SelectDataZoomModel = /** @class */function (_super) {\n  __extends(SelectDataZoomModel, _super);\n  function SelectDataZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomModel.type;\n    return _this;\n  }\n  SelectDataZoomModel.type = 'dataZoom.select';\n  return SelectDataZoomModel;\n}(DataZoomModel);\nexport default SelectDataZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component.js';\nvar DataZoomView = /** @class */function (_super) {\n  __extends(DataZoomView, _super);\n  function DataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = DataZoomView.type;\n    return _this;\n  }\n  DataZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    this.dataZoomModel = dataZoomModel;\n    this.ecModel = ecModel;\n    this.api = api;\n  };\n  DataZoomView.type = 'dataZoom';\n  return DataZoomView;\n}(ComponentView);\nexport default DataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nvar SelectDataZoomView = /** @class */function (_super) {\n  __extends(SelectDataZoomView, _super);\n  function SelectDataZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SelectDataZoomView.type;\n    return _this;\n  }\n  SelectDataZoomView.type = 'dataZoom.select';\n  return SelectDataZoomView;\n}(DataZoomView);\nexport default SelectDataZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as numberUtil from '../../util/number.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { unionAxisExtentFromData } from '../../coord/axisHelper.js';\nimport { ensureScaleRawExtentInfo } from '../../coord/scaleRawExtentInfo.js';\nimport { getAxisMainType, isCoordSupported } from './helper.js';\nimport { SINGLE_REFERRING } from '../../util/model.js';\nvar each = zrUtil.each;\nvar asc = numberUtil.asc;\n/**\r\n * Operate single axis.\r\n * One axis can only operated by one axis operator.\r\n * Different dataZoomModels may be defined to operate the same axis.\r\n * (i.e. 'inside' data zoom and 'slider' data zoom components)\r\n * So dataZoomModels share one axisProxy in that case.\r\n */\nvar AxisProxy = /** @class */function () {\n  function AxisProxy(dimName, axisIndex, dataZoomModel, ecModel) {\n    this._dimName = dimName;\n    this._axisIndex = axisIndex;\n    this.ecModel = ecModel;\n    this._dataZoomModel = dataZoomModel;\n    // /**\n    //  * @readOnly\n    //  * @private\n    //  */\n    // this.hasSeriesStacked;\n  }\n  /**\r\n   * Whether the axisProxy is hosted by dataZoomModel.\r\n   */\n  AxisProxy.prototype.hostedBy = function (dataZoomModel) {\n    return this._dataZoomModel === dataZoomModel;\n  };\n  /**\r\n   * @return Value can only be NaN or finite value.\r\n   */\n  AxisProxy.prototype.getDataValueWindow = function () {\n    return this._valueWindow.slice();\n  };\n  /**\r\n   * @return {Array.<number>}\r\n   */\n  AxisProxy.prototype.getDataPercentWindow = function () {\n    return this._percentWindow.slice();\n  };\n  AxisProxy.prototype.getTargetSeriesModels = function () {\n    var seriesModels = [];\n    this.ecModel.eachSeries(function (seriesModel) {\n      if (isCoordSupported(seriesModel)) {\n        var axisMainType = getAxisMainType(this._dimName);\n        var axisModel = seriesModel.getReferringComponents(axisMainType, SINGLE_REFERRING).models[0];\n        if (axisModel && this._axisIndex === axisModel.componentIndex) {\n          seriesModels.push(seriesModel);\n        }\n      }\n    }, this);\n    return seriesModels;\n  };\n  AxisProxy.prototype.getAxisModel = function () {\n    return this.ecModel.getComponent(this._dimName + 'Axis', this._axisIndex);\n  };\n  AxisProxy.prototype.getMinMaxSpan = function () {\n    return zrUtil.clone(this._minMaxSpan);\n  };\n  /**\r\n   * Only calculate by given range and this._dataExtent, do not change anything.\r\n   */\n  AxisProxy.prototype.calculateDataWindow = function (opt) {\n    var dataExtent = this._dataExtent;\n    var axisModel = this.getAxisModel();\n    var scale = axisModel.axis.scale;\n    var rangePropMode = this._dataZoomModel.getRangePropMode();\n    var percentExtent = [0, 100];\n    var percentWindow = [];\n    var valueWindow = [];\n    var hasPropModeValue;\n    each(['start', 'end'], function (prop, idx) {\n      var boundPercent = opt[prop];\n      var boundValue = opt[prop + 'Value'];\n      // Notice: dataZoom is based either on `percentProp` ('start', 'end') or\n      // on `valueProp` ('startValue', 'endValue'). (They are based on the data extent\n      // but not min/max of axis, which will be calculated by data window then).\n      // The former one is suitable for cases that a dataZoom component controls multiple\n      // axes with different unit or extent, and the latter one is suitable for accurate\n      // zoom by pixel (e.g., in dataZoomSelect).\n      // we use `getRangePropMode()` to mark which prop is used. `rangePropMode` is updated\n      // only when setOption or dispatchAction, otherwise it remains its original value.\n      // (Why not only record `percentProp` and always map to `valueProp`? Because\n      // the map `valueProp` -> `percentProp` -> `valueProp` probably not the original\n      // `valueProp`. consider two axes constrolled by one dataZoom. They have different\n      // data extent. All of values that are overflow the `dataExtent` will be calculated\n      // to percent '100%').\n      if (rangePropMode[idx] === 'percent') {\n        boundPercent == null && (boundPercent = percentExtent[idx]);\n        // Use scale.parse to math round for category or time axis.\n        boundValue = scale.parse(numberUtil.linearMap(boundPercent, percentExtent, dataExtent));\n      } else {\n        hasPropModeValue = true;\n        boundValue = boundValue == null ? dataExtent[idx] : scale.parse(boundValue);\n        // Calculating `percent` from `value` may be not accurate, because\n        // This calculation can not be inversed, because all of values that\n        // are overflow the `dataExtent` will be calculated to percent '100%'\n        boundPercent = numberUtil.linearMap(boundValue, dataExtent, percentExtent);\n      }\n      // valueWindow[idx] = round(boundValue);\n      // percentWindow[idx] = round(boundPercent);\n      // fallback to extent start/end when parsed value or percent is invalid\n      valueWindow[idx] = boundValue == null || isNaN(boundValue) ? dataExtent[idx] : boundValue;\n      percentWindow[idx] = boundPercent == null || isNaN(boundPercent) ? percentExtent[idx] : boundPercent;\n    });\n    asc(valueWindow);\n    asc(percentWindow);\n    // The windows from user calling of `dispatchAction` might be out of the extent,\n    // or do not obey the `min/maxSpan`, `min/maxValueSpan`. But we don't restrict window\n    // by `zoomLock` here, because we see `zoomLock` just as a interaction constraint,\n    // where API is able to initialize/modify the window size even though `zoomLock`\n    // specified.\n    var spans = this._minMaxSpan;\n    hasPropModeValue ? restrictSet(valueWindow, percentWindow, dataExtent, percentExtent, false) : restrictSet(percentWindow, valueWindow, percentExtent, dataExtent, true);\n    function restrictSet(fromWindow, toWindow, fromExtent, toExtent, toValue) {\n      var suffix = toValue ? 'Span' : 'ValueSpan';\n      sliderMove(0, fromWindow, fromExtent, 'all', spans['min' + suffix], spans['max' + suffix]);\n      for (var i = 0; i < 2; i++) {\n        toWindow[i] = numberUtil.linearMap(fromWindow[i], fromExtent, toExtent, true);\n        toValue && (toWindow[i] = scale.parse(toWindow[i]));\n      }\n    }\n    return {\n      valueWindow: valueWindow,\n      percentWindow: percentWindow\n    };\n  };\n  /**\r\n   * Notice: reset should not be called before series.restoreData() is called,\r\n   * so it is recommended to be called in \"process stage\" but not \"model init\r\n   * stage\".\r\n   */\n  AxisProxy.prototype.reset = function (dataZoomModel) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var targetSeries = this.getTargetSeriesModels();\n    // Culculate data window and data extent, and record them.\n    this._dataExtent = calculateDataExtent(this, this._dimName, targetSeries);\n    // `calculateDataWindow` uses min/maxSpan.\n    this._updateMinMaxSpan();\n    var dataWindow = this.calculateDataWindow(dataZoomModel.settledOption);\n    this._valueWindow = dataWindow.valueWindow;\n    this._percentWindow = dataWindow.percentWindow;\n    // Update axis setting then.\n    this._setAxisModel();\n  };\n  AxisProxy.prototype.filterData = function (dataZoomModel, api) {\n    if (dataZoomModel !== this._dataZoomModel) {\n      return;\n    }\n    var axisDim = this._dimName;\n    var seriesModels = this.getTargetSeriesModels();\n    var filterMode = dataZoomModel.get('filterMode');\n    var valueWindow = this._valueWindow;\n    if (filterMode === 'none') {\n      return;\n    }\n    // FIXME\n    // Toolbox may has dataZoom injected. And if there are stacked bar chart\n    // with NaN data, NaN will be filtered and stack will be wrong.\n    // So we need to force the mode to be set empty.\n    // In fect, it is not a big deal that do not support filterMode-'filter'\n    // when using toolbox#dataZoom, utill tooltip#dataZoom support \"single axis\n    // selection\" some day, which might need \"adapt to data extent on the\n    // otherAxis\", which is disabled by filterMode-'empty'.\n    // But currently, stack has been fixed to based on value but not index,\n    // so this is not an issue any more.\n    // let otherAxisModel = this.getOtherAxisModel();\n    // if (dataZoomModel.get('$fromToolbox')\n    //     && otherAxisModel\n    //     && otherAxisModel.hasSeriesStacked\n    // ) {\n    //     filterMode = 'empty';\n    // }\n    // TODO\n    // filterMode 'weakFilter' and 'empty' is not optimized for huge data yet.\n    each(seriesModels, function (seriesModel) {\n      var seriesData = seriesModel.getData();\n      var dataDims = seriesData.mapDimensionsAll(axisDim);\n      if (!dataDims.length) {\n        return;\n      }\n      if (filterMode === 'weakFilter') {\n        var store_1 = seriesData.getStore();\n        var dataDimIndices_1 = zrUtil.map(dataDims, function (dim) {\n          return seriesData.getDimensionIndex(dim);\n        }, seriesData);\n        seriesData.filterSelf(function (dataIndex) {\n          var leftOut;\n          var rightOut;\n          var hasValue;\n          for (var i = 0; i < dataDims.length; i++) {\n            var value = store_1.get(dataDimIndices_1[i], dataIndex);\n            var thisHasValue = !isNaN(value);\n            var thisLeftOut = value < valueWindow[0];\n            var thisRightOut = value > valueWindow[1];\n            if (thisHasValue && !thisLeftOut && !thisRightOut) {\n              return true;\n            }\n            thisHasValue && (hasValue = true);\n            thisLeftOut && (leftOut = true);\n            thisRightOut && (rightOut = true);\n          }\n          // If both left out and right out, do not filter.\n          return hasValue && leftOut && rightOut;\n        });\n      } else {\n        each(dataDims, function (dim) {\n          if (filterMode === 'empty') {\n            seriesModel.setData(seriesData = seriesData.map(dim, function (value) {\n              return !isInWindow(value) ? NaN : value;\n            }));\n          } else {\n            var range = {};\n            range[dim] = valueWindow;\n            // console.time('select');\n            seriesData.selectRange(range);\n            // console.timeEnd('select');\n          }\n        });\n      }\n      each(dataDims, function (dim) {\n        seriesData.setApproximateExtent(valueWindow, dim);\n      });\n    });\n    function isInWindow(value) {\n      return value >= valueWindow[0] && value <= valueWindow[1];\n    }\n  };\n  AxisProxy.prototype._updateMinMaxSpan = function () {\n    var minMaxSpan = this._minMaxSpan = {};\n    var dataZoomModel = this._dataZoomModel;\n    var dataExtent = this._dataExtent;\n    each(['min', 'max'], function (minMax) {\n      var percentSpan = dataZoomModel.get(minMax + 'Span');\n      var valueSpan = dataZoomModel.get(minMax + 'ValueSpan');\n      valueSpan != null && (valueSpan = this.getAxisModel().axis.scale.parse(valueSpan));\n      // minValueSpan and maxValueSpan has higher priority than minSpan and maxSpan\n      if (valueSpan != null) {\n        percentSpan = numberUtil.linearMap(dataExtent[0] + valueSpan, dataExtent, [0, 100], true);\n      } else if (percentSpan != null) {\n        valueSpan = numberUtil.linearMap(percentSpan, [0, 100], dataExtent, true) - dataExtent[0];\n      }\n      minMaxSpan[minMax + 'Span'] = percentSpan;\n      minMaxSpan[minMax + 'ValueSpan'] = valueSpan;\n    }, this);\n  };\n  AxisProxy.prototype._setAxisModel = function () {\n    var axisModel = this.getAxisModel();\n    var percentWindow = this._percentWindow;\n    var valueWindow = this._valueWindow;\n    if (!percentWindow) {\n      return;\n    }\n    // [0, 500]: arbitrary value, guess axis extent.\n    var precision = numberUtil.getPixelPrecision(valueWindow, [0, 500]);\n    precision = Math.min(precision, 20);\n    // For value axis, if min/max/scale are not set, we just use the extent obtained\n    // by series data, which may be a little different from the extent calculated by\n    // `axisHelper.getScaleExtent`. But the different just affects the experience a\n    // little when zooming. So it will not be fixed until some users require it strongly.\n    var rawExtentInfo = axisModel.axis.scale.rawExtentInfo;\n    if (percentWindow[0] !== 0) {\n      rawExtentInfo.setDeterminedMinMax('min', +valueWindow[0].toFixed(precision));\n    }\n    if (percentWindow[1] !== 100) {\n      rawExtentInfo.setDeterminedMinMax('max', +valueWindow[1].toFixed(precision));\n    }\n    rawExtentInfo.freeze();\n  };\n  return AxisProxy;\n}();\nfunction calculateDataExtent(axisProxy, axisDim, seriesModels) {\n  var dataExtent = [Infinity, -Infinity];\n  each(seriesModels, function (seriesModel) {\n    unionAxisExtentFromData(dataExtent, seriesModel.getData(), axisDim);\n  });\n  // It is important to get \"consistent\" extent when more then one axes is\n  // controlled by a `dataZoom`, otherwise those axes will not be synchronized\n  // when zooming. But it is difficult to know what is \"consistent\", considering\n  // axes have different type or even different meanings (For example, two\n  // time axes are used to compare data of the same date in different years).\n  // So basically dataZoom just obtains extent by series.data (in category axis\n  // extent can be obtained from axis.data).\n  // Nevertheless, user can set min/max/scale on axes to make extent of axes\n  // consistent.\n  var axisModel = axisProxy.getAxisModel();\n  var rawExtentResult = ensureScaleRawExtentInfo(axisModel.axis.scale, axisModel, dataExtent).calculate();\n  return [rawExtentResult.min, rawExtentResult.max];\n}\nexport default AxisProxy;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { createHashMap, each } from 'zrender/lib/core/util.js';\nimport { getAxisMainType } from './helper.js';\nimport AxisProxy from './AxisProxy.js';\nvar dataZoomProcessor = {\n  // `dataZoomProcessor` will only be performed in needed series. Consider if\n  // there is a line series and a pie series, it is better not to update the\n  // line series if only pie series is needed to be updated.\n  getTargetSeries: function (ecModel) {\n    function eachAxisModel(cb) {\n      ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n        dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n          var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n          cb(axisDim, axisIndex, axisModel, dataZoomModel);\n        });\n      });\n    }\n    // FIXME: it brings side-effect to `getTargetSeries`.\n    // Prepare axis proxies.\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // dispose all last axis proxy, in case that some axis are deleted.\n      axisModel.__dzAxisProxy = null;\n    });\n    var proxyList = [];\n    eachAxisModel(function (axisDim, axisIndex, axisModel, dataZoomModel) {\n      // Different dataZooms may constrol the same axis. In that case,\n      // an axisProxy serves both of them.\n      if (!axisModel.__dzAxisProxy) {\n        // Use the first dataZoomModel as the main model of axisProxy.\n        axisModel.__dzAxisProxy = new AxisProxy(axisDim, axisIndex, dataZoomModel, ecModel);\n        proxyList.push(axisModel.__dzAxisProxy);\n      }\n    });\n    var seriesModelMap = createHashMap();\n    each(proxyList, function (axisProxy) {\n      each(axisProxy.getTargetSeriesModels(), function (seriesModel) {\n        seriesModelMap.set(seriesModel.uid, seriesModel);\n      });\n    });\n    return seriesModelMap;\n  },\n  // Consider appendData, where filter should be performed. Because data process is\n  // in block mode currently, it is not need to worry about that the overallProgress\n  // execute every frame.\n  overallReset: function (ecModel, api) {\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // We calculate window and reset axis here but not in model\n      // init stage and not after action dispatch handler, because\n      // reset should be called after seriesData.restoreData.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).reset(dataZoomModel);\n      });\n      // Caution: data zoom filtering is order sensitive when using\n      // percent range and no min/max/scale set on axis.\n      // For example, we have dataZoom definition:\n      // [\n      //      {xAxisIndex: 0, start: 30, end: 70},\n      //      {yAxisIndex: 0, start: 20, end: 80}\n      // ]\n      // In this case, [20, 80] of y-dataZoom should be based on data\n      // that have filtered by x-dataZoom using range of [30, 70],\n      // but should not be based on full raw data. Thus sliding\n      // x-dataZoom will change both ranges of xAxis and yAxis,\n      // while sliding y-dataZoom will only change the range of yAxis.\n      // So we should filter x-axis after reset x-axis immediately,\n      // and then reset y-axis and filter y-axis.\n      dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n        dataZoomModel.getAxisProxy(axisDim, axisIndex).filterData(dataZoomModel, api);\n      });\n    });\n    ecModel.eachComponent('dataZoom', function (dataZoomModel) {\n      // Fullfill all of the range props so that user\n      // is able to get them from chart.getOption().\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var percentRange = axisProxy.getDataPercentWindow();\n        var valueRange = axisProxy.getDataValueWindow();\n        dataZoomModel.setCalculatedRange({\n          start: percentRange[0],\n          end: percentRange[1],\n          startValue: valueRange[0],\n          endValue: valueRange[1]\n        });\n      }\n    });\n  }\n};\nexport default dataZoomProcessor;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { findEffectedDataZooms } from './helper.js';\nimport { each } from 'zrender/lib/core/util.js';\nexport default function installDataZoomAction(registers) {\n  registers.registerAction('dataZoom', function (payload, ecModel) {\n    var effectedModels = findEffectedDataZooms(ecModel, payload);\n    each(effectedModels, function (dataZoomModel) {\n      dataZoomModel.setRawRange({\n        start: payload.start,\n        end: payload.end,\n        startValue: payload.startValue,\n        endValue: payload.endValue\n      });\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport dataZoomProcessor from './dataZoomProcessor.js';\nimport installDataZoomAction from './dataZoomAction.js';\nvar installed = false;\nexport default function installCommon(registers) {\n  if (installed) {\n    return;\n  }\n  installed = true;\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, dataZoomProcessor);\n  installDataZoomAction(registers);\n  registers.registerSubTypeDefaulter('dataZoom', function () {\n    // Default 'slider' when no type specified.\n    return 'slider';\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SelectZoomModel from './SelectZoomModel.js';\nimport SelectZoomView from './SelectZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SelectZoomModel);\n  registers.registerComponentView(SelectZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nvar ToolboxFeature = /** @class */function () {\n  function ToolboxFeature() {}\n  return ToolboxFeature;\n}();\nexport { ToolboxFeature };\nvar features = {};\nexport function registerFeature(name, ctor) {\n  features[name] = ctor;\n}\nexport function getFeature(name) {\n  return features[name];\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as featureManager from './featureManager.js';\nimport ComponentModel from '../../model/Component.js';\nvar ToolboxModel = /** @class */function (_super) {\n  __extends(ToolboxModel, _super);\n  function ToolboxModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ToolboxModel.type;\n    return _this;\n  }\n  ToolboxModel.prototype.optionUpdated = function () {\n    _super.prototype.optionUpdated.apply(this, arguments);\n    var ecModel = this.ecModel;\n    zrUtil.each(this.option.feature, function (featureOpt, featureName) {\n      var Feature = featureManager.getFeature(featureName);\n      if (Feature) {\n        if (Feature.getDefaultOption) {\n          Feature.defaultOption = Feature.getDefaultOption(ecModel);\n        }\n        zrUtil.merge(featureOpt, Feature.defaultOption);\n      }\n    });\n  };\n  ToolboxModel.type = 'toolbox';\n  ToolboxModel.layoutMode = {\n    type: 'box',\n    ignoreSize: true\n  };\n  ToolboxModel.defaultOption = {\n    show: true,\n    z: 6,\n    // zlevel: 0,\n    orient: 'horizontal',\n    left: 'right',\n    top: 'top',\n    // right\n    // bottom\n    backgroundColor: 'transparent',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemSize: 15,\n    itemGap: 8,\n    showTitle: true,\n    iconStyle: {\n      borderColor: '#666',\n      color: 'none'\n    },\n    emphasis: {\n      iconStyle: {\n        borderColor: '#3E98C5'\n      }\n    },\n    // textStyle: {},\n    // feature\n    tooltip: {\n      show: false,\n      position: 'bottom'\n    }\n  };\n  return ToolboxModel;\n}(ComponentModel);\nexport default ToolboxModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout.js';\nimport * as formatUtil from '../../util/format.js';\nimport * as graphic from '../../util/graphic.js';\n/**\r\n * Layout list like component.\r\n * It will box layout each items in group of component and then position the whole group in the viewport\r\n * @param {module:zrender/group/Group} group\r\n * @param {module:echarts/model/Component} componentModel\r\n * @param {module:echarts/ExtensionAPI}\r\n */\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  });\n  // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n  return rect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as textContain from 'zrender/lib/contain/text.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enterEmphasis, leaveEmphasis } from '../../util/states.js';\nimport Model from '../../model/Model.js';\nimport DataDiffer from '../../data/DataDiffer.js';\nimport * as listComponentHelper from '../helper/listComponent.js';\nimport ComponentView from '../../view/Component.js';\nimport { ToolboxFeature, getFeature } from './featureManager.js';\nimport { getUID } from '../../util/component.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getFont } from '../../label/labelStyle.js';\nvar ToolboxView = /** @class */function (_super) {\n  __extends(ToolboxView, _super);\n  function ToolboxView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  ToolboxView.prototype.render = function (toolboxModel, ecModel, api, payload) {\n    var group = this.group;\n    group.removeAll();\n    if (!toolboxModel.get('show')) {\n      return;\n    }\n    var itemSize = +toolboxModel.get('itemSize');\n    var isVertical = toolboxModel.get('orient') === 'vertical';\n    var featureOpts = toolboxModel.get('feature') || {};\n    var features = this._features || (this._features = {});\n    var featureNames = [];\n    zrUtil.each(featureOpts, function (opt, name) {\n      featureNames.push(name);\n    });\n    new DataDiffer(this._featureNames || [], featureNames).add(processFeature).update(processFeature).remove(zrUtil.curry(processFeature, null)).execute();\n    // Keep for diff.\n    this._featureNames = featureNames;\n    function processFeature(newIndex, oldIndex) {\n      var featureName = featureNames[newIndex];\n      var oldName = featureNames[oldIndex];\n      var featureOpt = featureOpts[featureName];\n      var featureModel = new Model(featureOpt, toolboxModel, toolboxModel.ecModel);\n      var feature;\n      // FIX#11236, merge feature title from MagicType newOption. TODO: consider seriesIndex ?\n      if (payload && payload.newTitle != null && payload.featureName === featureName) {\n        featureOpt.title = payload.newTitle;\n      }\n      if (featureName && !oldName) {\n        // Create\n        if (isUserFeatureName(featureName)) {\n          feature = {\n            onclick: featureModel.option.onclick,\n            featureName: featureName\n          };\n        } else {\n          var Feature = getFeature(featureName);\n          if (!Feature) {\n            return;\n          }\n          feature = new Feature();\n        }\n        features[featureName] = feature;\n      } else {\n        feature = features[oldName];\n        // If feature does not exist.\n        if (!feature) {\n          return;\n        }\n      }\n      feature.uid = getUID('toolbox-feature');\n      feature.model = featureModel;\n      feature.ecModel = ecModel;\n      feature.api = api;\n      var isToolboxFeature = feature instanceof ToolboxFeature;\n      if (!featureName && oldName) {\n        isToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n        return;\n      }\n      if (!featureModel.get('show') || isToolboxFeature && feature.unusable) {\n        isToolboxFeature && feature.remove && feature.remove(ecModel, api);\n        return;\n      }\n      createIconPaths(featureModel, feature, featureName);\n      featureModel.setIconStatus = function (iconName, status) {\n        var option = this.option;\n        var iconPaths = this.iconPaths;\n        option.iconStatus = option.iconStatus || {};\n        option.iconStatus[iconName] = status;\n        if (iconPaths[iconName]) {\n          (status === 'emphasis' ? enterEmphasis : leaveEmphasis)(iconPaths[iconName]);\n        }\n      };\n      if (feature instanceof ToolboxFeature) {\n        if (feature.render) {\n          feature.render(featureModel, ecModel, api, payload);\n        }\n      }\n    }\n    function createIconPaths(featureModel, feature, featureName) {\n      var iconStyleModel = featureModel.getModel('iconStyle');\n      var iconStyleEmphasisModel = featureModel.getModel(['emphasis', 'iconStyle']);\n      // If one feature has multiple icons, they are organized as\n      // {\n      //     icon: {\n      //         foo: '',\n      //         bar: ''\n      //     },\n      //     title: {\n      //         foo: '',\n      //         bar: ''\n      //     }\n      // }\n      var icons = feature instanceof ToolboxFeature && feature.getIcons ? feature.getIcons() : featureModel.get('icon');\n      var titles = featureModel.get('title') || {};\n      var iconsMap;\n      var titlesMap;\n      if (zrUtil.isString(icons)) {\n        iconsMap = {};\n        iconsMap[featureName] = icons;\n      } else {\n        iconsMap = icons;\n      }\n      if (zrUtil.isString(titles)) {\n        titlesMap = {};\n        titlesMap[featureName] = titles;\n      } else {\n        titlesMap = titles;\n      }\n      var iconPaths = featureModel.iconPaths = {};\n      zrUtil.each(iconsMap, function (iconStr, iconName) {\n        var path = graphic.createIcon(iconStr, {}, {\n          x: -itemSize / 2,\n          y: -itemSize / 2,\n          width: itemSize,\n          height: itemSize\n        }); // TODO handling image\n        path.setStyle(iconStyleModel.getItemStyle());\n        var pathEmphasisState = path.ensureState('emphasis');\n        pathEmphasisState.style = iconStyleEmphasisModel.getItemStyle();\n        // Text position calculation\n        // TODO: extract `textStyle` from `iconStyle` and use `createTextStyle`\n        var textContent = new ZRText({\n          style: {\n            text: titlesMap[iconName],\n            align: iconStyleEmphasisModel.get('textAlign'),\n            borderRadius: iconStyleEmphasisModel.get('textBorderRadius'),\n            padding: iconStyleEmphasisModel.get('textPadding'),\n            fill: null,\n            font: getFont({\n              fontStyle: iconStyleEmphasisModel.get('textFontStyle'),\n              fontFamily: iconStyleEmphasisModel.get('textFontFamily'),\n              fontSize: iconStyleEmphasisModel.get('textFontSize'),\n              fontWeight: iconStyleEmphasisModel.get('textFontWeight')\n            }, ecModel)\n          },\n          ignore: true\n        });\n        path.setTextContent(textContent);\n        graphic.setTooltipConfig({\n          el: path,\n          componentModel: toolboxModel,\n          itemName: iconName,\n          formatterParamsExtra: {\n            title: titlesMap[iconName]\n          }\n        });\n        path.__title = titlesMap[iconName];\n        path.on('mouseover', function () {\n          // Should not reuse above hoverStyle, which might be modified.\n          var hoverStyle = iconStyleEmphasisModel.getItemStyle();\n          var defaultTextPosition = isVertical ? toolboxModel.get('right') == null && toolboxModel.get('left') !== 'right' ? 'right' : 'left' : toolboxModel.get('bottom') == null && toolboxModel.get('top') !== 'bottom' ? 'bottom' : 'top';\n          textContent.setStyle({\n            fill: iconStyleEmphasisModel.get('textFill') || hoverStyle.fill || hoverStyle.stroke || '#000',\n            backgroundColor: iconStyleEmphasisModel.get('textBackgroundColor')\n          });\n          path.setTextConfig({\n            position: iconStyleEmphasisModel.get('textPosition') || defaultTextPosition\n          });\n          textContent.ignore = !toolboxModel.get('showTitle');\n          // Use enterEmphasis and leaveEmphasis provide by ec.\n          // There are flags managed by the echarts.\n          api.enterEmphasis(this);\n        }).on('mouseout', function () {\n          if (featureModel.get(['iconStatus', iconName]) !== 'emphasis') {\n            api.leaveEmphasis(this);\n          }\n          textContent.hide();\n        });\n        (featureModel.get(['iconStatus', iconName]) === 'emphasis' ? enterEmphasis : leaveEmphasis)(path);\n        group.add(path);\n        path.on('click', zrUtil.bind(feature.onclick, feature, ecModel, api, iconName));\n        iconPaths[iconName] = path;\n      });\n    }\n    listComponentHelper.layout(group, toolboxModel, api);\n    // Render background after group is layout\n    // FIXME\n    group.add(listComponentHelper.makeBackground(group.getBoundingRect(), toolboxModel));\n    // Adjust icon title positions to avoid them out of screen\n    isVertical || group.eachChild(function (icon) {\n      var titleText = icon.__title;\n      // const hoverStyle = icon.hoverStyle;\n      // TODO simplify code?\n      var emphasisState = icon.ensureState('emphasis');\n      var emphasisTextConfig = emphasisState.textConfig || (emphasisState.textConfig = {});\n      var textContent = icon.getTextContent();\n      var emphasisTextState = textContent && textContent.ensureState('emphasis');\n      // May be background element\n      if (emphasisTextState && !zrUtil.isFunction(emphasisTextState) && titleText) {\n        var emphasisTextStyle = emphasisTextState.style || (emphasisTextState.style = {});\n        var rect = textContain.getBoundingRect(titleText, ZRText.makeFont(emphasisTextStyle));\n        var offsetX = icon.x + group.x;\n        var offsetY = icon.y + group.y + itemSize;\n        var needPutOnTop = false;\n        if (offsetY + rect.height > api.getHeight()) {\n          emphasisTextConfig.position = 'top';\n          needPutOnTop = true;\n        }\n        var topOffset = needPutOnTop ? -5 - rect.height : itemSize + 10;\n        if (offsetX + rect.width / 2 > api.getWidth()) {\n          emphasisTextConfig.position = ['100%', topOffset];\n          emphasisTextStyle.align = 'right';\n        } else if (offsetX - rect.width / 2 < 0) {\n          emphasisTextConfig.position = [0, topOffset];\n          emphasisTextStyle.align = 'left';\n        }\n      }\n    });\n  };\n  ToolboxView.prototype.updateView = function (toolboxModel, ecModel, api, payload) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.updateView && feature.updateView(feature.model, ecModel, api, payload);\n    });\n  };\n  // updateLayout(toolboxModel, ecModel, api, payload) {\n  //     zrUtil.each(this._features, function (feature) {\n  //         feature.updateLayout && feature.updateLayout(feature.model, ecModel, api, payload);\n  //     });\n  // },\n  ToolboxView.prototype.remove = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.remove && feature.remove(ecModel, api);\n    });\n    this.group.removeAll();\n  };\n  ToolboxView.prototype.dispose = function (ecModel, api) {\n    zrUtil.each(this._features, function (feature) {\n      feature instanceof ToolboxFeature && feature.dispose && feature.dispose(ecModel, api);\n    });\n  };\n  ToolboxView.type = 'toolbox';\n  return ToolboxView;\n}(ComponentView);\nfunction isUserFeatureName(featureName) {\n  return featureName.indexOf('my') === 0;\n}\nexport default ToolboxView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global window, Uint8Array, document */\nimport env from 'zrender/lib/core/env.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar SaveAsImage = /** @class */function (_super) {\n  __extends(SaveAsImage, _super);\n  function SaveAsImage() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  SaveAsImage.prototype.onclick = function (ecModel, api) {\n    var model = this.model;\n    var title = model.get('name') || ecModel.get('title.0.text') || 'echarts';\n    var isSvg = api.getZr().painter.getType() === 'svg';\n    var type = isSvg ? 'svg' : model.get('type', true) || 'png';\n    var url = api.getConnectedDataURL({\n      type: type,\n      backgroundColor: model.get('backgroundColor', true) || ecModel.get('backgroundColor') || '#fff',\n      connectedBackgroundColor: model.get('connectedBackgroundColor'),\n      excludeComponents: model.get('excludeComponents'),\n      pixelRatio: model.get('pixelRatio')\n    });\n    var browser = env.browser;\n    // Chrome, Firefox, New Edge\n    if (typeof MouseEvent === 'function' && (browser.newEdge || !browser.ie && !browser.edge)) {\n      var $a = document.createElement('a');\n      $a.download = title + '.' + type;\n      $a.target = '_blank';\n      $a.href = url;\n      var evt = new MouseEvent('click', {\n        // some micro front-end framework window maybe is a Proxy\n        view: document.defaultView,\n        bubbles: true,\n        cancelable: false\n      });\n      $a.dispatchEvent(evt);\n    }\n    // IE or old Edge\n    else {\n      // @ts-ignore\n      if (window.navigator.msSaveOrOpenBlob || isSvg) {\n        var parts = url.split(',');\n        // data:[<mime type>][;charset=<charset>][;base64],<encoded data>\n        var base64Encoded = parts[0].indexOf('base64') > -1;\n        var bstr = isSvg\n        // should decode the svg data uri first\n        ? decodeURIComponent(parts[1]) : parts[1];\n        // only `atob` when the data uri is encoded with base64\n        // otherwise, like `svg` data uri exported by zrender,\n        // there will be an error, for it's not encoded with base64.\n        // (just a url-encoded string through `encodeURIComponent`)\n        base64Encoded && (bstr = window.atob(bstr));\n        var filename = title + '.' + type;\n        // @ts-ignore\n        if (window.navigator.msSaveOrOpenBlob) {\n          var n = bstr.length;\n          var u8arr = new Uint8Array(n);\n          while (n--) {\n            u8arr[n] = bstr.charCodeAt(n);\n          }\n          var blob = new Blob([u8arr]); // @ts-ignore\n          window.navigator.msSaveOrOpenBlob(blob, filename);\n        } else {\n          var frame = document.createElement('iframe');\n          document.body.appendChild(frame);\n          var cw = frame.contentWindow;\n          var doc = cw.document;\n          doc.open('image/svg+xml', 'replace');\n          doc.write(bstr);\n          doc.close();\n          cw.focus();\n          doc.execCommand('SaveAs', true, filename);\n          document.body.removeChild(frame);\n        }\n      } else {\n        var lang = model.get('lang');\n        var html = '' + '<body style=\"margin:0;\">' + '<img src=\"' + url + '\" style=\"max-width:100%;\" title=\"' + (lang && lang[0] || '') + '\" />' + '</body>';\n        var tab = window.open();\n        tab.document.write(html);\n        tab.document.title = title;\n      }\n    }\n  };\n  SaveAsImage.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      icon: 'M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0',\n      title: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'title']),\n      type: 'png',\n      // Default use option.backgroundColor\n      // backgroundColor: '#fff',\n      connectedBackgroundColor: '#fff',\n      name: '',\n      excludeComponents: ['toolbox'],\n      // use current pixel ratio of device by default\n      // pixelRatio: 1,\n      lang: ecModel.getLocaleModel().get(['toolbox', 'saveAsImage', 'lang'])\n    };\n    return defaultOption;\n  };\n  return SaveAsImage;\n}(ToolboxFeature);\nexport default SaveAsImage;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { SINGLE_REFERRING } from '../../../util/model.js';\nvar INNER_STACK_KEYWORD = '__ec_magicType_stack__';\nvar ICON_TYPES = ['line', 'bar', 'stack'];\n// stack and tiled appears in pair for the title\nvar TITLE_TYPES = ['line', 'bar', 'stack', 'tiled'];\nvar radioTypes = [['line', 'bar'], ['stack']];\nvar MagicType = /** @class */function (_super) {\n  __extends(MagicType, _super);\n  function MagicType() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  MagicType.prototype.getIcons = function () {\n    var model = this.model;\n    var availableIcons = model.get('icon');\n    var icons = {};\n    zrUtil.each(model.get('type'), function (type) {\n      if (availableIcons[type]) {\n        icons[type] = availableIcons[type];\n      }\n    });\n    return icons;\n  };\n  MagicType.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      type: [],\n      // Icon group\n      icon: {\n        line: 'M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4',\n        bar: 'M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7',\n        // eslint-disable-next-line\n        stack: 'M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z' // jshint ignore:line\n      },\n      // `line`, `bar`, `stack`, `tiled`\n      title: ecModel.getLocaleModel().get(['toolbox', 'magicType', 'title']),\n      option: {},\n      seriesIndex: {}\n    };\n    return defaultOption;\n  };\n  MagicType.prototype.onclick = function (ecModel, api, type) {\n    var model = this.model;\n    var seriesIndex = model.get(['seriesIndex', type]);\n    // Not supported magicType\n    if (!seriesOptGenreator[type]) {\n      return;\n    }\n    var newOption = {\n      series: []\n    };\n    var generateNewSeriesTypes = function (seriesModel) {\n      var seriesType = seriesModel.subType;\n      var seriesId = seriesModel.id;\n      var newSeriesOpt = seriesOptGenreator[type](seriesType, seriesId, seriesModel, model);\n      if (newSeriesOpt) {\n        // PENDING If merge original option?\n        zrUtil.defaults(newSeriesOpt, seriesModel.option);\n        newOption.series.push(newSeriesOpt);\n      }\n      // Modify boundaryGap\n      var coordSys = seriesModel.coordinateSystem;\n      if (coordSys && coordSys.type === 'cartesian2d' && (type === 'line' || type === 'bar')) {\n        var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n        if (categoryAxis) {\n          var axisDim = categoryAxis.dim;\n          var axisType = axisDim + 'Axis';\n          var axisModel = seriesModel.getReferringComponents(axisType, SINGLE_REFERRING).models[0];\n          var axisIndex = axisModel.componentIndex;\n          newOption[axisType] = newOption[axisType] || [];\n          for (var i = 0; i <= axisIndex; i++) {\n            newOption[axisType][axisIndex] = newOption[axisType][axisIndex] || {};\n          }\n          newOption[axisType][axisIndex].boundaryGap = type === 'bar';\n        }\n      }\n    };\n    zrUtil.each(radioTypes, function (radio) {\n      if (zrUtil.indexOf(radio, type) >= 0) {\n        zrUtil.each(radio, function (item) {\n          model.setIconStatus(item, 'normal');\n        });\n      }\n    });\n    model.setIconStatus(type, 'emphasis');\n    ecModel.eachComponent({\n      mainType: 'series',\n      query: seriesIndex == null ? null : {\n        seriesIndex: seriesIndex\n      }\n    }, generateNewSeriesTypes);\n    var newTitle;\n    var currentType = type;\n    // Change title of stack\n    if (type === 'stack') {\n      // use titles in model instead of ecModel\n      // as stack and tiled appears in pair, just flip them\n      // no need of checking stack state\n      newTitle = zrUtil.merge({\n        stack: model.option.title.tiled,\n        tiled: model.option.title.stack\n      }, model.option.title);\n      if (model.get(['iconStatus', type]) !== 'emphasis') {\n        currentType = 'tiled';\n      }\n    }\n    api.dispatchAction({\n      type: 'changeMagicType',\n      currentType: currentType,\n      newOption: newOption,\n      newTitle: newTitle,\n      featureName: 'magicType'\n    });\n  };\n  return MagicType;\n}(ToolboxFeature);\nvar seriesOptGenreator = {\n  'line': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'bar') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'line',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'line']) || {}, true);\n    }\n  },\n  'bar': function (seriesType, seriesId, seriesModel, model) {\n    if (seriesType === 'line') {\n      return zrUtil.merge({\n        id: seriesId,\n        type: 'bar',\n        // Preserve data related option\n        data: seriesModel.get('data'),\n        stack: seriesModel.get('stack'),\n        markPoint: seriesModel.get('markPoint'),\n        markLine: seriesModel.get('markLine')\n      }, model.get(['option', 'bar']) || {}, true);\n    }\n  },\n  'stack': function (seriesType, seriesId, seriesModel, model) {\n    var isStack = seriesModel.get('stack') === INNER_STACK_KEYWORD;\n    if (seriesType === 'line' || seriesType === 'bar') {\n      model.setIconStatus('stack', isStack ? 'normal' : 'emphasis');\n      return zrUtil.merge({\n        id: seriesId,\n        stack: isStack ? '' : INNER_STACK_KEYWORD\n      }, model.get(['option', 'stack']) || {}, true);\n    }\n  }\n};\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeMagicType',\n  event: 'magicTypeChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.mergeOption(payload.newOption);\n});\nexport default MagicType;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/* global document */\nimport * as echarts from '../../../core/echarts.js';\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { addEventListener } from 'zrender/lib/core/event.js';\nimport { warn } from '../../../util/log.js';\n/* global document */\nvar BLOCK_SPLITER = new Array(60).join('-');\nvar ITEM_SPLITER = '\\t';\n/**\r\n * Group series into two types\r\n *  1. on category axis, like line, bar\r\n *  2. others, like scatter, pie\r\n */\nfunction groupSeries(ecModel) {\n  var seriesGroupByCategoryAxis = {};\n  var otherSeries = [];\n  var meta = [];\n  ecModel.eachRawSeries(function (seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    if (coordSys && (coordSys.type === 'cartesian2d' || coordSys.type === 'polar')) {\n      // TODO: TYPE Consider polar? Include polar may increase unecessary bundle size.\n      var baseAxis = coordSys.getBaseAxis();\n      if (baseAxis.type === 'category') {\n        var key = baseAxis.dim + '_' + baseAxis.index;\n        if (!seriesGroupByCategoryAxis[key]) {\n          seriesGroupByCategoryAxis[key] = {\n            categoryAxis: baseAxis,\n            valueAxis: coordSys.getOtherAxis(baseAxis),\n            series: []\n          };\n          meta.push({\n            axisDim: baseAxis.dim,\n            axisIndex: baseAxis.index\n          });\n        }\n        seriesGroupByCategoryAxis[key].series.push(seriesModel);\n      } else {\n        otherSeries.push(seriesModel);\n      }\n    } else {\n      otherSeries.push(seriesModel);\n    }\n  });\n  return {\n    seriesGroupByCategoryAxis: seriesGroupByCategoryAxis,\n    other: otherSeries,\n    meta: meta\n  };\n}\n/**\r\n * Assemble content of series on cateogory axis\r\n * @inner\r\n */\nfunction assembleSeriesWithCategoryAxis(groups) {\n  var tables = [];\n  zrUtil.each(groups, function (group, key) {\n    var categoryAxis = group.categoryAxis;\n    var valueAxis = group.valueAxis;\n    var valueAxisDim = valueAxis.dim;\n    var headers = [' '].concat(zrUtil.map(group.series, function (series) {\n      return series.name;\n    }));\n    // @ts-ignore TODO Polar\n    var columns = [categoryAxis.model.getCategories()];\n    zrUtil.each(group.series, function (series) {\n      var rawData = series.getRawData();\n      columns.push(series.getRawData().mapArray(rawData.mapDimension(valueAxisDim), function (val) {\n        return val;\n      }));\n    });\n    // Assemble table content\n    var lines = [headers.join(ITEM_SPLITER)];\n    for (var i = 0; i < columns[0].length; i++) {\n      var items = [];\n      for (var j = 0; j < columns.length; j++) {\n        items.push(columns[j][i]);\n      }\n      lines.push(items.join(ITEM_SPLITER));\n    }\n    tables.push(lines.join('\\n'));\n  });\n  return tables.join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\n/**\r\n * Assemble content of other series\r\n */\nfunction assembleOtherSeries(series) {\n  return zrUtil.map(series, function (series) {\n    var data = series.getRawData();\n    var lines = [series.name];\n    var vals = [];\n    data.each(data.dimensions, function () {\n      var argLen = arguments.length;\n      var dataIndex = arguments[argLen - 1];\n      var name = data.getName(dataIndex);\n      for (var i = 0; i < argLen - 1; i++) {\n        vals[i] = arguments[i];\n      }\n      lines.push((name ? name + ITEM_SPLITER : '') + vals.join(ITEM_SPLITER));\n    });\n    return lines.join('\\n');\n  }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n');\n}\nfunction getContentFromModel(ecModel) {\n  var result = groupSeries(ecModel);\n  return {\n    value: zrUtil.filter([assembleSeriesWithCategoryAxis(result.seriesGroupByCategoryAxis), assembleOtherSeries(result.other)], function (str) {\n      return !!str.replace(/[\\n\\t\\s]/g, '');\n    }).join('\\n\\n' + BLOCK_SPLITER + '\\n\\n'),\n    meta: result.meta\n  };\n}\nfunction trim(str) {\n  return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n}\n/**\r\n * If a block is tsv format\r\n */\nfunction isTSVFormat(block) {\n  // Simple method to find out if a block is tsv format\n  var firstLine = block.slice(0, block.indexOf('\\n'));\n  if (firstLine.indexOf(ITEM_SPLITER) >= 0) {\n    return true;\n  }\n}\nvar itemSplitRegex = new RegExp('[' + ITEM_SPLITER + ']+', 'g');\n/**\r\n * @param {string} tsv\r\n * @return {Object}\r\n */\nfunction parseTSVContents(tsv) {\n  var tsvLines = tsv.split(/\\n+/g);\n  var headers = trim(tsvLines.shift()).split(itemSplitRegex);\n  var categories = [];\n  var series = zrUtil.map(headers, function (header) {\n    return {\n      name: header,\n      data: []\n    };\n  });\n  for (var i = 0; i < tsvLines.length; i++) {\n    var items = trim(tsvLines[i]).split(itemSplitRegex);\n    categories.push(items.shift());\n    for (var j = 0; j < items.length; j++) {\n      series[j] && (series[j].data[i] = items[j]);\n    }\n  }\n  return {\n    series: series,\n    categories: categories\n  };\n}\nfunction parseListContents(str) {\n  var lines = str.split(/\\n+/g);\n  var seriesName = trim(lines.shift());\n  var data = [];\n  for (var i = 0; i < lines.length; i++) {\n    // if line is empty, ignore it.\n    // there is a case that a user forgot to delete `\\n`.\n    var line = trim(lines[i]);\n    if (!line) {\n      continue;\n    }\n    var items = line.split(itemSplitRegex);\n    var name_1 = '';\n    var value = void 0;\n    var hasName = false;\n    if (isNaN(items[0])) {\n      // First item is name\n      hasName = true;\n      name_1 = items[0];\n      items = items.slice(1);\n      data[i] = {\n        name: name_1,\n        value: []\n      };\n      value = data[i].value;\n    } else {\n      value = data[i] = [];\n    }\n    for (var j = 0; j < items.length; j++) {\n      value.push(+items[j]);\n    }\n    if (value.length === 1) {\n      hasName ? data[i].value = value[0] : data[i] = value[0];\n    }\n  }\n  return {\n    name: seriesName,\n    data: data\n  };\n}\nfunction parseContents(str, blockMetaList) {\n  var blocks = str.split(new RegExp('\\n*' + BLOCK_SPLITER + '\\n*', 'g'));\n  var newOption = {\n    series: []\n  };\n  zrUtil.each(blocks, function (block, idx) {\n    if (isTSVFormat(block)) {\n      var result = parseTSVContents(block);\n      var blockMeta = blockMetaList[idx];\n      var axisKey = blockMeta.axisDim + 'Axis';\n      if (blockMeta) {\n        newOption[axisKey] = newOption[axisKey] || [];\n        newOption[axisKey][blockMeta.axisIndex] = {\n          data: result.categories\n        };\n        newOption.series = newOption.series.concat(result.series);\n      }\n    } else {\n      var result = parseListContents(block);\n      newOption.series.push(result);\n    }\n  });\n  return newOption;\n}\nvar DataView = /** @class */function (_super) {\n  __extends(DataView, _super);\n  function DataView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataView.prototype.onclick = function (ecModel, api) {\n    // FIXME: better way?\n    setTimeout(function () {\n      api.dispatchAction({\n        type: 'hideTip'\n      });\n    });\n    var container = api.getDom();\n    var model = this.model;\n    if (this._dom) {\n      container.removeChild(this._dom);\n    }\n    var root = document.createElement('div');\n    // use padding to avoid 5px whitespace\n    root.style.cssText = 'position:absolute;top:0;bottom:0;left:0;right:0;padding:5px';\n    root.style.backgroundColor = model.get('backgroundColor') || '#fff';\n    // Create elements\n    var header = document.createElement('h4');\n    var lang = model.get('lang') || [];\n    header.innerHTML = lang[0] || model.get('title');\n    header.style.cssText = 'margin:10px 20px';\n    header.style.color = model.get('textColor');\n    var viewMain = document.createElement('div');\n    var textarea = document.createElement('textarea');\n    viewMain.style.cssText = 'overflow:auto';\n    var optionToContent = model.get('optionToContent');\n    var contentToOption = model.get('contentToOption');\n    var result = getContentFromModel(ecModel);\n    if (zrUtil.isFunction(optionToContent)) {\n      var htmlOrDom = optionToContent(api.getOption());\n      if (zrUtil.isString(htmlOrDom)) {\n        viewMain.innerHTML = htmlOrDom;\n      } else if (zrUtil.isDom(htmlOrDom)) {\n        viewMain.appendChild(htmlOrDom);\n      }\n    } else {\n      // Use default textarea\n      textarea.readOnly = model.get('readOnly');\n      var style = textarea.style;\n      // eslint-disable-next-line max-len\n      style.cssText = 'display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none';\n      style.color = model.get('textColor');\n      style.borderColor = model.get('textareaBorderColor');\n      style.backgroundColor = model.get('textareaColor');\n      textarea.value = result.value;\n      viewMain.appendChild(textarea);\n    }\n    var blockMetaList = result.meta;\n    var buttonContainer = document.createElement('div');\n    buttonContainer.style.cssText = 'position:absolute;bottom:5px;left:0;right:0';\n    // eslint-disable-next-line max-len\n    var buttonStyle = 'float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px';\n    var closeButton = document.createElement('div');\n    var refreshButton = document.createElement('div');\n    buttonStyle += ';background-color:' + model.get('buttonColor');\n    buttonStyle += ';color:' + model.get('buttonTextColor');\n    var self = this;\n    function close() {\n      container.removeChild(root);\n      self._dom = null;\n    }\n    addEventListener(closeButton, 'click', close);\n    addEventListener(refreshButton, 'click', function () {\n      if (contentToOption == null && optionToContent != null || contentToOption != null && optionToContent == null) {\n        if (process.env.NODE_ENV !== 'production') {\n          // eslint-disable-next-line\n          warn('It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored.');\n        }\n        close();\n        return;\n      }\n      var newOption;\n      try {\n        if (zrUtil.isFunction(contentToOption)) {\n          newOption = contentToOption(viewMain, api.getOption());\n        } else {\n          newOption = parseContents(textarea.value, blockMetaList);\n        }\n      } catch (e) {\n        close();\n        throw new Error('Data view format error ' + e);\n      }\n      if (newOption) {\n        api.dispatchAction({\n          type: 'changeDataView',\n          newOption: newOption\n        });\n      }\n      close();\n    });\n    closeButton.innerHTML = lang[1];\n    refreshButton.innerHTML = lang[2];\n    refreshButton.style.cssText = closeButton.style.cssText = buttonStyle;\n    !model.get('readOnly') && buttonContainer.appendChild(refreshButton);\n    buttonContainer.appendChild(closeButton);\n    root.appendChild(header);\n    root.appendChild(viewMain);\n    root.appendChild(buttonContainer);\n    viewMain.style.height = container.clientHeight - 80 + 'px';\n    container.appendChild(root);\n    this._dom = root;\n  };\n  DataView.prototype.remove = function (ecModel, api) {\n    this._dom && api.getDom().removeChild(this._dom);\n  };\n  DataView.prototype.dispose = function (ecModel, api) {\n    this.remove(ecModel, api);\n  };\n  DataView.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      readOnly: false,\n      optionToContent: null,\n      contentToOption: null,\n      // eslint-disable-next-line\n      icon: 'M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28',\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'title']),\n      lang: ecModel.getLocaleModel().get(['toolbox', 'dataView', 'lang']),\n      backgroundColor: '#fff',\n      textColor: '#000',\n      textareaColor: '#fff',\n      textareaBorderColor: '#333',\n      buttonColor: '#c23531',\n      buttonTextColor: '#fff'\n    };\n    return defaultOption;\n  };\n  return DataView;\n}(ToolboxFeature);\n/**\r\n * @inner\r\n */\nfunction tryMergeDataOption(newData, originalData) {\n  return zrUtil.map(newData, function (newVal, idx) {\n    var original = originalData && originalData[idx];\n    if (zrUtil.isObject(original) && !zrUtil.isArray(original)) {\n      var newValIsObject = zrUtil.isObject(newVal) && !zrUtil.isArray(newVal);\n      if (!newValIsObject) {\n        newVal = {\n          value: newVal\n        };\n      }\n      // original data has name but new data has no name\n      var shouldDeleteName = original.name != null && newVal.name == null;\n      // Original data has option\n      newVal = zrUtil.defaults(newVal, original);\n      shouldDeleteName && delete newVal.name;\n      return newVal;\n    } else {\n      return newVal;\n    }\n  });\n}\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'changeDataView',\n  event: 'dataViewChanged',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  var newSeriesOptList = [];\n  zrUtil.each(payload.newOption.series, function (seriesOpt) {\n    var seriesModel = ecModel.getSeriesByName(seriesOpt.name)[0];\n    if (!seriesModel) {\n      // New created series\n      // Geuss the series type\n      newSeriesOptList.push(zrUtil.extend({\n        // Default is scatter\n        type: 'scatter'\n      }, seriesOpt));\n    } else {\n      var originalData = seriesModel.get('data');\n      newSeriesOptList.push({\n        name: seriesOpt.name,\n        data: tryMergeDataOption(seriesOpt.data, originalData)\n      });\n    }\n  });\n  ecModel.mergeOption(zrUtil.defaults({\n    series: newSeriesOptList\n  }, payload.newOption));\n});\nexport default DataView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { makeInner } from '../../util/model.js';\nvar each = zrUtil.each;\nvar inner = makeInner();\n/**\r\n * @param ecModel\r\n * @param newSnapshot key is dataZoomId\r\n */\nexport function push(ecModel, newSnapshot) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  // If previous dataZoom can not be found,\n  // complete an range with current range.\n  each(newSnapshot, function (batchItem, dataZoomId) {\n    var i = storedSnapshots.length - 1;\n    for (; i >= 0; i--) {\n      var snapshot = storedSnapshots[i];\n      if (snapshot[dataZoomId]) {\n        break;\n      }\n    }\n    if (i < 0) {\n      // No origin range set, create one by current range.\n      var dataZoomModel = ecModel.queryComponents({\n        mainType: 'dataZoom',\n        subType: 'select',\n        id: dataZoomId\n      })[0];\n      if (dataZoomModel) {\n        var percentRange = dataZoomModel.getPercentRange();\n        storedSnapshots[0][dataZoomId] = {\n          dataZoomId: dataZoomId,\n          start: percentRange[0],\n          end: percentRange[1]\n        };\n      }\n    }\n  });\n  storedSnapshots.push(newSnapshot);\n}\nexport function pop(ecModel) {\n  var storedSnapshots = getStoreSnapshots(ecModel);\n  var head = storedSnapshots[storedSnapshots.length - 1];\n  storedSnapshots.length > 1 && storedSnapshots.pop();\n  // Find top for all dataZoom.\n  var snapshot = {};\n  each(head, function (batchItem, dataZoomId) {\n    for (var i = storedSnapshots.length - 1; i >= 0; i--) {\n      batchItem = storedSnapshots[i][dataZoomId];\n      if (batchItem) {\n        snapshot[dataZoomId] = batchItem;\n        break;\n      }\n    }\n  });\n  return snapshot;\n}\nexport function clear(ecModel) {\n  inner(ecModel).snapshots = null;\n}\nexport function count(ecModel) {\n  return getStoreSnapshots(ecModel).length;\n}\n/**\r\n * History length of each dataZoom may be different.\r\n * this._history[0] is used to store origin range.\r\n */\nfunction getStoreSnapshots(ecModel) {\n  var store = inner(ecModel);\n  if (!store.snapshots) {\n    store.snapshots = [{}];\n  }\n  return store.snapshots;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as echarts from '../../../core/echarts.js';\nimport * as history from '../../dataZoom/history.js';\nimport { ToolboxFeature } from '../featureManager.js';\nvar RestoreOption = /** @class */function (_super) {\n  __extends(RestoreOption, _super);\n  function RestoreOption() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RestoreOption.prototype.onclick = function (ecModel, api) {\n    history.clear(ecModel);\n    api.dispatchAction({\n      type: 'restore',\n      from: this.uid\n    });\n  };\n  RestoreOption.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      // eslint-disable-next-line\n      icon: 'M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5',\n      title: ecModel.getLocaleModel().get(['toolbox', 'restore', 'title'])\n    };\n    return defaultOption;\n  };\n  return RestoreOption;\n}(ToolboxFeature);\n// TODO: SELF REGISTERED.\necharts.registerAction({\n  type: 'restore',\n  event: 'restore',\n  update: 'prepareAndUpdate'\n}, function (payload, ecModel) {\n  ecModel.resetOption('recreate');\n});\nexport default RestoreOption;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { each, indexOf, curry, assert, map, createHashMap } from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as brushHelper from './brushHelper.js';\nimport { parseFinder as modelUtilParseFinder } from '../../util/model.js';\n// FIXME\n// how to genarialize to more coordinate systems.\nvar INCLUDE_FINDER_MAIN_TYPES = ['grid', 'xAxis', 'yAxis', 'geo', 'graph', 'polar', 'radiusAxis', 'angleAxis', 'bmap'];\nvar BrushTargetManager = /** @class */function () {\n  /**\r\n   * @param finder contains Index/Id/Name of xAxis/yAxis/geo/grid\r\n   *        Each can be {number|Array.<number>}. like: {xAxisIndex: [3, 4]}\r\n   * @param opt.include include coordinate system types.\r\n   */\n  function BrushTargetManager(finder, ecModel, opt) {\n    var _this = this;\n    this._targetInfoList = [];\n    var foundCpts = parseFinder(ecModel, finder);\n    each(targetInfoBuilders, function (builder, type) {\n      if (!opt || !opt.include || indexOf(opt.include, type) >= 0) {\n        builder(foundCpts, _this._targetInfoList);\n      }\n    });\n  }\n  BrushTargetManager.prototype.setOutputRanges = function (areas, ecModel) {\n    this.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      (area.coordRanges || (area.coordRanges = [])).push(coordRange);\n      // area.coordRange is the first of area.coordRanges\n      if (!area.coordRange) {\n        area.coordRange = coordRange;\n        // In 'category' axis, coord to pixel is not reversible, so we can not\n        // rebuild range by coordRange accrately, which may bring trouble when\n        // brushing only one item. So we use __rangeOffset to rebuilding range\n        // by coordRange. And this it only used in brush component so it is no\n        // need to be adapted to coordRanges.\n        var result = coordConvert[area.brushType](0, coordSys, coordRange);\n        area.__rangeOffset = {\n          offset: diffProcessor[area.brushType](result.values, area.range, [1, 1]),\n          xyMinMax: result.xyMinMax\n        };\n      }\n    });\n    return areas;\n  };\n  BrushTargetManager.prototype.matchOutputRanges = function (areas, ecModel, cb) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (targetInfo && targetInfo !== true) {\n        each(targetInfo.coordSyses, function (coordSys) {\n          var result = coordConvert[area.brushType](1, coordSys, area.range, true);\n          cb(area, result.values, coordSys, ecModel);\n        });\n      }\n    }, this);\n  };\n  /**\r\n   * the `areas` is `BrushModel.areas`.\r\n   * Called in layout stage.\r\n   * convert `area.coordRange` to global range and set panelId to `area.range`.\r\n   */\n  BrushTargetManager.prototype.setInputRanges = function (areas, ecModel) {\n    each(areas, function (area) {\n      var targetInfo = this.findTargetInfo(area, ecModel);\n      if (process.env.NODE_ENV !== 'production') {\n        assert(!targetInfo || targetInfo === true || area.coordRange, 'coordRange must be specified when coord index specified.');\n        assert(!targetInfo || targetInfo !== true || area.range, 'range must be specified in global brush.');\n      }\n      area.range = area.range || [];\n      // convert coordRange to global range and set panelId.\n      if (targetInfo && targetInfo !== true) {\n        area.panelId = targetInfo.panelId;\n        // (1) area.range should always be calculate from coordRange but does\n        // not keep its original value, for the sake of the dataZoom scenario,\n        // where area.coordRange remains unchanged but area.range may be changed.\n        // (2) Only support converting one coordRange to pixel range in brush\n        // component. So do not consider `coordRanges`.\n        // (3) About __rangeOffset, see comment above.\n        var result = coordConvert[area.brushType](0, targetInfo.coordSys, area.coordRange);\n        var rangeOffset = area.__rangeOffset;\n        area.range = rangeOffset ? diffProcessor[area.brushType](result.values, rangeOffset.offset, getScales(result.xyMinMax, rangeOffset.xyMinMax)) : result.values;\n      }\n    }, this);\n  };\n  BrushTargetManager.prototype.makePanelOpts = function (api, getDefaultBrushType) {\n    return map(this._targetInfoList, function (targetInfo) {\n      var rect = targetInfo.getPanelRect();\n      return {\n        panelId: targetInfo.panelId,\n        defaultBrushType: getDefaultBrushType ? getDefaultBrushType(targetInfo) : null,\n        clipPath: brushHelper.makeRectPanelClipPath(rect),\n        isTargetByCursor: brushHelper.makeRectIsTargetByCursor(rect, api, targetInfo.coordSysModel),\n        getLinearBrushOtherExtent: brushHelper.makeLinearBrushOtherExtent(rect)\n      };\n    });\n  };\n  BrushTargetManager.prototype.controlSeries = function (area, seriesModel, ecModel) {\n    // Check whether area is bound in coord, and series do not belong to that coord.\n    // If do not do this check, some brush (like lineX) will controll all axes.\n    var targetInfo = this.findTargetInfo(area, ecModel);\n    return targetInfo === true || targetInfo && indexOf(targetInfo.coordSyses, seriesModel.coordinateSystem) >= 0;\n  };\n  /**\r\n   * If return Object, a coord found.\r\n   * If return true, global found.\r\n   * Otherwise nothing found.\r\n   */\n  BrushTargetManager.prototype.findTargetInfo = function (area, ecModel) {\n    var targetInfoList = this._targetInfoList;\n    var foundCpts = parseFinder(ecModel, area);\n    for (var i = 0; i < targetInfoList.length; i++) {\n      var targetInfo = targetInfoList[i];\n      var areaPanelId = area.panelId;\n      if (areaPanelId) {\n        if (targetInfo.panelId === areaPanelId) {\n          return targetInfo;\n        }\n      } else {\n        for (var j = 0; j < targetInfoMatchers.length; j++) {\n          if (targetInfoMatchers[j](foundCpts, targetInfo)) {\n            return targetInfo;\n          }\n        }\n      }\n    }\n    return true;\n  };\n  return BrushTargetManager;\n}();\nfunction formatMinMax(minMax) {\n  minMax[0] > minMax[1] && minMax.reverse();\n  return minMax;\n}\nfunction parseFinder(ecModel, finder) {\n  return modelUtilParseFinder(ecModel, finder, {\n    includeMainTypes: INCLUDE_FINDER_MAIN_TYPES\n  });\n}\nvar targetInfoBuilders = {\n  grid: function (foundCpts, targetInfoList) {\n    var xAxisModels = foundCpts.xAxisModels;\n    var yAxisModels = foundCpts.yAxisModels;\n    var gridModels = foundCpts.gridModels;\n    // Remove duplicated.\n    var gridModelMap = createHashMap();\n    var xAxesHas = {};\n    var yAxesHas = {};\n    if (!xAxisModels && !yAxisModels && !gridModels) {\n      return;\n    }\n    each(xAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n    });\n    each(yAxisModels, function (axisModel) {\n      var gridModel = axisModel.axis.grid.model;\n      gridModelMap.set(gridModel.id, gridModel);\n      yAxesHas[gridModel.id] = true;\n    });\n    each(gridModels, function (gridModel) {\n      gridModelMap.set(gridModel.id, gridModel);\n      xAxesHas[gridModel.id] = true;\n      yAxesHas[gridModel.id] = true;\n    });\n    gridModelMap.each(function (gridModel) {\n      var grid = gridModel.coordinateSystem;\n      var cartesians = [];\n      each(grid.getCartesians(), function (cartesian, index) {\n        if (indexOf(xAxisModels, cartesian.getAxis('x').model) >= 0 || indexOf(yAxisModels, cartesian.getAxis('y').model) >= 0) {\n          cartesians.push(cartesian);\n        }\n      });\n      targetInfoList.push({\n        panelId: 'grid--' + gridModel.id,\n        gridModel: gridModel,\n        coordSysModel: gridModel,\n        // Use the first one as the representitive coordSys.\n        coordSys: cartesians[0],\n        coordSyses: cartesians,\n        getPanelRect: panelRectBuilders.grid,\n        xAxisDeclared: xAxesHas[gridModel.id],\n        yAxisDeclared: yAxesHas[gridModel.id]\n      });\n    });\n  },\n  geo: function (foundCpts, targetInfoList) {\n    each(foundCpts.geoModels, function (geoModel) {\n      var coordSys = geoModel.coordinateSystem;\n      targetInfoList.push({\n        panelId: 'geo--' + geoModel.id,\n        geoModel: geoModel,\n        coordSysModel: geoModel,\n        coordSys: coordSys,\n        coordSyses: [coordSys],\n        getPanelRect: panelRectBuilders.geo\n      });\n    });\n  }\n};\nvar targetInfoMatchers = [\n// grid\nfunction (foundCpts, targetInfo) {\n  var xAxisModel = foundCpts.xAxisModel;\n  var yAxisModel = foundCpts.yAxisModel;\n  var gridModel = foundCpts.gridModel;\n  !gridModel && xAxisModel && (gridModel = xAxisModel.axis.grid.model);\n  !gridModel && yAxisModel && (gridModel = yAxisModel.axis.grid.model);\n  return gridModel && gridModel === targetInfo.gridModel;\n},\n// geo\nfunction (foundCpts, targetInfo) {\n  var geoModel = foundCpts.geoModel;\n  return geoModel && geoModel === targetInfo.geoModel;\n}];\nvar panelRectBuilders = {\n  grid: function () {\n    // grid is not Transformable.\n    return this.coordSys.master.getRect().clone();\n  },\n  geo: function () {\n    var coordSys = this.coordSys;\n    var rect = coordSys.getBoundingRect().clone();\n    // geo roam and zoom transform\n    rect.applyTransform(graphic.getTransform(coordSys));\n    return rect;\n  }\n};\nvar coordConvert = {\n  lineX: curry(axisConvert, 0),\n  lineY: curry(axisConvert, 1),\n  rect: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xminymin = to ? coordSys.pointToData([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][0], rangeOrCoordRange[1][0]], clamp);\n    var xmaxymax = to ? coordSys.pointToData([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp) : coordSys.dataToPoint([rangeOrCoordRange[0][1], rangeOrCoordRange[1][1]], clamp);\n    var values = [formatMinMax([xminymin[0], xmaxymax[0]]), formatMinMax([xminymin[1], xmaxymax[1]])];\n    return {\n      values: values,\n      xyMinMax: values\n    };\n  },\n  polygon: function (to, coordSys, rangeOrCoordRange, clamp) {\n    var xyMinMax = [[Infinity, -Infinity], [Infinity, -Infinity]];\n    var values = map(rangeOrCoordRange, function (item) {\n      var p = to ? coordSys.pointToData(item, clamp) : coordSys.dataToPoint(item, clamp);\n      xyMinMax[0][0] = Math.min(xyMinMax[0][0], p[0]);\n      xyMinMax[1][0] = Math.min(xyMinMax[1][0], p[1]);\n      xyMinMax[0][1] = Math.max(xyMinMax[0][1], p[0]);\n      xyMinMax[1][1] = Math.max(xyMinMax[1][1], p[1]);\n      return p;\n    });\n    return {\n      values: values,\n      xyMinMax: xyMinMax\n    };\n  }\n};\nfunction axisConvert(axisNameIndex, to, coordSys, rangeOrCoordRange) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(coordSys.type === 'cartesian2d', 'lineX/lineY brush is available only in cartesian2d.');\n  }\n  var axis = coordSys.getAxis(['x', 'y'][axisNameIndex]);\n  var values = formatMinMax(map([0, 1], function (i) {\n    return to ? axis.coordToData(axis.toLocalCoord(rangeOrCoordRange[i]), true) : axis.toGlobalCoord(axis.dataToCoord(rangeOrCoordRange[i]));\n  }));\n  var xyMinMax = [];\n  xyMinMax[axisNameIndex] = values;\n  xyMinMax[1 - axisNameIndex] = [NaN, NaN];\n  return {\n    values: values,\n    xyMinMax: xyMinMax\n  };\n}\nvar diffProcessor = {\n  lineX: curry(axisDiffProcessor, 0),\n  lineY: curry(axisDiffProcessor, 1),\n  rect: function (values, refer, scales) {\n    return [[values[0][0] - scales[0] * refer[0][0], values[0][1] - scales[0] * refer[0][1]], [values[1][0] - scales[1] * refer[1][0], values[1][1] - scales[1] * refer[1][1]]];\n  },\n  polygon: function (values, refer, scales) {\n    return map(values, function (item, idx) {\n      return [item[0] - scales[0] * refer[idx][0], item[1] - scales[1] * refer[idx][1]];\n    });\n  }\n};\nfunction axisDiffProcessor(axisNameIndex, values, refer, scales) {\n  return [values[0] - scales[axisNameIndex] * refer[0], values[1] - scales[axisNameIndex] * refer[1]];\n}\n// We have to process scale caused by dataZoom manually,\n// although it might be not accurate.\n// Return [0~1, 0~1]\nfunction getScales(xyMinMaxCurr, xyMinMaxOrigin) {\n  var sizeCurr = getSize(xyMinMaxCurr);\n  var sizeOrigin = getSize(xyMinMaxOrigin);\n  var scales = [sizeCurr[0] / sizeOrigin[0], sizeCurr[1] / sizeOrigin[1]];\n  isNaN(scales[0]) && (scales[0] = 1);\n  isNaN(scales[1]) && (scales[1] = 1);\n  return scales;\n}\nfunction getSize(xyMinMax) {\n  return xyMinMax ? [xyMinMax[0][1] - xyMinMax[0][0], xyMinMax[1][1] - xyMinMax[1][0]] : [NaN, NaN];\n}\nexport default BrushTargetManager;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n// TODO depends on DataZoom and Brush\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport BrushController from '../../helper/BrushController.js';\nimport BrushTargetManager from '../../helper/BrushTargetManager.js';\nimport * as history from '../../dataZoom/history.js';\nimport sliderMove from '../../helper/sliderMove.js';\nimport { ToolboxFeature } from '../featureManager.js';\nimport { makeInternalComponentId, parseFinder } from '../../../util/model.js';\nimport { registerInternalOptionCreator } from '../../../model/internalComponentCreator.js';\nvar each = zrUtil.each;\nvar DATA_ZOOM_ID_BASE = makeInternalComponentId('toolbox-dataZoom_');\nvar ICON_TYPES = ['zoom', 'back'];\nvar DataZoomFeature = /** @class */function (_super) {\n  __extends(DataZoomFeature, _super);\n  function DataZoomFeature() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  DataZoomFeature.prototype.render = function (featureModel, ecModel, api, payload) {\n    if (!this._brushController) {\n      this._brushController = new BrushController(api.getZr());\n      this._brushController.on('brush', zrUtil.bind(this._onBrush, this)).mount();\n    }\n    updateZoomBtnStatus(featureModel, ecModel, this, payload, api);\n    updateBackBtnStatus(featureModel, ecModel);\n  };\n  DataZoomFeature.prototype.onclick = function (ecModel, api, type) {\n    handlers[type].call(this);\n  };\n  DataZoomFeature.prototype.remove = function (ecModel, api) {\n    this._brushController && this._brushController.unmount();\n  };\n  DataZoomFeature.prototype.dispose = function (ecModel, api) {\n    this._brushController && this._brushController.dispose();\n  };\n  DataZoomFeature.prototype._onBrush = function (eventParam) {\n    var areas = eventParam.areas;\n    if (!eventParam.isEnd || !areas.length) {\n      return;\n    }\n    var snapshot = {};\n    var ecModel = this.ecModel;\n    this._brushController.updateCovers([]); // remove cover\n    var brushTargetManager = new BrushTargetManager(makeAxisFinder(this.model), ecModel, {\n      include: ['grid']\n    });\n    brushTargetManager.matchOutputRanges(areas, ecModel, function (area, coordRange, coordSys) {\n      if (coordSys.type !== 'cartesian2d') {\n        return;\n      }\n      var brushType = area.brushType;\n      if (brushType === 'rect') {\n        setBatch('x', coordSys, coordRange[0]);\n        setBatch('y', coordSys, coordRange[1]);\n      } else {\n        setBatch({\n          lineX: 'x',\n          lineY: 'y'\n        }[brushType], coordSys, coordRange);\n      }\n    });\n    history.push(ecModel, snapshot);\n    this._dispatchZoomAction(snapshot);\n    function setBatch(dimName, coordSys, minMax) {\n      var axis = coordSys.getAxis(dimName);\n      var axisModel = axis.model;\n      var dataZoomModel = findDataZoom(dimName, axisModel, ecModel);\n      // Restrict range.\n      var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy(axisModel).getMinMaxSpan();\n      if (minMaxSpan.minValueSpan != null || minMaxSpan.maxValueSpan != null) {\n        minMax = sliderMove(0, minMax.slice(), axis.scale.getExtent(), 0, minMaxSpan.minValueSpan, minMaxSpan.maxValueSpan);\n      }\n      dataZoomModel && (snapshot[dataZoomModel.id] = {\n        dataZoomId: dataZoomModel.id,\n        startValue: minMax[0],\n        endValue: minMax[1]\n      });\n    }\n    function findDataZoom(dimName, axisModel, ecModel) {\n      var found;\n      ecModel.eachComponent({\n        mainType: 'dataZoom',\n        subType: 'select'\n      }, function (dzModel) {\n        var has = dzModel.getAxisModel(dimName, axisModel.componentIndex);\n        has && (found = dzModel);\n      });\n      return found;\n    }\n  };\n  ;\n  DataZoomFeature.prototype._dispatchZoomAction = function (snapshot) {\n    var batch = [];\n    // Convert from hash map to array.\n    each(snapshot, function (batchItem, dataZoomId) {\n      batch.push(zrUtil.clone(batchItem));\n    });\n    batch.length && this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      batch: batch\n    });\n  };\n  DataZoomFeature.getDefaultOption = function (ecModel) {\n    var defaultOption = {\n      show: true,\n      filterMode: 'filter',\n      // Icon group\n      icon: {\n        zoom: 'M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1',\n        back: 'M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26'\n      },\n      // `zoom`, `back`\n      title: ecModel.getLocaleModel().get(['toolbox', 'dataZoom', 'title']),\n      brushStyle: {\n        borderWidth: 0,\n        color: 'rgba(210,219,238,0.2)'\n      }\n    };\n    return defaultOption;\n  };\n  return DataZoomFeature;\n}(ToolboxFeature);\nvar handlers = {\n  zoom: function () {\n    var nextActive = !this._isZoomActive;\n    this.api.dispatchAction({\n      type: 'takeGlobalCursor',\n      key: 'dataZoomSelect',\n      dataZoomSelectActive: nextActive\n    });\n  },\n  back: function () {\n    this._dispatchZoomAction(history.pop(this.ecModel));\n  }\n};\nfunction makeAxisFinder(dzFeatureModel) {\n  var setting = {\n    xAxisIndex: dzFeatureModel.get('xAxisIndex', true),\n    yAxisIndex: dzFeatureModel.get('yAxisIndex', true),\n    xAxisId: dzFeatureModel.get('xAxisId', true),\n    yAxisId: dzFeatureModel.get('yAxisId', true)\n  };\n  // If both `xAxisIndex` `xAxisId` not set, it means 'all'.\n  // If both `yAxisIndex` `yAxisId` not set, it means 'all'.\n  // Some old cases set like this below to close yAxis control but leave xAxis control:\n  // `{ feature: { dataZoom: { yAxisIndex: false } }`.\n  if (setting.xAxisIndex == null && setting.xAxisId == null) {\n    setting.xAxisIndex = 'all';\n  }\n  if (setting.yAxisIndex == null && setting.yAxisId == null) {\n    setting.yAxisIndex = 'all';\n  }\n  return setting;\n}\nfunction updateBackBtnStatus(featureModel, ecModel) {\n  featureModel.setIconStatus('back', history.count(ecModel) > 1 ? 'emphasis' : 'normal');\n}\nfunction updateZoomBtnStatus(featureModel, ecModel, view, payload, api) {\n  var zoomActive = view._isZoomActive;\n  if (payload && payload.type === 'takeGlobalCursor') {\n    zoomActive = payload.key === 'dataZoomSelect' ? payload.dataZoomSelectActive : false;\n  }\n  view._isZoomActive = zoomActive;\n  featureModel.setIconStatus('zoom', zoomActive ? 'emphasis' : 'normal');\n  var brushTargetManager = new BrushTargetManager(makeAxisFinder(featureModel), ecModel, {\n    include: ['grid']\n  });\n  var panels = brushTargetManager.makePanelOpts(api, function (targetInfo) {\n    return targetInfo.xAxisDeclared && !targetInfo.yAxisDeclared ? 'lineX' : !targetInfo.xAxisDeclared && targetInfo.yAxisDeclared ? 'lineY' : 'rect';\n  });\n  view._brushController.setPanels(panels).enableBrush(zoomActive && panels.length ? {\n    brushType: 'auto',\n    brushStyle: featureModel.getModel('brushStyle').getItemStyle()\n  } : false);\n}\nregisterInternalOptionCreator('dataZoom', function (ecModel) {\n  var toolboxModel = ecModel.getComponent('toolbox', 0);\n  var featureDataZoomPath = ['feature', 'dataZoom'];\n  if (!toolboxModel || toolboxModel.get(featureDataZoomPath) == null) {\n    return;\n  }\n  var dzFeatureModel = toolboxModel.getModel(featureDataZoomPath);\n  var dzOptions = [];\n  var finder = makeAxisFinder(dzFeatureModel);\n  var finderResult = parseFinder(ecModel, finder);\n  each(finderResult.xAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'xAxis', 'xAxisIndex');\n  });\n  each(finderResult.yAxisModels, function (axisModel) {\n    return buildInternalOptions(axisModel, 'yAxis', 'yAxisIndex');\n  });\n  function buildInternalOptions(axisModel, axisMainType, axisIndexPropName) {\n    var axisIndex = axisModel.componentIndex;\n    var newOpt = {\n      type: 'select',\n      $fromToolbox: true,\n      // Default to be filter\n      filterMode: dzFeatureModel.get('filterMode', true) || 'filter',\n      // Id for merge mapping.\n      id: DATA_ZOOM_ID_BASE + axisMainType + axisIndex\n    };\n    newOpt[axisIndexPropName] = axisIndex;\n    dzOptions.push(newOpt);\n  }\n  return dzOptions;\n});\nexport default DataZoomFeature;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomSelect } from '../../component/dataZoom/installDataZoomSelect.js';\nimport ToolboxModel from './ToolboxModel.js';\nimport ToolboxView from './ToolboxView.js';\n// TODOD: REGISTER IN INSTALL\nimport { registerFeature } from './featureManager.js';\nimport SaveAsImage from './feature/SaveAsImage.js';\nimport MagicType from './feature/MagicType.js';\nimport DataView from './feature/DataView.js';\nimport Restore from './feature/Restore.js';\nimport DataZoom from './feature/DataZoom.js';\nexport function install(registers) {\n  registers.registerComponentModel(ToolboxModel);\n  registers.registerComponentView(ToolboxView);\n  registerFeature('saveAsImage', SaveAsImage);\n  registerFeature('magicType', MagicType);\n  registerFeature('dataView', DataView);\n  registerFeature('dataZoom', DataZoom);\n  registerFeature('restore', Restore);\n  use(installDataZoomSelect);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component.js';\nvar TooltipModel = /** @class */function (_super) {\n  __extends(TooltipModel, _super);\n  function TooltipModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipModel.type;\n    return _this;\n  }\n  TooltipModel.type = 'tooltip';\n  TooltipModel.dependencies = ['axisPointer'];\n  TooltipModel.defaultOption = {\n    // zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip main content\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    renderMode: 'auto',\n    // whether restraint content inside viewRect.\n    // If renderMode: 'richText', default true.\n    // If renderMode: 'html', defaut false (for backward compat).\n    confine: null,\n    showDelay: 0,\n    hideDelay: 100,\n    // Animation transition time, unit is second\n    transitionDuration: 0.4,\n    enterable: false,\n    backgroundColor: '#fff',\n    // box shadow\n    shadowBlur: 10,\n    shadowColor: 'rgba(0, 0, 0, .2)',\n    shadowOffsetX: 1,\n    shadowOffsetY: 2,\n    // tooltip border radius, unit is px, default is 4\n    borderRadius: 4,\n    // tooltip border width, unit is px, default is 0 (no border)\n    borderWidth: 1,\n    // Tooltip inside padding, default is 5 for all direction\n    // Array is allowed to set up, right, bottom, left, same with css\n    // The default value: See `tooltip/tooltipMarkup.ts#getPaddingFromTooltipModel`.\n    padding: null,\n    // Extra css text\n    extraCssText: '',\n    // axis indicator, trigger by axis\n    axisPointer: {\n      // default is line\n      // legal values: 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // Valid when type is line, appoint tooltip line locate on which line. Optional\n      // legal values: 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // default is 'auto', chose the axis which type is category.\n      // for multiply y axis, cartesian coord chose x axis, polar chose angle axis\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {}\n      }\n      // lineStyle and shadowStyle should not be specified here,\n      // otherwise it will always override those styles on option.axisPointer.\n    },\n    textStyle: {\n      color: '#666',\n      fontSize: 14\n    }\n  };\n  return TooltipModel;\n}(ComponentModel);\nexport default TooltipModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { toCamelCase } from '../../util/format.js';\nimport env from 'zrender/lib/core/env.js';\n/* global document */\nexport function shouldTooltipConfine(tooltipModel) {\n  var confineOption = tooltipModel.get('confine');\n  return confineOption != null ? !!confineOption\n  // In richText mode, the outside part can not be visible.\n  : tooltipModel.get('renderMode') === 'richText';\n}\nfunction testStyle(styleProps) {\n  if (!env.domSupported) {\n    return;\n  }\n  var style = document.documentElement.style;\n  for (var i = 0, len = styleProps.length; i < len; i++) {\n    if (styleProps[i] in style) {\n      return styleProps[i];\n    }\n  }\n}\nexport var TRANSFORM_VENDOR = testStyle(['transform', 'webkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\nexport var TRANSITION_VENDOR = testStyle(['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\nexport function toCSSVendorPrefix(styleVendor, styleProp) {\n  if (!styleVendor) {\n    return styleProp;\n  }\n  styleProp = toCamelCase(styleProp, true);\n  var idx = styleVendor.indexOf(styleProp);\n  styleVendor = idx === -1 ? styleProp : \"-\" + styleVendor.slice(0, idx) + \"-\" + styleProp;\n  return styleVendor.toLowerCase();\n}\nexport function getComputedStyle(el, style) {\n  var stl = el.currentStyle || document.defaultView && document.defaultView.getComputedStyle(el);\n  return stl ? style ? stl[style] : stl : null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { isString, indexOf, each, bind, isFunction, isArray, isDom, retrieve2 } from 'zrender/lib/core/util.js';\nimport { normalizeEvent } from 'zrender/lib/core/event.js';\nimport { transformLocalCoord } from 'zrender/lib/core/dom.js';\nimport env from 'zrender/lib/core/env.js';\nimport { convertToColorString, toCamelCase, normalizeCssArray } from '../../util/format.js';\nimport { shouldTooltipConfine, toCSSVendorPrefix, getComputedStyle, TRANSFORM_VENDOR, TRANSITION_VENDOR } from './helper.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\n/* global document, window */\nvar CSS_TRANSITION_VENDOR = toCSSVendorPrefix(TRANSITION_VENDOR, 'transition');\nvar CSS_TRANSFORM_VENDOR = toCSSVendorPrefix(TRANSFORM_VENDOR, 'transform');\n// eslint-disable-next-line\nvar gCssText = \"position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;\" + (env.transform3dSupported ? 'will-change:transform;' : '');\nfunction mirrorPos(pos) {\n  pos = pos === 'left' ? 'right' : pos === 'right' ? 'left' : pos === 'top' ? 'bottom' : 'top';\n  return pos;\n}\nfunction assembleArrow(tooltipModel, borderColor, arrowPosition) {\n  if (!isString(arrowPosition) || arrowPosition === 'inside') {\n    return '';\n  }\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var borderWidth = tooltipModel.get('borderWidth');\n  borderColor = convertToColorString(borderColor);\n  var arrowPos = mirrorPos(arrowPosition);\n  var arrowSize = Math.max(Math.round(borderWidth) * 1.5, 6);\n  var positionStyle = '';\n  var transformStyle = CSS_TRANSFORM_VENDOR + ':';\n  var rotateDeg;\n  if (indexOf(['left', 'right'], arrowPos) > -1) {\n    positionStyle += 'top:50%';\n    transformStyle += \"translateY(-50%) rotate(\" + (rotateDeg = arrowPos === 'left' ? -225 : -45) + \"deg)\";\n  } else {\n    positionStyle += 'left:50%';\n    transformStyle += \"translateX(-50%) rotate(\" + (rotateDeg = arrowPos === 'top' ? 225 : 45) + \"deg)\";\n  }\n  var rotateRadian = rotateDeg * Math.PI / 180;\n  var arrowWH = arrowSize + borderWidth;\n  var rotatedWH = arrowWH * Math.abs(Math.cos(rotateRadian)) + arrowWH * Math.abs(Math.sin(rotateRadian));\n  var arrowOffset = Math.round(((rotatedWH - Math.SQRT2 * borderWidth) / 2 + Math.SQRT2 * borderWidth - (rotatedWH - arrowWH) / 2) * 100) / 100;\n  positionStyle += \";\" + arrowPos + \":-\" + arrowOffset + \"px\";\n  var borderStyle = borderColor + \" solid \" + borderWidth + \"px;\";\n  var styleCss = [\"position:absolute;width:\" + arrowSize + \"px;height:\" + arrowSize + \"px;z-index:-1;\", positionStyle + \";\" + transformStyle + \";\", \"border-bottom:\" + borderStyle, \"border-right:\" + borderStyle, \"background-color:\" + backgroundColor + \";\"];\n  return \"<div style=\\\"\" + styleCss.join('') + \"\\\"></div>\";\n}\nfunction assembleTransition(duration, onlyFade) {\n  var transitionCurve = 'cubic-bezier(0.23,1,0.32,1)';\n  var transitionOption = \" \" + duration / 2 + \"s \" + transitionCurve;\n  var transitionText = \"opacity\" + transitionOption + \",visibility\" + transitionOption;\n  if (!onlyFade) {\n    transitionOption = \" \" + duration + \"s \" + transitionCurve;\n    transitionText += env.transformSupported ? \",\" + CSS_TRANSFORM_VENDOR + transitionOption : \",left\" + transitionOption + \",top\" + transitionOption;\n  }\n  return CSS_TRANSITION_VENDOR + ':' + transitionText;\n}\nfunction assembleTransform(x, y, toString) {\n  // If using float on style, the final width of the dom might\n  // keep changing slightly while mouse move. So `toFixed(0)` them.\n  var x0 = x.toFixed(0) + 'px';\n  var y0 = y.toFixed(0) + 'px';\n  // not support transform, use `left` and `top` instead.\n  if (!env.transformSupported) {\n    return toString ? \"top:\" + y0 + \";left:\" + x0 + \";\" : [['top', y0], ['left', x0]];\n  }\n  // support transform\n  var is3d = env.transform3dSupported;\n  var translate = \"translate\" + (is3d ? '3d' : '') + \"(\" + x0 + \",\" + y0 + (is3d ? ',0' : '') + \")\";\n  return toString ? 'top:0;left:0;' + CSS_TRANSFORM_VENDOR + ':' + translate + ';' : [['top', 0], ['left', 0], [TRANSFORM_VENDOR, translate]];\n}\n/**\r\n * @param {Object} textStyle\r\n * @return {string}\r\n * @inner\r\n */\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  // @ts-ignore, leave it to the tooltip refactor.\n  var lineHeight = retrieve2(textStyleModel.get('lineHeight'), Math.round(fontSize * 3 / 2));\n  fontSize && cssText.push('line-height:' + lineHeight + 'px');\n  var shadowColor = textStyleModel.get('textShadowColor');\n  var shadowBlur = textStyleModel.get('textShadowBlur') || 0;\n  var shadowOffsetX = textStyleModel.get('textShadowOffsetX') || 0;\n  var shadowOffsetY = textStyleModel.get('textShadowOffsetY') || 0;\n  shadowColor && shadowBlur && cssText.push('text-shadow:' + shadowOffsetX + 'px ' + shadowOffsetY + 'px ' + shadowBlur + 'px ' + shadowColor);\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\nfunction assembleCssText(tooltipModel, enableTransition, onlyFade) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var shadowBlur = tooltipModel.get('shadowBlur');\n  var shadowColor = tooltipModel.get('shadowColor');\n  var shadowOffsetX = tooltipModel.get('shadowOffsetX');\n  var shadowOffsetY = tooltipModel.get('shadowOffsetY');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = getPaddingFromTooltipModel(tooltipModel, 'html');\n  var boxShadow = shadowOffsetX + \"px \" + shadowOffsetY + \"px \" + shadowBlur + \"px \" + shadowColor;\n  cssText.push('box-shadow:' + boxShadow);\n  // Animation transition. Do not animate when transitionDuration is 0.\n  enableTransition && transitionDuration && cssText.push(assembleTransition(transitionDuration, onlyFade));\n  if (backgroundColor) {\n    cssText.push('background-color:' + backgroundColor);\n  }\n  // Border style\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  });\n  // Text style\n  cssText.push(assembleFont(textStyleModel));\n  // Padding\n  if (padding != null) {\n    cssText.push('padding:' + normalizeCssArray(padding).join('px ') + 'px');\n  }\n  return cssText.join(';') + ';';\n}\n// If not able to make, do not modify the input `out`.\nfunction makeStyleCoord(out, zr, container, zrX, zrY) {\n  var zrPainter = zr && zr.painter;\n  if (container) {\n    var zrViewportRoot = zrPainter && zrPainter.getViewportRoot();\n    if (zrViewportRoot) {\n      // Some APPs might use scale on body, so we support CSS transform here.\n      transformLocalCoord(out, zrViewportRoot, container, zrX, zrY);\n    }\n  } else {\n    out[0] = zrX;\n    out[1] = zrY;\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var viewportRootOffset = zrPainter && zrPainter.getViewportRootOffset();\n    if (viewportRootOffset) {\n      out[0] += viewportRootOffset.offsetLeft;\n      out[1] += viewportRootOffset.offsetTop;\n    }\n  }\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nvar TooltipHTMLContent = /** @class */function () {\n  function TooltipHTMLContent(api, opt) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._enterable = true;\n    this._alwaysShowContent = false;\n    this._firstShow = true;\n    this._longHide = true;\n    if (env.wxa) {\n      return null;\n    }\n    var el = document.createElement('div');\n    // TODO: TYPE\n    el.domBelongToZr = true;\n    this.el = el;\n    var zr = this._zr = api.getZr();\n    var appendTo = opt.appendTo;\n    var container = appendTo && (isString(appendTo) ? document.querySelector(appendTo) : isDom(appendTo) ? appendTo : isFunction(appendTo) && appendTo(api.getDom()));\n    makeStyleCoord(this._styleCoord, zr, container, api.getWidth() / 2, api.getHeight() / 2);\n    (container || api.getDom()).appendChild(el);\n    this._api = api;\n    this._container = container;\n    // FIXME\n    // Is it needed to trigger zr event manually if\n    // the browser do not support `pointer-events: none`.\n    var self = this;\n    el.onmouseenter = function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    };\n    el.onmousemove = function (e) {\n      e = e || window.event;\n      if (!self._enterable) {\n        // `pointer-events: none` is set to tooltip content div\n        // if `enterable` is set as `false`, and `el.onmousemove`\n        // can not be triggered. But in browser that do not\n        // support `pointer-events`, we need to do this:\n        // Try trigger zrender event to avoid mouse\n        // in and out shape too frequently\n        var handler = zr.handler;\n        var zrViewportRoot = zr.painter.getViewportRoot();\n        normalizeEvent(zrViewportRoot, e, true);\n        handler.dispatch('mousemove', e);\n      }\n    };\n    el.onmouseleave = function () {\n      // set `_inContent` to `false` before `hideLater`\n      self._inContent = false;\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n    };\n  }\n  /**\r\n   * Update when tooltip is rendered\r\n   */\n  TooltipHTMLContent.prototype.update = function (tooltipModel) {\n    // FIXME\n    // Move this logic to ec main?\n    if (!this._container) {\n      var container = this._api.getDom();\n      var position = getComputedStyle(container, 'position');\n      var domStyle = container.style;\n      if (domStyle.position !== 'absolute' && position !== 'absolute') {\n        domStyle.position = 'relative';\n      }\n    }\n    // move tooltip if chart resized\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n    // update className\n    this.el.className = tooltipModel.get('className') || '';\n    // Hide the tooltip\n    // PENDING\n    // this.hide();\n  };\n  TooltipHTMLContent.prototype.show = function (tooltipModel, nearPointColor) {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var el = this.el;\n    var style = el.style;\n    var styleCoord = this._styleCoord;\n    if (!el.innerHTML) {\n      style.display = 'none';\n    } else {\n      style.cssText = gCssText + assembleCssText(tooltipModel, !this._firstShow, this._longHide)\n      // initial transform\n      + assembleTransform(styleCoord[0], styleCoord[1], true) + (\"border-color:\" + convertToColorString(nearPointColor) + \";\") + (tooltipModel.get('extraCssText') || '')\n      // If mouse occasionally move over the tooltip, a mouseout event will be\n      // triggered by canvas, and cause some unexpectable result like dragging\n      // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n      // it. Although it is not supported by IE8~IE10, fortunately it is a rare\n      // scenario.\n      + (\";pointer-events:\" + (this._enterable ? 'auto' : 'none'));\n    }\n    this._show = true;\n    this._firstShow = false;\n    this._longHide = false;\n  };\n  TooltipHTMLContent.prototype.setContent = function (content, markers, tooltipModel, borderColor, arrowPosition) {\n    var el = this.el;\n    if (content == null) {\n      el.innerHTML = '';\n      return;\n    }\n    var arrow = '';\n    if (isString(arrowPosition) && tooltipModel.get('trigger') === 'item' && !shouldTooltipConfine(tooltipModel)) {\n      arrow = assembleArrow(tooltipModel, borderColor, arrowPosition);\n    }\n    if (isString(content)) {\n      el.innerHTML = content + arrow;\n    } else if (content) {\n      // Clear previous\n      el.innerHTML = '';\n      if (!isArray(content)) {\n        content = [content];\n      }\n      for (var i = 0; i < content.length; i++) {\n        if (isDom(content[i]) && content[i].parentNode !== el) {\n          el.appendChild(content[i]);\n        }\n      }\n      // no arrow if empty\n      if (arrow && el.childNodes.length) {\n        // no need to create a new parent element, but it's not supported by IE 10 and older.\n        // const arrowEl = document.createRange().createContextualFragment(arrow);\n        var arrowEl = document.createElement('div');\n        arrowEl.innerHTML = arrow;\n        el.appendChild(arrowEl);\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipHTMLContent.prototype.getSize = function () {\n    var el = this.el;\n    return el ? [el.offsetWidth, el.offsetHeight] : [0, 0];\n  };\n  TooltipHTMLContent.prototype.moveTo = function (zrX, zrY) {\n    if (!this.el) {\n      return;\n    }\n    var styleCoord = this._styleCoord;\n    makeStyleCoord(styleCoord, this._zr, this._container, zrX, zrY);\n    if (styleCoord[0] != null && styleCoord[1] != null) {\n      var style_1 = this.el.style;\n      var transforms = assembleTransform(styleCoord[0], styleCoord[1]);\n      each(transforms, function (transform) {\n        style_1[transform[0]] = transform[1];\n      });\n    }\n  };\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\n  TooltipHTMLContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipHTMLContent.prototype.hide = function () {\n    var _this = this;\n    var style = this.el.style;\n    style.visibility = 'hidden';\n    style.opacity = '0';\n    env.transform3dSupported && (style.willChange = '');\n    this._show = false;\n    this._longHideTimeout = setTimeout(function () {\n      return _this._longHide = true;\n    }, 500);\n  };\n  TooltipHTMLContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipHTMLContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipHTMLContent.prototype.dispose = function () {\n    clearTimeout(this._hideTimeout);\n    clearTimeout(this._longHideTimeout);\n    var parentNode = this.el.parentNode;\n    parentNode && parentNode.removeChild(this.el);\n    this.el = this._container = null;\n  };\n  return TooltipHTMLContent;\n}();\nexport default TooltipHTMLContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport ZRText from 'zrender/lib/graphic/Text.js';\nimport { getPaddingFromTooltipModel } from './tooltipMarkup.js';\nimport { throwError } from '../../util/log.js';\nvar TooltipRichContent = /** @class */function () {\n  function TooltipRichContent(api) {\n    this._show = false;\n    this._styleCoord = [0, 0, 0, 0];\n    this._alwaysShowContent = false;\n    this._enterable = true;\n    this._zr = api.getZr();\n    makeStyleCoord(this._styleCoord, this._zr, api.getWidth() / 2, api.getHeight() / 2);\n  }\n  /**\r\n   * Update when tooltip is rendered\r\n   */\n  TooltipRichContent.prototype.update = function (tooltipModel) {\n    var alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    alwaysShowContent && this._moveIfResized();\n    // update alwaysShowContent\n    this._alwaysShowContent = alwaysShowContent;\n  };\n  TooltipRichContent.prototype.show = function () {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n    this.el.show();\n    this._show = true;\n  };\n  /**\r\n   * Set tooltip content\r\n   */\n  TooltipRichContent.prototype.setContent = function (content, markupStyleCreator, tooltipModel, borderColor, arrowPosition) {\n    var _this = this;\n    if (zrUtil.isObject(content)) {\n      throwError(process.env.NODE_ENV !== 'production' ? 'Passing DOM nodes as content is not supported in richText tooltip!' : '');\n    }\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n    var textStyleModel = tooltipModel.getModel('textStyle');\n    this.el = new ZRText({\n      style: {\n        rich: markupStyleCreator.richTextStyles,\n        text: content,\n        lineHeight: 22,\n        borderWidth: 1,\n        borderColor: borderColor,\n        textShadowColor: textStyleModel.get('textShadowColor'),\n        fill: tooltipModel.get(['textStyle', 'color']),\n        padding: getPaddingFromTooltipModel(tooltipModel, 'richText'),\n        verticalAlign: 'top',\n        align: 'left'\n      },\n      z: tooltipModel.get('z')\n    });\n    zrUtil.each(['backgroundColor', 'borderRadius', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'], function (propName) {\n      _this.el.style[propName] = tooltipModel.get(propName);\n    });\n    zrUtil.each(['textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY'], function (propName) {\n      _this.el.style[propName] = textStyleModel.get(propName) || 0;\n    });\n    this._zr.add(this.el);\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n      self._inContent = false;\n    });\n  };\n  TooltipRichContent.prototype.setEnterable = function (enterable) {\n    this._enterable = enterable;\n  };\n  TooltipRichContent.prototype.getSize = function () {\n    var el = this.el;\n    var bounding = this.el.getBoundingRect();\n    // bounding rect does not include shadow. For renderMode richText,\n    // if overflow, it will be cut. So calculate them accurately.\n    var shadowOuterSize = calcShadowOuterSize(el.style);\n    return [bounding.width + shadowOuterSize.left + shadowOuterSize.right, bounding.height + shadowOuterSize.top + shadowOuterSize.bottom];\n  };\n  TooltipRichContent.prototype.moveTo = function (x, y) {\n    var el = this.el;\n    if (el) {\n      var styleCoord = this._styleCoord;\n      makeStyleCoord(styleCoord, this._zr, x, y);\n      x = styleCoord[0];\n      y = styleCoord[1];\n      var style = el.style;\n      var borderWidth = mathMaxWith0(style.borderWidth || 0);\n      var shadowOuterSize = calcShadowOuterSize(style);\n      // rich text x, y do not include border.\n      el.x = x + borderWidth + shadowOuterSize.left;\n      el.y = y + borderWidth + shadowOuterSize.top;\n      el.markRedraw();\n    }\n  };\n  /**\r\n   * when `alwaysShowContent` is true,\r\n   * move the tooltip after chart resized\r\n   */\n  TooltipRichContent.prototype._moveIfResized = function () {\n    // The ratio of left to width\n    var ratioX = this._styleCoord[2];\n    // The ratio of top to height\n    var ratioY = this._styleCoord[3];\n    this.moveTo(ratioX * this._zr.getWidth(), ratioY * this._zr.getHeight());\n  };\n  TooltipRichContent.prototype.hide = function () {\n    if (this.el) {\n      this.el.hide();\n    }\n    this._show = false;\n  };\n  TooltipRichContent.prototype.hideLater = function (time) {\n    if (this._show && !(this._inContent && this._enterable) && !this._alwaysShowContent) {\n      if (time) {\n        this._hideDelay = time;\n        // Set show false to avoid invoke hideLater multiple times\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  };\n  TooltipRichContent.prototype.isShow = function () {\n    return this._show;\n  };\n  TooltipRichContent.prototype.dispose = function () {\n    this._zr.remove(this.el);\n  };\n  return TooltipRichContent;\n}();\nfunction mathMaxWith0(val) {\n  return Math.max(0, val);\n}\nfunction calcShadowOuterSize(style) {\n  var shadowBlur = mathMaxWith0(style.shadowBlur || 0);\n  var shadowOffsetX = mathMaxWith0(style.shadowOffsetX || 0);\n  var shadowOffsetY = mathMaxWith0(style.shadowOffsetY || 0);\n  return {\n    left: mathMaxWith0(shadowBlur - shadowOffsetX),\n    right: mathMaxWith0(shadowBlur + shadowOffsetX),\n    top: mathMaxWith0(shadowBlur - shadowOffsetY),\n    bottom: mathMaxWith0(shadowBlur + shadowOffsetY)\n  };\n}\nfunction makeStyleCoord(out, zr, zrX, zrY) {\n  out[0] = zrX;\n  out[1] = zrY;\n  out[2] = out[0] / zr.getWidth();\n  out[3] = out[1] / zr.getHeight();\n}\nexport default TooltipRichContent;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\nimport { __extends } from \"tslib\";\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { bind, each, clone, trim, isString, isFunction, isArray, isObject, extend } from 'zrender/lib/core/util.js';\nimport env from 'zrender/lib/core/env.js';\nimport TooltipHTMLContent from './TooltipHTMLContent.js';\nimport TooltipRichContent from './TooltipRichContent.js';\nimport { convertToColorString, encodeHTML, formatTpl } from '../../util/format.js';\nimport { parsePercent } from '../../util/number.js';\nimport { Rect } from '../../util/graphic.js';\nimport findPointFromSeries from '../axisPointer/findPointFromSeries.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport Model from '../../model/Model.js';\nimport * as globalListener from '../axisPointer/globalListener.js';\nimport * as axisHelper from '../../coord/axisHelper.js';\nimport * as axisPointerViewHelper from '../axisPointer/viewHelper.js';\nimport { getTooltipRenderMode, preParseFinder, queryReferringComponents } from '../../util/model.js';\nimport ComponentView from '../../view/Component.js';\nimport { format as timeFormat } from '../../util/time.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { shouldTooltipConfine } from './helper.js';\nimport { normalizeTooltipFormatResult } from '../../model/mixin/dataFormat.js';\nimport { createTooltipMarkup, buildTooltipMarkup, TooltipMarkupStyleCreator } from './tooltipMarkup.js';\nimport { findEventDispatcher } from '../../util/event.js';\nimport { clear, createOrUpdate } from '../../util/throttle.js';\nvar proxyRect = new Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\nvar TooltipView = /** @class */function (_super) {\n  __extends(TooltipView, _super);\n  function TooltipView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TooltipView.type;\n    return _this;\n  }\n  TooltipView.prototype.init = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = this._renderMode = getTooltipRenderMode(tooltipModel.get('renderMode'));\n    this._tooltipContent = renderMode === 'richText' ? new TooltipRichContent(api) : new TooltipHTMLContent(api, {\n      appendTo: tooltipModel.get('appendToBody', true) ? 'body' : tooltipModel.get('appendTo', true)\n    });\n  };\n  TooltipView.prototype.render = function (tooltipModel, ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    // Reset\n    this.group.removeAll();\n    this._tooltipModel = tooltipModel;\n    this._ecModel = ecModel;\n    this._api = api;\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update(tooltipModel);\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    this._initGlobalListener();\n    this._keepShow();\n    // PENDING\n    // `mousemove` event will be triggered very frequently when the mouse moves fast,\n    // which causes that the `updatePosition` function was also called frequently.\n    // In Chrome with devtools open and Firefox, tooltip looks laggy and shakes. See #14695 #16101\n    // To avoid frequent triggering,\n    // consider throttling it in 50ms when transition is enabled\n    if (this._renderMode !== 'richText' && tooltipModel.get('transitionDuration')) {\n      createOrUpdate(this, '_updatePosition', 50, 'fixRate');\n    } else {\n      clear(this, '_updatePosition');\n    }\n  };\n  TooltipView.prototype._initGlobalListener = function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  };\n  TooltipView.prototype._keepShow = function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api;\n    var triggerOn = tooltipModel.get('triggerOn');\n    // Try to keep the tooltip show when refreshing\n    if (this._lastX != null && this._lastY != null\n    // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && triggerOn !== 'none' && triggerOn !== 'click') {\n      var self_1 = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self_1.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self_1._lastX,\n          y: self_1._lastY,\n          dataByCoordSys: self_1._lastDataByCoordSys\n        });\n      });\n    }\n  };\n  /**\r\n   * Show tip manually by\r\n   * dispatchAction({\r\n   *     type: 'showTip',\r\n   *     x: 10,\r\n   *     y: 10\r\n   * });\r\n   * Or\r\n   * dispatchAction({\r\n   *      type: 'showTip',\r\n   *      seriesIndex: 0,\r\n   *      dataIndex or dataIndexInside or name\r\n   * });\r\n   *\r\n   *  TODO Batch\r\n   */\n  TooltipView.prototype.manuallyShowTip = function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node || !api.getDom()) {\n      return;\n    }\n    var dispatchAction = makeDispatchAction(payload, api);\n    // Reset ticket\n    this._ticket = '';\n    // When triggered from axisPointer.\n    var dataByCoordSys = payload.dataByCoordSys;\n    var cmptRef = findComponentReference(payload, ecModel, api);\n    if (cmptRef) {\n      var rect = cmptRef.el.getBoundingRect().clone();\n      rect.applyTransform(cmptRef.el.transform);\n      this._tryShow({\n        offsetX: rect.x + rect.width / 2,\n        offsetY: rect.y + rect.height / 2,\n        target: cmptRef.el,\n        position: payload.position,\n        // When manully trigger, the mouse is not on the el, so we'd better to\n        // position tooltip on the bottom of the el and display arrow is possible.\n        positionDefault: 'bottom'\n      }, dispatchAction);\n    } else if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.x = payload.x;\n      el.y = payload.y;\n      el.update();\n      getECData(el).tooltipConfig = {\n        name: null,\n        option: payload.tooltip\n      };\n      // Manually show tooltip while view is not using zrender elements.\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        dataByCoordSys: dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          target: pointInfo.el,\n          position: payload.position,\n          // When manully trigger, the mouse is not on the el, so we'd better to\n          // position tooltip on the bottom of the el and display arrow is possible.\n          positionDefault: 'bottom'\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target\n      }, dispatchAction);\n    }\n  };\n  TooltipView.prototype.manuallyHideTip = function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n    if (this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n    this._lastX = this._lastY = this._lastDataByCoordSys = null;\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  };\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  TooltipView.prototype._manuallyAxisShowTip = function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    // @ts-ignore\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    if (!seriesModel) {\n      return;\n    }\n    var data = seriesModel.getData();\n    var tooltipCascadedModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model], this._tooltipModel);\n    if (tooltipCascadedModel.get('trigger') !== 'axis') {\n      return;\n    }\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  };\n  TooltipView.prototype._tryShow = function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n    if (!tooltipModel) {\n      return;\n    }\n    // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } else if (el) {\n      var ecData = getECData(el);\n      if (ecData.ssrType === 'legend') {\n        // Don't trigger tooltip for legend tooltip item\n        return;\n      }\n      this._lastDataByCoordSys = null;\n      var seriesDispatcher_1;\n      var cmptDispatcher_1;\n      findEventDispatcher(el, function (target) {\n        // Always show item tooltip if mouse is on the element with dataIndex\n        if (getECData(target).dataIndex != null) {\n          seriesDispatcher_1 = target;\n          return true;\n        }\n        // Tooltip provided directly. Like legend.\n        if (getECData(target).tooltipConfig != null) {\n          cmptDispatcher_1 = target;\n          return true;\n        }\n      }, true);\n      if (seriesDispatcher_1) {\n        this._showSeriesItemTooltip(e, seriesDispatcher_1, dispatchAction);\n      } else if (cmptDispatcher_1) {\n        this._showComponentItemTooltip(e, cmptDispatcher_1, dispatchAction);\n      } else {\n        this._hide(dispatchAction);\n      }\n    } else {\n      this._lastDataByCoordSys = null;\n      this._hide(dispatchAction);\n    }\n  };\n  TooltipView.prototype._showOrMove = function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easier to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  };\n  TooltipView.prototype._showAxisTooltip = function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption], globalTooltipModel);\n    var renderMode = this._renderMode;\n    var cbParamsList = [];\n    var articleMarkup = createTooltipMarkup('section', {\n      blocks: [],\n      noHeader: true\n    });\n    // Only for legacy: `Serise['formatTooltip']` returns a string.\n    var markupTextArrLegacy = [];\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    each(dataByCoordSys, function (itemCoordSys) {\n      each(itemCoordSys.dataByAxis, function (axisItem) {\n        var axisModel = ecModel.getComponent(axisItem.axisDim + 'Axis', axisItem.axisIndex);\n        var axisValue = axisItem.value;\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n        var axisValueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, axisItem.seriesDataIndices, axisItem.valueLabelOpt);\n        var axisSectionMarkup = createTooltipMarkup('section', {\n          header: axisValueLabel,\n          noHeader: !trim(axisValueLabel),\n          sortBlocks: true,\n          blocks: []\n        });\n        articleMarkup.blocks.push(axisSectionMarkup);\n        each(axisItem.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var cbParams = series.getDataParams(dataIndex);\n          // Can't find data.\n          if (cbParams.dataIndex < 0) {\n            return;\n          }\n          cbParams.axisDim = axisItem.axisDim;\n          cbParams.axisIndex = axisItem.axisIndex;\n          cbParams.axisType = axisItem.axisType;\n          cbParams.axisId = axisItem.axisId;\n          cbParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, {\n            value: axisValue\n          });\n          cbParams.axisValueLabel = axisValueLabel;\n          // Pre-create marker style for makers. Users can assemble richText\n          // text in `formatter` callback and use those markers style.\n          cbParams.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(cbParams.color), renderMode);\n          var seriesTooltipResult = normalizeTooltipFormatResult(series.formatTooltip(dataIndex, true, null));\n          var frag = seriesTooltipResult.frag;\n          if (frag) {\n            var valueFormatter = buildTooltipModel([series], globalTooltipModel).get('valueFormatter');\n            axisSectionMarkup.blocks.push(valueFormatter ? extend({\n              valueFormatter: valueFormatter\n            }, frag) : frag);\n          }\n          if (seriesTooltipResult.text) {\n            markupTextArrLegacy.push(seriesTooltipResult.text);\n          }\n          cbParamsList.push(cbParams);\n        });\n      });\n    });\n    // In most cases, the second axis is displays upper on the first one.\n    // So we reverse it to look better.\n    articleMarkup.blocks.reverse();\n    markupTextArrLegacy.reverse();\n    var positionExpr = e.position;\n    var orderMode = singleTooltipModel.get('order');\n    var builtMarkupText = buildTooltipMarkup(articleMarkup, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), singleTooltipModel.get('textStyle'));\n    builtMarkupText && markupTextArrLegacy.unshift(builtMarkupText);\n    var blockBreak = renderMode === 'richText' ? '\\n\\n' : '<br/>';\n    var allMarkupText = markupTextArrLegacy.join(blockBreak);\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys, cbParamsList)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, cbParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, allMarkupText, cbParamsList, Math.random() + '', point[0], point[1], positionExpr, null, markupStyleCreator);\n      }\n    });\n    // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n  };\n  TooltipView.prototype._showSeriesItemTooltip = function (e, dispatcher, dispatchAction) {\n    var ecModel = this._ecModel;\n    var ecData = getECData(dispatcher);\n    // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n    var seriesIndex = ecData.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n    // For example, graph link.\n    var dataModel = ecData.dataModel || seriesModel;\n    var dataIndex = ecData.dataIndex;\n    var dataType = ecData.dataType;\n    var data = dataModel.getData(dataType);\n    var renderMode = this._renderMode;\n    var positionDefault = e.positionDefault;\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model], this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var tooltipTrigger = tooltipModel.get('trigger');\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Pre-create marker style for makers. Users can assemble richText\n    // text in `formatter` callback and use those markers style.\n    params.marker = markupStyleCreator.makeTooltipMarker('item', convertToColorString(params.color), renderMode);\n    var seriesTooltipResult = normalizeTooltipFormatResult(dataModel.formatTooltip(dataIndex, false, dataType));\n    var orderMode = tooltipModel.get('order');\n    var valueFormatter = tooltipModel.get('valueFormatter');\n    var frag = seriesTooltipResult.frag;\n    var markupText = frag ? buildTooltipMarkup(valueFormatter ? extend({\n      valueFormatter: valueFormatter\n    }, frag) : frag, markupStyleCreator, renderMode, orderMode, ecModel.get('useUTC'), tooltipModel.get('textStyle')) : seriesTooltipResult.text;\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, markupText, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markupStyleCreator);\n    });\n    // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showComponentItemTooltip = function (e, el, dispatchAction) {\n    var isHTMLRenderMode = this._renderMode === 'html';\n    var ecData = getECData(el);\n    var tooltipConfig = ecData.tooltipConfig;\n    var tooltipOpt = tooltipConfig.option || {};\n    var encodeHTMLContent = tooltipOpt.encodeHTMLContent;\n    if (isString(tooltipOpt)) {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n      // when `tooltipConfig.option` is a string rather than an object,\n      // we can't know if the content needs to be encoded\n      // for the sake of security, encode it by default.\n      encodeHTMLContent = true;\n    }\n    if (encodeHTMLContent && isHTMLRenderMode && tooltipOpt.content) {\n      // clone might be unnecessary?\n      tooltipOpt = clone(tooltipOpt);\n      tooltipOpt.content = encodeHTML(tooltipOpt.content);\n    }\n    var tooltipModelCascade = [tooltipOpt];\n    var cmpt = this._ecModel.getComponent(ecData.componentMainType, ecData.componentIndex);\n    if (cmpt) {\n      tooltipModelCascade.push(cmpt);\n    }\n    // In most cases, component tooltip formatter has different params with series tooltip formatter,\n    // so that they cannot share the same formatter. Since the global tooltip formatter is used for series\n    // by convention, we do not use it as the default formatter for component.\n    tooltipModelCascade.push({\n      formatter: tooltipOpt.content\n    });\n    var positionDefault = e.positionDefault;\n    var subTooltipModel = buildTooltipModel(tooltipModelCascade, this._tooltipModel, positionDefault ? {\n      position: positionDefault\n    } : null);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random() + '';\n    // PENDING: this case do not support richText style yet.\n    var markupStyleCreator = new TooltipMarkupStyleCreator();\n    // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on coordinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n    this._showOrMove(subTooltipModel, function () {\n      // Use formatterParams from element defined in component\n      // Avoid users modify it.\n      var formatterParams = clone(subTooltipModel.get('formatterParams') || {});\n      this._showTooltipContent(subTooltipModel, defaultHtml, formatterParams, asyncTicket, e.offsetX, e.offsetY, e.position, el, markupStyleCreator);\n    });\n    // If not dispatch showTip, tip may be hide triggered by axis.\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype._showTooltipContent = function (\n  // Use Model<TooltipOption> insteadof TooltipModel because this model may be from series or other options.\n  // Instead of top level tooltip.\n  tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markupStyleCreator) {\n    // Reset ticket\n    this._ticket = '';\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n    var nearPoint = this._getNearestPoint([x, y], params, tooltipModel.get('trigger'), tooltipModel.get('borderColor'));\n    var nearPointColor = nearPoint.color;\n    if (formatter) {\n      if (isString(formatter)) {\n        var useUTC = tooltipModel.ecModel.get('useUTC');\n        var params0 = isArray(params) ? params[0] : params;\n        var isTimeAxis = params0 && params0.axisType && params0.axisType.indexOf('time') >= 0;\n        html = formatter;\n        if (isTimeAxis) {\n          html = timeFormat(params0.axisValue, html, useUTC);\n        }\n        html = formatTpl(html, params, true);\n      } else if (isFunction(formatter)) {\n        var callback = bind(function (cbTicket, html) {\n          if (cbTicket === this._ticket) {\n            tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n            this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n          }\n        }, this);\n        this._ticket = asyncTicket;\n        html = formatter(params, asyncTicket, callback);\n      } else {\n        html = formatter;\n      }\n    }\n    tooltipContent.setContent(html, markupStyleCreator, tooltipModel, nearPointColor, positionExpr);\n    tooltipContent.show(tooltipModel, nearPointColor);\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  };\n  TooltipView.prototype._getNearestPoint = function (point, tooltipDataParams, trigger, borderColor) {\n    if (trigger === 'axis' || isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || (this._renderMode === 'html' ? '#fff' : 'none')\n      };\n    }\n    if (!isArray(tooltipDataParams)) {\n      return {\n        color: borderColor || tooltipDataParams.color || tooltipDataParams.borderColor\n      };\n    }\n  };\n  TooltipView.prototype._updatePosition = function (tooltipModel, positionExpr, x,\n  // Mouse x\n  y,\n  // Mouse y\n  content, params, el) {\n    var viewWidth = this._api.getWidth();\n    var viewHeight = this._api.getHeight();\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n    if (isFunction(positionExpr)) {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n    if (isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (isObject(positionExpr)) {\n      var boxLayoutPosition = positionExpr;\n      boxLayoutPosition.width = contentSize[0];\n      boxLayoutPosition.height = contentSize[1];\n      var layoutRect = getLayoutRect(boxLayoutPosition, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null;\n      // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n      vAlign = null;\n    }\n    // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (isString(positionExpr) && el) {\n      var pos = calcTooltipPosition(positionExpr, rect, contentSize, tooltipModel.get('borderWidth'));\n      x = pos[0];\n      y = pos[1];\n    } else {\n      var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n      x = pos[0];\n      y = pos[1];\n    }\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n    if (shouldTooltipConfine(tooltipModel)) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n    content.moveTo(x, y);\n  };\n  // FIXME\n  // Should we remove this but leave this to user?\n  TooltipView.prototype._updateContentNotChangedOnAxis = function (dataByCoordSys, cbParamsList) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var lastCbParamsList = this._cbParamsList;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || [];\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged = contentNotChanged && lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged = contentNotChanged && lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged = contentNotChanged && lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n        // check is cbParams data value changed\n        lastCbParamsList && each(lastItem.seriesDataIndices, function (idxItem) {\n          var seriesIdx = idxItem.seriesIndex;\n          var cbParams = cbParamsList[seriesIdx];\n          var lastCbParams = lastCbParamsList[seriesIdx];\n          if (cbParams && lastCbParams && lastCbParams.data !== cbParams.data) {\n            contentNotChanged = false;\n          }\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    this._cbParamsList = cbParamsList;\n    return !!contentNotChanged;\n  };\n  TooltipView.prototype._hide = function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  };\n  TooltipView.prototype.dispose = function (ecModel, api) {\n    if (env.node || !api.getDom()) {\n      return;\n    }\n    clear(this, '_updatePosition');\n    this._tooltipContent.dispose();\n    globalListener.unregister('itemTooltip', api);\n  };\n  TooltipView.type = 'tooltip';\n  return TooltipView;\n}(ComponentView);\n/**\r\n * From top to bottom. (the last one should be globalTooltipModel);\r\n */\nfunction buildTooltipModel(modelCascade, globalTooltipModel, defaultTooltipOption) {\n  // Last is always tooltip model.\n  var ecModel = globalTooltipModel.ecModel;\n  var resultModel;\n  if (defaultTooltipOption) {\n    resultModel = new Model(defaultTooltipOption, ecModel, ecModel);\n    resultModel = new Model(globalTooltipModel.option, resultModel, ecModel);\n  } else {\n    resultModel = globalTooltipModel;\n  }\n  for (var i = modelCascade.length - 1; i >= 0; i--) {\n    var tooltipOpt = modelCascade[i];\n    if (tooltipOpt) {\n      if (tooltipOpt instanceof Model) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      }\n      // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n      if (isString(tooltipOpt)) {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n      if (tooltipOpt) {\n        resultModel = new Model(tooltipOpt, resultModel, ecModel);\n      }\n    }\n  }\n  return resultModel;\n}\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || bind(api.dispatchAction, api);\n}\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  if (gapH != null) {\n    // Add extra 2 pixels for this case:\n    // At present the \"values\" in default tooltip are using CSS `float: right`.\n    // When the right edge of the tooltip box is on the right side of the\n    // viewport, the `float` layout might push the \"values\" to the second line.\n    if (x + width + gapH + 2 > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n  return [x, y];\n}\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getSize();\n  var width = size[0];\n  var height = size[1];\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\nfunction calcTooltipPosition(position, rect, contentSize, borderWidth) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var offset = Math.ceil(Math.SQRT2 * borderWidth) + 8;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - offset;\n      break;\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + offset;\n      break;\n    case 'left':\n      x = rect.x - domWidth - offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n    case 'right':\n      x = rect.x + rectWidth + offset;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n  return [x, y];\n}\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n/**\r\n * Find target component by payload like:\r\n * ```js\r\n * { legendId: 'some_id', name: 'xxx' }\r\n * { toolboxIndex: 1, name: 'xxx' }\r\n * { geoName: 'some_name', name: 'xxx' }\r\n * ```\r\n * PENDING: at present only\r\n *\r\n * If not found, return null/undefined.\r\n */\nfunction findComponentReference(payload, ecModel, api) {\n  var queryOptionMap = preParseFinder(payload).queryOptionMap;\n  var componentMainType = queryOptionMap.keys()[0];\n  if (!componentMainType || componentMainType === 'series') {\n    return;\n  }\n  var queryResult = queryReferringComponents(ecModel, componentMainType, queryOptionMap.get(componentMainType), {\n    useDefault: false,\n    enableAll: false,\n    enableNone: false\n  });\n  var model = queryResult.models[0];\n  if (!model) {\n    return;\n  }\n  var view = api.getViewOfComponentModel(model);\n  var el;\n  view.group.traverse(function (subEl) {\n    var tooltipConfig = getECData(subEl).tooltipConfig;\n    if (tooltipConfig && tooltipConfig.name === payload.name) {\n      el = subEl;\n      return true; // stop\n    }\n  });\n  if (el) {\n    return {\n      componentMainType: componentMainType,\n      componentIndex: model.componentIndex,\n      el: el\n    };\n  }\n}\nexport default TooltipView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { install as installAxisPointer } from '../axisPointer/install.js';\nimport { use } from '../../extension.js';\nimport TooltipModel from './TooltipModel.js';\nimport TooltipView from './TooltipView.js';\nimport { noop } from 'zrender/lib/core/util.js';\nexport function install(registers) {\n  use(installAxisPointer);\n  registers.registerComponentModel(TooltipModel);\n  registers.registerComponentView(TooltipView);\n  /**\r\n   * @action\r\n   * @property {string} type\r\n   * @property {number} seriesIndex\r\n   * @property {number} dataIndex\r\n   * @property {number} [x]\r\n   * @property {number} [y]\r\n   */\n  registers.registerAction({\n    type: 'showTip',\n    event: 'showTip',\n    update: 'tooltip:manuallyShowTip'\n  }, noop);\n  registers.registerAction({\n    type: 'hideTip',\n    event: 'hideTip',\n    update: 'tooltip:manuallyHideTip'\n  }, noop);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport { getECData } from '../../util/innerStore.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nimport { getLayoutRect } from '../../util/layout.js';\nimport ComponentModel from '../../model/Component.js';\nimport ComponentView from '../../view/Component.js';\nimport { windowOpen } from '../../util/format.js';\nvar TitleModel = /** @class */function (_super) {\n  __extends(TitleModel, _super);\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    // zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel);\n// View\nvar TitleView = /** @class */function (_super) {\n  __extends(TitleView, _super);\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = TitleView.type;\n    return _this;\n  }\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n    if (!titleModel.get('show')) {\n      return;\n    }\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl);\n    // If no subText, but add subTextEl, there will be an empty line.\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding'));\n    // Adjust text align based on position\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n      // @ts-ignore\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      }\n      // Adjust layout by text align\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n      // @ts-ignore\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle);\n    // Render background\n    // Get groupRect again because textAlign has been changed\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport Model from '../../model/Model.js';\nimport { isNameSpecified } from '../../util/model.js';\nimport ComponentModel from '../../model/Component.js';\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocaleModel().get(['legend', 'selector', 'inverse'])\n    };\n  }\n};\nvar LegendModel = /** @class */function (_super) {\n  __extends(LegendModel, _super);\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas real width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n    this._updateSelector(option);\n  };\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    this._updateSelector(option);\n  };\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n    var legendData = this._data;\n    // If selectedMode is single, try to select one\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false;\n      // If has any selected in option.selected\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      }\n      // Try select the first if selectedMode is single\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\r\n     * @type {Array.<string>}\r\n     * @private\r\n     */\n    this._availableNames = availableNames;\n    // If legend.data is not specified in option, use availableNames as data,\n    // which is convenient for user preparing option.\n    var rawData = this.get('data') || potentialData;\n    var legendNameMap = zrUtil.createHashMap();\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (zrUtil.isString(dataItem) || zrUtil.isNumber(dataItem)) {\n        dataItem = {\n          name: dataItem\n        };\n      }\n      if (legendNameMap.get(dataItem.name)) {\n        // remove legend name duplicate\n        return null;\n      }\n      legendNameMap.set(dataItem.name, true);\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\r\n     * @type {Array.<module:echarts/model/Model>}\r\n     * @private\r\n     */\n    this._data = zrUtil.filter(legendData, function (item) {\n      return !!item;\n    });\n  };\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n    selected[name] = true;\n  };\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected;\n    // Default is true\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true);\n      // Initially, default value is true\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n      selected[name] = !selected[name];\n    });\n  };\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    // zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    symbolKeepAspect: true,\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit'\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parse, stringify } from 'zrender/lib/tool/color.js';\nimport * as graphic from '../../util/graphic.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle.js';\nimport { makeBackground } from '../helper/listComponent.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport ComponentView from '../../view/Component.js';\nimport { createSymbol } from '../../util/symbol.js';\nimport { createOrUpdatePatternFromDecal } from '../../util/decal.js';\nimport { getECData } from '../../util/innerStore.js';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\nvar LegendView = /** @class */function (_super) {\n  __extends(LegendView, _super);\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\r\n   * @override\r\n   */\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n    // selector has been normalized to an array in model\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    // Perform layout.\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition);\n    // Place mainGroup, based on the calculated `mainRect`.\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw();\n    // Render background after group is layout.\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name');\n      // Use empty string or \\n as a newline string\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group();\n        // @ts-ignore\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      }\n      // Representitive series.\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n      if (legendDrawnMap.get(name)) {\n        // Have been drawn\n        return;\n      }\n      // Legend to control series.\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\r\n         * `data.getVisual('style')` may be the color from the register\r\n         * in series. For example, for line series,\r\n         */\n        var style = data.getVisual('style');\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode, api);\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        if (ecModel.ssr) {\n          itemGroup.eachChild(function (child) {\n            var ecData = getECData(child);\n            ecData.seriesIndex = seriesModel.seriesIndex;\n            ecData.dataIndex = dataIndex;\n            ecData.ssrType = 'legend';\n          });\n        }\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n            if (!provider.containName(name)) {\n              return;\n            }\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill);\n            // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2;\n              // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n              style = zrUtil.extend(zrUtil.extend({}, style), {\n                fill: stringify(colorArr, 'rgba')\n              });\n            }\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode, api);\n            // FIXME: consider different series has items with the same name.\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId))\n            // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            if (ecModel.ssr) {\n              itemGroup.eachChild(function (child) {\n                var ecData = getECData(child);\n                ecData.seriesIndex = seriesModel.seriesIndex;\n                ecData.dataIndex = dataIndex;\n                ecData.ssrType = 'legend';\n              });\n            }\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect',\n            legendId: legendModel.id\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode, api) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var symbolKeepAspect = legendItemModel.get('symbolKeepAspect');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var style = getLegendStyle(legendIcon, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n    if (zrUtil.isFunction(seriesModel.getLegendIcon) && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle,\n        symbolKeepAspect: symbolKeepAspect\n      }));\n    }\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n    if (zrUtil.isString(formatter) && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (zrUtil.isFunction(formatter)) {\n      content = formatter(name);\n    }\n    var textColor = isSelected ? textStyleModel.getTextColor() : legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: textColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      }, {\n        inheritColor: textColor\n      })\n    }));\n    // Add a invisible rect to increase the area of mouse hover\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      style: {\n        // Cannot use 'invisible' because SVG SSR will miss the node\n        fill: 'transparent'\n      }\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup);\n    // @ts-ignore\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup();\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box(\n      // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      }\n      // Always align selector to content as 'middle'\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\r\n   * @protected\r\n   */\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\nfunction getLegendStyle(iconType, legendItemModel, lineVisualStyle, itemVisualStyle, drawType, isSelected, api) {\n  /**\r\n   * Use series style if is inherit;\r\n   * elsewise, use legend style\r\n   */\n  function handleCommonProps(style, visualStyle) {\n    // If lineStyle.width is 'auto', it is set to be 2 if series has border\n    if (style.lineWidth === 'auto') {\n      style.lineWidth = visualStyle.lineWidth > 0 ? 2 : 0;\n    }\n    each(style, function (propVal, propName) {\n      style[propName] === 'inherit' && (style[propName] = visualStyle[propName]);\n    });\n  }\n  // itemStyle\n  var itemStyleModel = legendItemModel.getModel('itemStyle');\n  var itemStyle = itemStyleModel.getItemStyle();\n  var iconBrushType = iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke';\n  var decalStyle = itemStyleModel.getShallow('decal');\n  itemStyle.decal = !decalStyle || decalStyle === 'inherit' ? itemVisualStyle.decal : createOrUpdatePatternFromDecal(decalStyle, api);\n  if (itemStyle.fill === 'inherit') {\n    /**\r\n     * Series with visualDrawType as 'stroke' should have\r\n     * series stroke as legend fill\r\n     */\n    itemStyle.fill = itemVisualStyle[drawType];\n  }\n  if (itemStyle.stroke === 'inherit') {\n    /**\r\n     * icon type with \"emptyXXX\" should use fill color\r\n     * in visual style\r\n     */\n    itemStyle.stroke = itemVisualStyle[iconBrushType];\n  }\n  if (itemStyle.opacity === 'inherit') {\n    /**\r\n     * Use lineStyle.opacity if drawType is stroke\r\n     */\n    itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n  }\n  handleCommonProps(itemStyle, itemVisualStyle);\n  // lineStyle\n  var legendLineModel = legendItemModel.getModel('lineStyle');\n  var lineStyle = legendLineModel.getLineStyle();\n  handleCommonProps(lineStyle, lineVisualStyle);\n  // Fix auto color to real color\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n  if (!isSelected) {\n    var borderWidth = legendItemModel.get('inactiveBorderWidth');\n    /**\r\n     * Since stroke is set to be inactiveBorderColor, it may occur that\r\n     * there is no border in series but border in legend, so we need to\r\n     * use border only when series has border if is set to be auto\r\n     */\n    var visualHasBorder = itemStyle[iconBrushType];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendItemModel.get('inactiveColor');\n    itemStyle.stroke = legendItemModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineModel.get('inactiveColor');\n    lineStyle.lineWidth = legendLineModel.get('inactiveWidth');\n  }\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill, opt.symbolKeepAspect);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n  return icon;\n}\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  });\n  // highlight after select\n  // TODO highlight immediately may cause animation loss.\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n  return emphasisState && emphasisState.hoverLayer;\n}\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { curry, each, hasOwn } from 'zrender/lib/core/util.js';\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var isAllSelect = methodName === 'allSelect' || methodName === 'inverseSelect';\n  var selectedMap = {};\n  var actionLegendIndices = [];\n  ecModel.eachComponent({\n    mainType: 'legend',\n    query: payload\n  }, function (legendModel) {\n    if (isAllSelect) {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n    }\n    makeSelectedMap(legendModel, selectedMap);\n    actionLegendIndices.push(legendModel.componentIndex);\n  });\n  var allSelectedMap = {};\n  // make selectedMap from all legend components\n  ecModel.eachComponent('legend', function (legendModel) {\n    each(selectedMap, function (isSelected, name) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](name);\n    });\n    makeSelectedMap(legendModel, allSelectedMap);\n  });\n  // Return the event explicitly\n  return isAllSelect ? {\n    selected: allSelectedMap,\n    // return legendIndex array to tell the developers which legends are allSelect / inverseSelect\n    legendIndex: actionLegendIndices\n  } : {\n    name: payload.name,\n    selected: allSelectedMap\n  };\n}\nfunction makeSelectedMap(legendModel, out) {\n  var selectedMap = out || {};\n  each(legendModel.getData(), function (model) {\n    var name = model.get('name');\n    // Wrap element\n    if (name === '\\n' || name === '') {\n      return;\n    }\n    var isItemSelected = legendModel.isSelected(name);\n    if (hasOwn(selectedMap, name)) {\n      // Unselected if any legend is unselected\n      selectedMap[name] = selectedMap[name] && isItemSelected;\n    } else {\n      selectedMap[name] = isItemSelected;\n    }\n  });\n  return selectedMap;\n}\nexport function installLegendAction(registers) {\n  /**\r\n   * @event legendToggleSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendToggleSelect'\r\n   * @property {string} [from]\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\r\n   * @event legendSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendSelect'\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\r\n   * @event legendUnSelect\r\n   * @type {Object}\r\n   * @property {string} type 'legendUnSelect'\r\n   * @property {string} name Series name or data item name\r\n   */\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport LegendModel from './LegendModel.js';\nimport LegendView from './LegendView.js';\nimport legendFilter from './legendFilter.js';\nimport { installLegendAction } from './legendAction.js';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel.js';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar ScrollableLegendModel = /** @class */function (_super) {\n  __extends(ScrollableLegendModel, _super);\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\r\n   * @param {number} scrollDataIndex\r\n   */\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n;\n// Do not `ignoreSize` to enable setting {left: 10, right: 10}.\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\n/**\r\n * Separate legend and scrollable legend to reduce package size.\r\n */\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as layoutUtil from '../../util/layout.js';\nimport LegendView from './LegendView.js';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\nvar ScrollableLegendView = /** @class */function (_super) {\n  __extends(ScrollableLegendView, _super);\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n    this.group.add(this._containerGroup = new Group());\n    this._containerGroup.add(this.getContentGroup());\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n    this._controllerGroup.removeAll();\n    this._containerGroup.removeClipPath();\n    this._containerGroup.__rectSize = null;\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this;\n    // Render content items.\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n    var controllerGroup = this._controllerGroup;\n    // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\r\n   * @override\r\n   */\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box(\n    // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup;\n    // Place items in contentGroup.\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box(\n    // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh];\n    // In case that the inner elements of contentGroup layout do not based on [0, 0]\n    var contentPos = [-contentRect.x, -contentRect.y];\n    // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    }\n    // Layout container group based on 0.\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true));\n    // Place containerGroup and controllerGroup and contentGroup.\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true);\n      // controller is on the right / bottom.\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      }\n      // controller is on the left / top.\n      else {\n        containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n      }\n    }\n    // Always align controller to content as 'middle'.\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos);\n    // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n    var mainRect = {\n      x: 0,\n      y: 0\n    };\n    // Consider content may be overflow (should be clipped).\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]);\n    // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      }));\n      // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    }\n    // Content translate animation.\n    var pageInfo = this._getPageInfo(legendModel);\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    },\n    // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n    this._updatePageInfoView(legendModel, pageInfo);\n    return mainRect;\n  };\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\r\n   *  contentPosition: Array.<number>, null when data item not found.\r\n   *  pageIndex: number, null when data item not found.\r\n   *  pageCount: number, always be a number, can be 0.\r\n   *  pagePrevDataIndex: number, null when no previous page.\r\n   *  pageNextDataIndex: number, null when no next page.\r\n   * }\r\n   */\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n    if (!targetItem) {\n      return result;\n    }\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s;\n    // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize\n      // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      || currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n          ++result.pageCount;\n        }\n      }\n      winEndItemInfo = currItemInfo;\n    }\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n      if (\n      // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)\n      // e.g., when page size is smaller than item size.\n      ) && winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n      winStartItemInfo = currItemInfo;\n    }\n    return result;\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex;\n      // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\r\n   * @event legendScroll\r\n   * @type {Object}\r\n   * @property {string} type 'legendScroll'\r\n   * @property {string} scrollDataIndex\r\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport ScrollableLegendModel from './ScrollableLegendModel.js';\nimport ScrollableLegendView from './ScrollableLegendView.js';\nimport installScrollableLegendAction from './scrollableLegendAction.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installLegendPlain } from './installLegendPlain.js';\nimport { install as installLegendScroll } from './installLegendScroll.js';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar InsideZoomModel = /** @class */function (_super) {\n  __extends(InsideZoomModel, _super);\n  function InsideZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = InsideZoomModel.type;\n    return _this;\n  }\n  InsideZoomModel.type = 'dataZoom.inside';\n  InsideZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    disabled: false,\n    zoomLock: false,\n    zoomOnMouseWheel: true,\n    moveOnMouseMove: true,\n    moveOnMouseWheel: false,\n    preventDefaultMouseMove: true\n  });\n  return InsideZoomModel;\n}(DataZoomModel);\nexport default InsideZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n// Only create one roam controller for each coordinate system.\n// one roam controller might be refered by two inside data zoom\n// components (for example, one for x and one for y). When user\n// pan or zoom, only dispatch one action for those data zoom\n// components.\nimport RoamController from '../../component/helper/RoamController.js';\nimport * as throttleUtil from '../../util/throttle.js';\nimport { makeInner } from '../../util/model.js';\nimport { each, curry, createHashMap } from 'zrender/lib/core/util.js';\nimport { collectReferCoordSysModelInfo } from './helper.js';\nvar inner = makeInner();\nexport function setViewInfoToCoordSysRecord(api, dataZoomModel, getRange) {\n  inner(api).coordSysRecordMap.each(function (coordSysRecord) {\n    var dzInfo = coordSysRecord.dataZoomInfoMap.get(dataZoomModel.uid);\n    if (dzInfo) {\n      dzInfo.getRange = getRange;\n    }\n  });\n}\nexport function disposeCoordSysRecordIfNeeded(api, dataZoomModel) {\n  var coordSysRecordMap = inner(api).coordSysRecordMap;\n  var coordSysKeyArr = coordSysRecordMap.keys();\n  for (var i = 0; i < coordSysKeyArr.length; i++) {\n    var coordSysKey = coordSysKeyArr[i];\n    var coordSysRecord = coordSysRecordMap.get(coordSysKey);\n    var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n    if (dataZoomInfoMap) {\n      var dzUid = dataZoomModel.uid;\n      var dzInfo = dataZoomInfoMap.get(dzUid);\n      if (dzInfo) {\n        dataZoomInfoMap.removeKey(dzUid);\n        if (!dataZoomInfoMap.keys().length) {\n          disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        }\n      }\n    }\n  }\n}\nfunction disposeCoordSysRecord(coordSysRecordMap, coordSysRecord) {\n  if (coordSysRecord) {\n    coordSysRecordMap.removeKey(coordSysRecord.model.uid);\n    var controller = coordSysRecord.controller;\n    controller && controller.dispose();\n  }\n}\nfunction createCoordSysRecord(api, coordSysModel) {\n  // These init props will never change after record created.\n  var coordSysRecord = {\n    model: coordSysModel,\n    containsPoint: curry(containsPoint, coordSysModel),\n    dispatchAction: curry(dispatchAction, api),\n    dataZoomInfoMap: null,\n    controller: null\n  };\n  // Must not do anything depends on coordSysRecord outside the event handler here,\n  // because coordSysRecord not completed yet.\n  var controller = coordSysRecord.controller = new RoamController(api.getZr());\n  each(['pan', 'zoom', 'scrollMove'], function (eventName) {\n    controller.on(eventName, function (event) {\n      var batch = [];\n      coordSysRecord.dataZoomInfoMap.each(function (dzInfo) {\n        // Check whether the behaviors (zoomOnMouseWheel, moveOnMouseMove,\n        // moveOnMouseWheel, ...) enabled.\n        if (!event.isAvailableBehavior(dzInfo.model.option)) {\n          return;\n        }\n        var method = (dzInfo.getRange || {})[eventName];\n        var range = method && method(dzInfo.dzReferCoordSysInfo, coordSysRecord.model.mainType, coordSysRecord.controller, event);\n        !dzInfo.model.get('disabled', true) && range && batch.push({\n          dataZoomId: dzInfo.model.id,\n          start: range[0],\n          end: range[1]\n        });\n      });\n      batch.length && coordSysRecord.dispatchAction(batch);\n    });\n  });\n  return coordSysRecord;\n}\n/**\r\n * This action will be throttled.\r\n */\nfunction dispatchAction(api, batch) {\n  if (!api.isDisposed()) {\n    api.dispatchAction({\n      type: 'dataZoom',\n      animation: {\n        easing: 'cubicOut',\n        duration: 100\n      },\n      batch: batch\n    });\n  }\n}\nfunction containsPoint(coordSysModel, e, x, y) {\n  return coordSysModel.coordinateSystem.containPoint([x, y]);\n}\n/**\r\n * Merge roamController settings when multiple dataZooms share one roamController.\r\n */\nfunction mergeControllerParams(dataZoomInfoMap) {\n  var controlType;\n  // DO NOT use reserved word (true, false, undefined) as key literally. Even if encapsulated\n  // as string, it is probably revert to reserved word by compress tool. See #7411.\n  var prefix = 'type_';\n  var typePriority = {\n    'type_true': 2,\n    'type_move': 1,\n    'type_false': 0,\n    'type_undefined': -1\n  };\n  var preventDefaultMouseMove = true;\n  dataZoomInfoMap.each(function (dataZoomInfo) {\n    var dataZoomModel = dataZoomInfo.model;\n    var oneType = dataZoomModel.get('disabled', true) ? false : dataZoomModel.get('zoomLock', true) ? 'move' : true;\n    if (typePriority[prefix + oneType] > typePriority[prefix + controlType]) {\n      controlType = oneType;\n    }\n    // Prevent default move event by default. If one false, do not prevent. Otherwise\n    // users may be confused why it does not work when multiple insideZooms exist.\n    preventDefaultMouseMove = preventDefaultMouseMove && dataZoomModel.get('preventDefaultMouseMove', true);\n  });\n  return {\n    controlType: controlType,\n    opt: {\n      // RoamController will enable all of these functionalities,\n      // and the final behavior is determined by its event listener\n      // provided by each inside zoom.\n      zoomOnMouseWheel: true,\n      moveOnMouseMove: true,\n      moveOnMouseWheel: true,\n      preventDefaultMouseMove: !!preventDefaultMouseMove\n    }\n  };\n}\nexport function installDataZoomRoamProcessor(registers) {\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.FILTER, function (ecModel, api) {\n    var apiInner = inner(api);\n    var coordSysRecordMap = apiInner.coordSysRecordMap || (apiInner.coordSysRecordMap = createHashMap());\n    coordSysRecordMap.each(function (coordSysRecord) {\n      // `coordSysRecordMap` always exists (because it holds the `roam controller`, which should\n      // better not re-create each time), but clear `dataZoomInfoMap` each round of the workflow.\n      coordSysRecord.dataZoomInfoMap = null;\n    });\n    ecModel.eachComponent({\n      mainType: 'dataZoom',\n      subType: 'inside'\n    }, function (dataZoomModel) {\n      var dzReferCoordSysWrap = collectReferCoordSysModelInfo(dataZoomModel);\n      each(dzReferCoordSysWrap.infoList, function (dzCoordSysInfo) {\n        var coordSysUid = dzCoordSysInfo.model.uid;\n        var coordSysRecord = coordSysRecordMap.get(coordSysUid) || coordSysRecordMap.set(coordSysUid, createCoordSysRecord(api, dzCoordSysInfo.model));\n        var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap || (coordSysRecord.dataZoomInfoMap = createHashMap());\n        // Notice these props might be changed each time for a single dataZoomModel.\n        dataZoomInfoMap.set(dataZoomModel.uid, {\n          dzReferCoordSysInfo: dzCoordSysInfo,\n          model: dataZoomModel,\n          getRange: null\n        });\n      });\n    });\n    // (1) Merge dataZoom settings for each coord sys and set to the roam controller.\n    // (2) Clear coord sys if not refered by any dataZoom.\n    coordSysRecordMap.each(function (coordSysRecord) {\n      var controller = coordSysRecord.controller;\n      var firstDzInfo;\n      var dataZoomInfoMap = coordSysRecord.dataZoomInfoMap;\n      if (dataZoomInfoMap) {\n        var firstDzKey = dataZoomInfoMap.keys()[0];\n        if (firstDzKey != null) {\n          firstDzInfo = dataZoomInfoMap.get(firstDzKey);\n        }\n      }\n      if (!firstDzInfo) {\n        disposeCoordSysRecord(coordSysRecordMap, coordSysRecord);\n        return;\n      }\n      var controllerParams = mergeControllerParams(dataZoomInfoMap);\n      controller.enable(controllerParams.controlType, controllerParams.opt);\n      controller.setPointerChecker(coordSysRecord.containsPoint);\n      throttleUtil.createOrUpdate(coordSysRecord, 'dispatchAction', firstDzInfo.model.get('throttle', true), 'fixRate');\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomView from './DataZoomView.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport * as roams from './roams.js';\nimport { bind } from 'zrender/lib/core/util.js';\nvar InsideZoomView = /** @class */function (_super) {\n  __extends(InsideZoomView, _super);\n  function InsideZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'dataZoom.inside';\n    return _this;\n  }\n  InsideZoomView.prototype.render = function (dataZoomModel, ecModel, api) {\n    _super.prototype.render.apply(this, arguments);\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      return;\n    }\n    // Hence the `throttle` util ensures to preserve command order,\n    // here simply updating range all the time will not cause missing\n    // any of the the roam change.\n    this.range = dataZoomModel.getPercentRange();\n    // Reset controllers.\n    roams.setViewInfoToCoordSysRecord(api, dataZoomModel, {\n      pan: bind(getRangeHandlers.pan, this),\n      zoom: bind(getRangeHandlers.zoom, this),\n      scrollMove: bind(getRangeHandlers.scrollMove, this)\n    });\n  };\n  InsideZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  InsideZoomView.prototype._clear = function () {\n    roams.disposeCoordSysRecordIfNeeded(this.api, this.dataZoomModel);\n    this.range = null;\n  };\n  InsideZoomView.type = 'dataZoom.inside';\n  return InsideZoomView;\n}(DataZoomView);\nvar getRangeHandlers = {\n  zoom: function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var directionInfo = getDirectionInfo[coordSysMainType](null, [e.originX, e.originY], axisModel, controller, coordSysInfo);\n    var percentPoint = (directionInfo.signal > 0 ? directionInfo.pixelStart + directionInfo.pixelLength - directionInfo.pixel : directionInfo.pixel - directionInfo.pixelStart) / directionInfo.pixelLength * (range[1] - range[0]) + range[0];\n    var scale = Math.max(1 / e.scale, 0);\n    range[0] = (range[0] - percentPoint) * scale + percentPoint;\n    range[1] = (range[1] - percentPoint) * scale + percentPoint;\n    // Restrict range.\n    var minMaxSpan = this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    sliderMove(0, range, [0, 100], 0, minMaxSpan.minSpan, minMaxSpan.maxSpan);\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  },\n  pan: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([e.oldX, e.oldY], [e.newX, e.newY], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * directionInfo.pixel / directionInfo.pixelLength;\n  }),\n  scrollMove: makeMover(function (range, axisModel, coordSysInfo, coordSysMainType, controller, e) {\n    var directionInfo = getDirectionInfo[coordSysMainType]([0, 0], [e.scrollDelta, e.scrollDelta], axisModel, controller, coordSysInfo);\n    return directionInfo.signal * (range[1] - range[0]) * e.scrollDelta;\n  })\n};\nfunction makeMover(getPercentDelta) {\n  return function (coordSysInfo, coordSysMainType, controller, e) {\n    var lastRange = this.range;\n    var range = lastRange.slice();\n    // Calculate transform by the first axis.\n    var axisModel = coordSysInfo.axisModels[0];\n    if (!axisModel) {\n      return;\n    }\n    var percentDelta = getPercentDelta(range, axisModel, coordSysInfo, coordSysMainType, controller, e);\n    sliderMove(percentDelta, range, [0, 100], 'all');\n    this.range = range;\n    if (lastRange[0] !== range[0] || lastRange[1] !== range[1]) {\n      return range;\n    }\n  };\n}\nvar getDirectionInfo = {\n  grid: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    oldPoint = oldPoint || [0, 0];\n    if (axis.dim === 'x') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // axis.dim === 'y'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  polar: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var ret = {};\n    var polar = coordSysInfo.model.coordinateSystem;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var angleExtent = polar.getAngleAxis().getExtent();\n    oldPoint = oldPoint ? polar.pointToCoord(oldPoint) : [0, 0];\n    newPoint = polar.pointToCoord(newPoint);\n    if (axisModel.mainType === 'radiusAxis') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      // ret.pixelLength = Math.abs(radiusExtent[1] - radiusExtent[0]);\n      // ret.pixelStart = Math.min(radiusExtent[0], radiusExtent[1]);\n      ret.pixelLength = radiusExtent[1] - radiusExtent[0];\n      ret.pixelStart = radiusExtent[0];\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'angleAxis'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      // ret.pixelLength = Math.abs(angleExtent[1] - angleExtent[0]);\n      // ret.pixelStart = Math.min(angleExtent[0], angleExtent[1]);\n      ret.pixelLength = angleExtent[1] - angleExtent[0];\n      ret.pixelStart = angleExtent[0];\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  },\n  singleAxis: function (oldPoint, newPoint, axisModel, controller, coordSysInfo) {\n    var axis = axisModel.axis;\n    var rect = coordSysInfo.model.coordinateSystem.getRect();\n    var ret = {};\n    oldPoint = oldPoint || [0, 0];\n    if (axis.orient === 'horizontal') {\n      ret.pixel = newPoint[0] - oldPoint[0];\n      ret.pixelLength = rect.width;\n      ret.pixelStart = rect.x;\n      ret.signal = axis.inverse ? 1 : -1;\n    } else {\n      // 'vertical'\n      ret.pixel = newPoint[1] - oldPoint[1];\n      ret.pixelLength = rect.height;\n      ret.pixelStart = rect.y;\n      ret.signal = axis.inverse ? -1 : 1;\n    }\n    return ret;\n  }\n};\nexport default InsideZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport InsideZoomModel from './InsideZoomModel.js';\nimport InsideZoomView from './InsideZoomView.js';\nimport { installDataZoomRoamProcessor } from './roams.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  installCommon(registers);\n  registers.registerComponentModel(InsideZoomModel);\n  registers.registerComponentView(InsideZoomView);\n  installDataZoomRoamProcessor(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport DataZoomModel from './DataZoomModel.js';\nimport { inheritDefaultOption } from '../../util/component.js';\nvar SliderZoomModel = /** @class */function (_super) {\n  __extends(SliderZoomModel, _super);\n  function SliderZoomModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomModel.type;\n    return _this;\n  }\n  SliderZoomModel.type = 'dataZoom.slider';\n  SliderZoomModel.layoutMode = 'box';\n  SliderZoomModel.defaultOption = inheritDefaultOption(DataZoomModel.defaultOption, {\n    show: true,\n    // deault value can only be drived in view stage.\n    right: 'ph',\n    top: 'ph',\n    width: 'ph',\n    height: 'ph',\n    left: null,\n    bottom: null,\n    borderColor: '#d2dbee',\n    borderRadius: 3,\n    backgroundColor: 'rgba(47,69,84,0)',\n    // dataBackgroundColor: '#ddd',\n    dataBackground: {\n      lineStyle: {\n        color: '#d2dbee',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#d2dbee',\n        opacity: 0.2\n      }\n    },\n    selectedDataBackground: {\n      lineStyle: {\n        color: '#8fb0f7',\n        width: 0.5\n      },\n      areaStyle: {\n        color: '#8fb0f7',\n        opacity: 0.2\n      }\n    },\n    // Color of selected window.\n    fillerColor: 'rgba(135,175,274,0.2)',\n    handleIcon: 'path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z',\n    // Percent of the slider height\n    handleSize: '100%',\n    handleStyle: {\n      color: '#fff',\n      borderColor: '#ACB8D1'\n    },\n    moveHandleSize: 7,\n    moveHandleIcon: 'path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z',\n    moveHandleStyle: {\n      color: '#D2DBEE',\n      opacity: 0.7\n    },\n    showDetail: true,\n    showDataShadow: 'auto',\n    realtime: true,\n    zoomLock: false,\n    textStyle: {\n      color: '#6E7079'\n    },\n    brushSelect: true,\n    brushStyle: {\n      color: 'rgba(135,175,274,0.15)'\n    },\n    emphasis: {\n      handleLabel: {\n        show: true\n      },\n      handleStyle: {\n        borderColor: '#8FB0F7'\n      },\n      moveHandleStyle: {\n        color: '#8FB0F7'\n      }\n    }\n  });\n  return SliderZoomModel;\n}(DataZoomModel);\nexport default SliderZoomModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { __extends } from \"tslib\";\nimport { bind, each, isFunction, isString, indexOf } from 'zrender/lib/core/util.js';\nimport * as eventTool from 'zrender/lib/core/event.js';\nimport * as graphic from '../../util/graphic.js';\nimport * as throttle from '../../util/throttle.js';\nimport DataZoomView from './DataZoomView.js';\nimport { linearMap, asc, parsePercent } from '../../util/number.js';\nimport * as layout from '../../util/layout.js';\nimport sliderMove from '../helper/sliderMove.js';\nimport { getAxisMainType, collectReferCoordSysModelInfo } from './helper.js';\nimport { enableHoverEmphasis } from '../../util/states.js';\nimport { createSymbol, symbolBuildProxies } from '../../util/symbol.js';\nimport { deprecateLog } from '../../util/log.js';\nimport { createTextStyle } from '../../label/labelStyle.js';\nvar Rect = graphic.Rect;\n// Constants\nvar DEFAULT_LOCATION_EDGE_GAP = 7;\nvar DEFAULT_FRAME_BORDER_WIDTH = 1;\nvar DEFAULT_FILLER_SIZE = 30;\nvar DEFAULT_MOVE_HANDLE_SIZE = 7;\nvar HORIZONTAL = 'horizontal';\nvar VERTICAL = 'vertical';\nvar LABEL_GAP = 5;\nvar SHOW_DATA_SHADOW_SERIES_TYPE = ['line', 'bar', 'candlestick', 'scatter'];\nvar REALTIME_ANIMATION_CONFIG = {\n  easing: 'cubicOut',\n  duration: 100,\n  delay: 0\n};\nvar SliderZoomView = /** @class */function (_super) {\n  __extends(SliderZoomView, _super);\n  function SliderZoomView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = SliderZoomView.type;\n    _this._displayables = {};\n    return _this;\n  }\n  SliderZoomView.prototype.init = function (ecModel, api) {\n    this.api = api;\n    // A unique handler for each dataZoom component\n    this._onBrush = bind(this._onBrush, this);\n    this._onBrushEnd = bind(this._onBrushEnd, this);\n  };\n  SliderZoomView.prototype.render = function (dataZoomModel, ecModel, api, payload) {\n    _super.prototype.render.apply(this, arguments);\n    throttle.createOrUpdate(this, '_dispatchZoomAction', dataZoomModel.get('throttle'), 'fixRate');\n    this._orient = dataZoomModel.getOrient();\n    if (dataZoomModel.get('show') === false) {\n      this.group.removeAll();\n      return;\n    }\n    if (dataZoomModel.noTarget()) {\n      this._clear();\n      this.group.removeAll();\n      return;\n    }\n    // Notice: this._resetInterval() should not be executed when payload.type\n    // is 'dataZoom', origin this._range should be maintained, otherwise 'pan'\n    // or 'zoom' info will be missed because of 'throttle' of this.dispatchAction,\n    if (!payload || payload.type !== 'dataZoom' || payload.from !== this.uid) {\n      this._buildView();\n    }\n    this._updateView();\n  };\n  SliderZoomView.prototype.dispose = function () {\n    this._clear();\n    _super.prototype.dispose.apply(this, arguments);\n  };\n  SliderZoomView.prototype._clear = function () {\n    throttle.clear(this, '_dispatchZoomAction');\n    var zr = this.api.getZr();\n    zr.off('mousemove', this._onBrush);\n    zr.off('mouseup', this._onBrushEnd);\n  };\n  SliderZoomView.prototype._buildView = function () {\n    var thisGroup = this.group;\n    thisGroup.removeAll();\n    this._brushing = false;\n    this._displayables.brushRect = null;\n    this._resetLocation();\n    this._resetInterval();\n    var barGroup = this._displayables.sliderGroup = new graphic.Group();\n    this._renderBackground();\n    this._renderHandle();\n    this._renderDataShadow();\n    thisGroup.add(barGroup);\n    this._positionGroup();\n  };\n  SliderZoomView.prototype._resetLocation = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var showMoveHandle = dataZoomModel.get('brushSelect');\n    var moveHandleSize = showMoveHandle ? DEFAULT_MOVE_HANDLE_SIZE : 0;\n    // If some of x/y/width/height are not specified,\n    // auto-adapt according to target grid.\n    var coordRect = this._findCoordRect();\n    var ecSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    // Default align by coordinate system rect.\n    var positionInfo = this._orient === HORIZONTAL ? {\n      // Why using 'right', because right should be used in vertical,\n      // and it is better to be consistent for dealing with position param merge.\n      right: ecSize.width - coordRect.x - coordRect.width,\n      top: ecSize.height - DEFAULT_FILLER_SIZE - DEFAULT_LOCATION_EDGE_GAP - moveHandleSize,\n      width: coordRect.width,\n      height: DEFAULT_FILLER_SIZE\n    } : {\n      right: DEFAULT_LOCATION_EDGE_GAP,\n      top: coordRect.y,\n      width: DEFAULT_FILLER_SIZE,\n      height: coordRect.height\n    };\n    // Do not write back to option and replace value 'ph', because\n    // the 'ph' value should be recalculated when resize.\n    var layoutParams = layout.getLayoutParams(dataZoomModel.option);\n    // Replace the placeholder value.\n    each(['right', 'top', 'width', 'height'], function (name) {\n      if (layoutParams[name] === 'ph') {\n        layoutParams[name] = positionInfo[name];\n      }\n    });\n    var layoutRect = layout.getLayoutRect(layoutParams, ecSize);\n    this._location = {\n      x: layoutRect.x,\n      y: layoutRect.y\n    };\n    this._size = [layoutRect.width, layoutRect.height];\n    this._orient === VERTICAL && this._size.reverse();\n  };\n  SliderZoomView.prototype._positionGroup = function () {\n    var thisGroup = this.group;\n    var location = this._location;\n    var orient = this._orient;\n    // Just use the first axis to determine mapping.\n    var targetAxisModel = this.dataZoomModel.getFirstTargetAxisModel();\n    var inverse = targetAxisModel && targetAxisModel.get('inverse');\n    var sliderGroup = this._displayables.sliderGroup;\n    var otherAxisInverse = (this._dataShadowInfo || {}).otherAxisInverse;\n    // Transform barGroup.\n    sliderGroup.attr(orient === HORIZONTAL && !inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: 1\n    } : orient === HORIZONTAL && inverse ? {\n      scaleY: otherAxisInverse ? 1 : -1,\n      scaleX: -1\n    } : orient === VERTICAL && !inverse ? {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: 1,\n      rotation: Math.PI / 2\n    }\n    // Don't use Math.PI, considering shadow direction.\n    : {\n      scaleY: otherAxisInverse ? -1 : 1,\n      scaleX: -1,\n      rotation: Math.PI / 2\n    });\n    // Position barGroup\n    var rect = thisGroup.getBoundingRect([sliderGroup]);\n    thisGroup.x = location.x - rect.x;\n    thisGroup.y = location.y - rect.y;\n    thisGroup.markRedraw();\n  };\n  SliderZoomView.prototype._getViewExtent = function () {\n    return [0, this._size[0]];\n  };\n  SliderZoomView.prototype._renderBackground = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var size = this._size;\n    var barGroup = this._displayables.sliderGroup;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    barGroup.add(new Rect({\n      silent: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: dataZoomModel.get('backgroundColor')\n      },\n      z2: -40\n    }));\n    // Click panel, over shadow, below handles.\n    var clickPanel = new Rect({\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1]\n      },\n      style: {\n        fill: 'transparent'\n      },\n      z2: 0,\n      onclick: bind(this._onClickPanel, this)\n    });\n    var zr = this.api.getZr();\n    if (brushSelect) {\n      clickPanel.on('mousedown', this._onBrushStart, this);\n      clickPanel.cursor = 'crosshair';\n      zr.on('mousemove', this._onBrush);\n      zr.on('mouseup', this._onBrushEnd);\n    } else {\n      zr.off('mousemove', this._onBrush);\n      zr.off('mouseup', this._onBrushEnd);\n    }\n    barGroup.add(clickPanel);\n  };\n  SliderZoomView.prototype._renderDataShadow = function () {\n    var info = this._dataShadowInfo = this._prepareDataShadowInfo();\n    this._displayables.dataShadowSegs = [];\n    if (!info) {\n      return;\n    }\n    var size = this._size;\n    var oldSize = this._shadowSize || [];\n    var seriesModel = info.series;\n    var data = seriesModel.getRawData();\n    var candlestickDim = seriesModel.getShadowDim && seriesModel.getShadowDim();\n    var otherDim = candlestickDim && data.getDimensionInfo(candlestickDim) ? seriesModel.getShadowDim() // @see candlestick\n    : info.otherDim;\n    if (otherDim == null) {\n      return;\n    }\n    var polygonPts = this._shadowPolygonPts;\n    var polylinePts = this._shadowPolylinePts;\n    // Not re-render if data doesn't change.\n    if (data !== this._shadowData || otherDim !== this._shadowDim || size[0] !== oldSize[0] || size[1] !== oldSize[1]) {\n      var otherDataExtent_1 = data.getDataExtent(otherDim);\n      // Nice extent.\n      var otherOffset = (otherDataExtent_1[1] - otherDataExtent_1[0]) * 0.3;\n      otherDataExtent_1 = [otherDataExtent_1[0] - otherOffset, otherDataExtent_1[1] + otherOffset];\n      var otherShadowExtent_1 = [0, size[1]];\n      var thisShadowExtent = [0, size[0]];\n      var areaPoints_1 = [[size[0], 0], [0, 0]];\n      var linePoints_1 = [];\n      var step_1 = thisShadowExtent[1] / (data.count() - 1);\n      var thisCoord_1 = 0;\n      // Optimize for large data shadow\n      var stride_1 = Math.round(data.count() / size[0]);\n      var lastIsEmpty_1;\n      data.each([otherDim], function (value, index) {\n        if (stride_1 > 0 && index % stride_1) {\n          thisCoord_1 += step_1;\n          return;\n        }\n        // FIXME\n        // Should consider axis.min/axis.max when drawing dataShadow.\n        // FIXME\n        // list\n        var isEmpty = value == null || isNaN(value) || value === '';\n        // See #4235.\n        var otherCoord = isEmpty ? 0 : linearMap(value, otherDataExtent_1, otherShadowExtent_1, true);\n        // Attempt to draw data shadow precisely when there are empty value.\n        if (isEmpty && !lastIsEmpty_1 && index) {\n          areaPoints_1.push([areaPoints_1[areaPoints_1.length - 1][0], 0]);\n          linePoints_1.push([linePoints_1[linePoints_1.length - 1][0], 0]);\n        } else if (!isEmpty && lastIsEmpty_1) {\n          areaPoints_1.push([thisCoord_1, 0]);\n          linePoints_1.push([thisCoord_1, 0]);\n        }\n        areaPoints_1.push([thisCoord_1, otherCoord]);\n        linePoints_1.push([thisCoord_1, otherCoord]);\n        thisCoord_1 += step_1;\n        lastIsEmpty_1 = isEmpty;\n      });\n      polygonPts = this._shadowPolygonPts = areaPoints_1;\n      polylinePts = this._shadowPolylinePts = linePoints_1;\n    }\n    this._shadowData = data;\n    this._shadowDim = otherDim;\n    this._shadowSize = [size[0], size[1]];\n    var dataZoomModel = this.dataZoomModel;\n    function createDataShadowGroup(isSelectedArea) {\n      var model = dataZoomModel.getModel(isSelectedArea ? 'selectedDataBackground' : 'dataBackground');\n      var group = new graphic.Group();\n      var polygon = new graphic.Polygon({\n        shape: {\n          points: polygonPts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('areaStyle').getAreaStyle(),\n        silent: true,\n        z2: -20\n      });\n      var polyline = new graphic.Polyline({\n        shape: {\n          points: polylinePts\n        },\n        segmentIgnoreThreshold: 1,\n        style: model.getModel('lineStyle').getLineStyle(),\n        silent: true,\n        z2: -19\n      });\n      group.add(polygon);\n      group.add(polyline);\n      return group;\n    }\n    // let dataBackgroundModel = dataZoomModel.getModel('dataBackground');\n    for (var i = 0; i < 3; i++) {\n      var group = createDataShadowGroup(i === 1);\n      this._displayables.sliderGroup.add(group);\n      this._displayables.dataShadowSegs.push(group);\n    }\n  };\n  SliderZoomView.prototype._prepareDataShadowInfo = function () {\n    var dataZoomModel = this.dataZoomModel;\n    var showDataShadow = dataZoomModel.get('showDataShadow');\n    if (showDataShadow === false) {\n      return;\n    }\n    // Find a representative series.\n    var result;\n    var ecModel = this.ecModel;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var seriesModels = dataZoomModel.getAxisProxy(axisDim, axisIndex).getTargetSeriesModels();\n      each(seriesModels, function (seriesModel) {\n        if (result) {\n          return;\n        }\n        if (showDataShadow !== true && indexOf(SHOW_DATA_SHADOW_SERIES_TYPE, seriesModel.get('type')) < 0) {\n          return;\n        }\n        var thisAxis = ecModel.getComponent(getAxisMainType(axisDim), axisIndex).axis;\n        var otherDim = getOtherDim(axisDim);\n        var otherAxisInverse;\n        var coordSys = seriesModel.coordinateSystem;\n        if (otherDim != null && coordSys.getOtherAxis) {\n          otherAxisInverse = coordSys.getOtherAxis(thisAxis).inverse;\n        }\n        otherDim = seriesModel.getData().mapDimension(otherDim);\n        result = {\n          thisAxis: thisAxis,\n          series: seriesModel,\n          thisDim: axisDim,\n          otherDim: otherDim,\n          otherAxisInverse: otherAxisInverse\n        };\n      }, this);\n    }, this);\n    return result;\n  };\n  SliderZoomView.prototype._renderHandle = function () {\n    var thisGroup = this.group;\n    var displayables = this._displayables;\n    var handles = displayables.handles = [null, null];\n    var handleLabels = displayables.handleLabels = [null, null];\n    var sliderGroup = this._displayables.sliderGroup;\n    var size = this._size;\n    var dataZoomModel = this.dataZoomModel;\n    var api = this.api;\n    var borderRadius = dataZoomModel.get('borderRadius') || 0;\n    var brushSelect = dataZoomModel.get('brushSelect');\n    var filler = displayables.filler = new Rect({\n      silent: brushSelect,\n      style: {\n        fill: dataZoomModel.get('fillerColor')\n      },\n      textConfig: {\n        position: 'inside'\n      }\n    });\n    sliderGroup.add(filler);\n    // Frame border.\n    sliderGroup.add(new Rect({\n      silent: true,\n      subPixelOptimize: true,\n      shape: {\n        x: 0,\n        y: 0,\n        width: size[0],\n        height: size[1],\n        r: borderRadius\n      },\n      style: {\n        // deprecated option\n        stroke: dataZoomModel.get('dataBackgroundColor') || dataZoomModel.get('borderColor'),\n        lineWidth: DEFAULT_FRAME_BORDER_WIDTH,\n        fill: 'rgba(0,0,0,0)'\n      }\n    }));\n    // Left and right handle to resize\n    each([0, 1], function (handleIndex) {\n      var iconStr = dataZoomModel.get('handleIcon');\n      if (!symbolBuildProxies[iconStr] && iconStr.indexOf('path://') < 0 && iconStr.indexOf('image://') < 0) {\n        // Compatitable with the old icon parsers. Which can use a path string without path://\n        iconStr = 'path://' + iconStr;\n        if (process.env.NODE_ENV !== 'production') {\n          deprecateLog('handleIcon now needs \\'path://\\' prefix when using a path string');\n        }\n      }\n      var path = createSymbol(iconStr, -1, 0, 2, 2, null, true);\n      path.attr({\n        cursor: getCursor(this._orient),\n        draggable: true,\n        drift: bind(this._onDragMove, this, handleIndex),\n        ondragend: bind(this._onDragEnd, this),\n        onmouseover: bind(this._showDataInfo, this, true),\n        onmouseout: bind(this._showDataInfo, this, false),\n        z2: 5\n      });\n      var bRect = path.getBoundingRect();\n      var handleSize = dataZoomModel.get('handleSize');\n      this._handleHeight = parsePercent(handleSize, this._size[1]);\n      this._handleWidth = bRect.width / bRect.height * this._handleHeight;\n      path.setStyle(dataZoomModel.getModel('handleStyle').getItemStyle());\n      path.style.strokeNoScale = true;\n      path.rectHover = true;\n      path.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'handleStyle']).getItemStyle();\n      enableHoverEmphasis(path);\n      var handleColor = dataZoomModel.get('handleColor'); // deprecated option\n      // Compatitable with previous version\n      if (handleColor != null) {\n        path.style.fill = handleColor;\n      }\n      sliderGroup.add(handles[handleIndex] = path);\n      var textStyleModel = dataZoomModel.getModel('textStyle');\n      var handleLabel = dataZoomModel.get('handleLabel') || {};\n      var handleLabelShow = handleLabel.show || false;\n      thisGroup.add(handleLabels[handleIndex] = new graphic.Text({\n        silent: true,\n        invisible: !handleLabelShow,\n        style: createTextStyle(textStyleModel, {\n          x: 0,\n          y: 0,\n          text: '',\n          verticalAlign: 'middle',\n          align: 'center',\n          fill: textStyleModel.getTextColor(),\n          font: textStyleModel.getFont()\n        }),\n        z2: 10\n      }));\n    }, this);\n    // Handle to move. Only visible when brushSelect is set true.\n    var actualMoveZone = filler;\n    if (brushSelect) {\n      var moveHandleHeight = parsePercent(dataZoomModel.get('moveHandleSize'), size[1]);\n      var moveHandle_1 = displayables.moveHandle = new graphic.Rect({\n        style: dataZoomModel.getModel('moveHandleStyle').getItemStyle(),\n        silent: true,\n        shape: {\n          r: [0, 0, 2, 2],\n          y: size[1] - 0.5,\n          height: moveHandleHeight\n        }\n      });\n      var iconSize = moveHandleHeight * 0.8;\n      var moveHandleIcon = displayables.moveHandleIcon = createSymbol(dataZoomModel.get('moveHandleIcon'), -iconSize / 2, -iconSize / 2, iconSize, iconSize, '#fff', true);\n      moveHandleIcon.silent = true;\n      moveHandleIcon.y = size[1] + moveHandleHeight / 2 - 0.5;\n      moveHandle_1.ensureState('emphasis').style = dataZoomModel.getModel(['emphasis', 'moveHandleStyle']).getItemStyle();\n      var moveZoneExpandSize = Math.min(size[1] / 2, Math.max(moveHandleHeight, 10));\n      actualMoveZone = displayables.moveZone = new graphic.Rect({\n        invisible: true,\n        shape: {\n          y: size[1] - moveZoneExpandSize,\n          height: moveHandleHeight + moveZoneExpandSize\n        }\n      });\n      actualMoveZone.on('mouseover', function () {\n        api.enterEmphasis(moveHandle_1);\n      }).on('mouseout', function () {\n        api.leaveEmphasis(moveHandle_1);\n      });\n      sliderGroup.add(moveHandle_1);\n      sliderGroup.add(moveHandleIcon);\n      sliderGroup.add(actualMoveZone);\n    }\n    actualMoveZone.attr({\n      draggable: true,\n      cursor: getCursor(this._orient),\n      drift: bind(this._onDragMove, this, 'all'),\n      ondragstart: bind(this._showDataInfo, this, true),\n      ondragend: bind(this._onDragEnd, this),\n      onmouseover: bind(this._showDataInfo, this, true),\n      onmouseout: bind(this._showDataInfo, this, false)\n    });\n  };\n  SliderZoomView.prototype._resetInterval = function () {\n    var range = this._range = this.dataZoomModel.getPercentRange();\n    var viewExtent = this._getViewExtent();\n    this._handleEnds = [linearMap(range[0], [0, 100], viewExtent, true), linearMap(range[1], [0, 100], viewExtent, true)];\n  };\n  SliderZoomView.prototype._updateInterval = function (handleIndex, delta) {\n    var dataZoomModel = this.dataZoomModel;\n    var handleEnds = this._handleEnds;\n    var viewExtend = this._getViewExtent();\n    var minMaxSpan = dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();\n    var percentExtent = [0, 100];\n    sliderMove(delta, handleEnds, viewExtend, dataZoomModel.get('zoomLock') ? 'all' : handleIndex, minMaxSpan.minSpan != null ? linearMap(minMaxSpan.minSpan, percentExtent, viewExtend, true) : null, minMaxSpan.maxSpan != null ? linearMap(minMaxSpan.maxSpan, percentExtent, viewExtend, true) : null);\n    var lastRange = this._range;\n    var range = this._range = asc([linearMap(handleEnds[0], viewExtend, percentExtent, true), linearMap(handleEnds[1], viewExtend, percentExtent, true)]);\n    return !lastRange || lastRange[0] !== range[0] || lastRange[1] !== range[1];\n  };\n  SliderZoomView.prototype._updateView = function (nonRealtime) {\n    var displaybles = this._displayables;\n    var handleEnds = this._handleEnds;\n    var handleInterval = asc(handleEnds.slice());\n    var size = this._size;\n    each([0, 1], function (handleIndex) {\n      // Handles\n      var handle = displaybles.handles[handleIndex];\n      var handleHeight = this._handleHeight;\n      handle.attr({\n        scaleX: handleHeight / 2,\n        scaleY: handleHeight / 2,\n        // This is a trick, by adding an extra tiny offset to let the default handle's end point align to the drag window.\n        // NOTE: It may affect some custom shapes a bit. But we prefer to have better result by default.\n        x: handleEnds[handleIndex] + (handleIndex ? -1 : 1),\n        y: size[1] / 2 - handleHeight / 2\n      });\n    }, this);\n    // Filler\n    displaybles.filler.setShape({\n      x: handleInterval[0],\n      y: 0,\n      width: handleInterval[1] - handleInterval[0],\n      height: size[1]\n    });\n    var viewExtent = {\n      x: handleInterval[0],\n      width: handleInterval[1] - handleInterval[0]\n    };\n    // Move handle\n    if (displaybles.moveHandle) {\n      displaybles.moveHandle.setShape(viewExtent);\n      displaybles.moveZone.setShape(viewExtent);\n      // Force update path on the invisible object\n      displaybles.moveZone.getBoundingRect();\n      displaybles.moveHandleIcon && displaybles.moveHandleIcon.attr('x', viewExtent.x + viewExtent.width / 2);\n    }\n    // update clip path of shadow.\n    var dataShadowSegs = displaybles.dataShadowSegs;\n    var segIntervals = [0, handleInterval[0], handleInterval[1], size[0]];\n    for (var i = 0; i < dataShadowSegs.length; i++) {\n      var segGroup = dataShadowSegs[i];\n      var clipPath = segGroup.getClipPath();\n      if (!clipPath) {\n        clipPath = new graphic.Rect();\n        segGroup.setClipPath(clipPath);\n      }\n      clipPath.setShape({\n        x: segIntervals[i],\n        y: 0,\n        width: segIntervals[i + 1] - segIntervals[i],\n        height: size[1]\n      });\n    }\n    this._updateDataInfo(nonRealtime);\n  };\n  SliderZoomView.prototype._updateDataInfo = function (nonRealtime) {\n    var dataZoomModel = this.dataZoomModel;\n    var displaybles = this._displayables;\n    var handleLabels = displaybles.handleLabels;\n    var orient = this._orient;\n    var labelTexts = ['', ''];\n    // FIXME\n    // dateformatterautoformatterec2 date.getAutoFormatter\n    if (dataZoomModel.get('showDetail')) {\n      var axisProxy = dataZoomModel.findRepresentativeAxisProxy();\n      if (axisProxy) {\n        var axis = axisProxy.getAxisModel().axis;\n        var range = this._range;\n        var dataInterval = nonRealtime\n        // See #4434, data and axis are not processed and reset yet in non-realtime mode.\n        ? axisProxy.calculateDataWindow({\n          start: range[0],\n          end: range[1]\n        }).valueWindow : axisProxy.getDataValueWindow();\n        labelTexts = [this._formatLabel(dataInterval[0], axis), this._formatLabel(dataInterval[1], axis)];\n      }\n    }\n    var orderedHandleEnds = asc(this._handleEnds.slice());\n    setLabel.call(this, 0);\n    setLabel.call(this, 1);\n    function setLabel(handleIndex) {\n      // Label\n      // Text should not transform by barGroup.\n      // Ignore handlers transform\n      var barTransform = graphic.getTransform(displaybles.handles[handleIndex].parent, this.group);\n      var direction = graphic.transformDirection(handleIndex === 0 ? 'right' : 'left', barTransform);\n      var offset = this._handleWidth / 2 + LABEL_GAP;\n      var textPoint = graphic.applyTransform([orderedHandleEnds[handleIndex] + (handleIndex === 0 ? -offset : offset), this._size[1] / 2], barTransform);\n      handleLabels[handleIndex].setStyle({\n        x: textPoint[0],\n        y: textPoint[1],\n        verticalAlign: orient === HORIZONTAL ? 'middle' : direction,\n        align: orient === HORIZONTAL ? direction : 'center',\n        text: labelTexts[handleIndex]\n      });\n    }\n  };\n  SliderZoomView.prototype._formatLabel = function (value, axis) {\n    var dataZoomModel = this.dataZoomModel;\n    var labelFormatter = dataZoomModel.get('labelFormatter');\n    var labelPrecision = dataZoomModel.get('labelPrecision');\n    if (labelPrecision == null || labelPrecision === 'auto') {\n      labelPrecision = axis.getPixelPrecision();\n    }\n    var valueStr = value == null || isNaN(value) ? ''\n    // FIXME Glue code\n    : axis.type === 'category' || axis.type === 'time' ? axis.scale.getLabel({\n      value: Math.round(value)\n    })\n    // param of toFixed should less then 20.\n    : value.toFixed(Math.min(labelPrecision, 20));\n    return isFunction(labelFormatter) ? labelFormatter(value, valueStr) : isString(labelFormatter) ? labelFormatter.replace('{value}', valueStr) : valueStr;\n  };\n  /**\r\n   * @param isEmphasis true: show, false: hide\r\n   */\n  SliderZoomView.prototype._showDataInfo = function (isEmphasis) {\n    var handleLabel = this.dataZoomModel.get('handleLabel') || {};\n    var normalShow = handleLabel.show || false;\n    var emphasisHandleLabel = this.dataZoomModel.getModel(['emphasis', 'handleLabel']);\n    var emphasisShow = emphasisHandleLabel.get('show') || false;\n    // Dragging is considered as emphasis, unless emphasisShow is false\n    var toShow = isEmphasis || this._dragging ? emphasisShow : normalShow;\n    var displayables = this._displayables;\n    var handleLabels = displayables.handleLabels;\n    handleLabels[0].attr('invisible', !toShow);\n    handleLabels[1].attr('invisible', !toShow);\n    // Highlight move handle\n    displayables.moveHandle && this.api[toShow ? 'enterEmphasis' : 'leaveEmphasis'](displayables.moveHandle, 1);\n  };\n  SliderZoomView.prototype._onDragMove = function (handleIndex, dx, dy, event) {\n    this._dragging = true;\n    // For mobile device, prevent screen slider on the button.\n    eventTool.stop(event.event);\n    // Transform dx, dy to bar coordination.\n    var barTransform = this._displayables.sliderGroup.getLocalTransform();\n    var vertex = graphic.applyTransform([dx, dy], barTransform, true);\n    var changed = this._updateInterval(handleIndex, vertex[0]);\n    var realtime = this.dataZoomModel.get('realtime');\n    this._updateView(!realtime);\n    // Avoid dispatch dataZoom repeatly but range not changed,\n    // which cause bad visual effect when progressive enabled.\n    changed && realtime && this._dispatchZoomAction(true);\n  };\n  SliderZoomView.prototype._onDragEnd = function () {\n    this._dragging = false;\n    this._showDataInfo(false);\n    // While in realtime mode and stream mode, dispatch action when\n    // drag end will cause the whole view rerender, which is unnecessary.\n    var realtime = this.dataZoomModel.get('realtime');\n    !realtime && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onClickPanel = function (e) {\n    var size = this._size;\n    var localPoint = this._displayables.sliderGroup.transformCoordToLocal(e.offsetX, e.offsetY);\n    if (localPoint[0] < 0 || localPoint[0] > size[0] || localPoint[1] < 0 || localPoint[1] > size[1]) {\n      return;\n    }\n    var handleEnds = this._handleEnds;\n    var center = (handleEnds[0] + handleEnds[1]) / 2;\n    var changed = this._updateInterval('all', localPoint[0] - center);\n    this._updateView();\n    changed && this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrushStart = function (e) {\n    var x = e.offsetX;\n    var y = e.offsetY;\n    this._brushStart = new graphic.Point(x, y);\n    this._brushing = true;\n    this._brushStartTime = +new Date();\n    // this._updateBrushRect(x, y);\n  };\n  SliderZoomView.prototype._onBrushEnd = function (e) {\n    if (!this._brushing) {\n      return;\n    }\n    var brushRect = this._displayables.brushRect;\n    this._brushing = false;\n    if (!brushRect) {\n      return;\n    }\n    brushRect.attr('ignore', true);\n    var brushShape = brushRect.shape;\n    var brushEndTime = +new Date();\n    // console.log(brushEndTime - this._brushStartTime);\n    if (brushEndTime - this._brushStartTime < 200 && Math.abs(brushShape.width) < 5) {\n      // Will treat it as a click\n      return;\n    }\n    var viewExtend = this._getViewExtent();\n    var percentExtent = [0, 100];\n    this._range = asc([linearMap(brushShape.x, viewExtend, percentExtent, true), linearMap(brushShape.x + brushShape.width, viewExtend, percentExtent, true)]);\n    this._handleEnds = [brushShape.x, brushShape.x + brushShape.width];\n    this._updateView();\n    this._dispatchZoomAction(false);\n  };\n  SliderZoomView.prototype._onBrush = function (e) {\n    if (this._brushing) {\n      // For mobile device, prevent screen slider on the button.\n      eventTool.stop(e.event);\n      this._updateBrushRect(e.offsetX, e.offsetY);\n    }\n  };\n  SliderZoomView.prototype._updateBrushRect = function (mouseX, mouseY) {\n    var displayables = this._displayables;\n    var dataZoomModel = this.dataZoomModel;\n    var brushRect = displayables.brushRect;\n    if (!brushRect) {\n      brushRect = displayables.brushRect = new Rect({\n        silent: true,\n        style: dataZoomModel.getModel('brushStyle').getItemStyle()\n      });\n      displayables.sliderGroup.add(brushRect);\n    }\n    brushRect.attr('ignore', false);\n    var brushStart = this._brushStart;\n    var sliderGroup = this._displayables.sliderGroup;\n    var endPoint = sliderGroup.transformCoordToLocal(mouseX, mouseY);\n    var startPoint = sliderGroup.transformCoordToLocal(brushStart.x, brushStart.y);\n    var size = this._size;\n    endPoint[0] = Math.max(Math.min(size[0], endPoint[0]), 0);\n    brushRect.setShape({\n      x: startPoint[0],\n      y: 0,\n      width: endPoint[0] - startPoint[0],\n      height: size[1]\n    });\n  };\n  /**\r\n   * This action will be throttled.\r\n   */\n  SliderZoomView.prototype._dispatchZoomAction = function (realtime) {\n    var range = this._range;\n    this.api.dispatchAction({\n      type: 'dataZoom',\n      from: this.uid,\n      dataZoomId: this.dataZoomModel.id,\n      animation: realtime ? REALTIME_ANIMATION_CONFIG : null,\n      start: range[0],\n      end: range[1]\n    });\n  };\n  SliderZoomView.prototype._findCoordRect = function () {\n    // Find the grid corresponding to the first axis referred by dataZoom.\n    var rect;\n    var coordSysInfoList = collectReferCoordSysModelInfo(this.dataZoomModel).infoList;\n    if (!rect && coordSysInfoList.length) {\n      var coordSys = coordSysInfoList[0].model.coordinateSystem;\n      rect = coordSys.getRect && coordSys.getRect();\n    }\n    if (!rect) {\n      var width = this.api.getWidth();\n      var height = this.api.getHeight();\n      rect = {\n        x: width * 0.2,\n        y: height * 0.2,\n        width: width * 0.6,\n        height: height * 0.6\n      };\n    }\n    return rect;\n  };\n  SliderZoomView.type = 'dataZoom.slider';\n  return SliderZoomView;\n}(DataZoomView);\nfunction getOtherDim(thisDim) {\n  // FIXME\n  // getOtherAxis\n  var map = {\n    x: 'y',\n    y: 'x',\n    radius: 'angle',\n    angle: 'radius'\n  };\n  return map[thisDim];\n}\nfunction getCursor(orient) {\n  return orient === 'vertical' ? 'ns-resize' : 'ew-resize';\n}\nexport default SliderZoomView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport SliderZoomModel from './SliderZoomModel.js';\nimport SliderZoomView from './SliderZoomView.js';\nimport installCommon from './installCommon.js';\nexport function install(registers) {\n  registers.registerComponentModel(SliderZoomModel);\n  registers.registerComponentView(SliderZoomView);\n  installCommon(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport { use } from '../../extension.js';\nimport { install as installDataZoomInside } from './installDataZoomInside.js';\nimport { install as installDataZoomSlider } from './installDataZoomSlider.js';\nexport function install(registers) {\n  use(installDataZoomInside);\n  use(installDataZoomSlider);\n  // Do not install './dataZoomSelect',\n  // since it only work for toolbox dataZoom.\n}","import { __extends } from \"tslib\";\nimport * as util from '../core/util.js';\nimport { devicePixelRatio } from '../config.js';\nimport Eventful from '../core/Eventful.js';\nimport { getCanvasGradient } from './helper.js';\nimport { createCanvasPattern } from './graphic.js';\nimport BoundingRect from '../core/BoundingRect.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { platformApi } from '../core/platform.js';\nfunction createDom(id, painter, dpr) {\n    var newDom = platformApi.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            util.disableUserSelect(dom);\n            dom.onselectstart = function () { return false; };\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.painter = painter;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDRAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDRAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el && el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    var shouldCache = clearColor.global || (clearColor.__width === width\n                        && clearColor.__height === height);\n                    clearColorGradientOrPattern = shouldCache\n                        && clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                    clearColor.__width = width;\n                    clearColor.__height = height;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColor.scaleX = clearColor.scaleX || dpr;\n                    clearColor.scaleY = clearColor.scaleY || dpr;\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config.js';\nimport * as util from '../core/util.js';\nimport Layer from './Layer.js';\nimport requestAnimationFrame from '../animation/requestAnimationFrame.js';\nimport env from '../core/env.js';\nimport { brush, brushSingle } from './graphic.js';\nimport { REDRAW_BIT } from '../graphic/constants.js';\nimport { getSize } from './helper.js';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            util.disableUserSelect(root);\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = getSize(root, 0, opts);\n            this._height = getSize(root, 1, opts);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('ZLevel ' + zlevel + ' has been used already');\n            }\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            if (process.env.NODE_ENV !== 'production') {\n                util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            }\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.painter || (layer.painter = this);\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDRAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            var root = this.root;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = getSize(root, 0, opts);\n            height = getSize(root, 1, opts);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter.js';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}"],"names":["Browser","Env","env","detect","ua","browser","firefox","ie","edge","weChat","style","DEFAULT_FONT_SIZE","DEFAULT_FONT_FAMILY","DEFAULT_FONT","OFFSET","SCALE","defaultWidthMapStr","getTextWidthMap","mapStr","map","i","char","size","DEFAULT_TEXT_WIDTH_MAP","platformApi","_ctx","_cachedFont","text","font","canvas","res","fontSize","width","preCalcWidth","src","onload","onerror","image","BUILTIN_OBJECT","reduce","obj","val","TYPED_ARRAY","objToString","arrayProto","nativeForEach","nativeFilter","nativeSlice","nativeMap","ctorFunction","protoFunction","protoKey","idStart","guid","logError","args","_i","clone","source","result","typeStr","isPrimitive","len","Ctor","isDom","key","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","extend","defaults","overlay","keysArr","keys","indexOf","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","mixin","override","keyList","isArrayLike","data","each","arr","cb","context","slice","memo","filter","bindPolyfill","func","bind","isFunction","curry","isString","isStringSafe","isNumber","type","isTypedArray","isGradientObject","isImagePatternObject","eqNaN","retrieve","retrieve2","value0","value1","retrieve3","value2","normalizeCssArray","assert","condition","message","trim","str","primitiveKey","setAsPrimitive","MapPolyfill","existed","callback","isNativeMapSupported","maybeNativeMap","HashMap","isArr","thisMap","visit","createHashMap","concatArray","a","b","newArray","offset","createObject","proto","properties","StyleCtor","disableUserSelect","dom","domStyle","hasOwn","own","noop","RADIAN_TO_DEGREE","create","x","y","v","add","out","v1","v2","sub","lenSquare","scale","s","normalize","d","distance","dist","distanceSquare","distSquare","applyTransform","m","min","max","Param","Draggable","handler","e","draggingTarget","dx","dy","dropTarget","lastDropTarget","Eventful","eventProcessors","event","query","_h","eventProcessor","wrap","lastIndex","lastWrap","eventName","eventType","newList","l","argLen","hItem","ctx","LN2","determinant","rows","rank","rowStart","rowMask","colMask","detCache","cacheKey","fullRank","colStart","subRowMask","subRowStart","sum","j","colLocalIdx","colTag","buildTransformer","dest","mA","det","vh","srcPointX","srcPointY","pk","EVENT_SAVED_PROP","_calcOut","transformLocalCoord","elFrom","elTarget","inX","inY","transformCoordWithViewport","el","inverse","isCanvasEl","saved","markers","prepareCoordMarkers","transformer","preparePointerTransformer","propLR","propTB","marker","stl","idxLR","idxTB","transformerName","oldSrcCoords","srcCoords","destCoords","oldCoordTheSame","rect","ii","replaceReg","replaceMap","encodeHTML","c","MOUSE_EVENT_REG","firefoxNotSupportOffsetXY","clientToLocal","calculate","calculateZrXY","ex","ey","box","getNativeEvent","normalizeEvent","isTouch","touch","wheelDelta","getWheelDeltaMayPolyfill","button","rawWheelDelta","deltaX","deltaY","delta","sign","addEventListener","name","opt","removeEventListener","stop","isMiddleOrRightButtonOnMouseUpDown","GestureMgr","root","touches","trackItem","pos","eventUtil.clientToLocal","recognizers","gestureInfo","pointPair","center","tracks","trackLen","pinchEnd","pinchPre","pinchScale","pinchCenter","identity","copy","mul","m1","m2","out0","out1","out2","out3","out4","out5","translate","rotate","rad","pivot","aa","ac","atx","ab","ad","aty","st","ct","vx","vy","invert","Point","other","scalar","input","p","p2","p0","p1","t","onet","mathMin","mathMax","lt","rb","lb","rt","minTv","maxTv","BoundingRect","height","sx","sy","matrix.create","matrix.translate","matrix.scale","mtv","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","overlap","dMin","dMax","d0","d1","d2","d3","tx","ty","maxX","maxY","SILENT","makeEventPacket","eveType","targetInfo","stopEvent","eventTool.stop","EmptyProxy","_super","__extends","_this","HoveredResult","handlerNames","tmpRect","Handler","storage","painter","proxy","painterRoot","pointerSize","util.each","isOutside","isOutsideBoundary","lastHovered","lastHoveredTarget","hovered","hoveredTarget","eventControl","eventArgs","cursorStyle","eventKey","eventPacket","layer","exclude","list","setHoverTarget","candidates","targetSizeHalf","pointerRect","rStep","thetaStep","PI2","r","theta","x1","y1","stage","gestureMgr","vec2.dist","isHover","displayable","isSilent","ignoreClip","clipPath","hostEl","hoverCheckResult","handlerInstance","DEFAULT_MIN_MERGE","DEFAULT_MIN_GALLOPING","minRunLength","n","makeAscendingRun","lo","hi","compare","runHi","reverseRun","binaryInsertionSort","start","left","right","mid","gallopLeft","length","hint","lastOffset","maxOffset","tmp","gallopRight","TimSort","minGallop","runStart","runLength","stackSize","pushRun","_runStart","_runLength","mergeRuns","mergeAt","forceMergeRuns","start1","length1","start2","length2","k","mergeLow","mergeHigh","cursor1","cursor2","_minGallop","count1","count2","exit","customCursor","customDest","sort","remaining","ts","minRun","force","REDRAW_BIT","STYLE_CHANGED_BIT","SHAPE_CHANGED_BIT","invalidZErrorLogged","logInvalidZError","shapeCompareFunc","Storage","update","includeIgnore","displayList","roots","timsort","clipPaths","userSetClipPath","currentClipPath","parentClipPath","children","child","disp","decalEl","textGuide","textEl","idx","util.indexOf","requestAnimationFrame","easingFuncs","mathPow","mathSqrt","EPSILON","EPSILON_NUMERIC","THREE_SQRT","ONE_THIRD","_v0","v2Create","_v1","_v2","isAroundZero","isNotAroundZero","cubicAt","p3","cubicDerivativeAt","cubicRootAt","A","B","C","t1","disc","K","t2","discSqrt","Y1","Y2","T","ASqrt","t3","cubicExtrema","extrema","cubicSubdivide","p01","p12","p23","p012","p123","p0123","cubicProjectPoint","x0","y0","x2","y2","x3","y3","interval","prev","next","_t","v2DistSquare","cubicLength","iteration","px","py","step","quadraticAt","quadraticDerivativeAt","quadraticRootAt","quadraticExtremum","divider","quadraticSubdivide","quadraticProjectPoint","quadraticLength","regexp","createCubicEasingFunc","cubicEasingStr","cubic","points","a_1","b_1","c_1","d_1","roots_1","Clip","opts","globalTime","deltaTime","life","elapsedTime","percent","easingFunc","schedule","remainder","easing","Entry","LinkedList","entry","LRU","maxSize","removed","leastUsedEntry","kCSSColorTable","clampCssByte","clampCssFloat","f","parseCssInt","parseCssFloat","cssHueToRgb","h","lerpNumber","setRgba","g","copyRgba","colorCache","lastRemovedArr","putToCache","colorStr","rgbaArr","parse","cached","strLen","iv","op","ep","fname","params","alpha","hsla2rgba","hsla","rgba","lift","color","level","colorArr","stringify","lerp","normalizedValue","colors","fullOutput","leftIndex","rightIndex","leftColor","rightColor","dv","arrColor","lum","backgroundLum","liftedColorCache","liftColor","liftedColor","ret","isLinearGradient","isRadialGradient","arraySlice","interpolateNumber","interpolate1DArray","interpolate2DArray","len2","add1DArray","add2DArray","fillColorStops","val0","val1","len0","len1","shorterArr","shorterLen","last","fillArray","arrDim","arr0","arr1","arr0Len","arr1Len","isPreviousLarger","cloneValue","rgba2String","guessArrayDim","VALUE_TYPE_NUMBER","VALUE_TYPE_1D_ARRAY","VALUE_TYPE_2D_ARRAY","VALUE_TYPE_COLOR","VALUE_TYPE_LINEAR_GRADIENT","VALUE_TYPE_RADIAL_GRADIENT","VALUE_TYPE_UNKOWN","isGradientValueType","valType","isArrayValueType","tmpRgba","Track","propName","time","rawValue","keyframes","discrete","arrayDim","colorArray","color.parse","parsedGradient","colorStop","kf","maxTime","additiveTrack","kfs","kfsLen","lastKf","isDiscrete","isGradient","lastValue","startValue","isAdditive","valueKey","kfsNum","isValueColor","frameIdx","lastFrame","frame","nextFrame","w","targetArr","nextVal_1","isLinearGradient_1","nextColorStop","additiveValue","Animator","loop","allowDiscreteAnimation","additiveTo","props","propNames","track","initialValue","addtiveTrackKfs","lastFinalKf","duration","doneList","animation","abortedList","tracksKeys","trackName","additiveAnimators","self","clip","stillHasAdditiveAnimator","onframeList","forwardToLast","allAborted","trackKeys","firstOrLast","finalProps","getTime","Animation","animator","notTriggerFrameAndStageUpdate","nextClip","finished","options","TOUCH_CLICK_DELAY","globalEventSupported","localNativeListenerNames","mouseHandlerNames","touchHandlerNames","pointerEventNameMap","pointerHandlerNames","zrUtil.map","nm","globalNativeListenerNames","wheelEventSupported","isPointerFromTouch","pointerType","setTouchTimer","scope","markTouch","normalizeGlobalEvent","instance","FakeGlobalEvent","isLocalEl","elTmp","isLocal","zrUtil.noop","localDOMHandlers","downPoint","element","zrUtil.each","globalDOMHandlers","pointerCaptureReleasing","mountLocalDOMEventListeners","domHandlers","nativeEventName","mountSingleDOMEventListener","mountGlobalDOMEventListeners","mount","nativeEventListener","listener","unmountDOMEventListeners","mounted","DOMHandlerScope","domTarget","HandlerDomProxy","isPointerCapturing","globalHandlerScope","dpr","devicePixelRatio","DARK_MODE_THRESHOLD","DARK_LABEL_COLOR","LIGHT_LABEL_COLOR","LIGHTER_LABEL_COLOR","mIdentity","matrix.identity","scaleTmp","tmpTransform","originTransform","abs","Transformable","parentTransform","needLocalTransform","matrix.mul","matrix.copy","globalScaleRatio","relX","relY","matrix.invert","transformNode","ancestors","rotation","shearX","parent","ox","oy","invTransform","vector.applyTransform","transform","copyTransform","ax","ay","skewX","skewY","matrix.rotate","TRANSFORMABLE_PROPS","textWidthCache","getWidth","cacheOfFont","innerGetBoundingRect","textAlign","textBaseline","getLineHeight","adjustTextX","adjustTextY","getBoundingRect","textLines","uniondRect","verticalAlign","parsePercent","maxValue","calculateTextPosition","textPosition","halfHeight","textVerticalAlign","PRESERVED_NORMAL_STATE","PRIMARY_STATES_KEYS","DEFAULT_ANIMATABLE_MAP","tmpTextPosCalcRes","tmpBoundingRect","Element","forceUpdate","textConfig","innerTransformable","textStyleChanged","innerOrigin","layoutRect","textOrigin","relOriginX","relOriginY","textOffset","isInside","innerTextDefaultStyle","textFill","textStroke","autoStroke","backgroundColor","isDark","keyOrObj","toState","normalState","fromStateTransition","targetName","primaryKeys","states","noAnimation","stateName","keepCurrentStates","forceUseHoverLayer","toNormalState","hasStates","currentStates","animationCfg","state","useHoverLayer","textContent","stateObjects","notChange","stateObj","lastStateObj","mergedState","ancestor","oldState","newState","forceAdd","newStateExists","enable","mergedTextConfig","transition","needsRestoreToNormal","transitionTarget","hasTransition","propNeedsTransition","componentEl","zr","previousTextContent","cfg","guideLine","inHover","animators","leftAnimators","animationProps","animateTo","elProto","createLegacyProperty","privateKey","xKey","yKey","enhanceArray","animatable","reverse","animateToShallow","finishCount","doneHappened","cfgDone","cfgAborted","doneCb","abortedCb","copyArrShallow","is2DArray","copyValue","sourceArr","isValueSame","val2","is1DArraySame","topKey","animateObj","targetKeys","delay","additive","setToFinal","animateAll","existsAnimators","animationKeys","innerKey","targetVal","keyLen","revertedSource","reversedTarget","sourceClone","Group","nextSibling","oldChild","newChild","zrUtil.indexOf","index","old","stopped","includeChildren","tmpMat","childRect","painterCtors","instances","delInstance","id","isDarkMode","colorStops","totalLum","ZRender","rendererType","zrUtil.keys","ssrMode","handlerProxy","HandlerProxy","useCoarsePointer","usePointerSize","defaultPointerSize","zrUtil.retrieve2","zLevel","config","darkMode","fromInside","triggerRendered","end","stillFramesCount","eventHandler","init","zrUtil.guid","registerPainter","RADIAN_EPSILON","ROUND_SUPPORTED_PRECISION_MAX","_trim","linearMap","domain","range","clamp","r0","r1","subDomain","subRange","all","zrUtil.isString","round","precision","returnStr","asc","getPrecision","getPrecisionSafe","eIndex","exp","significandPartLen","dotIndex","decimalPartLen","getPixelPrecision","dataExtent","pixelExtent","log","LN10","dataQuantity","sizeQuantity","addSafe","maxPrecision","remRadian","radian","pi2","isRadianAroundZero","TIME_REG","parseDate","match","hour","quantity","quantityExponent","nice","exponent","exp10","nf","numericToNumber","valFloat","isNumeric","getRandomIdBase","getGreatestCommonDividor","getLeastCommonMultiple","throwError","msg","DUMMY_COMPONENT_NAME_PREFIX","INTERNAL_COMPONENT_ID_PREFIX","normalizeToArray","defaultEmphasis","subOpts","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","existings","newCmptOptions","mode","isNormalMergeMode","isReplaceMergeMode","isReplaceAllMode","existingIdIdxMap","cmptOption","prepareResult","mappingById","mappingByName","mappingByIndex","mappingInReplaceAllMode","makeIdAndName","existing","isComponentIdInternal","optionId","makeComparableKey","existingIdx","resultItem","keyExistAndEqual","brandNew","nextIdx","mapResult","idMap","item","keyInfo","idNum","attr","obj1","obj2","key1","convertOptionIdName","key2","idOrName","defaultValue","isNameSpecified","componentModel","makeInternalComponentId","idSuffix","setComponentTypeToKeyInfo","mappingResult","mainType","componentModelCtor","newOption","determineSubType","newCmptOption","existComponent","subType","queryDataIndex","payload","makeInner","innerUniqueIndex","hostObj","parseFinder","ecModel","finderInput","_a","preParseFinder","mainTypeSpecified","queryOptionMap","others","defaultMainType","queryOption","queryResult","queryReferringComponents","finder","parsedKey","queryType","SINGLE_REFERRING","MULTIPLE_REFERRING","userOption","indexOption","idOption","nameOption","firstCmpt","setAttribute","getAttribute","getTooltipRenderMode","renderModeOption","interpolateRawValues","sourceValue","targetValue","isAutoPrecision","interpolated","leftArr","rightArr","length_1","info","leftVal","rightVal","TYPE_DELIMITER","IS_CONTAINER","IS_EXTENDED_CLASS","parseClassType","componentType","typeArr","checkClassType","zrUtil.assert","isExtendedClass","clz","enableClassExtend","rootClz","mandatoryMethods","superClass","ExtendedClass","isESClass","class_1","zrUtil.inherits","zrUtil.extend","superCall","superApply","fn","zrUtil.isFunction","mountExtend","SubClz","SupperClz","classBase","enableClassCheck","classAttr","methodName","enableClassManagement","componentFullType","componentTypeInfo","container","makeContainer","throwWhenNotFound","o","types","makeStyleMapper","ignoreParent","model","excludes","includes","AREA_STYLE_KEY_MAP","getAreaStyle","AreaStyleMixin","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","createOrUpdateImage","cbPayload","pendingWrap","isImageReady","imageOnLoad","STYLE_REG","truncateText2","containerWidth","ellipsis","prepareTruncateOptions","isTruncated","truncateOut","truncateSingleLine","preparedOpts","minChar","ascCharWidth","contentWidth","ellipsisWidth","textLine","lineWidth","subLength","estimateLength","cnCharWidth","charCode","parsePlainText","overflow","padding","truncate","calculatedLineHeight","lineHeight","bgColorDrawn","truncateLineOverflow","lines","wrapText","contentHeight","lineCount","singleOut","outerHeight","outerWidth","RichTextToken","RichTextLine","tokens","RichTextContentBlock","parseRichText","contentBlock","topWidth","topHeight","wrapInfo","matchedIndex","pushTokens","pendingList","calculatedHeight","calculatedWidth","stlPadding","truncateLine","tmpTruncateOut","finishLine","line","outer","token","tokenStyle","textPadding","paddingH","tokenHeight","originalLength","styleTokenWidth","tokenWidthNotSpecified","textBackgroundColor","bgImg","imageHelper.findExistImage","imageHelper.isImageReady","remainTruncWidth","percentWidth","block","styleName","isEmptyStr","newLine","strLines","linesWidths","tokenPadding","tokenPaddingH","outerWidth_1","tokensLen","isAlphabeticLetter","ch","code","breakCharMap","isWordBreakChar","isBreakAll","lastAccumWidth","currentWord","currentWordWidth","accumWidth","chWidth","inWord","STYLE_MAGIC_KEY","DEFAULT_COMMON_STYLE","DEFAULT_COMMON_ANIMATION_PROPS","PRIMARY_STATES_KEYS_IN_HOVER_LAYER","Displayable","viewWidth","viewHeight","considerClipPath","considerAncestors","isDisplayableCulled","parent_1","coord","elRect","shadowSize","shadowOffsetX","shadowOffsetY","tolerance","paintRect","targetKey","notRedraw","targetStyle","sourceStyle","changedKeys","statesKeys","mergedStyle","dispProto","viewRect","mathSin","mathCos","vec2.create","extremity","fromLine","xDim","yDim","fromCubic","curve.cubicExtrema","curve.cubicAt","fromQuadratic","curve.quadraticExtremum","curve.quadraticAt","fromArc","rx","ry","startAngle","endAngle","anticlockwise","vec2Min","vec2.min","vec2Max","vec2.max","diff","angle","CMD","tmpOutX","tmpOutY","min2","max2","mathAbs","PI","hasTypedArray","tmpAngles","modPI2","normalizeArcAngles","angles","newStartAngle","newEndAngle","PathProxy","notSaveData","segmentIgnoreThreshold","exceedUnit","cx","cy","radius","path","appendSize","appendPathData","cmd","newData","xi","yi","isFirst","ux","uy","pathSegLen","pathTotalLen","segCount","drawPart","accumLength","displayedLength","pendingPtDist","pendingPtX","pendingPtY","psi","isEllipse","breakBuild","newProxy","containStroke","_l","_b","_s","curve.cubicProjectPoint","normalizeRadian","windingLine","dir","x_","isAroundEqual","swapExtrema","windingCubic","nRoots","curve.cubicRootAt","nExtrema","y0_","y1_","unit","windingQuadratic","curve.quadraticRootAt","y_","windingArc","dTheta","tmp_1","containPath","isStroke","line.containStroke","cubic.containStroke","quadratic.containStroke","_x","arc.containStroke","contain","pathProxy","DEFAULT_PATH_STYLE","DEFAULT_PATH_ANIMATION_PROPS","pathCopyParams","Path","decalElStyle","defaultStyle","pathFill","fillLum","isDarkLabel","shapeCfg","inBatch","stroke","fill","needsUpdateRect","firstInvoke","rectStroke","lineScale","strokeContainThreshold","localPos","pathContain.containStroke","pathContain.contain","shape","targetShape","targetShapePrimaryProps","shapeKeys","mergedShape","defaultProps","Sub","pathProto","DEFAULT_TSPAN_STYLE","TSpan","tspanProto","DEFAULT_IMAGE_STYLE","DEFAULT_IMAGE_ANIMATION_PROPS","isImageLike","ZRImage","dim","imageSource","otherDim","otherDimSize","buildPath","r2","r3","r4","total","subPixelOptimizeLine","outputShape","inputShape","subPixelOptimize","subPixelOptimizeRect","originX","originY","originWidth","originHeight","position","positiveOrNegative","doubledPosition","RectShape","subPixelOptimizeOutputShape","Rect","optimizedShape","roundRectHelper.buildPath","DEFAULT_RICH_TEXT_COLOR","DEFAULT_STROKE_LINE_WIDTH","DEFAULT_TEXT_ANIMATION_PROPS","ZRText","normalizeTextStyle","defaultTextStyle","sourceRich","targetRich","richNames","richName","textFont","getStyleText","needDrawBg","needDrawBackground","baseX","baseY","textX","textY","boxX","boxY","getTextXForPadding","defaultLineWidth","useDefaultFill","getFill","getStroke","hasShadow","fixedBoundingRect","subElStyle","setSeparateFont","xLeft","lineTop","xRight","tokenCount","remainedWidth","lineXLeft","lineXRight","parentBgColorDrawn","textWidth","textHeight","topStyle","textBorderWidth","textBorderColor","isImageBg","isPlainOrGradientBg","textBorderRadius","rectEl","imgEl","rectShape","rectStyle","imgStyle","commonStyle","hasSeparateFont","parseFontSize","VALID_TEXT_ALIGN","VALID_TEXT_VERTICAL_ALIGN","FONT_PARTS","fontProp","normalizeStyle","getECData","setCommonECData","seriesIndex","dataType","dataIdx","ecData","childECData","_highlightNextDigit","_highlightKeyMap","getSavedStates","getComponentStates","HOVER_STATE_NORMAL","HOVER_STATE_BLUR","HOVER_STATE_EMPHASIS","SPECIAL_STATES","DISPLAY_STATES","Z2_EMPHASIS_LIFT","Z2_SELECT_LIFT","HIGHLIGHT_ACTION_TYPE","DOWNPLAY_ACTION_TYPE","SELECT_ACTION_TYPE","UNSELECT_ACTION_TYPE","TOGGLE_SELECT_ACTION_TYPE","hasFillOrStroke","fillOrStroke","doChangeHoverState","hoverStateEnum","singleEnterEmphasis","singleLeaveEmphasis","singleEnterBlur","singleLeaveBlur","singleEnterSelect","singleLeaveSelect","updateElementState","updater","commonParam","traverseUpdateState","setStatesFlag","getFromStateStyle","toStateName","fromState","createEmphasisDefaultState","targetStates","hasSelect","cloned","store","fromFill","fromStroke","emphasisStyle","z2EmphasisLift","createSelectDefaultState","z2SelectLift","createBlurDefaultState","hasBlur","currentOpacity","blurStyle","elementStateProxy","setDefaultStateProxy","enterEmphasisWhenMouseOver","shouldSilent","leaveEmphasisWhenMouseOut","enterEmphasis","highlightDigit","leaveEmphasis","enterBlur","leaveBlur","enterSelect","leaveSelect","allLeaveBlur","api","leaveBlurredSeries","allComponentViews","componentStates","isSeries","view","blurSeries","targetSeriesIndex","focus","blurScope","leaveBlurOfIndices","dataIndices","itemEl","targetSeriesModel","targetCoordSys","blurredSeries","seriesModel","sameSeries","coordSys","sameCoordSys","dataTypes","blurComponent","componentMainType","componentIndex","blurSeriesFromHighlightPayload","dataIndex","count","current","focus_1","findComponentHighDownDispatchers","dispatchers","focusSelf","handleGlobalMouseOverForHighDown","dispatcher","handleGlobalMouseOutForHighDown","toggleSelectionFromPayload","isSelectChangePayload","updateSeriesElementSelection","allData","getAllSelectedIndices","enableHoverEmphasis","setAsHighDownDispatcher","enableHoverFocus","disableHoverEmphasis","toggleHoverEmphasis","isDisabled","OTHER_STATES","defaultStyleGetterMap","setStatesStylesFromModel","itemModel","styleType","getter","asDispatcher","disable","extendedEl","isHighDownDispatcher","getHighlightDigit","highlightKey","payloadType","isHighDownPayload","savePathStates","selectState","mathAtan2","transformPath","nPoint","M","L","R","Q","v2ApplyTransform","p_1","vMag","vRatio","u","vAngle","processArc","fa","fs","psiDeg","xp","yp","lambda","cxp","cyp","commandReg","numberReg","createPathProxyFromString","cpx","cpy","subpathX","subpathY","prevCmd","cmdList","cmdText","cmdStr","pLen","off","ctlPtx","ctlPty","pathData","SVGPath","isPathProxy","createPathOptions","innerOpts","createFromString","extendFromString","defaultOpts","mergePath","pathEls","pathList","pathEl","pathBundle","CircleShape","Circle","EllipseShape","Ellipse","mathACos","mathATan2","intersect","dx10","dy10","dx32","dy32","computeCornerTangents","cr","clockwise","x01","y01","x11","y11","x10","y10","x00","y00","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","normalizeCornerRadius","innerRadius","hasRadius","hasInnerRadius","arc","mod","icrStart","icrEnd","ocrStart","ocrEnd","ocrs","ocre","icrs","icre","ocrMax","icrMax","limitedOcrMax","limitedIcrMax","xre","yre","xirs","yirs","xrs","yrs","xire","yire","hasArc","cornerRadius","halfRd","it_1","crStart","crEnd","ct0","ct1","SectorShape","Sector","roundSectorHelper.buildPath","RingShape","Ring","smoothBezier","smooth","isLoop","constraint","cps","prevPoint","nextPoint","v2Min","v2Max","point","v2Clone","v2Sub","v2Scale","v2Distance","cp0","v2Add","cp1","closePath","controlPoints","cp2","PolygonShape","Polygon","polyHelper.buildPath","PolylineShape","Polyline","LineShape","Line","BezierCurveShape","someVectorAt","isTangent","cpx2","cpy2","BezierCurve","cpx1","cpy1","vec2.normalize","ArcShape","Arc","unitX","unitY","CompoundPath","paths","dirtyPath","Gradient","LinearGradient","globalCoord","RadialGradient","extent","extent2","OrientedBoundingRect","corners","axes","overlapped","noMtv","axis","dist0","dist1","origin","proj","proj_1","IncrementalDisplayable","notPersistent","displayables","Displayble","transitionStore","getAnimationConfig","animationType","animatableModel","extraOpts","extraDelayParams","animationPayload","updatePayload","animationEnabled","isUpdate","animateOrSetProps","during","isFrom","removeOpt","isRemove","animationConfig","animationDelay","animationEasing","animateConfig","updateProps","initProps","isElementRemoved","removeElement","fadeOutDisplayable","done","removeElementWithFadeOut","doRemove","saveOldStyle","_customShapeMap","extendShape","extendPathFromString","pathTool.extendFromString","extendPath","registerShape","ShapeClass","getShapeClass","makePath","layout","pathTool.createFromString","centerGraphic","resizePath","makeImage","imageUrl","zrImg","img","boundingRect","aspect","pathTool.mergePath","pathRect","subPixelOptimizeUtil.subPixelOptimizeLine","param","subPixelOptimizeUtil.subPixelOptimizeRect","subPixelOptimizeUtil.subPixelOptimize","getTransform","mat","transformDirection","direction","hBase","vBase","vertex","isNotGroup","isPath","groupTransition","g1","g2","getElMap","elMap","getAnimatableProps","elMap1","oldEl","newProp","clipPointsByRect","clipRectByRect","targetRect","createIcon","iconStr","linePolygonIntersect","a1x","a1y","a2x","a2y","lineLineIntersect","b1x","b1y","b2x","b2y","mx","my","nx","ny","nmCrossProduct","crossProduct2d","nearZero","b1a1x","b1a1y","q","setTooltipConfig","itemTooltipOption","itemName","itemTooltipOptionObj","formatterParams","formatterParamsExtra","traverseElement","traverseElements","els","EMPTY_OBJ","setLabelText","label","labelTexts","oldStates","getLabelText","stateModels","interpolatedValue","labelFetcher","labelDataIndex","labelDimIndex","normalModel","baseText","statesText","stateModel","setLabelStyle","targetEl","labelStatesModels","stateSpecified","isSetOnText","needsCreateText","labelStatesTexts","showNormal","normalStyle","createTextStyle","createTextConfig","stateShow","targetElEmphasisState","labelInner","getLabelStatesModels","labelName","statesModels","textStyleModel","specifiedTextStyle","isNotNormal","isAttached","textStyle","setTextStyleCommon","labelPosition","labelRotate","labelDistance","labelOffset","globalTextStyle","richItemNames","getRichItemNames","richResult","name_1","richTextStyle","setTokenTextStyle","margin","richItemNameMap","rich","richKeys","richKey","TEXT_PROPS_WITH_GLOBAL","TEXT_PROPS_SELF","TEXT_PROPS_BOX","isBlock","inRich","inheritColor","fillColor","strokeColor","opacity","textBorderType","textBorderDashOffset","baseline","borderType","getFont","gTextStyleModel","PATH_COLOR","textStyleParams","tmpText","TextStyleMixin","isEmphasis","LINE_STYLE_KEY_MAP","getLineStyle","LineStyleMixin","ITEM_STYLE_KEY_MAP","getItemStyle","ItemStyleMixin","Model","option","parentModel","hasPath","pathFinal","pathArr","base","getUID","enableSubTypeDefaulter","subTypeDefaulters","defaulter","componentTypeMain","enableTopologicalTravel","entity","dependencyGetter","targetNameList","fullNameList","makeDepndencyGraph","graph","noEntryList","targetNameSet","currComponentType","currVertex","isInTargetNameSet","removeEdgeAndAdd","removeEdge","errMsg","succComponentType","thisItem","createDependencyGraphItem","originalDeps","availableDeps","getAvailableDependencies","dependentName","thatItem","dep","inheritDefaultOption","superOption","subOption","zrUtil.merge","langEN","langZH","LOCALE_ZH","LOCALE_EN","DEFAULT_LOCALE","localeStorage","localeModels","SYSTEM_LANG","langStr","registerLocale","locale","localeObj","createLocaleObject","getLocaleModel","lang","getDefaultLocaleModel","ONE_SECOND","ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_YEAR","defaultLeveledFormatter","fullDayFormatter","fullLeveledFormatter","primaryTimeUnits","timeUnits","pad","getPrimaryTimeUnit","timeUnit","isPrimaryTimeUnit","getDefaultFormatPrecisionOfInterval","format","template","isUTC","date","numberUtil.parseDate","fullYearGetterName","monthGetterName","dateGetterName","H","hoursGetterName","minutesGetterName","secondsGetterName","S","millisecondsGetterName","localeModel","timeModel","month","monthAbbr","dayOfWeek","dayOfWeekAbbr","leveledFormat","tick","formatter","mergedFormatter","zrUtil.defaults","getUnitFromValue","targetId","zrUtil.isArray","levelId","isSecond","isMinute","isHour","isDay","isMonth","isYear","getUnitValue","zrUtil.isNumber","fullYearSetterName","monthSetterName","dateSetterName","hoursSetterName","minutesSetterName","secondsSetterName","millisecondsSetterName","addCommas","parts","toCamelCase","upperCaseFirst","group1","zrUtil.normalizeCssArray","makeValueReadable","valueType","useUTC","USER_READABLE_DEFUALT_TIME_PATTERN","stringToUserReadable","zrUtil.trim","isNumberUserReadable","num","isTypeTime","isValueDate","timeFormat","zrUtil.isStringSafe","numericResult","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","$vars","alias","getTooltipMarker","inOpt","extraCssText","renderMode","markerId","convertToColorString","defaultColor","zrUtil.isObject","windowOpen","link","blank","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","group","gap","maxWidth","maxHeight","currentLineMaxSize","nextChild","nextChildRect","nextX","nextY","moveX","moveY","zrUtil.curry","getLayoutRect","positionInfo","containerRect","formatUtil.normalizeCssArray","containerHeight","top","bottom","verticalMargin","horizontalMargin","positionElement","fetchLayoutMode","ins","layoutMode","mergeLayoutParam","targetOption","ignoreSize","hResult","vResult","names","hvIdx","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","getLayoutParams","copyLayoutParams","inner","ComponentModel","componentUtil.getUID","layout.fetchLayoutMode","inputPositionParams","layout.getLayoutParams","themeModel","layout.mergeLayoutParam","newCptOption","isInit","ctor","fields","optList","defaultOption","indexKey","idKey","boxLayoutModel","zlevel","componentUtil.enableSubTypeDefaulter","componentUtil.enableTopologicalTravel","getDependencies","deps","platform","decalColor","globalDefault","VISUAL_DIMENSIONS","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_TYPED_ARRAY","SOURCE_FORMAT_UNKNOWN","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","BE_ORDINAL","innerGlobalModel","resetSourceDefaulter","makeSeriesEncodeForAxisCoordSys","coordDimensions","datasetModel","querySeriesUpstreamDatasetModel","encodeItemName","encodeSeriesName","datasetMap","baseCategoryDimIndex","categoryWayValueDimStart","coordDimInfoLoose","coordDimIdx","coordDimInfo","getDataDimCountOnCoordDim","datasetRecord","coordDimName","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","thisData","queryDatasetUpstreamDatasetModels","guessOrdinal","dimIndex","doGuessOrdinal","sourceFormat","seriesLayoutBy","dimensionsDefine","startIndex","maxLoop","dimName","dimType","dimDefItem","dataArrayRows","sample","detectValue","row","dataObjectRows","dataKeyedColumns","dataOriginal","beStr","internalOptionCreatorMap","registerInternalOptionCreator","creator","concatInternalOptions","newCmptOptionList","internalOptionCreator","internalOptions","innerColor","PaletteMixin","requestNum","defaultPalette","layeredPalette","getFromPalette","clearPalette","getNearestPalette","palettes","requestColorNum","paletteNum","that","scopeFields","paletteIdx","paletteNameMap","palette","pickedPaletteItem","reCreateSeriesIndices","assertSeriesInitialized","initBase","OPTION_INNER_KEY","OPTION_INNER_VALUE","GlobalModel","theme","optionManager","optionPreprocessorFuncs","innerOpt","normalizeSetOptionInput","optionChanged","baseOption","timelineOption","mediaOptions","mediaOption","componentsMap","componentsCount","newCmptTypes","newCmptTypeMap","replaceMergeMainTypeMap","componentOption","mainTypeInReplaceMerge","visitComponent","modelUtil.normalizeToArray","oldCmptList","mergeMode","modelUtil.mappingToExists","modelUtil.setComponentTypeToKeyInfo","optionsByMainType","cmptsByMainType","cmptsCountByMainType","tooltipExists","isSeriesType","ComponentModelClass","extraOpt","optInMainType","realLen","metNonInner","modelUtil.isComponentIdInternal","cmpt","cmpts","queryByIdOrName","filterBySubType","queryCond","getQueryCond","doFilter","indexAttr","idAttr","nameAttr","ctxForAll_1","cbForAll_1","nameStr","modelUtil.convertOptionIdName","oneSeries","rawSeriesIndex","series","newSeriesIndices","seriesRawIdx","componentTypes","components","component","isNotTargetSeries","seriesIndices","airaOption","mergeTheme","notMergeColorLayer","themeItem","keyMap_1","idOrNameItem","idName","idName_1","availableMethods","ExtensionAPI","ecInstance","zrUtil.bind","coordinateSystemCreators","CoordinateSystemManager","coordinateSystems","QUERY_REG","OptionManager","rawOption","dataset","optionBackup","newParsedOption","parseRawOption","isRecreate","timelineOptions","timelineModel","ecWidth","ecHeight","mediaList","mediaDefault","indices","applyMediaQuery","indicesEquals","isNew","declaredBaseOption","timelineOnRoot","timelineOptionsOnRoot","mediaOnRoot","hasMedia","hasTimeline","singleMedia","doPreprocess","media","preProcess","realMap","applicable","matched","operator","realAttr","real","expect","indices1","indices2","POSSIBLE_STYLES","compatEC2ItemStyle","itemStyleOpt","normalItemStyleOpt","emphasisItemStyleOpt","convertNormalEmphasis","optType","useExtend","normalOpt","emphasisOpt","removeEC3NormalStatus","compatTextStyle","labelOptSingle","modelUtil.TEXT_STYLE_OPTIONS","textPropName","compatEC3CommonStyles","processSeries","seriesOpt","markPoint","markLine","markArea","edgeData","zrUtil.isTypedArray","mpData","mlData","toArr","toObj","globalCompatStyle","isTheme","axisName","axisOpt","parallelOpt","parallelAxisDefault","calendarOpt","radarOpt","geoOpt","regionObj","timelineOpt","toolboxOpt","featureOpt","get","set","compatLayoutProperties","LAYOUT_PROPERTIES","COMPATITABLE_COMPONENTS","BAR_ITEM_STYLE_MAP","compatBarItemStyle","itemStyle","oldName","newName","compatPieLabel","compatSunburstState","compatGraphFocus","traverseTree","globalBackwardCompat","compatStyle","seriesType","pointerColor","highlightPolicy","componentName","dataStack","stackInfoMap","stack","stackInfoList","stackInfo","calculateStack","targetStackInfo","idxInStack","resultVal","resultNaN","dims","targetData","isStackedByIndex","stackStrategy","v0","byValue","stackedDataRawIndex","stackedOver","SourceImpl","isSourceInstance","createSource","sourceData","thisMetaRawOption","detectSourceFormat","determined","determineSourceDimensions","createSourceFromSeriesDataOption","cloneSourceShallow","sourceHeader","dimensionsDetectedCount","normalizeDimensionsOption","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","firstIndex","nameMap","rawItem","exist","shouldRetrieveDataByName","_c","providerMethods","mountMethods","DefaultDataProvider","sourceParam","dimSize","provider","methods","getMethodMapKey","getItemForTypedArray","countForTypedArray","fillStorageForTypedArray","rawItemGetter","getRawSourceItemGetter","rawCounter","getRawSourceDataCounter","dimExtent","appendDataSimply","newCol","oldCol","getItemSimply","rawData","rawSourceItemGetterMap","col","method","countSimply","rawSourceDataCounterMap","getRawValueSimply","property","rawSourceValueGetterMap","getRawSourceValueGetter","retrieveRawValue","DIMENSION_LABEL_REG","DataFormatMixin","rawDataIndex","itemOpt","borderColor","userOutput","status","extendParams","dimStr","dimLoose","multipleSeries","normalizeTooltipFormatResult","markupText","markupFragment","createTask","define","Task","performArgs","upTask","skip","planResult","lastModBy","normalizeModBy","lastModDataCount","modBy","modDataCount","forceFirstProgress","progress","outputDueEnd","iterator","downstream","downTask","winCount","it","sStep","sCount","modNext","sequentialNext","parseDataValue","SortOrderComparator","order","incomparable","isDesc","lval","rval","lvalFloat","rvalFloat","lvalNotNumeric","rvalNotNumeric","lvalIsStr","rvalIsStr","ExternalSource","rawVal","dimInfo","createExternalSource","internalSource","externalTransform","extSource","sourceHeaderCount","dimensions","dimsByName","dimDef","dimDefExt","errMsg_1","getRawData","cloneRawData","rawValueGetter","retrieveValueFromItem","getDimensionInfo","cloneAllDimensionInfo","upstream","isSupportedSourceFormat","externalTransformMap","registerExternalTransform","typeParsed","isBuiltIn","applyDataTransform","rawTransOption","sourceList","infoForPrint","pipedTransOption","pipeLen","transOption","applySingleDataTransform","upSourceList","pipeIndex","transType","extUpSourceList","upSource","resultList","resultIndex","resultMetaRawOption","firstUpSource","UNDEFINED","CtorUint32Array","CtorUint16Array","CtorInt32Array","CtorFloat64Array","dataCtors","defaultDimValueGetters","getIndicesCtor","rawCount","getInitialExtent","cloneChunk","originalChunk","prepareStore","dimIdx","append","DataCtor","oldStore","oldLen","newStore","DataStore","inputDimensions","dimValueGetter","defaultGetter","calcDimNameToIdx","calcDimIdx","ordinalMeta","chunk","rawExtents","dimRawExtent","values","minFillLen","chunks","dimLen","rawExtent","emptyDataItem","sourceIdx","dimNames","dimStorage","dimStore","dimArr","rawIdx","dimData","dimDataArray","sortedDimDataArray","rawIndex","maxDistance","nearestIndices","minDist","minDiff","nearestIndicesLen","newIndices","thisCount","dim0","keep","originalCount","storeArr","quickFinished","dimStorage2","dimk","targetChunks","tmpRetValue","dataCount","retValue","rawExtentOnDim","valueDimension","rate","targetStorage","sampledIndex","frameSize","currentRawIndex","maxArea","area","nextRawIndex","nextFrameStart","nextFrameEnd","avgX","avgY","frameStart","frameEnd","pointAX","pointAY","firstNaNIndex","countNaN","minIndex","minValue","maxIndex","thisFrameSize","rawMinIndex","rawMaxIndex","dimension","sampleValue","sampleIndex","frameValues","sampleFrameIdx","initialExtent","currEnd","useRaw","clonedDims","ignoreIndices","clonedDimsMap","getDimValueSimply","SourceManager","sourceHost","upstreamSignList","upSourceMgrList","hasUpstream","resultSourceList","upSourceMgr","newMetaRawOption","upMetaRawOption","needsCreateSource","upMgrList","transformOption","fromTransformResult","doThrow","upMgr","upSrcMgr","sourceIndex","seriesDimRequest","schema","storeDims","seriesSource","sourceReadKey","storeList","cachedStoreMap","cachedStore","TOOLTIP_LINE_HEIGHT_CSS","getTooltipLineHeight","getTooltipTextStyle","nameFontColor","nameFontSize","nameFontWeight","valueFontColor","valueFontSize","valueFontWeight","HTML_GAPS","RICH_TEXT_GAPS","createTooltipMarkup","isSectionFragment","frag","getBuilder","buildSection","buildNameValue","getBlockGapLevel","gapLevel_1","subBlockLen","hasInnerGap_1","subBlock","subGapLevel","fragment","topMarginForOuterGap","toolTipTextStyle","noHeader","gaps","getGap","subMarkupTextList","subBlocks","orderMode","orderMap","comparator_1","valueFormatter","subMarkupText","wrapBlockHTML","displayableHeader","nameStyle","tooltipLineHeight","wrapInlineNameRichText","noName","noValue","noMarker","valueTypeOption","markerStr","readableName","readableValueList","valueAlignRight","valueCloseToMarker","valueStyle","wrapInlineValueRichText","wrapInlineNameHTML","wrapInlineValueHTML","buildTooltipMarkup","markupStyleCreator","builder","gapLevel","encodedContent","topGap","clearfix","marginCSS","leftHasMarker","marginCss","valueList","alignRight","paddingStr","alignCSS","styles","paddingLeft","retrieveVisualColorForTooltipMarker","getPaddingFromTooltipModel","TooltipMarkupStyleCreator","markerType","finalStl","defaultSeriesFormatTooltip","tooltipDims","tooltipDimLen","isValueArr","markerColor","inlineValue","inlineValueType","sortParam","formatArrResult","formatTooltipArrayValue","seriesNameSpecified","seriesName","inlineName","isValueMultipleLine","dimItem","inlineValues","inlineValueTypes","blocks","setEachItem","modelUtil.makeInner","getSelectionKey","SERIES_UNIVERSAL_TRANSITION_PROP","SeriesModel","dataTaskCount","dataTaskReset","sourceManager","wrapData","autoSeriesName","themeSubType","modelUtil.defaultEmphasis","newSeriesOption","task","getCurrentTask","mainData","zrUtil.createHashMap","colorBy","coordDim","innerDataIndices","selectedMap","selectedMode","nameOrId","tmpArr","selectedDataIndicesMap","nameOrIds","universalTransitionOpt","lastDataIndex","zrUtil.mixin","modelUtil.isNameSpecified","getSeriesAutoName","dataDims","nameArr","dataDim","dataTaskProgress","zrUtil.concatArray","onDataChange","scheduler","pipeline","agentStubMap","ComponentView","seriesModels","isBlur","clazzUtil.enableClassExtend","clazzUtil.enableClassManagement","createRenderPlanner","pipelineContext","originalLarge","originalProgressive","large","progressive","renderPlanner","ChartView","renderTaskPlan","renderTaskReset","toggleHighlight","elSetState","modelUtil.queryDataIndex","progressiveRender","updateMethod","progressMethodMap","ORIGIN_METHOD","RATE","THROTTLE_TYPE","throttle","debounce","currCall","lastCall","lastExec","timer","debounceNextCall","exec","cbArgs","thisDelay","thisDebounce","debounceDelay","createOrUpdate","fnAttr","throttleType","originFn","lastThrottleType","lastRate","clear","defaultStyleMappers","defaultColorKey","getStyleMapper","stylePath","styleMapper","getDefaultColorKey","colorKey","seriesStyleTask","styleModel","getStyle","globalStyle","decalOption","colorCallback","hasAutoColor","colorPalette","dataParams","sharedModel","dataStyleTask","existsStyle","dataColorPaletteTask","paletteScopeGroupByType","colorScope","dataAll","idxMap","fromPalette","defaultLoading","graphic.Group","mask","graphic.Rect","graphic.Text","labelRect","graphic.Arc","Scheduler","dataProcessorHandlers","visualHandlers","taskRecord","overallTask","pCtx","incremental","pipelineId","dataLen","pipelineMap","stageTaskMap","record","renderTask","stageHandlers","unfinished","stageHandler","stageHandlerRecord","seriesTaskMap","overallNeedDirty_1","stub","needSetDirty","performArgs_1","oldSeriesTaskMap","newSeriesTaskMap","getTargetSeries","seriesTaskPlan","seriesTaskReset","seriesTaskCount","overallTaskReset","oldAgentStubMap","newAgentStubMap","overallProgress","shouldOverallTaskDirty","createStub","stubReset","stubOnDirty","visualType","detectSeriseType","stubProgress","resetDefines","makeSeriesTaskProgress","singleSeriesTaskProgress","resetDefineIdx","resetDefine","legacyFunc","ecModelMock","apiMock","mockMethods","cond","Clz","colorAll","lightTheme","contrastColor","axisCommon","ECEventProcessor","cptQuery","dataQuery","otherQuery","condCptType","suffixes_1","dataKeys_1","reserved","propSuffix","suffixPos","eventInfo","packedEvent","check","host","propOnHost","SYMBOL_PROPS_WITH_CB","SYMBOL_PROPS","seriesSymbolTask","symbolOptions","symbolOptionsCb","hasCallback","symbolPropName","symbolPropsCb","dataEach","dataSymbolTask","getItemVisualFromData","getVisualFromData","handleSeriesLegacySelectEvents","eventPostfix","ecIns","legacyEventName","selected","handleLegacySelectEvents","messageCenter","findEventDispatcher","returnFirstMatch","found","wmUniqueIndex","supportDefineProperty","WeakMap","Triangle","graphic.Path","Diamond","Pin","tanX","tanY","cpLen","cpLen2","Arrow","symbolCtors","graphic.Line","graphic.Circle","symbolShapeMakers","symbolBuildProxies","SymbolClz","inBundle","symbolType","proxySymbol","symbolPathSetColor","symbolStyle","createSymbol","keepAspect","isEmpty","symbolPath","graphic.makeImage","graphic.makePath","normalizeSymbolSize","symbolSize","normalizeSymbolOffset","symbolOffset","isSafeNum","createLinearGradient","canvasGradient","createRadialGradient","getCanvasGradient","isClipPathChanged","prevClipPaths","parseInt10","getSize","whIdx","wh","cwh","plt","prb","normalizeLineDash","lineType","getLineDash","lineDash","lineDashOffset","lineScale_1","pathProxyForDraw","styleHasStroke","isValidStrokeFillStyle","strokeOrFill","styleHasFill","doFillPath","originalGlobalAlpha","doStrokePath","createCanvasPattern","pattern","canvasPattern","matrix","brushPath","hasStroke","hasFill","strokePercent","strokePart","firstDraw","dirtyFlag","hasFillGradient","hasStrokeGradient","hasFillPattern","hasStrokePattern","fillGradient","strokeGradient","fillPattern","strokePattern","needsRebuild","brushImage","sWidth","sHeight","brushText","SHADOW_NUMBER_PROPS","STROKE_PROPS","bindCommonProps","prevStyle","forceSetAll","styleChanged","flushPathDrawn","bindPathAndTextCommonStyle","prevEl","newLineWidth","bindImageStyle","setContextTransform","updateClipStatus","allClipped","isTransformChanged","m0","DRAW_TYPE_PATH","DRAW_TYPE_IMAGE","DRAW_TYPE_TEXT","DRAW_TYPE_INCREMENTAL","canPathBatch","brushSingle","brush","isLast","prevElClipPaths","forceSetTransform","forceSetStyle","canBatchPath","brushIncremental","temporalDisplayables","innerScope","i_1","len_1","decalMap","decalCache","decalKeys","createOrUpdatePatternFromDecal","decalObject","isSVG","oldPattern","decalOpt","setPatternnSource","isValidKey","cache","dashArrayX","normalizeDashArrayX","dashArrayY","normalizeDashArrayY","symbolArray","normalizeSymbolArray","lineBlockLengthsX","getLineBlockLengthX","lineBlockLengthY","getLineBlockLengthY","svgRoot","pSize","getPatternSize","brushDecal","xlen","symbolRepeats","ySum","yId","yIdTotal","xId0","symbolYId","xId1","xId1Total","xSum","top_1","symbolXId","brushSymbol","symbol","symbolVNode","isAllString","dash","dashValue","isAllNumber","dashValue_1","blockLength","decalVisual","decal","lifecycle","implsStore","registerImpl","impl","getImpl","TEST_FRAME_REMAIN_TIME","PRIORITY_PROCESSOR_SERIES_FILTER","PRIORITY_PROCESSOR_DATASTACK","PRIORITY_PROCESSOR_FILTER","PRIORITY_PROCESSOR_DEFAULT","PRIORITY_PROCESSOR_STATISTIC","PRIORITY_VISUAL_LAYOUT","PRIORITY_VISUAL_PROGRESSIVE_LAYOUT","PRIORITY_VISUAL_GLOBAL","PRIORITY_VISUAL_CHART","PRIORITY_VISUAL_COMPONENT","PRIORITY_VISUAL_CHART_DATA_CUSTOM","PRIORITY_VISUAL_POST_CHART_LAYOUT","PRIORITY_VISUAL_BRUSH","PRIORITY_VISUAL_ARIA","PRIORITY_VISUAL_DECAL","PRIORITY","IN_MAIN_PROCESS_KEY","PENDING_UPDATE","STATUS_NEEDS_UPDATE_KEY","ACTION_REG","CONNECT_STATUS_KEY","CONNECT_STATUS_PENDING","CONNECT_STATUS_UPDATING","CONNECT_STATUS_UPDATED","createRegisterEventWithLowercaseECharts","toLowercaseNameAndCallEventful","createRegisterEventWithLowercaseMessageCenter","MessageCenter","messageCenterProto","prepare","prepareView","updateDirectly","updateMethods","doConvertPixel","updateStreamModes","doDispatchAction","flushPendingActions","triggerUpdatedEvent","bindRenderedEvent","bindMouseEvent","render","renderComponents","renderSeries","createExtensionAPI","enableConnect","markStatusToUpdate","applyChangedStates","ECharts","themeStorage","defaultRenderer","defaultCoarsePointer","defaultUseDirtyRect","zrender.init","backwardCompat","prioritySortFunc","visualFuncs","dataProcessorFuncs","silent","remainTime","startTime","notMerge","lazyUpdate","replaceMerge","transitionOpt","updateParams","excludeComponents","excludesComponentViews","url","isSvg","groupId","MAX_NUMBER","connectedGroups","left_1","right_1","bottom_1","canvasList_1","dpr_1","chart","targetCanvas","zr_1","content_1","graphic.Image","findResult","modelUtil.parseFinder","models","parsedFinder","dataIndexInside","MOUSE_EVENT_NAMES","eveName","isGlobalOut","dataModel","eventActionMap","actionType","modelUtil.setAttribute","DOM_ATTRIBUTE_KEY","needPrepare","loadingEffects","eventObj","actions","flush","isComponent","viewList","viewMap","doPrepare","requireNewView","viewId","classType","Clazz","callView","excludeSeriesId","excludeSeriesIdMap","modelId","isExcluded","coordSysMgr","clearColorPalette","componentDirtyList","componentView","seriesDirtyMap","chartView","coordSysList","chartsMap","escapeConnect","actionWrap","actionInfo","cptTypeTmp","cptType","payloads","batched","eventObjBatch","isSelectChange","isHighDown","batchItem","modelUtil.preParseFinder","newObj","pendingActions","allocateZlevels","componentZLevels","seriesZLevels","hasSeparateZLevel","z","zlevelKey","zLevels","lastSeriesZLevel_1","lastSeriesKey_1","dirtyList","clearStates","updateZ","updateStates","dirtyMap","updateBlend","updateHoverLayerStatus","graphic.isElementRemoved","applyElementStates","newStates","elCount","blendMode","doUpdateZ","maxZ2","labelLine","isGroup","textGuideLineConfig","stateAnimationModel","enableAnimation","stateTransition","prevStates","modelInfo","updateConnectedChartsStatus","charts","otherChart","action_1","otherCharts_1","echartsProto","wrapped","args2","idBase","existInstance","getInstanceByDom","modelUtil.getAttribute","registerTheme","registerPreprocessor","preprocessorFunc","registerProcessor","priority","processor","normalizeRegister","registerPostInit","postInitFunc","registerUpdateLifecycle","registerPostUpdate","postUpdateFunc","registerAction","action","registerCoordinateSystem","coordSysCreator","registerLayout","layoutTask","registerVisual","visualTask","registeredTasks","targetList","defaultPriority","registerLoading","loadingFx","registerMap","mapName","geoJson","specialAreas","registerTransform","loadingDefault","darkTheme","dataIndexMapValueLength","valNumOrArrLengthMoreThan2","defaultKeyGetter","DataDiffer","oldArr","newArr","oldKeyGetter","newKeyGetter","diffMode","newDataIndexMap","oldDataKeyArr","newDataKeyArr","oldKey","newIdxMapVal","newIdxMapValLen","newIdx","oldDataIndexMap","oldIdxMapVal","oldIdxMapValLen","newKey","idxMapValLen","keyArr","keyGetterName","cbModeMultiple","idxMapVal","DimensionUserOuput","dimRequest","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutputEncode","coordDimIndex","getOrCreateEncodeArr","mayLabelDimType","encodeArr","dataDimsOnCoord","encodeFirstDimNotExtra","encodeLabel","encodeTooltip","getDimensionTypeByAxis","axisType","SeriesDimensionDefine","dimTypeShort","SeriesDataSchema","dimensionOmitted","ensureSourceDimNameMap","dimCount","willRetrieveDataByName","makeHashStrict","shouldOmitUnusedDimensions","dimHash","fullDimIdx","seriesDimIdx","seriesDimDef","sourceDimDef","hash","isSeriesDataSchema","createDimNameMap","dataDimNameMap","dimDefItemRaw","userDimName","innerSource","ID_PREFIX","INDEX_NOT_FOUND","TRANSFERABLE_PROPERTIES","CLONE_PROPERTIES","prepareInvertedIndex","getId","getIdNameFromStore","normalizeDimensions","transferProperties","cloneListForMapAndSample","makeIdFromName","SeriesData","dimensionsInput","hostModel","assignStoreDimIdx","dimensionInfos","dimensionNames","invertedIndicesMap","needsHasOwn","emptyObj","dimInfoInput","dimensionInfo","dimensionName","otherDims","dimIdxToName_1","dimensionsSummary","nameList","zrUtil.isArrayLike","shouldMakeIdFromName","idList","isFormatOriginal","sharedDataItem","itemId","ordinal","dataDimIndicesOnCoord","invertedIndices","fCtx","dimIndices","innerRange","ctxCompat","otherList","thisList","visual","kvObj","itemVisual","itemVisuals","injectFunction","originalMethod","zrUtil.slice","original","zrUtil.clone","nameDimIdx","idDimIdx","nameRepeatCount","nmCnt","prepareSeriesDataSchema","sysDims","coordDimNameMap","getDimCount","omitUnusedDimensions","isUsingSourceDimensionsDef","encodeDef","encodeDefMap","indicesMap","getResultItem","dataDimsRaw","validDataDims","resultDimIdxOrName","resultDimIdx","applyDim","availDimIdx","sysDimItemRaw","sysDimItemDimsDef","sysDimItemOtherDims","sysDimItem","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","extra","ifNoNameFillWithCoordName","item0","item1","genCoordDimName","removeDuplication","duplicationMap","dimOriginalName","optDimCount","CoordSysInfo","coordSysName","getCoordSysInfoBySeries","fetch","fetchers","axisMap","categoryAxisMap","xAxisModel","yAxisModel","isCategory","singleAxisModel","polarModel","radiusAxisModel","angleAxisModel","parallelModel","coordSysDims","axisIndex","axisModel","axisDim","enableDataStack","byIndex","stackedCoordDimension","dimensionDefineList","isLegacyDimensionsInput","mayStack","stackedByDimInfo","stackedDimInfo","stackResultDimension","stackedOverDimension","stackedDimCoordDim_1","stackedDimType","stackedDimCoordIndex_1","stackedOverDimensionDefine","stackResultDimensionDefine","isDimensionStacked","stackedDim","getStackedDimension","targetDim","getCoordSysDimDefs","coordSysInfo","registeredCoordSys","CoordinateSystem","coordSysDimDefs","injectOrdinalMeta","dimInfoList","createInvertedIndices","firstCategoryDimIndex","hasNameEncode","categoryAxisModel","createSeriesData","sourceRaw","isOriginalSource","useEncodeDefaulter","encodeDefaulter","createDimensionOptions","stackCalculationInfo","isNeedCompleteOrdinalData","sampleItem","firstDataNotNull","Scale","setting","thisExtent","isBlank","uidBase","OrdinalMeta","categories","getName","category","needCollect","isIntervalOrLogScale","intervalScaleNiceTicks","splitNumber","minInterval","maxInterval","span","getIntervalPrecision","niceTickExtent","fixExtent","increaseInterval","OrdinalScale","scaleHelper.contain","scaleHelper.normalize","scaleHelper.scale","ticks","infoOrdinalNumbers","ordinalsByTick","ticksByOrdinal","tickNum","allCategoryLen","ordinalNumber","unusedOrdinal","ticksByOrdinalNumber","tickNumber","ordinalNumbersByTick","cateogry","roundNumber","numberUtil.round","IntervalScale","helper.contain","helper.normalize","helper.scale","helper.getIntervalPrecision","expandToNicedExtent","intervalPrecision","safeLimit","lastNiceTick","minorTicks","nextTick","prevTick","minorTicksGroup","minorInterval","minorTick","numberUtil.getPrecision","dataNum","formatUtil.addCommas","helper.intervalScaleNiceTicks","expandSize","supportFloat32Array","Float32ArrayCtor","createFloat32Array","arg","STACK_PREFIX","getSeriesStackId","getAxisKey","prepareLayoutBarSeries","isOnCartesian","getValueAxesMinGaps","barSeries","axisValues","cartesian","baseAxis","cnt","axisMinGaps","valuesInAxis","makeColumnLayout","seriesInfoList","axisExtent","bandWidth","minGap","extentSpan","scaleSpan","barWidth","barMaxWidth","barMinWidth","isInLargeMode","barGap","barCategoryGap","doCalBarWidthAndOffset","columnsMap","seriesInfo","axisKey","columnsOnAxis","stacks","stackId","categoryGapPercent","columnCount","categoryGap","barGapPercent","autoWidthCount","autoWidth","column","minWidth","finalWidth","widthSum","lastColumn","retrieveColumnLayout","barWidthAndOffset","bisect","TimeScale","settings","labelFormatter","innerTicks","getIntervalTicks","approxTickNum","scaleIntervalsLen","scaleIntervals","isUnitValueSame","valueA","valueB","dateA","dateB","isSame","isSameYear","isSameMonth","isSameDay","isSameHour","isSameMinute","isSameSecond","isSameMilliSecond","getDateInterval","approxInterval","daysInMonth","getMonthInterval","APPROX_ONE_MONTH","getHourInterval","getMinutesAndSecondsInterval","isMinutes","getMillisecondsInterval","numberUtil.nice","getFirstTimestampOfUnit","unitName","outDate","bottomUnitName","unitNames","iter","addTicksInSpan","minTimestamp","maxTimestamp","getMethodName","setMethodName","isDate","dateTime","addLevelTicks","lastLevelTicks","levelTicks","newAddedTicks","isFirstLevel","startTick","endTick","getterName","setterName","levelsTicks","currentLevelTicks","tickCount","lastLevelTickCount","primaryTimeUnit","nextPrimaryTimeUnit","levelTicksRemoveDuplicated","tickValue","targetTickNum","levelsTicksInExtent","maxLevel","scaleProto","intervalScaleProto","roundingErrorFix","mathFloor","mathCeil","mathLog","LogScale","originalScale","originalExtent","powVal","fixRoundingError","numberUtil.quantity","err","niceExtent","originalVal","ScaleRawExtentInfo","isOrdinal","axisMinValue","modelMinRaw","parseAxisModelMinMax","modelMaxRaw","boundaryGap","boundaryGapArr","dataMin","dataMax","axisDataLen","boundaryGapInner","minFixed","maxFixed","determinedMin","determinedMax","minMaxName","DATA_MIN_MAX_ATTR","DETERMINED_MIN_MAX_ATTR","ensureScaleRawExtentInfo","rawExtentInfo","minMax","getScaleExtent","scaleType","rawExtentResult","barSeriesModels","isBaseAxisAndHasBarSeries_1","adjustedScale","adjustScaleForOverflow","axisLength","barsOnCurrentAxis","minOverflow","maxOverflow","totalOverFlow","oldRange","oldRangePercentOfNew","overflowBuffer","niceScaleExtent","inModel","extentInfo","isIntervalOrTime","createScaleByModel","ifAxisCrossZero","makeLabelFormatter","categoryTickStart","getAxisRawValue","estimateLabelUnionRect","realNumberScaleTicks","categoryScaleExtent","axisLabelModel","unrotatedSingleRect","singleRect","rotateTextRect","textRect","rotateRadians","beforeWidth","beforeHeight","afterWidth","afterHeight","rotatedRect","getOptionCategoryInterval","shouldShowAllLabels","getDataDimensionsOnAxis","dataDimMap","unionAxisExtentFromData","seriesExtent","AxisModelCommonMixin","extensions","extensionRegisters","ComponentViewClass","SeriesModelClass","ChartViewClass","painterType","PainterCtor","use","ext","singleExt","tickValuesToNumbers","nums","createAxisLabels","custom","labelFormatter_1","extent_1","tickNumbers","zrUtil.filter","numval","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","tickModel","extent_2","makeCategoryTicks","labelModel","makeCategoryLabelsActually","labelsCache","getListCache","optionLabelInterval","listCacheGet","labels","numericLabelInterval","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","ticksCache","optionTickInterval","tickCategoryInterval","labelsResult","labelItem","calculateCategoryInterval","fetchAutoCategoryIntervalCalculationParams","ordinalScale","ordinalExtent","unitSpan","unitW","unitH","maxW","maxH","textContain.getBoundingRect","dw","dh","lastAutoInterval","lastTickCount","categoryInterval","onlyTick","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","rawLabel","NORMALIZED_EXTENT","Axis","fixExtentWithBands","ticksCoords","tickVal","alignWithLabel","fixOnBandTicksCoords","minorTickModel","minorTicksCoords","nTick","ticksLen","diffSize","crossLen","shift_1","ticksItem","littleThan","prepareLayoutList","localRect","isAxisAligned","minMargin","globalRect","obb","hideOverlap","labelList","displayedLabels","hideEl","emphasisState","existsTextCfg","LineSeriesModel","visualRotate","symbolRotate","getDefaultLabel","labelDims","vals","getDefaultInterpolatedLabel","Symbol","seriesScope","driftSymbol","toLastFrame","draggable","hasCursorOption","disableAnimation","graphic.updateProps","graphic.initProps","emphasisItemStyle","blurItemStyle","selectItemStyle","emphasisDisabled","hoverScale","emphasisModel","visualColor","pathStyle","liftZ","z2Origin","useNameLabel","getLabelDefaultText","scaleRatio","animationOpt","graphic.removeElement","symbolNeedsDraw","normalizeUpdateOpt","makeSeriesScope","SymbolDraw","SymbolCtor","oldData","symbolUpdateOpt","getSymbolPoint","symbolEl","oldIdx","newSymbolType","oldSymbolType","taskParams","updateIncrementalAndHover","graphic.traverseElements","prepareDataCoordInfo","valueOrigin","valueAxis","valueStart","getValueStart","baseAxisDim","valueAxisDim","valueDim","baseDim","baseDataOffset","stacked","stackResultDim","getStackedOnPoint","dataCoordInfo","stackedData","diffData","diffResult","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","newPoints","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","newDataDimsForPoint","oldPt","stackedOnPoint","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","isPointNull","drawSegment","segLen","allLen","smoothMonotone","connectNulls","prevX","prevY","cpx0","cpy0","tmpK","ratioNextSeg","nextCpx0","nextCpy0","lenPrevSeg","lenNextSeg","dir_1","dir_2","ECPolylineShape","ECPolyline","xOrY","isDimX","nRoot","t_1","ECPolygonShape","ECPolygon","stackedOnPoints","createGridClipPath","hasAnimation","isHorizontal","isAxisInversed","duringCb","createPolarClipPath","polar","sectorArea","graphic.Sector","isRadial","isCoordinateSystemType","isPointsSame","points1","points2","bboxFromPoints","minX","minY","getBoundingDiff","min1","max1","getSmooth","getStackedOnPoints","pt","turnPointsIntoStep","basePoints","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","filteredPoints","reference","middle","stepPt2","clipColorStops","newColorStops","prevOutOfRangeColorStop","prevInRangeColorStop","lerpStop","stop0","stop1","clippedCoord","coord0","stop_1","getVisualGradient","visualMetaList","visualMeta","stopLen","outerColors","colorStopsInRange","inRangeStopLen","tinyExtent","minCoord","maxCoord","coordSpan","gradient","graphic.LinearGradient","getIsIgnoreFunc","showAllSymbol","isAuto","categoryAxis","canShowAllSymbolForCategory","categoryDataDim","labelMap","availSize","getLastIndexNotNull","getPointAtIndex","getIndexRange","prevIndex","nextIndex","anyStateShowEndLabel","createLineClipPath","lineView","endLabelModel_1","valueAnimation_1","data_1","labelAnimationRecord_1","clipRect","endLabel","getEndLabelStateSpecified","endLabelModel","isBaseInversed","align","LineView","lineGroup","symbolDraw","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","polyline","polygon","isAreaChart","showSymbol","isIgnoreFunc","clipShapeForSymbol","oldClipPath","newClipPath","emphasisLineStyle","stackedOnSeries","stackedOnSmooth","changePolyState","symbolLabel","clipShape","isHorizontalOrRadial","isAxisInverse","seriesDuration","seriesDelay","seriesDelayValue","polarClip","gridClip","ratio","data_2","animationRecord","valueAnimation","distanceX","distanceY","dataIndexRange","endValue","modelUtil.interpolateRawValues","stackedOnCurrent","stackedOnNext","updatedDataInfo","diffStatus","pointsLayout","forceStoreInTypedArray","dimIdx0","dimIdx1","tmpIn","tmpOut","samplers","indexSampler","dataSample","sampling","sampler","install","registers","LineSeries","layoutPoints","lineStyle","GridModel","CartesianAxisModel","timeAxis","logAxis","axisDefault","AXIS_TYPES","axisModelCreator","BaseAxisModelClass","extraDefaultOption","AxisModel","getAxisType","thisOption","Cartesian","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","scaleX","scaleY","translateX","translateY","axisX","axisY","data1","data2","zoneDiag1","zoneDiag2","zone","xVal","yVal","xAxis","yAxis","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","yExtent","Axis2D","coordExtent","gridModel","grid","otherAxisOnZeroOf","rawAxisPosition","axisPosition","rectBound","axisOffset","posBound","onZeroCoord","dirMap","zrUtil.retrieve","isCartesian2DSeries","findAxisModels","axisModelMap","alignScaleTicks","alignToScale","alignToTicks","alignToNicedTicks","alignToSplitNumber","alignToInterval","scaleExtent","isMinFixed","isMaxFixed","logBase","nicedSplitNumber","t0","Grid","axesMap","updateAxisTicks","alignTo","axesIndices","axisNeedsAlign","onZeroRecords","fixAxisOnZero","ignoreContainLabel","boxLayoutParams","isContainLabel","gridRect","axesList","adjustAxes","labelUnionRect","updateAxisTransform","axesMapOnDim","xAxisIndex","yAxisIndex","coordList","coordsList","axisPositionUsed","axesCount","createAxisCreator","isAxisUsedInTheGrid","categorySortInfo","axesModelMap","unionExtent","baseAxes","otherAxes","otherAxis","grids","otherAxisDim","onZero","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","AxisBuilder","transformGroup","builders","axisRotation","textRotation","rotationDiff","eventData","tooltipOpt","shown","pt1","pt2","graphic.subPixelOptimizeLine","arrows","arrowSize","arrowOffset","symbolWidth_1","symbolHeight_1","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","nameLocation","nameDirection","gapSignal","isNameLocationCenter","labelLayout","nameRotation","axisNameAvailableWidth","endTextLayout","truncateOpt","graphic.setTooltipConfig","textRotate","onLeft","tickEls","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","lastTick","ignoreEl","isTwoLabelOverlapped","firstRect","nextRect","mRotationBack","matrixUtil.identity","matrixUtil.rotate","matrixUtil.mul","createTicks","tickTransform","tickEndCoord","tickLineStyle","anidPrefix","tickCoord","tickEl","tickDirection","minorTickLineStyle","minorTicksEls","show","labelMargin","labelRotation","rawCategoryData","triggerEvent","formattedLabel","itemLabelModel","rawCategoryItem","textColor","alignMin","alignMax","verticalAlignMin","verticalAlignMax","collect","collectAxesInfo","collectSeriesInfo","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","triggerTooltip","axisPointerModel","axisPointerShow","isHandleTrigger","makeAxisPointerModel","snap","triggerEmphasis","involveSeries","axisInfo","groupIndex","getLinkGroupIndex","linkGroup","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","crossStyle","seriesTooltipTrigger","seriesTooltipShow","linkOption","checkPropInLink","linkPropValue","axisPropValue","fixValue","getAxisInfo","useHandle","coordSysAxesInfo","getAxisPointerModel","axisPointerClazz","AxisView","axisPointerModelHelper.fixValue","axisPointer","forceRender","axisPointerModelHelper.getAxisPointerModel","rectCoordAxisBuildSplitArea","axisView","axisGroup","splitAreaModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","colorIndex","cIndex","areaStyle","rectCoordAxisHandleRemove","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","cartesianAxisHelper.layout","axisBuilder","elementType","cartesians","axisElementBuilders","isInitialSortFromBarRacing","graphic.groupTransition","splitLineModel","lineColors","showMinLine","showMaxLine","minorSplitLineModel","CartesianXAxisView","CartesianYAxisView","GridView","extraOption","ATTR","take","resourceKey","userKey","getStore","release","uKey","isTaken","echarts.registerAction","RoamController","mousedownHandler","mousemoveHandler","mouseupHandler","mousewheelHandler","pinchHandler","controlType","pointerChecker","eventTool.isMiddleOrRightButtonOnMouseUpDown","isAvailableBehavior","interactionMutex.isTaken","oldX","oldY","trigger","shouldZoom","shouldMove","absWheelDeltaDelta","factor","checkPointerAndTrigger","absDelta","scrollDelta","controller","behaviorToCheck","contollerEvent","IRRELEVANT_EXCLUDES","onIrrelevantElement","targetCoordSysModel","sliderMove","handleEnds","handleIndex","minSpan","maxSpan","restrict","handleSpan","originalDistSign","getSpanSign","extentMinSpan","realExtent","currDistSign","BRUSH_PANEL_GLOBAL","COVER_Z","UNSELECT_THRESHOLD","MIN_RESIZE_LINE_WIDTH","MUTEX_RESOURCE_KEY","DIRECTION_MAP","CURSOR_MAP","DEFAULT_BRUSH_OPT","baseUID","BrushController","pointerHandlers","brushOption","interactionMutex.take","interactionMutex.release","panelOpts","panels_1","thisGroup","coverConfigList","coverConfig","tmpIdPrefix","oldCovers","newCovers","creatingCover","oldGetKey","getKey","addOrUpdate","remove","cover","newIndex","oldIndex","newBrushInternal","endCreating","createCover","updateCoverAfterCreation","clearCovers","coverRenderers","coverRenderer","getCoverRenderer","updateCoverShape","getPanelByPoint","localCursorPoint","panels","panel","pn","getPanelByCover","panelId","covers","areas","shouldShowCover","getTrackEnds","tail","createBaseRectCover","rectRangeConverter","edgeNameSequences","makeStyle","driftRect","nameSequence","updateBaseRect","localRange","handleSize","xa","ya","x2a","y2a","widtha","heighta","updateRectShape","updateCommon","transformable","mainEl","globalDir","getGlobalDirection1","getGlobalDirection2","pointsToRect","clipByPanel","formatRectRange","graphic.getTransform","localDirName","inverseMap","graphic.transformDirection","localDirNameSeq","dirNameSequence","rectRange","localDelta","toLocalDelta","dirName","ind","driftPolygon","localD","localZero","xmin","ymin","xmax","ymax","resetCursor","isOutsideZrArea","currPanel","preventDefault","rawE","mainShapeContain","updateCoverByMouse","isEnd","thisBrushOption","eventParams","determineBrushType","coverBrushOption","brushType","handleDragEnd","getLineRenderer","returnInput","localTrack","ends","graphic.Polyline","graphic.Polygon","xyIndex","otherExtent","makeRectPanelClipPath","normalizeRect","localPoints","graphicUtil.clipPointsByRect","makeLinearBrushOtherExtent","specifiedXYIndex","brushWidth","makeRectIsTargetByCursor","targetModel","BaseAxisPointer","handle","elOption","graphicKey","moveAnimation","doUpdateProps","updateMandatoryProps","isCategoryAxis","useSnap","animationThreshold","seriesDataCount","axisPointerModelHelper.getAxisInfo","pointerOption","pointerEl","graphic","labelEl","updateLabelShowHide","handleModel","graphic.createIcon","throttleUtil.createOrUpdate","getHandleTransProps","trans","payloadInfo","throttleUtil.clear","xy","xDimIndex","animationModel","propsEqual","lastProps","newProps","equals_1","buildElStyle","axisPointerType","buildLabelElOption","labelPos","getValueLabel","paddings","confineInContainer","bgColor","seriesDataIndices","params_1","axisHelper.getAxisRawValue","idxItem","getTransformedPosition","layoutInfo","graphic.applyTransform","buildCartesianSingleLabelElOption","textLayout","makeLineShape","makeRectShape","CartesianAxisPointer","getCartesian","pixelValue","elStyle","viewHelper.buildElStyle","pointerShapeBuilder","viewHelper.buildCartesianSingleLabelElOption","viewHelper.getTransformedPosition","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","viewHelper.makeLineShape","getAxisDimIndex","viewHelper.makeRectShape","AxisPointerModel","register","initGlobalListeners","useHandler","doEnter","onLeave","dis","makeDispatchAction","dispatchTooltipFinally","pendings","showLen","hideLen","actuallyPayload","dispatchAction","currTrigger","unregister","AxisPointerView","triggerOn","globalListener.register","globalListener.unregister","findPointFromSeries","axisTrigger","illegalPoint","isIllegalPoint","inputAxesInfo","axesInfo","shouldHide","outputPayload","showValueMap","dataByCoordSys","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","noSnap","outputFinder","buildPayloadsBySeries","payloadBatch","snapToValue","seriesNestestValue","modelHelper.makeKey","coordSysItem","outputAxesInfo","valItem","highDownKey","lastHighlights","newHighlights","toHighlight","toDownplay","installSimple","installAxisPointer","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","coordType","getAxisMainType","findEffectedDataZooms","axisRecords","effectedModels","effectedModelMap","dataZoomModel","addToEffected","foundNewLink","processSingle","isLinked","dataZoom","markAxisControlled","isLink","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","coordSysUid","DataZoomAxisInfo","axisCmptIdx","DataZoomModel","inputRawOption","retrieveRawOption","settledOption","optionOrient","targetAxisIndexMap","hasAxisSpecified","refering","needAuto","axisModels","setParallelAxis","gridModel_1","axModel","globalOption","rangePropMode","rangeModeInOption","percentSpecified","valueSpecified","firstAxisModel","axisProxy","firstProxy","axisDimList","SelectDataZoomModel","DataZoomView","SelectDataZoomView","numberUtil.asc","AxisProxy","axisMainType","percentExtent","percentWindow","valueWindow","hasPropModeValue","boundPercent","boundValue","numberUtil.linearMap","spans","restrictSet","fromWindow","toWindow","fromExtent","toExtent","toValue","suffix","targetSeries","calculateDataExtent","dataWindow","filterMode","seriesData","store_1","dataDimIndices_1","leftOut","rightOut","thisHasValue","thisLeftOut","thisRightOut","isInWindow","minMaxSpan","percentSpan","valueSpan","numberUtil.getPixelPrecision","dataZoomProcessor","eachAxisModel","proxyList","seriesModelMap","percentRange","valueRange","installDataZoomAction","installed","installCommon","SelectZoomModel","SelectZoomView","ToolboxFeature","features","registerFeature","getFeature","ToolboxModel","featureName","Feature","featureManager.getFeature","viewportSize","layoutBox","makeBackground","ToolboxView","toolboxModel","itemSize","isVertical","featureOpts","featureNames","processFeature","featureModel","feature","isUserFeatureName","isToolboxFeature","createIconPaths","iconName","iconPaths","iconStyleModel","iconStyleEmphasisModel","icons","titles","iconsMap","titlesMap","pathEmphasisState","hoverStyle","defaultTextPosition","listComponentHelper.layout","listComponentHelper.makeBackground","icon","titleText","emphasisTextConfig","emphasisTextState","emphasisTextStyle","offsetX","offsetY","needPutOnTop","topOffset","SaveAsImage","title","$a","evt","base64Encoded","bstr","filename","u8arr","blob","cw","doc","html","tab","INNER_STACK_KEYWORD","radioTypes","MagicType","availableIcons","seriesOptGenreator","generateNewSeriesTypes","seriesId","newSeriesOpt","radio","newTitle","currentType","isStack","BLOCK_SPLITER","ITEM_SPLITER","groupSeries","seriesGroupByCategoryAxis","otherSeries","meta","assembleSeriesWithCategoryAxis","groups","tables","headers","columns","items","assembleOtherSeries","getContentFromModel","isTSVFormat","firstLine","itemSplitRegex","parseTSVContents","tsv","tsvLines","header","parseListContents","hasName","parseContents","blockMetaList","blockMeta","DataView","viewMain","textarea","optionToContent","contentToOption","htmlOrDom","zrUtil.isDom","buttonContainer","buttonStyle","closeButton","refreshButton","close","tryMergeDataOption","originalData","newVal","newValIsObject","shouldDeleteName","newSeriesOptList","push","newSnapshot","storedSnapshots","getStoreSnapshots","dataZoomId","snapshot","pop","head","RestoreOption","history.clear","INCLUDE_FINDER_MAIN_TYPES","BrushTargetManager","foundCpts","targetInfoBuilders","coordRange","coordConvert","diffProcessor","rangeOffset","getScales","getDefaultBrushType","brushHelper.makeRectPanelClipPath","brushHelper.makeRectIsTargetByCursor","brushHelper.makeLinearBrushOtherExtent","targetInfoList","areaPanelId","targetInfoMatchers","formatMinMax","modelUtilParseFinder","xAxisModels","yAxisModels","gridModels","gridModelMap","xAxesHas","yAxesHas","panelRectBuilders","geoModel","axisConvert","to","rangeOrCoordRange","xminymin","xmaxymax","xyMinMax","axisNameIndex","axisDiffProcessor","refer","scales","xyMinMaxCurr","xyMinMaxOrigin","sizeCurr","sizeOrigin","DATA_ZOOM_ID_BASE","DataZoomFeature","updateZoomBtnStatus","updateBackBtnStatus","handlers","eventParam","brushTargetManager","makeAxisFinder","setBatch","history.push","findDataZoom","dzModel","has","batch","nextActive","history.pop","dzFeatureModel","history.count","zoomActive","featureDataZoomPath","dzOptions","finderResult","buildInternalOptions","axisIndexPropName","newOpt","DataZoom","Restore","installDataZoomSelect","TooltipModel","shouldTooltipConfine","tooltipModel","confineOption","testStyle","styleProps","TRANSFORM_VENDOR","TRANSITION_VENDOR","toCSSVendorPrefix","styleVendor","styleProp","getComputedStyle","CSS_TRANSITION_VENDOR","CSS_TRANSFORM_VENDOR","gCssText","mirrorPos","assembleArrow","arrowPosition","borderWidth","arrowPos","positionStyle","transformStyle","rotateDeg","rotateRadian","arrowWH","rotatedWH","borderStyle","styleCss","assembleTransition","onlyFade","transitionCurve","transitionOption","transitionText","assembleTransform","toString","is3d","assembleFont","cssText","shadowColor","shadowBlur","assembleCssText","enableTransition","transitionDuration","boxShadow","borderName","camelCase","makeStyleCoord","zrX","zrY","zrPainter","zrViewportRoot","viewportRootOffset","TooltipHTMLContent","appendTo","alwaysShowContent","nearPointColor","styleCoord","content","arrow","arrowEl","enterable","style_1","transforms","ratioX","ratioY","parentNode","TooltipRichContent","bounding","shadowOuterSize","calcShadowOuterSize","mathMaxWith0","proxyRect","TooltipView","tooltipContent","self_1","cmptRef","findComponentReference","pointInfo","tooltipCascadedModel","buildTooltipModel","seriesDispatcher_1","cmptDispatcher_1","singleTooltipModel","cbParamsList","articleMarkup","markupTextArrLegacy","itemCoordSys","axisItem","axisValue","axisValueLabel","axisPointerViewHelper.getValueLabel","axisSectionMarkup","cbParams","seriesTooltipResult","positionExpr","builtMarkupText","blockBreak","allMarkupText","positionDefault","tooltipTrigger","asyncTicket","isHTMLRenderMode","tooltipConfig","encodeHTMLContent","tooltipModelCascade","subTooltipModel","defaultHtml","nearPoint","params0","isTimeAxis","cbTicket","tooltipDataParams","contentSize","vAlign","boxLayoutPosition","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","lastCbParamsList","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","lastIndices","lastIdxItem","newIdxItem","lastCbParams","modelCascade","defaultTooltipOption","resultModel","gapH","gapV","domWidth","domHeight","rectWidth","rectHeight","subEl","TitleModel","TitleView","titleModel","subtextStyleModel","subText","subTextEl","sublink","groupRect","layoutOption","alignStyle","getDefaultSelectorOptions","LegendModel","selector","legendData","hasSelected","potentialData","availableNames","isPotential","legendNameMap","LegendView","legendModel","isFirstRender","itemAlign","selectorPosition","layoutUtil.getLayoutRect","mainRect","contentGroup","legendDrawnMap","selectMode","legendItemModel","lineVisualStyle","legendIcon","itemGroup","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","selectorGroup","selectorItem","labelText","emphasisLabelModel","itemVisualStyle","drawType","itemWidth","itemHeight","isSelected","iconRotate","symbolKeepAspect","legendIconType","getLegendStyle","getDefaultLegendIcon","hitRect","layoutUtil.box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","hw","yx","iconType","handleCommonProps","visualStyle","propVal","itemStyleModel","iconBrushType","decalStyle","legendLineModel","visualHasBorder","symboType","dataName","isUseHoverLayer","legendFilter","legendModels","legendSelectActionHandler","isAllSelect","actionLegendIndices","makeSelectedMap","allSelectedMap","isItemSelected","installLegendAction","ScrollableLegendModel","scrollDataIndex","mergeAndNormalizeLayoutParams","raw","WH","XY","ScrollableLegendView","controllerGroup","pageIconSize","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","processMaxSize","containerGroup","controllerRect","showController","containerPos","controllerPos","pageButtonGap","pageButtonPosition","pageInfo","canJump","pageText","pageFormatter","pageIndex","containerRectSize","targetItemIndex","targetItem","itemCount","pCount","targetItemInfo","getItemInfo","winStartItemInfo","winEndItemInfo","currItemInfo","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","installLegendPlain","installLegendScroll","InsideZoomModel","setViewInfoToCoordSysRecord","getRange","coordSysRecord","dzInfo","disposeCoordSysRecordIfNeeded","coordSysRecordMap","coordSysKeyArr","dataZoomInfoMap","dzUid","disposeCoordSysRecord","createCoordSysRecord","containsPoint","mergeControllerParams","prefix","typePriority","preventDefaultMouseMove","dataZoomInfo","oneType","installDataZoomRoamProcessor","apiInner","dzReferCoordSysWrap","dzCoordSysInfo","firstDzInfo","firstDzKey","controllerParams","InsideZoomView","roams.setViewInfoToCoordSysRecord","getRangeHandlers","roams.disposeCoordSysRecordIfNeeded","coordSysMainType","lastRange","directionInfo","getDirectionInfo","percentPoint","makeMover","getPercentDelta","percentDelta","oldPoint","newPoint","radiusExtent","angleExtent","SliderZoomModel","DEFAULT_LOCATION_EDGE_GAP","DEFAULT_FRAME_BORDER_WIDTH","DEFAULT_FILLER_SIZE","DEFAULT_MOVE_HANDLE_SIZE","HORIZONTAL","VERTICAL","LABEL_GAP","SHOW_DATA_SHADOW_SERIES_TYPE","REALTIME_ANIMATION_CONFIG","SliderZoomView","throttle.createOrUpdate","throttle.clear","barGroup","showMoveHandle","moveHandleSize","coordRect","ecSize","layoutParams","layout.getLayoutRect","location","targetAxisModel","sliderGroup","otherAxisInverse","brushSelect","clickPanel","oldSize","candlestickDim","polygonPts","polylinePts","otherDataExtent_1","otherOffset","otherShadowExtent_1","thisShadowExtent","areaPoints_1","linePoints_1","step_1","thisCoord_1","stride_1","lastIsEmpty_1","otherCoord","createDataShadowGroup","isSelectedArea","showDataShadow","thisAxis","getOtherDim","handles","handleLabels","borderRadius","filler","getCursor","bRect","handleColor","handleLabel","handleLabelShow","actualMoveZone","moveHandleHeight","moveHandle_1","iconSize","moveHandleIcon","moveZoneExpandSize","viewExtent","viewExtend","nonRealtime","displaybles","handleInterval","handleHeight","dataShadowSegs","segIntervals","segGroup","dataInterval","orderedHandleEnds","setLabel","barTransform","textPoint","labelPrecision","valueStr","normalShow","emphasisHandleLabel","emphasisShow","toShow","changed","realtime","localPoint","graphic.Point","brushRect","brushShape","brushEndTime","mouseX","mouseY","brushStart","endPoint","startPoint","coordSysInfoList","thisDim","installDataZoomInside","installDataZoomSlider","createDom","newDom","newDomStyle","Layer","util.isObject","util.disableUserSelect","prevList","mergedRepaintRects","maxRepaintRectCount","full","pendingRect","addRectToMergePool","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","pendingRect_1","aArea","bArea","pendingArea","deltaArea","shouldPaint","prevRect","curRect","hasIntersections","domBack","clearAll","clearColor","repaintRects","haveMotionBLur","lastFrameAlpha","doClear","clearColorGradientOrPattern","util.isGradientObject","shouldCache","util.isImagePatternObject","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","isLayerValid","createRoot","domRoot","CanvasPainter","singleCanvas","util.extend","rootStyle","zlevelList","layers","rootCanvas","mainLayer","viewportRoot","paintAll","hoverLayer","redrawId","needsRefreshHover","layerList","useDirtyRect","zi","_loop_1","this_1","useTimer","firstEl","repaint","repaintRect","dTime","currentLayer","virtual","util.merge","layersMap","prevLayer","prevDom","updatePrevLayer","incrementalLayerCount","prevZlevel","util.logError","layerConfig","_zlevel","imageLayer","width_1","height_1"],"mappings":"yCAAA,IAAIA,GAAW,UAAY,CACvB,SAASA,GAAU,CACf,KAAK,QAAU,GACf,KAAK,GAAK,GACV,KAAK,KAAO,GACZ,KAAK,QAAU,GACf,KAAK,OAAS,EACtB,CACI,OAAOA,CACX,IACIC,GAAO,UAAY,CACnB,SAASA,GAAM,CACX,KAAK,QAAU,IAAID,GACnB,KAAK,KAAO,GACZ,KAAK,IAAM,GACX,KAAK,OAAS,GACd,KAAK,aAAe,GACpB,KAAK,qBAAuB,GAC5B,KAAK,uBAAyB,GAC9B,KAAK,aAAe,GACpB,KAAK,mBAAqB,GAC1B,KAAK,qBAAuB,GAC5B,KAAK,gBAAkB,OAAO,OAAW,GACjD,CACI,OAAOC,CACX,IACIC,EAAM,IAAID,GACV,OAAO,IAAO,UAAY,OAAO,GAAG,mBAAsB,YAC1DC,EAAI,IAAM,GACVA,EAAI,qBAAuB,IAEtB,OAAO,SAAa,KAAe,OAAO,KAAS,IACxDA,EAAI,OAAS,GAER,CAACA,EAAI,iBAAmB,SAAU,QACvCA,EAAI,KAAO,GACXA,EAAI,aAAe,IAGnBC,GAAO,UAAU,UAAWD,CAAG,EAEnC,SAASC,GAAOC,EAAIF,EAAK,CACrB,IAAIG,EAAUH,EAAI,QACdI,EAAUF,EAAG,MAAM,mBAAmB,EACtCG,EAAKH,EAAG,MAAM,gBAAgB,GAC3BA,EAAG,MAAM,2BAA2B,EACvCI,EAAOJ,EAAG,MAAM,iBAAiB,EACjCK,EAAU,kBAAmB,KAAKL,CAAE,EACpCE,IACAD,EAAQ,QAAU,GAClBA,EAAQ,QAAUC,EAAQ,CAAC,GAE3BC,IACAF,EAAQ,GAAK,GACbA,EAAQ,QAAUE,EAAG,CAAC,GAEtBC,IACAH,EAAQ,KAAO,GACfA,EAAQ,QAAUG,EAAK,CAAC,EACxBH,EAAQ,QAAU,CAACG,EAAK,CAAC,EAAE,MAAM,GAAG,EAAE,CAAC,EAAI,IAE3CC,IACAJ,EAAQ,OAAS,IAErBH,EAAI,aAAe,OAAO,QAAY,IACtCA,EAAI,qBAAuB,iBAAkB,QAAU,CAACG,EAAQ,IAAM,CAACA,EAAQ,KAC/EH,EAAI,uBAAyB,kBAAmB,SACxCG,EAAQ,MAASA,EAAQ,IAAM,CAACA,EAAQ,SAAW,IAC3DH,EAAI,aAAe,OAAO,SAAa,IACvC,IAAIQ,EAAQ,SAAS,gBAAgB,MACrCR,EAAI,sBAAyBG,EAAQ,IAAM,eAAgBK,GACpDL,EAAQ,MACN,oBAAqB,QAAY,QAAS,IAAI,iBAChD,mBAAoBK,IACpB,EAAE,gBAAiBA,GAC1BR,EAAI,mBAAqBA,EAAI,sBACrBG,EAAQ,IAAM,CAACA,EAAQ,SAAW,CAC9C,CC7EO,IAAIM,GAAoB,GACpBC,GAAsB,aACtBC,GAAeF,GAAoB,MAAQC,GAClDE,GAAS,GACTC,GAAQ,IACRC,GAAqB,yGACzB,SAASC,GAAgBC,EAAQ,CAC7B,IAAIC,EAAM,CAAE,EACZ,GAAI,OAAO,KAAS,IAChB,OAAOA,EAEX,QAASC,EAAI,EAAGA,EAAIF,EAAO,OAAQE,IAAK,CACpC,IAAIC,EAAO,OAAO,aAAaD,EAAI,EAAE,EACjCE,GAAQJ,EAAO,WAAWE,CAAC,EAAIN,IAAUC,GAC7CI,EAAIE,CAAI,EAAIC,CACpB,CACI,OAAOH,CACX,CACO,IAAII,GAAyBN,GAAgBD,EAAkB,EAC3DQ,GAAc,CACrB,aAAc,UAAY,CACtB,OAAO,OAAO,SAAa,KACpB,SAAS,cAAc,QAAQ,CACzC,EACD,YAAc,UAAY,CACtB,IAAIC,EACAC,EACJ,OAAO,SAAUC,EAAMC,EAAM,CACzB,GAAI,CAACH,EAAM,CACP,IAAII,EAASL,GAAY,aAAc,EACvCC,EAAOI,GAAUA,EAAO,WAAW,IAAI,CACvD,CACY,GAAIJ,EACA,OAAIC,IAAgBE,IAChBF,EAAcD,EAAK,KAAOG,GAAQf,IAE/BY,EAAK,YAAYE,CAAI,EAG5BA,EAAOA,GAAQ,GACfC,EAAOA,GAAQf,GACf,IAAIiB,EAAM,qBAAqB,KAAKF,CAAI,EACpCG,EAAWD,GAAO,CAACA,EAAI,CAAC,GAAKnB,GAC7BqB,EAAQ,EACZ,GAAIJ,EAAK,QAAQ,MAAM,GAAK,EACxBI,EAAQD,EAAWJ,EAAK,WAGxB,SAASP,EAAI,EAAGA,EAAIO,EAAK,OAAQP,IAAK,CAClC,IAAIa,EAAeV,GAAuBI,EAAKP,CAAC,CAAC,EACjDY,GAASC,GAAgB,KAAOF,EAAYE,EAAeF,CACnF,CAEgB,MAAO,CAAE,MAAOC,CAAO,CAE9B,CACT,EAAQ,EACJ,UAAW,SAAUE,EAAKC,EAAQC,EAAS,CACvC,IAAIC,EAAQ,IAAI,MAChB,OAAAA,EAAM,OAASF,EACfE,EAAM,QAAUD,EAChBC,EAAM,IAAMH,EACLG,CACf,CACA,EC/DIC,GAAiBC,GAAO,CACxB,WACA,SACA,OACA,QACA,iBACA,gBACA,QACA,QACJ,EAAG,SAAUC,EAAKC,EAAK,CACnB,OAAAD,EAAI,WAAaC,EAAM,GAAG,EAAI,GACvBD,CACX,EAAG,EAAE,EACDE,GAAcH,GAAO,CACrB,OACA,QACA,eACA,QACA,SACA,QACA,SACA,UACA,SACJ,EAAG,SAAUC,EAAKC,EAAK,CACnB,OAAAD,EAAI,WAAaC,EAAM,QAAQ,EAAI,GAC5BD,CACX,EAAG,EAAE,EACDG,GAAc,OAAO,UAAU,SAC/BC,GAAa,MAAM,UACnBC,GAAgBD,GAAW,QAC3BE,GAAeF,GAAW,OAC1BG,GAAcH,GAAW,MACzBI,GAAYJ,GAAW,IACvBK,IAAe,UAAY,CAAA,GAAI,YAC/BC,GAAgBD,GAAeA,GAAa,UAAY,KACxDE,GAAW,YACXC,GAAU,KACP,SAASC,IAAO,CACnB,OAAOD,IACX,CACO,SAASE,IAAW,CAEvB,QADIC,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,CAAE,EAAI,UAAUA,CAAE,EAEvB,OAAO,QAAY,KACnB,QAAQ,MAAM,MAAM,QAASD,CAAI,CAEzC,CACO,SAASE,EAAMC,EAAQ,CAC1B,GAAIA,GAAU,MAAQ,OAAOA,GAAW,SACpC,OAAOA,EAEX,IAAIC,EAASD,EACTE,EAAUjB,GAAY,KAAKe,CAAM,EACrC,GAAIE,IAAY,kBACZ,GAAI,CAACC,GAAYH,CAAM,EAAG,CACtBC,EAAS,CAAE,EACX,QAAS,EAAI,EAAGG,EAAMJ,EAAO,OAAQ,EAAII,EAAK,IAC1CH,EAAO,CAAC,EAAIF,EAAMC,EAAO,CAAC,CAAC,CAE3C,UAEahB,GAAYkB,CAAO,GACxB,GAAI,CAACC,GAAYH,CAAM,EAAG,CACtB,IAAIK,EAAOL,EAAO,YAClB,GAAIK,EAAK,KACLJ,EAASI,EAAK,KAAKL,CAAM,MAExB,CACDC,EAAS,IAAII,EAAKL,EAAO,MAAM,EAC/B,QAAS,EAAI,EAAGI,EAAMJ,EAAO,OAAQ,EAAII,EAAK,IAC1CH,EAAO,CAAC,EAAID,EAAO,CAAC,CAExC,CACA,UAEa,CAACpB,GAAesB,CAAO,GAAK,CAACC,GAAYH,CAAM,GAAK,CAACM,GAAMN,CAAM,EAAG,CACzEC,EAAS,CAAE,EACX,QAASM,KAAOP,EACRA,EAAO,eAAeO,CAAG,GAAKA,IAAQd,KACtCQ,EAAOM,CAAG,EAAIR,EAAMC,EAAOO,CAAG,CAAC,EAG/C,CACI,OAAON,CACX,CACO,SAASO,EAAMC,EAAQT,EAAQU,EAAW,CAC7C,GAAI,CAACC,EAASX,CAAM,GAAK,CAACW,EAASF,CAAM,EACrC,OAAOC,EAAYX,EAAMC,CAAM,EAAIS,EAEvC,QAASF,KAAOP,EACZ,GAAIA,EAAO,eAAeO,CAAG,GAAKA,IAAQd,GAAU,CAChD,IAAImB,EAAaH,EAAOF,CAAG,EACvBM,EAAab,EAAOO,CAAG,EACvBI,EAASE,CAAU,GAChBF,EAASC,CAAU,GACnB,CAACE,EAAQD,CAAU,GACnB,CAACC,EAAQF,CAAU,GACnB,CAACN,GAAMO,CAAU,GACjB,CAACP,GAAMM,CAAU,GACjB,CAACG,GAAgBF,CAAU,GAC3B,CAACE,GAAgBH,CAAU,GAC3B,CAACT,GAAYU,CAAU,GACvB,CAACV,GAAYS,CAAU,EAC1BJ,EAAMI,EAAYC,EAAYH,CAAS,GAElCA,GAAa,EAAEH,KAAOE,MAC3BA,EAAOF,CAAG,EAAIR,EAAMC,EAAOO,CAAG,CAAC,EAE/C,CAEI,OAAOE,CACX,CAQO,SAASO,EAAOP,EAAQT,EAAQ,CACnC,GAAI,OAAO,OACP,OAAO,OAAOS,EAAQT,CAAM,MAG5B,SAASO,KAAOP,EACRA,EAAO,eAAeO,CAAG,GAAKA,IAAQd,KACtCgB,EAAOF,CAAG,EAAIP,EAAOO,CAAG,GAIpC,OAAOE,CACX,CACO,SAASQ,EAASR,EAAQT,EAAQkB,EAAS,CAE9C,QADIC,EAAUC,GAAKpB,CAAM,EAChBtC,EAAI,EAAG0C,EAAMe,EAAQ,OAAQzD,EAAI0C,EAAK1C,IAAK,CAChD,IAAI6C,EAAMY,EAAQzD,CAAC,EACkB+C,EAAOF,CAAG,GAAK,OAChDE,EAAOF,CAAG,EAAIP,EAAOO,CAAG,EAEpC,CACI,OAAOE,CACX,CAEO,SAASY,EAAQC,EAAOC,EAAO,CAClC,GAAID,EAAO,CACP,GAAIA,EAAM,QACN,OAAOA,EAAM,QAAQC,CAAK,EAE9B,QAAS7D,EAAI,EAAG0C,EAAMkB,EAAM,OAAQ5D,EAAI0C,EAAK1C,IACzC,GAAI4D,EAAM5D,CAAC,IAAM6D,EACb,OAAO7D,CAGvB,CACI,MAAO,EACX,CACO,SAAS8D,GAASC,EAAOC,EAAW,CACvC,IAAIC,EAAiBF,EAAM,UAC3B,SAASG,GAAI,CAAA,CACbA,EAAE,UAAYF,EAAU,UACxBD,EAAM,UAAY,IAAIG,EACtB,QAASC,KAAQF,EACTA,EAAe,eAAeE,CAAI,IAClCJ,EAAM,UAAUI,CAAI,EAAIF,EAAeE,CAAI,GAGnDJ,EAAM,UAAU,YAAcA,EAC9BA,EAAM,WAAaC,CACvB,CACO,SAASI,GAAMrB,EAAQT,EAAQ+B,EAAU,CAG5C,GAFAtB,EAAS,cAAeA,EAASA,EAAO,UAAYA,EACpDT,EAAS,cAAeA,EAASA,EAAO,UAAYA,EAChD,OAAO,oBAEP,QADIgC,EAAU,OAAO,oBAAoBhC,CAAM,EACtCtC,EAAI,EAAGA,EAAIsE,EAAQ,OAAQtE,IAAK,CACrC,IAAI6C,EAAMyB,EAAQtE,CAAC,EACf6C,IAAQ,eAC8BE,EAAOF,CAAG,GAAK,OACjDE,EAAOF,CAAG,EAAIP,EAAOO,CAAG,EAG5C,MAGQU,EAASR,EAAQT,CAAgB,CAEzC,CACO,SAASiC,GAAYC,EAAM,CAI9B,MAHI,CAACA,GAGD,OAAOA,GAAS,SACT,GAEJ,OAAOA,EAAK,QAAW,QAClC,CACO,SAASC,EAAKC,EAAKC,EAAIC,EAAS,CACnC,GAAMF,GAAOC,EAGb,GAAID,EAAI,SAAWA,EAAI,UAAYjD,GAC/BiD,EAAI,QAAQC,EAAIC,CAAO,UAElBF,EAAI,SAAW,CAACA,EAAI,OACzB,QAAS,EAAI,EAAGhC,EAAMgC,EAAI,OAAQ,EAAIhC,EAAK,IACvCiC,EAAG,KAAKC,EAASF,EAAI,CAAC,EAAG,EAAGA,CAAG,MAInC,SAAS7B,KAAO6B,EACRA,EAAI,eAAe7B,CAAG,GACtB8B,EAAG,KAAKC,EAASF,EAAI7B,CAAG,EAAGA,EAAK6B,CAAG,CAInD,CACO,SAAS3E,EAAI2E,EAAKC,EAAIC,EAAS,CAClC,GAAI,CAACF,EACD,MAAO,CAAE,EAEb,GAAI,CAACC,EACD,OAAOE,GAAMH,CAAG,EAEpB,GAAIA,EAAI,KAAOA,EAAI,MAAQ9C,GACvB,OAAO8C,EAAI,IAAIC,EAAIC,CAAO,EAI1B,QADIrC,EAAS,CAAE,EACNvC,EAAI,EAAG0C,EAAMgC,EAAI,OAAQ1E,EAAI0C,EAAK1C,IACvCuC,EAAO,KAAKoC,EAAG,KAAKC,EAASF,EAAI1E,CAAC,EAAGA,EAAG0E,CAAG,CAAC,EAEhD,OAAOnC,CAEf,CACO,SAASpB,GAAOuD,EAAKC,EAAIG,EAAMF,EAAS,CAC3C,GAAMF,GAAOC,EAGb,SAAS3E,EAAI,EAAG0C,EAAMgC,EAAI,OAAQ1E,EAAI0C,EAAK1C,IACvC8E,EAAOH,EAAG,KAAKC,EAASE,EAAMJ,EAAI1E,CAAC,EAAGA,EAAG0E,CAAG,EAEhD,OAAOI,EACX,CACO,SAASC,GAAOL,EAAKC,EAAIC,EAAS,CACrC,GAAI,CAACF,EACD,MAAO,CAAE,EAEb,GAAI,CAACC,EACD,OAAOE,GAAMH,CAAG,EAEpB,GAAIA,EAAI,QAAUA,EAAI,SAAWhD,GAC7B,OAAOgD,EAAI,OAAOC,EAAIC,CAAO,EAI7B,QADIrC,EAAS,CAAE,EACNvC,EAAI,EAAG0C,EAAMgC,EAAI,OAAQ1E,EAAI0C,EAAK1C,IACnC2E,EAAG,KAAKC,EAASF,EAAI1E,CAAC,EAAGA,EAAG0E,CAAG,GAC/BnC,EAAO,KAAKmC,EAAI1E,CAAC,CAAC,EAG1B,OAAOuC,CAEf,CAWO,SAASmB,GAAKtC,EAAK,CACtB,GAAI,CAACA,EACD,MAAO,CAAE,EAEb,GAAI,OAAO,KACP,OAAO,OAAO,KAAKA,CAAG,EAE1B,IAAIkD,EAAU,CAAE,EAChB,QAASzB,KAAOzB,EACRA,EAAI,eAAeyB,CAAG,GACtByB,EAAQ,KAAKzB,CAAG,EAGxB,OAAOyB,CACX,CACA,SAASU,GAAaC,EAAML,EAAS,CAEjC,QADIzC,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAE/B,OAAO,UAAY,CACf,OAAO6C,EAAK,MAAML,EAASzC,EAAK,OAAOR,GAAY,KAAK,SAAS,CAAC,CAAC,CACtE,CACL,CACO,IAAIuD,EAAQpD,IAAiBqD,EAAWrD,GAAc,IAAI,EAC3DA,GAAc,KAAK,KAAKA,GAAc,IAAI,EAC1CkD,GACN,SAASI,GAAMH,EAAM,CAEjB,QADI9C,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAE/B,OAAO,UAAY,CACf,OAAO6C,EAAK,MAAM,KAAM9C,EAAK,OAAOR,GAAY,KAAK,SAAS,CAAC,CAAC,CACnE,CACL,CAEO,SAASyB,EAAQS,EAAO,CAC3B,OAAI,MAAM,QACC,MAAM,QAAQA,CAAK,EAEvBtC,GAAY,KAAKsC,CAAK,IAAM,gBACvC,CACO,SAASsB,EAAWtB,EAAO,CAC9B,OAAO,OAAOA,GAAU,UAC5B,CACO,SAASwB,EAASxB,EAAO,CAC5B,OAAO,OAAOA,GAAU,QAC5B,CACO,SAASyB,GAAazB,EAAO,CAChC,OAAOtC,GAAY,KAAKsC,CAAK,IAAM,iBACvC,CACO,SAAS0B,GAAS1B,EAAO,CAC5B,OAAO,OAAOA,GAAU,QAC5B,CACO,SAASZ,EAASY,EAAO,CAC5B,IAAI2B,EAAO,OAAO3B,EAClB,OAAO2B,IAAS,YAAe,CAAC,CAAC3B,GAAS2B,IAAS,QACvD,CACO,SAASnC,GAAgBQ,EAAO,CACnC,MAAO,CAAC,CAAC3C,GAAeK,GAAY,KAAKsC,CAAK,CAAC,CACnD,CACO,SAAS4B,GAAa5B,EAAO,CAChC,MAAO,CAAC,CAACvC,GAAYC,GAAY,KAAKsC,CAAK,CAAC,CAChD,CACO,SAASjB,GAAMiB,EAAO,CACzB,OAAO,OAAOA,GAAU,UACjB,OAAOA,EAAM,UAAa,UAC1B,OAAOA,EAAM,eAAkB,QAC1C,CACO,SAAS6B,GAAiB7B,EAAO,CACpC,OAAOA,EAAM,YAAc,IAC/B,CACO,SAAS8B,GAAqB9B,EAAO,CACxC,OAAOA,EAAM,OAAS,IAC1B,CAIO,SAAS+B,GAAM/B,EAAO,CACzB,OAAOA,IAAUA,CACrB,CACO,SAASgC,IAAW,CAEvB,QADI1D,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,CAAE,EAAI,UAAUA,CAAE,EAE3B,QAASpC,EAAI,EAAG0C,EAAMP,EAAK,OAAQnC,EAAI0C,EAAK1C,IACxC,GAAImC,EAAKnC,CAAC,GAAK,KACX,OAAOmC,EAAKnC,CAAC,CAGzB,CACO,SAAS8F,EAAUC,EAAQC,EAAQ,CACtC,OAAOD,GAEDC,CACV,CACO,SAASC,GAAUF,EAAQC,EAAQE,EAAQ,CAC9C,OAAOH,GAEDC,GAEIE,CACd,CACO,SAASrB,GAAMH,EAAK,CAEvB,QADIvC,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAE/B,OAAOT,GAAY,MAAM+C,EAAKvC,CAAI,CACtC,CACO,SAASgE,GAAkB9E,EAAK,CACnC,GAAI,OAAQA,GAAS,SACjB,MAAO,CAACA,EAAKA,EAAKA,EAAKA,CAAG,EAE9B,IAAIqB,EAAMrB,EAAI,OACd,OAAIqB,IAAQ,EACD,CAACrB,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,CAAC,EAEjCqB,IAAQ,EACN,CAACrB,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,CAAC,EAEnCA,CACX,CACO,SAAS+E,GAAOC,EAAWC,EAAS,CACvC,GAAI,CAACD,EACD,MAAM,IAAI,MAAMC,CAAO,CAE/B,CACO,SAASC,GAAKC,EAAK,CACtB,OAAIA,GAAO,KACA,KAEF,OAAOA,EAAI,MAAS,WAClBA,EAAI,KAAM,EAGVA,EAAI,QAAQ,qCAAsC,EAAE,CAEnE,CACA,IAAIC,GAAe,mBACZ,SAASC,GAAetF,EAAK,CAChCA,EAAIqF,EAAY,EAAI,EACxB,CACO,SAAShE,GAAYrB,EAAK,CAC7B,OAAOA,EAAIqF,EAAY,CAC3B,CACA,IAAIE,GAAe,UAAY,CAC3B,SAASA,GAAc,CACnB,KAAK,KAAO,CAAE,CACtB,CACI,OAAAA,EAAY,UAAU,OAAY,SAAU9D,EAAK,CAC7C,IAAI+D,EAAU,KAAK,IAAI/D,CAAG,EAC1B,OAAI+D,GACA,OAAO,KAAK,KAAK/D,CAAG,EAEjB+D,CACV,EACDD,EAAY,UAAU,IAAM,SAAU9D,EAAK,CACvC,OAAO,KAAK,KAAK,eAAeA,CAAG,CACtC,EACD8D,EAAY,UAAU,IAAM,SAAU9D,EAAK,CACvC,OAAO,KAAK,KAAKA,CAAG,CACvB,EACD8D,EAAY,UAAU,IAAM,SAAU9D,EAAKgB,EAAO,CAC9C,YAAK,KAAKhB,CAAG,EAAIgB,EACV,IACV,EACD8C,EAAY,UAAU,KAAO,UAAY,CACrC,OAAOjD,GAAK,KAAK,IAAI,CACxB,EACDiD,EAAY,UAAU,QAAU,SAAUE,EAAU,CAChD,IAAIrC,EAAO,KAAK,KAChB,QAAS3B,KAAO2B,EACRA,EAAK,eAAe3B,CAAG,GACvBgE,EAASrC,EAAK3B,CAAG,EAAGA,CAAG,CAGlC,EACM8D,CACX,IACIG,GAAuB,OAAO,KAAQ,WAC1C,SAASC,IAAiB,CACtB,OAAQD,GAAuB,IAAI,IAAQ,IAAIH,EACnD,CACA,IAAIK,GAAW,UAAY,CACvB,SAASA,EAAQ5F,EAAK,CAClB,IAAI6F,EAAQ7D,EAAQhC,CAAG,EACvB,KAAK,KAAO2F,GAAgB,EAC5B,IAAIG,EAAU,KACb9F,aAAe4F,EACV5F,EAAI,KAAK+F,CAAK,EACb/F,GAAOqD,EAAKrD,EAAK+F,CAAK,EAC7B,SAASA,EAAMtD,EAAOhB,EAAK,CACvBoE,EAAQC,EAAQ,IAAIrD,EAAOhB,CAAG,EAAIqE,EAAQ,IAAIrE,EAAKgB,CAAK,CACpE,CACA,CACI,OAAAmD,EAAQ,UAAU,OAAS,SAAUnE,EAAK,CACtC,OAAO,KAAK,KAAK,IAAIA,CAAG,CAC3B,EACDmE,EAAQ,UAAU,IAAM,SAAUnE,EAAK,CACnC,OAAO,KAAK,KAAK,IAAIA,CAAG,CAC3B,EACDmE,EAAQ,UAAU,IAAM,SAAUnE,EAAKgB,EAAO,CAC1C,YAAK,KAAK,IAAIhB,EAAKgB,CAAK,EACjBA,CACV,EACDmD,EAAQ,UAAU,KAAO,SAAUrC,EAAIC,EAAS,CAC5C,KAAK,KAAK,QAAQ,SAAUf,EAAOhB,EAAK,CACpC8B,EAAG,KAAKC,EAASf,EAAOhB,CAAG,CACvC,CAAS,CACJ,EACDmE,EAAQ,UAAU,KAAO,UAAY,CACjC,IAAItD,EAAO,KAAK,KAAK,KAAM,EAC3B,OAAOoD,GACD,MAAM,KAAKpD,CAAI,EACfA,CACT,EACDsD,EAAQ,UAAU,UAAY,SAAUnE,EAAK,CACzC,KAAK,KAAK,OAAUA,CAAG,CAC1B,EACMmE,CACX,IAEO,SAASI,EAAchG,EAAK,CAC/B,OAAO,IAAI4F,GAAQ5F,CAAG,CAC1B,CACO,SAASiG,GAAYC,EAAGC,EAAG,CAE9B,QADIC,EAAW,IAAIF,EAAE,YAAYA,EAAE,OAASC,EAAE,MAAM,EAC3C,EAAI,EAAG,EAAID,EAAE,OAAQ,IAC1BE,EAAS,CAAC,EAAIF,EAAE,CAAC,EAGrB,QADIG,EAASH,EAAE,OACN,EAAI,EAAG,EAAIC,EAAE,OAAQ,IAC1BC,EAAS,EAAIC,CAAM,EAAIF,EAAE,CAAC,EAE9B,OAAOC,CACX,CACO,SAASE,GAAaC,EAAOC,EAAY,CAC5C,IAAIxG,EACJ,GAAI,OAAO,OACPA,EAAM,OAAO,OAAOuG,CAAK,MAExB,CACD,IAAIE,EAAY,UAAY,CAAG,EAC/BA,EAAU,UAAYF,EACtBvG,EAAM,IAAIyG,CAClB,CACI,OAAID,GACAtE,EAAOlC,EAAKwG,CAAU,EAEnBxG,CACX,CACO,SAAS0G,GAAkBC,EAAK,CACnC,IAAIC,EAAWD,EAAI,MACnBC,EAAS,iBAAmB,OAC5BA,EAAS,WAAa,OACtBA,EAAS,wBAA0B,gBACnCA,EAAS,uBAAuB,EAAI,MACxC,CACO,SAASC,GAAOC,EAAK/D,EAAM,CAC9B,OAAO+D,EAAI,eAAe/D,CAAI,CAClC,CACO,SAASgE,IAAO,CAAA,CAChB,IAAIC,GAAmB,IAAM,KAAK,GC7hBlC,SAASC,GAAOC,EAAGC,EAAG,CACzB,OAAID,GAAK,OACLA,EAAI,GAEJC,GAAK,OACLA,EAAI,GAED,CAACD,EAAGC,CAAC,CAChB,CAMO,SAASlG,GAAMmG,EAAG,CACrB,MAAO,CAACA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CACtB,CAMO,SAASC,GAAIC,EAAKC,EAAIC,EAAI,CAC7B,OAAAF,EAAI,CAAC,EAAIC,EAAG,CAAC,EAAIC,EAAG,CAAC,EACrBF,EAAI,CAAC,EAAIC,EAAG,CAAC,EAAIC,EAAG,CAAC,EACdF,CACX,CAMO,SAASG,GAAIH,EAAKC,EAAIC,EAAI,CAC7B,OAAAF,EAAI,CAAC,EAAIC,EAAG,CAAC,EAAIC,EAAG,CAAC,EACrBF,EAAI,CAAC,EAAIC,EAAG,CAAC,EAAIC,EAAG,CAAC,EACdF,CACX,CACO,SAAShG,GAAI8F,EAAG,CACnB,OAAO,KAAK,KAAKM,GAAUN,CAAC,CAAC,CACjC,CAEO,SAASM,GAAUN,EAAG,CACzB,OAAOA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CACnC,CAeO,SAASO,GAAML,EAAKF,EAAGQ,EAAG,CAC7B,OAAAN,EAAI,CAAC,EAAIF,EAAE,CAAC,EAAIQ,EAChBN,EAAI,CAAC,EAAIF,EAAE,CAAC,EAAIQ,EACTN,CACX,CACO,SAASO,GAAUP,EAAKF,EAAG,CAC9B,IAAIU,EAAIxG,GAAI8F,CAAC,EACb,OAAIU,IAAM,GACNR,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,IAGTA,EAAI,CAAC,EAAIF,EAAE,CAAC,EAAIU,EAChBR,EAAI,CAAC,EAAIF,EAAE,CAAC,EAAIU,GAEbR,CACX,CACO,SAASS,GAASR,EAAIC,EAAI,CAC7B,OAAO,KAAK,MAAMD,EAAG,CAAC,EAAIC,EAAG,CAAC,IAAMD,EAAG,CAAC,EAAIC,EAAG,CAAC,IACzCD,EAAG,CAAC,EAAIC,EAAG,CAAC,IAAMD,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAE,CAC3C,CACO,IAAIQ,GAAOD,GACX,SAASE,GAAeV,EAAIC,EAAI,CACnC,OAAQD,EAAG,CAAC,EAAIC,EAAG,CAAC,IAAMD,EAAG,CAAC,EAAIC,EAAG,CAAC,IAC/BD,EAAG,CAAC,EAAIC,EAAG,CAAC,IAAMD,EAAG,CAAC,EAAIC,EAAG,CAAC,EACzC,CACO,IAAIU,GAAaD,GAWjB,SAASE,GAAeb,EAAKF,EAAGgB,EAAG,CACtC,IAAIlB,EAAIE,EAAE,CAAC,EACPD,EAAIC,EAAE,CAAC,EACX,OAAAE,EAAI,CAAC,EAAIc,EAAE,CAAC,EAAIlB,EAAIkB,EAAE,CAAC,EAAIjB,EAAIiB,EAAE,CAAC,EAClCd,EAAI,CAAC,EAAIc,EAAE,CAAC,EAAIlB,EAAIkB,EAAE,CAAC,EAAIjB,EAAIiB,EAAE,CAAC,EAC3Bd,CACX,CACO,SAASe,GAAIf,EAAKC,EAAIC,EAAI,CAC7B,OAAAF,EAAI,CAAC,EAAI,KAAK,IAAIC,EAAG,CAAC,EAAGC,EAAG,CAAC,CAAC,EAC9BF,EAAI,CAAC,EAAI,KAAK,IAAIC,EAAG,CAAC,EAAGC,EAAG,CAAC,CAAC,EACvBF,CACX,CACO,SAASgB,GAAIhB,EAAKC,EAAIC,EAAI,CAC7B,OAAAF,EAAI,CAAC,EAAI,KAAK,IAAIC,EAAG,CAAC,EAAGC,EAAG,CAAC,CAAC,EAC9BF,EAAI,CAAC,EAAI,KAAK,IAAIC,EAAG,CAAC,EAAGC,EAAG,CAAC,CAAC,EACvBF,CACX,CC/GA,IAAIiB,GAAS,UAAY,CACrB,SAASA,EAAM5G,EAAQ,EAAG,CACtB,KAAK,OAASA,EACd,KAAK,UAAY,GAAK,EAAE,SAChC,CACI,OAAO4G,CACX,IACIC,GAAa,UAAY,CACzB,SAASA,EAAUC,EAAS,CACxB,KAAK,QAAUA,EACfA,EAAQ,GAAG,YAAa,KAAK,WAAY,IAAI,EAC7CA,EAAQ,GAAG,YAAa,KAAK,MAAO,IAAI,EACxCA,EAAQ,GAAG,UAAW,KAAK,SAAU,IAAI,CACjD,CACI,OAAAD,EAAU,UAAU,WAAa,SAAUE,EAAG,CAE1C,QADIC,EAAiBD,EAAE,OAChBC,GAAkB,CAACA,EAAe,WACrCA,EAAiBA,EAAe,QAAUA,EAAe,aAEzDA,IACA,KAAK,gBAAkBA,EACvBA,EAAe,SAAW,GAC1B,KAAK,GAAKD,EAAE,QACZ,KAAK,GAAKA,EAAE,QACZ,KAAK,QAAQ,kBAAkB,IAAIH,GAAMI,EAAgBD,CAAC,EAAG,YAAaA,EAAE,KAAK,EAExF,EACDF,EAAU,UAAU,MAAQ,SAAUE,EAAG,CACrC,IAAIC,EAAiB,KAAK,gBAC1B,GAAIA,EAAgB,CAChB,IAAIzB,EAAIwB,EAAE,QACNvB,EAAIuB,EAAE,QACNE,EAAK1B,EAAI,KAAK,GACd2B,EAAK1B,EAAI,KAAK,GAClB,KAAK,GAAKD,EACV,KAAK,GAAKC,EACVwB,EAAe,MAAMC,EAAIC,EAAIH,CAAC,EAC9B,KAAK,QAAQ,kBAAkB,IAAIH,GAAMI,EAAgBD,CAAC,EAAG,OAAQA,EAAE,KAAK,EAC5E,IAAII,EAAa,KAAK,QAAQ,UAAU5B,EAAGC,EAAGwB,CAAc,EAAE,OAC1DI,EAAiB,KAAK,YAC1B,KAAK,YAAcD,EACfH,IAAmBG,IACfC,GAAkBD,IAAeC,GACjC,KAAK,QAAQ,kBAAkB,IAAIR,GAAMQ,EAAgBL,CAAC,EAAG,YAAaA,EAAE,KAAK,EAEjFI,GAAcA,IAAeC,GAC7B,KAAK,QAAQ,kBAAkB,IAAIR,GAAMO,EAAYJ,CAAC,EAAG,YAAaA,EAAE,KAAK,EAGjG,CACK,EACDF,EAAU,UAAU,SAAW,SAAUE,EAAG,CACxC,IAAIC,EAAiB,KAAK,gBACtBA,IACAA,EAAe,SAAW,IAE9B,KAAK,QAAQ,kBAAkB,IAAIJ,GAAMI,EAAgBD,CAAC,EAAG,UAAWA,EAAE,KAAK,EAC3E,KAAK,aACL,KAAK,QAAQ,kBAAkB,IAAIH,GAAM,KAAK,YAAaG,CAAC,EAAG,OAAQA,EAAE,KAAK,EAElF,KAAK,gBAAkB,KACvB,KAAK,YAAc,IACtB,EACMF,CACX,IChEIQ,GAAY,UAAY,CACxB,SAASA,EAASC,EAAiB,CAC3BA,IACA,KAAK,iBAAmBA,EAEpC,CACI,OAAAD,EAAS,UAAU,GAAK,SAAUE,EAAOC,EAAOV,EAASjF,EAAS,CACzD,KAAK,aACN,KAAK,WAAa,CAAE,GAExB,IAAI4F,EAAK,KAAK,WAMd,GALI,OAAOD,GAAU,aACjB3F,EAAUiF,EACVA,EAAUU,EACVA,EAAQ,MAER,CAACV,GAAW,CAACS,EACb,OAAO,KAEX,IAAIG,EAAiB,KAAK,iBACtBF,GAAS,MAAQE,GAAkBA,EAAe,iBAClDF,EAAQE,EAAe,eAAeF,CAAK,GAE1CC,EAAGF,CAAK,IACTE,EAAGF,CAAK,EAAI,CAAE,GAElB,QAAStK,EAAI,EAAGA,EAAIwK,EAAGF,CAAK,EAAE,OAAQtK,IAClC,GAAIwK,EAAGF,CAAK,EAAEtK,CAAC,EAAE,IAAM6J,EACnB,OAAO,KAGf,IAAIa,EAAO,CACP,EAAGb,EACH,MAAOU,EACP,IAAM3F,GAAW,KACjB,WAAYiF,EAAQ,oBACvB,EACGc,EAAYH,EAAGF,CAAK,EAAE,OAAS,EAC/BM,EAAWJ,EAAGF,CAAK,EAAEK,CAAS,EAClC,OAACC,GAAYA,EAAS,WAChBJ,EAAGF,CAAK,EAAE,OAAOK,EAAW,EAAGD,CAAI,EACnCF,EAAGF,CAAK,EAAE,KAAKI,CAAI,EAClB,IACV,EACDN,EAAS,UAAU,SAAW,SAAUS,EAAW,CAC/C,IAAIL,EAAK,KAAK,WACd,MAAO,CAACA,GAAM,CAACA,EAAGK,CAAS,GAAK,CAACL,EAAGK,CAAS,EAAE,MAClD,EACDT,EAAS,UAAU,IAAM,SAAUU,EAAWjB,EAAS,CACnD,IAAIW,EAAK,KAAK,WACd,GAAI,CAACA,EACD,OAAO,KAEX,GAAI,CAACM,EACD,YAAK,WAAa,CAAE,EACb,KAEX,GAAIjB,EAAS,CACT,GAAIW,EAAGM,CAAS,EAAG,CAEf,QADIC,EAAU,CAAE,EACP/K,EAAI,EAAGgL,EAAIR,EAAGM,CAAS,EAAE,OAAQ9K,EAAIgL,EAAGhL,IACzCwK,EAAGM,CAAS,EAAE9K,CAAC,EAAE,IAAM6J,GACvBkB,EAAQ,KAAKP,EAAGM,CAAS,EAAE9K,CAAC,CAAC,EAGrCwK,EAAGM,CAAS,EAAIC,CAChC,CACgBP,EAAGM,CAAS,GAAKN,EAAGM,CAAS,EAAE,SAAW,GAC1C,OAAON,EAAGM,CAAS,CAEnC,MAEY,OAAON,EAAGM,CAAS,EAEvB,OAAO,IACV,EACDV,EAAS,UAAU,QAAU,SAAUU,EAAW,CAE9C,QADI3I,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAE/B,GAAI,CAAC,KAAK,WACN,OAAO,KAEX,IAAIoI,EAAK,KAAK,WAAWM,CAAS,EAC9BL,EAAiB,KAAK,iBAC1B,GAAID,EAGA,QAFIS,EAAS9I,EAAK,OACdO,EAAM8H,EAAG,OACJxK,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CAC1B,IAAIkL,EAAQV,EAAGxK,CAAC,EAChB,GAAI,EAAAyK,GACGA,EAAe,QACfS,EAAM,OAAS,MACf,CAACT,EAAe,OAAOK,EAAWI,EAAM,KAAK,GAGpD,OAAQD,EAAM,CACV,IAAK,GACDC,EAAM,EAAE,KAAKA,EAAM,GAAG,EACtB,MACJ,IAAK,GACDA,EAAM,EAAE,KAAKA,EAAM,IAAK/I,EAAK,CAAC,CAAC,EAC/B,MACJ,IAAK,GACD+I,EAAM,EAAE,KAAKA,EAAM,IAAK/I,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,EACxC,MACJ,QACI+I,EAAM,EAAE,MAAMA,EAAM,IAAK/I,CAAI,EAC7B,KACxB,CACA,CAEQ,OAAAsI,GAAkBA,EAAe,cAC1BA,EAAe,aAAaK,CAAS,EACrC,IACV,EACDV,EAAS,UAAU,mBAAqB,SAAU5E,EAAM,CAEpD,QADIrD,EAAO,CAAE,EACJC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACpCD,EAAKC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAE/B,GAAI,CAAC,KAAK,WACN,OAAO,KAEX,IAAIoI,EAAK,KAAK,WAAWhF,CAAI,EACzBiF,EAAiB,KAAK,iBAC1B,GAAID,EAIA,QAHIS,EAAS9I,EAAK,OACdgJ,EAAMhJ,EAAK8I,EAAS,CAAC,EACrBvI,EAAM8H,EAAG,OACJxK,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CAC1B,IAAIkL,EAAQV,EAAGxK,CAAC,EAChB,GAAI,EAAAyK,GACGA,EAAe,QACfS,EAAM,OAAS,MACf,CAACT,EAAe,OAAOjF,EAAM0F,EAAM,KAAK,GAG/C,OAAQD,EAAM,CACV,IAAK,GACDC,EAAM,EAAE,KAAKC,CAAG,EAChB,MACJ,IAAK,GACDD,EAAM,EAAE,KAAKC,EAAKhJ,EAAK,CAAC,CAAC,EACzB,MACJ,IAAK,GACD+I,EAAM,EAAE,KAAKC,EAAKhJ,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,EAClC,MACJ,QACI+I,EAAM,EAAE,MAAMC,EAAKhJ,EAAK,MAAM,EAAG8I,EAAS,CAAC,CAAC,EAC5C,KACxB,CACA,CAEQ,OAAAR,GAAkBA,EAAe,cAC1BA,EAAe,aAAajF,CAAI,EAChC,IACV,EACM4E,CACX,IChKIgB,GAAM,KAAK,IAAI,CAAC,EACpB,SAASC,GAAYC,EAAMC,EAAMC,EAAUC,EAASC,EAASC,EAAU,CACnE,IAAIC,EAAWH,EAAU,IAAMC,EAC3BG,EAAWP,EAAK,OACpB,GAAIK,EAAS,eAAeC,CAAQ,EAChC,OAAOD,EAASC,CAAQ,EAE5B,GAAIL,IAAS,EAAG,CACZ,IAAIO,EAAW,KAAK,MAAM,KAAK,KAAM,GAAKD,GAAY,EAAK,CAACH,CAAO,EAAIN,EAAG,EAC1E,OAAOE,EAAKE,CAAQ,EAAEM,CAAQ,CACtC,CAGI,QAFIC,EAAaN,EAAW,GAAKD,EAC7BQ,EAAcR,EAAW,EACtBC,EAAW,GAAKO,GACnBA,IAGJ,QADIC,EAAM,EACDC,EAAI,EAAGC,EAAc,EAAGD,EAAIL,EAAUK,IAAK,CAChD,IAAIE,EAAS,GAAKF,EACZE,EAASV,IACXO,IAAQE,EAAc,EAAI,GAAK,GAAKb,EAAKE,CAAQ,EAAEU,CAAC,EAC9Cb,GAAYC,EAAMC,EAAO,EAAGS,EAAaD,EAAYL,EAAUU,EAAQT,CAAQ,EACrFQ,IAEZ,CACI,OAAAR,EAASC,CAAQ,EAAIK,EACdA,CACX,CACO,SAASI,GAAiBvL,EAAKwL,EAAM,CACxC,IAAIC,EAAK,CACL,CAACzL,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAAC,EAAG,EAAG,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAACA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAAC,EAAG,EAAG,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAACA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAAC,EAAG,EAAG,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAACA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,EACjE,CAAC,EAAG,EAAG,EAAGA,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAG,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,EAAG,CAACwL,EAAK,CAAC,EAAIxL,EAAI,CAAC,CAAC,CACpE,EACG6K,EAAW,CAAE,EACba,EAAMnB,GAAYkB,EAAI,EAAG,EAAG,EAAG,EAAGZ,CAAQ,EAC9C,GAAIa,IAAQ,EAIZ,SADIC,EAAK,CAAE,EACFzM,EAAI,EAAGA,EAAI,EAAGA,IACnB,QAASkM,EAAI,EAAGA,EAAI,EAAGA,IACnBO,EAAGP,CAAC,GAAK,OAASO,EAAGP,CAAC,EAAI,GAC1BO,EAAGP,CAAC,KAAOlM,EAAIkM,GAAK,EAAI,GAAK,GACvBb,GAAYkB,EAAI,EAAGvM,IAAM,EAAI,EAAI,EAAG,GAAKA,EAAG,GAAKkM,EAAGP,CAAQ,EAC5Da,EAAMF,EAAKtM,CAAC,EAG1B,OAAO,SAAU0I,EAAKgE,EAAWC,EAAW,CACxC,IAAIC,EAAKF,EAAYD,EAAG,CAAC,EAAIE,EAAYF,EAAG,CAAC,EAAI,EACjD/D,EAAI,CAAC,GAAKgE,EAAYD,EAAG,CAAC,EAAIE,EAAYF,EAAG,CAAC,EAAIA,EAAG,CAAC,GAAKG,EAC3DlE,EAAI,CAAC,GAAKgE,EAAYD,EAAG,CAAC,EAAIE,EAAYF,EAAG,CAAC,EAAIA,EAAG,CAAC,GAAKG,CAC9D,EACL,CCxDA,IAAIC,GAAmB,kBACnBC,GAAW,CAAE,EACV,SAASC,GAAoBrE,EAAKsE,EAAQC,EAAUC,EAAKC,EAAK,CACjE,OAAOC,GAA2BN,GAAUE,EAAQE,EAAKC,EAAK,EAAI,GAC3DC,GAA2B1E,EAAKuE,EAAUH,GAAS,CAAC,EAAGA,GAAS,CAAC,CAAC,CAC7E,CACO,SAASM,GAA2B1E,EAAK2E,EAAIH,EAAKC,EAAKG,EAAS,CACnE,GAAID,EAAG,uBAAyBvO,EAAI,cAAgB,CAACyO,GAAWF,CAAE,EAAG,CACjE,IAAIG,EAAQH,EAAGR,EAAgB,IAAMQ,EAAGR,EAAgB,EAAI,IACxDY,EAAUC,GAAoBL,EAAIG,CAAK,EACvCG,EAAcC,GAA0BH,EAASD,EAAOF,CAAO,EACnE,GAAIK,EACA,OAAAA,EAAYjF,EAAKwE,EAAKC,CAAG,EAClB,EAEnB,CACI,MAAO,EACX,CACA,SAASO,GAAoBL,EAAIG,EAAO,CACpC,IAAIC,EAAUD,EAAM,QACpB,GAAIC,EACA,OAAOA,EAEXA,EAAUD,EAAM,QAAU,CAAE,EAG5B,QAFIK,EAAS,CAAC,OAAQ,OAAO,EACzBC,EAAS,CAAC,MAAO,QAAQ,EACpB9N,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAI+N,EAAS,SAAS,cAAc,KAAK,EACrCC,EAAMD,EAAO,MACbE,EAAQjO,EAAI,EACZkO,GAASlO,GAAK,GAAK,EACvBgO,EAAI,QAAU,CACV,qBACA,qBACA,aACA,YACA,kBACA,oBACA,UACA,WACAH,EAAOI,CAAK,EAAI,KAChBH,EAAOI,CAAK,EAAI,KAChBL,EAAO,EAAII,CAAK,EAAI,QACpBH,EAAO,EAAII,CAAK,EAAI,QACpB,EACZ,EAAU,KAAK,aAAa,EACpBb,EAAG,YAAYU,CAAM,EACrBN,EAAQ,KAAKM,CAAM,CAC3B,CACI,OAAON,CACX,CACA,SAASG,GAA0BH,EAASD,EAAOF,EAAS,CAOxD,QANIa,EAAkBb,EAAU,WAAa,QACzCK,EAAcH,EAAMW,CAAe,EACnCC,EAAeZ,EAAM,UACrBa,EAAY,CAAE,EACdC,EAAa,CAAE,EACfC,EAAkB,GACbvO,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIwO,EAAOf,EAAQzN,CAAC,EAAE,sBAAuB,EACzCyO,EAAK,EAAIzO,EACTsI,EAAIkG,EAAK,KACTjG,EAAIiG,EAAK,IACbH,EAAU,KAAK/F,EAAGC,CAAC,EACnBgG,EAAkBA,GAAmBH,GAAgB9F,IAAM8F,EAAaK,CAAE,GAAKlG,IAAM6F,EAAaK,EAAK,CAAC,EACxGH,EAAW,KAAKb,EAAQzN,CAAC,EAAE,WAAYyN,EAAQzN,CAAC,EAAE,SAAS,CACnE,CACI,OAAQuO,GAAmBZ,EACrBA,GACCH,EAAM,UAAYa,EACjBb,EAAMW,CAAe,EAAIb,EACnBjB,GAAiBiC,EAAYD,CAAS,EACtChC,GAAiBgC,EAAWC,CAAU,EACxD,CACO,SAASf,GAAWF,EAAI,CAC3B,OAAOA,EAAG,SAAS,YAAW,IAAO,QACzC,CACA,IAAIqB,GAAa,aACbC,GAAa,CACb,IAAK,QACL,IAAK,OACL,IAAK,OACL,IAAK,SACL,IAAM,OACV,EACO,SAASC,GAAWtM,EAAQ,CAC/B,OAAOA,GAAU,KACX,IACCA,EAAS,IAAI,QAAQoM,GAAY,SAAUlI,EAAKqI,EAAG,CAClD,OAAOF,GAAWE,CAAC,CAC/B,CAAS,CACT,CC1FA,IAAIC,GAAkB,iDAClBhC,GAAW,CAAE,EACbiC,GAA4BjQ,EAAI,QAAQ,SACrC,CAACA,EAAI,QAAQ,QAAQ,MAAM,GAAG,EAAE,CAAC,EAAI,GACrC,SAASkQ,GAAc3B,EAAIvD,EAAGpB,EAAKuG,EAAW,CACjD,OAAAvG,EAAMA,GAAO,CAAE,EACXuG,EACAC,GAAc7B,EAAIvD,EAAGpB,CAAG,EAEnBqG,IACFjF,EAAE,QAAU,MACZA,EAAE,SAAWA,EAAE,SAClBpB,EAAI,IAAMoB,EAAE,OACZpB,EAAI,IAAMoB,EAAE,QAEPA,EAAE,SAAW,MAClBpB,EAAI,IAAMoB,EAAE,QACZpB,EAAI,IAAMoB,EAAE,SAGZoF,GAAc7B,EAAIvD,EAAGpB,CAAG,EAErBA,CACX,CACA,SAASwG,GAAc7B,EAAIvD,EAAGpB,EAAK,CAC/B,GAAI5J,EAAI,cAAgBuO,EAAG,sBAAuB,CAC9C,IAAI8B,EAAKrF,EAAE,QACPsF,EAAKtF,EAAE,QACX,GAAIyD,GAAWF,CAAE,EAAG,CAChB,IAAIgC,EAAMhC,EAAG,sBAAuB,EACpC3E,EAAI,IAAMyG,EAAKE,EAAI,KACnB3G,EAAI,IAAM0G,EAAKC,EAAI,IACnB,MACZ,SAEgBjC,GAA2BN,GAAUO,EAAI8B,EAAIC,CAAE,EAAG,CAClD1G,EAAI,IAAMoE,GAAS,CAAC,EACpBpE,EAAI,IAAMoE,GAAS,CAAC,EACpB,MAChB,CAEA,CACIpE,EAAI,IAAMA,EAAI,IAAM,CACxB,CACO,SAAS4G,GAAexF,EAAG,CAC9B,OAAOA,GACA,OAAO,KAClB,CACO,SAASyF,GAAelC,EAAIvD,EAAGmF,EAAW,CAE7C,GADAnF,EAAIwF,GAAexF,CAAC,EAChBA,EAAE,KAAO,KACT,OAAOA,EAEX,IAAIgB,EAAYhB,EAAE,KACd0F,EAAU1E,GAAaA,EAAU,QAAQ,OAAO,GAAK,EACzD,GAAK0E,EAKA,CACD,IAAIC,EAAQ3E,IAAc,WACpBhB,EAAE,cAAc,CAAC,EACjBA,EAAE,eAAe,CAAC,EACxB2F,GAAST,GAAc3B,EAAIoC,EAAO3F,EAAGmF,CAAS,CACtD,KAVkB,CACVD,GAAc3B,EAAIvD,EAAGA,EAAGmF,CAAS,EACjC,IAAIS,EAAaC,GAAyB7F,CAAC,EAC3CA,EAAE,QAAU4F,EAAaA,EAAa,IAAM,EAAE5F,EAAE,QAAU,GAAK,CACvE,CAOI,IAAI8F,EAAS9F,EAAE,OACf,OAAIA,EAAE,OAAS,MAAQ8F,IAAW,QAAad,GAAgB,KAAKhF,EAAE,IAAI,IACtEA,EAAE,MAAS8F,EAAS,EAAI,EAAKA,EAAS,EAAI,EAAKA,EAAS,EAAI,EAAI,GAE7D9F,CACX,CACA,SAAS6F,GAAyB7F,EAAG,CACjC,IAAI+F,EAAgB/F,EAAE,WACtB,GAAI+F,EACA,OAAOA,EAEX,IAAIC,EAAShG,EAAE,OACXiG,EAASjG,EAAE,OACf,GAAIgG,GAAU,MAAQC,GAAU,KAC5B,OAAOF,EAEX,IAAIG,EAAuB,KAAK,IAApBD,IAAW,EAAaA,EAAmBD,CAAb,EACtCG,EAAOF,EAAS,EAAI,GAClBA,EAAS,EAAI,EACTD,EAAS,EAAI,GACT,EACd,MAAO,GAAIE,EAAQC,CACvB,CACO,SAASC,GAAiB7C,EAAI8C,EAAMtG,EAASuG,EAAK,CACrD/C,EAAG,iBAAiB8C,EAAMtG,EAASuG,CAAG,CAC1C,CACO,SAASC,GAAoBhD,EAAI8C,EAAMtG,EAASuG,EAAK,CACxD/C,EAAG,oBAAoB8C,EAAMtG,EAASuG,CAAG,CAC7C,CACO,IAAIE,GAAO,SAAUxG,EAAG,CAC3BA,EAAE,eAAgB,EAClBA,EAAE,gBAAiB,EACnBA,EAAE,aAAe,EACrB,EACO,SAASyG,GAAmCzG,EAAG,CAClD,OAAOA,EAAE,QAAU,GAAKA,EAAE,QAAU,CACxC,CCxGA,IAAI0G,GAAc,UAAY,CAC1B,SAASA,GAAa,CAClB,KAAK,OAAS,CAAE,CACxB,CACI,OAAAA,EAAW,UAAU,UAAY,SAAUlG,EAAOvH,EAAQ0N,EAAM,CAC5D,YAAK,SAASnG,EAAOvH,EAAQ0N,CAAI,EAC1B,KAAK,WAAWnG,CAAK,CAC/B,EACDkG,EAAW,UAAU,MAAQ,UAAY,CACrC,YAAK,OAAO,OAAS,EACd,IACV,EACDA,EAAW,UAAU,SAAW,SAAUlG,EAAOvH,EAAQ0N,EAAM,CAC3D,IAAIC,EAAUpG,EAAM,QACpB,GAAKoG,EASL,SANIC,EAAY,CACZ,OAAQ,CAAE,EACV,QAAS,CAAE,EACX,OAAQ5N,EACR,MAAOuH,CACV,EACQtK,EAAI,EAAG0C,EAAMgO,EAAQ,OAAQ1Q,EAAI0C,EAAK1C,IAAK,CAChD,IAAIyP,EAAQiB,EAAQ1Q,CAAC,EACjB4Q,EAAMC,GAAwBJ,EAAMhB,EAAO,CAAA,CAAE,EACjDkB,EAAU,OAAO,KAAK,CAACC,EAAI,IAAKA,EAAI,GAAG,CAAC,EACxCD,EAAU,QAAQ,KAAKlB,CAAK,CACxC,CACQ,KAAK,OAAO,KAAKkB,CAAS,EAC7B,EACDH,EAAW,UAAU,WAAa,SAAUlG,EAAO,CAC/C,QAASO,KAAaiG,GAClB,GAAIA,GAAY,eAAejG,CAAS,EAAG,CACvC,IAAIkG,EAAcD,GAAYjG,CAAS,EAAE,KAAK,OAAQP,CAAK,EAC3D,GAAIyG,EACA,OAAOA,CAE3B,CAEK,EACMP,CACX,IAEA,SAASpH,GAAK4H,EAAW,CACrB,IAAIhH,EAAKgH,EAAU,CAAC,EAAE,CAAC,EAAIA,EAAU,CAAC,EAAE,CAAC,EACrC/G,EAAK+G,EAAU,CAAC,EAAE,CAAC,EAAIA,EAAU,CAAC,EAAE,CAAC,EACzC,OAAO,KAAK,KAAKhH,EAAKA,EAAKC,EAAKA,CAAE,CACtC,CACA,SAASgH,GAAOD,EAAW,CACvB,MAAO,EACFA,EAAU,CAAC,EAAE,CAAC,EAAIA,EAAU,CAAC,EAAE,CAAC,GAAK,GACrCA,EAAU,CAAC,EAAE,CAAC,EAAIA,EAAU,CAAC,EAAE,CAAC,GAAK,CACzC,CACL,CACA,IAAIF,GAAc,CACd,MAAO,SAAUI,EAAQ5G,EAAO,CAC5B,IAAI6G,EAAWD,EAAO,OACtB,GAAKC,EAGL,KAAIC,GAAYF,EAAOC,EAAW,CAAC,GAAK,CAAA,GAAI,OACxCE,GAAYH,EAAOC,EAAW,CAAC,GAAK,CAAA,GAAI,QAAUC,EACtD,GAAIC,GACGA,EAAS,OAAS,GAClBD,GACAA,EAAS,OAAS,EAAG,CACxB,IAAIE,EAAalI,GAAKgI,CAAQ,EAAIhI,GAAKiI,CAAQ,EAC/C,CAAC,SAASC,CAAU,IAAMA,EAAa,GACvChH,EAAM,WAAagH,EACnB,IAAIC,EAAcN,GAAOG,CAAQ,EACjC,OAAA9G,EAAM,OAASiH,EAAY,CAAC,EAC5BjH,EAAM,OAASiH,EAAY,CAAC,EACrB,CACH,KAAM,QACN,OAAQL,EAAO,CAAC,EAAE,OAClB,MAAO5G,CACV,CACb,EACA,CACA,ECjFO,SAASjC,IAAS,CACrB,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,CAC5B,CACO,SAASmJ,GAAS9I,EAAK,CAC1B,OAAAA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACFA,CACX,CACO,SAAS+I,GAAK/I,EAAKc,EAAG,CACzB,OAAAd,EAAI,CAAC,EAAIc,EAAE,CAAC,EACZd,EAAI,CAAC,EAAIc,EAAE,CAAC,EACZd,EAAI,CAAC,EAAIc,EAAE,CAAC,EACZd,EAAI,CAAC,EAAIc,EAAE,CAAC,EACZd,EAAI,CAAC,EAAIc,EAAE,CAAC,EACZd,EAAI,CAAC,EAAIc,EAAE,CAAC,EACLd,CACX,CACO,SAASgJ,GAAIhJ,EAAKiJ,EAAIC,EAAI,CAC7B,IAAIC,EAAOF,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EACnCE,EAAOH,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EACnCG,EAAOJ,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EACnCI,EAAOL,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EACnCK,EAAON,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAC3CO,EAAOP,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAAIC,EAAG,CAAC,EAAID,EAAG,CAAC,EAC/C,OAAAjJ,EAAI,CAAC,EAAImJ,EACTnJ,EAAI,CAAC,EAAIoJ,EACTpJ,EAAI,CAAC,EAAIqJ,EACTrJ,EAAI,CAAC,EAAIsJ,EACTtJ,EAAI,CAAC,EAAIuJ,EACTvJ,EAAI,CAAC,EAAIwJ,EACFxJ,CACX,CACO,SAASyJ,GAAUzJ,EAAKpB,EAAGkB,EAAG,CACjC,OAAAE,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAIkB,EAAE,CAAC,EACnBE,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAIkB,EAAE,CAAC,EACZE,CACX,CACO,SAAS0J,GAAO1J,EAAKpB,EAAG+K,EAAKC,EAAO,CACnCA,IAAU,SAAUA,EAAQ,CAAC,EAAG,CAAC,GACrC,IAAIC,EAAKjL,EAAE,CAAC,EACRkL,EAAKlL,EAAE,CAAC,EACRmL,EAAMnL,EAAE,CAAC,EACToL,EAAKpL,EAAE,CAAC,EACRqL,EAAKrL,EAAE,CAAC,EACRsL,EAAMtL,EAAE,CAAC,EACTuL,EAAK,KAAK,IAAIR,CAAG,EACjBS,EAAK,KAAK,IAAIT,CAAG,EACrB,OAAA3J,EAAI,CAAC,EAAI6J,EAAKO,EAAKJ,EAAKG,EACxBnK,EAAI,CAAC,EAAI,CAAC6J,EAAKM,EAAKH,EAAKI,EACzBpK,EAAI,CAAC,EAAI8J,EAAKM,EAAKH,EAAKE,EACxBnK,EAAI,CAAC,EAAI,CAAC8J,EAAKK,EAAKC,EAAKH,EACzBjK,EAAI,CAAC,EAAIoK,GAAML,EAAMH,EAAM,CAAC,GAAKO,GAAMD,EAAMN,EAAM,CAAC,GAAKA,EAAM,CAAC,EAChE5J,EAAI,CAAC,EAAIoK,GAAMF,EAAMN,EAAM,CAAC,GAAKO,GAAMJ,EAAMH,EAAM,CAAC,GAAKA,EAAM,CAAC,EACzD5J,CACX,CACO,SAASK,GAAML,EAAKpB,EAAGkB,EAAG,CAC7B,IAAIuK,EAAKvK,EAAE,CAAC,EACRwK,EAAKxK,EAAE,CAAC,EACZ,OAAAE,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAIyL,EAChBrK,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAI0L,EAChBtK,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAIyL,EAChBrK,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAI0L,EAChBtK,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAIyL,EAChBrK,EAAI,CAAC,EAAIpB,EAAE,CAAC,EAAI0L,EACTtK,CACX,CACO,SAASuK,GAAOvK,EAAKpB,EAAG,CAC3B,IAAIiL,EAAKjL,EAAE,CAAC,EACRkL,EAAKlL,EAAE,CAAC,EACRmL,EAAMnL,EAAE,CAAC,EACToL,EAAKpL,EAAE,CAAC,EACRqL,EAAKrL,EAAE,CAAC,EACRsL,EAAMtL,EAAE,CAAC,EACTkF,EAAM+F,EAAKI,EAAKD,EAAKF,EACzB,OAAKhG,GAGLA,EAAM,EAAMA,EACZ9D,EAAI,CAAC,EAAIiK,EAAKnG,EACd9D,EAAI,CAAC,EAAI,CAACgK,EAAKlG,EACf9D,EAAI,CAAC,EAAI,CAAC8J,EAAKhG,EACf9D,EAAI,CAAC,EAAI6J,EAAK/F,EACd9D,EAAI,CAAC,GAAK8J,EAAKI,EAAMD,EAAKF,GAAOjG,EACjC9D,EAAI,CAAC,GAAKgK,EAAKD,EAAMF,EAAKK,GAAOpG,EAC1B9D,GATI,IAUf,CC7FA,IAAIwK,GAAS,UAAY,CACrB,SAASA,EAAM5K,EAAGC,EAAG,CACjB,KAAK,EAAID,GAAK,EACd,KAAK,EAAIC,GAAK,CACtB,CACI,OAAA2K,EAAM,UAAU,KAAO,SAAUC,EAAO,CACpC,YAAK,EAAIA,EAAM,EACf,KAAK,EAAIA,EAAM,EACR,IACV,EACDD,EAAM,UAAU,MAAQ,UAAY,CAChC,OAAO,IAAIA,EAAM,KAAK,EAAG,KAAK,CAAC,CAClC,EACDA,EAAM,UAAU,IAAM,SAAU5K,EAAGC,EAAG,CAClC,YAAK,EAAID,EACT,KAAK,EAAIC,EACF,IACV,EACD2K,EAAM,UAAU,MAAQ,SAAUC,EAAO,CACrC,OAAOA,EAAM,IAAM,KAAK,GAAKA,EAAM,IAAM,KAAK,CACjD,EACDD,EAAM,UAAU,IAAM,SAAUC,EAAO,CACnC,YAAK,GAAKA,EAAM,EAChB,KAAK,GAAKA,EAAM,EACT,IACV,EACDD,EAAM,UAAU,MAAQ,SAAUE,EAAQ,CACtC,KAAK,GAAKA,EACV,KAAK,GAAKA,CACb,EACDF,EAAM,UAAU,YAAc,SAAUC,EAAOC,EAAQ,CACnD,KAAK,GAAKD,EAAM,EAAIC,EACpB,KAAK,GAAKD,EAAM,EAAIC,CACvB,EACDF,EAAM,UAAU,IAAM,SAAUC,EAAO,CACnC,YAAK,GAAKA,EAAM,EAChB,KAAK,GAAKA,EAAM,EACT,IACV,EACDD,EAAM,UAAU,IAAM,SAAUC,EAAO,CACnC,OAAO,KAAK,EAAIA,EAAM,EAAI,KAAK,EAAIA,EAAM,CAC5C,EACDD,EAAM,UAAU,IAAM,UAAY,CAC9B,OAAO,KAAK,KAAK,KAAK,EAAI,KAAK,EAAI,KAAK,EAAI,KAAK,CAAC,CACrD,EACDA,EAAM,UAAU,UAAY,UAAY,CACpC,OAAO,KAAK,EAAI,KAAK,EAAI,KAAK,EAAI,KAAK,CAC1C,EACDA,EAAM,UAAU,UAAY,UAAY,CACpC,IAAIxQ,EAAM,KAAK,IAAK,EACpB,YAAK,GAAKA,EACV,KAAK,GAAKA,EACH,IACV,EACDwQ,EAAM,UAAU,SAAW,SAAUC,EAAO,CACxC,IAAInJ,EAAK,KAAK,EAAImJ,EAAM,EACpBlJ,EAAK,KAAK,EAAIkJ,EAAM,EACxB,OAAO,KAAK,KAAKnJ,EAAKA,EAAKC,EAAKA,CAAE,CACrC,EACDiJ,EAAM,UAAU,eAAiB,SAAUC,EAAO,CAC9C,IAAInJ,EAAK,KAAK,EAAImJ,EAAM,EACpBlJ,EAAK,KAAK,EAAIkJ,EAAM,EACxB,OAAOnJ,EAAKA,EAAKC,EAAKA,CACzB,EACDiJ,EAAM,UAAU,OAAS,UAAY,CACjC,YAAK,EAAI,CAAC,KAAK,EACf,KAAK,EAAI,CAAC,KAAK,EACR,IACV,EACDA,EAAM,UAAU,UAAY,SAAU1J,EAAG,CACrC,GAAKA,EAGL,KAAIlB,EAAI,KAAK,EACTC,EAAI,KAAK,EACb,YAAK,EAAIiB,EAAE,CAAC,EAAIlB,EAAIkB,EAAE,CAAC,EAAIjB,EAAIiB,EAAE,CAAC,EAClC,KAAK,EAAIA,EAAE,CAAC,EAAIlB,EAAIkB,EAAE,CAAC,EAAIjB,EAAIiB,EAAE,CAAC,EAC3B,KACV,EACD0J,EAAM,UAAU,QAAU,SAAUxK,EAAK,CACrC,OAAAA,EAAI,CAAC,EAAI,KAAK,EACdA,EAAI,CAAC,EAAI,KAAK,EACPA,CACV,EACDwK,EAAM,UAAU,UAAY,SAAUG,EAAO,CACzC,KAAK,EAAIA,EAAM,CAAC,EAChB,KAAK,EAAIA,EAAM,CAAC,CACnB,EACDH,EAAM,IAAM,SAAUI,EAAGhL,EAAGC,EAAG,CAC3B+K,EAAE,EAAIhL,EACNgL,EAAE,EAAI/K,CACT,EACD2K,EAAM,KAAO,SAAUI,EAAGC,EAAI,CAC1BD,EAAE,EAAIC,EAAG,EACTD,EAAE,EAAIC,EAAG,CACZ,EACDL,EAAM,IAAM,SAAUI,EAAG,CACrB,OAAO,KAAK,KAAKA,EAAE,EAAIA,EAAE,EAAIA,EAAE,EAAIA,EAAE,CAAC,CACzC,EACDJ,EAAM,UAAY,SAAUI,EAAG,CAC3B,OAAOA,EAAE,EAAIA,EAAE,EAAIA,EAAE,EAAIA,EAAE,CAC9B,EACDJ,EAAM,IAAM,SAAUM,EAAIC,EAAI,CAC1B,OAAOD,EAAG,EAAIC,EAAG,EAAID,EAAG,EAAIC,EAAG,CAClC,EACDP,EAAM,IAAM,SAAUxK,EAAK8K,EAAIC,EAAI,CAC/B/K,EAAI,EAAI8K,EAAG,EAAIC,EAAG,EAClB/K,EAAI,EAAI8K,EAAG,EAAIC,EAAG,CACrB,EACDP,EAAM,IAAM,SAAUxK,EAAK8K,EAAIC,EAAI,CAC/B/K,EAAI,EAAI8K,EAAG,EAAIC,EAAG,EAClB/K,EAAI,EAAI8K,EAAG,EAAIC,EAAG,CACrB,EACDP,EAAM,MAAQ,SAAUxK,EAAK8K,EAAIJ,EAAQ,CACrC1K,EAAI,EAAI8K,EAAG,EAAIJ,EACf1K,EAAI,EAAI8K,EAAG,EAAIJ,CAClB,EACDF,EAAM,YAAc,SAAUxK,EAAK8K,EAAIC,EAAIL,EAAQ,CAC/C1K,EAAI,EAAI8K,EAAG,EAAIC,EAAG,EAAIL,EACtB1K,EAAI,EAAI8K,EAAG,EAAIC,EAAG,EAAIL,CACzB,EACDF,EAAM,KAAO,SAAUxK,EAAK8K,EAAIC,EAAIC,EAAG,CACnC,IAAIC,EAAO,EAAID,EACfhL,EAAI,EAAIiL,EAAOH,EAAG,EAAIE,EAAID,EAAG,EAC7B/K,EAAI,EAAIiL,EAAOH,EAAG,EAAIE,EAAID,EAAG,CAChC,EACMP,CACX,IC7HIU,GAAU,KAAK,IACfC,GAAU,KAAK,IACfC,GAAK,IAAIZ,GACTa,GAAK,IAAIb,GACTc,GAAK,IAAId,GACTe,GAAK,IAAIf,GACTgB,GAAQ,IAAIhB,GACZiB,GAAQ,IAAIjB,GACZkB,GAAgB,UAAY,CAC5B,SAASA,EAAa9L,EAAGC,EAAG3H,EAAOyT,EAAQ,CACnCzT,EAAQ,IACR0H,EAAIA,EAAI1H,EACRA,EAAQ,CAACA,GAETyT,EAAS,IACT9L,EAAIA,EAAI8L,EACRA,EAAS,CAACA,GAEd,KAAK,EAAI/L,EACT,KAAK,EAAIC,EACT,KAAK,MAAQ3H,EACb,KAAK,OAASyT,CACtB,CACI,OAAAD,EAAa,UAAU,MAAQ,SAAUjB,EAAO,CAC5C,IAAI7K,EAAIsL,GAAQT,EAAM,EAAG,KAAK,CAAC,EAC3B5K,EAAIqL,GAAQT,EAAM,EAAG,KAAK,CAAC,EAC3B,SAAS,KAAK,CAAC,GAAK,SAAS,KAAK,KAAK,EACvC,KAAK,MAAQU,GAAQV,EAAM,EAAIA,EAAM,MAAO,KAAK,EAAI,KAAK,KAAK,EAAI7K,EAGnE,KAAK,MAAQ6K,EAAM,MAEnB,SAAS,KAAK,CAAC,GAAK,SAAS,KAAK,MAAM,EACxC,KAAK,OAASU,GAAQV,EAAM,EAAIA,EAAM,OAAQ,KAAK,EAAI,KAAK,MAAM,EAAI5K,EAGtE,KAAK,OAAS4K,EAAM,OAExB,KAAK,EAAI7K,EACT,KAAK,EAAIC,CACZ,EACD6L,EAAa,UAAU,eAAiB,SAAU5K,EAAG,CACjD4K,EAAa,eAAe,KAAM,KAAM5K,CAAC,CAC5C,EACD4K,EAAa,UAAU,mBAAqB,SAAU7M,EAAG,CACrD,IAAID,EAAI,KACJgN,EAAK/M,EAAE,MAAQD,EAAE,MACjBiN,EAAKhN,EAAE,OAASD,EAAE,OAClBkC,EAAIgL,GAAe,EACvBC,OAAAA,GAAiBjL,EAAGA,EAAG,CAAC,CAAClC,EAAE,EAAG,CAACA,EAAE,CAAC,CAAC,EACnCoN,GAAalL,EAAGA,EAAG,CAAC8K,EAAIC,CAAE,CAAC,EAC3BE,GAAiBjL,EAAGA,EAAG,CAACjC,EAAE,EAAGA,EAAE,CAAC,CAAC,EAC1BiC,CACV,EACD4K,EAAa,UAAU,UAAY,SAAU7M,EAAGoN,EAAK,CACjD,GAAI,CAACpN,EACD,MAAO,GAELA,aAAa6M,IACf7M,EAAI6M,EAAa,OAAO7M,CAAC,GAE7B,IAAID,EAAI,KACJsN,EAAMtN,EAAE,EACRuN,EAAMvN,EAAE,EAAIA,EAAE,MACdwN,EAAMxN,EAAE,EACRyN,EAAMzN,EAAE,EAAIA,EAAE,OACd0N,EAAMzN,EAAE,EACR0N,EAAM1N,EAAE,EAAIA,EAAE,MACd2N,EAAM3N,EAAE,EACR4N,EAAM5N,EAAE,EAAIA,EAAE,OACd6N,EAAU,EAAEP,EAAMG,GAAOC,EAAML,GAAOG,EAAMG,GAAOC,EAAML,GAC7D,GAAIH,EAAK,CACL,IAAIU,EAAO,IACPC,EAAO,EACPC,EAAK,KAAK,IAAIV,EAAMG,CAAG,EACvBQ,EAAK,KAAK,IAAIP,EAAML,CAAG,EACvBa,EAAK,KAAK,IAAIV,EAAMG,CAAG,EACvBQ,EAAK,KAAK,IAAIP,EAAML,CAAG,EACvB9K,EAAK,KAAK,IAAIuL,EAAIC,CAAE,EACpBvL,EAAK,KAAK,IAAIwL,EAAIC,CAAE,EACpBb,EAAMG,GAAOC,EAAML,EACf5K,EAAKsL,IACLA,EAAOtL,EACHuL,EAAKC,EACLtC,GAAM,IAAIiB,GAAO,CAACoB,EAAI,CAAC,EAGvBrC,GAAM,IAAIiB,GAAOqB,EAAI,CAAC,GAK1BxL,EAAKqL,IACLA,EAAOrL,EACHuL,EAAKC,EACLtC,GAAM,IAAIgB,GAAOqB,EAAI,CAAC,EAGtBrC,GAAM,IAAIgB,GAAO,CAACsB,EAAI,CAAC,GAI/BT,EAAMG,GAAOC,EAAML,EACf7K,EAAKqL,IACLA,EAAOrL,EACHwL,EAAKC,EACLxC,GAAM,IAAIiB,GAAO,EAAG,CAACsB,CAAE,EAGvBvC,GAAM,IAAIiB,GAAO,EAAGuB,CAAE,GAK1B1L,EAAKqL,IACLA,EAAOrL,EACHyL,EAAKC,EACLxC,GAAM,IAAIgB,GAAO,EAAGuB,CAAE,EAGtBvC,GAAM,IAAIgB,GAAO,EAAG,CAACwB,CAAE,EAI/C,CACQ,OAAIf,GACAzB,GAAM,KAAKyB,EAAKS,EAAUlB,GAAQC,EAAK,EAEpCiB,CACV,EACDhB,EAAa,UAAU,QAAU,SAAU9L,EAAGC,EAAG,CAC7C,IAAIiG,EAAO,KACX,OAAOlG,GAAKkG,EAAK,GACVlG,GAAMkG,EAAK,EAAIA,EAAK,OACpBjG,GAAKiG,EAAK,GACVjG,GAAMiG,EAAK,EAAIA,EAAK,MAC9B,EACD4F,EAAa,UAAU,MAAQ,UAAY,CACvC,OAAO,IAAIA,EAAa,KAAK,EAAG,KAAK,EAAG,KAAK,MAAO,KAAK,MAAM,CAClE,EACDA,EAAa,UAAU,KAAO,SAAUjB,EAAO,CAC3CiB,EAAa,KAAK,KAAMjB,CAAK,CAChC,EACDiB,EAAa,UAAU,MAAQ,UAAY,CACvC,MAAO,CACH,EAAG,KAAK,EACR,EAAG,KAAK,EACR,MAAO,KAAK,MACZ,OAAQ,KAAK,MAChB,CACJ,EACDA,EAAa,UAAU,SAAW,UAAY,CAC1C,OAAO,SAAS,KAAK,CAAC,GACf,SAAS,KAAK,CAAC,GACf,SAAS,KAAK,KAAK,GACnB,SAAS,KAAK,MAAM,CAC9B,EACDA,EAAa,UAAU,OAAS,UAAY,CACxC,OAAO,KAAK,QAAU,GAAK,KAAK,SAAW,CAC9C,EACDA,EAAa,OAAS,SAAU5F,EAAM,CAClC,OAAO,IAAI4F,EAAa5F,EAAK,EAAGA,EAAK,EAAGA,EAAK,MAAOA,EAAK,MAAM,CAClE,EACD4F,EAAa,KAAO,SAAUrR,EAAQT,EAAQ,CAC1CS,EAAO,EAAIT,EAAO,EAClBS,EAAO,EAAIT,EAAO,EAClBS,EAAO,MAAQT,EAAO,MACtBS,EAAO,OAAST,EAAO,MAC1B,EACD8R,EAAa,eAAiB,SAAUrR,EAAQT,EAAQkH,EAAG,CACvD,GAAI,CAACA,EAAG,CACAzG,IAAWT,GACX8R,EAAa,KAAKrR,EAAQT,CAAM,EAEpC,MACZ,CACQ,GAAIkH,EAAE,CAAC,EAAI,MAAQA,EAAE,CAAC,EAAI,OAASA,EAAE,CAAC,EAAI,MAAQA,EAAE,CAAC,EAAI,MAAO,CAC5D,IAAI8K,EAAK9K,EAAE,CAAC,EACR+K,EAAK/K,EAAE,CAAC,EACRmM,EAAKnM,EAAE,CAAC,EACRoM,EAAKpM,EAAE,CAAC,EACZzG,EAAO,EAAIT,EAAO,EAAIgS,EAAKqB,EAC3B5S,EAAO,EAAIT,EAAO,EAAIiS,EAAKqB,EAC3B7S,EAAO,MAAQT,EAAO,MAAQgS,EAC9BvR,EAAO,OAAST,EAAO,OAASiS,EAC5BxR,EAAO,MAAQ,IACfA,EAAO,GAAKA,EAAO,MACnBA,EAAO,MAAQ,CAACA,EAAO,OAEvBA,EAAO,OAAS,IAChBA,EAAO,GAAKA,EAAO,OACnBA,EAAO,OAAS,CAACA,EAAO,QAE5B,MACZ,CACQ+Q,GAAG,EAAIE,GAAG,EAAI1R,EAAO,EACrBwR,GAAG,EAAIG,GAAG,EAAI3R,EAAO,EACrByR,GAAG,EAAIE,GAAG,EAAI3R,EAAO,EAAIA,EAAO,MAChCyR,GAAG,EAAIC,GAAG,EAAI1R,EAAO,EAAIA,EAAO,OAChCwR,GAAG,UAAUtK,CAAC,EACdyK,GAAG,UAAUzK,CAAC,EACduK,GAAG,UAAUvK,CAAC,EACdwK,GAAG,UAAUxK,CAAC,EACdzG,EAAO,EAAI6Q,GAAQE,GAAG,EAAGC,GAAG,EAAGC,GAAG,EAAGC,GAAG,CAAC,EACzClR,EAAO,EAAI6Q,GAAQE,GAAG,EAAGC,GAAG,EAAGC,GAAG,EAAGC,GAAG,CAAC,EACzC,IAAI4B,EAAOhC,GAAQC,GAAG,EAAGC,GAAG,EAAGC,GAAG,EAAGC,GAAG,CAAC,EACrC6B,EAAOjC,GAAQC,GAAG,EAAGC,GAAG,EAAGC,GAAG,EAAGC,GAAG,CAAC,EACzClR,EAAO,MAAQ8S,EAAO9S,EAAO,EAC7BA,EAAO,OAAS+S,EAAO/S,EAAO,CACjC,EACMqR,CACX,IC7MI2B,GAAS,SACb,SAASC,GAAgBC,EAASC,EAAY5L,EAAO,CACjD,MAAO,CACH,KAAM2L,EACN,MAAO3L,EACP,OAAQ4L,EAAW,OACnB,UAAWA,EAAW,UACtB,aAAc,GACd,QAAS5L,EAAM,IACf,QAASA,EAAM,IACf,aAAcA,EAAM,aACpB,OAAQA,EAAM,OACd,OAAQA,EAAM,OACd,WAAYA,EAAM,WAClB,WAAYA,EAAM,QAClB,UAAWA,EAAM,UACjB,MAAOA,EAAM,MACb,KAAM6L,EACT,CACL,CACA,SAASA,IAAY,CACjBC,GAAe,KAAK,KAAK,CAC7B,CACA,IAAIC,GAAc,SAAUC,EAAQ,CAChCC,EAAUF,EAAYC,CAAM,EAC5B,SAASD,GAAa,CAClB,IAAIG,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,QAAU,KACTA,CACf,CACI,OAAAH,EAAW,UAAU,QAAU,UAAY,CAAG,EAC9CA,EAAW,UAAU,UAAY,UAAY,CAAG,EACzCA,CACX,EAAEjM,EAAQ,EACNqM,GAAiB,UAAY,CAC7B,SAASA,EAAcnO,EAAGC,EAAG,CACzB,KAAK,EAAID,EACT,KAAK,EAAIC,CACjB,CACI,OAAOkO,CACX,IACIC,GAAe,CACf,QAAS,WAAY,aAAc,WACnC,UAAW,YAAa,YAAa,aACzC,EACIC,GAAU,IAAIvC,GAAa,EAAG,EAAG,EAAG,CAAC,EACrCwC,GAAW,SAAUN,EAAQ,CAC7BC,EAAUK,EAASN,CAAM,EACzB,SAASM,EAAQC,EAASC,EAASC,EAAOC,EAAaC,EAAa,CAChE,IAAIT,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAE,EAAM,SAAW,IAAIC,GAAc,EAAG,CAAC,EACvCD,EAAM,QAAUK,EAChBL,EAAM,QAAUM,EAChBN,EAAM,YAAcQ,EACpBR,EAAM,aAAeS,EACrBF,EAAQA,GAAS,IAAIV,GACrBG,EAAM,MAAQ,KACdA,EAAM,gBAAgBO,CAAK,EAC3BP,EAAM,aAAe,IAAI5M,GAAU4M,CAAK,EACjCA,CACf,CACI,OAAAI,EAAQ,UAAU,gBAAkB,SAAUG,EAAO,CAC7C,KAAK,OACL,KAAK,MAAM,QAAS,EAEpBA,IACAG,EAAUR,GAAc,SAAUvG,EAAM,CACpC4G,EAAM,IAAMA,EAAM,GAAG5G,EAAM,KAAKA,CAAI,EAAG,IAAI,CAC9C,EAAE,IAAI,EACP4G,EAAM,QAAU,MAEpB,KAAK,MAAQA,CAChB,EACDH,EAAQ,UAAU,UAAY,SAAUtM,EAAO,CAC3C,IAAIhC,EAAIgC,EAAM,IACV/B,EAAI+B,EAAM,IACV6M,EAAYC,GAAkB,KAAM9O,EAAGC,CAAC,EACxC8O,EAAc,KAAK,SACnBC,EAAoBD,EAAY,OAChCC,GAAqB,CAACA,EAAkB,OACxCD,EAAc,KAAK,UAAUA,EAAY,EAAGA,EAAY,CAAC,EACzDC,EAAoBD,EAAY,QAEpC,IAAIE,EAAU,KAAK,SAAWJ,EAAY,IAAIV,GAAcnO,EAAGC,CAAC,EAAI,KAAK,UAAUD,EAAGC,CAAC,EACnFiP,EAAgBD,EAAQ,OACxBR,EAAQ,KAAK,MACjBA,EAAM,WAAaA,EAAM,UAAUS,EAAgBA,EAAc,OAAS,SAAS,EAC/EF,GAAqBE,IAAkBF,GACvC,KAAK,kBAAkBD,EAAa,WAAY/M,CAAK,EAEzD,KAAK,kBAAkBiN,EAAS,YAAajN,CAAK,EAC9CkN,GAAiBA,IAAkBF,GACnC,KAAK,kBAAkBC,EAAS,YAAajN,CAAK,CAEzD,EACDsM,EAAQ,UAAU,SAAW,SAAUtM,EAAO,CAC1C,IAAImN,EAAenN,EAAM,eACrBmN,IAAiB,kBACjB,KAAK,kBAAkB,KAAK,SAAU,WAAYnN,CAAK,EAEvDmN,IAAiB,gBACjB,KAAK,QAAQ,YAAa,CAAE,KAAM,YAAa,MAAOnN,EAAO,CAEpE,EACDsM,EAAQ,UAAU,OAAS,UAAY,CACnC,KAAK,SAAW,IAAIH,GAAc,EAAG,CAAC,CACzC,EACDG,EAAQ,UAAU,SAAW,SAAU/L,EAAW6M,EAAW,CACzD,IAAI7N,EAAU,KAAKgB,CAAS,EAC5BhB,GAAWA,EAAQ,KAAK,KAAM6N,CAAS,CAC1C,EACDd,EAAQ,UAAU,QAAU,UAAY,CACpC,KAAK,MAAM,QAAS,EACpB,KAAK,QAAU,KACf,KAAK,MAAQ,KACb,KAAK,QAAU,IAClB,EACDA,EAAQ,UAAU,eAAiB,SAAUe,EAAa,CACtD,IAAIZ,EAAQ,KAAK,MACjBA,EAAM,WAAaA,EAAM,UAAUY,CAAW,CACjD,EACDf,EAAQ,UAAU,kBAAoB,SAAUV,EAAYrL,EAAWP,EAAO,CAC1E4L,EAAaA,GAAc,CAAE,EAC7B,IAAI7I,EAAK6I,EAAW,OACpB,GAAI,EAAA7I,GAAMA,EAAG,QAKb,SAFIuK,EAAY,KAAO/M,EACnBgN,EAAc7B,GAAgBnL,EAAWqL,EAAY5L,CAAK,EACvD+C,IACHA,EAAGuK,CAAQ,IACHC,EAAY,aAAe,CAAC,CAACxK,EAAGuK,CAAQ,EAAE,KAAKvK,EAAIwK,CAAW,GACtExK,EAAG,QAAQxC,EAAWgN,CAAW,EACjCxK,EAAKA,EAAG,aAAeA,EAAG,aAAeA,EAAG,OACxC,CAAAwK,EAAY,eAAhB,CAICA,EAAY,eACb,KAAK,QAAQhN,EAAWgN,CAAW,EAC/B,KAAK,SAAW,KAAK,QAAQ,gBAC7B,KAAK,QAAQ,eAAe,SAAUC,EAAO,CACrC,OAAQA,EAAMF,CAAQ,GAAO,YAC7BE,EAAMF,CAAQ,EAAE,KAAKE,EAAOD,CAAW,EAEvCC,EAAM,SACNA,EAAM,QAAQjN,EAAWgN,CAAW,CAE5D,CAAiB,GAGZ,EACDjB,EAAQ,UAAU,UAAY,SAAUtO,EAAGC,EAAGwP,EAAS,CACnD,IAAIC,EAAO,KAAK,QAAQ,eAAgB,EACpCtP,EAAM,IAAI+N,GAAcnO,EAAGC,CAAC,EAEhC,GADA0P,GAAeD,EAAMtP,EAAKJ,EAAGC,EAAGwP,CAAO,EACnC,KAAK,cAAgB,CAACrP,EAAI,OAAQ,CAKlC,QAJIwP,EAAa,CAAE,EACfjB,EAAc,KAAK,aACnBkB,EAAiBlB,EAAc,EAC/BmB,EAAc,IAAIhE,GAAa9L,EAAI6P,EAAgB5P,EAAI4P,EAAgBlB,EAAaA,CAAW,EAC1FjX,EAAIgY,EAAK,OAAS,EAAGhY,GAAK,EAAGA,IAAK,CACvC,IAAIqN,EAAK2K,EAAKhY,CAAC,EACXqN,IAAO0K,GACJ,CAAC1K,EAAG,QACJ,CAACA,EAAG,sBACH,CAACA,EAAG,QAAU,CAACA,EAAG,OAAO,uBAC7BsJ,GAAQ,KAAKtJ,EAAG,iBAAiB,EAC7BA,EAAG,WACHsJ,GAAQ,eAAetJ,EAAG,SAAS,EAEnCsJ,GAAQ,UAAUyB,CAAW,GAC7BF,EAAW,KAAK7K,CAAE,EAG1C,CACY,GAAI6K,EAAW,OAIX,QAHIG,EAAQ,EACRC,EAAY,KAAK,GAAK,GACtBC,EAAM,KAAK,GAAK,EACXC,EAAI,EAAGA,EAAIL,EAAgBK,GAAKH,EACrC,QAASI,EAAQ,EAAGA,EAAQF,EAAKE,GAASH,EAAW,CACjD,IAAII,EAAKpQ,EAAIkQ,EAAI,KAAK,IAAIC,CAAK,EAC3BE,EAAKpQ,EAAIiQ,EAAI,KAAK,IAAIC,CAAK,EAE/B,GADAR,GAAeC,EAAYxP,EAAKgQ,EAAIC,EAAIZ,CAAO,EAC3CrP,EAAI,OACJ,OAAOA,CAEnC,CAGA,CACQ,OAAOA,CACV,EACDkO,EAAQ,UAAU,eAAiB,SAAUtM,EAAOsO,EAAO,CAClD,KAAK,cACN,KAAK,YAAc,IAAIpI,IAE3B,IAAIqI,EAAa,KAAK,YACtBD,IAAU,SAAWC,EAAW,MAAO,EACvC,IAAI9H,EAAc8H,EAAW,UAAUvO,EAAO,KAAK,UAAUA,EAAM,IAAKA,EAAM,IAAK,IAAI,EAAE,OAAQ,KAAK,MAAM,GAAG,EAE/G,GADAsO,IAAU,OAASC,EAAW,MAAO,EACjC9H,EAAa,CACb,IAAIvL,EAAOuL,EAAY,KACvBzG,EAAM,aAAe9E,EACrB,IAAI9E,EAAM,IAAI+V,GACd/V,EAAI,OAASqQ,EAAY,OACzB,KAAK,kBAAkBrQ,EAAK8E,EAAMuL,EAAY,KAAK,CAC/D,CACK,EACM6F,CACX,EAAExM,EAAQ,EACV8M,EAAU,CAAC,QAAS,YAAa,UAAW,aAAc,WAAY,aAAa,EAAG,SAAU/G,EAAM,CAClGyG,GAAQ,UAAUzG,CAAI,EAAI,SAAU7F,EAAO,CACvC,IAAIhC,EAAIgC,EAAM,IACV/B,EAAI+B,EAAM,IACV6M,EAAYC,GAAkB,KAAM9O,EAAGC,CAAC,EACxCgP,EACAC,EAKJ,IAJIrH,IAAS,WAAa,CAACgH,KACvBI,EAAU,KAAK,UAAUjP,EAAGC,CAAC,EAC7BiP,EAAgBD,EAAQ,QAExBpH,IAAS,YACT,KAAK,QAAUqH,EACf,KAAK,WAAa,CAAClN,EAAM,IAAKA,EAAM,GAAG,EACvC,KAAK,MAAQkN,UAERrH,IAAS,UACd,KAAK,MAAQqH,UAERrH,IAAS,QAAS,CACvB,GAAI,KAAK,UAAY,KAAK,OACnB,CAAC,KAAK,YACN2I,GAAU,KAAK,WAAY,CAACxO,EAAM,IAAKA,EAAM,GAAG,CAAC,EAAI,EACxD,OAEJ,KAAK,WAAa,IAC9B,CACQ,KAAK,kBAAkBiN,EAASpH,EAAM7F,CAAK,CAC9C,CACL,CAAC,EACD,SAASyO,GAAQC,EAAa1Q,EAAGC,EAAG,CAChC,GAAIyQ,EAAYA,EAAY,UAAY,cAAgB,SAAS,EAAE1Q,EAAGC,CAAC,EAAG,CAItE,QAHI8E,EAAK2L,EACLC,EAAW,OACXC,EAAa,GACV7L,GAAI,CAIP,GAHIA,EAAG,aACH6L,EAAa,IAEb,CAACA,EAAY,CACb,IAAIC,EAAW9L,EAAG,YAAa,EAC/B,GAAI8L,GAAY,CAACA,EAAS,QAAQ7Q,EAAGC,CAAC,EAClC,MAAO,EAE3B,CACgB8E,EAAG,SACH4L,EAAW,IAEf,IAAIG,EAAS/L,EAAG,aAChBA,EAAK+L,GAAkB/L,EAAG,MACtC,CACQ,OAAO4L,EAAWlD,GAAS,EACnC,CACI,MAAO,EACX,CACA,SAASkC,GAAeD,EAAMtP,EAAKJ,EAAGC,EAAGwP,EAAS,CAC9C,QAAS/X,EAAIgY,EAAK,OAAS,EAAGhY,GAAK,EAAGA,IAAK,CACvC,IAAIqN,EAAK2K,EAAKhY,CAAC,EACXqZ,EAAmB,OACvB,GAAIhM,IAAO0K,GACJ,CAAC1K,EAAG,SACHgM,EAAmBN,GAAQ1L,EAAI/E,EAAGC,CAAC,KACvC,CAACG,EAAI,YAAcA,EAAI,UAAY2E,GAC/BgM,IAAqBtD,IAAQ,CAC7BrN,EAAI,OAAS2E,EACb,KAChB,CAEA,CACA,CACA,SAAS+J,GAAkBkC,EAAiBhR,EAAGC,EAAG,CAC9C,IAAIuO,EAAUwC,EAAgB,QAC9B,OAAOhR,EAAI,GAAKA,EAAIwO,EAAQ,YAAcvO,EAAI,GAAKA,EAAIuO,EAAQ,UAAW,CAC9E,CCrSA,IAAIyC,GAAoB,GACpBC,GAAwB,EAC5B,SAASC,GAAaC,EAAG,CAErB,QADIlB,EAAI,EACDkB,GAAKH,IACRf,GAAKkB,EAAI,EACTA,IAAM,EAEV,OAAOA,EAAIlB,CACf,CACA,SAASmB,GAAiB/V,EAAOgW,EAAIC,EAAIC,EAAS,CAC9C,IAAIC,EAAQH,EAAK,EACjB,GAAIG,IAAUF,EACV,MAAO,GAEX,GAAIC,EAAQlW,EAAMmW,GAAO,EAAGnW,EAAMgW,CAAE,CAAC,EAAI,EAAG,CACxC,KAAOG,EAAQF,GAAMC,EAAQlW,EAAMmW,CAAK,EAAGnW,EAAMmW,EAAQ,CAAC,CAAC,EAAI,GAC3DA,IAEJC,GAAWpW,EAAOgW,EAAIG,CAAK,CACnC,KAEQ,MAAOA,EAAQF,GAAMC,EAAQlW,EAAMmW,CAAK,EAAGnW,EAAMmW,EAAQ,CAAC,CAAC,GAAK,GAC5DA,IAGR,OAAOA,EAAQH,CACnB,CACA,SAASI,GAAWpW,EAAOgW,EAAIC,EAAI,CAE/B,IADAA,IACOD,EAAKC,GAAI,CACZ,IAAInG,EAAI9P,EAAMgW,CAAE,EAChBhW,EAAMgW,GAAI,EAAIhW,EAAMiW,CAAE,EACtBjW,EAAMiW,GAAI,EAAInG,CACtB,CACA,CACA,SAASuG,GAAoBrW,EAAOgW,EAAIC,EAAIK,EAAOJ,EAAS,CAIxD,IAHII,IAAUN,GACVM,IAEGA,EAAQL,EAAIK,IAAS,CAKxB,QAJI5H,EAAQ1O,EAAMsW,CAAK,EACnBC,EAAOP,EACPQ,EAAQF,EACRG,EACGF,EAAOC,GACVC,EAAMF,EAAOC,IAAU,EACnBN,EAAQxH,EAAO1O,EAAMyW,CAAG,CAAC,EAAI,EAC7BD,EAAQC,EAGRF,EAAOE,EAAM,EAGrB,IAAIX,EAAIQ,EAAQC,EAChB,OAAQT,EAAC,CACL,IAAK,GACD9V,EAAMuW,EAAO,CAAC,EAAIvW,EAAMuW,EAAO,CAAC,EACpC,IAAK,GACDvW,EAAMuW,EAAO,CAAC,EAAIvW,EAAMuW,EAAO,CAAC,EACpC,IAAK,GACDvW,EAAMuW,EAAO,CAAC,EAAIvW,EAAMuW,CAAI,EAC5B,MACJ,QACI,KAAOT,EAAI,GACP9V,EAAMuW,EAAOT,CAAC,EAAI9V,EAAMuW,EAAOT,EAAI,CAAC,EACpCA,GAEpB,CACQ9V,EAAMuW,CAAI,EAAI7H,CACtB,CACA,CACA,SAASgI,GAAWzW,EAAOD,EAAOsW,EAAOK,EAAQC,EAAMV,EAAS,CAC5D,IAAIW,EAAa,EACbC,EAAY,EACZjT,EAAS,EACb,GAAIqS,EAAQjW,EAAOD,EAAMsW,EAAQM,CAAI,CAAC,EAAI,EAAG,CAEzC,IADAE,EAAYH,EAASC,EACd/S,EAASiT,GAAaZ,EAAQjW,EAAOD,EAAMsW,EAAQM,EAAO/S,CAAM,CAAC,EAAI,GACxEgT,EAAahT,EACbA,GAAUA,GAAU,GAAK,EACrBA,GAAU,IACVA,EAASiT,GAGbjT,EAASiT,IACTjT,EAASiT,GAEbD,GAAcD,EACd/S,GAAU+S,CAClB,KACS,CAED,IADAE,EAAYF,EAAO,EACZ/S,EAASiT,GAAaZ,EAAQjW,EAAOD,EAAMsW,EAAQM,EAAO/S,CAAM,CAAC,GAAK,GACzEgT,EAAahT,EACbA,GAAUA,GAAU,GAAK,EACrBA,GAAU,IACVA,EAASiT,GAGbjT,EAASiT,IACTjT,EAASiT,GAEb,IAAIC,EAAMF,EACVA,EAAaD,EAAO/S,EACpBA,EAAS+S,EAAOG,CACxB,CAEI,IADAF,IACOA,EAAahT,GAAQ,CACxB,IAAI+B,EAAIiR,GAAchT,EAASgT,IAAe,GAC1CX,EAAQjW,EAAOD,EAAMsW,EAAQ1Q,CAAC,CAAC,EAAI,EACnCiR,EAAajR,EAAI,EAGjB/B,EAAS+B,CAErB,CACI,OAAO/B,CACX,CACA,SAASmT,GAAY/W,EAAOD,EAAOsW,EAAOK,EAAQC,EAAMV,EAAS,CAC7D,IAAIW,EAAa,EACbC,EAAY,EACZjT,EAAS,EACb,GAAIqS,EAAQjW,EAAOD,EAAMsW,EAAQM,CAAI,CAAC,EAAI,EAAG,CAEzC,IADAE,EAAYF,EAAO,EACZ/S,EAASiT,GAAaZ,EAAQjW,EAAOD,EAAMsW,EAAQM,EAAO/S,CAAM,CAAC,EAAI,GACxEgT,EAAahT,EACbA,GAAUA,GAAU,GAAK,EACrBA,GAAU,IACVA,EAASiT,GAGbjT,EAASiT,IACTjT,EAASiT,GAEb,IAAIC,EAAMF,EACVA,EAAaD,EAAO/S,EACpBA,EAAS+S,EAAOG,CACxB,KACS,CAED,IADAD,EAAYH,EAASC,EACd/S,EAASiT,GAAaZ,EAAQjW,EAAOD,EAAMsW,EAAQM,EAAO/S,CAAM,CAAC,GAAK,GACzEgT,EAAahT,EACbA,GAAUA,GAAU,GAAK,EACrBA,GAAU,IACVA,EAASiT,GAGbjT,EAASiT,IACTjT,EAASiT,GAEbD,GAAcD,EACd/S,GAAU+S,CAClB,CAEI,IADAC,IACOA,EAAahT,GAAQ,CACxB,IAAI+B,EAAIiR,GAAchT,EAASgT,IAAe,GAC1CX,EAAQjW,EAAOD,EAAMsW,EAAQ1Q,CAAC,CAAC,EAAI,EACnC/B,EAAS+B,EAGTiR,EAAajR,EAAI,CAE7B,CACI,OAAO/B,CACX,CACA,SAASoT,GAAQjX,EAAOkW,EAAS,CAC7B,IAAIgB,EAAYtB,GACZuB,EACAC,EACAC,EAAY,EACZN,EAAM,CAAE,EACZI,EAAW,CAAE,EACbC,EAAY,CAAE,EACd,SAASE,EAAQC,EAAWC,EAAY,CACpCL,EAASE,CAAS,EAAIE,EACtBH,EAAUC,CAAS,EAAIG,EACvBH,GAAa,CACrB,CACI,SAASI,GAAY,CACjB,KAAOJ,EAAY,GAAG,CAClB,IAAIvB,EAAIuB,EAAY,EACpB,GAAKvB,GAAK,GAAKsB,EAAUtB,EAAI,CAAC,GAAKsB,EAAUtB,CAAC,EAAIsB,EAAUtB,EAAI,CAAC,GACzDA,GAAK,GAAKsB,EAAUtB,EAAI,CAAC,GAAKsB,EAAUtB,CAAC,EAAIsB,EAAUtB,EAAI,CAAC,EAC5DsB,EAAUtB,EAAI,CAAC,EAAIsB,EAAUtB,EAAI,CAAC,GAClCA,YAGCsB,EAAUtB,CAAC,EAAIsB,EAAUtB,EAAI,CAAC,EACnC,MAEJ4B,EAAQ5B,CAAC,CACrB,CACA,CACI,SAAS6B,GAAiB,CACtB,KAAON,EAAY,GAAG,CAClB,IAAIvB,EAAIuB,EAAY,EAChBvB,EAAI,GAAKsB,EAAUtB,EAAI,CAAC,EAAIsB,EAAUtB,EAAI,CAAC,GAC3CA,IAEJ4B,EAAQ5B,CAAC,CACrB,CACA,CACI,SAAS4B,EAAQtb,EAAG,CAChB,IAAIwb,EAAST,EAAS/a,CAAC,EACnByb,EAAUT,EAAUhb,CAAC,EACrB0b,EAASX,EAAS/a,EAAI,CAAC,EACvB2b,EAAUX,EAAUhb,EAAI,CAAC,EAC7Bgb,EAAUhb,CAAC,EAAIyb,EAAUE,EACrB3b,IAAMib,EAAY,IAClBF,EAAS/a,EAAI,CAAC,EAAI+a,EAAS/a,EAAI,CAAC,EAChCgb,EAAUhb,EAAI,CAAC,EAAIgb,EAAUhb,EAAI,CAAC,GAEtCib,IACA,IAAIW,EAAIhB,GAAYhX,EAAM8X,CAAM,EAAG9X,EAAO4X,EAAQC,EAAS,EAAG3B,CAAO,EACrE0B,GAAUI,EACVH,GAAWG,EACPH,IAAY,IAGhBE,EAAUrB,GAAW1W,EAAM4X,EAASC,EAAU,CAAC,EAAG7X,EAAO8X,EAAQC,EAASA,EAAU,EAAG7B,CAAO,EAC1F6B,IAAY,IAGZF,GAAWE,EACXE,EAASL,EAAQC,EAASC,EAAQC,CAAO,EAGzCG,EAAUN,EAAQC,EAASC,EAAQC,CAAO,GAEtD,CACI,SAASE,EAASL,EAAQC,EAASC,EAAQC,EAAS,CAChD,IAAI3b,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAIyb,EAASzb,IACrB2a,EAAI3a,CAAC,EAAI4D,EAAM4X,EAASxb,CAAC,EAE7B,IAAI+b,EAAU,EACVC,EAAUN,EACVpP,EAAOkP,EAEX,GADA5X,EAAM0I,GAAM,EAAI1I,EAAMoY,GAAS,EAC3B,EAAEL,IAAY,EAAG,CACjB,IAAK3b,EAAI,EAAGA,EAAIyb,EAASzb,IACrB4D,EAAM0I,EAAOtM,CAAC,EAAI2a,EAAIoB,EAAU/b,CAAC,EAErC,MACZ,CACQ,GAAIyb,IAAY,EAAG,CACf,IAAKzb,EAAI,EAAGA,EAAI2b,EAAS3b,IACrB4D,EAAM0I,EAAOtM,CAAC,EAAI4D,EAAMoY,EAAUhc,CAAC,EAEvC4D,EAAM0I,EAAOqP,CAAO,EAAIhB,EAAIoB,CAAO,EACnC,MACZ,CAKQ,QAJIE,EAAanB,EACboB,EACAC,EACAC,IACM,CACNF,EAAS,EACTC,EAAS,EACTC,EAAO,GACP,EACI,IAAItC,EAAQlW,EAAMoY,CAAO,EAAGrB,EAAIoB,CAAO,CAAC,EAAI,GAIxC,GAHAnY,EAAM0I,GAAM,EAAI1I,EAAMoY,GAAS,EAC/BG,IACAD,EAAS,EACL,EAAEP,IAAY,EAAG,CACjBS,EAAO,GACP,KACxB,UAGoBxY,EAAM0I,GAAM,EAAIqO,EAAIoB,GAAS,EAC7BG,IACAC,EAAS,EACL,EAAEV,IAAY,EAAG,CACjBW,EAAO,GACP,KACxB,QAEsBF,EAASC,GAAUF,GAC7B,GAAIG,EACA,MAEJ,EAAG,CAEC,GADAF,EAAStB,GAAYhX,EAAMoY,CAAO,EAAGrB,EAAKoB,EAASN,EAAS,EAAG3B,CAAO,EAClEoC,IAAW,EAAG,CACd,IAAKlc,EAAI,EAAGA,EAAIkc,EAAQlc,IACpB4D,EAAM0I,EAAOtM,CAAC,EAAI2a,EAAIoB,EAAU/b,CAAC,EAKrC,GAHAsM,GAAQ4P,EACRH,GAAWG,EACXT,GAAWS,EACPT,GAAW,EAAG,CACdW,EAAO,GACP,KACxB,CACA,CAEgB,GADAxY,EAAM0I,GAAM,EAAI1I,EAAMoY,GAAS,EAC3B,EAAEL,IAAY,EAAG,CACjBS,EAAO,GACP,KACpB,CAEgB,GADAD,EAAS7B,GAAWK,EAAIoB,CAAO,EAAGnY,EAAOoY,EAASL,EAAS,EAAG7B,CAAO,EACjEqC,IAAW,EAAG,CACd,IAAKnc,EAAI,EAAGA,EAAImc,EAAQnc,IACpB4D,EAAM0I,EAAOtM,CAAC,EAAI4D,EAAMoY,EAAUhc,CAAC,EAKvC,GAHAsM,GAAQ6P,EACRH,GAAWG,EACXR,GAAWQ,EACPR,IAAY,EAAG,CACfS,EAAO,GACP,KACxB,CACA,CAEgB,GADAxY,EAAM0I,GAAM,EAAIqO,EAAIoB,GAAS,EACzB,EAAEN,IAAY,EAAG,CACjBW,EAAO,GACP,KACpB,CACgBH,GAChB,OAAqBC,GAAU1C,IAAyB2C,GAAU3C,IACtD,GAAI4C,EACA,MAEAH,EAAa,IACbA,EAAa,GAEjBA,GAAc,CAC1B,CAGQ,GAFAnB,EAAYmB,EACZnB,EAAY,IAAMA,EAAY,GAC1BW,IAAY,EAAG,CACf,IAAKzb,EAAI,EAAGA,EAAI2b,EAAS3b,IACrB4D,EAAM0I,EAAOtM,CAAC,EAAI4D,EAAMoY,EAAUhc,CAAC,EAEvC4D,EAAM0I,EAAOqP,CAAO,EAAIhB,EAAIoB,CAAO,CAC/C,KACa,IAAIN,IAAY,EACjB,MAAM,IAAI,MAGV,IAAKzb,EAAI,EAAGA,EAAIyb,EAASzb,IACrB4D,EAAM0I,EAAOtM,CAAC,EAAI2a,EAAIoB,EAAU/b,CAAC,EAGjD,CACI,SAAS8b,EAAUN,EAAQC,EAASC,EAAQC,EAAS,CACjD,IAAI3b,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAI2b,EAAS3b,IACrB2a,EAAI3a,CAAC,EAAI4D,EAAM8X,EAAS1b,CAAC,EAE7B,IAAI+b,EAAUP,EAASC,EAAU,EAC7BO,EAAUL,EAAU,EACpBrP,EAAOoP,EAASC,EAAU,EAC1BU,EAAe,EACfC,EAAa,EAEjB,GADA1Y,EAAM0I,GAAM,EAAI1I,EAAMmY,GAAS,EAC3B,EAAEN,IAAY,EAAG,CAEjB,IADAY,EAAe/P,GAAQqP,EAAU,GAC5B3b,EAAI,EAAGA,EAAI2b,EAAS3b,IACrB4D,EAAMyY,EAAerc,CAAC,EAAI2a,EAAI3a,CAAC,EAEnC,MACZ,CACQ,GAAI2b,IAAY,EAAG,CAKf,IAJArP,GAAQmP,EACRM,GAAWN,EACXa,EAAahQ,EAAO,EACpB+P,EAAeN,EAAU,EACpB/b,EAAIyb,EAAU,EAAGzb,GAAK,EAAGA,IAC1B4D,EAAM0Y,EAAatc,CAAC,EAAI4D,EAAMyY,EAAerc,CAAC,EAElD4D,EAAM0I,CAAI,EAAIqO,EAAIqB,CAAO,EACzB,MACZ,CAEQ,QADIC,EAAanB,IACJ,CACT,IAAIoB,EAAS,EACTC,EAAS,EACTC,EAAO,GACX,EACI,IAAItC,EAAQa,EAAIqB,CAAO,EAAGpY,EAAMmY,CAAO,CAAC,EAAI,GAIxC,GAHAnY,EAAM0I,GAAM,EAAI1I,EAAMmY,GAAS,EAC/BG,IACAC,EAAS,EACL,EAAEV,IAAY,EAAG,CACjBW,EAAO,GACP,KACxB,UAGoBxY,EAAM0I,GAAM,EAAIqO,EAAIqB,GAAS,EAC7BG,IACAD,EAAS,EACL,EAAEP,IAAY,EAAG,CACjBS,EAAO,GACP,KACxB,QAEsBF,EAASC,GAAUF,GAC7B,GAAIG,EACA,MAEJ,EAAG,CAEC,GADAF,EAAST,EAAUb,GAAYD,EAAIqB,CAAO,EAAGpY,EAAO4X,EAAQC,EAASA,EAAU,EAAG3B,CAAO,EACrFoC,IAAW,EAAG,CAMd,IALA5P,GAAQ4P,EACRH,GAAWG,EACXT,GAAWS,EACXI,EAAahQ,EAAO,EACpB+P,EAAeN,EAAU,EACpB/b,EAAIkc,EAAS,EAAGlc,GAAK,EAAGA,IACzB4D,EAAM0Y,EAAatc,CAAC,EAAI4D,EAAMyY,EAAerc,CAAC,EAElD,GAAIyb,IAAY,EAAG,CACfW,EAAO,GACP,KACxB,CACA,CAEgB,GADAxY,EAAM0I,GAAM,EAAIqO,EAAIqB,GAAS,EACzB,EAAEL,IAAY,EAAG,CACjBS,EAAO,GACP,KACpB,CAEgB,GADAD,EAASR,EAAUrB,GAAW1W,EAAMmY,CAAO,EAAGpB,EAAK,EAAGgB,EAASA,EAAU,EAAG7B,CAAO,EAC/EqC,IAAW,EAAG,CAMd,IALA7P,GAAQ6P,EACRH,GAAWG,EACXR,GAAWQ,EACXG,EAAahQ,EAAO,EACpB+P,EAAeL,EAAU,EACpBhc,EAAI,EAAGA,EAAImc,EAAQnc,IACpB4D,EAAM0Y,EAAatc,CAAC,EAAI2a,EAAI0B,EAAerc,CAAC,EAEhD,GAAI2b,GAAW,EAAG,CACdS,EAAO,GACP,KACxB,CACA,CAEgB,GADAxY,EAAM0I,GAAM,EAAI1I,EAAMmY,GAAS,EAC3B,EAAEN,IAAY,EAAG,CACjBW,EAAO,GACP,KACpB,CACgBH,GAChB,OAAqBC,GAAU1C,IAAyB2C,GAAU3C,IACtD,GAAI4C,EACA,MAEAH,EAAa,IACbA,EAAa,GAEjBA,GAAc,CAC1B,CAKQ,GAJAnB,EAAYmB,EACRnB,EAAY,IACZA,EAAY,GAEZa,IAAY,EAAG,CAKf,IAJArP,GAAQmP,EACRM,GAAWN,EACXa,EAAahQ,EAAO,EACpB+P,EAAeN,EAAU,EACpB/b,EAAIyb,EAAU,EAAGzb,GAAK,EAAGA,IAC1B4D,EAAM0Y,EAAatc,CAAC,EAAI4D,EAAMyY,EAAerc,CAAC,EAElD4D,EAAM0I,CAAI,EAAIqO,EAAIqB,CAAO,CACrC,KACa,IAAIL,IAAY,EACjB,MAAM,IAAI,MAIV,IADAU,EAAe/P,GAAQqP,EAAU,GAC5B3b,EAAI,EAAGA,EAAI2b,EAAS3b,IACrB4D,EAAMyY,EAAerc,CAAC,EAAI2a,EAAI3a,CAAC,EAG/C,CACI,MAAO,CACH,UAAWqb,EACX,eAAgBE,EAChB,QAASL,CACZ,CACL,CACe,SAASqB,GAAK3Y,EAAOkW,EAASF,EAAIC,EAAI,CAC5CD,IACDA,EAAK,GAEJC,IACDA,EAAKjW,EAAM,QAEf,IAAI4Y,EAAY3C,EAAKD,EACrB,GAAI,EAAA4C,EAAY,GAGhB,KAAIxB,EAAY,EAChB,GAAIwB,EAAYjD,GAAmB,CAC/ByB,EAAYrB,GAAiB/V,EAAOgW,EAAIC,EAAIC,CAAO,EACnDG,GAAoBrW,EAAOgW,EAAIC,EAAID,EAAKoB,EAAWlB,CAAO,EAC1D,MACR,CACI,IAAI2C,EAAK5B,GAAQjX,EAAOkW,CAAO,EAC3B4C,EAASjD,GAAa+C,CAAS,EACnC,EAAG,CAEC,GADAxB,EAAYrB,GAAiB/V,EAAOgW,EAAIC,EAAIC,CAAO,EAC/CkB,EAAY0B,EAAQ,CACpB,IAAIC,EAAQH,EACRG,EAAQD,IACRC,EAAQD,GAEZzC,GAAoBrW,EAAOgW,EAAIA,EAAK+C,EAAO/C,EAAKoB,EAAWlB,CAAO,EAClEkB,EAAY2B,CACxB,CACQF,EAAG,QAAQ7C,EAAIoB,CAAS,EACxByB,EAAG,UAAW,EACdD,GAAaxB,EACbpB,GAAMoB,CACT,OAAQwB,IAAc,GACvBC,EAAG,eAAgB,EACvB,CCzgBO,IAAIG,GAAa,EACbC,GAAoB,EACpBC,GAAoB,ECC3BC,GAAsB,GAC1B,SAASC,IAAmB,CACpBD,KAGJA,GAAsB,GACtB,QAAQ,KAAK,8EAA8E,EAC/F,CACA,SAASE,GAAiB3V,EAAGC,EAAG,CAC5B,OAAID,EAAE,SAAWC,EAAE,OACXD,EAAE,IAAMC,EAAE,EACHD,EAAE,GAAKC,EAAE,GAEbD,EAAE,EAAIC,EAAE,EAEZD,EAAE,OAASC,EAAE,MACxB,CACA,IAAI2V,GAAW,UAAY,CACvB,SAASA,GAAU,CACf,KAAK,OAAS,CAAE,EAChB,KAAK,aAAe,CAAE,EACtB,KAAK,gBAAkB,EACvB,KAAK,oBAAsBD,EACnC,CACI,OAAAC,EAAQ,UAAU,SAAW,SAAUvY,EAAIC,EAAS,CAChD,QAAS,EAAI,EAAG,EAAI,KAAK,OAAO,OAAQ,IACpC,KAAK,OAAO,CAAC,EAAE,SAASD,EAAIC,CAAO,CAE1C,EACDsY,EAAQ,UAAU,eAAiB,SAAUC,EAAQC,EAAe,CAChEA,EAAgBA,GAAiB,GACjC,IAAIC,EAAc,KAAK,aACvB,OAAIF,GAAU,CAACE,EAAY,SACvB,KAAK,kBAAkBD,CAAa,EAEjCC,CACV,EACDH,EAAQ,UAAU,kBAAoB,SAAUE,EAAe,CAC3D,KAAK,gBAAkB,EAGvB,QAFIE,EAAQ,KAAK,OACbD,EAAc,KAAK,aACdrd,EAAI,EAAG0C,EAAM4a,EAAM,OAAQtd,EAAI0C,EAAK1C,IACzC,KAAK,yBAAyBsd,EAAMtd,CAAC,EAAG,KAAMod,CAAa,EAE/DC,EAAY,OAAS,KAAK,gBAC1BE,GAAQF,EAAaJ,EAAgB,CACxC,EACDC,EAAQ,UAAU,yBAA2B,SAAU7P,EAAImQ,EAAWJ,EAAe,CACjF,GAAI,EAAA/P,EAAG,QAAU,CAAC+P,GAGlB,CAAA/P,EAAG,aAAc,EACjBA,EAAG,OAAQ,EACXA,EAAG,YAAa,EAChB,IAAIoQ,EAAkBpQ,EAAG,YAAa,EACtC,GAAIA,EAAG,WACHmQ,EAAY,aAEPC,EAAiB,CAClBD,EACAA,EAAYA,EAAU,MAAO,EAG7BA,EAAY,CAAE,EAIlB,QAFIE,EAAkBD,EAClBE,EAAiBtQ,EACdqQ,GACHA,EAAgB,OAASC,EACzBD,EAAgB,gBAAiB,EACjCF,EAAU,KAAKE,CAAe,EAC9BC,EAAiBD,EACjBA,EAAkBA,EAAgB,YAAa,CAE/D,CACQ,GAAIrQ,EAAG,YAAa,CAEhB,QADIuQ,EAAWvQ,EAAG,YAAa,EACtBrN,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IAAK,CACtC,IAAI6d,EAAQD,EAAS5d,CAAC,EAClBqN,EAAG,UACHwQ,EAAM,SAAWjB,IAErB,KAAK,yBAAyBiB,EAAOL,EAAWJ,CAAa,CAC7E,CACY/P,EAAG,QAAU,CACzB,KACa,CACD,IAAIyQ,EAAOzQ,EACPmQ,GAAaA,EAAU,OACvBM,EAAK,YAAcN,EAEdM,EAAK,aAAeA,EAAK,YAAY,OAAS,IACnDA,EAAK,YAAc,CAAE,GAErB,MAAMA,EAAK,CAAC,IACZd,GAAkB,EAClBc,EAAK,EAAI,GAET,MAAMA,EAAK,EAAE,IACbd,GAAkB,EAClBc,EAAK,GAAK,GAEV,MAAMA,EAAK,MAAM,IACjBd,GAAkB,EAClBc,EAAK,OAAS,GAElB,KAAK,aAAa,KAAK,iBAAiB,EAAIA,CACxD,CACQ,IAAIC,EAAU1Q,EAAG,iBAAmBA,EAAG,gBAAiB,EACpD0Q,GACA,KAAK,yBAAyBA,EAASP,EAAWJ,CAAa,EAEnE,IAAIY,EAAY3Q,EAAG,iBAAkB,EACjC2Q,GACA,KAAK,yBAAyBA,EAAWR,EAAWJ,CAAa,EAErE,IAAIa,EAAS5Q,EAAG,eAAgB,EAC5B4Q,GACA,KAAK,yBAAyBA,EAAQT,EAAWJ,CAAa,EAErE,EACDF,EAAQ,UAAU,QAAU,SAAU7P,EAAI,CAClCA,EAAG,MAAQA,EAAG,KAAK,UAAY,MAGnC,KAAK,OAAO,KAAKA,CAAE,CACtB,EACD6P,EAAQ,UAAU,QAAU,SAAU7P,EAAI,CACtC,GAAIA,aAAc,MAAO,CACrB,QAASrN,EAAI,EAAGgL,EAAIqC,EAAG,OAAQrN,EAAIgL,EAAGhL,IAClC,KAAK,QAAQqN,EAAGrN,CAAC,CAAC,EAEtB,MACZ,CACQ,IAAIke,EAAMC,EAAa,KAAK,OAAQ9Q,CAAE,EAClC6Q,GAAO,GACP,KAAK,OAAO,OAAOA,EAAK,CAAC,CAEhC,EACDhB,EAAQ,UAAU,YAAc,UAAY,CACxC,KAAK,OAAS,CAAE,EAChB,KAAK,aAAe,CAAE,EACtB,KAAK,gBAAkB,CAE1B,EACDA,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,KAAK,MACf,EACDA,EAAQ,UAAU,QAAU,UAAY,CACpC,KAAK,aAAe,KACpB,KAAK,OAAS,IACjB,EACMA,CACX,IC3JIkB,GACJA,GAAyBtf,EAAI,kBACpB,OAAO,uBAAyB,OAAO,sBAAsB,KAAK,MAAM,GACrE,OAAO,yBAA2B,OAAO,wBAAwB,KAAK,MAAM,GAC7E,OAAO,0BACP,OAAO,8BAAiC,SAAUmG,EAAM,CAC/D,OAAO,WAAWA,EAAM,EAAE,CAC9B,ECRA,IAAIoZ,GAAc,CACd,OAAQ,SAAUzC,EAAG,CACjB,OAAOA,CACV,EACD,YAAa,SAAUA,EAAG,CACtB,OAAOA,EAAIA,CACd,EACD,aAAc,SAAUA,EAAG,CACvB,OAAOA,GAAK,EAAIA,EACnB,EACD,eAAgB,SAAUA,EAAG,CACzB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAEd,KAAQ,EAAEA,GAAKA,EAAI,GAAK,EAClC,EACD,QAAS,SAAUA,EAAG,CAClB,OAAOA,EAAIA,EAAIA,CAClB,EACD,SAAU,SAAUA,EAAG,CACnB,MAAO,EAAEA,EAAIA,EAAIA,EAAI,CACxB,EACD,WAAY,SAAUA,EAAG,CACrB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAElB,KAAQA,GAAK,GAAKA,EAAIA,EAAI,EACpC,EACD,UAAW,SAAUA,EAAG,CACpB,OAAOA,EAAIA,EAAIA,EAAIA,CACtB,EACD,WAAY,SAAUA,EAAG,CACrB,MAAO,IAAK,EAAEA,EAAIA,EAAIA,EAAIA,CAC7B,EACD,aAAc,SAAUA,EAAG,CACvB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAAIA,EAEtB,MAASA,GAAK,GAAKA,EAAIA,EAAIA,EAAI,EACzC,EACD,UAAW,SAAUA,EAAG,CACpB,OAAOA,EAAIA,EAAIA,EAAIA,EAAIA,CAC1B,EACD,WAAY,SAAUA,EAAG,CACrB,MAAO,EAAEA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,CAChC,EACD,aAAc,SAAUA,EAAG,CACvB,OAAKA,GAAK,GAAK,EACJ,GAAMA,EAAIA,EAAIA,EAAIA,EAAIA,EAE1B,KAAQA,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,EAC5C,EACD,aAAc,SAAUA,EAAG,CACvB,MAAO,GAAI,KAAK,IAAIA,EAAI,KAAK,GAAK,CAAC,CACtC,EACD,cAAe,SAAUA,EAAG,CACxB,OAAO,KAAK,IAAIA,EAAI,KAAK,GAAK,CAAC,CAClC,EACD,gBAAiB,SAAUA,EAAG,CAC1B,MAAO,KAAO,EAAI,KAAK,IAAI,KAAK,GAAKA,CAAC,EACzC,EACD,cAAe,SAAUA,EAAG,CACxB,OAAOA,IAAM,EAAI,EAAI,KAAK,IAAI,KAAMA,EAAI,CAAC,CAC5C,EACD,eAAgB,SAAUA,EAAG,CACzB,OAAOA,IAAM,EAAI,EAAI,EAAI,KAAK,IAAI,EAAG,IAAMA,CAAC,CAC/C,EACD,iBAAkB,SAAUA,EAAG,CAC3B,OAAIA,IAAM,EACC,EAEPA,IAAM,EACC,GAENA,GAAK,GAAK,EACJ,GAAM,KAAK,IAAI,KAAMA,EAAI,CAAC,EAE9B,IAAO,CAAC,KAAK,IAAI,EAAG,KAAOA,EAAI,EAAE,EAAI,EAC/C,EACD,WAAY,SAAUA,EAAG,CACrB,MAAO,GAAI,KAAK,KAAK,EAAIA,EAAIA,CAAC,CACjC,EACD,YAAa,SAAUA,EAAG,CACtB,OAAO,KAAK,KAAK,GAAK,EAAEA,EAAIA,CAAE,CACjC,EACD,cAAe,SAAUA,EAAG,CACxB,OAAKA,GAAK,GAAK,EACJ,KAAQ,KAAK,KAAK,EAAIA,EAAIA,CAAC,EAAI,GAEnC,IAAO,KAAK,KAAK,GAAKA,GAAK,GAAKA,CAAC,EAAI,EAC/C,EACD,UAAW,SAAUA,EAAG,CACpB,IAAI5S,EACA1B,EAAI,GACJgM,EAAI,GACR,OAAIsI,IAAM,EACC,EAEPA,IAAM,EACC,GAEP,CAACtU,GAAKA,EAAI,GACVA,EAAI,EACJ0B,EAAIsK,EAAI,GAGRtK,EAAIsK,EAAI,KAAK,KAAK,EAAIhM,CAAC,GAAK,EAAI,KAAK,IAElC,EAAEA,EAAI,KAAK,IAAI,EAAG,IAAMsU,GAAK,EAAE,EAChC,KAAK,KAAKA,EAAI5S,IAAM,EAAI,KAAK,IAAMsK,CAAC,GAC7C,EACD,WAAY,SAAUsI,EAAG,CACrB,IAAI5S,EACA1B,EAAI,GACJgM,EAAI,GACR,OAAIsI,IAAM,EACC,EAEPA,IAAM,EACC,GAEP,CAACtU,GAAKA,EAAI,GACVA,EAAI,EACJ0B,EAAIsK,EAAI,GAGRtK,EAAIsK,EAAI,KAAK,KAAK,EAAIhM,CAAC,GAAK,EAAI,KAAK,IAEjCA,EAAI,KAAK,IAAI,EAAG,IAAMsU,CAAC,EACzB,KAAK,KAAKA,EAAI5S,IAAM,EAAI,KAAK,IAAMsK,CAAC,EAAI,EACjD,EACD,aAAc,SAAUsI,EAAG,CACvB,IAAI5S,EACA1B,EAAI,GACJgM,EAAI,GACR,OAAIsI,IAAM,EACC,EAEPA,IAAM,EACC,GAEP,CAACtU,GAAKA,EAAI,GACVA,EAAI,EACJ0B,EAAIsK,EAAI,GAGRtK,EAAIsK,EAAI,KAAK,KAAK,EAAIhM,CAAC,GAAK,EAAI,KAAK,KAEpCsU,GAAK,GAAK,EACJ,KAAQtU,EAAI,KAAK,IAAI,EAAG,IAAMsU,GAAK,EAAE,EACtC,KAAK,KAAKA,EAAI5S,IAAM,EAAI,KAAK,IAAMsK,CAAC,GAEvChM,EAAI,KAAK,IAAI,EAAG,KAAOsU,GAAK,EAAE,EAC/B,KAAK,KAAKA,EAAI5S,IAAM,EAAI,KAAK,IAAMsK,CAAC,EAAI,GAAM,EACvD,EACD,OAAQ,SAAUsI,EAAG,CACjB,IAAI5S,EAAI,QACR,OAAO4S,EAAIA,IAAM5S,EAAI,GAAK4S,EAAI5S,EACjC,EACD,QAAS,SAAU4S,EAAG,CAClB,IAAI5S,EAAI,QACR,MAAO,EAAE4S,EAAIA,IAAM5S,EAAI,GAAK4S,EAAI5S,GAAK,CACxC,EACD,UAAW,SAAU4S,EAAG,CACpB,IAAI5S,EAAI,UACR,OAAK4S,GAAK,GAAK,EACJ,IAAOA,EAAIA,IAAM5S,EAAI,GAAK4S,EAAI5S,IAElC,KAAQ4S,GAAK,GAAKA,IAAM5S,EAAI,GAAK4S,EAAI5S,GAAK,EACpD,EACD,SAAU,SAAU4S,EAAG,CACnB,MAAO,GAAIyC,GAAY,UAAU,EAAIzC,CAAC,CACzC,EACD,UAAW,SAAUA,EAAG,CACpB,OAAIA,EAAK,EAAI,KACF,OAASA,EAAIA,EAEfA,EAAK,EAAI,KACP,QAAUA,GAAM,IAAM,MAASA,EAAI,IAErCA,EAAK,IAAM,KACT,QAAUA,GAAM,KAAO,MAASA,EAAI,MAGpC,QAAUA,GAAM,MAAQ,MAASA,EAAI,OAEnD,EACD,YAAa,SAAUA,EAAG,CACtB,OAAIA,EAAI,GACGyC,GAAY,SAASzC,EAAI,CAAC,EAAI,GAElCyC,GAAY,UAAUzC,EAAI,EAAI,CAAC,EAAI,GAAM,EACxD,CACA,EChMI0C,GAAU,KAAK,IACfC,GAAW,KAAK,KAChBC,GAAU,KACVC,GAAkB,KAClBC,GAAaH,GAAS,CAAC,EACvBI,GAAY,EAAI,EAChBC,GAAMC,GAAU,EAChBC,GAAMD,GAAU,EAChBE,GAAMF,GAAU,EACpB,SAASG,GAAa3d,EAAK,CACvB,OAAOA,EAAM,OAAYA,EAAMmd,EACnC,CACA,SAASS,GAAgB5d,EAAK,CAC1B,OAAOA,EAAMmd,IAAWnd,EAAM,KAClC,CACO,SAAS6d,GAAQ1L,EAAIC,EAAIF,EAAI4L,EAAIzL,EAAG,CACvC,IAAIC,EAAO,EAAID,EACf,OAAOC,EAAOA,GAAQA,EAAOH,EAAK,EAAIE,EAAID,GACpCC,EAAIA,GAAKA,EAAIyL,EAAK,EAAIxL,EAAOJ,EACvC,CACO,SAAS6L,GAAkB5L,EAAIC,EAAIF,EAAI4L,EAAIzL,EAAG,CACjD,IAAIC,EAAO,EAAID,EACf,MAAO,MAAOD,EAAKD,GAAMG,EAAO,GAAKJ,EAAKE,GAAMC,GAAKC,GAC9CwL,EAAK5L,GAAMG,EAAIA,EAC1B,CACO,SAAS2L,GAAY7L,EAAIC,EAAIF,EAAI4L,EAAI9d,EAAKic,EAAO,CACpD,IAAIhW,EAAI6X,EAAK,GAAK1L,EAAKF,GAAMC,EACzBjM,EAAI,GAAKgM,EAAKE,EAAK,EAAID,GACvB3E,EAAI,GAAK4E,EAAKD,GACdtK,EAAIsK,EAAKnS,EACTie,EAAI/X,EAAIA,EAAI,EAAID,EAAIuH,EACpB0Q,EAAIhY,EAAIsH,EAAI,EAAIvH,EAAI4B,EACpBsW,EAAI3Q,EAAIA,EAAI,EAAItH,EAAI2B,EACpBwQ,EAAI,EACR,GAAIsF,GAAaM,CAAC,GAAKN,GAAaO,CAAC,EACjC,GAAIP,GAAazX,CAAC,EACd+V,EAAM,CAAC,EAAI,MAEV,CACD,IAAImC,EAAK,CAAC5Q,EAAItH,EACVkY,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,EAE7B,KAES,CACD,IAAIC,EAAOH,EAAIA,EAAI,EAAID,EAAIE,EAC3B,GAAIR,GAAaU,CAAI,EAAG,CACpB,IAAIC,EAAIJ,EAAID,EACRG,EAAK,CAAClY,EAAID,EAAIqY,EACdC,EAAK,CAACD,EAAI,EACVF,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,GAEbG,GAAM,GAAKA,GAAM,IACjBtC,EAAM5D,GAAG,EAAIkG,EAE7B,SACiBF,EAAO,EAAG,CACf,IAAIG,EAAWtB,GAASmB,CAAI,EACxBI,EAAKR,EAAI/X,EAAI,IAAMD,GAAK,CAACiY,EAAIM,GAC7BE,EAAKT,EAAI/X,EAAI,IAAMD,GAAK,CAACiY,EAAIM,GAC7BC,EAAK,EACLA,EAAK,CAACxB,GAAQ,CAACwB,EAAInB,EAAS,EAG5BmB,EAAKxB,GAAQwB,EAAInB,EAAS,EAE1BoB,EAAK,EACLA,EAAK,CAACzB,GAAQ,CAACyB,EAAIpB,EAAS,EAG5BoB,EAAKzB,GAAQyB,EAAIpB,EAAS,EAE9B,IAAIc,GAAM,CAAClY,GAAKuY,EAAKC,KAAQ,EAAIzY,GAC7BmY,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,EAE7B,KACa,CACD,IAAIO,GAAK,EAAIV,EAAI/X,EAAI,EAAID,EAAIiY,IAAM,EAAIhB,GAASe,EAAIA,EAAIA,CAAC,GACrD7G,EAAQ,KAAK,KAAKuH,CAAC,EAAI,EACvBC,EAAQ1B,GAASe,CAAC,EAClB3E,EAAM,KAAK,IAAIlC,CAAK,EACpBgH,GAAM,CAAClY,EAAI,EAAI0Y,EAAQtF,IAAQ,EAAIrT,GACnCsY,GAAM,CAACrY,EAAI0Y,GAAStF,EAAM+D,GAAa,KAAK,IAAIjG,CAAK,KAAO,EAAInR,GAChE4Y,GAAM,CAAC3Y,EAAI0Y,GAAStF,EAAM+D,GAAa,KAAK,IAAIjG,CAAK,KAAO,EAAInR,GAChEmY,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,GAEbG,GAAM,GAAKA,GAAM,IACjBtC,EAAM5D,GAAG,EAAIkG,GAEbM,GAAM,GAAKA,GAAM,IACjB5C,EAAM5D,GAAG,EAAIwG,EAE7B,CACA,CACI,OAAOxG,CACX,CACO,SAASyG,GAAa3M,EAAIC,EAAIF,EAAI4L,EAAIiB,EAAS,CAClD,IAAI7Y,EAAI,EAAIgM,EAAK,GAAKE,EAAK,EAAID,EAC3BlM,EAAI,EAAImM,EAAK,EAAI0L,EAAK,EAAI3L,EAAK,EAAID,EACnC1E,EAAI,EAAI4E,EAAK,EAAID,EACjBkG,EAAI,EACR,GAAIsF,GAAa1X,CAAC,GACd,GAAI2X,GAAgB1X,CAAC,EAAG,CACpB,IAAIkY,EAAK,CAAC5Q,EAAItH,EACVkY,GAAM,GAAKA,GAAM,IACjBW,EAAQ1G,GAAG,EAAI+F,EAE/B,MAES,CACD,IAAIC,EAAOnY,EAAIA,EAAI,EAAID,EAAIuH,EAC3B,GAAImQ,GAAaU,CAAI,EACjBU,EAAQ,CAAC,EAAI,CAAC7Y,GAAK,EAAID,WAElBoY,EAAO,EAAG,CACf,IAAIG,EAAWtB,GAASmB,CAAI,EACxBD,GAAM,CAAClY,EAAIsY,IAAa,EAAIvY,GAC5BsY,GAAM,CAACrY,EAAIsY,IAAa,EAAIvY,GAC5BmY,GAAM,GAAKA,GAAM,IACjBW,EAAQ1G,GAAG,EAAI+F,GAEfG,GAAM,GAAKA,GAAM,IACjBQ,EAAQ1G,GAAG,EAAIkG,EAE/B,CACA,CACI,OAAOlG,CACX,CACO,SAAS2G,GAAe7M,EAAIC,EAAIF,EAAI4L,EAAIzL,EAAGhL,EAAK,CACnD,IAAI4X,GAAO7M,EAAKD,GAAME,EAAIF,EACtB+M,GAAOhN,EAAKE,GAAMC,EAAID,EACtB+M,GAAOrB,EAAK5L,GAAMG,EAAIH,EACtBkN,GAAQF,EAAMD,GAAO5M,EAAI4M,EACzBI,GAAQF,EAAMD,GAAO7M,EAAI6M,EACzBI,GAASD,EAAOD,GAAQ/M,EAAI+M,EAChC/X,EAAI,CAAC,EAAI8K,EACT9K,EAAI,CAAC,EAAI4X,EACT5X,EAAI,CAAC,EAAI+X,EACT/X,EAAI,CAAC,EAAIiY,EACTjY,EAAI,CAAC,EAAIiY,EACTjY,EAAI,CAAC,EAAIgY,EACThY,EAAI,CAAC,EAAI8X,EACT9X,EAAI,CAAC,EAAIyW,CACb,CACO,SAASyB,GAAkBC,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAI5Y,EAAGC,EAAGG,EAAK,CACzE,IAAIgL,EACAyN,EAAW,KACXjY,EAAI,IACJkY,EACAC,EACA7L,EACAC,EACJmJ,GAAI,CAAC,EAAItW,EACTsW,GAAI,CAAC,EAAIrW,EACT,QAAS+Y,EAAK,EAAGA,EAAK,EAAGA,GAAM,IAC3BxC,GAAI,CAAC,EAAII,GAAQ2B,EAAInI,EAAIqI,EAAIE,EAAIK,CAAE,EACnCxC,GAAI,CAAC,EAAII,GAAQ4B,EAAInI,EAAIqI,EAAIE,EAAII,CAAE,EACnC9L,EAAK+L,GAAa3C,GAAKE,EAAG,EACtBtJ,EAAKtM,IACLwK,EAAI4N,EACJpY,EAAIsM,GAGZtM,EAAI,IACJ,QAASlJ,EAAI,EAAGA,EAAI,IACZ,EAAAmhB,EAAW1C,IADKze,IAIpBohB,EAAO1N,EAAIyN,EACXE,EAAO3N,EAAIyN,EACXrC,GAAI,CAAC,EAAII,GAAQ2B,EAAInI,EAAIqI,EAAIE,EAAIG,CAAI,EACrCtC,GAAI,CAAC,EAAII,GAAQ4B,EAAInI,EAAIqI,EAAIE,EAAIE,CAAI,EACrC5L,EAAK+L,GAAazC,GAAKF,EAAG,EACtBwC,GAAQ,GAAK5L,EAAKtM,GAClBwK,EAAI0N,EACJlY,EAAIsM,IAGJuJ,GAAI,CAAC,EAAIG,GAAQ2B,EAAInI,EAAIqI,EAAIE,EAAII,CAAI,EACrCtC,GAAI,CAAC,EAAIG,GAAQ4B,EAAInI,EAAIqI,EAAIE,EAAIG,CAAI,EACrC5L,EAAK8L,GAAaxC,GAAKH,EAAG,EACtByC,GAAQ,GAAK5L,EAAKvM,GAClBwK,EAAI2N,EACJnY,EAAIuM,GAGJ0L,GAAY,IAQxB,OAAO5C,GAASrV,CAAC,CACrB,CACO,SAASsY,GAAYX,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAIO,EAAW,CAKnE,QAJIC,EAAKb,EACLc,EAAKb,EACL5X,EAAI,EACJ0Y,EAAO,EAAIH,EACNzhB,EAAI,EAAGA,GAAKyhB,EAAWzhB,IAAK,CACjC,IAAI0T,EAAI1T,EAAI4hB,EACRtZ,EAAI4W,GAAQ2B,EAAInI,EAAIqI,EAAIE,EAAIvN,CAAC,EAC7BnL,EAAI2W,GAAQ4B,EAAInI,EAAIqI,EAAIE,EAAIxN,CAAC,EAC7B1J,EAAK1B,EAAIoZ,EACTzX,EAAK1B,EAAIoZ,EACbzY,GAAK,KAAK,KAAKc,EAAKA,EAAKC,EAAKA,CAAE,EAChCyX,EAAKpZ,EACLqZ,EAAKpZ,CACb,CACI,OAAOW,CACX,CACO,SAAS2Y,GAAYrO,EAAIC,EAAIF,EAAIG,EAAG,CACvC,IAAIC,EAAO,EAAID,EACf,OAAOC,GAAQA,EAAOH,EAAK,EAAIE,EAAID,GAAMC,EAAIA,EAAIH,CACrD,CACO,SAASuO,GAAsBtO,EAAIC,EAAIF,EAAIG,EAAG,CACjD,MAAO,KAAM,EAAIA,IAAMD,EAAKD,GAAME,GAAKH,EAAKE,GAChD,CACO,SAASsO,GAAgBvO,EAAIC,EAAIF,EAAIlS,EAAKic,EAAO,CACpD,IAAI,EAAI9J,EAAK,EAAIC,EAAKF,EAClBhM,EAAI,GAAKkM,EAAKD,GACd3E,EAAI2E,EAAKnS,EACTqY,EAAI,EACR,GAAIsF,GAAa,CAAC,GACd,GAAIC,GAAgB1X,CAAC,EAAG,CACpB,IAAIkY,EAAK,CAAC5Q,EAAItH,EACVkY,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,EAE7B,MAES,CACD,IAAIC,EAAOnY,EAAIA,EAAI,EAAI,EAAIsH,EAC3B,GAAImQ,GAAaU,CAAI,EAAG,CACpB,IAAID,EAAK,CAAClY,GAAK,EAAI,GACfkY,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,EAE7B,SACiBC,EAAO,EAAG,CACf,IAAIG,EAAWtB,GAASmB,CAAI,EACxBD,GAAM,CAAClY,EAAIsY,IAAa,EAAI,GAC5BD,GAAM,CAACrY,EAAIsY,IAAa,EAAI,GAC5BJ,GAAM,GAAKA,GAAM,IACjBnC,EAAM5D,GAAG,EAAI+F,GAEbG,GAAM,GAAKA,GAAM,IACjBtC,EAAM5D,GAAG,EAAIkG,EAE7B,CACA,CACI,OAAOlG,CACX,CACO,SAASsI,GAAkBxO,EAAIC,EAAIF,EAAI,CAC1C,IAAI0O,EAAUzO,EAAKD,EAAK,EAAIE,EAC5B,OAAIwO,IAAY,EACL,IAGCzO,EAAKC,GAAMwO,CAE3B,CACO,SAASC,GAAmB1O,EAAIC,EAAIF,EAAIG,EAAGhL,EAAK,CACnD,IAAI4X,GAAO7M,EAAKD,GAAME,EAAIF,EACtB+M,GAAOhN,EAAKE,GAAMC,EAAID,EACtBgN,GAAQF,EAAMD,GAAO5M,EAAI4M,EAC7B5X,EAAI,CAAC,EAAI8K,EACT9K,EAAI,CAAC,EAAI4X,EACT5X,EAAI,CAAC,EAAI+X,EACT/X,EAAI,CAAC,EAAI+X,EACT/X,EAAI,CAAC,EAAI6X,EACT7X,EAAI,CAAC,EAAI6K,CACb,CACO,SAAS4O,GAAsBtB,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAI1Y,EAAGC,EAAGG,EAAK,CACrE,IAAIgL,EACAyN,EAAW,KACXjY,EAAI,IACR0V,GAAI,CAAC,EAAItW,EACTsW,GAAI,CAAC,EAAIrW,EACT,QAAS+Y,EAAK,EAAGA,EAAK,EAAGA,GAAM,IAAM,CACjCxC,GAAI,CAAC,EAAI+C,GAAYhB,EAAInI,EAAIqI,EAAIO,CAAE,EACnCxC,GAAI,CAAC,EAAI+C,GAAYf,EAAInI,EAAIqI,EAAIM,CAAE,EACnC,IAAI9L,EAAK+L,GAAa3C,GAAKE,EAAG,EAC1BtJ,EAAKtM,IACLwK,EAAI4N,EACJpY,EAAIsM,EAEhB,CACItM,EAAI,IACJ,QAASlJ,EAAI,EAAGA,EAAI,IACZ,EAAAmhB,EAAW1C,IADKze,IAAK,CAIzB,IAAIohB,EAAO1N,EAAIyN,EACXE,EAAO3N,EAAIyN,EACfrC,GAAI,CAAC,EAAI+C,GAAYhB,EAAInI,EAAIqI,EAAIK,CAAI,EACrCtC,GAAI,CAAC,EAAI+C,GAAYf,EAAInI,EAAIqI,EAAII,CAAI,EACrC,IAAI5L,EAAK+L,GAAazC,GAAKF,EAAG,EAC9B,GAAIwC,GAAQ,GAAK5L,EAAKtM,EAClBwK,EAAI0N,EACJlY,EAAIsM,MAEH,CACDuJ,GAAI,CAAC,EAAI8C,GAAYhB,EAAInI,EAAIqI,EAAIM,CAAI,EACrCtC,GAAI,CAAC,EAAI8C,GAAYf,EAAInI,EAAIqI,EAAIK,CAAI,EACrC,IAAI5L,EAAK8L,GAAaxC,GAAKH,EAAG,EAC1ByC,GAAQ,GAAK5L,EAAKvM,GAClBwK,EAAI2N,EACJnY,EAAIuM,GAGJ0L,GAAY,EAE5B,CACA,CAKI,OAAO5C,GAASrV,CAAC,CACrB,CACO,SAASkZ,GAAgBvB,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIS,EAAW,CAK/D,QAJIC,EAAKb,EACLc,EAAKb,EACL5X,EAAI,EACJ0Y,EAAO,EAAIH,EACNzhB,EAAI,EAAGA,GAAKyhB,EAAWzhB,IAAK,CACjC,IAAI0T,EAAI1T,EAAI4hB,EACRtZ,EAAIuZ,GAAYhB,EAAInI,EAAIqI,EAAIrN,CAAC,EAC7BnL,EAAIsZ,GAAYf,EAAInI,EAAIqI,EAAItN,CAAC,EAC7B1J,EAAK1B,EAAIoZ,EACTzX,EAAK1B,EAAIoZ,EACbzY,GAAK,KAAK,KAAKc,EAAKA,EAAKC,EAAKA,CAAE,EAChCyX,EAAKpZ,EACLqZ,EAAKpZ,CACb,CACI,OAAOW,CACX,CCtVA,IAAImZ,GAAS,gCACN,SAASC,GAAsBC,EAAgB,CAClD,IAAIC,EAAQD,GAAkBF,GAAO,KAAKE,CAAc,EACxD,GAAIC,EAAO,CACP,IAAIC,EAASD,EAAM,CAAC,EAAE,MAAM,GAAG,EAC3BE,EAAM,CAACnc,GAAKkc,EAAO,CAAC,CAAC,EACrBE,EAAM,CAACpc,GAAKkc,EAAO,CAAC,CAAC,EACrBG,EAAM,CAACrc,GAAKkc,EAAO,CAAC,CAAC,EACrBI,EAAM,CAACtc,GAAKkc,EAAO,CAAC,CAAC,EACzB,GAAI,MAAMC,EAAMC,EAAMC,EAAMC,CAAG,EAC3B,OAEJ,IAAIC,EAAU,CAAE,EAChB,OAAO,SAAUxP,EAAG,CAChB,OAAOA,GAAK,EACN,EAAIA,GAAK,EACT,EACA+L,GAAY,EAAGqD,EAAKE,EAAK,EAAGtP,EAAGwP,CAAO,GAAK5D,GAAQ,EAAGyD,EAAKE,EAAK,EAAGC,EAAQ,CAAC,CAAC,CACtF,CACT,CACA,CCnBA,IAAIC,GAAQ,UAAY,CACpB,SAASA,EAAKC,EAAM,CAChB,KAAK,QAAU,GACf,KAAK,WAAa,EAClB,KAAK,YAAc,EACnB,KAAK,QAAU,GACf,KAAK,MAAQA,EAAK,MAAQ,IAC1B,KAAK,OAASA,EAAK,OAAS,EAC5B,KAAK,KAAOA,EAAK,MAAQ,GACzB,KAAK,QAAUA,EAAK,SAAW7a,GAC/B,KAAK,UAAY6a,EAAK,WAAa7a,GACnC,KAAK,UAAY6a,EAAK,WAAa7a,GACnC6a,EAAK,QAAU,KAAK,UAAUA,EAAK,MAAM,CACjD,CACI,OAAAD,EAAK,UAAU,KAAO,SAAUE,EAAYC,EAAW,CAKnD,GAJK,KAAK,UACN,KAAK,WAAaD,EAAa,KAAK,OACpC,KAAK,QAAU,IAEf,KAAK,QAAS,CACd,KAAK,aAAeC,EACpB,MACZ,CACQ,IAAIC,EAAO,KAAK,MACZC,EAAcH,EAAa,KAAK,WAAa,KAAK,YAClDI,EAAUD,EAAcD,EACxBE,EAAU,IACVA,EAAU,GAEdA,EAAU,KAAK,IAAIA,EAAS,CAAC,EAC7B,IAAIC,EAAa,KAAK,WAClBC,EAAWD,EAAaA,EAAWD,CAAO,EAAIA,EAElD,GADA,KAAK,QAAQE,CAAQ,EACjBF,IAAY,EACZ,GAAI,KAAK,KAAM,CACX,IAAIG,EAAYJ,EAAcD,EAC9B,KAAK,WAAaF,EAAaO,EAC/B,KAAK,YAAc,EACnB,KAAK,UAAW,CAChC,KAEgB,OAAO,GAGf,MAAO,EACV,EACDT,EAAK,UAAU,MAAQ,UAAY,CAC/B,KAAK,QAAU,EAClB,EACDA,EAAK,UAAU,OAAS,UAAY,CAChC,KAAK,QAAU,EAClB,EACDA,EAAK,UAAU,UAAY,SAAUU,EAAQ,CACzC,KAAK,OAASA,EACd,KAAK,WAAate,EAAWse,CAAM,EAC7BA,EACApF,GAAYoF,CAAM,GAAKnB,GAAsBmB,CAAM,CAC5D,EACMV,CACX,IC9DIW,GAAS,UAAY,CACrB,SAASA,EAAMriB,EAAK,CAChB,KAAK,MAAQA,CACrB,CACI,OAAOqiB,CACX,IAEIC,GAAc,UAAY,CAC1B,SAASA,GAAa,CAClB,KAAK,KAAO,CACpB,CACI,OAAAA,EAAW,UAAU,OAAS,SAAUtiB,EAAK,CACzC,IAAIuiB,EAAQ,IAAIF,GAAMriB,CAAG,EACzB,YAAK,YAAYuiB,CAAK,EACfA,CACV,EACDD,EAAW,UAAU,YAAc,SAAUC,EAAO,CAC3C,KAAK,MAIN,KAAK,KAAK,KAAOA,EACjBA,EAAM,KAAO,KAAK,KAClBA,EAAM,KAAO,KACb,KAAK,KAAOA,GANZ,KAAK,KAAO,KAAK,KAAOA,EAQ5B,KAAK,MACR,EACDD,EAAW,UAAU,OAAS,SAAUC,EAAO,CAC3C,IAAIxC,EAAOwC,EAAM,KACbvC,EAAOuC,EAAM,KACbxC,EACAA,EAAK,KAAOC,EAGZ,KAAK,KAAOA,EAEZA,EACAA,EAAK,KAAOD,EAGZ,KAAK,KAAOA,EAEhBwC,EAAM,KAAOA,EAAM,KAAO,KAC1B,KAAK,MACR,EACDD,EAAW,UAAU,IAAM,UAAY,CACnC,OAAO,KAAK,IACf,EACDA,EAAW,UAAU,MAAQ,UAAY,CACrC,KAAK,KAAO,KAAK,KAAO,KACxB,KAAK,KAAO,CACf,EACMA,CACX,IAEIE,GAAO,UAAY,CACnB,SAASA,EAAIC,EAAS,CAClB,KAAK,MAAQ,IAAIH,GACjB,KAAK,SAAW,GAChB,KAAK,KAAO,CAAE,EACd,KAAK,SAAWG,CACxB,CACI,OAAAD,EAAI,UAAU,IAAM,SAAUhhB,EAAKgB,EAAO,CACtC,IAAImU,EAAO,KAAK,MACZjY,EAAM,KAAK,KACXgkB,EAAU,KACd,GAAIhkB,EAAI8C,CAAG,GAAK,KAAM,CAClB,IAAIH,EAAMsV,EAAK,IAAK,EAChB4L,EAAQ,KAAK,kBACjB,GAAIlhB,GAAO,KAAK,UAAYA,EAAM,EAAG,CACjC,IAAIshB,EAAiBhM,EAAK,KAC1BA,EAAK,OAAOgM,CAAc,EAC1B,OAAOjkB,EAAIikB,EAAe,GAAG,EAC7BD,EAAUC,EAAe,MACzB,KAAK,kBAAoBA,CACzC,CACgBJ,EACAA,EAAM,MAAQ/f,EAGd+f,EAAQ,IAAIF,GAAM7f,CAAK,EAE3B+f,EAAM,IAAM/gB,EACZmV,EAAK,YAAY4L,CAAK,EACtB7jB,EAAI8C,CAAG,EAAI+gB,CACvB,CACQ,OAAOG,CACV,EACDF,EAAI,UAAU,IAAM,SAAUhhB,EAAK,CAC/B,IAAI+gB,EAAQ,KAAK,KAAK/gB,CAAG,EACrBmV,EAAO,KAAK,MAChB,GAAI4L,GAAS,KACT,OAAIA,IAAU5L,EAAK,OACfA,EAAK,OAAO4L,CAAK,EACjB5L,EAAK,YAAY4L,CAAK,GAEnBA,EAAM,KAEpB,EACDC,EAAI,UAAU,MAAQ,UAAY,CAC9B,KAAK,MAAM,MAAO,EAClB,KAAK,KAAO,CAAE,CACjB,EACDA,EAAI,UAAU,IAAM,UAAY,CAC5B,OAAO,KAAK,MAAM,IAAK,CAC1B,EACMA,CACX,IC1GII,GAAiB,CACjB,YAAe,CAAC,EAAG,EAAG,EAAG,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAC3D,aAAgB,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,KAAQ,CAAC,EAAG,IAAK,IAAK,CAAC,EAC3D,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EAC5D,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,OAAU,CAAC,IAAK,IAAK,IAAK,CAAC,EACxD,MAAS,CAAC,EAAG,EAAG,EAAG,CAAC,EAAG,eAAkB,CAAC,IAAK,IAAK,IAAK,CAAC,EAC1D,KAAQ,CAAC,EAAG,EAAG,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,GAAI,IAAK,CAAC,EACtD,MAAS,CAAC,IAAK,GAAI,GAAI,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EACzD,UAAa,CAAC,GAAI,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,EAAG,CAAC,EAC7D,UAAa,CAAC,IAAK,IAAK,GAAI,CAAC,EAAG,MAAS,CAAC,IAAK,IAAK,GAAI,CAAC,EACzD,eAAkB,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EACnE,QAAW,CAAC,IAAK,GAAI,GAAI,CAAC,EAAG,KAAQ,CAAC,EAAG,IAAK,IAAK,CAAC,EACpD,SAAY,CAAC,EAAG,EAAG,IAAK,CAAC,EAAG,SAAY,CAAC,EAAG,IAAK,IAAK,CAAC,EACvD,cAAiB,CAAC,IAAK,IAAK,GAAI,CAAC,EAAG,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EACjE,UAAa,CAAC,EAAG,IAAK,EAAG,CAAC,EAAG,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EAC1D,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,YAAe,CAAC,IAAK,EAAG,IAAK,CAAC,EAC/D,eAAkB,CAAC,GAAI,IAAK,GAAI,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,EAAG,CAAC,EACjE,WAAc,CAAC,IAAK,GAAI,IAAK,CAAC,EAAG,QAAW,CAAC,IAAK,EAAG,EAAG,CAAC,EACzD,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,aAAgB,CAAC,IAAK,IAAK,IAAK,CAAC,EACnE,cAAiB,CAAC,GAAI,GAAI,IAAK,CAAC,EAAG,cAAiB,CAAC,GAAI,GAAI,GAAI,CAAC,EAClE,cAAiB,CAAC,GAAI,GAAI,GAAI,CAAC,EAAG,cAAiB,CAAC,EAAG,IAAK,IAAK,CAAC,EAClE,WAAc,CAAC,IAAK,EAAG,IAAK,CAAC,EAAG,SAAY,CAAC,IAAK,GAAI,IAAK,CAAC,EAC5D,YAAe,CAAC,EAAG,IAAK,IAAK,CAAC,EAAG,QAAW,CAAC,IAAK,IAAK,IAAK,CAAC,EAC7D,QAAW,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,GAAI,IAAK,IAAK,CAAC,EAC7D,UAAa,CAAC,IAAK,GAAI,GAAI,CAAC,EAAG,YAAe,CAAC,IAAK,IAAK,IAAK,CAAC,EAC/D,YAAe,CAAC,GAAI,IAAK,GAAI,CAAC,EAAG,QAAW,CAAC,IAAK,EAAG,IAAK,CAAC,EAC3D,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAChE,KAAQ,CAAC,IAAK,IAAK,EAAG,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,GAAI,CAAC,EACvD,KAAQ,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,MAAS,CAAC,EAAG,IAAK,EAAG,CAAC,EAClD,YAAe,CAAC,IAAK,IAAK,GAAI,CAAC,EAAG,KAAQ,CAAC,IAAK,IAAK,IAAK,CAAC,EAC3D,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,QAAW,CAAC,IAAK,IAAK,IAAK,CAAC,EAC5D,UAAa,CAAC,IAAK,GAAI,GAAI,CAAC,EAAG,OAAU,CAAC,GAAI,EAAG,IAAK,CAAC,EACvD,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EACvD,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,cAAiB,CAAC,IAAK,IAAK,IAAK,CAAC,EAClE,UAAa,CAAC,IAAK,IAAK,EAAG,CAAC,EAAG,aAAgB,CAAC,IAAK,IAAK,IAAK,CAAC,EAChE,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAChE,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,qBAAwB,CAAC,IAAK,IAAK,IAAK,CAAC,EAC1E,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAChE,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAC/D,YAAe,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,cAAiB,CAAC,GAAI,IAAK,IAAK,CAAC,EACpE,aAAgB,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,eAAkB,CAAC,IAAK,IAAK,IAAK,CAAC,EACvE,eAAkB,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,eAAkB,CAAC,IAAK,IAAK,IAAK,CAAC,EACzE,YAAe,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,KAAQ,CAAC,EAAG,IAAK,EAAG,CAAC,EACxD,UAAa,CAAC,GAAI,IAAK,GAAI,CAAC,EAAG,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EACzD,QAAW,CAAC,IAAK,EAAG,IAAK,CAAC,EAAG,OAAU,CAAC,IAAK,EAAG,EAAG,CAAC,EACpD,iBAAoB,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,EAAG,EAAG,IAAK,CAAC,EACnE,aAAgB,CAAC,IAAK,GAAI,IAAK,CAAC,EAAG,aAAgB,CAAC,IAAK,IAAK,IAAK,CAAC,EACpE,eAAkB,CAAC,GAAI,IAAK,IAAK,CAAC,EAAG,gBAAmB,CAAC,IAAK,IAAK,IAAK,CAAC,EACzE,kBAAqB,CAAC,EAAG,IAAK,IAAK,CAAC,EAAG,gBAAmB,CAAC,GAAI,IAAK,IAAK,CAAC,EAC1E,gBAAmB,CAAC,IAAK,GAAI,IAAK,CAAC,EAAG,aAAgB,CAAC,GAAI,GAAI,IAAK,CAAC,EACrE,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAC/D,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,YAAe,CAAC,IAAK,IAAK,IAAK,CAAC,EAChE,KAAQ,CAAC,EAAG,EAAG,IAAK,CAAC,EAAG,QAAW,CAAC,IAAK,IAAK,IAAK,CAAC,EACpD,MAAS,CAAC,IAAK,IAAK,EAAG,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,GAAI,CAAC,EACxD,OAAU,CAAC,IAAK,IAAK,EAAG,CAAC,EAAG,UAAa,CAAC,IAAK,GAAI,EAAG,CAAC,EACvD,OAAU,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,cAAiB,CAAC,IAAK,IAAK,IAAK,CAAC,EAChE,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,cAAiB,CAAC,IAAK,IAAK,IAAK,CAAC,EACnE,cAAiB,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EACpE,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,KAAQ,CAAC,IAAK,IAAK,GAAI,CAAC,EACzD,KAAQ,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,KAAQ,CAAC,IAAK,IAAK,IAAK,CAAC,EACrD,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,OAAU,CAAC,IAAK,EAAG,IAAK,CAAC,EAC3D,IAAO,CAAC,IAAK,EAAG,EAAG,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EACrD,UAAa,CAAC,GAAI,IAAK,IAAK,CAAC,EAAG,YAAe,CAAC,IAAK,GAAI,GAAI,CAAC,EAC9D,OAAU,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,GAAI,CAAC,EAC5D,SAAY,CAAC,GAAI,IAAK,GAAI,CAAC,EAAG,SAAY,CAAC,IAAK,IAAK,IAAK,CAAC,EAC3D,OAAU,CAAC,IAAK,GAAI,GAAI,CAAC,EAAG,OAAU,CAAC,IAAK,IAAK,IAAK,CAAC,EACvD,QAAW,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,UAAa,CAAC,IAAK,GAAI,IAAK,CAAC,EAC5D,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,UAAa,CAAC,IAAK,IAAK,IAAK,CAAC,EAC/D,KAAQ,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,YAAe,CAAC,EAAG,IAAK,IAAK,CAAC,EAC1D,UAAa,CAAC,GAAI,IAAK,IAAK,CAAC,EAAG,IAAO,CAAC,IAAK,IAAK,IAAK,CAAC,EACxD,KAAQ,CAAC,EAAG,IAAK,IAAK,CAAC,EAAG,QAAW,CAAC,IAAK,IAAK,IAAK,CAAC,EACtD,OAAU,CAAC,IAAK,GAAI,GAAI,CAAC,EAAG,UAAa,CAAC,GAAI,IAAK,IAAK,CAAC,EACzD,OAAU,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EACxD,MAAS,CAAC,IAAK,IAAK,IAAK,CAAC,EAAG,WAAc,CAAC,IAAK,IAAK,IAAK,CAAC,EAC5D,OAAU,CAAC,IAAK,IAAK,EAAG,CAAC,EAAG,YAAe,CAAC,IAAK,IAAK,GAAI,CAAC,CAC/D,EACA,SAASC,GAAalkB,EAAG,CACrB,OAAAA,EAAI,KAAK,MAAMA,CAAC,EACTA,EAAI,EAAI,EAAIA,EAAI,IAAM,IAAMA,CACvC,CAKA,SAASmkB,GAAcC,EAAG,CACtB,OAAOA,EAAI,EAAI,EAAIA,EAAI,EAAI,EAAIA,CACnC,CACA,SAASC,GAAYhjB,EAAK,CACtB,IAAImF,EAAMnF,EACV,OAAImF,EAAI,QAAUA,EAAI,OAAOA,EAAI,OAAS,CAAC,IAAM,IACtC0d,GAAa,WAAW1d,CAAG,EAAI,IAAM,GAAG,EAE5C0d,GAAa,SAAS1d,EAAK,EAAE,CAAC,CACzC,CACA,SAAS8d,GAAcjjB,EAAK,CACxB,IAAImF,EAAMnF,EACV,OAAImF,EAAI,QAAUA,EAAI,OAAOA,EAAI,OAAS,CAAC,IAAM,IACtC2d,GAAc,WAAW3d,CAAG,EAAI,GAAG,EAEvC2d,GAAc,WAAW3d,CAAG,CAAC,CACxC,CACA,SAAS+d,GAAY5S,EAAIC,EAAI4S,EAAG,CAO5B,OANIA,EAAI,EACJA,GAAK,EAEAA,EAAI,IACTA,GAAK,GAELA,EAAI,EAAI,EACD7S,GAAMC,EAAKD,GAAM6S,EAAI,EAE5BA,EAAI,EAAI,EACD5S,EAEP4S,EAAI,EAAI,EACD7S,GAAMC,EAAKD,IAAO,EAAI,EAAI6S,GAAK,EAEnC7S,CACX,CACA,SAAS8S,GAAWnd,EAAGC,EAAG+L,EAAG,CACzB,OAAOhM,GAAKC,EAAID,GAAKgM,CACzB,CACA,SAASoR,GAAQhc,EAAK8P,EAAGmM,EAAGpd,EAAGD,EAAG,CAC9B,OAAAoB,EAAI,CAAC,EAAI8P,EACT9P,EAAI,CAAC,EAAIic,EACTjc,EAAI,CAAC,EAAInB,EACTmB,EAAI,CAAC,EAAIpB,EACFoB,CACX,CACA,SAASkc,GAASlc,EAAKpB,EAAG,CACtB,OAAAoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACZoB,EAAI,CAAC,EAAIpB,EAAE,CAAC,EACLoB,CACX,CACA,IAAImc,GAAa,IAAIhB,GAAI,EAAE,EACvBiB,GAAiB,KACrB,SAASC,GAAWC,EAAUC,EAAS,CAC/BH,IACAF,GAASE,GAAgBG,CAAO,EAEpCH,GAAiBD,GAAW,IAAIG,EAAUF,IAAmBG,EAAQ,MAAK,CAAG,CACjF,CACO,SAASC,GAAMF,EAAUC,EAAS,CACrC,GAAKD,EAGL,CAAAC,EAAUA,GAAW,CAAE,EACvB,IAAIE,EAASN,GAAW,IAAIG,CAAQ,EACpC,GAAIG,EACA,OAAOP,GAASK,EAASE,CAAM,EAEnCH,EAAWA,EAAW,GACtB,IAAIxe,EAAMwe,EAAS,QAAQ,KAAM,EAAE,EAAE,YAAa,EAClD,GAAIxe,KAAOyd,GACP,OAAAW,GAASK,EAAShB,GAAezd,CAAG,CAAC,EACrCue,GAAWC,EAAUC,CAAO,EACrBA,EAEX,IAAIG,EAAS5e,EAAI,OACjB,GAAIA,EAAI,OAAO,CAAC,IAAM,IAAK,CACvB,GAAI4e,IAAW,GAAKA,IAAW,EAAG,CAC9B,IAAIC,EAAK,SAAS7e,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EACrC,GAAI,EAAE6e,GAAM,GAAKA,GAAM,MAAQ,CAC3BX,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAC3B,MAChB,CACY,OAAAP,GAAQO,GAAWI,EAAK,OAAU,GAAOA,EAAK,OAAU,EAAKA,EAAK,KAAUA,EAAK,MAAS,EAAKA,EAAK,IAASA,EAAK,KAAQ,EAAID,IAAW,EAAI,SAAS5e,EAAI,MAAM,CAAC,EAAG,EAAE,EAAI,GAAM,CAAC,EACjLue,GAAWC,EAAUC,CAAO,EACrBA,CACnB,SACiBG,IAAW,GAAKA,IAAW,EAAG,CACnC,IAAIC,EAAK,SAAS7e,EAAI,MAAM,EAAG,CAAC,EAAG,EAAE,EACrC,GAAI,EAAE6e,GAAM,GAAKA,GAAM,UAAW,CAC9BX,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAC3B,MAChB,CACY,OAAAP,GAAQO,GAAUI,EAAK,WAAa,IAAKA,EAAK,QAAW,EAAGA,EAAK,IAAMD,IAAW,EAAI,SAAS5e,EAAI,MAAM,CAAC,EAAG,EAAE,EAAI,IAAO,CAAC,EAC3Hue,GAAWC,EAAUC,CAAO,EACrBA,CACnB,CACQ,MACR,CACI,IAAIK,EAAK9e,EAAI,QAAQ,GAAG,EACpB+e,EAAK/e,EAAI,QAAQ,GAAG,EACxB,GAAI8e,IAAO,IAAMC,EAAK,IAAMH,EAAQ,CAChC,IAAII,EAAQhf,EAAI,OAAO,EAAG8e,CAAE,EACxBG,EAASjf,EAAI,OAAO8e,EAAK,EAAGC,GAAMD,EAAK,EAAE,EAAE,MAAM,GAAG,EACpDI,EAAQ,EACZ,OAAQF,EAAK,CACT,IAAK,OACD,GAAIC,EAAO,SAAW,EAClB,OAAOA,EAAO,SAAW,EACnBf,GAAQO,EAAS,CAACQ,EAAO,CAAC,EAAG,CAACA,EAAO,CAAC,EAAG,CAACA,EAAO,CAAC,EAAG,CAAC,EACtDf,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAErCS,EAAQpB,GAAcmB,EAAO,KAAK,EACtC,IAAK,MACD,GAAIA,EAAO,QAAU,EACjB,OAAAf,GAAQO,EAASZ,GAAYoB,EAAO,CAAC,CAAC,EAAGpB,GAAYoB,EAAO,CAAC,CAAC,EAAGpB,GAAYoB,EAAO,CAAC,CAAC,EAAGA,EAAO,SAAW,EAAIC,EAAQpB,GAAcmB,EAAO,CAAC,CAAC,CAAC,EAC/IV,GAAWC,EAAUC,CAAO,EACrBA,EAGPP,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAC3B,OAER,IAAK,OACD,GAAIQ,EAAO,SAAW,EAAG,CACrBf,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAC3B,MACpB,CACgB,OAAAQ,EAAO,CAAC,EAAInB,GAAcmB,EAAO,CAAC,CAAC,EACnCE,GAAUF,EAAQR,CAAO,EACzBF,GAAWC,EAAUC,CAAO,EACrBA,EACX,IAAK,MACD,GAAIQ,EAAO,SAAW,EAAG,CACrBf,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAC3B,MACpB,CACgB,OAAAU,GAAUF,EAAQR,CAAO,EACzBF,GAAWC,EAAUC,CAAO,EACrBA,EACX,QACI,MAChB,CACA,CACIP,GAAQO,EAAS,EAAG,EAAG,EAAG,CAAC,EAE/B,CACA,SAASU,GAAUC,EAAMC,EAAM,CAC3B,IAAIrB,GAAO,WAAWoB,EAAK,CAAC,CAAC,EAAI,IAAO,KAAO,IAAO,IAClD5c,EAAIsb,GAAcsB,EAAK,CAAC,CAAC,EACzB5a,EAAIsZ,GAAcsB,EAAK,CAAC,CAAC,EACzBhU,EAAK5G,GAAK,GAAMA,GAAKhC,EAAI,GAAKgC,EAAIhC,EAAIgC,EAAIhC,EAC1C2I,EAAK3G,EAAI,EAAI4G,EACjB,OAAAiU,EAAOA,GAAQ,CAAE,EACjBnB,GAAQmB,EAAM3B,GAAaK,GAAY5S,EAAIC,EAAI4S,EAAI,EAAI,CAAC,EAAI,GAAG,EAAGN,GAAaK,GAAY5S,EAAIC,EAAI4S,CAAC,EAAI,GAAG,EAAGN,GAAaK,GAAY5S,EAAIC,EAAI4S,EAAI,EAAI,CAAC,EAAI,GAAG,EAAG,CAAC,EAC/JoB,EAAK,SAAW,IAChBC,EAAK,CAAC,EAAID,EAAK,CAAC,GAEbC,CACX,CAkDO,SAASC,GAAKC,EAAOC,EAAO,CAC/B,IAAIC,EAAWf,GAAMa,CAAK,EAC1B,GAAIE,EAAU,CACV,QAAS,EAAI,EAAG,EAAI,EAAG,IAEfA,EAAS,CAAC,EAAIA,EAAS,CAAC,GAAK,EAAID,GAAS,EAK1CC,EAAS,CAAC,EAAI,IACdA,EAAS,CAAC,EAAI,IAETA,EAAS,CAAC,EAAI,IACnBA,EAAS,CAAC,EAAI,GAGtB,OAAOC,GAAUD,EAAUA,EAAS,SAAW,EAAI,OAAS,KAAK,CACzE,CACA,CA0BO,SAASE,GAAKC,EAAiBC,EAAQC,EAAY,CACtD,GAAI,IAAED,GAAUA,EAAO,SAChB,EAAED,GAAmB,GAAKA,GAAmB,IAGpD,KAAIviB,EAAQuiB,GAAmBC,EAAO,OAAS,GAC3CE,EAAY,KAAK,MAAM1iB,CAAK,EAC5B2iB,EAAa,KAAK,KAAK3iB,CAAK,EAC5B4iB,EAAYvB,GAAMmB,EAAOE,CAAS,CAAC,EACnCG,EAAaxB,GAAMmB,EAAOG,CAAU,CAAC,EACrCG,EAAK9iB,EAAQ0iB,EACbR,EAAQG,GAAU,CAClBhC,GAAaO,GAAWgC,EAAU,CAAC,EAAGC,EAAW,CAAC,EAAGC,CAAE,CAAC,EACxDzC,GAAaO,GAAWgC,EAAU,CAAC,EAAGC,EAAW,CAAC,EAAGC,CAAE,CAAC,EACxDzC,GAAaO,GAAWgC,EAAU,CAAC,EAAGC,EAAW,CAAC,EAAGC,CAAE,CAAC,EACxDxC,GAAcM,GAAWgC,EAAU,CAAC,EAAGC,EAAW,CAAC,EAAGC,CAAE,CAAC,CAC5D,EAAE,MAAM,EACT,OAAOL,EACD,CACE,MAAOP,EACP,UAAWQ,EACX,WAAYC,EACZ,MAAO3iB,CACnB,EACUkiB,EACV,CAmBO,SAASG,GAAUU,EAAUphB,EAAM,CACtC,GAAI,GAACohB,GAAY,CAACA,EAAS,QAG3B,KAAI5B,EAAW4B,EAAS,CAAC,EAAI,IAAMA,EAAS,CAAC,EAAI,IAAMA,EAAS,CAAC,EACjE,OAAIphB,IAAS,QAAUA,IAAS,QAAUA,IAAS,UAC/Cwf,GAAY,IAAM4B,EAAS,CAAC,GAEzBphB,EAAO,IAAMwf,EAAW,IACnC,CACO,SAAS6B,GAAId,EAAOe,EAAe,CACtC,IAAIpiB,EAAMwgB,GAAMa,CAAK,EACrB,OAAOrhB,GACA,KAAQA,EAAI,CAAC,EAAI,KAAQA,EAAI,CAAC,EAAI,KAAQA,EAAI,CAAC,GAAKA,EAAI,CAAC,EAAI,KACzD,EAAIA,EAAI,CAAC,GAAKoiB,EACnB,CACV,CAQA,IAAIC,GAAmB,IAAIlD,GAAI,GAAG,EAC3B,SAASmD,GAAUjB,EAAO,CAC7B,GAAI1gB,EAAS0gB,CAAK,EAAG,CACjB,IAAIkB,EAAcF,GAAiB,IAAIhB,CAAK,EAC5C,OAAKkB,IACDA,EAAcnB,GAAKC,EAAO,GAAI,EAC9BgB,GAAiB,IAAIhB,EAAOkB,CAAW,GAEpCA,CACf,SACavhB,GAAiBqgB,CAAK,EAAG,CAC9B,IAAImB,EAAM5jB,EAAO,CAAE,EAAEyiB,CAAK,EAC1B,OAAAmB,EAAI,WAAannB,EAAIgmB,EAAM,WAAY,SAAUzV,EAAM,CAAE,MAAQ,CAC7D,OAAQA,EAAK,OACb,MAAOwV,GAAKxV,EAAK,MAAO,GAAI,CAC/B,EAAI,EACE4W,CACf,CACI,OAAOnB,CACX,CC9UO,SAASoB,GAAiB9lB,EAAK,CAClC,OAAOA,EAAI,OAAS,QACxB,CACO,SAAS+lB,GAAiB/lB,EAAK,CAClC,OAAOA,EAAI,OAAS,QACxB,EAoC2B,UAAY,CACnC,OAAIvC,EAAI,iBAAmBqG,EAAW,OAAO,IAAI,EACtC,SAAUqB,EAAK,CAClB,OAAO,OAAO,KAAK,SAAS,mBAAmBA,CAAG,CAAC,CAAC,CACxD,EAEA,OAAO,OAAW,IACX,SAAUA,EAAK,CAClB,OAAO,OAAO,KAAKA,CAAG,EAAE,SAAS,QAAQ,CAC7C,EAEG,SAAUA,EAAK,CAIX,OAAA,IACX,CACJ,GAAG,ECjJH,IAAI6gB,GAAa,MAAM,UAAU,MACjC,SAASC,GAAkB9T,EAAIC,EAAI4P,EAAS,CACxC,OAAQ5P,EAAKD,GAAM6P,EAAU7P,CACjC,CACA,SAAS+T,GAAmB7e,EAAK8K,EAAIC,EAAI4P,EAAS,CAE9C,QADI3gB,EAAM8Q,EAAG,OACJxT,EAAI,EAAGA,EAAI0C,EAAK1C,IACrB0I,EAAI1I,CAAC,EAAIsnB,GAAkB9T,EAAGxT,CAAC,EAAGyT,EAAGzT,CAAC,EAAGqjB,CAAO,EAEpD,OAAO3a,CACX,CACA,SAAS8e,GAAmB9e,EAAK8K,EAAIC,EAAI4P,EAAS,CAG9C,QAFI3gB,EAAM8Q,EAAG,OACTiU,EAAO/kB,GAAO8Q,EAAG,CAAC,EAAE,OACfxT,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACrB0I,EAAI1I,CAAC,IACN0I,EAAI1I,CAAC,EAAI,CAAE,GAEf,QAASkM,EAAI,EAAGA,EAAIub,EAAMvb,IACtBxD,EAAI1I,CAAC,EAAEkM,CAAC,EAAIob,GAAkB9T,EAAGxT,CAAC,EAAEkM,CAAC,EAAGuH,EAAGzT,CAAC,EAAEkM,CAAC,EAAGmX,CAAO,CAErE,CACI,OAAO3a,CACX,CACA,SAASgf,GAAWhf,EAAK8K,EAAIC,EAAIxD,EAAM,CAEnC,QADIvN,EAAM8Q,EAAG,OACJxT,EAAI,EAAGA,EAAI0C,EAAK1C,IACrB0I,EAAI1I,CAAC,EAAIwT,EAAGxT,CAAC,EAAIyT,EAAGzT,CAAC,EAAIiQ,EAE7B,OAAOvH,CACX,CACA,SAASif,GAAWjf,EAAK8K,EAAIC,EAAIxD,EAAM,CAGnC,QAFIvN,EAAM8Q,EAAG,OACTiU,EAAO/kB,GAAO8Q,EAAG,CAAC,EAAE,OACfxT,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACrB0I,EAAI1I,CAAC,IACN0I,EAAI1I,CAAC,EAAI,CAAE,GAEf,QAASkM,EAAI,EAAGA,EAAIub,EAAMvb,IACtBxD,EAAI1I,CAAC,EAAEkM,CAAC,EAAIsH,EAAGxT,CAAC,EAAEkM,CAAC,EAAIuH,EAAGzT,CAAC,EAAEkM,CAAC,EAAI+D,CAE9C,CACI,OAAOvH,CACX,CACA,SAASkf,GAAeC,EAAMC,EAAM,CAMhC,QALIC,EAAOF,EAAK,OACZG,EAAOF,EAAK,OACZG,EAAaF,EAAOC,EAAOF,EAAOD,EAClCK,EAAa,KAAK,IAAIH,EAAMC,CAAI,EAChCG,EAAOF,EAAWC,EAAa,CAAC,GAAK,CAAE,MAAO,CAAC,EAAG,EAAG,EAAG,CAAC,EAAG,OAAQ,CAAG,EAClEloB,EAAIkoB,EAAYloB,EAAI,KAAK,IAAI+nB,EAAMC,CAAI,EAAGhoB,IAC/CioB,EAAW,KAAK,CACZ,OAAQE,EAAK,OACb,MAAOA,EAAK,MAAM,MAAK,CACnC,CAAS,CAET,CACA,SAASC,GAAUP,EAAMC,EAAMO,EAAQ,CACnC,IAAIC,EAAOT,EACPU,EAAOT,EACX,GAAI,GAACQ,EAAK,MAAQ,CAACC,EAAK,MAGxB,KAAIC,EAAUF,EAAK,OACfG,EAAUF,EAAK,OACnB,GAAIC,IAAYC,EAAS,CACrB,IAAIC,EAAmBF,EAAUC,EACjC,GAAIC,EACAJ,EAAK,OAASG,MAGd,SAASzoB,EAAIwoB,EAASxoB,EAAIyoB,EAASzoB,IAC/BsoB,EAAK,KAAKD,IAAW,EAAIE,EAAKvoB,CAAC,EAAIqnB,GAAW,KAAKkB,EAAKvoB,CAAC,CAAC,CAAC,CAG3E,CAEI,QADIynB,EAAOa,EAAK,CAAC,GAAKA,EAAK,CAAC,EAAE,OACrBtoB,EAAI,EAAGA,EAAIsoB,EAAK,OAAQtoB,IAC7B,GAAIqoB,IAAW,EACP,MAAMC,EAAKtoB,CAAC,CAAC,IACbsoB,EAAKtoB,CAAC,EAAIuoB,EAAKvoB,CAAC,OAIpB,SAASkM,EAAI,EAAGA,EAAIub,EAAMvb,IAClB,MAAMoc,EAAKtoB,CAAC,EAAEkM,CAAC,CAAC,IAChBoc,EAAKtoB,CAAC,EAAEkM,CAAC,EAAIqc,EAAKvoB,CAAC,EAAEkM,CAAC,GAK1C,CACO,SAASyc,GAAW9kB,EAAO,CAC9B,GAAIU,GAAYV,CAAK,EAAG,CACpB,IAAInB,EAAMmB,EAAM,OAChB,GAAIU,GAAYV,EAAM,CAAC,CAAC,EAAG,CAEvB,QADIqjB,EAAM,CAAE,EACH,EAAI,EAAG,EAAIxkB,EAAK,IACrBwkB,EAAI,KAAKG,GAAW,KAAKxjB,EAAM,CAAC,CAAC,CAAC,EAEtC,OAAOqjB,CACnB,CACQ,OAAOG,GAAW,KAAKxjB,CAAK,CACpC,CACI,OAAOA,CACX,CACA,SAAS+kB,GAAY/C,EAAM,CACvB,OAAAA,EAAK,CAAC,EAAI,KAAK,MAAMA,EAAK,CAAC,CAAC,GAAK,EACjCA,EAAK,CAAC,EAAI,KAAK,MAAMA,EAAK,CAAC,CAAC,GAAK,EACjCA,EAAK,CAAC,EAAI,KAAK,MAAMA,EAAK,CAAC,CAAC,GAAK,EACjCA,EAAK,CAAC,EAAIA,EAAK,CAAC,GAAK,KAAO,EAAIA,EAAK,CAAC,EAC/B,QAAUA,EAAK,KAAK,GAAG,EAAI,GACtC,CACA,SAASgD,GAAchlB,EAAO,CAC1B,OAAOU,GAAYV,GAASA,EAAM,CAAC,CAAC,EAAI,EAAI,CAChD,CACA,IAAIilB,GAAoB,EACpBC,GAAsB,EACtBC,GAAsB,EACtBC,GAAmB,EACnBC,GAA6B,EAC7BC,GAA6B,EAC7BC,GAAoB,EACxB,SAASC,GAAoBC,EAAS,CAClC,OAAOA,IAAYJ,IAA8BI,IAAYH,EACjE,CACA,SAASI,GAAiBD,EAAS,CAC/B,OAAOA,IAAYP,IAAuBO,IAAYN,EAC1D,CACA,IAAIQ,GAAU,CAAC,EAAG,EAAG,EAAG,CAAC,EACrBC,GAAS,UAAY,CACrB,SAASA,EAAMC,EAAU,CACrB,KAAK,UAAY,CAAE,EACnB,KAAK,SAAW,GAChB,KAAK,SAAW,GAChB,KAAK,WAAa,GAClB,KAAK,QAAU,EACf,KAAK,SAAW,EAChB,KAAK,SAAWA,CACxB,CACI,OAAAD,EAAM,UAAU,WAAa,UAAY,CACrC,OAAO,KAAK,SACf,EACDA,EAAM,UAAU,YAAc,UAAY,CACtC,KAAK,UAAY,GACb,KAAK,gBACL,KAAK,eAAe,YAAa,CAExC,EACDA,EAAM,UAAU,aAAe,UAAY,CACvC,OAAO,KAAK,UAAU,QAAU,CACnC,EACDA,EAAM,UAAU,iBAAmB,UAAY,CAC3C,OAAO,KAAK,cACf,EACDA,EAAM,UAAU,YAAc,SAAUE,EAAMC,EAAUnG,EAAQ,CAC5D,KAAK,WAAa,GAClB,IAAIoG,EAAY,KAAK,UACjBnnB,EAAMmnB,EAAU,OAChBC,EAAW,GACXR,EAAUF,GACVvlB,EAAQ+lB,EACZ,GAAIrlB,GAAYqlB,CAAQ,EAAG,CACvB,IAAIG,EAAWlB,GAAce,CAAQ,EACrCN,EAAUS,GACNA,IAAa,GAAK,CAACxkB,GAASqkB,EAAS,CAAC,CAAC,GACpCG,IAAa,GAAK,CAACxkB,GAASqkB,EAAS,CAAC,EAAE,CAAC,CAAC,KAC7CE,EAAW,GAE3B,SAEgBvkB,GAASqkB,CAAQ,GAAK,CAAChkB,GAAMgkB,CAAQ,EACrCN,EAAUR,WAELzjB,EAASukB,CAAQ,EACtB,GAAI,CAAC,MAAM,CAACA,CAAQ,EAChBN,EAAUR,OAET,CACD,IAAIkB,EAAaC,GAAYL,CAAQ,EACjCI,IACAnmB,EAAQmmB,EACRV,EAAUL,GAElC,SAEqBvjB,GAAiBkkB,CAAQ,EAAG,CACjC,IAAIM,EAAiB5mB,EAAO,CAAE,EAAEO,CAAK,EACrCqmB,EAAe,WAAanqB,EAAI6pB,EAAS,WAAY,SAAUO,EAAW,CAAE,MAAQ,CAChF,OAAQA,EAAU,OAClB,MAAOF,GAAYE,EAAU,KAAK,CACrC,EAAI,EACDhD,GAAiByC,CAAQ,EACzBN,EAAUJ,GAEL9B,GAAiBwC,CAAQ,IAC9BN,EAAUH,IAEdtlB,EAAQqmB,CACxB,CAEYxnB,IAAQ,EACR,KAAK,QAAU4mB,GAEVA,IAAY,KAAK,SAAWA,IAAYF,MAC7CU,EAAW,IAEf,KAAK,SAAW,KAAK,UAAYA,EACjC,IAAIM,EAAK,CACL,KAAMT,EACN,MAAO9lB,EACP,SAAU+lB,EACV,QAAS,CACZ,EACD,OAAInG,IACA2G,EAAG,OAAS3G,EACZ2G,EAAG,WAAajlB,EAAWse,CAAM,EAC3BA,EACApF,GAAYoF,CAAM,GAAKnB,GAAsBmB,CAAM,GAE7DoG,EAAU,KAAKO,CAAE,EACVA,CACV,EACDX,EAAM,UAAU,QAAU,SAAUY,EAASC,EAAe,CACxD,IAAIC,EAAM,KAAK,UACX,KAAK,YACLA,EAAI,KAAK,SAAUjjB,EAAGC,EAAG,CACrB,OAAOD,EAAE,KAAOC,EAAE,IAClC,CAAa,EAQL,QANI+hB,EAAU,KAAK,QACfkB,EAASD,EAAI,OACbE,EAASF,EAAIC,EAAS,CAAC,EACvBE,EAAa,KAAK,SAClBzjB,EAAQsiB,GAAiBD,CAAO,EAChCqB,EAAatB,GAAoBC,CAAO,EACnCtpB,EAAI,EAAGA,EAAIwqB,EAAQxqB,IAAK,CAC7B,IAAIoqB,EAAKG,EAAIvqB,CAAC,EACV6D,EAAQumB,EAAG,MACXQ,EAAYH,EAAO,MACvBL,EAAG,QAAUA,EAAG,KAAOC,EAClBK,IACGzjB,GAASjH,IAAMwqB,EAAS,EACxBpC,GAAUvkB,EAAO+mB,EAAWtB,CAAO,EAE9BqB,GACL/C,GAAe/jB,EAAM,WAAY+mB,EAAU,UAAU,EAGzE,CACQ,GAAI,CAACF,GACEpB,IAAYH,IACZmB,GACA,KAAK,aAAY,GACjBA,EAAc,aAAY,GAC1BhB,IAAYgB,EAAc,SAC1B,CAACA,EAAc,UAAW,CAC7B,KAAK,eAAiBA,EAEtB,QADIO,EAAaN,EAAI,CAAC,EAAE,MACfvqB,EAAI,EAAGA,EAAIwqB,EAAQxqB,IACpBspB,IAAYR,GACZyB,EAAIvqB,CAAC,EAAE,cAAgBuqB,EAAIvqB,CAAC,EAAE,MAAQ6qB,EAEjCvB,IAAYL,GACjBsB,EAAIvqB,CAAC,EAAE,cACH0nB,GAAW,CAAE,EAAE6C,EAAIvqB,CAAC,EAAE,MAAO6qB,EAAY,EAAE,EAE1CtB,GAAiBD,CAAO,IAC7BiB,EAAIvqB,CAAC,EAAE,cAAgBspB,IAAYP,GAC7BrB,GAAW,CAAE,EAAE6C,EAAIvqB,CAAC,EAAE,MAAO6qB,EAAY,EAAE,EAC3ClD,GAAW,CAAE,EAAE4C,EAAIvqB,CAAC,EAAE,MAAO6qB,EAAY,EAAE,EAGrE,CACK,EACDpB,EAAM,UAAU,KAAO,SAAU1mB,EAAQsgB,EAAS,CAC9C,GAAI,MAAK,UAGT,CAAI,KAAK,gBAAkB,KAAK,eAAe,YAC3C,KAAK,eAAiB,MAE1B,IAAIyH,EAAa,KAAK,gBAAkB,KACpCC,EAAWD,EAAa,gBAAkB,QAC1CxB,EAAU,KAAK,QACfO,EAAY,KAAK,UACjBmB,EAASnB,EAAU,OACnBH,EAAW,KAAK,SAChBuB,EAAe3B,IAAYL,GAC3BiC,EACAC,EAAY,KAAK,QACjBvX,EAAU,KAAK,IACfwX,EACAC,EACJ,GAAIL,IAAW,EACXI,EAAQC,EAAYxB,EAAU,CAAC,MAE9B,CACD,GAAIxG,EAAU,EACV6H,EAAW,UAEN7H,EAAU,KAAK,SAAU,CAC9B,IAAInJ,EAAQtG,EAAQuX,EAAY,EAAGH,EAAS,CAAC,EAC7C,IAAKE,EAAWhR,EAAOgR,GAAY,GAC3B,EAAArB,EAAUqB,CAAQ,EAAE,SAAW7H,GADD6H,IAClC,CAIJA,EAAWtX,EAAQsX,EAAUF,EAAS,CAAC,CACvD,KACiB,CACD,IAAKE,EAAWC,EAAWD,EAAWF,GAC9B,EAAAnB,EAAUqB,CAAQ,EAAE,QAAU7H,GADQ6H,IAC1C,CAIJA,EAAWtX,EAAQsX,EAAW,EAAGF,EAAS,CAAC,CAC3D,CACYK,EAAYxB,EAAUqB,EAAW,CAAC,EAClCE,EAAQvB,EAAUqB,CAAQ,CACtC,CACQ,GAAME,GAASC,EAGf,MAAK,QAAUH,EACf,KAAK,SAAW7H,EAChB,IAAIlC,EAAYkK,EAAU,QAAUD,EAAM,QACtCE,EAAInK,IAAa,EAAI,EAAIvN,GAASyP,EAAU+H,EAAM,SAAWjK,EAAU,CAAC,EACxEkK,EAAU,aACVC,EAAID,EAAU,WAAWC,CAAC,GAE9B,IAAIC,EAAYT,EAAa,KAAK,eAC3BG,EAAezB,GAAUzmB,EAAO2mB,CAAQ,EAI/C,IAHKH,GAAiBD,CAAO,GAAK2B,IAAiB,CAACM,IAChDA,EAAY,KAAK,eAAiB,CAAE,GAEpC,KAAK,SACLxoB,EAAO2mB,CAAQ,EAAI4B,EAAI,EAAIF,EAAM,SAAWC,EAAU,iBAEjD9B,GAAiBD,CAAO,EAC7BA,IAAYP,GACNxB,GAAmBgE,EAAWH,EAAML,CAAQ,EAAGM,EAAUN,CAAQ,EAAGO,CAAC,EACrE9D,GAAmB+D,EAAWH,EAAML,CAAQ,EAAGM,EAAUN,CAAQ,EAAGO,CAAC,UAEtEjC,GAAoBC,CAAO,EAAG,CACnC,IAAIjoB,EAAM+pB,EAAML,CAAQ,EACpBS,EAAYH,EAAUN,CAAQ,EAC9BU,EAAqBnC,IAAYJ,GACrCnmB,EAAO2mB,CAAQ,EAAI,CACf,KAAM+B,EAAqB,SAAW,SACtC,EAAGnE,GAAkBjmB,EAAI,EAAGmqB,EAAU,EAAGF,CAAC,EAC1C,EAAGhE,GAAkBjmB,EAAI,EAAGmqB,EAAU,EAAGF,CAAC,EAC1C,WAAYvrB,EAAIsB,EAAI,WAAY,SAAU8oB,EAAWjM,EAAK,CACtD,IAAIwN,EAAgBF,EAAU,WAAWtN,CAAG,EAC5C,MAAO,CACH,OAAQoJ,GAAkB6C,EAAU,OAAQuB,EAAc,OAAQJ,CAAC,EACnE,MAAO1C,GAAYrB,GAAmB,CAAE,EAAE4C,EAAU,MAAOuB,EAAc,MAAOJ,CAAC,CAAC,CACrF,CACrB,CAAiB,EACD,OAAQE,EAAU,MACrB,EACGC,GACA1oB,EAAO2mB,CAAQ,EAAE,GAAKpC,GAAkBjmB,EAAI,GAAImqB,EAAU,GAAIF,CAAC,EAC/DvoB,EAAO2mB,CAAQ,EAAE,GAAKpC,GAAkBjmB,EAAI,GAAImqB,EAAU,GAAIF,CAAC,GAG/DvoB,EAAO2mB,CAAQ,EAAE,EAAIpC,GAAkBjmB,EAAI,EAAGmqB,EAAU,EAAGF,CAAC,CAE5E,SACiBL,EACL1D,GAAmBgE,EAAWH,EAAML,CAAQ,EAAGM,EAAUN,CAAQ,EAAGO,CAAC,EAChER,IACD/nB,EAAO2mB,CAAQ,EAAId,GAAY2C,CAAS,OAG3C,CACD,IAAI1nB,EAAQyjB,GAAkB8D,EAAML,CAAQ,EAAGM,EAAUN,CAAQ,EAAGO,CAAC,EACjER,EACA,KAAK,eAAiBjnB,EAGtBd,EAAO2mB,CAAQ,EAAI7lB,CAEnC,CACYinB,GACA,KAAK,aAAa/nB,CAAM,GAE/B,EACD0mB,EAAM,UAAU,aAAe,SAAU1mB,EAAQ,CAC7C,IAAIumB,EAAU,KAAK,QACfI,EAAW,KAAK,SAChBiC,EAAgB,KAAK,eACrBrC,IAAYR,GACZ/lB,EAAO2mB,CAAQ,EAAI3mB,EAAO2mB,CAAQ,EAAIiC,EAEjCrC,IAAYL,IACjBgB,GAAYlnB,EAAO2mB,CAAQ,EAAGF,EAAO,EACrC9B,GAAW8B,GAASA,GAASmC,EAAe,CAAC,EAC7C5oB,EAAO2mB,CAAQ,EAAId,GAAYY,EAAO,GAEjCF,IAAYP,GACjBrB,GAAW3kB,EAAO2mB,CAAQ,EAAG3mB,EAAO2mB,CAAQ,EAAGiC,EAAe,CAAC,EAE1DrC,IAAYN,IACjBrB,GAAW5kB,EAAO2mB,CAAQ,EAAG3mB,EAAO2mB,CAAQ,EAAGiC,EAAe,CAAC,CAEtE,EACMlC,CACX,IACImC,GAAY,UAAY,CACxB,SAASA,EAAS7oB,EAAQ8oB,EAAMC,EAAwBC,EAAY,CAQhE,GAPA,KAAK,QAAU,CAAE,EACjB,KAAK,WAAa,CAAE,EACpB,KAAK,SAAW,EAChB,KAAK,SAAW,EAChB,KAAK,MAAQ,KACb,KAAK,QAAUhpB,EACf,KAAK,MAAQ8oB,EACTA,GAAQE,EAAY,CACpB7pB,GAAS,kDAAmD,EAC5D,MACZ,CACQ,KAAK,mBAAqB6pB,EAC1B,KAAK,eAAiBD,CAC9B,CACI,OAAAF,EAAS,UAAU,WAAa,UAAY,CACxC,OAAO,KAAK,QACf,EACDA,EAAS,UAAU,SAAW,UAAY,CACtC,OAAO,KAAK,MACf,EACDA,EAAS,UAAU,QAAU,UAAY,CACrC,OAAO,KAAK,KACf,EACDA,EAAS,UAAU,UAAY,UAAY,CACvC,OAAO,KAAK,OACf,EACDA,EAAS,UAAU,aAAe,SAAU7oB,EAAQ,CAChD,KAAK,QAAUA,CAClB,EACD6oB,EAAS,UAAU,KAAO,SAAUjC,EAAMqC,EAAOvI,EAAQ,CACrD,OAAO,KAAK,aAAakG,EAAMqC,EAAOtoB,GAAKsoB,CAAK,EAAGvI,CAAM,CAC5D,EACDmI,EAAS,UAAU,aAAe,SAAUjC,EAAMqC,EAAOC,EAAWxI,EAAQ,CAExE,QADIvS,EAAS,KAAK,QACTlR,EAAI,EAAGA,EAAIisB,EAAU,OAAQjsB,IAAK,CACvC,IAAI0pB,EAAWuC,EAAUjsB,CAAC,EACtBksB,EAAQhb,EAAOwY,CAAQ,EAC3B,GAAI,CAACwC,EAAO,CACRA,EAAQhb,EAAOwY,CAAQ,EAAI,IAAID,GAAMC,CAAQ,EAC7C,IAAIyC,EAAe,OACf7B,EAAgB,KAAK,kBAAkBZ,CAAQ,EACnD,GAAIY,EAAe,CACf,IAAI8B,EAAkB9B,EAAc,UAChC+B,EAAcD,EAAgBA,EAAgB,OAAS,CAAC,EAC5DD,EAAeE,GAAeA,EAAY,MACtC/B,EAAc,UAAYrB,IAAoBkD,IAC9CA,EAAevD,GAAYuD,CAAY,EAE/D,MAEoBA,EAAe,KAAK,QAAQzC,CAAQ,EAExC,GAAIyC,GAAgB,KAChB,SAEAxC,EAAO,GACPuC,EAAM,YAAY,EAAGvD,GAAWwD,CAAY,EAAG1I,CAAM,EAEzD,KAAK,WAAW,KAAKiG,CAAQ,CAC7C,CACYwC,EAAM,YAAYvC,EAAMhB,GAAWqD,EAAMtC,CAAQ,CAAC,EAAGjG,CAAM,CACvE,CACQ,YAAK,SAAW,KAAK,IAAI,KAAK,SAAUkG,CAAI,EACrC,IACV,EACDiC,EAAS,UAAU,MAAQ,UAAY,CACnC,KAAK,MAAM,MAAO,EAClB,KAAK,QAAU,EAClB,EACDA,EAAS,UAAU,OAAS,UAAY,CACpC,KAAK,MAAM,OAAQ,EACnB,KAAK,QAAU,EAClB,EACDA,EAAS,UAAU,SAAW,UAAY,CACtC,MAAO,CAAC,CAAC,KAAK,OACjB,EACDA,EAAS,UAAU,SAAW,SAAUU,EAAU,CAC9C,YAAK,SAAWA,EAChB,KAAK,OAAS,GACP,IACV,EACDV,EAAS,UAAU,cAAgB,UAAY,CAC3C,KAAK,mBAAoB,EACzB,KAAK,MAAQ,KACb,IAAIW,EAAW,KAAK,SACpB,GAAIA,EAEA,QADI7pB,EAAM6pB,EAAS,OACV,EAAI,EAAG,EAAI7pB,EAAK,IACrB6pB,EAAS,CAAC,EAAE,KAAK,IAAI,CAGhC,EACDX,EAAS,UAAU,iBAAmB,UAAY,CAC9C,KAAK,mBAAoB,EACzB,IAAIY,EAAY,KAAK,UACjBC,EAAc,KAAK,YAKvB,GAJID,GACAA,EAAU,WAAW,KAAK,KAAK,EAEnC,KAAK,MAAQ,KACTC,EACA,QAAS,EAAI,EAAG,EAAIA,EAAY,OAAQ,IACpCA,EAAY,CAAC,EAAE,KAAK,IAAI,CAGnC,EACDb,EAAS,UAAU,mBAAqB,UAAY,CAGhD,QAFI1a,EAAS,KAAK,QACdwb,EAAa,KAAK,WACb,EAAI,EAAG,EAAIA,EAAW,OAAQ,IACnCxb,EAAOwb,EAAW,CAAC,CAAC,EAAE,YAAa,CAE1C,EACDd,EAAS,UAAU,kBAAoB,SAAUe,EAAW,CACxD,IAAIrC,EACAsC,EAAoB,KAAK,mBAC7B,GAAIA,EACA,QAAS5sB,EAAI,EAAGA,EAAI4sB,EAAkB,OAAQ5sB,IAAK,CAC/C,IAAIksB,EAAQU,EAAkB5sB,CAAC,EAAE,SAAS2sB,CAAS,EAC/CT,IACA5B,EAAgB4B,EAEpC,CAEQ,OAAO5B,CACV,EACDsB,EAAS,UAAU,MAAQ,SAAUnI,EAAQ,CACzC,GAAI,OAAK,SAAW,GAGpB,MAAK,SAAW,EAIhB,QAHIoJ,EAAO,KACP3b,EAAS,CAAE,EACXmZ,EAAU,KAAK,UAAY,EACtBrqB,EAAI,EAAGA,EAAI,KAAK,WAAW,OAAQA,IAAK,CAC7C,IAAI0pB,EAAW,KAAK,WAAW1pB,CAAC,EAC5BksB,EAAQ,KAAK,QAAQxC,CAAQ,EAC7BY,EAAgB,KAAK,kBAAkBZ,CAAQ,EAC/Ca,EAAM2B,EAAM,UACZlB,EAAST,EAAI,OAEjB,GADA2B,EAAM,QAAQ7B,EAASC,CAAa,EAChC4B,EAAM,eACN,GAAI,CAAC,KAAK,gBAAkBA,EAAM,SAAU,CACxC,IAAIzB,EAASF,EAAIS,EAAS,CAAC,EACvBP,IACAoC,EAAK,QAAQX,EAAM,QAAQ,EAAIzB,EAAO,UAE1CyB,EAAM,YAAa,CACvC,MAEoBhb,EAAO,KAAKgb,CAAK,CAGrC,CACQ,GAAIhb,EAAO,QAAU,KAAK,OAAQ,CAC9B,IAAI4b,EAAO,IAAI/J,GAAK,CAChB,KAAMsH,EACN,KAAM,KAAK,MACX,MAAO,KAAK,QAAU,EACtB,QAAS,SAAUhH,EAAS,CACxBwJ,EAAK,SAAW,EAChB,IAAID,EAAoBC,EAAK,mBAC7B,GAAID,EAAmB,CAEnB,QADIG,EAA2B,GACtB/sB,EAAI,EAAGA,EAAI4sB,EAAkB,OAAQ5sB,IAC1C,GAAI4sB,EAAkB5sB,CAAC,EAAE,MAAO,CAC5B+sB,EAA2B,GAC3B,KAChC,CAE6BA,IACDF,EAAK,mBAAqB,KAEtD,CACoB,QAAS7sB,EAAI,EAAGA,EAAIkR,EAAO,OAAQlR,IAC/BkR,EAAOlR,CAAC,EAAE,KAAK6sB,EAAK,QAASxJ,CAAO,EAExC,IAAI2J,EAAcH,EAAK,YACvB,GAAIG,EACA,QAAShtB,EAAI,EAAGA,EAAIgtB,EAAY,OAAQhtB,IACpCgtB,EAAYhtB,CAAC,EAAE6sB,EAAK,QAASxJ,CAAO,CAG/C,EACD,UAAW,UAAY,CACnBwJ,EAAK,cAAe,CACxC,CACA,CAAa,EACD,KAAK,MAAQC,EACT,KAAK,WACL,KAAK,UAAU,QAAQA,CAAI,EAE3BrJ,GACAqJ,EAAK,UAAUrJ,CAAM,CAErC,MAEY,KAAK,cAAe,EAExB,OAAO,KACV,EACDmI,EAAS,UAAU,KAAO,SAAUqB,EAAe,CAC/C,GAAK,KAAK,MAGV,KAAIH,EAAO,KAAK,MACZG,GACAH,EAAK,QAAQ,CAAC,EAElB,KAAK,iBAAkB,EAC1B,EACDlB,EAAS,UAAU,MAAQ,SAAUjC,EAAM,CACvC,YAAK,OAASA,EACP,IACV,EACDiC,EAAS,UAAU,OAAS,SAAUjnB,EAAI,CACtC,OAAIA,IACK,KAAK,cACN,KAAK,YAAc,CAAE,GAEzB,KAAK,YAAY,KAAKA,CAAE,GAErB,IACV,EACDinB,EAAS,UAAU,KAAO,SAAUjnB,EAAI,CACpC,OAAIA,IACK,KAAK,WACN,KAAK,SAAW,CAAE,GAEtB,KAAK,SAAS,KAAKA,CAAE,GAElB,IACV,EACDinB,EAAS,UAAU,QAAU,SAAUjnB,EAAI,CACvC,OAAIA,IACK,KAAK,cACN,KAAK,YAAc,CAAE,GAEzB,KAAK,YAAY,KAAKA,CAAE,GAErB,IACV,EACDinB,EAAS,UAAU,QAAU,UAAY,CACrC,OAAO,KAAK,KACf,EACDA,EAAS,UAAU,SAAW,SAAUlC,EAAU,CAC9C,OAAO,KAAK,QAAQA,CAAQ,CAC/B,EACDkC,EAAS,UAAU,UAAY,UAAY,CACvC,IAAIpV,EAAQ,KACZ,OAAOzW,EAAI,KAAK,WAAY,SAAU8C,EAAK,CAAE,OAAO2T,EAAM,QAAQ3T,CAAG,EAAI,CAC5E,EACD+oB,EAAS,UAAU,WAAa,SAAUK,EAAWgB,EAAe,CAChE,GAAI,CAAChB,EAAU,QAAU,CAAC,KAAK,MAC3B,MAAO,GAIX,QAFI/a,EAAS,KAAK,QACdwb,EAAa,KAAK,WACb1sB,EAAI,EAAGA,EAAIisB,EAAU,OAAQjsB,IAAK,CACvC,IAAIksB,EAAQhb,EAAO+a,EAAUjsB,CAAC,CAAC,EAC3BksB,GAAS,CAACA,EAAM,eACZe,EACAf,EAAM,KAAK,KAAK,QAAS,CAAC,EAErB,KAAK,WAAa,GACvBA,EAAM,KAAK,KAAK,QAAS,CAAC,EAE9BA,EAAM,YAAa,EAEnC,CAEQ,QADIgB,EAAa,GACRltB,EAAI,EAAGA,EAAI0sB,EAAW,OAAQ1sB,IACnC,GAAI,CAACkR,EAAOwb,EAAW1sB,CAAC,CAAC,EAAE,WAAU,EAAI,CACrCktB,EAAa,GACb,KAChB,CAEQ,OAAIA,GACA,KAAK,iBAAkB,EAEpBA,CACV,EACDtB,EAAS,UAAU,OAAS,SAAU7oB,EAAQoqB,EAAWC,EAAa,CAClE,GAAKrqB,EAGL,CAAAoqB,EAAYA,GAAa,KAAK,WAC9B,QAASntB,EAAI,EAAGA,EAAImtB,EAAU,OAAQntB,IAAK,CACvC,IAAI0pB,EAAWyD,EAAUntB,CAAC,EACtBksB,EAAQ,KAAK,QAAQxC,CAAQ,EACjC,GAAI,GAACwC,GAASA,EAAM,cAGpB,KAAI3B,EAAM2B,EAAM,UACZ9B,EAAKG,EAAI6C,EAAc,EAAI7C,EAAI,OAAS,CAAC,EACzCH,IACArnB,EAAO2mB,CAAQ,EAAIf,GAAWyB,EAAG,QAAQ,GAEzD,EACK,EACDwB,EAAS,UAAU,mBAAqB,SAAUyB,EAAYF,EAAW,CACrEA,EAAYA,GAAazpB,GAAK2pB,CAAU,EACxC,QAAS,EAAI,EAAG,EAAIF,EAAU,OAAQ,IAAK,CACvC,IAAIzD,EAAWyD,EAAU,CAAC,EACtBjB,EAAQ,KAAK,QAAQxC,CAAQ,EACjC,GAAKwC,EAGL,KAAI3B,EAAM2B,EAAM,UAChB,GAAI3B,EAAI,OAAS,EAAG,CAChB,IAAIE,EAASF,EAAI,IAAK,EACtB2B,EAAM,YAAYzB,EAAO,KAAM4C,EAAW3D,CAAQ,CAAC,EACnDwC,EAAM,QAAQ,KAAK,SAAUA,EAAM,iBAAgB,CAAE,CACrE,EACA,CACK,EACMN,CACX,IC3tBO,SAAS0B,IAAU,CACtB,OAAO,IAAI,KAAM,EAAC,QAAS,CAC/B,CACA,IAAIC,GAAa,SAAUjX,EAAQ,CAC/BC,EAAUgX,EAAWjX,CAAM,EAC3B,SAASiX,EAAUvK,EAAM,CACrB,IAAIxM,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAE,EAAM,SAAW,GACjBA,EAAM,MAAQ,EACdA,EAAM,YAAc,EACpBA,EAAM,YAAc,EACpBA,EAAM,QAAU,GAChBwM,EAAOA,GAAQ,CAAE,EACjBxM,EAAM,MAAQwM,EAAK,OAAS,CAAE,EACvBxM,CACf,CACI,OAAA+W,EAAU,UAAU,QAAU,SAAUT,EAAM,CACtCA,EAAK,WACL,KAAK,WAAWA,CAAI,EAEnB,KAAK,OAIN,KAAK,MAAM,KAAOA,EAClBA,EAAK,KAAO,KAAK,MACjBA,EAAK,KAAO,KACZ,KAAK,MAAQA,GANb,KAAK,MAAQ,KAAK,MAAQA,EAQ9BA,EAAK,UAAY,IACpB,EACDS,EAAU,UAAU,YAAc,SAAUC,EAAU,CAClDA,EAAS,UAAY,KACrB,IAAIV,EAAOU,EAAS,QAAS,EACzBV,GACA,KAAK,QAAQA,CAAI,CAExB,EACDS,EAAU,UAAU,WAAa,SAAUT,EAAM,CAC7C,GAAKA,EAAK,UAGV,KAAI1L,EAAO0L,EAAK,KACZzL,EAAOyL,EAAK,KACZ1L,EACAA,EAAK,KAAOC,EAGZ,KAAK,MAAQA,EAEbA,EACAA,EAAK,KAAOD,EAGZ,KAAK,MAAQA,EAEjB0L,EAAK,KAAOA,EAAK,KAAOA,EAAK,UAAY,KAC5C,EACDS,EAAU,UAAU,eAAiB,SAAUC,EAAU,CACrD,IAAIV,EAAOU,EAAS,QAAS,EACzBV,GACA,KAAK,WAAWA,CAAI,EAExBU,EAAS,UAAY,IACxB,EACDD,EAAU,UAAU,OAAS,SAAUE,EAA+B,CAIlE,QAHI9D,EAAO2D,KAAY,KAAK,YACxBtd,EAAQ2Z,EAAO,KAAK,MACpBmD,EAAO,KAAK,MACTA,GAAM,CACT,IAAIY,EAAWZ,EAAK,KAChBa,EAAWb,EAAK,KAAKnD,EAAM3Z,CAAK,EAChC2d,IACAb,EAAK,UAAW,EAChB,KAAK,WAAWA,CAAI,GACpBA,EAAOY,CAKvB,CACQ,KAAK,MAAQ/D,EACR8D,IACD,KAAK,QAAQ,QAASzd,CAAK,EAC3B,KAAK,MAAM,QAAU,KAAK,MAAM,OAAQ,EAE/C,EACDud,EAAU,UAAU,WAAa,UAAY,CACzC,IAAIV,EAAO,KACX,KAAK,SAAW,GAChB,SAASjL,GAAO,CACRiL,EAAK,WACLzO,GAAsBwD,CAAI,EAC1B,CAACiL,EAAK,SAAWA,EAAK,OAAQ,EAE9C,CACQzO,GAAsBwD,CAAI,CAC7B,EACD2L,EAAU,UAAU,MAAQ,UAAY,CAChC,KAAK,WAGT,KAAK,MAAQD,GAAS,EACtB,KAAK,YAAc,EACnB,KAAK,WAAY,EACpB,EACDC,EAAU,UAAU,KAAO,UAAY,CACnC,KAAK,SAAW,EACnB,EACDA,EAAU,UAAU,MAAQ,UAAY,CAC/B,KAAK,UACN,KAAK,YAAcD,GAAS,EAC5B,KAAK,QAAU,GAEtB,EACDC,EAAU,UAAU,OAAS,UAAY,CACjC,KAAK,UACL,KAAK,aAAeD,GAAS,EAAG,KAAK,YACrC,KAAK,QAAU,GAEtB,EACDC,EAAU,UAAU,MAAQ,UAAY,CAEpC,QADIT,EAAO,KAAK,MACTA,GAAM,CACT,IAAIY,EAAWZ,EAAK,KACpBA,EAAK,KAAOA,EAAK,KAAOA,EAAK,UAAY,KACzCA,EAAOY,CACnB,CACQ,KAAK,MAAQ,KAAK,MAAQ,IAC7B,EACDH,EAAU,UAAU,WAAa,UAAY,CACzC,OAAO,KAAK,OAAS,IACxB,EACDA,EAAU,UAAU,QAAU,SAAUxqB,EAAQ6qB,EAAS,CACrDA,EAAUA,GAAW,CAAE,EACvB,KAAK,MAAO,EACZ,IAAIJ,EAAW,IAAI5B,GAAS7oB,EAAQ6qB,EAAQ,IAAI,EAChD,YAAK,YAAYJ,CAAQ,EAClBA,CACV,EACMD,CACX,EAAEnjB,EAAQ,EC5INyjB,GAAoB,IACpBC,GAAuBhvB,EAAI,aAC3BivB,GAA4B,UAAY,CACxC,IAAIC,EAAoB,CACpB,QAAS,WAAY,aAAc,QAAS,WAC5C,UAAW,YAAa,YAAa,aACxC,EACGC,EAAoB,CACpB,aAAc,WAAY,WAC7B,EACGC,EAAsB,CACtB,YAAa,EAAG,UAAW,EAAG,YAAa,EAAG,WAAY,CAC7D,EACGC,EAAsBC,EAAWJ,EAAmB,SAAU7d,EAAM,CACpE,IAAIke,EAAKle,EAAK,QAAQ,QAAS,SAAS,EACxC,OAAO+d,EAAoB,eAAeG,CAAE,EAAIA,EAAKle,CAC7D,CAAK,EACD,MAAO,CACH,MAAO6d,EACP,MAAOC,EACP,QAASE,CACZ,CACL,EAAI,EACAG,GAA4B,CAC5B,MAAO,CAAC,YAAa,SAAS,EAC9B,QAAS,CAAC,cAAe,WAAW,CACxC,EACIC,GAAsB,GAC1B,SAASC,GAAmBlkB,EAAO,CAC/B,IAAImkB,EAAcnkB,EAAM,YACxB,OAAOmkB,IAAgB,OAASA,IAAgB,OACpD,CACA,SAASC,GAAcC,EAAO,CAC1BA,EAAM,SAAW,GACbA,EAAM,YAAc,OACpB,aAAaA,EAAM,UAAU,EAC7BA,EAAM,WAAa,MAEvBA,EAAM,WAAa,WAAW,UAAY,CACtCA,EAAM,SAAW,GACjBA,EAAM,WAAa,IACtB,EAAE,GAAG,CACV,CACA,SAASC,GAAUtkB,EAAO,CACtBA,IAAUA,EAAM,UAAY,GAChC,CACA,SAASukB,GAAqBC,EAAUxkB,EAAO,CAC3C,OAAOiF,GAAeuf,EAAS,IAAK,IAAIC,GAAgBD,EAAUxkB,CAAK,EAAG,EAAI,CAClF,CACA,SAAS0kB,GAAUF,EAAUzhB,EAAI,CAG7B,QAFI4hB,EAAQ5hB,EACR6hB,EAAU,GACPD,GAASA,EAAM,WAAa,GAC5B,EAAEC,EAAUD,EAAM,eACbA,IAAU5hB,GAAM4hB,IAAUH,EAAS,cAC3CG,EAAQA,EAAM,WAElB,OAAOC,CACX,CACA,IAAIH,GAAmB,UAAY,CAC/B,SAASA,EAAgBD,EAAUxkB,EAAO,CACtC,KAAK,gBAAkB6kB,GACvB,KAAK,yBAA2BA,GAChC,KAAK,eAAiBA,GACtB,KAAK,KAAO7kB,EAAM,KAClB,KAAK,OAAS,KAAK,cAAgBwkB,EAAS,IAC5C,KAAK,YAAcxkB,EAAM,YACzB,KAAK,QAAUA,EAAM,QACrB,KAAK,QAAUA,EAAM,OAC7B,CACI,OAAOykB,CACX,IACIK,GAAmB,CACnB,UAAW,SAAU9kB,EAAO,CACxBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,KAAK,oBAAsB,CAACA,EAAM,IAAKA,EAAM,GAAG,EAChD,KAAK,QAAQ,YAAaA,CAAK,CAClC,EACD,UAAW,SAAUA,EAAO,CACxBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,IAAI+kB,EAAY,KAAK,oBACjBA,IAAc/kB,EAAM,MAAQ+kB,EAAU,CAAC,GAAK/kB,EAAM,MAAQ+kB,EAAU,CAAC,IACrE,KAAK,uBAAuB,EAAI,EAEpC,KAAK,QAAQ,YAAa/kB,CAAK,CAClC,EACD,QAAS,SAAUA,EAAO,CACtBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,KAAK,uBAAuB,EAAK,EACjC,KAAK,QAAQ,UAAWA,CAAK,CAChC,EACD,SAAU,SAAUA,EAAO,CACvBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,IAAIglB,EAAUhlB,EAAM,WAAaA,EAAM,cAClC0kB,GAAU,KAAMM,CAAO,IACpB,KAAK,qBACLhlB,EAAM,eAAiB,gBAE3B,KAAK,QAAQ,WAAYA,CAAK,EAErC,EACD,MAAO,SAAUA,EAAO,CACpBikB,GAAsB,GACtBjkB,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,KAAK,QAAQ,aAAcA,CAAK,CACnC,EACD,WAAY,SAAUA,EAAO,CACrBikB,KAGJjkB,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,KAAK,QAAQ,aAAcA,CAAK,EACnC,EACD,WAAY,SAAUA,EAAO,CACzBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtCskB,GAAUtkB,CAAK,EACf,KAAK,kBAAoB,IAAI,KAC7B,KAAK,QAAQ,eAAeA,EAAO,OAAO,EAC1C8kB,GAAiB,UAAU,KAAK,KAAM9kB,CAAK,EAC3C8kB,GAAiB,UAAU,KAAK,KAAM9kB,CAAK,CAC9C,EACD,UAAW,SAAUA,EAAO,CACxBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtCskB,GAAUtkB,CAAK,EACf,KAAK,QAAQ,eAAeA,EAAO,QAAQ,EAC3C8kB,GAAiB,UAAU,KAAK,KAAM9kB,CAAK,CAC9C,EACD,SAAU,SAAUA,EAAO,CACvBA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtCskB,GAAUtkB,CAAK,EACf,KAAK,QAAQ,eAAeA,EAAO,KAAK,EACxC8kB,GAAiB,QAAQ,KAAK,KAAM9kB,CAAK,EACrC,CAAC,IAAI,KAAU,CAAC,KAAK,kBAAqBujB,IAC1CuB,GAAiB,MAAM,KAAK,KAAM9kB,CAAK,CAE9C,EACD,YAAa,SAAUA,EAAO,CAC1B8kB,GAAiB,UAAU,KAAK,KAAM9kB,CAAK,CAC9C,EACD,YAAa,SAAUA,EAAO,CACrBkkB,GAAmBlkB,CAAK,GACzB8kB,GAAiB,UAAU,KAAK,KAAM9kB,CAAK,CAElD,EACD,UAAW,SAAUA,EAAO,CACxB8kB,GAAiB,QAAQ,KAAK,KAAM9kB,CAAK,CAC5C,EACD,WAAY,SAAUA,EAAO,CACpBkkB,GAAmBlkB,CAAK,GACzB8kB,GAAiB,SAAS,KAAK,KAAM9kB,CAAK,CAEtD,CACA,EACAilB,EAAY,CAAC,QAAS,WAAY,aAAa,EAAG,SAAUpf,EAAM,CAC9Dif,GAAiBjf,CAAI,EAAI,SAAU7F,EAAO,CACtCA,EAAQiF,GAAe,KAAK,IAAKjF,CAAK,EACtC,KAAK,QAAQ6F,EAAM7F,CAAK,CAC3B,CACL,CAAC,EACD,IAAIklB,GAAoB,CACpB,YAAa,SAAUllB,EAAO,CACrBkkB,GAAmBlkB,CAAK,GACzBklB,GAAkB,UAAU,KAAK,KAAMllB,CAAK,CAEnD,EACD,UAAW,SAAUA,EAAO,CACxBklB,GAAkB,QAAQ,KAAK,KAAMllB,CAAK,CAC7C,EACD,UAAW,SAAUA,EAAO,CACxB,KAAK,QAAQ,YAAaA,CAAK,CAClC,EACD,QAAS,SAAUA,EAAO,CACtB,IAAImlB,EAA0B,KAAK,mBACnC,KAAK,uBAAuB,EAAK,EACjC,KAAK,QAAQ,UAAWnlB,CAAK,EACzBmlB,IACAnlB,EAAM,eAAiB,iBACvB,KAAK,QAAQ,WAAYA,CAAK,EAE1C,CACA,EACA,SAASolB,GAA4BZ,EAAUH,EAAO,CAClD,IAAIgB,EAAchB,EAAM,YACpB7vB,EAAI,uBACJywB,EAAYxB,GAAyB,QAAS,SAAU6B,EAAiB,CACrEC,GAA4BlB,EAAOiB,EAAiB,SAAUtlB,EAAO,CACjEqlB,EAAYC,CAAe,EAAE,KAAKd,EAAUxkB,CAAK,CACjE,CAAa,CACb,CAAS,GAGGxL,EAAI,sBACJywB,EAAYxB,GAAyB,MAAO,SAAU6B,EAAiB,CACnEC,GAA4BlB,EAAOiB,EAAiB,SAAUtlB,EAAO,CACjEqlB,EAAYC,CAAe,EAAE,KAAKd,EAAUxkB,CAAK,EACjDokB,GAAcC,CAAK,CACvC,CAAiB,CACjB,CAAa,EAELY,EAAYxB,GAAyB,MAAO,SAAU6B,EAAiB,CACnEC,GAA4BlB,EAAOiB,EAAiB,SAAUtlB,EAAO,CACjEA,EAAQgF,GAAehF,CAAK,EACvBqkB,EAAM,UACPgB,EAAYC,CAAe,EAAE,KAAKd,EAAUxkB,CAAK,CAErE,CAAa,CACb,CAAS,EAET,CACA,SAASwlB,GAA6BhB,EAAUH,EAAO,CAC/C7vB,EAAI,uBACJywB,EAAYjB,GAA0B,QAASyB,CAAK,EAE9CjxB,EAAI,sBACVywB,EAAYjB,GAA0B,MAAOyB,CAAK,EAEtD,SAASA,EAAMH,EAAiB,CAC5B,SAASI,EAAoB1lB,EAAO,CAChCA,EAAQgF,GAAehF,CAAK,EACvB0kB,GAAUF,EAAUxkB,EAAM,MAAM,IACjCA,EAAQukB,GAAqBC,EAAUxkB,CAAK,EAC5CqkB,EAAM,YAAYiB,CAAe,EAAE,KAAKd,EAAUxkB,CAAK,EAEvE,CACQulB,GAA4BlB,EAAOiB,EAAiBI,EAAqB,CAAE,QAAS,GAAM,CAClG,CACA,CACA,SAASH,GAA4BlB,EAAOiB,EAAiBK,EAAU7f,EAAK,CACxEue,EAAM,QAAQiB,CAAe,EAAIK,EACjCtB,EAAM,aAAaiB,CAAe,EAAIxf,EACtCF,GAAiBye,EAAM,UAAWiB,EAAiBK,EAAU7f,CAAG,CACpE,CACA,SAAS8f,GAAyBvB,EAAO,CACrC,IAAIwB,EAAUxB,EAAM,QACpB,QAASiB,KAAmBO,EACpBA,EAAQ,eAAeP,CAAe,GACtCvf,GAAoBse,EAAM,UAAWiB,EAAiBO,EAAQP,CAAe,EAAGjB,EAAM,aAAaiB,CAAe,CAAC,EAG3HjB,EAAM,QAAU,CAAE,CACtB,CACA,IAAIyB,GAAmB,UAAY,CAC/B,SAASA,EAAgBC,EAAWV,EAAa,CAC7C,KAAK,QAAU,CAAE,EACjB,KAAK,aAAe,CAAE,EACtB,KAAK,SAAW,GAChB,KAAK,UAAYU,EACjB,KAAK,YAAcV,CAC3B,CACI,OAAOS,CACX,IACIE,GAAmB,SAAUha,EAAQ,CACrCC,EAAU+Z,EAAiBha,CAAM,EACjC,SAASga,EAAgBvoB,EAAKiP,EAAa,CACvC,IAAIR,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAE,EAAM,mBAAqB,GAC3BA,EAAM,IAAMzO,EACZyO,EAAM,YAAcQ,EACpBR,EAAM,mBAAqB,IAAI4Z,GAAgBroB,EAAKqnB,EAAgB,EAChEtB,KACAtX,EAAM,oBAAsB,IAAI4Z,GAAgB,SAAUZ,EAAiB,GAE/EE,GAA4BlZ,EAAOA,EAAM,kBAAkB,EACpDA,CACf,CACI,OAAA8Z,EAAgB,UAAU,QAAU,UAAY,CAC5CJ,GAAyB,KAAK,kBAAkB,EAC5CpC,IACAoC,GAAyB,KAAK,mBAAmB,CAExD,EACDI,EAAgB,UAAU,UAAY,SAAU3Y,EAAa,CACzD,KAAK,IAAI,QAAU,KAAK,IAAI,MAAM,OAASA,GAAe,UAC7D,EACD2Y,EAAgB,UAAU,uBAAyB,SAAUC,EAAoB,CAE7E,GADA,KAAK,oBAAsB,KACvBzC,IACK,CAAC,KAAK,mBAAuB,CAACyC,EAAsB,CACzD,KAAK,mBAAqBA,EAC1B,IAAIC,EAAqB,KAAK,oBAC9BD,EACMT,GAA6B,KAAMU,CAAkB,EACrDN,GAAyBM,CAAkB,CAC7D,CACK,EACMF,CACX,EAAElmB,EAAQ,EClSNqmB,GAAM,EACN3xB,EAAI,kBACJ2xB,GAAM,KAAK,IAAI,OAAO,kBACd,OAAO,QAAU,OAAO,OAAO,WAAa,OAAO,OAAO,aAC3D,EAAG,CAAC,GAGR,IAAIC,GAAmBD,GACnBE,GAAsB,GACtBC,GAAmB,OACnBC,GAAoB,OACpBC,GAAsB,OCV7BC,GAAYC,GACZxS,GAAU,KACd,SAASS,GAAgB5d,EAAK,CAC1B,OAAOA,EAAMmd,IAAWnd,EAAM,KAClC,CACA,IAAI4vB,GAAW,CAAE,EACbC,GAAe,CAAE,EACjBC,GAAkB3c,GAAe,EACjC4c,GAAM,KAAK,IACXC,GAAiB,UAAY,CAC7B,SAASA,GAAgB,CAC7B,CACI,OAAAA,EAAc,UAAU,kBAAoB,SAAU7nB,EAAG,CACrD,OAAO6nB,EAAc,kBAAkB,KAAM7nB,CAAC,CACjD,EACD6nB,EAAc,UAAU,YAAc,SAAU3sB,EAAK,CACjD,KAAK,EAAIA,EAAI,CAAC,EACd,KAAK,EAAIA,EAAI,CAAC,CACjB,EACD2sB,EAAc,UAAU,SAAW,SAAU3sB,EAAK,CAC9C,KAAK,OAASA,EAAI,CAAC,EACnB,KAAK,OAASA,EAAI,CAAC,CACtB,EACD2sB,EAAc,UAAU,QAAU,SAAU3sB,EAAK,CAC7C,KAAK,MAAQA,EAAI,CAAC,EAClB,KAAK,MAAQA,EAAI,CAAC,CACrB,EACD2sB,EAAc,UAAU,UAAY,SAAU3sB,EAAK,CAC/C,KAAK,QAAUA,EAAI,CAAC,EACpB,KAAK,QAAUA,EAAI,CAAC,CACvB,EACD2sB,EAAc,UAAU,mBAAqB,UAAY,CACrD,OAAOpS,GAAgB,KAAK,QAAQ,GAC7BA,GAAgB,KAAK,CAAC,GACtBA,GAAgB,KAAK,CAAC,GACtBA,GAAgB,KAAK,OAAS,CAAC,GAC/BA,GAAgB,KAAK,OAAS,CAAC,GAC/BA,GAAgB,KAAK,KAAK,GAC1BA,GAAgB,KAAK,KAAK,CACpC,EACDoS,EAAc,UAAU,gBAAkB,UAAY,CAClD,IAAIC,EAAkB,KAAK,QAAU,KAAK,OAAO,UAC7CC,EAAqB,KAAK,mBAAoB,EAC9C/nB,EAAI,KAAK,UACb,GAAI,EAAE+nB,GAAsBD,GAAkB,CACtC9nB,IACAunB,GAAUvnB,CAAC,EACX,KAAK,aAAe,MAExB,MACZ,CACQA,EAAIA,GAAKgL,GAAe,EACpB+c,EACA,KAAK,kBAAkB/nB,CAAC,EAGxBunB,GAAUvnB,CAAC,EAEX8nB,IACIC,EACAC,GAAWhoB,EAAG8nB,EAAiB9nB,CAAC,EAGhCioB,GAAYjoB,EAAG8nB,CAAe,GAGtC,KAAK,UAAY9nB,EACjB,KAAK,yBAAyBA,CAAC,CAClC,EACD6nB,EAAc,UAAU,yBAA2B,SAAU7nB,EAAG,CAC5D,IAAIkoB,EAAmB,KAAK,iBAC5B,GAAIA,GAAoB,MAAQA,IAAqB,EAAG,CACpD,KAAK,eAAeT,EAAQ,EAC5B,IAAIU,EAAOV,GAAS,CAAC,EAAI,EAAI,GAAK,EAC9BW,EAAOX,GAAS,CAAC,EAAI,EAAI,GAAK,EAC9B3c,IAAO2c,GAAS,CAAC,EAAIU,GAAQD,EAAmBC,GAAQV,GAAS,CAAC,GAAK,EACvE1c,IAAO0c,GAAS,CAAC,EAAIW,GAAQF,EAAmBE,GAAQX,GAAS,CAAC,GAAK,EAC3EznB,EAAE,CAAC,GAAK8K,EACR9K,EAAE,CAAC,GAAK8K,EACR9K,EAAE,CAAC,GAAK+K,EACR/K,EAAE,CAAC,GAAK+K,CACpB,CACQ,KAAK,aAAe,KAAK,cAAgBC,GAAe,EACxDqd,GAAc,KAAK,aAAcroB,CAAC,CACrC,EACD6nB,EAAc,UAAU,qBAAuB,UAAY,CAGvD,QAFIS,EAAgB,KAChBC,EAAY,CAAE,EACXD,GACHC,EAAU,KAAKD,CAAa,EAC5BA,EAAgBA,EAAc,OAElC,KAAOA,EAAgBC,EAAU,OAC7BD,EAAc,gBAAiB,EAEnC,OAAO,KAAK,SACf,EACDT,EAAc,UAAU,kBAAoB,SAAU7nB,EAAG,CACrD,GAAKA,EAGL,KAAI8K,EAAK9K,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAC7B+K,EAAK/K,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAC7BwoB,EAAW,KAAK,MAAMxoB,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EAChCyoB,EAAS,KAAK,GAAK,EAAID,EAAW,KAAK,MAAMxoB,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EAC3D+K,EAAK,KAAK,KAAKA,CAAE,EAAI,KAAK,IAAI0d,CAAM,EACpC3d,EAAK,KAAK,KAAKA,CAAE,EACjB,KAAK,MAAQ2d,EACb,KAAK,MAAQ,EACb,KAAK,SAAW,CAACD,EACjB,KAAK,EAAI,CAACxoB,EAAE,CAAC,EACb,KAAK,EAAI,CAACA,EAAE,CAAC,EACb,KAAK,OAAS8K,EACd,KAAK,OAASC,EACd,KAAK,QAAU,EACf,KAAK,QAAU,EAClB,EACD8c,EAAc,UAAU,mBAAqB,UAAY,CACrD,GAAK,KAAK,UAGV,KAAIa,EAAS,KAAK,OACd1oB,EAAI,KAAK,UACT0oB,GAAUA,EAAO,YACjBA,EAAO,aAAeA,EAAO,cAAgB1d,GAAe,EAC5Dgd,GAAWN,GAAcgB,EAAO,aAAc1oB,CAAC,EAC/CA,EAAI0nB,IAER,IAAIiB,EAAK,KAAK,QACVC,EAAK,KAAK,SACVD,GAAMC,KACNjB,GAAgB,CAAC,EAAIgB,EACrBhB,GAAgB,CAAC,EAAIiB,EACrBZ,GAAWN,GAAc1nB,EAAG2nB,EAAe,EAC3CD,GAAa,CAAC,GAAKiB,EACnBjB,GAAa,CAAC,GAAKkB,EACnB5oB,EAAI0nB,IAER,KAAK,kBAAkB1nB,CAAC,EAC3B,EACD6nB,EAAc,UAAU,eAAiB,SAAU3oB,EAAK,CACpD,IAAIc,EAAI,KAAK,UAEb,OADAd,EAAMA,GAAO,CAAE,EACVc,GAKLd,EAAI,CAAC,EAAI,KAAK,KAAKc,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EAC5Cd,EAAI,CAAC,EAAI,KAAK,KAAKc,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EACxCA,EAAE,CAAC,EAAI,IACPd,EAAI,CAAC,EAAI,CAACA,EAAI,CAAC,GAEfc,EAAE,CAAC,EAAI,IACPd,EAAI,CAAC,EAAI,CAACA,EAAI,CAAC,GAEZA,IAZHA,EAAI,CAAC,EAAI,EACTA,EAAI,CAAC,EAAI,EACFA,EAWd,EACD2oB,EAAc,UAAU,sBAAwB,SAAU/oB,EAAGC,EAAG,CAC5D,IAAIK,EAAK,CAACN,EAAGC,CAAC,EACV8pB,EAAe,KAAK,aACxB,OAAIA,GACAC,GAAsB1pB,EAAIA,EAAIypB,CAAY,EAEvCzpB,CACV,EACDyoB,EAAc,UAAU,uBAAyB,SAAU/oB,EAAGC,EAAG,CAC7D,IAAIK,EAAK,CAACN,EAAGC,CAAC,EACVgqB,EAAY,KAAK,UACrB,OAAIA,GACAD,GAAsB1pB,EAAIA,EAAI2pB,CAAS,EAEpC3pB,CACV,EACDyoB,EAAc,UAAU,aAAe,UAAY,CAC/C,IAAI7nB,EAAI,KAAK,UACb,OAAOA,GAAK4nB,GAAI5nB,EAAE,CAAC,EAAI,CAAC,EAAI,OAAS4nB,GAAI5nB,EAAE,CAAC,EAAI,CAAC,EAAI,MAC/C,KAAK,KAAK4nB,GAAI5nB,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,CAAC,EACxC,CACT,EACD6nB,EAAc,UAAU,cAAgB,SAAU/uB,EAAQ,CACtDkwB,GAAc,KAAMlwB,CAAM,CAC7B,EACD+uB,EAAc,kBAAoB,SAAUtuB,EAAQyG,EAAG,CACnDA,EAAIA,GAAK,CAAE,EACX,IAAI2oB,EAAKpvB,EAAO,SAAW,EACvBqvB,EAAKrvB,EAAO,SAAW,EACvBuR,EAAKvR,EAAO,OACZwR,EAAKxR,EAAO,OACZ0vB,EAAK1vB,EAAO,QACZ2vB,EAAK3vB,EAAO,QACZivB,EAAWjvB,EAAO,UAAY,EAC9BuF,EAAIvF,EAAO,EACXwF,EAAIxF,EAAO,EACX4vB,EAAQ5vB,EAAO,MAAQ,KAAK,IAAIA,EAAO,KAAK,EAAI,EAChD6vB,EAAQ7vB,EAAO,MAAQ,KAAK,IAAI,CAACA,EAAO,KAAK,EAAI,EACrD,GAAIovB,GAAMC,GAAMK,GAAMC,EAAI,CACtB,IAAI1oB,EAAKmoB,EAAKM,EACVxoB,EAAKmoB,EAAKM,EACdlpB,EAAE,CAAC,EAAI,CAACQ,EAAKsK,EAAKqe,EAAQ1oB,EAAKsK,EAC/B/K,EAAE,CAAC,EAAI,CAACS,EAAKsK,EAAKqe,EAAQ5oB,EAAKsK,CAC3C,MAEY9K,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAI,EAElB,OAAAA,EAAE,CAAC,EAAI8K,EACP9K,EAAE,CAAC,EAAI+K,EACP/K,EAAE,CAAC,EAAIopB,EAAQte,EACf9K,EAAE,CAAC,EAAImpB,EAAQpe,EACfyd,GAAYa,GAAcrpB,EAAGA,EAAGwoB,CAAQ,EACxCxoB,EAAE,CAAC,GAAK2oB,EAAK7pB,EACbkB,EAAE,CAAC,GAAK4oB,EAAK7pB,EACNiB,CACV,EACD6nB,EAAc,iBAAoB,UAAY,CAC1C,IAAI1pB,EAAQ0pB,EAAc,UAC1B1pB,EAAM,OACFA,EAAM,OACFA,EAAM,iBAAmB,EACjCA,EAAM,EACFA,EAAM,EACFA,EAAM,QACFA,EAAM,QACFA,EAAM,MACFA,EAAM,MACFA,EAAM,SACFA,EAAM,QACFA,EAAM,QAAU,CACxD,EAAQ,EACG0pB,CACX,IAEWyB,GAAsB,CAC7B,IAAK,IAAK,UAAW,UAAW,UAAW,UAAW,WAAY,SAAU,SAAU,QAAS,OACnG,EACO,SAASN,GAAczvB,EAAQT,EAAQ,CAC1C,QAAStC,EAAI,EAAGA,EAAI8yB,GAAoB,OAAQ9yB,IAAK,CACjD,IAAI0pB,EAAWoJ,GAAoB9yB,CAAC,EACpC+C,EAAO2mB,CAAQ,EAAIpnB,EAAOonB,CAAQ,CAC1C,CACA,CC/OA,IAAIqJ,GAAiB,CAAE,EAChB,SAASC,GAASzyB,EAAMC,EAAM,CACjCA,EAAOA,GAAQf,GACf,IAAIwzB,EAAcF,GAAevyB,CAAI,EAChCyyB,IACDA,EAAcF,GAAevyB,CAAI,EAAI,IAAIqjB,GAAI,GAAG,GAEpD,IAAIjjB,EAAQqyB,EAAY,IAAI1yB,CAAI,EAChC,OAAIK,GAAS,OACTA,EAAQR,GAAY,YAAYG,EAAMC,CAAI,EAAE,MAC5CyyB,EAAY,IAAI1yB,EAAMK,CAAK,GAExBA,CACX,CACO,SAASsyB,GAAqB3yB,EAAMC,EAAM2yB,EAAWC,EAAc,CACtE,IAAIxyB,EAAQoyB,GAASzyB,EAAMC,CAAI,EAC3B6T,EAASgf,GAAc7yB,CAAI,EAC3B8H,EAAIgrB,GAAY,EAAG1yB,EAAOuyB,CAAS,EACnC5qB,EAAIgrB,GAAY,EAAGlf,EAAQ+e,CAAY,EACvC5kB,EAAO,IAAI4F,GAAa9L,EAAGC,EAAG3H,EAAOyT,CAAM,EAC/C,OAAO7F,CACX,CACO,SAASglB,GAAgBjzB,EAAMC,EAAM2yB,EAAWC,EAAc,CACjE,IAAIK,IAAclzB,GAAQ,IAAM,IAAI,MAAM;AAAA,CAAI,EAC1CmC,EAAM+wB,EAAU,OACpB,GAAI/wB,IAAQ,EACR,OAAOwwB,GAAqBO,EAAU,CAAC,EAAGjzB,EAAM2yB,EAAWC,CAAY,EAIvE,QADIM,EAAa,IAAItf,GAAa,EAAG,EAAG,EAAG,CAAC,EACnCpU,EAAI,EAAGA,EAAIyzB,EAAU,OAAQzzB,IAAK,CACvC,IAAIwO,EAAO0kB,GAAqBO,EAAUzzB,CAAC,EAAGQ,EAAM2yB,EAAWC,CAAY,EAC3EpzB,IAAM,EAAI0zB,EAAW,KAAKllB,CAAI,EAAIklB,EAAW,MAAMllB,CAAI,CACnE,CACQ,OAAOklB,CAEf,CACO,SAASJ,GAAYhrB,EAAG1H,EAAOuyB,EAAW,CAC7C,OAAIA,IAAc,QACd7qB,GAAK1H,EAEAuyB,IAAc,WACnB7qB,GAAK1H,EAAQ,GAEV0H,CACX,CACO,SAASirB,GAAYhrB,EAAG8L,EAAQsf,EAAe,CAClD,OAAIA,IAAkB,SAClBprB,GAAK8L,EAAS,EAETsf,IAAkB,WACvBprB,GAAK8L,GAEF9L,CACX,CACO,SAAS8qB,GAAc7yB,EAAM,CAChC,OAAOwyB,GAAS,IAAKxyB,CAAI,CAC7B,CAIO,SAASozB,GAAa/vB,EAAOgwB,EAAU,CAC1C,OAAI,OAAOhwB,GAAU,SACbA,EAAM,YAAY,GAAG,GAAK,EACnB,WAAWA,CAAK,EAAI,IAAMgwB,EAE9B,WAAWhwB,CAAK,EAEpBA,CACX,CACO,SAASiwB,GAAsBprB,EAAKsa,EAAMxU,EAAM,CACnD,IAAIulB,EAAe/Q,EAAK,UAAY,SAChC7Z,EAAW6Z,EAAK,UAAY,KAAOA,EAAK,SAAW,EACnD3O,EAAS7F,EAAK,OACd5N,EAAQ4N,EAAK,MACbwlB,EAAa3f,EAAS,EACtB/L,EAAIkG,EAAK,EACTjG,EAAIiG,EAAK,EACT2kB,EAAY,OACZc,EAAoB,MACxB,GAAIF,aAAwB,MACxBzrB,GAAKsrB,GAAaG,EAAa,CAAC,EAAGvlB,EAAK,KAAK,EAC7CjG,GAAKqrB,GAAaG,EAAa,CAAC,EAAGvlB,EAAK,MAAM,EAC9C2kB,EAAY,KACZc,EAAoB,SAGpB,QAAQF,EAAY,CAChB,IAAK,OACDzrB,GAAKa,EACLZ,GAAKyrB,EACLb,EAAY,QACZc,EAAoB,SACpB,MACJ,IAAK,QACD3rB,GAAKa,EAAWvI,EAChB2H,GAAKyrB,EACLC,EAAoB,SACpB,MACJ,IAAK,MACD3rB,GAAK1H,EAAQ,EACb2H,GAAKY,EACLgqB,EAAY,SACZc,EAAoB,SACpB,MACJ,IAAK,SACD3rB,GAAK1H,EAAQ,EACb2H,GAAK8L,EAASlL,EACdgqB,EAAY,SACZ,MACJ,IAAK,SACD7qB,GAAK1H,EAAQ,EACb2H,GAAKyrB,EACLb,EAAY,SACZc,EAAoB,SACpB,MACJ,IAAK,aACD3rB,GAAKa,EACLZ,GAAKyrB,EACLC,EAAoB,SACpB,MACJ,IAAK,cACD3rB,GAAK1H,EAAQuI,EACbZ,GAAKyrB,EACLb,EAAY,QACZc,EAAoB,SACpB,MACJ,IAAK,YACD3rB,GAAK1H,EAAQ,EACb2H,GAAKY,EACLgqB,EAAY,SACZ,MACJ,IAAK,eACD7qB,GAAK1H,EAAQ,EACb2H,GAAK8L,EAASlL,EACdgqB,EAAY,SACZc,EAAoB,SACpB,MACJ,IAAK,gBACD3rB,GAAKa,EACLZ,GAAKY,EACL,MACJ,IAAK,iBACDb,GAAK1H,EAAQuI,EACbZ,GAAKY,EACLgqB,EAAY,QACZ,MACJ,IAAK,mBACD7qB,GAAKa,EACLZ,GAAK8L,EAASlL,EACd8qB,EAAoB,SACpB,MACJ,IAAK,oBACD3rB,GAAK1H,EAAQuI,EACbZ,GAAK8L,EAASlL,EACdgqB,EAAY,QACZc,EAAoB,SACpB,KAChB,CAEI,OAAAvrB,EAAMA,GAAO,CAAE,EACfA,EAAI,EAAIJ,EACRI,EAAI,EAAIH,EACRG,EAAI,MAAQyqB,EACZzqB,EAAI,cAAgBurB,EACbvrB,CACX,CChKO,IAAIwrB,GAAyB,gBAChCC,GAAsBrB,GAAoB,OAAO,CAAC,QAAQ,CAAC,EAC3DsB,GAAyBjzB,GAAO2xB,GAAqB,SAAU1xB,EAAKyB,EAAK,CACzE,OAAAzB,EAAIyB,CAAG,EAAI,GACJzB,CACX,EAAG,CAAE,OAAQ,GAAO,EAChBizB,GAAoB,CAAC,EACrBC,GAAkB,IAAIlgB,GAAa,EAAG,EAAG,EAAG,CAAC,EAC7CmgB,GAAW,UAAY,CACvB,SAASA,EAAQvI,EAAO,CACpB,KAAK,GAAK/pB,GAAK,EACf,KAAK,UAAY,CAAC,EAClB,KAAK,cAAgB,CAAC,EACtB,KAAK,OAAS,CAAC,EACf,KAAK,MAAM+pB,CAAK,CAAA,CAEpBuI,OAAAA,EAAQ,UAAU,MAAQ,SAAUvI,EAAO,CACvC,KAAK,KAAKA,CAAK,CACnB,EACAuI,EAAQ,UAAU,MAAQ,SAAUvqB,EAAIC,EAAIH,EAAG,CAC3C,OAAQ,KAAK,UAAW,CACpB,IAAK,aACIG,EAAA,EACL,MACJ,IAAK,WACID,EAAA,EACL,KAAA,CAER,IAAIR,EAAI,KAAK,UACRA,IACGA,EAAA,KAAK,UAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,GAE1CA,EAAE,CAAC,GAAKQ,EACRR,EAAE,CAAC,GAAKS,EACR,KAAK,mBAAmB,EACxB,KAAK,WAAW,CACpB,EACAsqB,EAAQ,UAAU,aAAe,UAAY,CAAE,EAC/CA,EAAQ,UAAU,YAAc,UAAY,CAAE,EAC9CA,EAAQ,UAAU,OAAS,UAAY,CACnC,KAAK,gBAAgB,EACjB,KAAK,SACL,KAAK,gBAAgB,CAE7B,EACAA,EAAQ,UAAU,gBAAkB,SAAUC,EAAa,CACvD,IAAIvW,EAAS,KAAK,aAClB,GAAIA,IAAW,CAACA,EAAO,QAAUuW,GAAc,CACtC,KAAK,aACN,KAAK,WAAa,CAAC,GAEvB,IAAIC,EAAa,KAAK,WAClBvF,EAAUuF,EAAW,MACrBC,EAAqBzW,EAAO,mBAC5BkV,EAAY,OACZc,EAAoB,OACpBU,EAAmB,GACJD,EAAA,OAASxF,EAAU,KAAO,KAC7C,IAAI0F,EAAc,GAEd,GADJF,EAAmB,cAAczW,CAAM,EACnCwW,EAAW,UAAY,KAAM,CAC7B,IAAII,EAAaP,GACbG,EAAW,WACAI,EAAA,KAAKJ,EAAW,UAAU,EAG1BI,EAAA,KAAK,KAAK,iBAAiB,EAErC3F,GACU2F,EAAA,eAAe,KAAK,SAAS,EAExC,KAAK,sBACA,KAAA,sBAAsBR,GAAmBI,EAAYI,CAAU,EAG9Cf,GAAAO,GAAmBI,EAAYI,CAAU,EAEnEH,EAAmB,EAAIL,GAAkB,EACzCK,EAAmB,EAAIL,GAAkB,EACzClB,EAAYkB,GAAkB,MAC9BJ,EAAoBI,GAAkB,cACtC,IAAIS,EAAaL,EAAW,OACxB,GAAAK,GAAcL,EAAW,UAAY,KAAM,CAC3C,IAAIM,EAAa,OACbC,EAAa,OACbF,IAAe,UACfC,EAAaF,EAAW,MAAQ,GAChCG,EAAaH,EAAW,OAAS,KAGjCE,EAAanB,GAAakB,EAAW,CAAC,EAAGD,EAAW,KAAK,EACzDG,EAAapB,GAAakB,EAAW,CAAC,EAAGD,EAAW,MAAM,GAEhDD,EAAA,GACdF,EAAmB,QAAU,CAACA,EAAmB,EAAIK,GAAc7F,EAAU,EAAI2F,EAAW,GAC5FH,EAAmB,QAAU,CAACA,EAAmB,EAAIM,GAAc9F,EAAU,EAAI2F,EAAW,EAAA,CAChG,CAEAJ,EAAW,UAAY,OACvBC,EAAmB,SAAWD,EAAW,UAE7C,IAAIQ,EAAaR,EAAW,OACxBQ,IACmBP,EAAA,GAAKO,EAAW,CAAC,EACjBP,EAAA,GAAKO,EAAW,CAAC,EAC/BL,IACkBF,EAAA,QAAU,CAACO,EAAW,CAAC,EACvBP,EAAA,QAAU,CAACO,EAAW,CAAC,IAGlD,IAAIC,EAAWT,EAAW,QAAU,KAC7B,OAAOA,EAAW,UAAa,UAAYA,EAAW,SAAS,QAAQ,QAAQ,GAAK,EACrFA,EAAW,OACbU,EAAwB,KAAK,yBAA2B,KAAK,uBAAyB,CAAA,GACtFC,EAAW,OACXC,EAAa,OACbC,EAAa,OACbJ,GAAY,KAAK,mBACjBE,EAAWX,EAAW,WACtBY,EAAaZ,EAAW,cACpBW,GAAY,MAAQA,IAAa,UACjCA,EAAW,KAAK,kBAAkB,IAElCC,GAAc,MAAQA,IAAe,UACxBA,EAAA,KAAK,oBAAoBD,CAAQ,EACjCE,EAAA,MAIjBF,EAAWX,EAAW,YACtBY,EAAaZ,EAAW,eACpBW,GAAY,MAAQA,IAAa,UACjCA,EAAW,KAAK,eAAe,IAE/BC,GAAc,MAAQA,IAAe,UACxBA,EAAA,KAAK,iBAAiBD,CAAQ,EAC9BE,EAAA,KAGrBF,EAAWA,GAAY,QACnBA,IAAaD,EAAsB,MAChCE,IAAeF,EAAsB,QACrCG,IAAeH,EAAsB,YACrChC,IAAcgC,EAAsB,OACpClB,IAAsBkB,EAAsB,iBAC5BR,EAAA,GACnBQ,EAAsB,KAAOC,EAC7BD,EAAsB,OAASE,EAC/BF,EAAsB,WAAaG,EACnCH,EAAsB,MAAQhC,EAC9BgC,EAAsB,cAAgBlB,EACtChW,EAAO,oBAAoBkX,CAAqB,GAEpDlX,EAAO,SAAWrB,GACd+X,GACA1W,EAAO,WAAW,EAAI,CAC1B,CAER,EACAsW,EAAQ,UAAU,gBAAkB,UAAY,CACrC,MAAA,EACX,EACAA,EAAQ,UAAU,kBAAoB,UAAY,CACvC,MAAA,MACX,EACAA,EAAQ,UAAU,oBAAsB,SAAUa,EAAU,CACjD,MAAA,MACX,EACAb,EAAQ,UAAU,eAAiB,UAAY,CAC3C,OAAO,KAAK,MAAQ,KAAK,KAAK,WAAA,EAAe1D,GAAoBD,EACrE,EACA2D,EAAQ,UAAU,iBAAmB,SAAUa,EAAU,CACrD,IAAIG,EAAkB,KAAK,MAAQ,KAAK,KAAK,mBAAmB,EAC5DtP,EAAW,OAAOsP,GAAoB,UAAYrQ,GAAMqQ,CAAe,EACtEtP,IACDA,EAAW,CAAC,IAAK,IAAK,IAAK,CAAC,GAIhC,QAFIP,EAAQO,EAAS,CAAC,EAClBuP,EAAS,KAAK,KAAK,WAAW,EACzBx1B,EAAI,EAAGA,EAAI,EAAGA,IACVimB,EAAAjmB,CAAC,EAAIimB,EAASjmB,CAAC,EAAI0lB,GAAS8P,EAAS,EAAI,MAAQ,EAAI9P,GAElE,OAAAO,EAAS,CAAC,EAAI,EACPC,GAAUD,EAAU,MAAM,CACrC,EACAsO,EAAQ,UAAU,SAAW,SAAU5vB,EAAIC,EAAS,CAAE,EACtD2vB,EAAQ,UAAU,OAAS,SAAU1xB,EAAKgB,EAAO,CACzChB,IAAQ,aACR,KAAK,cAAcgB,CAAK,EAEnBhB,IAAQ,cACb,KAAK,eAAegB,CAAK,EAEpBhB,IAAQ,WACb,KAAK,YAAYgB,CAAK,EAEjBhB,IAAQ,SACR,KAAA,MAAQ,KAAK,OAAS,CAAC,EACrBS,EAAA,KAAK,MAAOO,CAAK,GAGxB,KAAKhB,CAAG,EAAIgB,CAEpB,EACA0wB,EAAQ,UAAU,KAAO,UAAY,CACjC,KAAK,OAAS,GACd,KAAK,WAAW,CACpB,EACAA,EAAQ,UAAU,KAAO,UAAY,CACjC,KAAK,OAAS,GACd,KAAK,WAAW,CACpB,EACAA,EAAQ,UAAU,KAAO,SAAUkB,EAAU5xB,EAAO,CAC5C,GAAA,OAAO4xB,GAAa,SACf,KAAA,OAAOA,EAAU5xB,CAAK,UAEtBZ,EAASwyB,CAAQ,EAGtB,QAFIr0B,EAAMq0B,EACNhyB,EAAUC,GAAKtC,CAAG,EACbpB,EAAI,EAAGA,EAAIyD,EAAQ,OAAQzD,IAAK,CACjC,IAAA6C,EAAMY,EAAQzD,CAAC,EACnB,KAAK,OAAO6C,EAAK4yB,EAAS5yB,CAAG,CAAC,CAAA,CAGtC,YAAK,WAAW,EACT,IACX,EACA0xB,EAAQ,UAAU,yBAA2B,SAAUmB,EAAS,CAC5D,KAAK,mBAAmBA,CAAO,EAE/B,QADIC,EAAc,KAAK,aACd,EAAI,EAAG,EAAI,KAAK,UAAU,OAAQ,IAAK,CACxC,IAAAnI,EAAW,KAAK,UAAU,CAAC,EAC3BoI,EAAsBpI,EAAS,sBACnC,GAAI,EAAAA,EAAS,QAAA,GAAaoI,GAAuBA,IAAwB1B,IAGzE,KAAI2B,EAAarI,EAAS,WACtBzqB,EAAS8yB,EACPF,EAAYE,CAAU,EAAIF,EAChCnI,EAAS,OAAOzqB,CAAM,EAAA,CAE9B,EACAwxB,EAAQ,UAAU,mBAAqB,SAAUmB,EAAS,CACtD,IAAIC,EAAc,KAAK,aAClBA,IACaA,EAAA,KAAK,aAAe,CAAC,GAEnCD,EAAQ,YAAc,CAACC,EAAY,aACnCA,EAAY,WAAa,KAAK,YAE7B,KAAA,qBAAqBD,EAASC,EAAaxB,EAAmB,CACvE,EACAI,EAAQ,UAAU,qBAAuB,SAAUmB,EAASC,EAAaG,EAAa,CAClF,QAAS91B,EAAI,EAAGA,EAAI81B,EAAY,OAAQ91B,IAAK,CACrC,IAAA6C,EAAMizB,EAAY91B,CAAC,EACnB01B,EAAQ7yB,CAAG,GAAK,MAAQ,EAAEA,KAAO8yB,KACrBA,EAAA9yB,CAAG,EAAI,KAAKA,CAAG,EAC/B,CAER,EACA0xB,EAAQ,UAAU,SAAW,UAAY,CAC9B,OAAA,KAAK,cAAc,OAAS,CACvC,EACAA,EAAQ,UAAU,SAAW,SAAUpkB,EAAM,CAClC,OAAA,KAAK,OAAOA,CAAI,CAC3B,EACAokB,EAAQ,UAAU,YAAc,SAAUpkB,EAAM,CAC5C,IAAI4lB,EAAS,KAAK,OACd,OAACA,EAAO5lB,CAAI,IACL4lB,EAAA5lB,CAAI,EAAI,CAAC,GAEb4lB,EAAO5lB,CAAI,CACtB,EACAokB,EAAQ,UAAU,YAAc,SAAUyB,EAAa,CAC9C,KAAA,SAAS9B,GAAwB,GAAO8B,CAAW,CAC5D,EACAzB,EAAQ,UAAU,SAAW,SAAU0B,EAAWC,EAAmBF,EAAaG,EAAoB,CAClG,IAAIC,EAAgBH,IAAc/B,GAC9BmC,EAAY,KAAK,SAAS,EAC1B,GAAA,GAACA,GAAaD,GAGlB,KAAIE,EAAgB,KAAK,cACrBC,EAAe,KAAK,gBACpB,GAAA,EAAA5yB,EAAQ2yB,EAAeL,CAAS,GAAK,IAAMC,GAAqBI,EAAc,SAAW,IAGzF,KAAAE,EAOA,GANA,KAAK,YAAc,CAACJ,IACZI,EAAA,KAAK,WAAWP,CAAS,GAEhCO,IACDA,EAAS,KAAK,QAAU,KAAK,OAAOP,CAAS,GAE7C,CAACO,GAAS,CAACJ,EAAe,CACjBl0B,GAAA,SAAW+zB,EAAY,cAAc,EAC9C,MAAA,CAECG,GACD,KAAK,yBAAyBI,CAAK,EAEvC,IAAIC,EAAgB,CAAC,EAAGD,GAASA,EAAM,YAAeL,GAClDM,GACA,KAAK,sBAAsB,EAAI,EAEnC,KAAK,eAAeR,EAAWO,EAAO,KAAK,aAAcN,EAAmB,CAACF,GAAe,CAAC,KAAK,WAAaO,GAAgBA,EAAa,SAAW,EAAGA,CAAY,EACtK,IAAIG,EAAc,KAAK,aACnB1Y,EAAY,KAAK,WACrB,OAAI0Y,GACAA,EAAY,SAAST,EAAWC,EAAmBF,EAAaS,CAAa,EAE7EzY,GACAA,EAAU,SAASiY,EAAWC,EAAmBF,EAAaS,CAAa,EAE3EL,GACA,KAAK,cAAgB,CAAC,EACtB,KAAK,aAAe,CAAC,GAGhBF,EAII,KAAA,cAAc,KAAKD,CAAS,EAH5B,KAAA,cAAgB,CAACA,CAAS,EAMvC,KAAK,wBAAwB,EAC7B,KAAK,WAAW,EACZ,CAACQ,GAAiB,KAAK,YACvB,KAAK,sBAAsB,EAAK,EAChC,KAAK,SAAW,IAEbD,GACX,EACAjC,EAAQ,UAAU,UAAY,SAAUwB,EAAQC,EAAaG,EAAoB,CACzE,GAAA,CAACJ,EAAO,OACR,KAAK,YAAY,MAEhB,CACD,IAAIY,EAAe,CAAC,EAChBL,EAAgB,KAAK,cACrB5zB,EAAMqzB,EAAO,OACba,EAAYl0B,IAAQ4zB,EAAc,OACtC,GAAIM,GACA,QAAS52B,EAAI,EAAGA,EAAI0C,EAAK1C,IACrB,GAAI+1B,EAAO/1B,CAAC,IAAMs2B,EAAct2B,CAAC,EAAG,CACpB42B,EAAA,GACZ,KAAA,EAIZ,GAAIA,EACA,OAEJ,QAAS52B,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACtB,IAAAi2B,EAAYF,EAAO/1B,CAAC,EACpB62B,EAAW,OACX,KAAK,aACMA,EAAA,KAAK,WAAWZ,EAAWF,CAAM,GAE3Cc,IACUA,EAAA,KAAK,OAAOZ,CAAS,GAEhCY,GACAF,EAAa,KAAKE,CAAQ,CAC9B,CAEA,IAAAC,EAAeH,EAAaj0B,EAAM,CAAC,EACnC+zB,EAAgB,CAAC,EAAGK,GAAgBA,EAAa,YAAeX,GAChEM,GACA,KAAK,sBAAsB,EAAI,EAE/B,IAAAM,EAAc,KAAK,aAAaJ,CAAY,EAC5CJ,EAAe,KAAK,gBACxB,KAAK,yBAAyBQ,CAAW,EACzC,KAAK,eAAehB,EAAO,KAAK,GAAG,EAAGgB,EAAa,KAAK,aAAc,GAAO,CAACf,GAAe,CAAC,KAAK,WAAaO,GAAgBA,EAAa,SAAW,EAAGA,CAAY,EACvK,IAAIG,EAAc,KAAK,aACnB1Y,EAAY,KAAK,WACjB0Y,GACYA,EAAA,UAAUX,EAAQC,EAAaS,CAAa,EAExDzY,GACUA,EAAA,UAAU+X,EAAQC,EAAaS,CAAa,EAE1D,KAAK,wBAAwB,EACxB,KAAA,cAAgBV,EAAO,MAAM,EAClC,KAAK,WAAW,EACZ,CAACU,GAAiB,KAAK,YACvB,KAAK,sBAAsB,EAAK,EAChC,KAAK,SAAW,GACpB,CAER,EACAlC,EAAQ,UAAU,SAAW,UAAY,CAG9B,QAFHtb,EAAW,KAAK,OAChB+d,EAAW,KAAK,OACb,CAAC/d,GAAY+d,GAAU,CAC1B,GAAIA,EAAS,OAAQ,CACN/d,EAAA,GACX,KAAA,CAEJ+d,EAAWA,EAAS,MAAA,CAEjB,OAAA/d,CACX,EACAsb,EAAQ,UAAU,wBAA0B,UAAY,CACpD,QAASv0B,EAAI,EAAGA,EAAI,KAAK,UAAU,OAAQA,IAAK,CACxC,IAAAwtB,EAAW,KAAK,UAAUxtB,CAAC,EAC3BwtB,EAAS,YACTA,EAAS,aAAa,KAAKA,EAAS,UAAU,CAAC,CACnD,CAER,EACA+G,EAAQ,UAAU,YAAc,SAAUiC,EAAO,CAC7C,IAAItY,EAAMva,EAAQ,KAAK,cAAe6yB,CAAK,EAC3C,GAAItY,GAAO,EAAG,CACN,IAAAoY,EAAgB,KAAK,cAAc,MAAM,EAC/BA,EAAA,OAAOpY,EAAK,CAAC,EAC3B,KAAK,UAAUoY,CAAa,CAAA,CAEpC,EACA/B,EAAQ,UAAU,aAAe,SAAU0C,EAAUC,EAAUC,EAAU,CACjE,IAAAb,EAAgB,KAAK,cAAc,MAAM,EACzCpY,EAAMva,EAAQ2yB,EAAeW,CAAQ,EACrCG,EAAiBzzB,EAAQ2yB,EAAeY,CAAQ,GAAK,EACrDhZ,GAAO,EACFkZ,EAIad,EAAA,OAAOpY,EAAK,CAAC,EAH3BoY,EAAcpY,CAAG,EAAIgZ,EAMpBC,GAAY,CAACC,GAClBd,EAAc,KAAKY,CAAQ,EAE/B,KAAK,UAAUZ,CAAa,CAChC,EACA/B,EAAQ,UAAU,YAAc,SAAUiC,EAAOa,EAAQ,CACjDA,EACK,KAAA,SAASb,EAAO,EAAI,EAGzB,KAAK,YAAYA,CAAK,CAE9B,EACAjC,EAAQ,UAAU,aAAe,SAAUwB,EAAQ,CAG/C,QAFIgB,EAAc,CAAC,EACfO,EACKt3B,EAAI,EAAGA,EAAI+1B,EAAO,OAAQ/1B,IAAK,CAChC,IAAAw2B,EAAQT,EAAO/1B,CAAC,EACpBsD,EAAOyzB,EAAaP,CAAK,EACrBA,EAAM,aACNc,EAAmBA,GAAoB,CAAC,EACjCh0B,EAAAg0B,EAAkBd,EAAM,UAAU,EAC7C,CAEJ,OAAIc,IACAP,EAAY,WAAaO,GAEtBP,CACX,EACAxC,EAAQ,UAAU,eAAiB,SAAU0B,EAAWO,EAAOb,EAAaO,EAAmBqB,EAAYhB,EAAc,CACjH,IAAAiB,EAAuB,EAAEhB,GAASN,GAClCM,GAASA,EAAM,YACV,KAAA,WAAalzB,EAAO,CAAC,EAAG4yB,EAAoB,KAAK,WAAaP,EAAY,UAAU,EAClFryB,EAAA,KAAK,WAAYkzB,EAAM,UAAU,GAEnCgB,GACD7B,EAAY,aACZ,KAAK,WAAaA,EAAY,YAKtC,QAFI8B,EAAmB,CAAC,EACpBC,EAAgB,GACX13B,EAAI,EAAGA,EAAIm0B,GAAoB,OAAQn0B,IAAK,CAC7C,IAAA6C,EAAMsxB,GAAoBn0B,CAAC,EAC3B23B,EAAsBJ,GAAcnD,GAAuBvxB,CAAG,EAC9D2zB,GAASA,EAAM3zB,CAAG,GAAK,KACnB80B,GACgBD,EAAA,GACCD,EAAA50B,CAAG,EAAI2zB,EAAM3zB,CAAG,GAG5B,KAAAA,CAAG,EAAI2zB,EAAM3zB,CAAG,EAGpB20B,GACD7B,EAAY9yB,CAAG,GAAK,OAChB80B,GACgBD,EAAA,GACCD,EAAA50B,CAAG,EAAI8yB,EAAY9yB,CAAG,GAGlC,KAAAA,CAAG,EAAI8yB,EAAY9yB,CAAG,EAGvC,CAEJ,GAAI,CAAC00B,EACD,QAASv3B,EAAI,EAAGA,EAAI,KAAK,UAAU,OAAQA,IAAK,CACxC,IAAAwtB,EAAW,KAAK,UAAUxtB,CAAC,EAC3B61B,EAAarI,EAAS,WACrBA,EAAS,WACVA,EAAS,mBAAmBqI,GACrBW,GAASb,GAAaE,CAAU,EAChCW,GAASb,CAAY,CAChC,CAGJ+B,GACK,KAAA,iBAAiBzB,EAAWwB,EAAkBlB,CAAY,CAEvE,EACAhC,EAAQ,UAAU,iBAAmB,SAAUqD,EAAa,CACxD,GAAI,EAAAA,EAAY,MAAQ,CAACA,EAAY,eAMjCA,IAAgB,KAMpB,KAAIC,EAAK,KAAK,KACVA,GACAD,EAAY,YAAYC,CAAE,EAE9BD,EAAY,KAAOC,EACnBD,EAAY,aAAe,KAC/B,EACArD,EAAQ,UAAU,iBAAmB,SAAUqD,EAAa,CACpDA,EAAY,MACAA,EAAA,iBAAiBA,EAAY,IAAI,EAEjDA,EAAY,KAAO,KACnBA,EAAY,aAAe,IAC/B,EACArD,EAAQ,UAAU,YAAc,UAAY,CACxC,OAAO,KAAK,SAChB,EACAA,EAAQ,UAAU,YAAc,SAAUpb,EAAU,CAC5C,KAAK,WAAa,KAAK,YAAcA,GACrC,KAAK,eAAe,EAExB,KAAK,iBAAiBA,CAAQ,EAC9B,KAAK,UAAYA,EACjB,KAAK,WAAW,CACpB,EACAob,EAAQ,UAAU,eAAiB,UAAY,CAC3C,IAAIpb,EAAW,KAAK,UAChBA,IACA,KAAK,iBAAiBA,CAAQ,EAC9B,KAAK,UAAY,KACjB,KAAK,WAAW,EAExB,EACAob,EAAQ,UAAU,eAAiB,UAAY,CAC3C,OAAO,KAAK,YAChB,EACAA,EAAQ,UAAU,eAAiB,SAAUtW,EAAQ,CACjD,IAAI6Z,EAAsB,KAAK,aAC3BA,IAAwB7Z,IAGxB6Z,GAAuBA,IAAwB7Z,GAC/C,KAAK,kBAAkB,EAOpBA,EAAA,mBAAqB,IAAIoT,GAChC,KAAK,iBAAiBpT,CAAM,EAC5B,KAAK,aAAeA,EACpB,KAAK,WAAW,EACpB,EACAsW,EAAQ,UAAU,cAAgB,SAAUwD,EAAK,CACxC,KAAK,aACN,KAAK,WAAa,CAAC,GAEhBz0B,EAAA,KAAK,WAAYy0B,CAAG,EAC3B,KAAK,WAAW,CACpB,EACAxD,EAAQ,UAAU,iBAAmB,UAAY,CAC7C,KAAK,WAAa,KAClB,KAAK,WAAW,CACpB,EACAA,EAAQ,UAAU,kBAAoB,UAAY,CAC9C,IAAItW,EAAS,KAAK,aACdA,IACAA,EAAO,mBAAqB,KAC5B,KAAK,iBAAiBA,CAAM,EAC5B,KAAK,aAAe,KACpB,KAAK,uBAAyB,KAC9B,KAAK,WAAW,EAExB,EACAsW,EAAQ,UAAU,iBAAmB,UAAY,CAC7C,OAAO,KAAK,UAChB,EACAA,EAAQ,UAAU,iBAAmB,SAAUyD,EAAW,CAClD,KAAK,YAAc,KAAK,aAAeA,GACvC,KAAK,oBAAoB,EAE7B,KAAK,iBAAiBA,CAAS,EAC/B,KAAK,WAAaA,EAClB,KAAK,WAAW,CACpB,EACAzD,EAAQ,UAAU,oBAAsB,UAAY,CAChD,IAAIvW,EAAY,KAAK,WACjBA,IACA,KAAK,iBAAiBA,CAAS,EAC/B,KAAK,WAAa,KAClB,KAAK,WAAW,EAExB,EACAuW,EAAQ,UAAU,WAAa,UAAY,CACvC,KAAK,SAAW3X,GAChB,IAAIib,EAAK,KAAK,KACVA,IACI,KAAK,UACLA,EAAG,aAAa,EAGhBA,EAAG,QAAQ,GAGf,KAAK,cACL,KAAK,aAAa,WAAW,CAErC,EACAtD,EAAQ,UAAU,MAAQ,UAAY,CAClC,KAAK,WAAW,CACpB,EACAA,EAAQ,UAAU,sBAAwB,SAAU0D,EAAS,CACzD,KAAK,UAAYA,EACjB,IAAIvB,EAAc,KAAK,aACnB1Y,EAAY,KAAK,WACjB0Y,IACAA,EAAY,UAAYuB,GAExBja,IACAA,EAAU,UAAYia,EAE9B,EACA1D,EAAQ,UAAU,YAAc,SAAUsD,EAAI,CACtC,GAAA,KAAK,OAASA,EAGlB,MAAK,KAAOA,EACZ,IAAIK,EAAY,KAAK,UACrB,GAAIA,EACA,QAAS,EAAI,EAAG,EAAIA,EAAU,OAAQ,IAClCL,EAAG,UAAU,YAAYK,EAAU,CAAC,CAAC,EAGzC,KAAK,WACA,KAAA,UAAU,YAAYL,CAAE,EAE7B,KAAK,cACA,KAAA,aAAa,YAAYA,CAAE,EAEhC,KAAK,YACA,KAAA,WAAW,YAAYA,CAAE,EAEtC,EACAtD,EAAQ,UAAU,iBAAmB,SAAUsD,EAAI,CAC3C,GAAC,KAAK,KAGV,MAAK,KAAO,KACZ,IAAIK,EAAY,KAAK,UACrB,GAAIA,EACA,QAAS,EAAI,EAAG,EAAIA,EAAU,OAAQ,IAClCL,EAAG,UAAU,eAAeK,EAAU,CAAC,CAAC,EAG5C,KAAK,WACA,KAAA,UAAU,iBAAiBL,CAAE,EAElC,KAAK,cACA,KAAA,aAAa,iBAAiBA,CAAE,EAErC,KAAK,YACA,KAAA,WAAW,iBAAiBA,CAAE,EAE3C,EACAtD,EAAQ,UAAU,QAAU,SAAU1xB,EAAKgpB,EAAMC,EAAwB,CACrE,IAAI/oB,EAASF,EAAM,KAAKA,CAAG,EAAI,KAU3B2qB,EAAW,IAAI5B,GAAS7oB,EAAQ8oB,EAAMC,CAAsB,EAChE,OAAAjpB,IAAQ2qB,EAAS,WAAa3qB,GACzB,KAAA,YAAY2qB,EAAU3qB,CAAG,EACvB2qB,CACX,EACA+G,EAAQ,UAAU,YAAc,SAAU/G,EAAU3qB,EAAK,CACrD,IAAIg1B,EAAK,KAAK,KACVxqB,EAAK,KACTmgB,EAAS,OAAO,UAAY,CACxBngB,EAAG,sBAAsBxK,CAAG,CAAA,CAC/B,EAAE,KAAK,UAAY,CAChB,IAAIq1B,EAAY7qB,EAAG,UACf6Q,EAAMva,EAAQu0B,EAAW1K,CAAQ,EACjCtP,GAAO,GACGga,EAAA,OAAOha,EAAK,CAAC,CAC3B,CACH,EACI,KAAA,UAAU,KAAKsP,CAAQ,EACxBqK,GACGA,EAAA,UAAU,YAAYrK,CAAQ,EAErCqK,GAAMA,EAAG,OAAO,CACpB,EACAtD,EAAQ,UAAU,sBAAwB,SAAU1xB,EAAK,CACrD,KAAK,WAAW,CACpB,EACA0xB,EAAQ,UAAU,cAAgB,SAAU5F,EAAO1B,EAAe,CAI9D,QAHIiL,EAAY,KAAK,UACjBx1B,EAAMw1B,EAAU,OAChBC,EAAgB,CAAC,EACZn4B,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACtB,IAAAwtB,EAAW0K,EAAUl4B,CAAC,EACtB,CAAC2uB,GAASA,IAAUnB,EAAS,MAC7BA,EAAS,KAAKP,CAAa,EAG3BkL,EAAc,KAAK3K,CAAQ,CAC/B,CAEJ,YAAK,UAAY2K,EACV,IACX,EACA5D,EAAQ,UAAU,UAAY,SAAUxxB,EAAQg1B,EAAKK,EAAgB,CACvDC,GAAA,KAAMt1B,EAAQg1B,EAAKK,CAAc,CAC/C,EACA7D,EAAQ,UAAU,YAAc,SAAUxxB,EAAQg1B,EAAKK,EAAgB,CACnEC,GAAU,KAAMt1B,EAAQg1B,EAAKK,EAAgB,EAAI,CACrD,EACA7D,EAAQ,UAAU,iBAAmB,SAAU0B,EAAWlzB,EAAQg1B,EAAKK,EAAgB,CAEnF,QADIF,EAAYG,GAAU,KAAMt1B,EAAQg1B,EAAKK,CAAc,EAClDp4B,EAAI,EAAGA,EAAIk4B,EAAU,OAAQl4B,IACxBk4B,EAAAl4B,CAAC,EAAE,sBAAwBi2B,CAE7C,EACA1B,EAAQ,UAAU,gBAAkB,UAAY,CACrC,OAAA,IACX,EACAA,EAAQ,UAAU,aAAe,UAAY,CAClC,OAAA,IACX,EACAA,EAAQ,iBAAoB,UAAY,CACpC,IAAI+D,EAAU/D,EAAQ,UACtB+D,EAAQ,KAAO,UACfA,EAAQ,KAAO,GACfA,EAAQ,OACJA,EAAQ,OACJA,EAAQ,QACJA,EAAQ,UACJA,EAAQ,SACJA,EAAQ,WACJA,EAAQ,UAAY,GAC5CA,EAAQ,QAAU1b,GAQlB,SAAS2b,EAAqB11B,EAAK21B,EAAYC,EAAMC,EAAM,CAChD,OAAA,eAAeJ,EAASz1B,EAAK,CAChC,IAAK,UAAY,CAIT,GAAA,CAAC,KAAK21B,CAAU,EAAG,CACnB,IAAI5nB,EAAM,KAAK4nB,CAAU,EAAI,CAAC,EAC9BG,EAAa,KAAM/nB,CAAG,CAAA,CAE1B,OAAO,KAAK4nB,CAAU,CAC1B,EACA,IAAK,SAAU5nB,EAAK,CAIX,KAAA6nB,CAAI,EAAI7nB,EAAI,CAAC,EACb,KAAA8nB,CAAI,EAAI9nB,EAAI,CAAC,EAClB,KAAK4nB,CAAU,EAAI5nB,EACnB+nB,EAAa,KAAM/nB,CAAG,CAAA,CAC1B,CACH,EACQ,SAAA+nB,EAAa9L,EAAMjc,EAAK,CACtB,OAAA,eAAeA,EAAK,EAAG,CAC1B,IAAK,UAAY,CACb,OAAOic,EAAK4L,CAAI,CACpB,EACA,IAAK,SAAUp3B,EAAK,CAChBwrB,EAAK4L,CAAI,EAAIp3B,CAAA,CACjB,CACH,EACM,OAAA,eAAeuP,EAAK,EAAG,CAC1B,IAAK,UAAY,CACb,OAAOic,EAAK6L,CAAI,CACpB,EACA,IAAK,SAAUr3B,EAAK,CAChBwrB,EAAK6L,CAAI,EAAIr3B,CAAA,CACjB,CACH,CAAA,CACL,CAEA,OAAO,iBACck3B,EAAA,WAAY,aAAc,IAAK,GAAG,EAClCA,EAAA,QAAS,eAAgB,SAAU,QAAQ,EAC3CA,EAAA,SAAU,gBAAiB,UAAW,SAAS,EACxE,EACD,EACIhE,CACX,EAAE,EACFnwB,GAAMmwB,GAASnqB,EAAQ,EACvBhG,GAAMmwB,GAASlD,EAAa,EAC5B,SAASgH,GAAUO,EAAY71B,EAAQg1B,EAAKK,EAAgBS,EAAS,CACjEd,EAAMA,GAAO,CAAC,EACd,IAAIG,EAAY,CAAC,EACjBY,GAAiBF,EAAY,GAAIA,EAAY71B,EAAQg1B,EAAKK,EAAgBF,EAAWW,CAAO,EAC5F,IAAIE,EAAcb,EAAU,OACxBc,EAAe,GACfC,EAAUlB,EAAI,KACdmB,EAAanB,EAAI,QACjBoB,EAAS,UAAY,CACNH,EAAA,GACfD,IACIA,GAAe,IACfC,EACOC,GAAWA,IACXC,GAAcA,EAAW,EAExC,EACIE,EAAY,UAAY,CACxBL,IACIA,GAAe,IACfC,EACOC,GAAWA,IACXC,GAAcA,EAAW,EAExC,EACKH,GACDE,GAAWA,EAAQ,EAEnBf,EAAU,OAAS,GAAKH,EAAI,QAC5BG,EAAU,CAAC,EAAE,OAAO,SAAUn1B,EAAQsgB,EAAS,CAC3C0U,EAAI,OAAO1U,CAAO,CAAA,CACrB,EAEL,QAASrjB,EAAI,EAAGA,EAAIk4B,EAAU,OAAQl4B,IAAK,CACnC,IAAAwtB,EAAW0K,EAAUl4B,CAAC,EACtBm5B,GACA3L,EAAS,KAAK2L,CAAM,EAEpBC,GACA5L,EAAS,QAAQ4L,CAAS,EAE1BrB,EAAI,OACKvK,EAAA,SAASuK,EAAI,QAAQ,EAEzBvK,EAAA,MAAMuK,EAAI,MAAM,CAAA,CAEtB,OAAAG,CACX,CACA,SAASmB,GAAe/2B,EAAQS,EAAQL,EAAK,CACzC,QAAS,EAAI,EAAG,EAAIA,EAAK,IACdJ,EAAA,CAAC,EAAIS,EAAO,CAAC,CAE5B,CACA,SAASu2B,GAAUz1B,EAAO,CACf,OAAAU,GAAYV,EAAM,CAAC,CAAC,CAC/B,CACA,SAAS01B,GAAUx2B,EAAQT,EAAQO,EAAK,CACpC,GAAI0B,GAAYjC,EAAOO,CAAG,CAAC,EAIvB,GAHK0B,GAAYxB,EAAOF,CAAG,CAAC,IACjBE,EAAAF,CAAG,EAAI,CAAC,GAEf4C,GAAanD,EAAOO,CAAG,CAAC,EAAG,CACvB,IAAAH,EAAMJ,EAAOO,CAAG,EAAE,OAClBE,EAAOF,CAAG,EAAE,SAAWH,IACvBK,EAAOF,CAAG,EAAI,IAAKP,EAAOO,CAAG,EAAE,YAAaH,CAAG,EAC/C22B,GAAet2B,EAAOF,CAAG,EAAGP,EAAOO,CAAG,EAAGH,CAAG,EAChD,KAEC,CACG,IAAA82B,EAAYl3B,EAAOO,CAAG,EACtB0oB,EAAYxoB,EAAOF,CAAG,EACtBklB,EAAOyR,EAAU,OACjB,GAAAF,GAAUE,CAAS,EAEnB,QADIxR,EAAOwR,EAAU,CAAC,EAAE,OACfx5B,EAAI,EAAGA,EAAI+nB,EAAM/nB,IACjBurB,EAAUvrB,CAAC,EAIZq5B,GAAe9N,EAAUvrB,CAAC,EAAGw5B,EAAUx5B,CAAC,EAAGgoB,CAAI,EAHrCuD,EAAAvrB,CAAC,EAAI,MAAM,UAAU,MAAM,KAAKw5B,EAAUx5B,CAAC,CAAC,OAQ/Cq5B,GAAA9N,EAAWiO,EAAWzR,CAAI,EAE7CwD,EAAU,OAASiO,EAAU,MAAA,MAI1Bz2B,EAAAF,CAAG,EAAIP,EAAOO,CAAG,CAEhC,CACA,SAAS42B,GAAY3R,EAAM4R,EAAM,CACtB,OAAA5R,IAAS4R,GACTn1B,GAAYujB,CAAI,GAAKvjB,GAAYm1B,CAAI,GAAKC,GAAc7R,EAAM4R,CAAI,CAC7E,CACA,SAASC,GAAcrR,EAAMC,EAAM,CAC/B,IAAI7lB,EAAM4lB,EAAK,OACX,GAAA5lB,IAAQ6lB,EAAK,OACN,MAAA,GAEX,QAAS,EAAI,EAAG,EAAI7lB,EAAK,IACrB,GAAI4lB,EAAK,CAAC,IAAMC,EAAK,CAAC,EACX,MAAA,GAGR,MAAA,EACX,CACA,SAASuQ,GAAiBF,EAAYgB,EAAQC,EAAY92B,EAAQg1B,EAAKK,EAAgBF,EAAWW,EAAS,CASvG,QARIiB,EAAap2B,GAAKX,CAAM,EACxBupB,EAAWyL,EAAI,SACfgC,EAAQhC,EAAI,MACZiC,EAAWjC,EAAI,SACfkC,EAAalC,EAAI,WACjBmC,EAAa,CAACj3B,EAASm1B,CAAc,EACrC+B,EAAkBvB,EAAW,UAC7BwB,EAAgB,CAAC,EACZxe,EAAI,EAAGA,EAAIke,EAAW,OAAQle,IAAK,CACpC,IAAAye,EAAWP,EAAWle,CAAC,EACvB0e,EAAYv3B,EAAOs3B,CAAQ,EAC3B,GAAAC,GAAa,MAAQT,EAAWQ,CAAQ,GAAK,OACzCH,GAAc9B,EAAeiC,CAAQ,GACrC,GAAAp3B,EAASq3B,CAAS,GACf,CAAC/1B,GAAY+1B,CAAS,GACtB,CAAC50B,GAAiB40B,CAAS,EAAG,CACjC,GAAIV,EAAQ,CACHf,IACDgB,EAAWQ,CAAQ,EAAIC,EACvB1B,EAAW,sBAAsBgB,CAAM,GAE3C,QAAA,CAEJd,GAAiBF,EAAYyB,EAAUR,EAAWQ,CAAQ,EAAGC,EAAWvC,EAAKK,GAAkBA,EAAeiC,CAAQ,EAAGnC,EAAWW,CAAO,CAAA,MAG3IuB,EAAc,KAAKC,CAAQ,OAGzBxB,IACNgB,EAAWQ,CAAQ,EAAIC,EACvB1B,EAAW,sBAAsBgB,CAAM,EACvCQ,EAAc,KAAKC,CAAQ,EAC/B,CAEJ,IAAIE,EAASH,EAAc,OACvB,GAAA,CAACJ,GAAYO,EACb,QAASv6B,EAAI,EAAGA,EAAIm6B,EAAgB,OAAQn6B,IAAK,CACzC,IAAAwtB,EAAW2M,EAAgBn6B,CAAC,EAC5B,GAAAwtB,EAAS,aAAeoM,EAAQ,CAC5B,IAAA1M,EAAaM,EAAS,WAAW4M,CAAa,EAClD,GAAIlN,EAAY,CACR,IAAAhP,EAAMva,EAAQw2B,EAAiB3M,CAAQ,EAC3B2M,EAAA,OAAOjc,EAAK,CAAC,CAAA,CACjC,CACJ,CAOR,GAJK6Z,EAAI,QACWqC,EAAAr1B,GAAOq1B,EAAe,SAAUv3B,EAAK,CAAE,MAAO,CAAC42B,GAAY12B,EAAOF,CAAG,EAAGg3B,EAAWh3B,CAAG,CAAC,CAAA,CAAI,EAC3G03B,EAASH,EAAc,QAEvBG,EAAS,GACLxC,EAAI,OAAS,CAACG,EAAU,OAAS,CACrC,IAAIsC,EAAiB,OACjBC,EAAiB,OACjBC,EAAc,OAClB,GAAI7B,EAAS,CACT4B,EAAiB,CAAC,EACdR,IACAO,EAAiB,CAAC,GAEtB,QAASx6B,EAAI,EAAGA,EAAIu6B,EAAQv6B,IAAK,CACzB,IAAAq6B,EAAWD,EAAcp6B,CAAC,EACfy6B,EAAAJ,CAAQ,EAAIR,EAAWQ,CAAQ,EAC1CJ,EACeO,EAAAH,CAAQ,EAAIt3B,EAAOs3B,CAAQ,EAG/BR,EAAAQ,CAAQ,EAAIt3B,EAAOs3B,CAAQ,CAC1C,UAGCJ,EAAY,CACjBS,EAAc,CAAC,EACf,QAAS16B,EAAI,EAAGA,EAAIu6B,EAAQv6B,IAAK,CACzB,IAAAq6B,EAAWD,EAAcp6B,CAAC,EAC9B06B,EAAYL,CAAQ,EAAI1R,GAAWkR,EAAWQ,CAAQ,CAAC,EAC7Cd,GAAAM,EAAY92B,EAAQs3B,CAAQ,CAAA,CAC1C,CAEA,IAAA7M,EAAW,IAAI5B,GAASiO,EAAY,GAAO,GAAOG,EAAWj1B,GAAOo1B,EAAiB,SAAU3M,EAAU,CAAE,OAAOA,EAAS,aAAeoM,CAAS,CAAA,EAAI,IAAI,EAC/JpM,EAAS,WAAaoM,EAClB7B,EAAI,QACJvK,EAAS,MAAQuK,EAAI,OAErBkC,GAAcO,GACLhN,EAAA,aAAa,EAAGgN,EAAgBJ,CAAa,EAEtDM,GACSlN,EAAA,aAAa,EAAGkN,EAAaN,CAAa,EAEvD5M,EAAS,aAAalB,GAAmB,IAAgBuM,EAAU4B,EAAiB13B,EAAQq3B,CAAa,EAAE,MAAML,GAAS,CAAC,EAChHnB,EAAA,YAAYpL,EAAUoM,CAAM,EACvC1B,EAAU,KAAK1K,CAAQ,CAAA,CAE/B,CCphCA,IAAImN,GAAS,SAAUrkB,EAAQ,CAC3BC,EAAUokB,EAAOrkB,CAAM,EACvB,SAASqkB,EAAM3X,EAAM,CACjB,IAAIxM,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAE,EAAM,QAAU,GAChBA,EAAM,UAAY,CAAC,EACnBA,EAAM,KAAKwM,CAAI,EACRxM,CAAA,CAEXmkB,OAAAA,EAAM,UAAU,YAAc,UAAY,CACtC,OAAO,KAAK,SAChB,EACAA,EAAM,UAAU,SAAW,UAAY,CAC5B,OAAA,KAAK,UAAU,MAAM,CAChC,EACAA,EAAM,UAAU,QAAU,SAAUzc,EAAK,CAC9B,OAAA,KAAK,UAAUA,CAAG,CAC7B,EACAyc,EAAM,UAAU,YAAc,SAAUxqB,EAAM,CAE1C,QADIyN,EAAW,KAAK,UACX5d,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IACjC,GAAI4d,EAAS5d,CAAC,EAAE,OAASmQ,EACrB,OAAOyN,EAAS5d,CAAC,CAG7B,EACA26B,EAAM,UAAU,WAAa,UAAY,CACrC,OAAO,KAAK,UAAU,MAC1B,EACAA,EAAM,UAAU,IAAM,SAAU9c,EAAO,CACnC,OAAIA,GACIA,IAAU,MAAQA,EAAM,SAAW,OAC9B,KAAA,UAAU,KAAKA,CAAK,EACzB,KAAK,OAAOA,CAAK,GAQlB,IACX,EACA8c,EAAM,UAAU,UAAY,SAAU9c,EAAO+c,EAAa,CAClD,GAAA/c,GAASA,IAAU,MAAQA,EAAM,SAAW,MACzC+c,GAAeA,EAAY,SAAW,KAAM,CAC/C,IAAIhd,EAAW,KAAK,UAChBM,EAAMN,EAAS,QAAQgd,CAAW,EAClC1c,GAAO,IACEN,EAAA,OAAOM,EAAK,EAAGL,CAAK,EAC7B,KAAK,OAAOA,CAAK,EACrB,CAEG,OAAA,IACX,EACA8c,EAAM,UAAU,QAAU,SAAUE,EAAUC,EAAU,CACpD,IAAI5c,EAAM6c,EAAe,KAAK,UAAWF,CAAQ,EACjD,OAAI3c,GAAO,GACF,KAAA,UAAU4c,EAAU5c,CAAG,EAEzB,IACX,EACAyc,EAAM,UAAU,UAAY,SAAU9c,EAAOmd,EAAO,CAChD,IAAIpd,EAAW,KAAK,UAChBqd,EAAMrd,EAASod,CAAK,EACxB,GAAInd,GAASA,IAAU,MAAQA,EAAM,SAAW,MAAQA,IAAUod,EAAK,CACnErd,EAASod,CAAK,EAAInd,EAClBod,EAAI,OAAS,KACb,IAAIpD,EAAK,KAAK,KACVA,GACAoD,EAAI,iBAAiBpD,CAAE,EAE3B,KAAK,OAAOha,CAAK,CAAA,CAEd,OAAA,IACX,EACA8c,EAAM,UAAU,OAAS,SAAU9c,EAAO,CAClCA,EAAM,QACAA,EAAA,OAAO,OAAOA,CAAK,EAE7BA,EAAM,OAAS,KACf,IAAIga,EAAK,KAAK,KACVA,GAAMA,IAAOha,EAAM,MACnBA,EAAM,YAAYga,CAAE,EAExBA,GAAMA,EAAG,QAAQ,CACrB,EACA8C,EAAM,UAAU,OAAS,SAAU9c,EAAO,CACtC,IAAIga,EAAK,KAAK,KACVja,EAAW,KAAK,UAChBM,EAAM6c,EAAend,EAAUC,CAAK,EACxC,OAAIK,EAAM,EACC,MAEFN,EAAA,OAAOM,EAAK,CAAC,EACtBL,EAAM,OAAS,KACXga,GACAha,EAAM,iBAAiBga,CAAE,EAE7BA,GAAMA,EAAG,QAAQ,EACV,KACX,EACA8C,EAAM,UAAU,UAAY,UAAY,CAGpC,QAFI/c,EAAW,KAAK,UAChBia,EAAK,KAAK,KACL73B,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IAAK,CAClC,IAAA6d,EAAQD,EAAS5d,CAAC,EAClB63B,GACAha,EAAM,iBAAiBga,CAAE,EAE7Bha,EAAM,OAAS,IAAA,CAEnB,OAAAD,EAAS,OAAS,EACX,IACX,EACA+c,EAAM,UAAU,UAAY,SAAUh2B,EAAIC,EAAS,CAE/C,QADIgZ,EAAW,KAAK,UACX5d,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IAAK,CAClC,IAAA6d,EAAQD,EAAS5d,CAAC,EACnB2E,EAAA,KAAKC,EAASiZ,EAAO7d,CAAC,CAAA,CAEtB,OAAA,IACX,EACA26B,EAAM,UAAU,SAAW,SAAUh2B,EAAIC,EAAS,CAC9C,QAAS5E,EAAI,EAAGA,EAAI,KAAK,UAAU,OAAQA,IAAK,CACxC,IAAA6d,EAAQ,KAAK,UAAU7d,CAAC,EACxBk7B,EAAUv2B,EAAG,KAAKC,EAASiZ,CAAK,EAChCA,EAAM,SAAW,CAACqd,GACZrd,EAAA,SAASlZ,EAAIC,CAAO,CAC9B,CAEG,OAAA,IACX,EACA+1B,EAAM,UAAU,YAAc,SAAU9C,EAAI,CACxCvhB,EAAO,UAAU,YAAY,KAAK,KAAMuhB,CAAE,EAC1C,QAAS,EAAI,EAAG,EAAI,KAAK,UAAU,OAAQ,IAAK,CACxC,IAAAha,EAAQ,KAAK,UAAU,CAAC,EAC5BA,EAAM,YAAYga,CAAE,CAAA,CAE5B,EACA8C,EAAM,UAAU,iBAAmB,SAAU9C,EAAI,CAC7CvhB,EAAO,UAAU,iBAAiB,KAAK,KAAMuhB,CAAE,EAC/C,QAAS,EAAI,EAAG,EAAI,KAAK,UAAU,OAAQ,IAAK,CACxC,IAAAha,EAAQ,KAAK,UAAU,CAAC,EAC5BA,EAAM,iBAAiBga,CAAE,CAAA,CAEjC,EACA8C,EAAM,UAAU,gBAAkB,SAAUQ,EAAiB,CAKzD,QAJIxkB,EAAU,IAAIvC,GAAa,EAAG,EAAG,EAAG,CAAC,EACrCwJ,EAAWud,GAAmB,KAAK,UACnCC,EAAS,CAAC,EACV5sB,EAAO,KACFxO,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IAAK,CAClC,IAAA6d,EAAQD,EAAS5d,CAAC,EAClB,GAAA,EAAA6d,EAAM,QAAUA,EAAM,WAGtB,KAAAwd,EAAYxd,EAAM,gBAAgB,EAClC0U,EAAY1U,EAAM,kBAAkBud,CAAM,EAC1C7I,GACane,GAAA,eAAeuC,EAAS0kB,EAAW9I,CAAS,EAClD/jB,EAAAA,GAAQmI,EAAQ,MAAM,EAC7BnI,EAAK,MAAMmI,CAAO,IAGXnI,EAAAA,GAAQ6sB,EAAU,MAAM,EAC/B7sB,EAAK,MAAM6sB,CAAS,GACxB,CAEJ,OAAO7sB,GAAQmI,CACnB,EACOgkB,CACX,EAAEpG,EAAO,EACToG,GAAM,UAAU,KAAO,QCjLvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAkBA,IAAIW,GAAe,CAAC,EAChBC,GAAY,CAAC,EACjB,SAASC,GAAYC,EAAI,CACrB,OAAOF,GAAUE,CAAE,CACvB,CACA,SAASC,GAAWnG,EAAiB,CACjC,GAAI,CAACA,EACM,MAAA,GAEP,GAAA,OAAOA,GAAoB,SACpB,OAAA1O,GAAI0O,EAAiB,CAAC,EAAI5E,GACrC,GACS4E,EAAgB,WAAY,CAIjC,QAHIoG,EAAapG,EAAgB,WAC7BqG,EAAW,EACXl5B,EAAMi5B,EAAW,OACZ37B,EAAI,EAAGA,EAAI0C,EAAK1C,IACrB47B,GAAY/U,GAAI8U,EAAW37B,CAAC,EAAE,MAAO,CAAC,EAE9B,OAAA47B,GAAAl5B,EACLk5B,EAAWjL,EAAA,CAEf,MAAA,EACX,CACA,IAAIkL,GAAW,UAAY,CACdA,SAAAA,EAAQJ,EAAI1zB,EAAKib,EAAM,CAC5B,IAAIxM,EAAQ,KACZ,KAAK,iBAAmB,GACxB,KAAK,iBAAmB,EACxB,KAAK,cAAgB,GACrB,KAAK,mBAAqB,GAC1B,KAAK,UAAY,GACjBwM,EAAOA,GAAQ,CAAC,EAChB,KAAK,IAAMjb,EACX,KAAK,GAAK0zB,EACN,IAAA5kB,EAAU,IAAIqG,GACd4e,EAAe9Y,EAAK,UAAY,SAC/BsY,GAAaQ,CAAY,IAC1BA,EAAeC,GAAYT,EAAY,EAAE,CAAC,GAO9CtY,EAAK,aAAeA,EAAK,cAAgB,KACnC,GACAA,EAAK,aACP,IAAAlM,EAAU,IAAIwkB,GAAaQ,CAAY,EAAE/zB,EAAK8O,EAASmM,EAAMyY,CAAE,EAC/DO,EAAUhZ,EAAK,KAAOlM,EAAQ,QAClC,KAAK,QAAUD,EACf,KAAK,QAAUC,EACf,IAAImlB,EAAgB,CAACn9B,EAAI,MAAQ,CAACA,EAAI,QAAU,CAACk9B,EAC3C,IAAIE,GAAaplB,EAAQ,gBAAmB,EAAAA,EAAQ,IAAI,EACxD,KACFqlB,EAAmBnZ,EAAK,iBACxBoZ,EAAkBD,GAAoB,MAAQA,IAAqB,OACjEr9B,EAAI,qBACJ,CAAC,CAACq9B,EACJE,EAAqB,GACrBplB,EACAmlB,IACAnlB,EAAcqlB,EAAiBtZ,EAAK,YAAaqZ,CAAkB,GAElE,KAAA,QAAU,IAAIzlB,GAAQC,EAASC,EAASmlB,EAAcnlB,EAAQ,KAAMG,CAAW,EAC/E,KAAA,UAAY,IAAIsW,GAAU,CAC3B,MAAO,CACH,OAAQyO,EAAU,KAAO,UAAY,CAAS,OAAAxlB,EAAM,OAAO,EAAI,CAAA,CAAG,CACtE,CACH,EACIwlB,GACD,KAAK,UAAU,MAAM,CACzB,CAEJH,OAAAA,EAAQ,UAAU,IAAM,SAAUxuB,EAAI,CAC9B,KAAK,WAAa,CAACA,IAGlB,KAAA,QAAQ,QAAQA,CAAE,EACvBA,EAAG,YAAY,IAAI,EACnB,KAAK,QAAQ,EACjB,EACAwuB,EAAQ,UAAU,OAAS,SAAUxuB,EAAI,CACjC,KAAK,WAAa,CAACA,IAGlB,KAAA,QAAQ,QAAQA,CAAE,EACvBA,EAAG,iBAAiB,IAAI,EACxB,KAAK,QAAQ,EACjB,EACAwuB,EAAQ,UAAU,YAAc,SAAUU,EAAQC,EAAQ,CAClD,KAAK,YAGL,KAAK,QAAQ,aACR,KAAA,QAAQ,YAAYD,EAAQC,CAAM,EAE3C,KAAK,QAAQ,EACjB,EACAX,EAAQ,UAAU,mBAAqB,SAAUtG,EAAiB,CAC1D,KAAK,YAGL,KAAK,QAAQ,oBACR,KAAA,QAAQ,mBAAmBA,CAAe,EAEnD,KAAK,QAAQ,EACb,KAAK,iBAAmBA,EACnB,KAAA,UAAYmG,GAAWnG,CAAe,EAC/C,EACAsG,EAAQ,UAAU,mBAAqB,UAAY,CAC/C,OAAO,KAAK,gBAChB,EACAA,EAAQ,UAAU,YAAc,SAAUY,EAAU,CAChD,KAAK,UAAYA,CACrB,EACAZ,EAAQ,UAAU,WAAa,UAAY,CACvC,OAAO,KAAK,SAChB,EACAA,EAAQ,UAAU,mBAAqB,SAAUa,EAAY,CACrD,KAAK,YAGJA,GACI,KAAA,UAAU,OAAO,EAAI,EAE9B,KAAK,cAAgB,GACrB,KAAK,QAAQ,QAAQ,EACrB,KAAK,cAAgB,GACzB,EACAb,EAAQ,UAAU,QAAU,UAAY,CAChC,KAAK,YAGT,KAAK,cAAgB,GACrB,KAAK,UAAU,MAAM,EACzB,EACAA,EAAQ,UAAU,MAAQ,UAAY,CAC9B,KAAK,WAGT,KAAK,OAAO,EAAK,CACrB,EACAA,EAAQ,UAAU,OAAS,SAAUa,EAAY,CACzC,IAAAC,EACAziB,EAAQoT,GAAQ,EAChB,KAAK,gBACaqP,EAAA,GAClB,KAAK,mBAAmBD,CAAU,GAElC,KAAK,qBACaC,EAAA,GAClB,KAAK,wBAAwB,GAEjC,IAAIC,EAAMtP,GAAQ,EACdqP,GACA,KAAK,iBAAmB,EACxB,KAAK,QAAQ,WAAY,CACrB,YAAaC,EAAM1iB,CAAA,CACtB,GAEI,KAAK,iBAAmB,IACxB,KAAA,mBACD,KAAK,iBAAmB,KAAK,kBAC7B,KAAK,UAAU,KAAK,EAGhC,EACA2hB,EAAQ,UAAU,mBAAqB,SAAUgB,EAAkB,CAC/D,KAAK,iBAAmBA,CAC5B,EACAhB,EAAQ,UAAU,OAAS,UAAY,CAC/B,KAAK,YAGT,KAAK,UAAU,MAAM,EACrB,KAAK,iBAAmB,EAC5B,EACAA,EAAQ,UAAU,aAAe,UAAY,CACzC,KAAK,mBAAqB,EAC9B,EACAA,EAAQ,UAAU,wBAA0B,UAAY,CAChD,KAAK,YAGT,KAAK,mBAAqB,GACtB,KAAK,QAAQ,cAAgB,KAAK,QAAQ,YAAc,UACxD,KAAK,QAAQ,aAAa,EAElC,EACAA,EAAQ,UAAU,OAAS,SAAU7Y,EAAM,CACnC,KAAK,YAGTA,EAAOA,GAAQ,CAAC,EAChB,KAAK,QAAQ,OAAOA,EAAK,MAAOA,EAAK,MAAM,EAC3C,KAAK,QAAQ,OAAO,EACxB,EACA6Y,EAAQ,UAAU,eAAiB,UAAY,CACvC,KAAK,WAGT,KAAK,UAAU,MAAM,CACzB,EACAA,EAAQ,UAAU,SAAW,UAAY,CACrC,GAAI,MAAK,UAGF,OAAA,KAAK,QAAQ,SAAS,CACjC,EACAA,EAAQ,UAAU,UAAY,UAAY,CACtC,GAAI,MAAK,UAGF,OAAA,KAAK,QAAQ,UAAU,CAClC,EACAA,EAAQ,UAAU,eAAiB,SAAUlkB,EAAa,CAClD,KAAK,WAGJ,KAAA,QAAQ,eAAeA,CAAW,CAC3C,EACAkkB,EAAQ,UAAU,UAAY,SAAUvzB,EAAGC,EAAG,CAC1C,GAAI,MAAK,UAGT,OAAO,KAAK,QAAQ,UAAUD,EAAGC,CAAC,CACtC,EACAszB,EAAQ,UAAU,GAAK,SAAUhxB,EAAWiyB,EAAcl4B,EAAS,CAC3D,OAAC,KAAK,WACN,KAAK,QAAQ,GAAGiG,EAAWiyB,EAAcl4B,CAAO,EAE7C,IACX,EACAi3B,EAAQ,UAAU,IAAM,SAAUhxB,EAAWiyB,EAAc,CACnD,KAAK,WAGJ,KAAA,QAAQ,IAAIjyB,EAAWiyB,CAAY,CAC5C,EACAjB,EAAQ,UAAU,QAAU,SAAUhxB,EAAWP,EAAO,CAChD,KAAK,WAGJ,KAAA,QAAQ,QAAQO,EAAWP,CAAK,CACzC,EACAuxB,EAAQ,UAAU,MAAQ,UAAY,CAClC,GAAI,MAAK,UAIT,SADIve,EAAQ,KAAK,QAAQ,SAAS,EACzBtd,EAAI,EAAGA,EAAIsd,EAAM,OAAQtd,IAC1Bsd,EAAMtd,CAAC,YAAa26B,IACdrd,EAAAtd,CAAC,EAAE,iBAAiB,IAAI,EAGtC,KAAK,QAAQ,YAAY,EACzB,KAAK,QAAQ,MAAM,EACvB,EACA67B,EAAQ,UAAU,QAAU,UAAY,CAChC,KAAK,YAGT,KAAK,UAAU,KAAK,EACpB,KAAK,MAAM,EACX,KAAK,QAAQ,QAAQ,EACrB,KAAK,QAAQ,QAAQ,EACrB,KAAK,QAAQ,QAAQ,EACrB,KAAK,UACD,KAAK,QACD,KAAK,QACD,KAAK,QAAU,KAC3B,KAAK,UAAY,GACjBL,GAAY,KAAK,EAAE,EACvB,EACOK,CACX,EAAE,EACc,SAAAkB,GAAKh1B,EAAKib,EAAM,CAC5B,IAAI6U,EAAK,IAAIgE,GAAQmB,GAAY,EAAGj1B,EAAKib,CAAI,EACnCuY,OAAAA,GAAA1D,EAAG,EAAE,EAAIA,EACZA,CACX,CAegB,SAAAoF,GAAgB9sB,EAAMxN,EAAM,CACxC24B,GAAanrB,CAAI,EAAIxN,CACzB,CCxQA,IAAIu6B,GAAiB,KAGjBC,GAAgC,GACpC,SAASC,GAAM52B,EAAK,CAClB,OAAOA,EAAI,QAAQ,aAAc,EAAE,CACrC,CAQO,SAAS62B,GAAUh8B,EAAKi8B,EAAQC,EAAOC,EAAO,CACnD,IAAIjoB,EAAK+nB,EAAO,CAAC,EACb9nB,EAAK8nB,EAAO,CAAC,EACbG,EAAKF,EAAM,CAAC,EACZG,EAAKH,EAAM,CAAC,EACZI,EAAYnoB,EAAKD,EACjBqoB,EAAWF,EAAKD,EACpB,GAAIE,IAAc,EAChB,OAAOC,IAAa,EAAIH,GAAMA,EAAKC,GAAM,EAO3C,GAAIF,EACF,GAAIG,EAAY,EAAG,CACjB,GAAIt8B,GAAOkU,EACT,OAAOkoB,EACF,GAAIp8B,GAAOmU,EAChB,OAAOkoB,CAEf,KAAW,CACL,GAAIr8B,GAAOkU,EACT,OAAOkoB,EACF,GAAIp8B,GAAOmU,EAChB,OAAOkoB,CAEf,KACS,CACL,GAAIr8B,IAAQkU,EACV,OAAOkoB,EAET,GAAIp8B,IAAQmU,EACV,OAAOkoB,CAEb,CACE,OAAQr8B,EAAMkU,GAAMooB,EAAYC,EAAWH,CAC7C,CAKO,SAAS7J,GAAavQ,EAASwa,EAAK,CACzC,OAAQxa,EAAO,CACb,IAAK,SACL,IAAK,SACHA,EAAU,MACV,MACF,IAAK,OACL,IAAK,MACHA,EAAU,KACV,MACF,IAAK,QACL,IAAK,SACHA,EAAU,OACV,KACN,CACE,OAAIya,EAAgBza,CAAO,EACrB+Z,GAAM/Z,CAAO,EAAE,MAAM,IAAI,EACpB,WAAWA,CAAO,EAAI,IAAMwa,EAE9B,WAAWxa,CAAO,EAEpBA,GAAW,KAAO,IAAM,CAACA,CAClC,CACO,SAAS0a,GAAMz1B,EAAG01B,EAAWC,EAAW,CAC7C,OAAID,GAAa,OACfA,EAAY,IAGdA,EAAY,KAAK,IAAI,KAAK,IAAI,EAAGA,CAAS,EAAGb,EAA6B,EAE1E70B,GAAK,CAACA,GAAG,QAAQ01B,CAAS,EACnBC,EAAY31B,EAAI,CAACA,CAC1B,CAKO,SAAS41B,GAAIx5B,EAAK,CACvB,OAAAA,EAAI,KAAK,SAAU4C,EAAGC,EAAG,CACvB,OAAOD,EAAIC,CACf,CAAG,EACM7C,CACT,CAIO,SAASy5B,GAAa98B,EAAK,CAEhC,GADAA,EAAM,CAACA,EACH,MAAMA,CAAG,EACX,MAAO,GAWT,GAAIA,EAAM,OAER,QADIyI,EAAI,EACC9J,EAAI,EAAGA,EAAI,GAAIA,IAAK8J,GAAK,GAChC,GAAI,KAAK,MAAMzI,EAAMyI,CAAC,EAAIA,IAAMzI,EAC9B,OAAOrB,EAIb,OAAOo+B,GAAiB/8B,CAAG,CAC7B,CAIO,SAAS+8B,GAAiB/8B,EAAK,CAEpC,IAAImF,EAAMnF,EAAI,SAAQ,EAAG,YAAa,EAElCg9B,EAAS73B,EAAI,QAAQ,GAAG,EACxB83B,EAAMD,EAAS,EAAI,CAAC73B,EAAI,MAAM63B,EAAS,CAAC,EAAI,EAC5CE,EAAqBF,EAAS,EAAIA,EAAS73B,EAAI,OAC/Cg4B,EAAWh4B,EAAI,QAAQ,GAAG,EAC1Bi4B,EAAiBD,EAAW,EAAI,EAAID,EAAqB,EAAIC,EACjE,OAAO,KAAK,IAAI,EAAGC,EAAiBH,CAAG,CACzC,CAIO,SAASI,GAAkBC,EAAYC,EAAa,CACzD,IAAIC,EAAM,KAAK,IACXC,EAAO,KAAK,KACZC,EAAe,KAAK,MAAMF,EAAIF,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EAAIG,CAAI,EACnEE,EAAe,KAAK,MAAMH,EAAI,KAAK,IAAID,EAAY,CAAC,EAAIA,EAAY,CAAC,CAAC,CAAC,EAAIE,CAAI,EAE/Ed,EAAY,KAAK,IAAI,KAAK,IAAI,CAACe,EAAeC,EAAc,CAAC,EAAG,EAAE,EACtE,OAAQ,SAAShB,CAAS,EAASA,EAAL,EAChC,CA2EO,SAASiB,GAAQpX,EAAMC,EAAM,CAClC,IAAIoX,EAAe,KAAK,IAAIf,GAAatW,CAAI,EAAGsW,GAAarW,CAAI,CAAC,EAG9D7b,EAAM4b,EAAOC,EAEjB,OAAOoX,EAAe/B,GAAgClxB,EAAM8xB,GAAM9xB,EAAKizB,CAAY,CACrF,CAMO,SAASC,GAAUC,EAAQ,CAChC,IAAIC,EAAM,KAAK,GAAK,EACpB,OAAQD,EAASC,EAAMA,GAAOA,CAChC,CAKO,SAASC,GAAmBj+B,EAAK,CACtC,OAAOA,EAAM,OAAmBA,EAAM67B,EACxC,CAEA,IAAIqC,GAAW,0IAiBR,SAASC,GAAU37B,EAAO,CAC/B,GAAIA,aAAiB,KACnB,OAAOA,EACF,GAAIi6B,EAAgBj6B,CAAK,EAAG,CAMjC,IAAI47B,EAAQF,GAAS,KAAK17B,CAAK,EAC/B,GAAI,CAAC47B,EAEH,OAAO,IAAI,KAAK,GAAG,EAGrB,GAAKA,EAAM,CAAC,EAYP,CACH,IAAIC,EAAO,CAACD,EAAM,CAAC,GAAK,EACxB,OAAIA,EAAM,CAAC,EAAE,YAAW,IAAO,MAC7BC,GAAQ,CAACD,EAAM,CAAC,EAAE,MAAM,EAAG,CAAC,GAEvB,IAAI,KAAK,KAAK,IAAI,CAACA,EAAM,CAAC,EAAG,EAAEA,EAAM,CAAC,GAAK,GAAK,EAAG,CAACA,EAAM,CAAC,GAAK,EAAGC,EAAM,EAAED,EAAM,CAAC,GAAK,GAAI,CAACA,EAAM,CAAC,GAAK,EAAGA,EAAM,CAAC,EAAI,CAACA,EAAM,CAAC,EAAE,UAAU,EAAG,CAAC,EAAI,CAAC,CAAC,CACjK,KAfM,QAAO,IAAI,KAAK,CAACA,EAAM,CAAC,EAAG,EAAEA,EAAM,CAAC,GAAK,GAAK,EAAG,CAACA,EAAM,CAAC,GAAK,EAAG,CAACA,EAAM,CAAC,GAAK,EAAG,EAAEA,EAAM,CAAC,GAAK,GAAI,CAACA,EAAM,CAAC,GAAK,EAAGA,EAAM,CAAC,EAAI,CAACA,EAAM,CAAC,EAAE,UAAU,EAAG,CAAC,EAAI,CAAC,CAgBjK,SAAa57B,GAAS,KAClB,OAAO,IAAI,KAAK,GAAG,EAErB,OAAO,IAAI,KAAK,KAAK,MAAMA,CAAK,CAAC,CACnC,CAOO,SAAS87B,GAASt+B,EAAK,CAC5B,OAAO,KAAK,IAAI,GAAIu+B,GAAiBv+B,CAAG,CAAC,CAC3C,CAQO,SAASu+B,GAAiBv+B,EAAK,CACpC,GAAIA,IAAQ,EACV,MAAO,GAET,IAAIi9B,EAAM,KAAK,MAAM,KAAK,IAAIj9B,CAAG,EAAI,KAAK,IAAI,EAM9C,OAAIA,EAAM,KAAK,IAAI,GAAIi9B,CAAG,GAAK,IAC7BA,IAEKA,CACT,CAYO,SAASuB,GAAKx+B,EAAK08B,EAAO,CAC/B,IAAI+B,EAAWF,GAAiBv+B,CAAG,EAC/B0+B,EAAQ,KAAK,IAAI,GAAID,CAAQ,EAC7B1b,EAAI/iB,EAAM0+B,EACVC,EAEF,OAAI5b,EAAI,IACN4b,EAAK,EACI5b,EAAI,IACb4b,EAAK,EACI5b,EAAI,EACb4b,EAAK,EACI5b,EAAI,EACb4b,EAAK,EAELA,EAAK,GAeT3+B,EAAM2+B,EAAKD,EAGJD,GAAY,IAAM,CAACz+B,EAAI,QAAQy+B,EAAW,EAAI,CAACA,EAAW,CAAC,EAAIz+B,CACxE,CAgFO,SAAS4+B,GAAgB5+B,EAAK,CACnC,IAAI6+B,EAAW,WAAW7+B,CAAG,EAC7B,OAAO6+B,GAAY7+B,IACf6+B,IAAa,GAAK,CAACpC,EAAgBz8B,CAAG,GAAKA,EAAI,QAAQ,GAAG,GAAK,GACjE6+B,EAAW,GACf,CAIO,SAASC,GAAU9+B,EAAK,CAC7B,MAAO,CAAC,MAAM4+B,GAAgB5+B,CAAG,CAAC,CACpC,CAMO,SAAS++B,IAAkB,CAChC,OAAO,KAAK,MAAM,KAAK,OAAM,EAAK,CAAC,CACrC,CAOO,SAASC,GAAyB/4B,EAAGC,EAAG,CAC7C,OAAIA,IAAM,EACDD,EAEF+4B,GAAyB94B,EAAGD,EAAIC,CAAC,CAC1C,CAOO,SAAS+4B,GAAuBh5B,EAAGC,EAAG,CAC3C,OAAID,GAAK,KACAC,EAELA,GAAK,KACAD,EAEFA,EAAIC,EAAI84B,GAAyB/4B,EAAGC,CAAC,CAC9C,CC/aO,SAASg5B,GAAWC,EAAK,CACxB,MAAA,IAAI,MAAMA,CAAG,CACrB,CCtFA,SAASlZ,GAAkB9T,EAAIC,EAAI4P,EAAS,CAClC,OAAA5P,EAAKD,GAAM6P,EAAU7P,CAC/B,CAMA,IAAIitB,GAA8B,WAC9BC,GAA+B,WAM5B,SAASC,GAAiB98B,EAAO,CAC/B,OAAAA,aAAiB,MAAQA,EAAQA,GAAS,KAAO,CAAA,EAAK,CAACA,CAAK,CACrE,CAagB,SAAA+8B,GAAgBxwB,EAAKvN,EAAKg+B,EAAS,CAEjD,GAAIzwB,EAAK,CACPA,EAAIvN,CAAG,EAAIuN,EAAIvN,CAAG,GAAK,CAAC,EACpBuN,EAAA,SAAWA,EAAI,UAAY,CAAC,EAChCA,EAAI,SAASvN,CAAG,EAAIuN,EAAI,SAASvN,CAAG,GAAK,CAAC,EAE1C,QAAS,EAAI,EAAGH,EAAMm+B,EAAQ,OAAQ,EAAIn+B,EAAK,IAAK,CAC9C,IAAAo+B,EAAaD,EAAQ,CAAC,EACtB,CAACzwB,EAAI,SAASvN,CAAG,EAAE,eAAei+B,CAAU,GAAK1wB,EAAIvN,CAAG,EAAE,eAAei+B,CAAU,IACjF1wB,EAAA,SAASvN,CAAG,EAAEi+B,CAAU,EAAI1wB,EAAIvN,CAAG,EAAEi+B,CAAU,EACrD,CACF,CAEJ,CACO,IAAIC,GAAqB,CAAC,YAAa,aAAc,WAAY,aAAc,OAAQ,MAAO,QAAS,kBAAmB,kBAAmB,QAAS,SAAU,aAAc,QAAS,gBAAiB,WAAY,cAAe,aAAc,gBAAiB,gBAAiB,kBAAmB,iBAAkB,oBAAqB,oBAAqB,kBAAmB,cAAe,cAAe,eAAgB,SAAS,EAY5a,SAASC,GAAiBC,EAAU,CAClC,OAAAh+B,EAASg+B,CAAQ,GAAK,CAAC79B,EAAQ69B,CAAQ,GAAK,EAAEA,aAAoB,MAAQA,EAAS,MAAQA,CACpG,CAKO,SAASC,GAAiBD,EAAU,CACzC,OAAOh+B,EAASg+B,CAAQ,GAAK,EAAEA,aAAoB,MAGrD,CA+BgB,SAAAE,GAAgBC,EAAWC,EAAgBC,EAAM,CAC/D,IAAIC,EAAoBD,IAAS,cAC7BE,EAAqBF,IAAS,eAC9BG,EAAmBH,IAAS,aAChCF,EAAYA,GAAa,CAAC,EACRC,GAAAA,GAAkB,CAAC,GAAG,MAAM,EAC9C,IAAIK,EAAmBt6B,EAAc,EAEhC3C,EAAA48B,EAAgB,SAAUM,EAAY3G,EAAO,CAC5C,GAAA,CAAC/3B,EAAS0+B,CAAU,EAAG,CACzBN,EAAerG,CAAK,EAAI,KACxB,MAAA,CAWF,CACD,EACD,IAAIz4B,EAASq/B,GAAcR,EAAWM,EAAkBJ,CAAI,EAC5D,OAAIC,GAAqBC,IACXK,GAAAt/B,EAAQ6+B,EAAWM,EAAkBL,CAAc,EAE7DE,GACFO,GAAcv/B,EAAQ8+B,CAAc,EAElCE,GAAqBC,EACRO,GAAAx/B,EAAQ8+B,EAAgBG,CAAkB,EAChDC,GACTO,GAAwBz/B,EAAQ8+B,CAAc,EAEhDY,GAAc1/B,CAAM,EAGbA,CACT,CACA,SAASq/B,GAAcR,EAAWM,EAAkBJ,EAAM,CACxD,IAAI/+B,EAAS,CAAC,EACd,GAAI++B,IAAS,aACJ,OAAA/+B,EAIT,QAASy4B,EAAQ,EAAGA,EAAQoG,EAAU,OAAQpG,IAAS,CACjD,IAAAkH,EAAWd,EAAUpG,CAAK,EAE1BkH,GAAYA,EAAS,IAAM,MACZR,EAAA,IAAIQ,EAAS,GAAIlH,CAAK,EAOzCz4B,EAAO,KAAK,CACV,SAAU++B,IAAS,gBAAkBa,GAAsBD,CAAQ,EAAI,KAAOA,EAC9E,UAAW,KACX,QAAS,KACT,SAAU,IAAA,CACX,CAAA,CAEI,OAAA3/B,CACT,CACA,SAASs/B,GAAYt/B,EAAQ6+B,EAAWM,EAAkBL,EAAgB,CAEnE58B,EAAA48B,EAAgB,SAAUM,EAAY3G,EAAO,CAChD,GAAI,GAAC2G,GAAcA,EAAW,IAAM,MAGhC,KAAAS,EAAWC,GAAkBV,EAAW,EAAE,EAC1CW,EAAcZ,EAAiB,IAAIU,CAAQ,EAC/C,GAAIE,GAAe,KAAM,CACnB,IAAAC,EAAahgC,EAAO+/B,CAAW,EACnCl8B,GAAO,CAACm8B,EAAW,UAAW,4BAA8BH,EAAW,IAAI,EAC3EG,EAAW,UAAYZ,EAGZY,EAAA,SAAWnB,EAAUkB,CAAW,EAC3CjB,EAAerG,CAAK,EAAI,IAAA,EAC1B,CACD,CACH,CACA,SAAS8G,GAAcv/B,EAAQ8+B,EAAgB,CAExC58B,EAAA48B,EAAgB,SAAUM,EAAY3G,EAAO,CAChD,GAAI,GAAC2G,GAAcA,EAAW,MAAQ,MAGtC,QAAS3hC,EAAI,EAAGA,EAAIuC,EAAO,OAAQvC,IAAK,CAClC,IAAAkiC,EAAW3/B,EAAOvC,CAAC,EAAE,SACrB,GAAA,CAACuC,EAAOvC,CAAC,EAAE,WAEZkiC,IAAaA,EAAS,IAAM,MAAQP,EAAW,IAAM,OAAS,CAACQ,GAAsBR,CAAU,GAAK,CAACQ,GAAsBD,CAAQ,GAAKM,GAAiB,OAAQN,EAAUP,CAAU,EAAG,CAClLp/B,EAAAvC,CAAC,EAAE,UAAY2hC,EACtBN,EAAerG,CAAK,EAAI,KACxB,MAAA,CACF,CACF,CACD,CACH,CACA,SAAS+G,GAAex/B,EAAQ8+B,EAAgBoB,EAAU,CACnDh+B,EAAA48B,EAAgB,SAAUM,EAAY,CACzC,GAAKA,EAML,SAFIY,EACAG,EAAU,GAGbH,EAAahgC,EAAOmgC,CAAO,KAOtBH,EAAW,WAAaJ,GAAsBI,EAAW,QAAQ,GAEvEA,EAAW,UAAYZ,EAAW,IAAM,MAAQ,CAACa,GAAiB,KAAMb,EAAYY,EAAW,QAAQ,IACrGG,IAEEH,GACFA,EAAW,UAAYZ,EACvBY,EAAW,SAAWE,GAEtBlgC,EAAO,KAAK,CACV,UAAWo/B,EACX,SAAAc,EACA,SAAU,KACV,QAAS,IAAA,CACV,EAEHC,IAAA,CACD,CACH,CACA,SAASV,GAAwBz/B,EAAQ8+B,EAAgB,CAClD58B,EAAA48B,EAAgB,SAAUM,EAAY,CAGzCp/B,EAAO,KAAK,CACV,UAAWo/B,EACX,SAAU,GACV,SAAU,KACV,QAAS,IAAA,CACV,CAAA,CACF,CACH,CAKA,SAASM,GAAcU,EAAW,CAUhC,IAAIC,EAAQx7B,EAAc,EACrB3C,EAAAk+B,EAAW,SAAUE,EAAM,CAC9B,IAAIX,EAAWW,EAAK,SACpBX,GAAYU,EAAM,IAAIV,EAAS,GAAIW,CAAI,CAAA,CACxC,EACIp+B,EAAAk+B,EAAW,SAAUE,EAAM,CAC9B,IAAIzyB,EAAMyyB,EAAK,UAERz8B,GAAA,CAACgK,GAAOA,EAAI,IAAM,MAAQ,CAACwyB,EAAM,IAAIxyB,EAAI,EAAE,GAAKwyB,EAAM,IAAIxyB,EAAI,EAAE,IAAMyyB,EAAM,mBAAqBzyB,GAAOA,EAAI,GAAG,EACtHA,GAAOA,EAAI,IAAM,MAAQwyB,EAAM,IAAIxyB,EAAI,GAAIyyB,CAAI,EAC/C,CAACA,EAAK,UAAYA,EAAK,QAAU,CAAA,EAAC,CACnC,EAEIp+B,EAAAk+B,EAAW,SAAUE,EAAM7H,EAAO,CACrC,IAAIkH,EAAWW,EAAK,SAChBzyB,EAAMyyB,EAAK,UACXC,EAAUD,EAAK,QACf,GAAC5/B,EAASmN,CAAG,EAWjB,IAJQ0yB,EAAA,KAAO1yB,EAAI,MAAQ,KAAOiyB,GAAkBjyB,EAAI,IAAI,EAAI8xB,EAAWA,EAAS,KAGlFzB,GAA8BzF,EAC5BkH,EACMY,EAAA,GAAKT,GAAkBH,EAAS,EAAE,UACjC9xB,EAAI,IAAM,KACX0yB,EAAA,GAAKT,GAAkBjyB,EAAI,EAAE,MAChC,CAML,IAAI2yB,EAAQ,EACT,GACDD,EAAQ,GAAK,KAAOA,EAAQ,KAAO,KAAOC,UACnCH,EAAM,IAAIE,EAAQ,EAAE,EAAA,CAEzBF,EAAA,IAAIE,EAAQ,GAAID,CAAI,EAAA,CAC3B,CACH,CACA,SAASL,GAAiBQ,EAAMC,EAAMC,EAAM,CAC1C,IAAIC,EAAOC,GAAoBH,EAAKD,CAAI,EAAG,IAAI,EAC3CK,EAAOD,GAAoBF,EAAKF,CAAI,EAAG,IAAI,EAE/C,OAAOG,GAAQ,MAAQE,GAAQ,MAAQF,IAASE,CAClD,CAIA,SAAShB,GAAkBhhC,EAAK,CAMvB,OAAA+hC,GAAoB/hC,EAAK,EAAE,CACpC,CACgB,SAAA+hC,GAAoBE,EAAUC,EAAc,CAC1D,OAAID,GAAY,KACPC,EAEFl+B,EAASi+B,CAAQ,EAAIA,EAAW/9B,GAAS+9B,CAAQ,GAAKh+B,GAAag+B,CAAQ,EAAIA,EAAW,GAAKC,CACxG,CASO,SAASC,GAAgBC,EAAgB,CAC9C,IAAItzB,EAAOszB,EAAe,KAE1B,MAAO,CAAC,EAAEtzB,GAAQA,EAAK,QAAQswB,EAA2B,EAC5D,CAMO,SAAS0B,GAAsBR,EAAY,CACzC,OAAAA,GAAcA,EAAW,IAAM,MAAQU,GAAkBV,EAAW,EAAE,EAAE,QAAQjB,EAA4B,IAAM,CAC3H,CACO,SAASgD,GAAwBC,EAAU,CAChD,OAAOjD,GAA+BiD,CACxC,CACgB,SAAAC,GAA0BC,EAAeC,EAAUC,EAAoB,CAEhFt/B,EAAAo/B,EAAe,SAAUhB,EAAM,CAClC,IAAImB,EAAYnB,EAAK,UACjB5/B,EAAS+gC,CAAS,IACpBnB,EAAK,QAAQ,SAAWiB,EACxBjB,EAAK,QAAQ,QAAUoB,GAAiBH,EAAUE,EAAWnB,EAAK,SAAUkB,CAAkB,EAChG,CACD,CACH,CACA,SAASE,GAAiBH,EAAUI,EAAeC,EAAgBJ,EAAoB,CACjF,IAAAK,EAAUF,EAAc,KAAOA,EAAc,KAAOC,EAAiBA,EAAe,QAEtFJ,EAAmB,iBAAiBD,EAAUI,CAAa,EAEtD,OAAAE,CACT,CAwDgB,SAAAC,GAAe7/B,EAAM8/B,EAAS,CACxC,GAAAA,EAAQ,iBAAmB,KAC7B,OAAOA,EAAQ,gBACjB,GAAWA,EAAQ,WAAa,KACvB,OAAAlhC,EAAQkhC,EAAQ,SAAS,EAAIvkC,EAAIukC,EAAQ,UAAW,SAAUzgC,EAAO,CACnE,OAAAW,EAAK,gBAAgBX,CAAK,CAClC,CAAA,EAAIW,EAAK,gBAAgB8/B,EAAQ,SAAS,EAC7C,GAAWA,EAAQ,MAAQ,KAClB,OAAAlhC,EAAQkhC,EAAQ,IAAI,EAAIvkC,EAAIukC,EAAQ,KAAM,SAAUzgC,EAAO,CACzD,OAAAW,EAAK,YAAYX,CAAK,CAC9B,CAAA,EAAIW,EAAK,YAAY8/B,EAAQ,IAAI,CAEtC,CAqBO,SAASC,IAAY,CAC1B,IAAI1hC,EAAM,cAAgB2hC,KAC1B,OAAO,SAAUC,EAAS,CACxB,OAAOA,EAAQ5hC,CAAG,IAAM4hC,EAAQ5hC,CAAG,EAAI,CAAA,EACzC,CACF,CACA,IAAI2hC,GAAmBpE,GAAgB,EAIvB,SAAAsE,GAAYC,EAASC,EAAax0B,EAAK,CACrD,IAAIy0B,EAAKC,GAAeF,EAAax0B,CAAG,EACtC20B,EAAoBF,EAAG,kBACvBG,EAAiBH,EAAG,eACpBI,EAASJ,EAAG,OACVtiC,EAAS0iC,EACTC,EAAkB90B,EAAMA,EAAI,gBAAkB,KAC9C,MAAA,CAAC20B,GAAqBG,GACTF,EAAA,IAAIE,EAAiB,EAAE,EAEzBF,EAAA,KAAK,SAAUG,EAAarB,EAAU,CACnD,IAAIsB,EAAcC,GAAyBV,EAASb,EAAUqB,EAAa,CACzE,WAAYD,IAAoBpB,EAChC,UAAW1zB,GAAOA,EAAI,WAAa,KAAOA,EAAI,UAAY,GAC1D,WAAYA,GAAOA,EAAI,YAAc,KAAOA,EAAI,WAAa,EAAA,CAC9D,EACM7N,EAAAuhC,EAAW,QAAQ,EAAIsB,EAAY,OAC1C7iC,EAAOuhC,EAAW,OAAO,EAAIsB,EAAY,OAAO,CAAC,CAAA,CAClD,EACM7iC,CACT,CACgB,SAAAuiC,GAAeF,EAAax0B,EAAK,CAC3C,IAAAk1B,EACA,GAAAjgC,EAASu/B,CAAW,EAAG,CACzB,IAAIxjC,EAAM,CAAC,EACPA,EAAAwjC,EAAc,OAAO,EAAI,EACpBU,EAAAlkC,CAAA,MAEAkkC,EAAAV,EAEX,IAAII,EAAiB59B,EAAc,EAC/B69B,EAAS,CAAC,EACVF,EAAoB,GACnBtgC,OAAAA,EAAA6gC,EAAQ,SAAUzhC,EAAOhB,EAAK,CAE7B,GAAAA,IAAQ,aAAeA,IAAQ,kBAAmB,CACpDoiC,EAAOpiC,CAAG,EAAIgB,EACd,MAAA,CAEF,IAAI0hC,EAAY1iC,EAAI,MAAM,wBAAwB,GAAK,CAAC,EACpDihC,EAAWyB,EAAU,CAAC,EACtBC,GAAaD,EAAU,CAAC,GAAK,IAAI,YAAY,EACjD,GAAI,GAACzB,GAAY,CAAC0B,GAAap1B,GAAOA,EAAI,kBAAoBzM,EAAQyM,EAAI,iBAAkB0zB,CAAQ,EAAI,GAGpF,CAAAiB,EAAAA,GAAqB,CAAC,CAACjB,EACvC,IAAAqB,EAAcH,EAAe,IAAIlB,CAAQ,GAAKkB,EAAe,IAAIlB,EAAU,EAAE,EACjFqB,EAAYK,CAAS,EAAI3hC,EAAA,CAC1B,EACM,CACL,kBAAAkhC,EACA,eAAAC,EACA,OAAAC,CACF,CACF,CACO,IAAIQ,GAAmB,CAC5B,WAAY,GACZ,UAAW,GACX,WAAY,EACd,EACWC,GAAqB,CAC9B,WAAY,GACZ,UAAW,GACX,WAAY,EACd,EACO,SAASL,GAAyBV,EAASb,EAAU6B,EAAYv1B,EAAK,CAC3EA,EAAMA,GAAOq1B,GACb,IAAIG,EAAcD,EAAW,MACzBE,EAAWF,EAAW,GACtBG,EAAaH,EAAW,KACxBpjC,EAAS,CACX,OAAQ,KACR,UAAWqjC,GAAe,MAAQC,GAAY,MAAQC,GAAc,IACtE,EACI,GAAA,CAACvjC,EAAO,UAAW,CAErB,IAAIwjC,EAAY,OACT,OAAAxjC,EAAA,OAAS6N,EAAI,aAAe21B,EAAYpB,EAAQ,aAAab,CAAQ,GAAK,CAACiC,CAAS,EAAI,CAAC,EACzFxjC,CAAA,CAEL,OAAAqjC,IAAgB,QAAUA,IAAgB,IACrCx/B,GAAAgK,EAAI,WAAY,2DAA2D,EAClF7N,EAAO,OAAS,CAAC,EACVA,IAILqjC,IAAgB,QACXx/B,GAAAgK,EAAI,UAAW,+CAA+C,EACrEw1B,EAAcC,EAAWC,EAAa,MAEjCvjC,EAAA,OAASoiC,EAAQ,gBAAgB,CACtC,SAAAb,EACA,MAAO8B,EACP,GAAIC,EACJ,KAAMC,CAAA,CACP,EACMvjC,EACT,CACgB,SAAAyjC,GAAaj+B,EAAKlF,EAAKgB,EAAO,CACxCkE,EAAA,aAAeA,EAAI,aAAalF,EAAKgB,CAAK,EAAIkE,EAAIlF,CAAG,EAAIgB,CAC/D,CACgB,SAAAoiC,GAAal+B,EAAKlF,EAAK,CACrC,OAAOkF,EAAI,aAAeA,EAAI,aAAalF,CAAG,EAAIkF,EAAIlF,CAAG,CAC3D,CACO,SAASqjC,GAAqBC,EAAkB,CACrD,OAAIA,IAAqB,OAEhBrnC,EAAI,aAAe,OAAS,WAE5BqnC,GAAoB,MAE/B,CA+BO,SAASC,GAAqB5hC,EAAMw5B,EAAWqI,EAAaC,EAAajjB,EAAS,CACnF,IAAAkjB,EAAkBvI,GAAa,MAAQA,IAAc,OACzD,GAAIsI,GAAe,KACV,OAAAA,EAEL,GAAA/gC,GAAS+gC,CAAW,EAAG,CACzB,IAAIziC,EAAQyjB,GAAkB+e,GAAe,EAAGC,EAAajjB,CAAO,EACpE,OAAO0a,GAAMl6B,EAAO0iC,EAAkB,KAAK,IAAIpI,GAAakI,GAAe,CAAC,EAAGlI,GAAamI,CAAW,CAAC,EAAItI,CAAS,CAAA,KACvH,IAAW34B,EAASihC,CAAW,EACtB,OAAAjjB,EAAU,EAAIgjB,EAAcC,EAMnC,QAJIE,EAAe,CAAC,EAChBC,EAAUJ,EACVK,EAAWJ,EACXK,EAAW,KAAK,IAAIF,EAAUA,EAAQ,OAAS,EAAGC,EAAS,MAAM,EAC5D1mC,EAAI,EAAGA,EAAI2mC,EAAU,EAAE3mC,EAAG,CAC7B,IAAA4mC,EAAOpiC,EAAK,iBAAiBxE,CAAC,EAE9B,GAAA4mC,GAAQA,EAAK,OAAS,UAExBJ,EAAaxmC,CAAC,GAAKqjB,EAAU,GAAKojB,EAAUA,EAAUC,GAAU1mC,CAAC,MAC5D,CACL,IAAI6mC,EAAUJ,GAAWA,EAAQzmC,CAAC,EAAIymC,EAAQzmC,CAAC,EAAI,EAC/C8mC,EAAWJ,EAAS1mC,CAAC,EACrB6D,EAAQyjB,GAAkBuf,EAASC,EAAUzjB,CAAO,EACxDmjB,EAAaxmC,CAAC,EAAI+9B,GAAMl6B,EAAO0iC,EAAkB,KAAK,IAAIpI,GAAa0I,CAAO,EAAG1I,GAAa2I,CAAQ,CAAC,EAAI9I,CAAS,CAAA,CACtH,CAEK,OAAAwI,EAEX,CCzoBA,IAAIO,GAAiB,IACjBC,GAAe,iCACfC,GAAoB,2BAKjB,SAASC,GAAeC,EAAe,CAC5C,IAAIjgB,EAAM,CACR,KAAM,GACN,IAAK,EACP,EACA,GAAIigB,EAAe,CACb,IAAAC,EAAUD,EAAc,MAAMJ,EAAc,EAC5C7f,EAAA,KAAOkgB,EAAQ,CAAC,GAAK,GACrBlgB,EAAA,IAAMkgB,EAAQ,CAAC,GAAK,EAAA,CAEnB,OAAAlgB,CACT,CAIA,SAASmgB,GAAeF,EAAe,CACrCG,GAAc,qCAAqC,KAAKH,CAAa,EAAG,kBAAoBA,EAAgB,WAAW,CACzH,CACO,SAASI,GAAgBC,EAAK,CACnC,MAAO,CAAC,EAAEA,GAAOA,EAAIP,EAAiB,EACxC,CAWgB,SAAAQ,GAAkBC,EAASC,EAAkB,CAC3DD,EAAQ,aAAeA,EACfA,EAAA,OAAS,SAAU//B,EAAO,CAQhC,IAAIigC,EAAa,KACbC,EACA,OAAAC,GAAUF,CAAU,EACtBC,EAA6B,SAAUvxB,EAAQ,CAC7CC,EAAUwxB,EAASzxB,CAAM,EACzB,SAASyxB,GAAU,CACjB,OAAOzxB,EAAO,MAAM,KAAM,SAAS,GAAK,IAAA,CAEnC,OAAAyxB,GACPH,CAAU,GASZC,EAAgB,UAAY,EACzBlgC,EAAM,cAAgBigC,GAAY,MAAM,KAAM,SAAS,CAC1D,EACOI,GAASH,EAAe,IAAI,GAE9BI,EAAOJ,EAAc,UAAWlgC,CAAK,EAC5CkgC,EAAcZ,EAAiB,EAAI,GACnCY,EAAc,OAAS,KAAK,OAC5BA,EAAc,UAAYK,GAC1BL,EAAc,WAAaM,GAC3BN,EAAc,WAAaD,EACpBC,CACT,CACF,CACA,SAASC,GAAUM,EAAI,CACd,OAAAC,EAAkBD,CAAE,GAAK,WAAW,KAAK,SAAS,UAAU,SAAS,KAAKA,CAAE,CAAC,CACtF,CAegB,SAAAE,GAAYC,EAAQC,EAAW,CAC7CD,EAAO,OAASC,EAAU,MAC5B,CAEA,IAAIC,GAAY,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EActC,SAASC,GAAiB3lC,EAAQ,CACvC,IAAI4lC,EAAY,CAAC,aAAcF,IAAW,EAAE,KAAK,GAAG,EAC7C1lC,EAAA,UAAU4lC,CAAS,EAAI,GAIvB5lC,EAAA,WAAa,SAAU3B,EAAK,CACjC,MAAO,CAAC,EAAEA,GAAOA,EAAIunC,CAAS,EAChC,CACF,CAOA,SAAST,GAAUtjC,EAASgkC,EAAY,CAEtC,QADIzmC,EAAO,CAAC,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACtCD,EAAKC,EAAK,CAAC,EAAI,UAAUA,CAAE,EAE7B,OAAO,KAAK,WAAW,UAAUwmC,CAAU,EAAE,MAAMhkC,EAASzC,CAAI,CAClE,CACA,SAASgmC,GAAWvjC,EAASgkC,EAAYzmC,EAAM,CAC7C,OAAO,KAAK,WAAW,UAAUymC,CAAU,EAAE,MAAMhkC,EAASzC,CAAI,CAClE,CAWO,SAAS0mC,GAAsB9lC,EAAQ,CAQ5C,IAAI8T,EAAU,CAAC,EACR9T,EAAA,cAAgB,SAAUykC,EAAK,CAMpC,IAAIsB,EAAoBtB,EAAI,MAAQA,EAAI,UAAU,KAClD,GAAIsB,EAAmB,CACrBzB,GAAeyB,CAAiB,EAEhCtB,EAAI,UAAU,KAAOsB,EACjB,IAAAC,EAAoB7B,GAAe4B,CAAiB,EACpD,GAAA,CAACC,EAAkB,IAMblyB,EAAAkyB,EAAkB,IAAI,EAAIvB,UACzBuB,EAAkB,MAAQ/B,GAAc,CAC7C,IAAAgC,EAAYC,EAAcF,CAAiB,EACrCC,EAAAD,EAAkB,GAAG,EAAIvB,CAAA,CACrC,CAEK,OAAAA,CACT,EACAzkC,EAAO,SAAW,SAAU+gC,EAAUM,EAAS8E,EAAmB,CAC5D,IAAA1B,EAAM3wB,EAAQitB,CAAQ,EAItB,GAHA0D,GAAOA,EAAIR,EAAY,IACnBQ,EAAApD,EAAUoD,EAAIpD,CAAO,EAAI,MAE7B8E,GAAqB,CAAC1B,EAClB,MAAA,IAAI,MAAOpD,EAAyD,aAAeN,EAAW,KAAOM,GAAW,IAAM,6BAAjGN,EAAW,4BAAkH,EAEnJ,OAAA0D,CACT,EACOzkC,EAAA,qBAAuB,SAAUokC,EAAe,CACjD,IAAA4B,EAAoB7B,GAAeC,CAAa,EAChD5kC,EAAS,CAAC,EACVnB,EAAMyV,EAAQkyB,EAAkB,IAAI,EACpC,OAAA3nC,GAAOA,EAAI4lC,EAAY,EACzBzX,EAAYnuB,EAAK,SAAU+nC,EAAG3jC,EAAM,CACzBA,IAAAwhC,IAAgBzkC,EAAO,KAAK4mC,CAAC,CAAA,CACvC,EAED5mC,EAAO,KAAKnB,CAAG,EAEVmB,CACT,EACOQ,EAAA,SAAW,SAAUokC,EAAe,CAErC,IAAA4B,EAAoB7B,GAAeC,CAAa,EACpD,MAAO,CAAC,CAACtwB,EAAQkyB,EAAkB,IAAI,CACzC,EAIAhmC,EAAO,qBAAuB,UAAY,CACxC,IAAIqmC,EAAQ,CAAC,EACb7Z,OAAAA,EAAY1Y,EAAS,SAAUzV,EAAKoE,EAAM,CACxC4jC,EAAM,KAAK5jC,CAAI,CAAA,CAChB,EACM4jC,CACT,EAIOrmC,EAAA,YAAc,SAAUokC,EAAe,CACxC,IAAA4B,EAAoB7B,GAAeC,CAAa,EAChD/lC,EAAMyV,EAAQkyB,EAAkB,IAAI,EACjC,OAAA3nC,GAAOA,EAAI4lC,EAAY,CAChC,EACA,SAASiC,EAAcF,EAAmB,CACpC,IAAAC,EAAYnyB,EAAQkyB,EAAkB,IAAI,EAC9C,OAAI,CAACC,GAAa,CAACA,EAAUhC,EAAY,KACvCgC,EAAYnyB,EAAQkyB,EAAkB,IAAI,EAAI,CAAC,EAC/CC,EAAUhC,EAAY,EAAI,IAErBgC,CAAA,CAEX,CC/Oe,SAASK,GAAgBzhC,EAAY0hC,EAAc,CAEhE,QAAStpC,EAAI,EAAGA,EAAI4H,EAAW,OAAQ5H,IAChC4H,EAAW5H,CAAC,EAAE,CAAC,IAClB4H,EAAW5H,CAAC,EAAE,CAAC,EAAI4H,EAAW5H,CAAC,EAAE,CAAC,GAGtC,OAAAspC,EAAeA,GAAgB,GACxB,SAAUC,EAAOC,EAAUC,EAAU,CAE1C,QADInqC,EAAQ,CAAE,EACLU,EAAI,EAAGA,EAAI4H,EAAW,OAAQ5H,IAAK,CAC1C,IAAI0pB,EAAW9hB,EAAW5H,CAAC,EAAE,CAAC,EAC9B,GAAI,EAAAwpC,GAAYzO,EAAeyO,EAAU9f,CAAQ,GAAK,GAAK+f,GAAY1O,EAAe0O,EAAU/f,CAAQ,EAAI,GAG5G,KAAIroB,EAAMkoC,EAAM,WAAW7f,EAAU4f,CAAY,EAC7CjoC,GAAO,OACT/B,EAAMsI,EAAW5H,CAAC,EAAE,CAAC,CAAC,EAAIqB,GAElC,CAEI,OAAO/B,CACR,CACH,CCzBO,IAAIoqC,GAAqB,CAAC,CAAC,OAAQ,OAAO,EAAG,CAAC,YAAY,EAAG,CAAC,eAAe,EAAG,CAAC,eAAe,EAAG,CAAC,SAAS,EAAG,CAAC,aAAa,CAGrI,EACIC,GAAeN,GAAgBK,EAAkB,EACjDE,GAA8B,UAAY,CAC5C,SAASA,GAAiB,CAAA,CAC1B,OAAAA,EAAe,UAAU,aAAe,SAAUJ,EAAUC,EAAU,CACpE,OAAOE,GAAa,KAAMH,EAAUC,CAAQ,CAC7C,EACMG,CACT,EAAG,ECrDCC,GAAmB,IAAIhmB,GAAI,EAAE,EAC1B,SAASimB,GAAeC,EAAe,CAC1C,GAAI,OAAOA,GAAkB,SAAU,CACnC,IAAIC,EAAeH,GAAiB,IAAIE,CAAa,EACrD,OAAOC,GAAgBA,EAAa,KAC5C,KAEQ,QAAOD,CAEf,CACO,SAASE,GAAoBF,EAAe9oC,EAAOmY,EAAQrY,EAAQmpC,EAAW,CACjF,GAAKH,EAGA,GAAI,OAAOA,GAAkB,SAAU,CACxC,GAAK9oC,GAASA,EAAM,eAAiB8oC,GAAkB,CAAC3wB,EACpD,OAAOnY,EAEX,IAAI+oC,EAAeH,GAAiB,IAAIE,CAAa,EACjDI,EAAc,CAAE,OAAQ/wB,EAAQ,GAAIrY,EAAQ,UAAWmpC,CAAW,EACtE,OAAIF,GACA/oC,EAAQ+oC,EAAa,MACrB,CAACI,GAAanpC,CAAK,GAAK+oC,EAAa,QAAQ,KAAKG,CAAW,IAG7DlpC,EAAQb,GAAY,UAAU2pC,EAAeM,GAAaA,EAAW,EACrEppC,EAAM,aAAe8oC,EACrBF,GAAiB,IAAIE,EAAe9oC,EAAM,eAAiB,CACvD,MAAOA,EACP,QAAS,CAACkpC,CAAW,CACrC,CAAa,GAEElpC,CACf,KAEQ,QAAO8oC,MAvBP,QAAO9oC,CAyBf,CACA,SAASopC,IAAc,CACnB,IAAIL,EAAe,KAAK,eACxB,KAAK,OAAS,KAAK,QAAU,KAAK,eAAiB,KACnD,QAAShqC,EAAI,EAAGA,EAAIgqC,EAAa,QAAQ,OAAQhqC,IAAK,CAClD,IAAImqC,EAAcH,EAAa,QAAQhqC,CAAC,EACpC2E,EAAKwlC,EAAY,GACrBxlC,GAAMA,EAAG,KAAMwlC,EAAY,SAAS,EACpCA,EAAY,OAAO,MAAO,CAClC,CACIH,EAAa,QAAQ,OAAS,CAClC,CACO,SAASI,GAAanpC,EAAO,CAChC,OAAOA,GAASA,EAAM,OAASA,EAAM,MACzC,CClDA,IAAIqpC,GAAY,gCAMhB,SAASC,GAAc7hC,EAAKnI,EAAMiqC,EAAgBhqC,EAAMiqC,EAAU7c,EAAS,CACvE,GAAI,CAAC4c,EAAgB,CACjB9hC,EAAI,KAAO,GACXA,EAAI,YAAc,GAClB,MACR,CACI,IAAI+qB,GAAalzB,EAAO,IAAI,MAAM;AAAA,CAAI,EACtCqtB,EAAU8c,GAAuBF,EAAgBhqC,EAAMiqC,EAAU7c,CAAO,EAGxE,QAFI+c,EAAc,GACdC,EAAc,CAAE,EACX5qC,EAAI,EAAG0C,EAAM+wB,EAAU,OAAQzzB,EAAI0C,EAAK1C,IAC7C6qC,GAAmBD,EAAanX,EAAUzzB,CAAC,EAAG4tB,CAAO,EACrD6F,EAAUzzB,CAAC,EAAI4qC,EAAY,SAC3BD,EAAcA,GAAeC,EAAY,YAE7CliC,EAAI,KAAO+qB,EAAU,KAAK;AAAA,CAAI,EAC9B/qB,EAAI,YAAciiC,CACtB,CACA,SAASD,GAAuBF,EAAgBhqC,EAAMiqC,EAAU7c,EAAS,CACrEA,EAAUA,GAAW,CAAE,EACvB,IAAIkd,EAAexnC,EAAO,CAAE,EAAEsqB,CAAO,EACrCkd,EAAa,KAAOtqC,EACpBiqC,EAAW3kC,EAAU2kC,EAAU,KAAK,EACpCK,EAAa,cAAgBhlC,EAAU8nB,EAAQ,cAAe,CAAC,EAC/D,IAAImd,EAAUD,EAAa,QAAUhlC,EAAU8nB,EAAQ,QAAS,CAAC,EACjEkd,EAAa,YAAc9X,GAAS,IAAKxyB,CAAI,EAC7C,IAAIwqC,EAAeF,EAAa,aAAe9X,GAAS,IAAKxyB,CAAI,EACjEsqC,EAAa,YAAchlC,EAAU8nB,EAAQ,YAAa,EAAE,EAE5D,QADIqd,EAAeT,EAAiB,KAAK,IAAI,EAAGA,EAAiB,CAAC,EACzDxqC,EAAI,EAAGA,EAAI+qC,GAAWE,GAAgBD,EAAchrC,IACzDirC,GAAgBD,EAEpB,IAAIE,EAAgBlY,GAASyX,EAAUjqC,CAAI,EAC3C,OAAI0qC,EAAgBD,IAChBR,EAAW,GACXS,EAAgB,GAEpBD,EAAeT,EAAiBU,EAChCJ,EAAa,SAAWL,EACxBK,EAAa,cAAgBI,EAC7BJ,EAAa,aAAeG,EAC5BH,EAAa,eAAiBN,EACvBM,CACX,CACA,SAASD,GAAmBniC,EAAKyiC,EAAUvd,EAAS,CAChD,IAAI4c,EAAiB5c,EAAQ,eACzBptB,EAAOotB,EAAQ,KACfqd,EAAerd,EAAQ,aAC3B,GAAI,CAAC4c,EAAgB,CACjB9hC,EAAI,SAAW,GACfA,EAAI,YAAc,GAClB,MACR,CACI,IAAI0iC,EAAYpY,GAASmY,EAAU3qC,CAAI,EACvC,GAAI4qC,GAAaZ,EAAgB,CAC7B9hC,EAAI,SAAWyiC,EACfziC,EAAI,YAAc,GAClB,MACR,CACI,QAASwD,EAAI,GAAIA,IAAK,CAClB,GAAIk/B,GAAaH,GAAgB/+B,GAAK0hB,EAAQ,cAAe,CACzDud,GAAYvd,EAAQ,SACpB,KACZ,CACQ,IAAIyd,EAAYn/B,IAAM,EAChBo/B,GAAeH,EAAUF,EAAcrd,EAAQ,aAAcA,EAAQ,WAAW,EAChFwd,EAAY,EACR,KAAK,MAAMD,EAAS,OAASF,EAAeG,CAAS,EACrD,EACVD,EAAWA,EAAS,OAAO,EAAGE,CAAS,EACvCD,EAAYpY,GAASmY,EAAU3qC,CAAI,CAC3C,CACQ2qC,IAAa,KACbA,EAAWvd,EAAQ,aAEvBllB,EAAI,SAAWyiC,EACfziC,EAAI,YAAc,EACtB,CACA,SAAS4iC,GAAe/qC,EAAM0qC,EAAcD,EAAcO,EAAa,CAGnE,QAFI3qC,EAAQ,EACRZ,EAAI,EACC0C,EAAMnC,EAAK,OAAQP,EAAI0C,GAAO9B,EAAQqqC,EAAcjrC,IAAK,CAC9D,IAAIwrC,EAAWjrC,EAAK,WAAWP,CAAC,EAChCY,GAAU,GAAK4qC,GAAYA,GAAY,IAAOR,EAAeO,CACrE,CACI,OAAOvrC,CACX,CACO,SAASyrC,GAAelrC,EAAMjB,EAAO,CACxCiB,GAAQ,OAASA,GAAQ,IACzB,IAAImrC,EAAWpsC,EAAM,SACjBqsC,EAAUrsC,EAAM,QAChBkB,EAAOlB,EAAM,KACbssC,EAAWF,IAAa,WACxBG,EAAuBxY,GAAc7yB,CAAI,EACzCsrC,EAAahmC,EAAUxG,EAAM,WAAYusC,CAAoB,EAC7DE,EAAe,CAAC,CAAEzsC,EAAM,gBACxB0sC,EAAuB1sC,EAAM,eAAiB,WAC9CqrC,EAAc,GACd/pC,EAAQtB,EAAM,MACd2sC,EACArrC,GAAS,OAAS8qC,IAAa,SAAWA,IAAa,YACvDO,EAAQ1rC,EAAO2rC,GAAS3rC,EAAMjB,EAAM,KAAMsB,EAAO8qC,IAAa,WAAY,CAAC,EAAE,MAAQ,CAAE,EAGvFO,EAAQ1rC,EAAOA,EAAK,MAAM;AAAA,CAAI,EAAI,CAAE,EAExC,IAAI4rC,EAAgBF,EAAM,OAASH,EAC/Bz3B,EAASvO,EAAUxG,EAAM,OAAQ6sC,CAAa,EAClD,GAAIA,EAAgB93B,GAAU23B,EAAsB,CAChD,IAAII,EAAY,KAAK,MAAM/3B,EAASy3B,CAAU,EAC9CnB,EAAcA,GAAgBsB,EAAM,OAASG,EAC7CH,EAAQA,EAAM,MAAM,EAAGG,CAAS,CACxC,CACI,GAAI7rC,GAAQqrC,GAAYhrC,GAAS,KAM7B,QALIgtB,EAAU8c,GAAuB9pC,EAAOJ,EAAMlB,EAAM,SAAU,CAC9D,QAASA,EAAM,gBACf,YAAaA,EAAM,WAC/B,CAAS,EACG+sC,EAAY,CAAE,EACTrsC,EAAI,EAAGA,EAAIisC,EAAM,OAAQjsC,IAC9B6qC,GAAmBwB,EAAWJ,EAAMjsC,CAAC,EAAG4tB,CAAO,EAC/Cqe,EAAMjsC,CAAC,EAAIqsC,EAAU,SACrB1B,EAAcA,GAAe0B,EAAU,YAK/C,QAFIC,EAAcj4B,EACd42B,EAAe,EACVjrC,EAAI,EAAGA,EAAIisC,EAAM,OAAQjsC,IAC9BirC,EAAe,KAAK,IAAIjY,GAASiZ,EAAMjsC,CAAC,EAAGQ,CAAI,EAAGyqC,CAAY,EAE9DrqC,GAAS,OACTA,EAAQqqC,GAEZ,IAAIsB,EAAatB,EACjB,OAAIU,IACAW,GAAeX,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EACrCY,GAAcZ,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EACpC/qC,GAAS+qC,EAAQ,CAAC,EAAIA,EAAQ,CAAC,GAE/BI,IACAQ,EAAa3rC,GAEV,CACH,MAAOqrC,EACP,OAAQ53B,EACR,WAAYk4B,EACZ,YAAaD,EACb,WAAYR,EACZ,qBAAsBD,EACtB,aAAcZ,EACd,cAAekB,EACf,MAAOvrC,EACP,YAAa+pC,CAChB,CACL,CACA,IAAI6B,GAAiB,UAAY,CAC7B,SAASA,GAAgB,CAC7B,CACI,OAAOA,CACX,IACIC,GAAgB,UAAY,CAC5B,SAASA,EAAaC,EAAQ,CAC1B,KAAK,OAAS,CAAE,EACZA,IACA,KAAK,OAASA,EAE1B,CACI,OAAOD,CACX,IACIE,GAAwB,UAAY,CACpC,SAASA,GAAuB,CAC5B,KAAK,MAAQ,EACb,KAAK,OAAS,EACd,KAAK,aAAe,EACpB,KAAK,cAAgB,EACrB,KAAK,WAAa,EAClB,KAAK,YAAc,EACnB,KAAK,MAAQ,CAAE,EACf,KAAK,YAAc,EAC3B,CACI,OAAOA,CACX,IAEO,SAASC,GAAcrsC,EAAMjB,EAAO,CACvC,IAAIutC,EAAe,IAAIF,GAEvB,GADApsC,GAAQ,OAASA,GAAQ,IACrB,CAACA,EACD,OAAOssC,EAUX,QARIC,EAAWxtC,EAAM,MACjBytC,EAAYztC,EAAM,OAClBosC,EAAWpsC,EAAM,SACjB0tC,GAAYtB,IAAa,SAAWA,IAAa,aAAeoB,GAAY,KAC1E,CAAE,MAAOA,EAAU,WAAY,EAAG,SAAUpB,IAAa,UAAU,EACnE,KACF/gC,EAAY2/B,GAAU,UAAY,EAClC/nC,GACIA,EAAS+nC,GAAU,KAAK/pC,CAAI,IAAM,MAAM,CAC5C,IAAI0sC,EAAe1qC,EAAO,MACtB0qC,EAAetiC,GACfuiC,GAAWL,EAActsC,EAAK,UAAUoK,EAAWsiC,CAAY,EAAG3tC,EAAO0tC,CAAQ,EAErFE,GAAWL,EAActqC,EAAO,CAAC,EAAGjD,EAAO0tC,EAAUzqC,EAAO,CAAC,CAAC,EAC9DoI,EAAY2/B,GAAU,SAC9B,CACQ3/B,EAAYpK,EAAK,QACjB2sC,GAAWL,EAActsC,EAAK,UAAUoK,EAAWpK,EAAK,MAAM,EAAGjB,EAAO0tC,CAAQ,EAEpF,IAAIG,EAAc,CAAE,EAChBC,EAAmB,EACnBC,EAAkB,EAClBC,EAAahuC,EAAM,QACnBssC,EAAWF,IAAa,WACxB6B,EAAejuC,EAAM,eAAiB,WACtCkuC,EAAiB,CAAE,EACvB,SAASC,EAAWC,EAAMtC,GAAWU,GAAY,CAC7C4B,EAAK,MAAQtC,GACbsC,EAAK,WAAa5B,GAClBsB,GAAoBtB,GACpBuB,EAAkB,KAAK,IAAIA,EAAiBjC,EAAS,CAC7D,CACIuC,EAAO,QAAS3tC,EAAI,EAAGA,EAAI6sC,EAAa,MAAM,OAAQ7sC,IAAK,CAIvD,QAHI0tC,EAAOb,EAAa,MAAM7sC,CAAC,EAC3B8rC,EAAa,EACbV,EAAY,EACPl/B,EAAI,EAAGA,EAAIwhC,EAAK,OAAO,OAAQxhC,IAAK,CACzC,IAAI0hC,EAAQF,EAAK,OAAOxhC,CAAC,EACrB2hC,EAAaD,EAAM,WAAatuC,EAAM,KAAKsuC,EAAM,SAAS,GAAK,CAAE,EACjEE,EAAcF,EAAM,YAAcC,EAAW,QAC7CE,EAAWD,EAAcA,EAAY,CAAC,EAAIA,EAAY,CAAC,EAAI,EAC3DttC,EAAOotC,EAAM,KAAOC,EAAW,MAAQvuC,EAAM,KACjDsuC,EAAM,cAAgBva,GAAc7yB,CAAI,EACxC,IAAIwtC,EAAcloC,EAAU+nC,EAAW,OAAQD,EAAM,aAAa,EAOlE,GANAA,EAAM,YAAcI,EACpBF,IAAgBE,GAAeF,EAAY,CAAC,EAAIA,EAAY,CAAC,GAC7DF,EAAM,OAASI,EACfJ,EAAM,WAAa3nC,GAAU4nC,EAAW,WAAYvuC,EAAM,WAAY0uC,CAAW,EACjFJ,EAAM,MAAQC,GAAcA,EAAW,OAASvuC,EAAM,MACtDsuC,EAAM,cAAgBC,GAAcA,EAAW,eAAiB,SAC5DN,GAAgBR,GAAa,MAAQK,EAAmBQ,EAAM,WAAab,EAAW,CACtF,IAAIkB,EAAiBpB,EAAa,MAAM,OACpC3gC,EAAI,GACJwhC,EAAK,OAASA,EAAK,OAAO,MAAM,EAAGxhC,CAAC,EACpCuhC,EAAWC,EAAMtC,EAAWU,CAAU,EACtCe,EAAa,MAAQA,EAAa,MAAM,MAAM,EAAG7sC,EAAI,CAAC,GAGtD6sC,EAAa,MAAQA,EAAa,MAAM,MAAM,EAAG7sC,CAAC,EAEtD6sC,EAAa,YAAcA,EAAa,aAAgBA,EAAa,MAAM,OAASoB,EACpF,MAAMN,CACtB,CACY,IAAIO,EAAkBL,EAAW,MAC7BM,EAAyBD,GAAmB,MAAQA,IAAoB,OAC5E,GAAI,OAAOA,GAAoB,UAAYA,EAAgB,OAAOA,EAAgB,OAAS,CAAC,IAAM,IAC9FN,EAAM,aAAeM,EACrBf,EAAY,KAAKS,CAAK,EACtBA,EAAM,aAAe5a,GAAS4a,EAAM,KAAMptC,CAAI,MAE7C,CACD,GAAI2tC,EAAwB,CACxB,IAAIC,EAAsBP,EAAW,gBACjCQ,EAAQD,GAAuBA,EAAoB,MACnDC,IACAA,EAAQC,GAA2BD,CAAK,EACpCE,GAAyBF,CAAK,IAC9BT,EAAM,MAAQ,KAAK,IAAIA,EAAM,MAAOS,EAAM,MAAQL,EAAcK,EAAM,MAAM,GAGxG,CACgB,IAAIG,EAAmB5C,GAAYkB,GAAY,KACzCA,EAAW1B,EAAY,KACzBoD,GAAoB,MAAQA,EAAmBZ,EAAM,MACjD,CAACO,GAA0BK,EAAmBT,GAC9CH,EAAM,KAAO,GACbA,EAAM,MAAQA,EAAM,aAAe,IAGnCrD,GAAciD,EAAgBI,EAAM,KAAMY,EAAmBT,EAAUvtC,EAAMlB,EAAM,SAAU,CAAE,QAASA,EAAM,eAAe,CAAE,EAC/HsuC,EAAM,KAAOJ,EAAe,KAC5BX,EAAa,YAAcA,EAAa,aAAeW,EAAe,YACtEI,EAAM,MAAQA,EAAM,aAAe5a,GAAS4a,EAAM,KAAMptC,CAAI,GAIhEotC,EAAM,aAAe5a,GAAS4a,EAAM,KAAMptC,CAAI,CAElE,CACYotC,EAAM,OAASG,EACf3C,GAAawC,EAAM,MACnBC,IAAe/B,EAAa,KAAK,IAAIA,EAAY8B,EAAM,UAAU,EAC7E,CACQH,EAAWC,EAAMtC,EAAWU,CAAU,CAC9C,CACIe,EAAa,WAAaA,EAAa,MAAQ/mC,EAAUgnC,EAAUO,CAAe,EAClFR,EAAa,YAAcA,EAAa,OAAS/mC,EAAUinC,EAAWK,CAAgB,EACtFP,EAAa,cAAgBO,EAC7BP,EAAa,aAAeQ,EACxBC,IACAT,EAAa,YAAcS,EAAW,CAAC,EAAIA,EAAW,CAAC,EACvDT,EAAa,aAAeS,EAAW,CAAC,EAAIA,EAAW,CAAC,GAE5D,QAASttC,EAAI,EAAGA,EAAImtC,EAAY,OAAQntC,IAAK,CACzC,IAAI4tC,EAAQT,EAAYntC,CAAC,EACrByuC,EAAeb,EAAM,aACzBA,EAAM,MAAQ,SAASa,EAAc,EAAE,EAAI,IAAM5B,EAAa,KACtE,CACI,OAAOA,CACX,CACA,SAASK,GAAWwB,EAAOloC,EAAKlH,EAAO0tC,EAAU2B,EAAW,CACxD,IAAIC,EAAapoC,IAAQ,GACrBqnC,EAAac,GAAarvC,EAAM,KAAKqvC,CAAS,GAAK,CAAE,EACrD1C,EAAQyC,EAAM,MACdluC,EAAOqtC,EAAW,MAAQvuC,EAAM,KAChCuvC,EAAU,GACVC,EACAC,EACJ,GAAI/B,EAAU,CACV,IAAIgC,EAAenB,EAAW,QAC1BoB,EAAgBD,EAAeA,EAAa,CAAC,EAAIA,EAAa,CAAC,EAAI,EACvE,GAAInB,EAAW,OAAS,MAAQA,EAAW,QAAU,OAAQ,CACzD,IAAIqB,EAAetb,GAAaia,EAAW,MAAOb,EAAS,KAAK,EAAIiC,EAChEhD,EAAM,OAAS,GACXiD,EAAelC,EAAS,WAAaA,EAAS,QAC9C8B,EAAWtoC,EAAI,MAAM;AAAA,CAAI,EACzBqoC,EAAU,IAGlB7B,EAAS,WAAakC,CAClC,KACa,CACD,IAAIxuC,EAAMwrC,GAAS1lC,EAAKhG,EAAMwsC,EAAS,MAAOA,EAAS,SAAUA,EAAS,UAAU,EACpFA,EAAS,WAAatsC,EAAI,WAAauuC,EACvCF,EAAcruC,EAAI,YAClBouC,EAAWpuC,EAAI,KAC3B,CACA,MAEQouC,EAAWtoC,EAAI,MAAM;AAAA,CAAI,EAE7B,QAASxG,EAAI,EAAGA,EAAI8uC,EAAS,OAAQ9uC,IAAK,CACtC,IAAIO,EAAOuuC,EAAS9uC,CAAC,EACjB4tC,EAAQ,IAAIpB,GAYhB,GAXAoB,EAAM,UAAYe,EAClBf,EAAM,KAAOrtC,EACbqtC,EAAM,aAAe,CAACrtC,GAAQ,CAACquC,EAC3B,OAAOf,EAAW,OAAU,SAC5BD,EAAM,MAAQC,EAAW,MAGzBD,EAAM,MAAQmB,EACRA,EAAY/uC,CAAC,EACbgzB,GAASzyB,EAAMC,CAAI,EAEzB,CAACR,GAAK,CAAC6uC,EAAS,CAChB,IAAInC,GAAUT,EAAMA,EAAM,OAAS,CAAC,IAAMA,EAAM,CAAC,EAAI,IAAIQ,KAAiB,OACtE0C,EAAYzC,EAAO,OACtByC,IAAc,GAAKzC,EAAO,CAAC,EAAE,aACvBA,EAAO,CAAC,EAAIkB,GACXrtC,GAAQ,CAAC4uC,GAAaP,IAAelC,EAAO,KAAKkB,CAAK,CAC1E,MAEY3B,EAAM,KAAK,IAAIQ,GAAa,CAACmB,CAAK,CAAC,CAAC,CAEhD,CACA,CACA,SAASwB,GAAmBC,EAAI,CAC5B,IAAIC,EAAOD,EAAG,WAAW,CAAC,EAC1B,OAAOC,GAAQ,IAAQA,GAAQ,KACxBA,GAAQ,KAASA,GAAQ,MACzBA,GAAQ,MAAUA,GAAQ,MAC1BA,GAAQ,MAAUA,GAAQ,IACrC,CACA,IAAIC,GAAepuC,GAAO,UAAU,MAAM,EAAE,EAAG,SAAUC,EAAKiuC,EAAI,CAC9D,OAAAjuC,EAAIiuC,CAAE,EAAI,GACHjuC,CACX,EAAG,EAAE,EACL,SAASouC,GAAgBH,EAAI,CACzB,OAAID,GAAmBC,CAAE,EACjB,EAAAE,GAAaF,CAAE,EAKhB,EACX,CACA,SAASnD,GAAS3rC,EAAMC,EAAM4qC,EAAWqE,EAAYC,EAAgB,CAOjE,QANIzD,EAAQ,CAAE,EACV8C,EAAc,CAAE,EAChBrB,EAAO,GACPiC,EAAc,GACdC,EAAmB,EACnBC,EAAa,EACR7vC,EAAI,EAAGA,EAAIO,EAAK,OAAQP,IAAK,CAClC,IAAIqvC,EAAK9uC,EAAK,OAAOP,CAAC,EACtB,GAAIqvC,IAAO;AAAA,EAAM,CACTM,IACAjC,GAAQiC,EACRE,GAAcD,GAElB3D,EAAM,KAAKyB,CAAI,EACfqB,EAAY,KAAKc,CAAU,EAC3BnC,EAAO,GACPiC,EAAc,GACdC,EAAmB,EACnBC,EAAa,EACb,QACZ,CACQ,IAAIC,EAAU9c,GAASqc,EAAI7uC,CAAI,EAC3BuvC,EAASN,EAAa,GAAQ,CAACD,GAAgBH,CAAE,EACrD,GAAKpD,EAAM,OAEL4D,EAAaC,EAAU1E,EADvBsE,EAAiBG,EAAaC,EAAU1E,EACN,CAC/ByE,GAYInC,GAAQiC,KACTI,GACKrC,IACDA,EAAOiC,EACPA,EAAc,GACdC,EAAmB,EACnBC,EAAaD,GAEjB3D,EAAM,KAAKyB,CAAI,EACfqB,EAAY,KAAKc,EAAaD,CAAgB,EAC9CD,GAAeN,EACfO,GAAoBE,EACpBpC,EAAO,GACPmC,EAAaD,IAGTD,IACAjC,GAAQiC,EACRA,EAAc,GACdC,EAAmB,GAEvB3D,EAAM,KAAKyB,CAAI,EACfqB,EAAY,KAAKc,CAAU,EAC3BnC,EAAO2B,EACPQ,EAAaC,IAnCbC,GACA9D,EAAM,KAAK0D,CAAW,EACtBZ,EAAY,KAAKa,CAAgB,EACjCD,EAAcN,EACdO,EAAmBE,IAGnB7D,EAAM,KAAKoD,CAAE,EACbN,EAAY,KAAKe,CAAO,GA8BhC,QACZ,CACQD,GAAcC,EACVC,GACAJ,GAAeN,EACfO,GAAoBE,IAGhBH,IACAjC,GAAQiC,EACRA,EAAc,GACdC,EAAmB,GAEvBlC,GAAQ2B,EAEpB,CACI,MAAI,CAACpD,EAAM,QAAU,CAACyB,IAClBA,EAAOntC,EACPovC,EAAc,GACdC,EAAmB,GAEnBD,IACAjC,GAAQiC,GAERjC,IACAzB,EAAM,KAAKyB,CAAI,EACfqB,EAAY,KAAKc,CAAU,GAE3B5D,EAAM,SAAW,IACjB4D,GAAcH,GAEX,CACH,WAAYG,EACZ,MAAO5D,EACP,YAAa8C,CAChB,CACL,CC5eA,IAAIiB,GAAkB,cAAgB,KAAK,MAAO,KAAK,OAAQ,EAAG,EAAI,EAC3DC,GAAuB,CAC9B,WAAY,EACZ,cAAe,EACf,cAAe,EACf,YAAa,OACb,QAAS,EACT,MAAO,aACX,EACWC,GAAiC,CACxC,MAAO,CACH,WAAY,GACZ,cAAe,GACf,cAAe,GACf,YAAa,GACb,QAAS,EACjB,CACA,EACAD,GAAqBD,EAAe,EAAI,GACxC,IAAI7b,GAAsB,CAAC,IAAK,KAAM,WAAW,EAC7Cgc,GAAqC,CAAC,WAAW,EACjDC,GAAe,SAAU95B,EAAQ,CACjCC,EAAU65B,EAAa95B,CAAM,EAC7B,SAAS85B,EAAYpkB,EAAO,CACxB,OAAO1V,EAAO,KAAK,KAAM0V,CAAK,GAAK,IAC3C,CACI,OAAAokB,EAAY,UAAU,MAAQ,SAAUpkB,EAAO,CAE3C,QADIvoB,EAAUC,GAAKsoB,CAAK,EACfhsB,EAAI,EAAGA,EAAIyD,EAAQ,OAAQzD,IAAK,CACrC,IAAI6C,EAAMY,EAAQzD,CAAC,EACf6C,IAAQ,QACR,KAAK,SAASmpB,EAAMnpB,CAAG,CAAC,EAGxByT,EAAO,UAAU,OAAO,KAAK,KAAMzT,EAAKmpB,EAAMnpB,CAAG,CAAC,CAElE,CACa,KAAK,OACN,KAAK,SAAS,EAAE,CAEvB,EACDutC,EAAY,UAAU,YAAc,UAAY,CAAG,EACnDA,EAAY,UAAU,WAAa,UAAY,CAAG,EAClDA,EAAY,UAAU,iBAAmB,UAAY,CAAG,EACxDA,EAAY,UAAU,gBAAkB,UAAY,CAAG,EACvDA,EAAY,UAAU,gBAAkB,SAAUC,EAAWC,EAAYC,EAAkBC,EAAmB,CAC1G,IAAIhnC,EAAI,KAAK,UACb,GAAI,KAAK,QACF,KAAK,WACL,KAAK,MAAM,UAAY,GACtB,KAAK,SACFinC,GAAoB,KAAMJ,EAAWC,CAAU,GAClD9mC,GAAK,CAACA,EAAE,CAAC,GAAK,CAACA,EAAE,CAAC,EACtB,MAAO,GAEX,GAAI+mC,GAAoB,KAAK,aACzB,QAASvwC,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQ,EAAEA,EAC3C,GAAI,KAAK,YAAYA,CAAC,EAAE,WAAU,EAC9B,MAAO,GAInB,GAAIwwC,GAAqB,KAAK,OAE1B,QADIE,EAAW,KAAK,OACbA,GAAU,CACb,GAAIA,EAAS,OACT,MAAO,GAEXA,EAAWA,EAAS,MACpC,CAEQ,MAAO,EACV,EACDN,EAAY,UAAU,QAAU,SAAU9nC,EAAGC,EAAG,CAC5C,OAAO,KAAK,YAAYD,EAAGC,CAAC,CAC/B,EACD6nC,EAAY,UAAU,SAAW,SAAUzrC,EAAIC,EAAS,CACpDD,EAAG,KAAKC,EAAS,IAAI,CACxB,EACDwrC,EAAY,UAAU,YAAc,SAAU9nC,EAAGC,EAAG,CAChD,IAAIooC,EAAQ,KAAK,sBAAsBroC,EAAGC,CAAC,EACvCiG,EAAO,KAAK,gBAAiB,EACjC,OAAOA,EAAK,QAAQmiC,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CACzC,EACDP,EAAY,UAAU,aAAe,UAAY,CAC7C,IAAI5hC,EAAO,KAAK,WAChB,GAAI,CAAC,KAAK,YAAc,KAAK,QAAS,CAClC,IAAI+jB,EAAY,KAAK,UACjBqe,EAAS,KAAK,gBAAiB,EAC/BtxC,EAAQ,KAAK,MACbuxC,EAAavxC,EAAM,YAAc,EACjCwxC,EAAgBxxC,EAAM,eAAiB,EACvCyxC,EAAgBzxC,EAAM,eAAiB,EAC3CkP,EAAO,KAAK,aAAe,KAAK,WAAa,IAAI4F,GAAa,EAAG,EAAG,EAAG,CAAC,GACpEme,EACAne,GAAa,eAAe5F,EAAMoiC,EAAQre,CAAS,EAGnD/jB,EAAK,KAAKoiC,CAAM,GAEhBC,GAAcC,GAAiBC,KAC/BviC,EAAK,OAASqiC,EAAa,EAAI,KAAK,IAAIC,CAAa,EACrDtiC,EAAK,QAAUqiC,EAAa,EAAI,KAAK,IAAIE,CAAa,EACtDviC,EAAK,EAAI,KAAK,IAAIA,EAAK,EAAGA,EAAK,EAAIsiC,EAAgBD,CAAU,EAC7DriC,EAAK,EAAI,KAAK,IAAIA,EAAK,EAAGA,EAAK,EAAIuiC,EAAgBF,CAAU,GAEjE,IAAIG,EAAY,KAAK,mBAChBxiC,EAAK,WACNA,EAAK,EAAI,KAAK,MAAMA,EAAK,EAAIwiC,CAAS,EACtCxiC,EAAK,EAAI,KAAK,MAAMA,EAAK,EAAIwiC,CAAS,EACtCxiC,EAAK,MAAQ,KAAK,KAAKA,EAAK,MAAQ,EAAIwiC,EAAY,CAAC,EACrDxiC,EAAK,OAAS,KAAK,KAAKA,EAAK,OAAS,EAAIwiC,EAAY,CAAC,EAEvE,CACQ,OAAOxiC,CACV,EACD4hC,EAAY,UAAU,iBAAmB,SAAUa,EAAW,CACtDA,GACA,KAAK,eAAiB,KAAK,gBAAkB,IAAI78B,GAAa,EAAG,EAAG,EAAG,CAAC,EACxE,KAAK,eAAe,KAAK68B,CAAS,GAGlC,KAAK,eAAiB,IAE7B,EACDb,EAAY,UAAU,iBAAmB,UAAY,CACjD,OAAO,KAAK,cACf,EACDA,EAAY,UAAU,aAAe,SAAUvkB,EAAM,CACjD,OAAO,KAAK,QAAQ,QAASA,CAAI,CACpC,EACDukB,EAAY,UAAU,sBAAwB,SAAUc,EAAW,CAC3DA,IAAc,QACd,KAAK,WAAY,EAGjB,KAAK,WAAY,CAExB,EACDd,EAAY,UAAU,OAAS,SAAUvtC,EAAKgB,EAAO,CAC7ChB,IAAQ,QACRyT,EAAO,UAAU,OAAO,KAAK,KAAMzT,EAAKgB,CAAK,EAGxC,KAAK,MAIN,KAAK,SAASA,CAAK,EAHnB,KAAK,SAASA,CAAK,CAM9B,EACDusC,EAAY,UAAU,SAAW,SAAU3a,EAAU5xB,EAAO,CACxD,OAAI,OAAO4xB,GAAa,SACpB,KAAK,MAAMA,CAAQ,EAAI5xB,EAGvBP,EAAO,KAAK,MAAOmyB,CAAQ,EAE/B,KAAK,WAAY,EACV,IACV,EACD2a,EAAY,UAAU,WAAa,SAAUe,EAAW,CAC/CA,GACD,KAAK,WAAY,EAErB,KAAK,SAAWt0B,GACZ,KAAK,QACL,KAAK,MAAQ,KAEpB,EACDuzB,EAAY,UAAU,MAAQ,UAAY,CACtC,KAAK,WAAY,CACpB,EACDA,EAAY,UAAU,aAAe,UAAY,CAC7C,MAAO,CAAC,EAAE,KAAK,QAAUvzB,GAC5B,EACDuzB,EAAY,UAAU,aAAe,UAAY,CAC7C,KAAK,SAAW,EACnB,EACDA,EAAY,UAAU,YAAc,SAAUhvC,EAAK,CAC/C,OAAOsG,GAAauoC,GAAsB7uC,CAAG,CAChD,EACDgvC,EAAY,UAAU,SAAW,SAAUhvC,EAAK,CACvCA,EAAI4uC,EAAe,IACpB5uC,EAAM,KAAK,YAAYA,CAAG,GAE1B,KAAK,UACL,KAAK,aAAeA,EAGpB,KAAK,MAAQA,EAEjB,KAAK,WAAY,CACpB,EACDgvC,EAAY,UAAU,cAAgB,SAAUhvC,EAAK,CACjD,OAAOA,EAAI4uC,EAAe,CAC7B,EACDI,EAAY,UAAU,mBAAqB,SAAU1a,EAAS,CAC1Dpf,EAAO,UAAU,mBAAmB,KAAK,KAAMof,CAAO,EACtD,IAAIC,EAAc,KAAK,aACnBD,EAAQ,OAAS,CAACC,EAAY,QAC9BA,EAAY,MAAQ,KAAK,YAAY,KAAK,YAAa,EAAE,KAAK,KAAK,GAEvE,KAAK,qBAAqBD,EAASC,EAAaxB,EAAmB,CACtE,EACDic,EAAY,UAAU,eAAiB,SAAUna,EAAWO,EAAOb,EAAaO,EAAmBqB,EAAYhB,EAAc,CACzHjgB,EAAO,UAAU,eAAe,KAAK,KAAM2f,EAAWO,EAAOb,EAAaO,EAAmBqB,EAAYhB,CAAY,EACrH,IAAIiB,EAAuB,EAAEhB,GAASN,GAClCkb,EAmBJ,GAlBI5a,GAASA,EAAM,MACXe,EACIrB,EACAkb,EAAc5a,EAAM,OAGpB4a,EAAc,KAAK,YAAY,KAAK,YAAa,EAAEzb,EAAY,KAAK,EACpE,KAAK,YAAYyb,EAAa5a,EAAM,KAAK,IAI7C4a,EAAc,KAAK,YAAY,KAAK,YAAW,EAAIlb,EAAoB,KAAK,MAAQP,EAAY,KAAK,EACrG,KAAK,YAAYyb,EAAa5a,EAAM,KAAK,GAGxCgB,IACL4Z,EAAczb,EAAY,OAE1Byb,EACA,GAAI7Z,EAAY,CACZ,IAAI8Z,EAAc,KAAK,MAEvB,GADA,KAAK,MAAQ,KAAK,YAAY7Z,EAAuB,CAAE,EAAG6Z,CAAW,EACjE7Z,EAEA,QADI8Z,EAAc5tC,GAAK2tC,CAAW,EACzBrxC,EAAI,EAAGA,EAAIsxC,EAAY,OAAQtxC,IAAK,CACzC,IAAI6C,EAAMyuC,EAAYtxC,CAAC,EACnB6C,KAAOuuC,IACPA,EAAYvuC,CAAG,EAAIuuC,EAAYvuC,CAAG,EAClC,KAAK,MAAMA,CAAG,EAAIwuC,EAAYxuC,CAAG,EAE7D,CAGgB,QADIi3B,EAAap2B,GAAK0tC,CAAW,EACxBpxC,EAAI,EAAGA,EAAI85B,EAAW,OAAQ95B,IAAK,CACxC,IAAI6C,EAAMi3B,EAAW95B,CAAC,EACtB,KAAK,MAAM6C,CAAG,EAAI,KAAK,MAAMA,CAAG,CACpD,CACgB,KAAK,iBAAiBozB,EAAW,CAC7B,MAAOmb,CAC3B,EAAmB7a,EAAc,KAAK,wBAAwB,CAC9D,MAEgB,KAAK,SAAS6a,CAAW,EAIjC,QADIG,EAAa,KAAK,UAAYpB,GAAqChc,GAC9Dn0B,EAAI,EAAGA,EAAIuxC,EAAW,OAAQvxC,IAAK,CACxC,IAAI6C,EAAM0uC,EAAWvxC,CAAC,EAClBw2B,GAASA,EAAM3zB,CAAG,GAAK,KACvB,KAAKA,CAAG,EAAI2zB,EAAM3zB,CAAG,EAEhB20B,GACD7B,EAAY9yB,CAAG,GAAK,OACpB,KAAKA,CAAG,EAAI8yB,EAAY9yB,CAAG,EAG/C,CACK,EACDutC,EAAY,UAAU,aAAe,SAAUra,EAAQ,CAGnD,QAFIgB,EAAczgB,EAAO,UAAU,aAAa,KAAK,KAAMyf,CAAM,EAC7Dyb,EACKxxC,EAAI,EAAGA,EAAI+1B,EAAO,OAAQ/1B,IAAK,CACpC,IAAIw2B,EAAQT,EAAO/1B,CAAC,EAChBw2B,EAAM,QACNgb,EAAcA,GAAe,CAAE,EAC/B,KAAK,YAAYA,EAAahb,EAAM,KAAK,EAEzD,CACQ,OAAIgb,IACAza,EAAY,MAAQya,GAEjBza,CACV,EACDqZ,EAAY,UAAU,YAAc,SAAUgB,EAAaC,EAAa,CACpE,OAAA/tC,EAAO8tC,EAAaC,CAAW,EACxBD,CACV,EACDhB,EAAY,UAAU,uBAAyB,UAAY,CACvD,OAAOF,EACV,EACDE,EAAY,iBAAoB,UAAY,CACxC,IAAIqB,EAAYrB,EAAY,UAC5BqB,EAAU,KAAO,cACjBA,EAAU,UAAY,GACtBA,EAAU,EAAI,EACdA,EAAU,GAAK,EACfA,EAAU,OAAS,EACnBA,EAAU,QAAU,GACpBA,EAAU,OAAS,UACnBA,EAAU,UAAY,GACtBA,EAAU,YAAc,GACxBA,EAAU,MAAQ,KAClBA,EAAU,mBAAqB,EAC/BA,EAAU,QAAU70B,GAAaC,EACzC,EAAQ,EACGuzB,CACX,EAAE7b,EAAO,EACL5d,GAAU,IAAIvC,GAAa,EAAG,EAAG,EAAG,CAAC,EACrCs9B,GAAW,IAAIt9B,GAAa,EAAG,EAAG,EAAG,CAAC,EAC1C,SAASq8B,GAAoBpjC,EAAIzM,EAAOyT,EAAQ,CAC5C,OAAAsC,GAAQ,KAAKtJ,EAAG,iBAAiB,EAC7BA,EAAG,WACHsJ,GAAQ,eAAetJ,EAAG,SAAS,EAEvCqkC,GAAS,MAAQ9wC,EACjB8wC,GAAS,OAASr9B,EACX,CAACsC,GAAQ,UAAU+6B,EAAQ,CACtC,CChUA,IAAI99B,GAAU,KAAK,IACfC,GAAU,KAAK,IACf89B,GAAU,KAAK,IACfC,GAAU,KAAK,IACfr5B,GAAM,KAAK,GAAK,EAChB2B,GAAQ23B,GAAa,EACrBjV,GAAMiV,GAAa,EACnBC,GAAYD,GAAa,EAsBtB,SAASE,GAASlxB,EAAIC,EAAIpI,EAAIC,EAAIlP,EAAKC,EAAK,CAC/CD,EAAI,CAAC,EAAImK,GAAQiN,EAAInI,CAAE,EACvBjP,EAAI,CAAC,EAAImK,GAAQkN,EAAInI,CAAE,EACvBjP,EAAI,CAAC,EAAImK,GAAQgN,EAAInI,CAAE,EACvBhP,EAAI,CAAC,EAAImK,GAAQiN,EAAInI,CAAE,CAC3B,CACA,IAAIq5B,GAAO,CAAE,EACTC,GAAO,CAAE,EACN,SAASC,GAAUrxB,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAIzX,EAAKC,EAAK,CAChE,IAAIyW,EAAegyB,GACfjzB,EAAUkzB,GACV14B,EAAIyG,EAAaU,EAAInI,EAAIqI,EAAIE,EAAI+wB,EAAI,EACzCvoC,EAAI,CAAC,EAAI,IACTA,EAAI,CAAC,EAAI,IACTC,EAAI,CAAC,EAAI,KACTA,EAAI,CAAC,EAAI,KACT,QAAS1J,EAAI,EAAGA,EAAI0Z,EAAG1Z,IAAK,CACxB,IAAIsI,EAAI4W,EAAQ2B,EAAInI,EAAIqI,EAAIE,EAAI+wB,GAAKhyC,CAAC,CAAC,EACvCyJ,EAAI,CAAC,EAAImK,GAAQtL,EAAGmB,EAAI,CAAC,CAAC,EAC1BC,EAAI,CAAC,EAAImK,GAAQvL,EAAGoB,EAAI,CAAC,CAAC,CAClC,CACIgQ,EAAIyG,EAAaW,EAAInI,EAAIqI,EAAIE,EAAI+wB,EAAI,EACrC,QAASjyC,EAAI,EAAGA,EAAI0Z,EAAG1Z,IAAK,CACxB,IAAIuI,EAAI2W,EAAQ4B,EAAInI,EAAIqI,EAAIE,EAAI+wB,GAAKjyC,CAAC,CAAC,EACvCyJ,EAAI,CAAC,EAAImK,GAAQrL,EAAGkB,EAAI,CAAC,CAAC,EAC1BC,EAAI,CAAC,EAAImK,GAAQtL,EAAGmB,EAAI,CAAC,CAAC,CAClC,CACID,EAAI,CAAC,EAAImK,GAAQiN,EAAIpX,EAAI,CAAC,CAAC,EAC3BC,EAAI,CAAC,EAAImK,GAAQgN,EAAInX,EAAI,CAAC,CAAC,EAC3BD,EAAI,CAAC,EAAImK,GAAQqN,EAAIxX,EAAI,CAAC,CAAC,EAC3BC,EAAI,CAAC,EAAImK,GAAQoN,EAAIvX,EAAI,CAAC,CAAC,EAC3BD,EAAI,CAAC,EAAImK,GAAQkN,EAAIrX,EAAI,CAAC,CAAC,EAC3BC,EAAI,CAAC,EAAImK,GAAQiN,EAAIpX,EAAI,CAAC,CAAC,EAC3BD,EAAI,CAAC,EAAImK,GAAQsN,EAAIzX,EAAI,CAAC,CAAC,EAC3BC,EAAI,CAAC,EAAImK,GAAQqN,EAAIxX,EAAI,CAAC,CAAC,CAC/B,CACO,SAAS2oC,GAAcxxB,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIvX,EAAKC,EAAK,CAC5D,IAAIsY,EAAoBswB,GACpBzwB,EAAc0wB,GACd58B,EAAK9B,GAAQD,GAAQoO,EAAkBnB,EAAInI,EAAIqI,CAAE,EAAG,CAAC,EAAG,CAAC,EACzDnL,EAAK/B,GAAQD,GAAQoO,EAAkBlB,EAAInI,EAAIqI,CAAE,EAAG,CAAC,EAAG,CAAC,EACzD1Y,EAAIuZ,EAAYhB,EAAInI,EAAIqI,EAAIpL,CAAE,EAC9BpN,EAAIsZ,EAAYf,EAAInI,EAAIqI,EAAIpL,CAAE,EAClCnM,EAAI,CAAC,EAAImK,GAAQiN,EAAIE,EAAIzY,CAAC,EAC1BmB,EAAI,CAAC,EAAImK,GAAQkN,EAAIE,EAAIzY,CAAC,EAC1BmB,EAAI,CAAC,EAAImK,GAAQgN,EAAIE,EAAIzY,CAAC,EAC1BoB,EAAI,CAAC,EAAImK,GAAQiN,EAAIE,EAAIzY,CAAC,CAC9B,CACO,SAASiqC,GAAQlqC,EAAGC,EAAGkqC,EAAIC,EAAIC,EAAYC,EAAUC,EAAeppC,EAAKC,EAAK,CACjF,IAAIopC,EAAUC,GACVC,EAAUC,GACVC,EAAO,KAAK,IAAIP,EAAaC,CAAQ,EACzC,GAAIM,EAAO36B,GAAM,MAAQ26B,EAAO,KAAM,CAClCzpC,EAAI,CAAC,EAAInB,EAAImqC,EACbhpC,EAAI,CAAC,EAAIlB,EAAImqC,EACbhpC,EAAI,CAAC,EAAIpB,EAAImqC,EACb/oC,EAAI,CAAC,EAAInB,EAAImqC,EACb,MACR,CAqBI,GApBAx4B,GAAM,CAAC,EAAI03B,GAAQe,CAAU,EAAIF,EAAKnqC,EACtC4R,GAAM,CAAC,EAAIy3B,GAAQgB,CAAU,EAAID,EAAKnqC,EACtCq0B,GAAI,CAAC,EAAIgV,GAAQgB,CAAQ,EAAIH,EAAKnqC,EAClCs0B,GAAI,CAAC,EAAI+U,GAAQiB,CAAQ,EAAIF,EAAKnqC,EAClCuqC,EAAQrpC,EAAKyQ,GAAO0iB,EAAG,EACvBoW,EAAQtpC,EAAKwQ,GAAO0iB,EAAG,EACvB+V,EAAaA,EAAcp6B,GACvBo6B,EAAa,IACbA,EAAaA,EAAap6B,IAE9Bq6B,EAAWA,EAAYr6B,GACnBq6B,EAAW,IACXA,EAAWA,EAAWr6B,IAEtBo6B,EAAaC,GAAY,CAACC,EAC1BD,GAAYr6B,GAEPo6B,EAAaC,GAAYC,IAC9BF,GAAcp6B,IAEds6B,EAAe,CACf,IAAIl4B,EAAMi4B,EACVA,EAAWD,EACXA,EAAah4B,CACrB,CACI,QAASw4B,EAAQ,EAAGA,EAAQP,EAAUO,GAAS,KAAK,GAAK,EACjDA,EAAQR,IACRb,GAAU,CAAC,EAAIF,GAAQuB,CAAK,EAAIV,EAAKnqC,EACrCwpC,GAAU,CAAC,EAAIH,GAAQwB,CAAK,EAAIT,EAAKnqC,EACrCuqC,EAAQrpC,EAAKqoC,GAAWroC,CAAG,EAC3BupC,EAAQtpC,EAAKooC,GAAWpoC,CAAG,EAGvC,CCtHA,IAAI0pC,GAAM,CACN,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,CACP,EACIC,GAAU,CAAE,EACZC,GAAU,CAAE,EACZ7pC,GAAM,CAAE,EACRC,GAAM,CAAE,EACR6pC,GAAO,CAAE,EACTC,GAAO,CAAE,EACT5/B,GAAU,KAAK,IACfC,GAAU,KAAK,IACf+9B,GAAU,KAAK,IACfD,GAAU,KAAK,IACf8B,GAAU,KAAK,IACfC,GAAK,KAAK,GACVn7B,GAAMm7B,GAAK,EACXC,GAAgB,OAAO,aAAiB,IACxCC,GAAY,CAAE,EAClB,SAASC,GAAOzU,EAAQ,CACpB,IAAI1lB,EAAI,KAAK,MAAM0lB,EAASsU,GAAK,GAAG,EAAI,IACxC,OAAQh6B,EAAI,EAAKg6B,EACrB,CACO,SAASI,GAAmBC,EAAQlB,EAAe,CACtD,IAAImB,EAAgBH,GAAOE,EAAO,CAAC,CAAC,EAChCC,EAAgB,IAChBA,GAAiBz7B,IAErB,IAAIvI,EAAQgkC,EAAgBD,EAAO,CAAC,EAChCE,EAAcF,EAAO,CAAC,EAC1BE,GAAejkC,EACX,CAAC6iC,GAAiBoB,EAAcD,GAAiBz7B,GACjD07B,EAAcD,EAAgBz7B,GAEzBs6B,GAAiBmB,EAAgBC,GAAe17B,GACrD07B,EAAcD,EAAgBz7B,GAEzB,CAACs6B,GAAiBmB,EAAgBC,EACvCA,EAAcD,GAAiBz7B,GAAMs7B,GAAOG,EAAgBC,CAAW,GAElEpB,GAAiBmB,EAAgBC,IACtCA,EAAcD,GAAiBz7B,GAAMs7B,GAAOI,EAAcD,CAAa,IAE3ED,EAAO,CAAC,EAAIC,EACZD,EAAO,CAAC,EAAIE,CAChB,CACA,IAAIC,GAAa,UAAY,CACzB,SAASA,EAAUC,EAAa,CAC5B,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,IAAM,EACX,KAAK,KAAO,EACRA,IACA,KAAK,UAAY,IAEjB,KAAK,YACL,KAAK,KAAO,CAAE,EAE1B,CACI,OAAAD,EAAU,UAAU,gBAAkB,UAAY,CAC9C,KAAK,UACR,EACDA,EAAU,UAAU,WAAa,UAAY,CACzC,OAAO,KAAK,QACf,EACDA,EAAU,UAAU,SAAW,SAAU5/B,EAAIC,EAAI6/B,EAAwB,CACrEA,EAAyBA,GAA0B,EAC/CA,EAAyB,IACzB,KAAK,IAAMX,GAAQW,EAAyB3jB,GAAMnc,CAAE,GAAK,EACzD,KAAK,IAAMm/B,GAAQW,EAAyB3jB,GAAMlc,CAAE,GAAK,EAEhE,EACD2/B,EAAU,UAAU,OAAS,SAAUzjB,EAAK,CACxC,KAAK,IAAMA,CACd,EACDyjB,EAAU,UAAU,WAAa,SAAU/oC,EAAK,CAC5C,KAAK,KAAOA,CACf,EACD+oC,EAAU,UAAU,WAAa,UAAY,CACzC,OAAO,KAAK,IACf,EACDA,EAAU,UAAU,UAAY,UAAY,CACxC,YAAK,MAAQ,KAAK,KAAK,UAAW,EAClC,KAAK,MAAO,EACL,IACV,EACDA,EAAU,UAAU,MAAQ,UAAY,CAChC,KAAK,YACL,KAAK,KAAO,GAEZ,KAAK,cACL,KAAK,YAAc,KACnB,KAAK,SAAW,GAEpB,KAAK,UACR,EACDA,EAAU,UAAU,OAAS,SAAU5rC,EAAGC,EAAG,CACzC,YAAK,eAAgB,EACrB,KAAK,QAAQ6qC,GAAI,EAAG9qC,EAAGC,CAAC,EACxB,KAAK,MAAQ,KAAK,KAAK,OAAOD,EAAGC,CAAC,EAClC,KAAK,IAAMD,EACX,KAAK,IAAMC,EACX,KAAK,IAAMD,EACX,KAAK,IAAMC,EACJ,IACV,EACD2rC,EAAU,UAAU,OAAS,SAAU5rC,EAAGC,EAAG,CACzC,IAAIyB,EAAKypC,GAAQnrC,EAAI,KAAK,GAAG,EACzB2B,EAAKwpC,GAAQlrC,EAAI,KAAK,GAAG,EACzB8rC,EAAarqC,EAAK,KAAK,KAAOC,EAAK,KAAK,IAK5C,GAJA,KAAK,QAAQmpC,GAAI,EAAG9qC,EAAGC,CAAC,EACpB,KAAK,MAAQ8rC,GACb,KAAK,KAAK,OAAO/rC,EAAGC,CAAC,EAErB8rC,EACA,KAAK,IAAM/rC,EACX,KAAK,IAAMC,EACX,KAAK,eAAiB,MAErB,CACD,IAAIkN,EAAKzL,EAAKA,EAAKC,EAAKA,EACpBwL,EAAK,KAAK,iBACV,KAAK,YAAcnN,EACnB,KAAK,YAAcC,EACnB,KAAK,eAAiBkN,EAEtC,CACQ,OAAO,IACV,EACDy+B,EAAU,UAAU,cAAgB,SAAUx7B,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAI,CAClE,YAAK,eAAgB,EACrB,KAAK,QAAQkyB,GAAI,EAAG16B,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,CAAE,EACtC,KAAK,MACL,KAAK,KAAK,cAAcxI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,CAAE,EAElD,KAAK,IAAMD,EACX,KAAK,IAAMC,EACJ,IACV,EACDgzB,EAAU,UAAU,iBAAmB,SAAUx7B,EAAIC,EAAIoI,EAAIC,EAAI,CAC7D,YAAK,eAAgB,EACrB,KAAK,QAAQoyB,GAAI,EAAG16B,EAAIC,EAAIoI,EAAIC,CAAE,EAC9B,KAAK,MACL,KAAK,KAAK,iBAAiBtI,EAAIC,EAAIoI,EAAIC,CAAE,EAE7C,KAAK,IAAMD,EACX,KAAK,IAAMC,EACJ,IACV,EACDkzB,EAAU,UAAU,IAAM,SAAUI,EAAIC,EAAI/7B,EAAGm6B,EAAYC,EAAUC,EAAe,CAChF,KAAK,eAAgB,EACrBe,GAAU,CAAC,EAAIjB,EACfiB,GAAU,CAAC,EAAIhB,EACfkB,GAAmBF,GAAWf,CAAa,EAC3CF,EAAaiB,GAAU,CAAC,EACxBhB,EAAWgB,GAAU,CAAC,EACtB,IAAI5jC,EAAQ4iC,EAAWD,EACvB,YAAK,QAAQS,GAAI,EAAGkB,EAAIC,EAAI/7B,EAAGA,EAAGm6B,EAAY3iC,EAAO,EAAG6iC,EAAgB,EAAI,CAAC,EAC7E,KAAK,MAAQ,KAAK,KAAK,IAAIyB,EAAIC,EAAI/7B,EAAGm6B,EAAYC,EAAUC,CAAa,EACzE,KAAK,IAAMjB,GAAQgB,CAAQ,EAAIp6B,EAAI87B,EACnC,KAAK,IAAM3C,GAAQiB,CAAQ,EAAIp6B,EAAI+7B,EAC5B,IACV,EACDL,EAAU,UAAU,MAAQ,SAAUx7B,EAAIC,EAAIoI,EAAIC,EAAIwzB,EAAQ,CAC1D,YAAK,eAAgB,EACjB,KAAK,MACL,KAAK,KAAK,MAAM97B,EAAIC,EAAIoI,EAAIC,EAAIwzB,CAAM,EAEnC,IACV,EACDN,EAAU,UAAU,KAAO,SAAU5rC,EAAGC,EAAG+iB,EAAG9G,EAAG,CAC7C,YAAK,eAAgB,EACrB,KAAK,MAAQ,KAAK,KAAK,KAAKlc,EAAGC,EAAG+iB,EAAG9G,CAAC,EACtC,KAAK,QAAQ4uB,GAAI,EAAG9qC,EAAGC,EAAG+iB,EAAG9G,CAAC,EACvB,IACV,EACD0vB,EAAU,UAAU,UAAY,UAAY,CACxC,KAAK,eAAgB,EACrB,KAAK,QAAQd,GAAI,CAAC,EAClB,IAAIjoC,EAAM,KAAK,KACX0V,EAAK,KAAK,IACVC,EAAK,KAAK,IACd,OAAI3V,GACAA,EAAI,UAAW,EAEnB,KAAK,IAAM0V,EACX,KAAK,IAAMC,EACJ,IACV,EACDozB,EAAU,UAAU,KAAO,SAAU/oC,EAAK,CACtCA,GAAOA,EAAI,KAAM,EACjB,KAAK,SAAU,CAClB,EACD+oC,EAAU,UAAU,OAAS,SAAU/oC,EAAK,CACxCA,GAAOA,EAAI,OAAQ,EACnB,KAAK,SAAU,CAClB,EACD+oC,EAAU,UAAU,IAAM,UAAY,CAClC,OAAO,KAAK,IACf,EACDA,EAAU,UAAU,QAAU,SAAU1vC,EAAM,CAC1C,IAAI9B,EAAM8B,EAAK,OACX,EAAE,KAAK,MAAQ,KAAK,KAAK,SAAW9B,IAAQixC,KAC5C,KAAK,KAAO,IAAI,aAAajxC,CAAG,GAEpC,QAAS,EAAI,EAAG,EAAIA,EAAK,IACrB,KAAK,KAAK,CAAC,EAAI8B,EAAK,CAAC,EAEzB,KAAK,KAAO9B,CACf,EACDwxC,EAAU,UAAU,WAAa,SAAUO,EAAM,CACvCA,aAAgB,QAClBA,EAAO,CAACA,CAAI,GAKhB,QAHI/xC,EAAM+xC,EAAK,OACXC,EAAa,EACbjtC,EAAS,KAAK,KACTzH,EAAI,EAAGA,EAAI0C,EAAK1C,IACrB00C,GAAcD,EAAKz0C,CAAC,EAAE,IAAK,EAE3B2zC,IAAkB,KAAK,gBAAgB,eACvC,KAAK,KAAO,IAAI,aAAalsC,EAASitC,CAAU,GAEpD,QAAS10C,EAAI,EAAGA,EAAI0C,EAAK1C,IAErB,QADI20C,EAAiBF,EAAKz0C,CAAC,EAAE,KACpB4b,EAAI,EAAGA,EAAI+4B,EAAe,OAAQ/4B,IACvC,KAAK,KAAKnU,GAAQ,EAAIktC,EAAe/4B,CAAC,EAG9C,KAAK,KAAOnU,CACf,EACDysC,EAAU,UAAU,QAAU,SAAUU,EAAKttC,EAAGC,EAAGsH,EAAG3F,EAAGY,EAAGsa,EAAGO,EAAGH,EAAG,CACjE,GAAK,KAAK,UAGV,KAAIhgB,EAAO,KAAK,KACZ,KAAK,KAAO,UAAU,OAASA,EAAK,SACpC,KAAK,YAAa,EAClBA,EAAO,KAAK,MAEhB,QAASxE,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAClCwE,EAAK,KAAK,MAAM,EAAI,UAAUxE,CAAC,EAEtC,EACDk0C,EAAU,UAAU,eAAiB,UAAY,CACzC,KAAK,eAAiB,IACtB,KAAK,MAAQ,KAAK,KAAK,OAAO,KAAK,YAAa,KAAK,WAAW,EAChE,KAAK,eAAiB,EAE7B,EACDA,EAAU,UAAU,YAAc,UAAY,CAC1C,GAAI,EAAE,KAAK,gBAAgB,OAAQ,CAE/B,QADIW,EAAU,CAAE,EACP70C,EAAI,EAAGA,EAAI,KAAK,KAAMA,IAC3B60C,EAAQ70C,CAAC,EAAI,KAAK,KAAKA,CAAC,EAE5B,KAAK,KAAO60C,CACxB,CACK,EACDX,EAAU,UAAU,SAAW,UAAY,CACvC,GAAK,KAAK,UAGV,MAAK,eAAgB,EACrB,IAAI1vC,EAAO,KAAK,KACZA,aAAgB,QAChBA,EAAK,OAAS,KAAK,KACfmvC,IAAiB,KAAK,KAAO,KAC7B,KAAK,KAAO,IAAI,aAAanvC,CAAI,IAG5C,EACD0vC,EAAU,UAAU,gBAAkB,UAAY,CAC9CzqC,GAAI,CAAC,EAAIA,GAAI,CAAC,EAAI8pC,GAAK,CAAC,EAAIA,GAAK,CAAC,EAAI,OAAO,UAC7C7pC,GAAI,CAAC,EAAIA,GAAI,CAAC,EAAI8pC,GAAK,CAAC,EAAIA,GAAK,CAAC,EAAI,CAAC,OAAO,UAC9C,IAAIhvC,EAAO,KAAK,KACZswC,EAAK,EACLC,EAAK,EACLl0B,EAAK,EACLC,EAAK,EACL9gB,EACJ,IAAKA,EAAI,EAAGA,EAAI,KAAK,MAAO,CACxB,IAAI40C,EAAMpwC,EAAKxE,GAAG,EACdg1C,EAAUh1C,IAAM,EAOpB,OANIg1C,IACAF,EAAKtwC,EAAKxE,CAAC,EACX+0C,EAAKvwC,EAAKxE,EAAI,CAAC,EACf6gB,EAAKi0B,EACLh0B,EAAKi0B,GAEDH,EAAG,CACP,KAAKxB,GAAI,EACL0B,EAAKj0B,EAAKrc,EAAKxE,GAAG,EAClB+0C,EAAKj0B,EAAKtc,EAAKxE,GAAG,EAClBuzC,GAAK,CAAC,EAAI1yB,EACV0yB,GAAK,CAAC,EAAIzyB,EACV0yB,GAAK,CAAC,EAAI3yB,EACV2yB,GAAK,CAAC,EAAI1yB,EACV,MACJ,KAAKsyB,GAAI,EACLrB,GAAS+C,EAAIC,EAAIvwC,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGuzC,GAAMC,EAAI,EACjDsB,EAAKtwC,EAAKxE,GAAG,EACb+0C,EAAKvwC,EAAKxE,GAAG,EACb,MACJ,KAAKozC,GAAI,EACLlB,GAAU4C,EAAIC,EAAIvwC,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGuzC,GAAMC,EAAI,EAC9FsB,EAAKtwC,EAAKxE,GAAG,EACb+0C,EAAKvwC,EAAKxE,GAAG,EACb,MACJ,KAAKozC,GAAI,EACLf,GAAcyC,EAAIC,EAAIvwC,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGuzC,GAAMC,EAAI,EAC5EsB,EAAKtwC,EAAKxE,GAAG,EACb+0C,EAAKvwC,EAAKxE,GAAG,EACb,MACJ,KAAKozC,GAAI,EACL,IAAIkB,EAAK9vC,EAAKxE,GAAG,EACbu0C,EAAK/vC,EAAKxE,GAAG,EACbyyC,EAAKjuC,EAAKxE,GAAG,EACb0yC,EAAKluC,EAAKxE,GAAG,EACb2yC,EAAanuC,EAAKxE,GAAG,EACrB4yC,EAAWpuC,EAAKxE,GAAG,EAAI2yC,EAC3B3yC,GAAK,EACL,IAAI6yC,EAAgB,CAACruC,EAAKxE,GAAG,EACzBg1C,IACAn0B,EAAK+wB,GAAQe,CAAU,EAAIF,EAAK6B,EAChCxzB,EAAK6wB,GAAQgB,CAAU,EAAID,EAAK6B,GAEpC/B,GAAQ8B,EAAIC,EAAI9B,EAAIC,EAAIC,EAAYC,EAAUC,EAAeU,GAAMC,EAAI,EACvEsB,EAAKlD,GAAQgB,CAAQ,EAAIH,EAAK6B,EAC9BS,EAAKpD,GAAQiB,CAAQ,EAAIF,EAAK6B,EAC9B,MACJ,KAAKnB,GAAI,EACLvyB,EAAKi0B,EAAKtwC,EAAKxE,GAAG,EAClB8gB,EAAKi0B,EAAKvwC,EAAKxE,GAAG,EAClB,IAAIY,EAAQ4D,EAAKxE,GAAG,EAChBqU,EAAS7P,EAAKxE,GAAG,EACrB+xC,GAASlxB,EAAIC,EAAID,EAAKjgB,EAAOkgB,EAAKzM,EAAQk/B,GAAMC,EAAI,EACpD,MACJ,KAAKJ,GAAI,EACL0B,EAAKj0B,EACLk0B,EAAKj0B,EACL,KACpB,CACYiyB,GAAStpC,GAAKA,GAAK8pC,EAAI,EACvBN,GAASvpC,GAAKA,GAAK8pC,EAAI,CACnC,CACQ,OAAIxzC,IAAM,IACNyJ,GAAI,CAAC,EAAIA,GAAI,CAAC,EAAIC,GAAI,CAAC,EAAIA,GAAI,CAAC,EAAI,GAEjC,IAAI0K,GAAa3K,GAAI,CAAC,EAAGA,GAAI,CAAC,EAAGC,GAAI,CAAC,EAAID,GAAI,CAAC,EAAGC,GAAI,CAAC,EAAID,GAAI,CAAC,CAAC,CAC3E,EACDyqC,EAAU,UAAU,iBAAmB,UAAY,CAC/C,IAAI1vC,EAAO,KAAK,KACZ9B,EAAM,KAAK,KACXuyC,EAAK,KAAK,IACVC,EAAK,KAAK,IACVJ,EAAK,EACLC,EAAK,EACLl0B,EAAK,EACLC,EAAK,EACJ,KAAK,cACN,KAAK,YAAc,CAAE,GAKzB,QAHIq0B,EAAa,KAAK,YAClBC,EAAe,EACfC,EAAW,EACNr1C,EAAI,EAAGA,EAAI0C,GAAM,CACtB,IAAIkyC,EAAMpwC,EAAKxE,GAAG,EACdg1C,EAAUh1C,IAAM,EAChBg1C,IACAF,EAAKtwC,EAAKxE,CAAC,EACX+0C,EAAKvwC,EAAKxE,EAAI,CAAC,EACf6gB,EAAKi0B,EACLh0B,EAAKi0B,GAET,IAAI/pC,EAAI,GACR,OAAQ4pC,EAAG,CACP,KAAKxB,GAAI,EACL0B,EAAKj0B,EAAKrc,EAAKxE,GAAG,EAClB+0C,EAAKj0B,EAAKtc,EAAKxE,GAAG,EAClB,MACJ,KAAKozC,GAAI,EAAG,CACR,IAAIryB,EAAKvc,EAAKxE,GAAG,EACbghB,EAAKxc,EAAKxE,GAAG,EACbgK,EAAK+W,EAAK+zB,EACV7qC,EAAK+W,EAAK+zB,GACVtB,GAAQzpC,CAAE,EAAIirC,GAAMxB,GAAQxpC,CAAE,EAAIirC,GAAMl1C,IAAM0C,EAAM,KACpDsI,EAAI,KAAK,KAAKhB,EAAKA,EAAKC,EAAKA,CAAE,EAC/B6qC,EAAK/zB,EACLg0B,EAAK/zB,GAET,KACpB,CACgB,KAAKoyB,GAAI,EAAG,CACR,IAAI16B,EAAKlU,EAAKxE,GAAG,EACb2Y,EAAKnU,EAAKxE,GAAG,EACb+gB,EAAKvc,EAAKxE,GAAG,EACbghB,EAAKxc,EAAKxE,GAAG,EACbihB,EAAKzc,EAAKxE,GAAG,EACbkhB,EAAK1c,EAAKxE,GAAG,EACjBgL,EAAIwW,GAAYszB,EAAIC,EAAIr8B,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAI,EAAE,EAClD4zB,EAAK7zB,EACL8zB,EAAK7zB,EACL,KACpB,CACgB,KAAKkyB,GAAI,EAAG,CACR,IAAI16B,EAAKlU,EAAKxE,GAAG,EACb2Y,EAAKnU,EAAKxE,GAAG,EACb+gB,EAAKvc,EAAKxE,GAAG,EACbghB,EAAKxc,EAAKxE,GAAG,EACjBgL,EAAIoX,GAAgB0yB,EAAIC,EAAIr8B,EAAIC,EAAIoI,EAAIC,EAAI,EAAE,EAC9C8zB,EAAK/zB,EACLg0B,EAAK/zB,EACL,KACpB,CACgB,KAAKoyB,GAAI,EACL,IAAIkB,EAAK9vC,EAAKxE,GAAG,EACbu0C,EAAK/vC,EAAKxE,GAAG,EACbyyC,EAAKjuC,EAAKxE,GAAG,EACb0yC,EAAKluC,EAAKxE,GAAG,EACb2yC,EAAanuC,EAAKxE,GAAG,EACrBgQ,EAAQxL,EAAKxE,GAAG,EAChB4yC,EAAW5iC,EAAQ2iC,EACvB3yC,GAAK,EACDg1C,IACAn0B,EAAK+wB,GAAQe,CAAU,EAAIF,EAAK6B,EAChCxzB,EAAK6wB,GAAQgB,CAAU,EAAID,EAAK6B,GAEpCvpC,EAAI6I,GAAQ4+B,EAAIC,CAAE,EAAI9+B,GAAQ2E,GAAK,KAAK,IAAIvI,CAAK,CAAC,EAClD8kC,EAAKlD,GAAQgB,CAAQ,EAAIH,EAAK6B,EAC9BS,EAAKpD,GAAQiB,CAAQ,EAAIF,EAAK6B,EAC9B,MACJ,KAAKnB,GAAI,EAAG,CACRvyB,EAAKi0B,EAAKtwC,EAAKxE,GAAG,EAClB8gB,EAAKi0B,EAAKvwC,EAAKxE,GAAG,EAClB,IAAIY,EAAQ4D,EAAKxE,GAAG,EAChBqU,EAAS7P,EAAKxE,GAAG,EACrBgL,EAAIpK,EAAQ,EAAIyT,EAAS,EACzB,KACpB,CACgB,KAAK++B,GAAI,EAAG,CACR,IAAIppC,EAAK6W,EAAKi0B,EACV7qC,EAAK6W,EAAKi0B,EACd/pC,EAAI,KAAK,KAAKhB,EAAKA,EAAKC,EAAKA,CAAE,EAC/B6qC,EAAKj0B,EACLk0B,EAAKj0B,EACL,KACpB,CACA,CACgB9V,GAAK,IACLmqC,EAAWE,GAAU,EAAIrqC,EACzBoqC,GAAgBpqC,EAEhC,CACQ,YAAK,SAAWoqC,EACTA,CACV,EACDlB,EAAU,UAAU,YAAc,SAAU/oC,EAAKkY,EAAS,CACtD,IAAIna,EAAI,KAAK,KACT+rC,EAAK,KAAK,IACVC,EAAK,KAAK,IACVxyC,EAAM,KAAK,KACXme,EACAC,EACAg0B,EACAC,EACAzsC,EACAC,EACA+sC,EAAWjyB,EAAU,EACrB8xB,EACAC,EACAG,EAAc,EACdF,EAAW,EACXG,EACAC,EAAgB,EAChBC,EACAC,EACJ,GAAI,EAAAL,IACK,KAAK,aACN,KAAK,iBAAkB,EAE3BH,EAAa,KAAK,YAClBC,EAAe,KAAK,SACpBI,EAAkBnyB,EAAU+xB,EACxB,CAACI,IAIT57B,EAAI,QAAS5Z,EAAI,EAAGA,EAAI0C,GAAM,CAC1B,IAAIkyC,EAAM1rC,EAAElJ,GAAG,EACXg1C,EAAUh1C,IAAM,EAWpB,OAVIg1C,IACAF,EAAK5rC,EAAElJ,CAAC,EACR+0C,EAAK7rC,EAAElJ,EAAI,CAAC,EACZ6gB,EAAKi0B,EACLh0B,EAAKi0B,GAELH,IAAQxB,GAAI,GAAKqC,EAAgB,IACjCtqC,EAAI,OAAOuqC,EAAYC,CAAU,EACjCF,EAAgB,GAEZb,EAAG,CACP,KAAKxB,GAAI,EACLvyB,EAAKi0B,EAAK5rC,EAAElJ,GAAG,EACf8gB,EAAKi0B,EAAK7rC,EAAElJ,GAAG,EACfmL,EAAI,OAAO2pC,EAAIC,CAAE,EACjB,MACJ,KAAK3B,GAAI,EAAG,CACR9qC,EAAIY,EAAElJ,GAAG,EACTuI,EAAIW,EAAElJ,GAAG,EACT,IAAIgK,EAAKypC,GAAQnrC,EAAIwsC,CAAE,EACnB7qC,EAAKwpC,GAAQlrC,EAAIwsC,CAAE,EACvB,GAAI/qC,EAAKirC,GAAMhrC,EAAKirC,EAAI,CACpB,GAAII,EAAU,CACV,IAAItqC,EAAImqC,EAAWE,GAAU,EAC7B,GAAIE,EAAcvqC,EAAIwqC,EAAiB,CACnC,IAAI9hC,GAAK8hC,EAAkBD,GAAevqC,EAC1CG,EAAI,OAAO2pC,GAAM,EAAIphC,GAAKpL,EAAIoL,EAAGqhC,GAAM,EAAIrhC,GAAKnL,EAAImL,CAAC,EACrD,MAAMkG,CACtC,CAC4B27B,GAAevqC,CAC3C,CACwBG,EAAI,OAAO7C,EAAGC,CAAC,EACfusC,EAAKxsC,EACLysC,EAAKxsC,EACLktC,EAAgB,CACxC,KACyB,CACD,IAAIhgC,EAAKzL,EAAKA,EAAKC,EAAKA,EACpBwL,EAAKggC,IACLC,EAAaptC,EACbqtC,EAAaptC,EACbktC,EAAgBhgC,EAE5C,CACoB,KACpB,CACgB,KAAK29B,GAAI,EAAG,CACR,IAAI16B,EAAKxP,EAAElJ,GAAG,EACV2Y,EAAKzP,EAAElJ,GAAG,EACV+gB,EAAK7X,EAAElJ,GAAG,EACVghB,EAAK9X,EAAElJ,GAAG,EACVihB,EAAK/X,EAAElJ,GAAG,EACVkhB,EAAKhY,EAAElJ,GAAG,EACd,GAAIs1C,EAAU,CACV,IAAItqC,EAAImqC,EAAWE,GAAU,EAC7B,GAAIE,EAAcvqC,EAAIwqC,EAAiB,CACnC,IAAI9hC,GAAK8hC,EAAkBD,GAAevqC,EAC1CqV,GAAey0B,EAAIp8B,EAAIqI,EAAIE,EAAIvN,EAAG2/B,EAAO,EACzChzB,GAAe00B,EAAIp8B,EAAIqI,EAAIE,EAAIxN,EAAG4/B,EAAO,EACzCnoC,EAAI,cAAckoC,GAAQ,CAAC,EAAGC,GAAQ,CAAC,EAAGD,GAAQ,CAAC,EAAGC,GAAQ,CAAC,EAAGD,GAAQ,CAAC,EAAGC,GAAQ,CAAC,CAAC,EACxF,MAAM15B,CAClC,CACwB27B,GAAevqC,CACvC,CACoBG,EAAI,cAAcuN,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,CAAE,EACxC4zB,EAAK7zB,EACL8zB,EAAK7zB,EACL,KACpB,CACgB,KAAKkyB,GAAI,EAAG,CACR,IAAI16B,EAAKxP,EAAElJ,GAAG,EACV2Y,EAAKzP,EAAElJ,GAAG,EACV+gB,EAAK7X,EAAElJ,GAAG,EACVghB,EAAK9X,EAAElJ,GAAG,EACd,GAAIs1C,EAAU,CACV,IAAItqC,EAAImqC,EAAWE,GAAU,EAC7B,GAAIE,EAAcvqC,EAAIwqC,EAAiB,CACnC,IAAI9hC,GAAK8hC,EAAkBD,GAAevqC,EAC1CkX,GAAmB4yB,EAAIp8B,EAAIqI,EAAIrN,EAAG2/B,EAAO,EACzCnxB,GAAmB6yB,EAAIp8B,EAAIqI,EAAItN,EAAG4/B,EAAO,EACzCnoC,EAAI,iBAAiBkoC,GAAQ,CAAC,EAAGC,GAAQ,CAAC,EAAGD,GAAQ,CAAC,EAAGC,GAAQ,CAAC,CAAC,EACnE,MAAM15B,CAClC,CACwB27B,GAAevqC,CACvC,CACoBG,EAAI,iBAAiBuN,EAAIC,EAAIoI,EAAIC,CAAE,EACnC8zB,EAAK/zB,EACLg0B,EAAK/zB,EACL,KACpB,CACgB,KAAKoyB,GAAI,EACL,IAAIkB,EAAKprC,EAAElJ,GAAG,EACVu0C,GAAKrrC,EAAElJ,GAAG,EACVyyC,GAAKvpC,EAAElJ,GAAG,EACV0yC,GAAKxpC,EAAElJ,GAAG,EACV2yC,GAAazpC,EAAElJ,GAAG,EAClBgQ,GAAQ9G,EAAElJ,GAAG,EACb41C,GAAM1sC,EAAElJ,GAAG,EACX6yC,GAAgB,CAAC3pC,EAAElJ,GAAG,EACtBwY,GAAKi6B,GAAKC,GAAMD,GAAKC,GACrBmD,GAAYpC,GAAQhB,GAAKC,EAAE,EAAI,KAC/BE,GAAWD,GAAa3iC,GACxB8lC,EAAa,GACjB,GAAIR,EAAU,CACV,IAAItqC,EAAImqC,EAAWE,GAAU,EACzBE,EAAcvqC,EAAIwqC,IAClB5C,GAAWD,GAAa3iC,IAASwlC,EAAkBD,GAAevqC,EAClE8qC,EAAa,IAEjBP,GAAevqC,CACvC,CAOoB,GANI6qC,IAAa1qC,EAAI,QACjBA,EAAI,QAAQmpC,EAAIC,GAAI9B,GAAIC,GAAIkD,GAAKjD,GAAYC,GAAUC,EAAa,EAGpE1nC,EAAI,IAAImpC,EAAIC,GAAI/7B,GAAGm6B,GAAYC,GAAUC,EAAa,EAEtDiD,EACA,MAAMl8B,EAENo7B,IACAn0B,EAAK+wB,GAAQe,EAAU,EAAIF,GAAK6B,EAChCxzB,EAAK6wB,GAAQgB,EAAU,EAAID,GAAK6B,IAEpCO,EAAKlD,GAAQgB,EAAQ,EAAIH,GAAK6B,EAC9BS,EAAKpD,GAAQiB,EAAQ,EAAIF,GAAK6B,GAC9B,MACJ,KAAKnB,GAAI,EACLvyB,EAAKi0B,EAAK5rC,EAAElJ,CAAC,EACb8gB,EAAKi0B,EAAK7rC,EAAElJ,EAAI,CAAC,EACjBsI,EAAIY,EAAElJ,GAAG,EACTuI,EAAIW,EAAElJ,GAAG,EACT,IAAIY,GAAQsI,EAAElJ,GAAG,EACbqU,GAASnL,EAAElJ,GAAG,EAClB,GAAIs1C,EAAU,CACV,IAAItqC,EAAImqC,EAAWE,GAAU,EAC7B,GAAIE,EAAcvqC,EAAIwqC,EAAiB,CACnC,IAAI3yB,GAAM2yB,EAAkBD,EAC5BpqC,EAAI,OAAO7C,EAAGC,CAAC,EACf4C,EAAI,OAAO7C,EAAIsL,GAAQiP,GAAKjiB,EAAK,EAAG2H,CAAC,EACrCsa,IAAOjiB,GACHiiB,GAAM,GACN1X,EAAI,OAAO7C,EAAI1H,GAAO2H,EAAIqL,GAAQiP,GAAKxO,EAAM,CAAC,EAElDwO,IAAOxO,GACHwO,GAAM,GACN1X,EAAI,OAAO7C,EAAIuL,GAAQjT,GAAQiiB,GAAK,CAAC,EAAGta,EAAI8L,EAAM,EAEtDwO,IAAOjiB,GACHiiB,GAAM,GACN1X,EAAI,OAAO7C,EAAGC,EAAIsL,GAAQQ,GAASwO,GAAK,CAAC,CAAC,EAE9C,MAAMjJ,CAClC,CACwB27B,GAAevqC,CACvC,CACoBG,EAAI,KAAK7C,EAAGC,EAAG3H,GAAOyT,EAAM,EAC5B,MACJ,KAAK++B,GAAI,EACL,GAAIkC,EAAU,CACV,IAAItqC,EAAImqC,EAAWE,GAAU,EAC7B,GAAIE,EAAcvqC,EAAIwqC,EAAiB,CACnC,IAAI9hC,GAAK8hC,EAAkBD,GAAevqC,EAC1CG,EAAI,OAAO2pC,GAAM,EAAIphC,GAAKmN,EAAKnN,EAAGqhC,GAAM,EAAIrhC,GAAKoN,EAAKpN,CAAC,EACvD,MAAMkG,CAClC,CACwB27B,GAAevqC,CACvC,CACoBG,EAAI,UAAW,EACf2pC,EAAKj0B,EACLk0B,EAAKj0B,CACzB,CACA,CACK,EACDozB,EAAU,UAAU,MAAQ,UAAY,CACpC,IAAI6B,EAAW,IAAI7B,EACf1vC,EAAO,KAAK,KAChB,OAAAuxC,EAAS,KAAOvxC,EAAK,MAAQA,EAAK,MAAK,EACjC,MAAM,UAAU,MAAM,KAAKA,CAAI,EACrCuxC,EAAS,KAAO,KAAK,KACdA,CACV,EACD7B,EAAU,IAAMd,GAChBc,EAAU,iBAAoB,UAAY,CACtC,IAAIvsC,EAAQusC,EAAU,UACtBvsC,EAAM,UAAY,GAClBA,EAAM,IAAM,EACZA,EAAM,IAAM,EACZA,EAAM,eAAiB,EACvBA,EAAM,SAAW,CACzB,EAAQ,EACGusC,CACX,ICvrBO,SAAS8B,GAAcn1B,EAAIC,EAAIpI,EAAIC,EAAIyyB,EAAW9iC,EAAGC,EAAG,CAC3D,GAAI6iC,IAAc,EACd,MAAO,GAEX,IAAI6K,EAAK7K,EACLvG,EAAK,EACLqR,EAAKr1B,EACT,GAAKtY,EAAIuY,EAAKm1B,GAAM1tC,EAAIoQ,EAAKs9B,GACrB1tC,EAAIuY,EAAKm1B,GAAM1tC,EAAIoQ,EAAKs9B,GACxB3tC,EAAIuY,EAAKo1B,GAAM3tC,EAAIoQ,EAAKu9B,GACxB3tC,EAAIuY,EAAKo1B,GAAM3tC,EAAIoQ,EAAKu9B,EAC5B,MAAO,GAEX,GAAIp1B,IAAOnI,EACPmsB,GAAM/jB,EAAKnI,IAAOkI,EAAKnI,GACvBw9B,GAAMr1B,EAAKlI,EAAKD,EAAKoI,IAAOD,EAAKnI,OAGjC,QAAO,KAAK,IAAIpQ,EAAIuY,CAAE,GAAKo1B,EAAK,EAEpC,IAAIt7B,EAAMkqB,EAAKv8B,EAAIC,EAAI2tC,EACnBC,EAAKx7B,EAAMA,GAAOkqB,EAAKA,EAAK,GAChC,OAAOsR,GAAMF,EAAK,EAAIA,EAAK,CAC/B,CCtBO,SAASD,GAAcn1B,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAIkqB,EAAW9iC,EAAGC,EAAG,CAC3E,GAAI6iC,IAAc,EACd,MAAO,GAEX,IAAI6K,EAAK7K,EACT,GAAK7iC,EAAIuY,EAAKm1B,GAAM1tC,EAAIoQ,EAAKs9B,GAAM1tC,EAAIyY,EAAKi1B,GAAM1tC,EAAI2Y,EAAK+0B,GACnD1tC,EAAIuY,EAAKm1B,GAAM1tC,EAAIoQ,EAAKs9B,GAAM1tC,EAAIyY,EAAKi1B,GAAM1tC,EAAI2Y,EAAK+0B,GACtD3tC,EAAIuY,EAAKo1B,GAAM3tC,EAAIoQ,EAAKu9B,GAAM3tC,EAAIyY,EAAKk1B,GAAM3tC,EAAI2Y,EAAKg1B,GACtD3tC,EAAIuY,EAAKo1B,GAAM3tC,EAAIoQ,EAAKu9B,GAAM3tC,EAAIyY,EAAKk1B,GAAM3tC,EAAI2Y,EAAKg1B,EAC1D,MAAO,GAEX,IAAI/sC,EAAIktC,GAAwBv1B,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAI5Y,EAAGC,CAAO,EAC1E,OAAOW,GAAK+sC,EAAK,CACrB,CCbO,SAASD,GAAcn1B,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIoqB,EAAW9iC,EAAGC,EAAG,CACnE,GAAI6iC,IAAc,EACd,MAAO,GAEX,IAAI6K,EAAK7K,EACT,GAAK7iC,EAAIuY,EAAKm1B,GAAM1tC,EAAIoQ,EAAKs9B,GAAM1tC,EAAIyY,EAAKi1B,GACpC1tC,EAAIuY,EAAKm1B,GAAM1tC,EAAIoQ,EAAKs9B,GAAM1tC,EAAIyY,EAAKi1B,GACvC3tC,EAAIuY,EAAKo1B,GAAM3tC,EAAIoQ,EAAKu9B,GAAM3tC,EAAIyY,EAAKk1B,GACvC3tC,EAAIuY,EAAKo1B,GAAM3tC,EAAIoQ,EAAKu9B,GAAM3tC,EAAIyY,EAAKk1B,EAC3C,MAAO,GAEX,IAAI/sC,EAAIiZ,GAAsBtB,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAI1Y,EAAGC,CAAO,EAChE,OAAOW,GAAK+sC,EAAK,CACrB,CCdA,IAAI19B,GAAM,KAAK,GAAK,EACb,SAAS89B,GAAgBlD,EAAO,CACnC,OAAAA,GAAS56B,GACL46B,EAAQ,IACRA,GAAS56B,IAEN46B,CACX,CCNA,IAAI56B,GAAM,KAAK,GAAK,EACb,SAASy9B,GAAc1B,EAAIC,EAAI/7B,EAAGm6B,EAAYC,EAAUC,EAAezH,EAAW9iC,EAAGC,EAAG,CAC3F,GAAI6iC,IAAc,EACd,MAAO,GAEX,IAAI6K,EAAK7K,EACT9iC,GAAKgsC,EACL/rC,GAAKgsC,EACL,IAAIrrC,EAAI,KAAK,KAAKZ,EAAIA,EAAIC,EAAIA,CAAC,EAC/B,GAAKW,EAAI+sC,EAAKz9B,GAAOtP,EAAI+sC,EAAKz9B,EAC1B,MAAO,GAEX,GAAI,KAAK,IAAIm6B,EAAaC,CAAQ,EAAIr6B,GAAM,KACxC,MAAO,GAEX,GAAIs6B,EAAe,CACf,IAAIl4B,EAAMg4B,EACVA,EAAa0D,GAAgBzD,CAAQ,EACrCA,EAAWyD,GAAgB17B,CAAG,CACtC,MAEQg4B,EAAa0D,GAAgB1D,CAAU,EACvCC,EAAWyD,GAAgBzD,CAAQ,EAEnCD,EAAaC,IACbA,GAAYr6B,IAEhB,IAAI46B,EAAQ,KAAK,MAAM5qC,EAAGD,CAAC,EAC3B,OAAI6qC,EAAQ,IACRA,GAAS56B,IAEL46B,GAASR,GAAcQ,GAASP,GAChCO,EAAQ56B,IAAOo6B,GAAcQ,EAAQ56B,IAAOq6B,CACxD,CClCe,SAAS0D,GAAYz1B,EAAIC,EAAIpI,EAAIC,EAAIrQ,EAAGC,EAAG,CAItD,GAHKA,EAAIuY,GAAMvY,EAAIoQ,GAAQpQ,EAAIuY,GAAMvY,EAAIoQ,GAGrCA,IAAOmI,EACP,MAAO,GAEX,IAAIpN,GAAKnL,EAAIuY,IAAOnI,EAAKmI,GACrBy1B,EAAM59B,EAAKmI,EAAK,EAAI,IACpBpN,IAAM,GAAKA,IAAM,KACjB6iC,EAAM59B,EAAKmI,EAAK,GAAM,KAE1B,IAAI01B,EAAK9iC,GAAKgF,EAAKmI,GAAMA,EACzB,OAAO21B,IAAOluC,EAAI,IAAWkuC,EAAKluC,EAAIiuC,EAAM,CAChD,CCPA,IAAInD,GAAMc,GAAU,IAChB37B,GAAM,KAAK,GAAK,EAChBiG,GAAU,KACd,SAASi4B,GAAcnvC,EAAGC,EAAG,CACzB,OAAO,KAAK,IAAID,EAAIC,CAAC,EAAIiX,EAC7B,CACA,IAAIlB,GAAQ,CAAC,GAAI,GAAI,EAAE,EACnB8C,GAAU,CAAC,GAAI,EAAE,EACrB,SAASs2B,IAAc,CACnB,IAAI/7B,EAAMyF,GAAQ,CAAC,EACnBA,GAAQ,CAAC,EAAIA,GAAQ,CAAC,EACtBA,GAAQ,CAAC,EAAIzF,CACjB,CACA,SAASg8B,GAAa91B,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAI5Y,EAAGC,EAAG,CACxD,GAAKA,EAAIuY,GAAMvY,EAAIoQ,GAAMpQ,EAAIyY,GAAMzY,EAAI2Y,GAC/B3Y,EAAIuY,GAAMvY,EAAIoQ,GAAMpQ,EAAIyY,GAAMzY,EAAI2Y,EACtC,MAAO,GAEX,IAAI01B,EAASC,GAAkB/1B,EAAInI,EAAIqI,EAAIE,EAAI3Y,EAAG+U,EAAK,EACvD,GAAIs5B,IAAW,EACX,MAAO,GAOP,QAJItrB,EAAI,EACJwrB,EAAW,GACXC,EAAM,OACNC,EAAM,OACDh3C,EAAI,EAAGA,EAAI42C,EAAQ52C,IAAK,CAC7B,IAAI0T,EAAI4J,GAAMtd,CAAC,EACXi3C,EAAQvjC,IAAM,GAAKA,IAAM,EAAK,GAAM,EACpC8iC,EAAKpE,GAAcvxB,EAAInI,EAAIqI,EAAIE,EAAIvN,CAAC,EACpC8iC,EAAKluC,IAGLwuC,EAAW,IACXA,EAAW3E,GAAmBrxB,EAAInI,EAAIqI,EAAIE,EAAId,EAAO,EACjDA,GAAQ,CAAC,EAAIA,GAAQ,CAAC,GAAK02B,EAAW,GACtCJ,GAAa,EAEjBK,EAAM3E,GAActxB,EAAInI,EAAIqI,EAAIE,EAAId,GAAQ,CAAC,CAAC,EAC1C02B,EAAW,IACXE,EAAM5E,GAActxB,EAAInI,EAAIqI,EAAIE,EAAId,GAAQ,CAAC,CAAC,IAGlD02B,IAAa,EACTpjC,EAAI0M,GAAQ,CAAC,EACbkL,GAAKyrB,EAAMj2B,EAAKm2B,EAAO,CAACA,EAEnBvjC,EAAI0M,GAAQ,CAAC,EAClBkL,GAAK0rB,EAAMD,EAAME,EAAO,CAACA,EAGzB3rB,GAAKpK,EAAK81B,EAAMC,EAAO,CAACA,EAIxBvjC,EAAI0M,GAAQ,CAAC,EACbkL,GAAKyrB,EAAMj2B,EAAKm2B,EAAO,CAACA,EAGxB3rB,GAAKpK,EAAK61B,EAAME,EAAO,CAACA,EAG5C,CACQ,OAAO3rB,CAEf,CACA,SAAS4rB,GAAiBr2B,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAI1Y,EAAGC,EAAG,CACpD,GAAKA,EAAIuY,GAAMvY,EAAIoQ,GAAMpQ,EAAIyY,GACrBzY,EAAIuY,GAAMvY,EAAIoQ,GAAMpQ,EAAIyY,EAC5B,MAAO,GAEX,IAAI41B,EAASO,GAAsBr2B,EAAInI,EAAIqI,EAAIzY,EAAG+U,EAAK,EACvD,GAAIs5B,IAAW,EACX,MAAO,GAGP,IAAIljC,EAAI4+B,GAAwBxxB,EAAInI,EAAIqI,CAAE,EAC1C,GAAItN,GAAK,GAAKA,GAAK,EAAG,CAGlB,QAFI4X,EAAI,EACJ8rB,EAAK7E,GAAkBzxB,EAAInI,EAAIqI,EAAItN,CAAC,EAC/B1T,EAAI,EAAGA,EAAI42C,EAAQ52C,IAAK,CAC7B,IAAIi3C,EAAQ35B,GAAMtd,CAAC,IAAM,GAAKsd,GAAMtd,CAAC,IAAM,EAAK,GAAM,EAClDw2C,EAAKjE,GAAkB1xB,EAAInI,EAAIqI,EAAIzD,GAAMtd,CAAC,CAAC,EAC3Cw2C,EAAKluC,IAGLgV,GAAMtd,CAAC,EAAI0T,EACX4X,GAAK8rB,EAAKt2B,EAAKm2B,EAAO,CAACA,EAGvB3rB,GAAKtK,EAAKo2B,EAAKH,EAAO,CAACA,EAE3C,CACY,OAAO3rB,CACnB,KACa,CACD,IAAI2rB,EAAQ35B,GAAM,CAAC,IAAM,GAAKA,GAAM,CAAC,IAAM,EAAK,GAAM,EAClDk5B,EAAKjE,GAAkB1xB,EAAInI,EAAIqI,EAAIzD,GAAM,CAAC,CAAC,EAC/C,OAAIk5B,EAAKluC,EACE,EAEJ0Y,EAAKF,EAAKm2B,EAAO,CAACA,CACrC,CAEA,CACA,SAASI,GAAW/C,EAAIC,EAAI/7B,EAAGm6B,EAAYC,EAAUC,EAAevqC,EAAGC,EAAG,CAEtE,GADAA,GAAKgsC,EACDhsC,EAAIiQ,GAAKjQ,EAAI,CAACiQ,EACd,MAAO,GAEX,IAAImC,EAAM,KAAK,KAAKnC,EAAIA,EAAIjQ,EAAIA,CAAC,EACjC+U,GAAM,CAAC,EAAI,CAAC3C,EACZ2C,GAAM,CAAC,EAAI3C,EACX,IAAI28B,EAAS,KAAK,IAAI3E,EAAaC,CAAQ,EAC3C,GAAI0E,EAAS,KACT,MAAO,GAEX,GAAIA,GAAU/+B,GAAM,KAAM,CACtBo6B,EAAa,EACbC,EAAWr6B,GACX,IAAIg+B,EAAM1D,EAAgB,EAAI,GAC9B,OAAIvqC,GAAKgV,GAAM,CAAC,EAAIg3B,GAAMhsC,GAAKgV,GAAM,CAAC,EAAIg3B,EAC/BiC,EAGA,CAEnB,CACI,GAAI5D,EAAaC,EAAU,CACvB,IAAI2E,EAAQ5E,EACZA,EAAaC,EACbA,EAAW2E,CACnB,CACQ5E,EAAa,IACbA,GAAcp6B,GACdq6B,GAAYr6B,IAGhB,QADI+S,EAAI,EACCtrB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIw2C,EAAKl5B,GAAMtd,CAAC,EAChB,GAAIw2C,EAAKlC,EAAKhsC,EAAG,CACb,IAAI6qC,EAAQ,KAAK,MAAM5qC,EAAGiuC,CAAE,EACxBD,EAAM1D,EAAgB,EAAI,GAC1BM,EAAQ,IACRA,EAAQ56B,GAAM46B,IAEbA,GAASR,GAAcQ,GAASP,GAC7BO,EAAQ56B,IAAOo6B,GAAcQ,EAAQ56B,IAAOq6B,KAC5CO,EAAQ,KAAK,GAAK,GAAKA,EAAQ,KAAK,GAAK,MACzCoD,EAAM,CAACA,GAEXjrB,GAAKirB,EAErB,CACA,CACI,OAAOjrB,CACX,CACA,SAASksB,GAAY/C,EAAMrJ,EAAWqM,EAAUnvC,EAAGC,EAAG,CAUlD,QATI/D,EAAOiwC,EAAK,KACZ/xC,EAAM+xC,EAAK,IAAK,EAChBnpB,EAAI,EACJwpB,EAAK,EACLC,EAAK,EACLl0B,EAAK,EACLC,EAAK,EACLpI,EACAC,EACK3Y,EAAI,EAAGA,EAAI0C,GAAM,CACtB,IAAIkyC,EAAMpwC,EAAKxE,GAAG,EACdg1C,EAAUh1C,IAAM,EAYpB,OAXI40C,IAAQxB,GAAI,GAAKpzC,EAAI,IAChBy3C,IACDnsB,GAAKgrB,GAAYxB,EAAIC,EAAIl0B,EAAIC,EAAIxY,EAAGC,CAAC,IAGzCysC,IACAF,EAAKtwC,EAAKxE,CAAC,EACX+0C,EAAKvwC,EAAKxE,EAAI,CAAC,EACf6gB,EAAKi0B,EACLh0B,EAAKi0B,GAEDH,EAAG,CACP,KAAKxB,GAAI,EACLvyB,EAAKrc,EAAKxE,GAAG,EACb8gB,EAAKtc,EAAKxE,GAAG,EACb80C,EAAKj0B,EACLk0B,EAAKj0B,EACL,MACJ,KAAKsyB,GAAI,EACL,GAAIqE,GACA,GAAIC,GAAmB5C,EAAIC,EAAIvwC,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGorC,EAAW9iC,EAAGC,CAAC,EAChE,MAAO,QAIX+iB,GAAKgrB,GAAYxB,EAAIC,EAAIvwC,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGsI,EAAGC,CAAC,GAAK,EAE5DusC,EAAKtwC,EAAKxE,GAAG,EACb+0C,EAAKvwC,EAAKxE,GAAG,EACb,MACJ,KAAKozC,GAAI,EACL,GAAIqE,GACA,GAAIE,GAAoB7C,EAAIC,EAAIvwC,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGorC,EAAW9iC,EAAGC,CAAC,EAC7G,MAAO,QAIX+iB,GAAKqrB,GAAa7B,EAAIC,EAAIvwC,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGsI,EAAGC,CAAC,GAAK,EAEzGusC,EAAKtwC,EAAKxE,GAAG,EACb+0C,EAAKvwC,EAAKxE,GAAG,EACb,MACJ,KAAKozC,GAAI,EACL,GAAIqE,GACA,GAAIG,GAAwB9C,EAAIC,EAAIvwC,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGorC,EAAW9iC,EAAGC,CAAC,EAC3F,MAAO,QAIX+iB,GAAK4rB,GAAiBpC,EAAIC,EAAIvwC,EAAKxE,GAAG,EAAGwE,EAAKxE,GAAG,EAAGwE,EAAKxE,CAAC,EAAGwE,EAAKxE,EAAI,CAAC,EAAGsI,EAAGC,CAAC,GAAK,EAEvFusC,EAAKtwC,EAAKxE,GAAG,EACb+0C,EAAKvwC,EAAKxE,GAAG,EACb,MACJ,KAAKozC,GAAI,EACL,IAAIkB,EAAK9vC,EAAKxE,GAAG,EACbu0C,EAAK/vC,EAAKxE,GAAG,EACbyyC,EAAKjuC,EAAKxE,GAAG,EACb0yC,EAAKluC,EAAKxE,GAAG,EACbyY,EAAQjU,EAAKxE,GAAG,EAChBs3C,EAAS9yC,EAAKxE,GAAG,EACrBA,GAAK,EACL,IAAI6yC,EAAgB,CAAC,EAAE,EAAIruC,EAAKxE,GAAG,GACnC0Y,EAAK,KAAK,IAAID,CAAK,EAAIg6B,EAAK6B,EAC5B37B,EAAK,KAAK,IAAIF,CAAK,EAAIi6B,EAAK6B,EACvBS,GAIDn0B,EAAKnI,EACLoI,EAAKnI,GAJL2S,GAAKgrB,GAAYxB,EAAIC,EAAIr8B,EAAIC,EAAIrQ,EAAGC,CAAC,EAMzC,IAAIsvC,GAAMvvC,EAAIgsC,GAAM5B,EAAKD,EAAK6B,EAC9B,GAAImD,GACA,GAAIK,GAAkBxD,EAAIC,EAAI7B,EAAIj6B,EAAOA,EAAQ6+B,EAAQzE,EAAezH,EAAWyM,EAAItvC,CAAC,EACpF,MAAO,QAIX+iB,GAAK+rB,GAAW/C,EAAIC,EAAI7B,EAAIj6B,EAAOA,EAAQ6+B,EAAQzE,EAAegF,EAAItvC,CAAC,EAE3EusC,EAAK,KAAK,IAAIr8B,EAAQ6+B,CAAM,EAAI7E,EAAK6B,EACrCS,EAAK,KAAK,IAAIt8B,EAAQ6+B,CAAM,EAAI5E,EAAK6B,EACrC,MACJ,KAAKnB,GAAI,EACLvyB,EAAKi0B,EAAKtwC,EAAKxE,GAAG,EAClB8gB,EAAKi0B,EAAKvwC,EAAKxE,GAAG,EAClB,IAAIY,EAAQ4D,EAAKxE,GAAG,EAChBqU,EAAS7P,EAAKxE,GAAG,EAGrB,GAFA0Y,EAAKmI,EAAKjgB,EACV+X,EAAKmI,EAAKzM,EACNojC,GACA,GAAIC,GAAmB72B,EAAIC,EAAIpI,EAAIoI,EAAIsqB,EAAW9iC,EAAGC,CAAC,GAC/CmvC,GAAmBh/B,EAAIoI,EAAIpI,EAAIC,EAAIyyB,EAAW9iC,EAAGC,CAAC,GAClDmvC,GAAmBh/B,EAAIC,EAAIkI,EAAIlI,EAAIyyB,EAAW9iC,EAAGC,CAAC,GAClDmvC,GAAmB72B,EAAIlI,EAAIkI,EAAIC,EAAIsqB,EAAW9iC,EAAGC,CAAC,EACrD,MAAO,QAIX+iB,GAAKgrB,GAAY59B,EAAIoI,EAAIpI,EAAIC,EAAIrQ,EAAGC,CAAC,EACrC+iB,GAAKgrB,GAAYz1B,EAAIlI,EAAIkI,EAAIC,EAAIxY,EAAGC,CAAC,EAEzC,MACJ,KAAK6qC,GAAI,EACL,GAAIqE,GACA,GAAIC,GAAmB5C,EAAIC,EAAIl0B,EAAIC,EAAIsqB,EAAW9iC,EAAGC,CAAC,EAClD,MAAO,QAIX+iB,GAAKgrB,GAAYxB,EAAIC,EAAIl0B,EAAIC,EAAIxY,EAAGC,CAAC,EAEzCusC,EAAKj0B,EACLk0B,EAAKj0B,EACL,KAChB,CACA,CACI,MAAI,CAAC22B,GAAY,CAAChB,GAAc1B,EAAIj0B,CAAE,IAClCwK,GAAKgrB,GAAYxB,EAAIC,EAAIl0B,EAAIC,EAAIxY,EAAGC,CAAC,GAAK,GAEvC+iB,IAAM,CACjB,CACO,SAASysB,GAAQC,EAAW1vC,EAAGC,EAAG,CACrC,OAAOivC,GAAYQ,EAAW,EAAG,GAAO1vC,EAAGC,CAAC,CAChD,CACO,SAASytC,GAAcgC,EAAW5M,EAAW9iC,EAAGC,EAAG,CACtD,OAAOivC,GAAYQ,EAAW5M,EAAW,GAAM9iC,EAAGC,CAAC,CACvD,CCzSO,IAAI0vC,GAAqB10C,EAAS,CACrC,KAAM,OACN,OAAQ,KACR,cAAe,EACf,YAAa,EACb,cAAe,EACf,eAAgB,EAChB,UAAW,EACX,QAAS,OACT,WAAY,GACZ,cAAe,GACf,YAAa,EACjB,EAAG0sC,EAAoB,EACZiI,GAA+B,CACtC,MAAO30C,EAAS,CACZ,KAAM,GACN,OAAQ,GACR,cAAe,GACf,YAAa,GACb,cAAe,GACf,eAAgB,GAChB,UAAW,GACX,WAAY,EACf,EAAE2sC,GAA+B,KAAK,CAC3C,EACIiI,GAAiBrlB,GAAoB,OAAO,CAAC,YAC7C,UAAW,IAAK,KAAM,SAAU,QACpC,CAAC,EACGslB,GAAQ,SAAU9hC,EAAQ,CAC1BC,EAAU6hC,EAAM9hC,CAAM,EACtB,SAAS8hC,EAAKp1B,EAAM,CAChB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAAo1B,EAAK,UAAU,OAAS,UAAY,CAChC,IAAI5hC,EAAQ,KACZF,EAAO,UAAU,OAAO,KAAK,IAAI,EACjC,IAAIhX,EAAQ,KAAK,MACjB,GAAIA,EAAM,MAAO,CACb,IAAIye,EAAU,KAAK,SAAW,KAAK,UAAY,IAAIq6B,EAC/Cr6B,EAAQ,YAAcq6B,EAAK,UAAU,YACrCr6B,EAAQ,UAAY,SAAU5S,EAAK,CAC/BqL,EAAM,UAAUrL,EAAKqL,EAAM,KAAK,CACnC,GAELuH,EAAQ,OAAS,GACjB,IAAIs6B,EAAet6B,EAAQ,MAC3B,QAASlb,KAAOvD,EACR+4C,EAAax1C,CAAG,IAAMvD,EAAMuD,CAAG,IAC/Bw1C,EAAax1C,CAAG,EAAIvD,EAAMuD,CAAG,GAGrCw1C,EAAa,KAAO/4C,EAAM,KAAOA,EAAM,MAAQ,KAC/C+4C,EAAa,MAAQ,KACrBA,EAAa,YAAc,KAC3B/4C,EAAM,cAAgB+4C,EAAa,OAAS,MAC5C,QAASr4C,EAAI,EAAGA,EAAIm4C,GAAe,OAAQ,EAAEn4C,EACzC+d,EAAQo6B,GAAen4C,CAAC,CAAC,EAAI,KAAKm4C,GAAen4C,CAAC,CAAC,EAEvD+d,EAAQ,SAAWnB,EAC/B,MACiB,KAAK,WACV,KAAK,SAAW,KAEvB,EACDw7B,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,KAAK,QACf,EACDA,EAAK,UAAU,MAAQ,SAAUpsB,EAAO,CACpC,IAAIvoB,EAAUC,GAAKsoB,CAAK,EACxB,KAAK,MAAQ,KAAK,gBAAiB,EACnC,IAAIssB,EAAe,KAAK,gBAAiB,EACrCA,GACA,KAAK,SAASA,CAAY,EAE9B,QAASt4C,EAAI,EAAGA,EAAIyD,EAAQ,OAAQzD,IAAK,CACrC,IAAI6C,EAAMY,EAAQzD,CAAC,EACf6D,EAAQmoB,EAAMnpB,CAAG,EACjBA,IAAQ,QACH,KAAK,MAINS,EAAO,KAAK,MAAOO,CAAK,EAHxB,KAAK,SAASA,CAAK,EAMlBhB,IAAQ,QACbS,EAAO,KAAK,MAAOO,CAAK,EAGxByS,EAAO,UAAU,OAAO,KAAK,KAAMzT,EAAKgB,CAAK,CAE7D,CACa,KAAK,OACN,KAAK,SAAS,EAAE,CAEvB,EACDu0C,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,IACV,EACDA,EAAK,UAAU,gBAAkB,UAAY,CACzC,MAAO,CAAE,CACZ,EACDA,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,KAAK,QAAS,CACxB,EACDA,EAAK,UAAU,kBAAoB,UAAY,CAC3C,IAAIG,EAAW,KAAK,MAAM,KAC1B,GAAIA,IAAa,QACb,GAAIlzC,EAASkzC,CAAQ,EAAG,CACpB,IAAIC,EAAU3xB,GAAI0xB,EAAU,CAAC,EAC7B,OAAIC,EAAU,GACH5nB,GAEF4nB,EAAU,GACR1nB,GAEJD,EACvB,SACqB0nB,EACL,OAAO1nB,GAGf,OAAOD,EACV,EACDwnB,EAAK,UAAU,oBAAsB,SAAUhjB,EAAU,CACrD,IAAImjB,EAAW,KAAK,MAAM,KAC1B,GAAIlzC,EAASkzC,CAAQ,EAAG,CACpB,IAAI1gB,EAAK,KAAK,KACV6D,EAAa,CAAC,EAAE7D,GAAMA,EAAG,WAAU,GACnC4gB,EAAc5xB,GAAIuO,EAAU,CAAC,EAAIzE,GACrC,GAAI+K,IAAe+c,EACf,OAAOF,CAEvB,CACK,EACDH,EAAK,UAAU,UAAY,SAAUjtC,EAAKutC,EAAUC,EAAS,CAAG,EAChEP,EAAK,UAAU,YAAc,UAAY,CACrC,KAAK,SAAW,EACnB,EACDA,EAAK,UAAU,oBAAsB,SAAUO,EAAS,CACpD,OAAC,KAAK,MAAQ,KAAK,gBAAiB,EACpC,KAAK,KAAK,UAAW,EACrB,KAAK,UAAU,KAAK,KAAM,KAAK,MAAOA,CAAO,EACtC,KAAK,IACf,EACDP,EAAK,UAAU,gBAAkB,UAAY,CACzC,KAAK,KAAO,IAAIlE,GAAU,EAAK,CAClC,EACDkE,EAAK,UAAU,UAAY,UAAY,CACnC,IAAI94C,EAAQ,KAAK,MACbs5C,EAASt5C,EAAM,OACnB,MAAO,EAAEs5C,GAAU,MAAQA,IAAW,QAAU,EAAEt5C,EAAM,UAAY,GACvE,EACD84C,EAAK,UAAU,QAAU,UAAY,CACjC,IAAI94C,EAAQ,KAAK,MACbu5C,EAAOv5C,EAAM,KACjB,OAAOu5C,GAAQ,MAAQA,IAAS,MACnC,EACDT,EAAK,UAAU,gBAAkB,UAAY,CACzC,IAAI5pC,EAAO,KAAK,MACZlP,EAAQ,KAAK,MACbw5C,EAAkB,CAACtqC,EACvB,GAAIsqC,EAAiB,CACjB,IAAIC,EAAc,GACb,KAAK,OACNA,EAAc,GACd,KAAK,gBAAiB,GAE1B,IAAItE,EAAO,KAAK,MACZsE,GAAgB,KAAK,QAAUj8B,MAC/B23B,EAAK,UAAW,EAChB,KAAK,UAAUA,EAAM,KAAK,MAAO,EAAK,EACtC,KAAK,YAAa,GAEtBjmC,EAAOimC,EAAK,gBAAiB,CACzC,CAEQ,GADA,KAAK,MAAQjmC,EACT,KAAK,UAAW,GAAI,KAAK,MAAQ,KAAK,KAAK,IAAK,EAAG,EAAG,CACtD,IAAIwqC,EAAa,KAAK,cAAgB,KAAK,YAAcxqC,EAAK,SAC9D,GAAI,KAAK,SAAWsqC,EAAiB,CACjCE,EAAW,KAAKxqC,CAAI,EACpB,IAAIyqC,EAAY35C,EAAM,cAAgB,KAAK,aAAc,EAAG,EACxDgsB,EAAIhsB,EAAM,UACd,GAAI,CAAC,KAAK,UAAW,CACjB,IAAI45C,EAAyB,KAAK,uBAClC5tB,EAAI,KAAK,IAAIA,EAAG4tB,GAAiC,CAA0B,CAC/F,CACoBD,EAAY,QACZD,EAAW,OAAS1tB,EAAI2tB,EACxBD,EAAW,QAAU1tB,EAAI2tB,EACzBD,EAAW,GAAK1tB,EAAI2tB,EAAY,EAChCD,EAAW,GAAK1tB,EAAI2tB,EAAY,EAEpD,CACY,OAAOD,CACnB,CACQ,OAAOxqC,CACV,EACD4pC,EAAK,UAAU,QAAU,SAAU9vC,EAAGC,EAAG,CACrC,IAAI4wC,EAAW,KAAK,sBAAsB7wC,EAAGC,CAAC,EAC1CiG,EAAO,KAAK,gBAAiB,EAC7BlP,EAAQ,KAAK,MAGjB,GAFAgJ,EAAI6wC,EAAS,CAAC,EACd5wC,EAAI4wC,EAAS,CAAC,EACV3qC,EAAK,QAAQlG,EAAGC,CAAC,EAAG,CACpB,IAAIyvC,EAAY,KAAK,KACrB,GAAI,KAAK,YAAa,CAClB,IAAI5M,EAAY9rC,EAAM,UAClB25C,EAAY35C,EAAM,cAAgB,KAAK,aAAc,EAAG,EAC5D,GAAI25C,EAAY,QACP,KAAK,YACN7N,EAAY,KAAK,IAAIA,EAAW,KAAK,sBAAsB,GAE3DgO,GAA0BpB,EAAW5M,EAAY6N,EAAW3wC,EAAGC,CAAC,GAChE,MAAO,EAG/B,CACY,GAAI,KAAK,UACL,OAAO8wC,GAAoBrB,EAAW1vC,EAAGC,CAAC,CAE1D,CACQ,MAAO,EACV,EACD6vC,EAAK,UAAU,WAAa,UAAY,CACpC,KAAK,SAAWt7B,GACZ,KAAK,QACL,KAAK,MAAQ,MAEb,KAAK,UACL,KAAK,SAAS,WAAY,EAE9B,KAAK,WAAY,CACpB,EACDs7B,EAAK,UAAU,MAAQ,UAAY,CAC/B,KAAK,WAAY,EACjB,KAAK,WAAY,CACpB,EACDA,EAAK,UAAU,aAAe,SAAUvsB,EAAM,CAC1C,OAAO,KAAK,QAAQ,QAASA,CAAI,CACpC,EACDusB,EAAK,UAAU,sBAAwB,SAAUlH,EAAW,CACpDA,IAAc,QACd,KAAK,WAAY,EAEZA,IAAc,QACnB,KAAK,WAAY,EAGjB,KAAK,WAAY,CAExB,EACDkH,EAAK,UAAU,OAAS,SAAUv1C,EAAKgB,EAAO,CACtChB,IAAQ,QACR,KAAK,SAASgB,CAAK,EAGnByS,EAAO,UAAU,OAAO,KAAK,KAAMzT,EAAKgB,CAAK,CAEpD,EACDu0C,EAAK,UAAU,SAAW,SAAU3iB,EAAU5xB,EAAO,CACjD,IAAIy1C,EAAQ,KAAK,MACjB,OAAKA,IACDA,EAAQ,KAAK,MAAQ,CAAE,GAEvB,OAAO7jB,GAAa,SACpB6jB,EAAM7jB,CAAQ,EAAI5xB,EAGlBP,EAAOg2C,EAAO7jB,CAAQ,EAE1B,KAAK,WAAY,EACV,IACV,EACD2iB,EAAK,UAAU,aAAe,UAAY,CACtC,MAAO,CAAC,EAAE,KAAK,QAAUt7B,GAC5B,EACDs7B,EAAK,UAAU,YAAc,SAAUh3C,EAAK,CACxC,OAAOsG,GAAauwC,GAAoB72C,CAAG,CAC9C,EACDg3C,EAAK,UAAU,mBAAqB,SAAU1iB,EAAS,CACnDpf,EAAO,UAAU,mBAAmB,KAAK,KAAMof,CAAO,EACtD,IAAIC,EAAc,KAAK,aACnBD,EAAQ,OAAS,CAACC,EAAY,QAC9BA,EAAY,MAAQryB,EAAO,CAAA,EAAI,KAAK,KAAK,EAEhD,EACD80C,EAAK,UAAU,eAAiB,SAAUniB,EAAWO,EAAOb,EAAaO,EAAmBqB,EAAYhB,EAAc,CAClHjgB,EAAO,UAAU,eAAe,KAAK,KAAM2f,EAAWO,EAAOb,EAAaO,EAAmBqB,EAAYhB,CAAY,EACrH,IAAIiB,EAAuB,EAAEhB,GAASN,GAClCqjB,EAmBJ,GAlBI/iB,GAASA,EAAM,MACXe,EACIrB,EACAqjB,EAAc/iB,EAAM,OAGpB+iB,EAAcj2C,EAAO,GAAIqyB,EAAY,KAAK,EAC1CryB,EAAOi2C,EAAa/iB,EAAM,KAAK,IAInC+iB,EAAcj2C,EAAO,GAAI4yB,EAAoB,KAAK,MAAQP,EAAY,KAAK,EAC3EryB,EAAOi2C,EAAa/iB,EAAM,KAAK,GAG9BgB,IACL+hB,EAAc5jB,EAAY,OAE1B4jB,EACA,GAAIhiB,EAAY,CACZ,KAAK,MAAQj0B,EAAO,CAAA,EAAI,KAAK,KAAK,EAGlC,QAFIk2C,EAA0B,CAAE,EAC5BC,EAAY/1C,GAAK61C,CAAW,EACvBv5C,EAAI,EAAGA,EAAIy5C,EAAU,OAAQz5C,IAAK,CACvC,IAAI6C,EAAM42C,EAAUz5C,CAAC,EACjB,OAAOu5C,EAAY12C,CAAG,GAAM,SAC5B,KAAK,MAAMA,CAAG,EAAI02C,EAAY12C,CAAG,EAGjC22C,EAAwB32C,CAAG,EAAI02C,EAAY12C,CAAG,CAEtE,CACgB,KAAK,iBAAiBozB,EAAW,CAC7B,MAAOujB,CACV,EAAEjjB,CAAY,CAC/B,MAEgB,KAAK,MAAQgjB,EACb,KAAK,WAAY,CAG5B,EACDnB,EAAK,UAAU,aAAe,SAAUriB,EAAQ,CAG5C,QAFIgB,EAAczgB,EAAO,UAAU,aAAa,KAAK,KAAMyf,CAAM,EAC7D2jB,EACK15C,EAAI,EAAGA,EAAI+1B,EAAO,OAAQ/1B,IAAK,CACpC,IAAIw2B,EAAQT,EAAO/1B,CAAC,EAChBw2B,EAAM,QACNkjB,EAAcA,GAAe,CAAE,EAC/B,KAAK,YAAYA,EAAaljB,EAAM,KAAK,EAEzD,CACQ,OAAIkjB,IACA3iB,EAAY,MAAQ2iB,GAEjB3iB,CACV,EACDqhB,EAAK,UAAU,uBAAyB,UAAY,CAChD,OAAOF,EACV,EACDE,EAAK,UAAU,WAAa,UAAY,CACpC,MAAO,EACV,EACDA,EAAK,OAAS,SAAUuB,EAAc,CAClC,IAAIC,EAAO,SAAUtjC,EAAQ,CACzBC,EAAUqjC,EAAKtjC,CAAM,EACrB,SAASsjC,EAAI52B,EAAM,CACf,IAAIxM,EAAQF,EAAO,KAAK,KAAM0M,CAAI,GAAK,KACvC,OAAA22B,EAAa,MAAQA,EAAa,KAAK,KAAKnjC,EAAOwM,CAAI,EAChDxM,CACvB,CACY,OAAAojC,EAAI,UAAU,gBAAkB,UAAY,CACxC,OAAOv3C,EAAMs3C,EAAa,KAAK,CAClC,EACDC,EAAI,UAAU,gBAAkB,UAAY,CACxC,OAAOv3C,EAAMs3C,EAAa,KAAK,CAClC,EACMC,CACV,EAACxB,CAAI,EACN,QAASv1C,KAAO82C,EACR,OAAOA,EAAa92C,CAAG,GAAM,aAC7B+2C,EAAI,UAAU/2C,CAAG,EAAI82C,EAAa92C,CAAG,GAG7C,OAAO+2C,CACV,EACDxB,EAAK,iBAAoB,UAAY,CACjC,IAAIyB,EAAYzB,EAAK,UACrByB,EAAU,KAAO,OACjBA,EAAU,uBAAyB,EACnCA,EAAU,uBAAyB,EACnCA,EAAU,iBAAmB,GAC7BA,EAAU,UAAY,GACtBA,EAAU,QAAUj9B,GAAaC,GAAoBC,EAC7D,EAAQ,EACGs7B,CACX,EAAEhI,EAAW,ECtYF0J,GAAsBv2C,EAAS,CACtC,YAAa,GACb,KAAM9D,GACN,EAAG,EACH,EAAG,EACH,UAAW,OACX,aAAc,MACd,WAAY,CAChB,EAAGw4C,EAAkB,EACjB8B,GAAS,SAAUzjC,EAAQ,CAC3BC,EAAUwjC,EAAOzjC,CAAM,EACvB,SAASyjC,GAAQ,CACb,OAAOzjC,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAAyjC,EAAM,UAAU,UAAY,UAAY,CACpC,IAAIz6C,EAAQ,KAAK,MACbs5C,EAASt5C,EAAM,OACnB,OAAOs5C,GAAU,MAAQA,IAAW,QAAUt5C,EAAM,UAAY,CACnE,EACDy6C,EAAM,UAAU,QAAU,UAAY,CAClC,IAAIz6C,EAAQ,KAAK,MACbu5C,EAAOv5C,EAAM,KACjB,OAAOu5C,GAAQ,MAAQA,IAAS,MACnC,EACDkB,EAAM,UAAU,YAAc,SAAU34C,EAAK,CACzC,OAAOsG,GAAaoyC,GAAqB14C,CAAG,CAC/C,EACD24C,EAAM,UAAU,gBAAkB,SAAUvrC,EAAM,CAC9C,KAAK,MAAQA,CAChB,EACDurC,EAAM,UAAU,gBAAkB,UAAY,CAC1C,IAAIz6C,EAAQ,KAAK,MACjB,GAAI,CAAC,KAAK,MAAO,CACb,IAAIiB,EAAOjB,EAAM,KACjBiB,GAAQ,KAAQA,GAAQ,GAAOA,EAAO,GACtC,IAAIiO,EAAOglB,GAAgBjzB,EAAMjB,EAAM,KAAMA,EAAM,UAAWA,EAAM,YAAY,EAGhF,GAFAkP,EAAK,GAAKlP,EAAM,GAAK,EACrBkP,EAAK,GAAKlP,EAAM,GAAK,EACjB,KAAK,YAAa,CAClB,IAAIgsB,EAAIhsB,EAAM,UACdkP,EAAK,GAAK8c,EAAI,EACd9c,EAAK,GAAK8c,EAAI,EACd9c,EAAK,OAAS8c,EACd9c,EAAK,QAAU8c,CAC/B,CACY,KAAK,MAAQ9c,CACzB,CACQ,OAAO,KAAK,KACf,EACDurC,EAAM,iBAAoB,UAAY,CAClC,IAAIC,EAAaD,EAAM,UACvBC,EAAW,mBAAqB,EACxC,EAAQ,EACGD,CACX,EAAE3J,EAAW,EACb2J,GAAM,UAAU,KAAO,QCzDhB,IAAIE,GAAsB12C,EAAS,CACtC,EAAG,EACH,EAAG,CACP,EAAG0sC,EAAoB,EACZiK,GAAgC,CACvC,MAAO32C,EAAS,CACZ,EAAG,GACH,EAAG,GACH,MAAO,GACP,OAAQ,GACR,GAAI,GACJ,GAAI,GACJ,OAAQ,GACR,QAAS,EACZ,EAAE2sC,GAA+B,KAAK,CAC3C,EACA,SAASiK,GAAY73C,EAAQ,CACzB,MAAO,CAAC,EAAEA,GACH,OAAOA,GAAW,UAClBA,EAAO,OAASA,EAAO,OAClC,CACA,IAAI83C,GAAW,SAAU9jC,EAAQ,CAC7BC,EAAU6jC,EAAS9jC,CAAM,EACzB,SAAS8jC,GAAU,CACf,OAAO9jC,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAA8jC,EAAQ,UAAU,YAAc,SAAUh5C,EAAK,CAC3C,OAAOsG,GAAauyC,GAAqB74C,CAAG,CAC/C,EACDg5C,EAAQ,UAAU,SAAW,SAAUC,EAAK,CACxC,IAAI/6C,EAAQ,KAAK,MACbY,EAAOZ,EAAM+6C,CAAG,EACpB,GAAIn6C,GAAQ,KACR,OAAOA,EAEX,IAAIo6C,EAAcH,GAAY76C,EAAM,KAAK,EACnCA,EAAM,MAAQ,KAAK,QACzB,GAAI,CAACg7C,EACD,MAAO,GAEX,IAAIC,EAAWF,IAAQ,QAAU,SAAW,QACxCG,EAAel7C,EAAMi7C,CAAQ,EACjC,OAAIC,GAAgB,KACTF,EAAYD,CAAG,EAGfC,EAAYD,CAAG,EAAIC,EAAYC,CAAQ,EAAIC,CAEzD,EACDJ,EAAQ,UAAU,SAAW,UAAY,CACrC,OAAO,KAAK,SAAS,OAAO,CAC/B,EACDA,EAAQ,UAAU,UAAY,UAAY,CACtC,OAAO,KAAK,SAAS,QAAQ,CAChC,EACDA,EAAQ,UAAU,uBAAyB,UAAY,CACnD,OAAOF,EACV,EACDE,EAAQ,UAAU,gBAAkB,UAAY,CAC5C,IAAI96C,EAAQ,KAAK,MACjB,OAAK,KAAK,QACN,KAAK,MAAQ,IAAI8U,GAAa9U,EAAM,GAAK,EAAGA,EAAM,GAAK,EAAG,KAAK,SAAU,EAAE,KAAK,UAAS,CAAE,GAExF,KAAK,KACf,EACM86C,CACX,EAAEhK,EAAW,EACbgK,GAAQ,UAAU,KAAO,QCvElB,SAASK,GAAUtvC,EAAKmuC,EAAO,CAClC,IAAIhxC,EAAIgxC,EAAM,EACV/wC,EAAI+wC,EAAM,EACV14C,EAAQ04C,EAAM,MACdjlC,EAASilC,EAAM,OACf9gC,EAAI8gC,EAAM,EACV5b,EACAgd,EACAC,EACAC,EACAh6C,EAAQ,IACR0H,EAAIA,EAAI1H,EACRA,EAAQ,CAACA,GAETyT,EAAS,IACT9L,EAAIA,EAAI8L,EACRA,EAAS,CAACA,GAEV,OAAOmE,GAAM,SACbklB,EAAKgd,EAAKC,EAAKC,EAAKpiC,EAEfA,aAAa,MACdA,EAAE,SAAW,EACbklB,EAAKgd,EAAKC,EAAKC,EAAKpiC,EAAE,CAAC,EAElBA,EAAE,SAAW,GAClBklB,EAAKid,EAAKniC,EAAE,CAAC,EACbkiC,EAAKE,EAAKpiC,EAAE,CAAC,GAERA,EAAE,SAAW,GAClBklB,EAAKllB,EAAE,CAAC,EACRkiC,EAAKE,EAAKpiC,EAAE,CAAC,EACbmiC,EAAKniC,EAAE,CAAC,IAGRklB,EAAKllB,EAAE,CAAC,EACRkiC,EAAKliC,EAAE,CAAC,EACRmiC,EAAKniC,EAAE,CAAC,EACRoiC,EAAKpiC,EAAE,CAAC,GAIZklB,EAAKgd,EAAKC,EAAKC,EAAK,EAExB,IAAIC,EACAnd,EAAKgd,EAAK95C,IACVi6C,EAAQnd,EAAKgd,EACbhd,GAAM98B,EAAQi6C,EACdH,GAAM95C,EAAQi6C,GAEdF,EAAKC,EAAKh6C,IACVi6C,EAAQF,EAAKC,EACbD,GAAM/5C,EAAQi6C,EACdD,GAAMh6C,EAAQi6C,GAEdH,EAAKC,EAAKtmC,IACVwmC,EAAQH,EAAKC,EACbD,GAAMrmC,EAASwmC,EACfF,GAAMtmC,EAASwmC,GAEfnd,EAAKkd,EAAKvmC,IACVwmC,EAAQnd,EAAKkd,EACbld,GAAMrpB,EAASwmC,EACfD,GAAMvmC,EAASwmC,GAEnB1vC,EAAI,OAAO7C,EAAIo1B,EAAIn1B,CAAC,EACpB4C,EAAI,OAAO7C,EAAI1H,EAAQ85C,EAAInyC,CAAC,EAC5BmyC,IAAO,GAAKvvC,EAAI,IAAI7C,EAAI1H,EAAQ85C,EAAInyC,EAAImyC,EAAIA,EAAI,CAAC,KAAK,GAAK,EAAG,CAAC,EAC/DvvC,EAAI,OAAO7C,EAAI1H,EAAO2H,EAAI8L,EAASsmC,CAAE,EACrCA,IAAO,GAAKxvC,EAAI,IAAI7C,EAAI1H,EAAQ+5C,EAAIpyC,EAAI8L,EAASsmC,EAAIA,EAAI,EAAG,KAAK,GAAK,CAAC,EACvExvC,EAAI,OAAO7C,EAAIsyC,EAAIryC,EAAI8L,CAAM,EAC7BumC,IAAO,GAAKzvC,EAAI,IAAI7C,EAAIsyC,EAAIryC,EAAI8L,EAASumC,EAAIA,EAAI,KAAK,GAAK,EAAG,KAAK,EAAE,EACrEzvC,EAAI,OAAO7C,EAAGC,EAAIm1B,CAAE,EACpBA,IAAO,GAAKvyB,EAAI,IAAI7C,EAAIo1B,EAAIn1B,EAAIm1B,EAAIA,EAAI,KAAK,GAAI,KAAK,GAAK,GAAG,CAClE,CC1EA,IAAIK,GAAQ,KAAK,MACV,SAAS+c,GAAqBC,EAAaC,EAAY17C,EAAO,CACjE,GAAK07C,EAGL,KAAItiC,EAAKsiC,EAAW,GAChBj6B,EAAKi6B,EAAW,GAChBriC,EAAKqiC,EAAW,GAChBh6B,EAAKg6B,EAAW,GACpBD,EAAY,GAAKriC,EACjBqiC,EAAY,GAAKh6B,EACjBg6B,EAAY,GAAKpiC,EACjBoiC,EAAY,GAAK/5B,EACjB,IAAIoqB,EAAY9rC,GAASA,EAAM,UAC/B,OAAK8rC,IAGDrN,GAAMrlB,EAAK,CAAC,IAAMqlB,GAAMhd,EAAK,CAAC,IAC9Bg6B,EAAY,GAAKA,EAAY,GAAKE,GAAiBviC,EAAI0yB,EAAW,EAAI,GAEtErN,GAAMplB,EAAK,CAAC,IAAMolB,GAAM/c,EAAK,CAAC,IAC9B+5B,EAAY,GAAKA,EAAY,GAAKE,GAAiBtiC,EAAIyyB,EAAW,EAAI,IAEnE2P,EACX,CACO,SAASG,GAAqBH,EAAaC,EAAY17C,EAAO,CACjE,GAAK07C,EAGL,KAAIG,EAAUH,EAAW,EACrBI,EAAUJ,EAAW,EACrBK,EAAcL,EAAW,MACzBM,EAAeN,EAAW,OAC9BD,EAAY,EAAII,EAChBJ,EAAY,EAAIK,EAChBL,EAAY,MAAQM,EACpBN,EAAY,OAASO,EACrB,IAAIlQ,EAAY9rC,GAASA,EAAM,UAC/B,OAAK8rC,IAGL2P,EAAY,EAAIE,GAAiBE,EAAS/P,EAAW,EAAI,EACzD2P,EAAY,EAAIE,GAAiBG,EAAShQ,EAAW,EAAI,EACzD2P,EAAY,MAAQ,KAAK,IAAIE,GAAiBE,EAAUE,EAAajQ,EAAW,EAAK,EAAI2P,EAAY,EAAGM,IAAgB,EAAI,EAAI,CAAC,EACjIN,EAAY,OAAS,KAAK,IAAIE,GAAiBG,EAAUE,EAAclQ,EAAW,EAAK,EAAI2P,EAAY,EAAGO,IAAiB,EAAI,EAAI,CAAC,GAC7HP,EACX,CACO,SAASE,GAAiBM,EAAUnQ,EAAWoQ,EAAoB,CACtE,GAAI,CAACpQ,EACD,OAAOmQ,EAEX,IAAIE,EAAkB1d,GAAMwd,EAAW,CAAC,EACxC,OAAQE,EAAkB1d,GAAMqN,CAAS,GAAK,IAAM,EAC9CqQ,EAAkB,GACjBA,GAAmBD,EAAqB,EAAI,KAAO,CAC9D,CCnDA,IAAIE,GAAa,UAAY,CACzB,SAASA,GAAY,CACjB,KAAK,EAAI,EACT,KAAK,EAAI,EACT,KAAK,MAAQ,EACb,KAAK,OAAS,CACtB,CACI,OAAOA,CACX,IAEIC,GAA8B,CAAE,EAChCC,GAAQ,SAAUtlC,EAAQ,CAC1BC,EAAUqlC,EAAMtlC,CAAM,EACtB,SAASslC,EAAK54B,EAAM,CAChB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAA44B,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,IAAIF,EACd,EACDE,EAAK,UAAU,UAAY,SAAUzwC,EAAKmuC,EAAO,CAC7C,IAAIhxC,EACAC,EACA3H,EACAyT,EACJ,GAAI,KAAK,iBAAkB,CACvB,IAAIwnC,EAAiBX,GAAqBS,GAA6BrC,EAAO,KAAK,KAAK,EACxFhxC,EAAIuzC,EAAe,EACnBtzC,EAAIszC,EAAe,EACnBj7C,EAAQi7C,EAAe,MACvBxnC,EAASwnC,EAAe,OACxBA,EAAe,EAAIvC,EAAM,EACzBA,EAAQuC,CACpB,MAEYvzC,EAAIgxC,EAAM,EACV/wC,EAAI+wC,EAAM,EACV14C,EAAQ04C,EAAM,MACdjlC,EAASilC,EAAM,OAEdA,EAAM,EAIPwC,GAA0B3wC,EAAKmuC,CAAK,EAHpCnuC,EAAI,KAAK7C,EAAGC,EAAG3H,EAAOyT,CAAM,CAKnC,EACDunC,EAAK,UAAU,WAAa,UAAY,CACpC,MAAO,CAAC,KAAK,MAAM,OAAS,CAAC,KAAK,MAAM,MAC3C,EACMA,CACX,EAAExD,EAAI,EACNwD,GAAK,UAAU,KAAO,OC7CtB,IAAIG,GAA0B,CAC1B,KAAM,MACV,EACIC,GAA4B,EACrBC,GAA+B,CACtC,MAAO14C,EAAS,CACZ,KAAM,GACN,OAAQ,GACR,YAAa,GACb,cAAe,GACf,UAAW,GACX,SAAU,GACV,WAAY,GACZ,MAAO,GACP,OAAQ,GACR,gBAAiB,GACjB,eAAgB,GAChB,kBAAmB,GACnB,kBAAmB,GACnB,gBAAiB,GACjB,QAAS,GACT,YAAa,GACb,YAAa,GACb,aAAc,EAClB,EAAG2sC,GAA+B,KAAK,CAC3C,EACIgM,GAAU,SAAU5lC,EAAQ,CAC5BC,EAAU2lC,EAAQ5lC,CAAM,EACxB,SAAS4lC,EAAOl5B,EAAM,CAClB,IAAIxM,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAE,EAAM,KAAO,OACbA,EAAM,UAAY,CAAC,EACnBA,EAAM,cAAgBulC,GACtBvlC,EAAM,KAAKwM,CAAI,EACRxM,CAAA,CAEX0lC,OAAAA,EAAO,UAAU,YAAc,UAAY,CACvC,OAAO,KAAK,SAChB,EACAA,EAAO,UAAU,OAAS,UAAY,CAC3B5lC,EAAA,UAAU,OAAO,KAAK,IAAI,EAC7B,KAAK,gBACL,KAAK,gBAAgB,EAEzB,QAAStW,EAAI,EAAGA,EAAI,KAAK,UAAU,OAAQA,IAAK,CACxC,IAAA6d,EAAQ,KAAK,UAAU7d,CAAC,EAC5B6d,EAAM,OAAS,KAAK,OACpBA,EAAM,EAAI,KAAK,EACfA,EAAM,GAAK,KAAK,GAChBA,EAAM,QAAU,KAAK,QACrBA,EAAM,OAAS,KAAK,OACpBA,EAAM,UAAY,KAAK,SAAA,CAE/B,EACAq+B,EAAO,UAAU,gBAAkB,UAAY,CAC3C,IAAIxnB,EAAqB,KAAK,mBAC1BA,GACAA,EAAmB,gBAAgB,EAC/BA,EAAmB,YACnB,KAAK,UAAYA,EAAmB,YAIjCpe,EAAA,UAAU,gBAAgB,KAAK,IAAI,CAElD,EACA4lC,EAAO,UAAU,kBAAoB,SAAU1yC,EAAG,CAC9C,IAAIkrB,EAAqB,KAAK,mBACvB,OAAAA,EACDA,EAAmB,kBAAkBlrB,CAAC,EACtC8M,EAAO,UAAU,kBAAkB,KAAK,KAAM9M,CAAC,CACzD,EACA0yC,EAAO,UAAU,qBAAuB,UAAY,CAChD,OAAI,KAAK,eACL,KAAK,aAAa,qBAAqB,EAClC,KAAA,aAAa,gBAAgB,EAAI,GAEnC5lC,EAAO,UAAU,qBAAqB,KAAK,IAAI,CAC1D,EACA4lC,EAAO,UAAU,gBAAkB,UAAY,CAC3C,KAAK,aAAe,EACpBC,GAAmB,KAAK,KAAK,EAC7B,KAAK,MAAM,KACL,KAAK,iBAAiB,EACtB,KAAK,kBAAkB,EACxB,KAAA,UAAU,OAAS,KAAK,aAC7B,KAAK,aAAa,CACtB,EACAD,EAAO,UAAU,YAAc,SAAUrkB,EAAI,CACzCvhB,EAAO,UAAU,YAAY,KAAK,KAAMuhB,CAAE,EAC1C,QAAS,EAAI,EAAG,EAAI,KAAK,UAAU,OAAQ,IAClC,KAAA,UAAU,CAAC,EAAE,KAAOA,CAEjC,EACAqkB,EAAO,UAAU,iBAAmB,SAAUrkB,EAAI,CAC9CvhB,EAAO,UAAU,iBAAiB,KAAK,KAAMuhB,CAAE,EAC/C,QAAS,EAAI,EAAG,EAAI,KAAK,UAAU,OAAQ,IAClC,KAAA,UAAU,CAAC,EAAE,KAAO,IAEjC,EACAqkB,EAAO,UAAU,gBAAkB,UAAY,CAIvC,GAHA,KAAK,gBACL,KAAK,gBAAgB,EAErB,CAAC,KAAK,MAAO,CAKb,QAJIvlC,EAAU,IAAIvC,GAAa,EAAG,EAAG,EAAG,CAAC,EACrCwJ,EAAW,KAAK,UAChBwd,EAAS,CAAC,EACV5sB,EAAO,KACFxO,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IAAK,CAClC,IAAA6d,EAAQD,EAAS5d,CAAC,EAClBq7B,EAAYxd,EAAM,gBAAgB,EAClC0U,EAAY1U,EAAM,kBAAkBud,CAAM,EAC1C7I,GACA5b,EAAQ,KAAK0kB,CAAS,EACtB1kB,EAAQ,eAAe4b,CAAS,EACzB/jB,EAAAA,GAAQmI,EAAQ,MAAM,EAC7BnI,EAAK,MAAMmI,CAAO,IAGXnI,EAAAA,GAAQ6sB,EAAU,MAAM,EAC/B7sB,EAAK,MAAM6sB,CAAS,EACxB,CAEJ,KAAK,MAAQ7sB,GAAQmI,CAAA,CAEzB,OAAO,KAAK,KAChB,EACAulC,EAAO,UAAU,oBAAsB,SAAUE,EAAkB,CAC/D,KAAK,cAAgBA,GAAoBL,EAC7C,EACAG,EAAO,UAAU,eAAiB,SAAUxlB,EAAa,CAIzD,EACAwlB,EAAO,UAAU,YAAc,SAAU9K,EAAaC,EAAa,CAC/D,GAAI,CAACA,EACM,OAAAD,EAEX,IAAIiL,EAAahL,EAAY,KACzBiL,EAAalL,EAAY,MAASiL,GAAc,CAAC,EACrD,OAAA/4C,EAAO8tC,EAAaC,CAAW,EAC3BgL,GAAcC,GACT,KAAA,WAAWA,EAAYD,CAAU,EACtCjL,EAAY,KAAOkL,GAEdA,IACLlL,EAAY,KAAOkL,GAEhBlL,CACX,EACA8K,EAAO,UAAU,WAAa,SAAUI,EAAYD,EAAY,CAE5D,QADIE,EAAY74C,GAAK24C,CAAU,EACtBr8C,EAAI,EAAGA,EAAIu8C,EAAU,OAAQv8C,IAAK,CACnC,IAAAw8C,EAAWD,EAAUv8C,CAAC,EAC1Bs8C,EAAWE,CAAQ,EAAIF,EAAWE,CAAQ,GAAK,CAAC,EAChDl5C,EAAOg5C,EAAWE,CAAQ,EAAGH,EAAWG,CAAQ,CAAC,CAAA,CAEzD,EACAN,EAAO,UAAU,uBAAyB,UAAY,CAC3C,OAAAD,EACX,EACAC,EAAO,UAAU,kBAAoB,SAAUv5C,EAAM,CACjD,IAAIkb,EAAQ,KAAK,UAAU,KAAK,YAAY,EAC5C,OAAI,CAACA,GAAS,EAAEA,aAAiBlb,MAC7Bkb,EAAQ,IAAIlb,GAEX,KAAA,UAAU,KAAK,cAAc,EAAIkb,EACtCA,EAAM,KAAO,KAAK,KAClBA,EAAM,OAAS,KACRA,CACX,EACAq+B,EAAO,UAAU,kBAAoB,UAAY,CAC7C,IAAI58C,EAAQ,KAAK,MACbm9C,EAAWn9C,EAAM,MAAQG,GACzBquC,EAAcxuC,EAAM,QACpBiB,EAAOm8C,GAAap9C,CAAK,EACzButC,EAAepB,GAAelrC,EAAMjB,CAAK,EACzCq9C,EAAaC,GAAmBt9C,CAAK,EACrCysC,EAAe,CAAC,CAAEzsC,EAAM,gBACxBgtC,EAAcO,EAAa,YAC3BN,EAAaM,EAAa,WAC1B5B,EAAe4B,EAAa,aAC5BpZ,EAAYoZ,EAAa,MACzBf,EAAae,EAAa,WAC1ByL,EAAe,KAAK,cACnB,KAAA,YAAc,CAAC,CAACzL,EAAa,YAC9B,IAAAgQ,EAAQv9C,EAAM,GAAK,EACnBw9C,EAAQx9C,EAAM,GAAK,EACnB6zB,EAAY7zB,EAAM,OAASg5C,EAAa,OAAS,OACjD3kB,EAAgBr0B,EAAM,eAAiBg5C,EAAa,eAAiB,MACrEyE,EAAQF,EACRG,EAAQzpB,GAAYupB,EAAOjQ,EAAa,cAAelZ,CAAa,EACxE,GAAIgpB,GAAc7O,EAAa,CAC3B,IAAImP,EAAO3pB,GAAYupB,EAAOtQ,EAAYpZ,CAAS,EAC/C+pB,EAAO3pB,GAAYupB,EAAOxQ,EAAa3Y,CAAa,EACxDgpB,GAAc,KAAK,kBAAkBr9C,EAAOA,EAAO29C,EAAMC,EAAM3Q,EAAYD,CAAW,CAAA,CAE1F0Q,GAASlR,EAAa,EAClBgC,IACQiP,EAAAI,GAAmBN,EAAO1pB,EAAW2a,CAAW,EACpDna,IAAkB,MAClBqpB,GAASlP,EAAY,CAAC,EAEjBna,IAAkB,WACvBqpB,GAASlP,EAAY,CAAC,IAkB9B,QAfIsP,EAAmB,EACnBC,EAAiB,GACjBjoB,EAAWkoB,GAAQ,SAAUh+C,EAC3BA,EAAM,MACL+9C,EAAiB,GAAM/E,EAAa,KAAK,EAC5CjjB,EAAakoB,GAAU,WAAYj+C,EACjCA,EAAM,OACL,CAACysC,IACI,CAACuM,EAAa,YAAc+E,IAC7BD,EAAmBpB,GAA2B1D,EAAa,QAC5D,IAAI,EACVkF,EAAYl+C,EAAM,eAAiB,EACnCm+C,EAAoBn+C,EAAM,OAAS,OAC/BA,EAAM,WAAa,YAAcA,EAAM,WAAa,SAAWA,EAAM,WAAa,YACtFusC,EAAuBgB,EAAa,qBAC/B7sC,EAAI,EAAGA,EAAIyzB,EAAU,OAAQzzB,IAAK,CACnC,IAAAqN,EAAK,KAAK,kBAAkB0sC,EAAK,EACjC2D,EAAarwC,EAAG,YAAY,EAChCA,EAAG,SAASqwC,CAAU,EACXA,EAAA,KAAOjqB,EAAUzzB,CAAC,EAC7B09C,EAAW,EAAIX,EACfW,EAAW,EAAIV,EAEXU,EAAW,UAAYvqB,EAE3BuqB,EAAW,aAAe,SAC1BA,EAAW,QAAUp+C,EAAM,QAC3Bo+C,EAAW,YAAc,GACrBF,IACWE,EAAA,WAAap+C,EAAM,gBAAkB,EACrCo+C,EAAA,YAAcp+C,EAAM,iBAAmB,cACvCo+C,EAAA,cAAgBp+C,EAAM,mBAAqB,EAC3Co+C,EAAA,cAAgBp+C,EAAM,mBAAqB,GAE1Do+C,EAAW,OAASroB,EACpBqoB,EAAW,KAAOtoB,EACdC,IACWqoB,EAAA,UAAYp+C,EAAM,WAAa89C,EAC1CM,EAAW,SAAWp+C,EAAM,SACjBo+C,EAAA,eAAiBp+C,EAAM,gBAAkB,GAExDo+C,EAAW,KAAOjB,EAClBkB,GAAgBD,EAAYp+C,CAAK,EACxB09C,GAAAlR,EACL2R,GACApwC,EAAG,gBAAgB,IAAI+G,GAAakf,GAAYoqB,EAAW,EAAGzS,EAAcyS,EAAW,SAAS,EAAGnqB,GAAYmqB,EAAW,EAAG7R,EAAsB6R,EAAW,YAAY,EAAGzS,EAAcY,CAAoB,CAAC,CACpN,CAER,EACAqQ,EAAO,UAAU,iBAAmB,UAAY,CAC5C,IAAI58C,EAAQ,KAAK,MACbiB,EAAOm8C,GAAap9C,CAAK,EACzButC,EAAeD,GAAcrsC,EAAMjB,CAAK,EACxC2rC,EAAe4B,EAAa,MAC5BN,EAAaM,EAAa,WAC1BP,EAAcO,EAAa,YAC3BiB,EAAcxuC,EAAM,QACpBu9C,EAAQv9C,EAAM,GAAK,EACnBw9C,EAAQx9C,EAAM,GAAK,EACnBg5C,EAAe,KAAK,cACpBnlB,EAAY7zB,EAAM,OAASg5C,EAAa,MACxC3kB,EAAgBr0B,EAAM,eAAiBg5C,EAAa,cACnD,KAAA,YAAc,CAAC,CAACzL,EAAa,YAClC,IAAIoQ,EAAO3pB,GAAYupB,EAAOtQ,EAAYpZ,CAAS,EAC/C+pB,EAAO3pB,GAAYupB,EAAOxQ,EAAa3Y,CAAa,EACpDiqB,EAAQX,EACRY,EAAUX,EACVpP,IACA8P,GAAS9P,EAAY,CAAC,EACtB+P,GAAW/P,EAAY,CAAC,GAE5B,IAAIgQ,EAASF,EAAQ3S,EACjB2R,GAAmBt9C,CAAK,GACxB,KAAK,kBAAkBA,EAAOA,EAAO29C,EAAMC,EAAM3Q,EAAYD,CAAW,EAG5E,QADIP,EAAe,CAAC,CAAEzsC,EAAM,gBACnBU,EAAI,EAAGA,EAAI6sC,EAAa,MAAM,OAAQ7sC,IAAK,CAWzC,QAVH0tC,EAAOb,EAAa,MAAM7sC,CAAC,EAC3B0sC,EAASgB,EAAK,OACdqQ,EAAarR,EAAO,OACpBZ,EAAa4B,EAAK,WAClBsQ,EAAgBtQ,EAAK,MACrBnnB,EAAY,EACZ03B,EAAYL,EACZM,EAAaJ,EACbt3B,EAAau3B,EAAa,EAC1BnQ,EAAQ,OACLrnB,EAAYw3B,IACXnQ,EAAQlB,EAAOnmB,CAAS,EAAG,CAACqnB,EAAM,OAASA,EAAM,QAAU,SAC/D,KAAK,YAAYA,EAAOtuC,EAAOwsC,EAAY+R,EAASI,EAAW,OAAQlS,CAAY,EACnFiS,GAAiBpQ,EAAM,MACvBqQ,GAAarQ,EAAM,MACnBrnB,IAEG,KAAAC,GAAc,IACbonB,EAAQlB,EAAOlmB,CAAU,EAAGonB,EAAM,QAAU,UAChD,KAAK,YAAYA,EAAOtuC,EAAOwsC,EAAY+R,EAASK,EAAY,QAASnS,CAAY,EACrFiS,GAAiBpQ,EAAM,MACvBsQ,GAActQ,EAAM,MACpBpnB,IAGJ,IADAy3B,IAAchT,GAAgBgT,EAAYL,IAAUE,EAASI,GAAcF,GAAiB,EACrFz3B,GAAaC,GAChBonB,EAAQlB,EAAOnmB,CAAS,EACnB,KAAA,YAAYqnB,EAAOtuC,EAAOwsC,EAAY+R,EAASI,EAAYrQ,EAAM,MAAQ,EAAG,SAAU7B,CAAY,EACvGkS,GAAarQ,EAAM,MACnBrnB,IAEOs3B,GAAA/R,CAAA,CAEnB,EACAoQ,EAAO,UAAU,YAAc,SAAUtO,EAAOtuC,EAAOwsC,EAAY+R,EAASv1C,EAAG6qB,EAAWgrB,EAAoB,CAC1G,IAAItQ,EAAavuC,EAAM,KAAKsuC,EAAM,SAAS,GAAK,CAAC,EACjDC,EAAW,KAAOD,EAAM,KACxB,IAAIja,EAAgBia,EAAM,cACtBrlC,EAAIs1C,EAAU/R,EAAa,EAC3BnY,IAAkB,MACdprB,EAAAs1C,EAAUjQ,EAAM,OAAS,EAExBja,IAAkB,WACnBprB,EAAAs1C,EAAU/R,EAAa8B,EAAM,OAAS,GAE9C,IAAI+O,EAAa,CAAC/O,EAAM,cAAgBgP,GAAmB/O,CAAU,EACvD8O,GAAA,KAAK,kBAAkB9O,EAAYvuC,EAAO6zB,IAAc,QAChE7qB,EAAIslC,EAAM,MACVza,IAAc,SACV7qB,EAAIslC,EAAM,MAAQ,EAClBtlC,EAAGC,EAAIqlC,EAAM,OAAS,EAAGA,EAAM,MAAOA,EAAM,MAAM,EACxD,IAAA7B,EAAe,CAAC,CAAC8B,EAAW,gBAC5BC,EAAcF,EAAM,YACpBE,IACIxlC,EAAA60C,GAAmB70C,EAAG6qB,EAAW2a,CAAW,EAChDvlC,GAAKqlC,EAAM,OAAS,EAAIE,EAAY,CAAC,EAAIF,EAAM,YAAc,GAE7D,IAAAvgC,EAAK,KAAK,kBAAkB0sC,EAAK,EACjC2D,EAAarwC,EAAG,YAAY,EAChCA,EAAG,SAASqwC,CAAU,EACtB,IAAIpF,EAAe,KAAK,cACpB+E,EAAiB,GACjBD,EAAmB,EACnBhoB,EAAWkoB,GAAQ,SAAUzP,EAAaA,EAAW,KACnD,SAAUvuC,EAAQA,EAAM,MACnB+9C,EAAiB,GAAM/E,EAAa,KAAK,EAChDjjB,EAAakoB,GAAU,WAAY1P,EAAaA,EAAW,OACzD,WAAYvuC,EAAQA,EAAM,OACrB,CAACysC,GACG,CAACoS,IACA,CAAC7F,EAAa,YAAc+E,IAAoBD,EAAmBpB,GAA2B1D,EAAa,QAC7G,IAAI,EACdkF,EAAY3P,EAAW,eAAiB,GACrCvuC,EAAM,eAAiB,EAC9Bo+C,EAAW,KAAO9P,EAAM,KACxB8P,EAAW,EAAIp1C,EACfo1C,EAAW,EAAIn1C,EACXi1C,IACAE,EAAW,WAAa7P,EAAW,gBAAkBvuC,EAAM,gBAAkB,EAC7Eo+C,EAAW,YAAc7P,EAAW,iBAAmBvuC,EAAM,iBAAmB,cAChFo+C,EAAW,cAAgB7P,EAAW,mBAAqBvuC,EAAM,mBAAqB,EACtFo+C,EAAW,cAAgB7P,EAAW,mBAAqBvuC,EAAM,mBAAqB,GAE1Fo+C,EAAW,UAAYvqB,EACvBuqB,EAAW,aAAe,SACfA,EAAA,KAAO9P,EAAM,MAAQnuC,GAChCi+C,EAAW,QAAUz3C,GAAU4nC,EAAW,QAASvuC,EAAM,QAAS,CAAC,EACnEq+C,GAAgBD,EAAY7P,CAAU,EAClCxY,IACAqoB,EAAW,UAAYz3C,GAAU4nC,EAAW,UAAWvuC,EAAM,UAAW89C,CAAgB,EACxFM,EAAW,SAAW53C,EAAU+nC,EAAW,SAAUvuC,EAAM,QAAQ,EACxDo+C,EAAA,eAAiBp+C,EAAM,gBAAkB,EACpDo+C,EAAW,OAASroB,GAEpBD,IACAsoB,EAAW,KAAOtoB,GAEtB,IAAIgpB,EAAYxQ,EAAM,aAClByQ,EAAazQ,EAAM,cACvBvgC,EAAG,gBAAgB,IAAI+G,GAAakf,GAAYoqB,EAAW,EAAGU,EAAWV,EAAW,SAAS,EAAGnqB,GAAYmqB,EAAW,EAAGW,EAAYX,EAAW,YAAY,EAAGU,EAAWC,CAAU,CAAC,CAC1L,EACAnC,EAAO,UAAU,kBAAoB,SAAU58C,EAAOg/C,EAAUh2C,EAAGC,EAAG3H,EAAOyT,EAAQ,CACjF,IAAI+5B,EAAsB9uC,EAAM,gBAC5Bi/C,EAAkBj/C,EAAM,YACxBk/C,EAAkBl/C,EAAM,YACxBm/C,EAAYrQ,GAAuBA,EAAoB,MACvDsQ,EAAsBtQ,GAAuB,CAACqQ,EAC9CE,EAAmBr/C,EAAM,aACzButB,EAAO,KACP+xB,EACAC,EACJ,GAAIH,GAAuBp/C,EAAM,YAAei/C,GAAmBC,EAAkB,CACxEI,EAAA,KAAK,kBAAkBhD,EAAI,EAC7BgD,EAAA,SAASA,EAAO,aAAa,EACpCA,EAAO,MAAM,KAAO,KACpB,IAAIE,EAAYF,EAAO,MACvBE,EAAU,EAAIx2C,EACdw2C,EAAU,EAAIv2C,EACdu2C,EAAU,MAAQl+C,EAClBk+C,EAAU,OAASzqC,EACnByqC,EAAU,EAAIH,EACdC,EAAO,WAAW,CAAA,CAEtB,GAAIF,EAAqB,CACrB,IAAIK,EAAYH,EAAO,MACvBG,EAAU,KAAO3Q,GAAuB,KACxC2Q,EAAU,YAAcj5C,EAAUxG,EAAM,YAAa,CAAC,UAEjDm/C,EAAW,CACRI,EAAA,KAAK,kBAAkBzE,EAAO,EACtCyE,EAAM,OAAS,UAAY,CACvBhyB,EAAK,WAAW,CACpB,EACA,IAAImyB,EAAWH,EAAM,MACrBG,EAAS,MAAQ5Q,EAAoB,MACrC4Q,EAAS,EAAI12C,EACb02C,EAAS,EAAIz2C,EACby2C,EAAS,MAAQp+C,EACjBo+C,EAAS,OAAS3qC,CAAA,CAEtB,GAAIkqC,GAAmBC,EAAiB,CACpC,IAAIO,EAAYH,EAAO,MACvBG,EAAU,UAAYR,EACtBQ,EAAU,OAASP,EACnBO,EAAU,cAAgBj5C,EAAUxG,EAAM,cAAe,CAAC,EAC1Dy/C,EAAU,SAAWz/C,EAAM,WACjBy/C,EAAA,eAAiBz/C,EAAM,kBAAoB,EACrDs/C,EAAO,uBAAyB,EAC5BA,EAAO,QAAA,GAAaA,EAAO,cAC3BG,EAAU,YAAc,GACxBA,EAAU,WAAa,EAC3B,CAEA,IAAAE,GAAeL,GAAUC,GAAO,MACxBI,EAAA,WAAa3/C,EAAM,YAAc,EACjC2/C,EAAA,YAAc3/C,EAAM,aAAe,cACnC2/C,EAAA,cAAgB3/C,EAAM,eAAiB,EACvC2/C,EAAA,cAAgB3/C,EAAM,eAAiB,EACnD2/C,EAAY,QAAUh5C,GAAU3G,EAAM,QAASg/C,EAAS,QAAS,CAAC,CACtE,EACApC,EAAO,SAAW,SAAU58C,EAAO,CAC/B,IAAIkB,EAAO,GACP,OAAA0+C,GAAgB5/C,CAAK,IACdkB,EAAA,CACHlB,EAAM,UACNA,EAAM,WACN6/C,GAAc7/C,EAAM,QAAQ,EAC5BA,EAAM,YAAc,YAAA,EACtB,KAAK,GAAG,GAEPkB,GAAQ+F,GAAK/F,CAAI,GAAKlB,EAAM,UAAYA,EAAM,IACzD,EACO48C,CACX,EAAE9L,EAAW,EACTgP,GAAmB,CAAE,KAAM,GAAM,MAAO,EAAG,OAAQ,CAAE,EACrDC,GAA4B,CAAE,IAAK,EAAG,OAAQ,EAAG,OAAQ,CAAE,EAC3DC,GAAa,CAAC,YAAa,aAAc,WAAY,YAAY,EAC9D,SAASH,GAAcx+C,EAAU,CACpC,OAAI,OAAOA,GAAa,WAChBA,EAAS,QAAQ,IAAI,IAAM,IACxBA,EAAS,QAAQ,KAAK,IAAM,IAC5BA,EAAS,QAAQ,IAAI,IAAM,IAC3BA,EAED,MAAM,CAACA,CAAQ,EAIdpB,GAAoB,KAHpBoB,EAAW,IAK1B,CACA,SAASg9C,GAAgBvM,EAAaC,EAAa,CAC/C,QAASrxC,EAAI,EAAGA,EAAIs/C,GAAW,OAAQt/C,IAAK,CACpC,IAAAu/C,EAAWD,GAAWt/C,CAAC,EACvBqB,EAAMgwC,EAAYkO,CAAQ,EAC1Bl+C,GAAO,OACP+vC,EAAYmO,CAAQ,EAAIl+C,EAC5B,CAER,CACO,SAAS69C,GAAgB5/C,EAAO,CACnC,OAAOA,EAAM,UAAY,MAAQA,EAAM,YAAcA,EAAM,UAC/D,CACO,SAAS68C,GAAmB78C,EAAO,CACtC,OAAAkgD,GAAelgD,CAAK,EACfmF,EAAAnF,EAAM,KAAMkgD,EAAc,EACxBlgD,CACX,CACA,SAASkgD,GAAelgD,EAAO,CAC3B,GAAIA,EAAO,CACDA,EAAA,KAAO48C,GAAO,SAAS58C,CAAK,EAClC,IAAI6zB,EAAY7zB,EAAM,MACtB6zB,IAAc,WAAaA,EAAY,UACvC7zB,EAAM,MAAS6zB,GAAa,MAAQisB,GAAiBjsB,CAAS,EAAKA,EAAY,OAC/E,IAAIQ,EAAgBr0B,EAAM,cAC1Bq0B,IAAkB,WAAaA,EAAgB,UAC/Cr0B,EAAM,cAAiBq0B,GAAiB,MAAQ0rB,GAA0B1rB,CAAa,EAAKA,EAAgB,MAC5G,IAAIma,EAAcxuC,EAAM,QACpBwuC,IACMxuC,EAAA,QAAU6G,GAAkB7G,EAAM,OAAO,EACnD,CAER,CACA,SAASi+C,GAAU3E,EAAQxN,EAAW,CAClC,OAAQwN,GAAU,MAAQxN,GAAa,GAAKwN,IAAW,eAAiBA,IAAW,OAC7E,KACCA,EAAO,OAASA,EAAO,WACpB,OACAA,CACd,CACA,SAAS0E,GAAQzE,EAAM,CACX,OAAAA,GAAQ,MAAQA,IAAS,OAC3B,KACCA,EAAK,OAASA,EAAK,WAChB,OACAA,CACd,CACA,SAASsE,GAAmB70C,EAAG6qB,EAAW2a,EAAa,CACnD,OAAO3a,IAAc,QACd7qB,EAAIwlC,EAAY,CAAC,EAClB3a,IAAc,SACT7qB,EAAIwlC,EAAY,CAAC,EAAI,EAAIA,EAAY,CAAC,EAAI,EAC1CxlC,EAAIwlC,EAAY,CAAC,CAChC,CACA,SAAS4O,GAAap9C,EAAO,CACzB,IAAIiB,EAAOjB,EAAM,KACjB,OAAAiB,GAAQ,OAASA,GAAQ,IAClBA,CACX,CACA,SAASq8C,GAAmBt9C,EAAO,CACxB,MAAA,CAAC,EAAEA,EAAM,iBACTA,EAAM,YACLA,EAAM,aAAeA,EAAM,YACvC,CCzfO,IAAImgD,GAAYlb,GAAW,EACvBmb,GAAkB,SAAUC,EAAaC,EAAUC,EAASxyC,EAAI,CACzE,GAAIA,EAAI,CACN,IAAIyyC,EAASL,GAAUpyC,CAAE,EAGzByyC,EAAO,UAAYD,EACnBC,EAAO,SAAWF,EAClBE,EAAO,YAAcH,EACrBG,EAAO,QAAU,QAEbzyC,EAAG,OAAS,SACdA,EAAG,SAAS,SAAUwQ,EAAO,CAC3B,IAAIkiC,EAAcN,GAAU5hC,CAAK,EACjCkiC,EAAY,YAAcJ,EAC1BI,EAAY,UAAYF,EACxBE,EAAY,SAAWH,EACvBG,EAAY,QAAU,OAC9B,CAAO,CAEP,CACA,ECfIC,GAAsB,EACtBC,GAAmB,CAAC,EACpBC,GAAiB3b,GAAU,EAC3B4b,GAAqB5b,GAAU,EACxB6b,GAAqB,EACrBC,GAAmB,EACnBC,GAAuB,EACvBC,GAAiB,CAAC,WAAY,OAAQ,QAAQ,EAC9CC,GAAiB,CAAC,SAAU,WAAY,OAAQ,QAAQ,EACxDC,GAAmB,GACnBC,GAAiB,EACjBC,GAAwB,YACxBC,GAAuB,WACvBC,GAAqB,SACrBC,GAAuB,WACvBC,GAA4B,eACvC,SAASC,GAAgBC,EAAc,CAC9B,OAAAA,GAAgB,MAAQA,IAAiB,MAClD,CACA,SAASC,GAAmB7zC,EAAI4oB,EAAWkrB,EAAgB,CACrD9zC,EAAG,qBAAuBA,EAAG,YAAc,KAAO8zC,GACpD9zC,EAAG,mBAAmB4oB,CAAS,EAEjC5oB,EAAG,WAAa8zC,CAClB,CACA,SAASC,GAAoB/zC,EAAI,CAGZ6zC,GAAA7zC,EAAI,WAAYizC,EAAoB,CACzD,CACA,SAASe,GAAoBh0C,EAAI,CAG3BA,EAAG,aAAeizC,IACDY,GAAA7zC,EAAI,SAAU+yC,EAAkB,CAEvD,CACA,SAASkB,GAAgBj0C,EAAI,CACR6zC,GAAA7zC,EAAI,OAAQgzC,EAAgB,CACjD,CACA,SAASkB,GAAgBl0C,EAAI,CACvBA,EAAG,aAAegzC,IACDa,GAAA7zC,EAAI,SAAU+yC,EAAkB,CAEvD,CACA,SAASoB,GAAkBn0C,EAAI,CAC7BA,EAAG,SAAW,EAChB,CACA,SAASo0C,GAAkBp0C,EAAI,CAC7BA,EAAG,SAAW,EAChB,CACA,SAASq0C,GAAmBr0C,EAAIs0C,EAASC,EAAa,CACpDD,EAAQt0C,EAAIu0C,CAAW,CACzB,CACA,SAASC,GAAoBx0C,EAAIs0C,EAASC,EAAa,CAClCF,GAAAr0C,EAAIs0C,EAASC,CAAW,EAC3Cv0C,EAAG,SAAWA,EAAG,SAAS,SAAUwQ,EAAO,CACtB6jC,GAAA7jC,EAAO8jC,EAASC,CAAW,CAAA,CAC/C,CACH,CACgB,SAAAE,GAAcz0C,EAAI4oB,EAAW,CAC3C,OAAQA,EAAW,CACjB,IAAK,WACH5oB,EAAG,WAAaizC,GAChB,MACF,IAAK,SACHjzC,EAAG,WAAa+yC,GAChB,MACF,IAAK,OACH/yC,EAAG,WAAagzC,GAChB,MACF,IAAK,SACHhzC,EAAG,SAAW,EAAA,CAEpB,CAeA,SAAS00C,GAAkB10C,EAAI2e,EAAOg2B,EAAaze,EAAc,CAG/D,QAFIjkC,EAAQ+N,EAAG,MACX40C,EAAY,CAAC,EACRjiD,EAAI,EAAGA,EAAIgsB,EAAM,OAAQhsB,IAAK,CACjC,IAAA0pB,EAAWsC,EAAMhsB,CAAC,EAClBqB,EAAM/B,EAAMoqB,CAAQ,EACxBu4B,EAAUv4B,CAAQ,EAAIroB,IAAckiC,GAAgBA,EAAa7Z,CAAQ,EAAI,CAE/E,QAAS1pB,EAAI,EAAGA,EAAIqN,EAAG,UAAU,OAAQrN,IAAK,CACxC,IAAAwtB,EAAWngB,EAAG,UAAUrN,CAAC,EACzBwtB,EAAS,uBAEVA,EAAS,sBAAsB,QAAQw0B,CAAW,EAAI,GAAKx0B,EAAS,aAAe,SAC3EA,EAAA,OAAOy0B,EAAWj2B,CAAK,CAClC,CAEK,OAAAi2B,CACT,CACA,SAASC,GAA2B70C,EAAI4oB,EAAWksB,EAAc3rB,EAAO,CACtE,IAAI4rB,EAAYD,GAAgBx+C,EAAQw+C,EAAc,QAAQ,GAAK,EAC/DE,EAAS,GACb,GAAIh1C,aAAc+qC,GAAM,CAClB,IAAAkK,EAAQpC,GAAe7yC,CAAE,EACzBk1C,EAAWH,GAAYE,EAAM,YAAcA,EAAM,WACjDE,EAAaJ,GAAYE,EAAM,cAAgBA,EAAM,aACzD,GAAItB,GAAgBuB,CAAQ,GAAKvB,GAAgBwB,CAAU,EAAG,CAC5DhsB,EAAQA,GAAS,CAAC,EACd,IAAAisB,EAAgBjsB,EAAM,OAAS,CAAC,EAEhCisB,EAAc,OAAS,WAChBJ,EAAA,GACD7rB,EAAAlzB,EAAO,CAAC,EAAGkzB,CAAK,EACRisB,EAAAn/C,EAAO,CAAC,EAAGm/C,CAAa,EACxCA,EAAc,KAAOF,GAGd,CAACvB,GAAgByB,EAAc,IAAI,GAAKzB,GAAgBuB,CAAQ,GAC9DF,EAAA,GAED7rB,EAAAlzB,EAAO,CAAC,EAAGkzB,CAAK,EACRisB,EAAAn/C,EAAO,CAAC,EAAGm/C,CAAa,EAE1BA,EAAA,KAAOz7B,GAAUu7B,CAAQ,GAGhC,CAACvB,GAAgByB,EAAc,MAAM,GAAKzB,GAAgBwB,CAAU,IACtEH,IACK7rB,EAAAlzB,EAAO,CAAC,EAAGkzB,CAAK,EACRisB,EAAAn/C,EAAO,CAAC,EAAGm/C,CAAa,GAE5BA,EAAA,OAASz7B,GAAUw7B,CAAU,GAE7ChsB,EAAM,MAAQisB,CAAA,CAChB,CAEF,GAAIjsB,GAEEA,EAAM,IAAM,KAAM,CACf6rB,IACK7rB,EAAAlzB,EAAO,CAAC,EAAGkzB,CAAK,GAE1B,IAAIksB,EAAiBr1C,EAAG,eACxBmpB,EAAM,GAAKnpB,EAAG,IAAMq1C,GAA0CjC,GAAA,CAG3D,OAAAjqB,CACT,CACA,SAASmsB,GAAyBt1C,EAAI4oB,EAAWO,EAAO,CAEtD,GAAIA,GAEEA,EAAM,IAAM,KAAM,CACZA,EAAAlzB,EAAO,CAAC,EAAGkzB,CAAK,EACxB,IAAIosB,EAAev1C,EAAG,aACtBmpB,EAAM,GAAKnpB,EAAG,IAAMu1C,GAAsClC,GAAA,CAGvD,OAAAlqB,CACT,CACA,SAASqsB,GAAuBx1C,EAAI4oB,EAAWO,EAAO,CACpD,IAAIssB,EAAUn/C,EAAQ0J,EAAG,cAAe4oB,CAAS,GAAK,EAClD8sB,EAAiB11C,EAAG,MAAM,QAC1B40C,EAAaa,EAEZ,KAFsBf,GAAkB10C,EAAI,CAAC,SAAS,EAAG4oB,EAAW,CACvE,QAAS,CACV,CAAA,EACDO,EAAQA,GAAS,CAAC,EACd,IAAAwsB,EAAYxsB,EAAM,OAAS,CAAC,EAC5B,OAAAwsB,EAAU,SAAW,OAEfxsB,EAAAlzB,EAAO,CAAC,EAAGkzB,CAAK,EACxBwsB,EAAY1/C,EAAO,CAEjB,QAASw/C,EAAUC,EAAiBd,EAAU,QAAU,IACvDe,CAAS,EACZxsB,EAAM,MAAQwsB,GAETxsB,CACT,CACA,SAASysB,GAAkBhtB,EAAWksB,EAAc,CAC9C,IAAA3rB,EAAQ,KAAK,OAAOP,CAAS,EACjC,GAAI,KAAK,MAAO,CACd,GAAIA,IAAc,WAChB,OAAOisB,GAA2B,KAAMjsB,EAAWksB,EAAc3rB,CAAK,EACxE,GAAWP,IAAc,OAChB,OAAA4sB,GAAuB,KAAM5sB,EAAWO,CAAK,EACtD,GAAWP,IAAc,SAChB,OAAA0sB,GAAyB,KAAM1sB,EAAWO,CAAK,CACxD,CAEK,OAAAA,CACT,CAMO,SAAS0sB,GAAqB71C,EAAI,CACvCA,EAAG,WAAa41C,GACZ,IAAAvsB,EAAcrpB,EAAG,eAAe,EAChC2Q,EAAY3Q,EAAG,iBAAiB,EAChCqpB,IACFA,EAAY,WAAausB,IAEvBjlC,IACFA,EAAU,WAAailC,GAE3B,CACgB,SAAAE,GAA2B91C,EAAIvD,EAAG,CAC/C,CAAAs5C,GAAa/1C,EAAIvD,CAAC,GAEhB,CAACuD,EAAG,eAAiBw0C,GAAoBx0C,EAAI+zC,EAAmB,CACrE,CACgB,SAAAiC,GAA0Bh2C,EAAIvD,EAAG,CAC9C,CAAAs5C,GAAa/1C,EAAIvD,CAAC,GAEhB,CAACuD,EAAG,eAAiBw0C,GAAoBx0C,EAAIg0C,EAAmB,CACrE,CACgB,SAAAiC,GAAcj2C,EAAIk2C,EAAgB,CAC7Cl2C,EAAA,eAAiB,IAAMk2C,GAAkB,GAC5C1B,GAAoBx0C,EAAI+zC,EAAmB,CAC7C,CACgB,SAAAoC,GAAcn2C,EAAIk2C,EAAgB,CAC9C,EAAAl2C,EAAG,eAAiB,EAAE,IAAMk2C,GAAkB,MAAQ1B,GAAoBx0C,EAAIg0C,EAAmB,CACrG,CACO,SAASoC,GAAUp2C,EAAI,CAC5Bw0C,GAAoBx0C,EAAIi0C,EAAe,CACzC,CACO,SAASoC,GAAUr2C,EAAI,CAC5Bw0C,GAAoBx0C,EAAIk0C,EAAe,CACzC,CACO,SAASoC,GAAYt2C,EAAI,CAC9Bw0C,GAAoBx0C,EAAIm0C,EAAiB,CAC3C,CACO,SAASoC,GAAYv2C,EAAI,CAC9Bw0C,GAAoBx0C,EAAIo0C,EAAiB,CAC3C,CACA,SAAS2B,GAAa/1C,EAAIvD,EAAG,CACpB,OAAAuD,EAAG,yBAA2BvD,EAAE,SACzC,CACO,SAAS+5C,GAAaC,EAAK,CAC5B,IAAAva,EAAQua,EAAI,SAAS,EACrBC,EAAqB,CAAC,EACtBC,EAAoB,CAAC,EACnBza,EAAA,cAAc,SAAUpC,EAAe1D,EAAgB,CACvD,IAAAwgB,EAAkB9D,GAAmB1c,CAAc,EACnDygB,EAAW/c,IAAkB,SAC7Bgd,EAAOD,EAAWJ,EAAI,qBAAqBrgB,CAAc,EAAIqgB,EAAI,wBAAwBrgB,CAAc,EAC1G,CAAAygB,GAAYF,EAAkB,KAAKG,CAAI,EACpCF,EAAgB,WAEbE,EAAA,MAAM,SAAS,SAAUtmC,EAAO,CACnC0jC,GAAgB1jC,CAAK,CAAA,CACtB,EACWqmC,GAAAH,EAAmB,KAAKtgB,CAAc,GAEpDwgB,EAAgB,SAAW,EAAA,CAC5B,EACIx/C,EAAAu/C,EAAmB,SAAUG,EAAM,CAClCA,GAAQA,EAAK,kBACVA,EAAA,iBAAiBJ,EAAoB,GAAOxa,CAAK,CACxD,CACD,CACH,CACO,SAAS6a,GAAWC,EAAmBC,EAAOC,EAAWT,EAAK,CAC/D,IAAAnf,EAAUmf,EAAI,SAAS,EAC3BS,EAAYA,GAAa,mBAChB,SAAAC,EAAmBhgD,EAAMigD,EAAa,CAC7C,QAASzkD,EAAI,EAAGA,EAAIykD,EAAY,OAAQzkD,IAAK,CAC3C,IAAI0kD,EAASlgD,EAAK,iBAAiBigD,EAAYzkD,CAAC,CAAC,EACjD0kD,GAAUhB,GAAUgB,CAAM,CAAA,CAC5B,CAEF,GAAIL,GAAqB,MAGrB,GAACC,GAASA,IAAU,QAGpB,KAAAK,EAAoBhgB,EAAQ,iBAAiB0f,CAAiB,EAC9DO,EAAiBD,EAAkB,iBACnCC,GAAkBA,EAAe,SACnCA,EAAiBA,EAAe,QAElC,IAAIC,EAAgB,CAAC,EACblgB,EAAA,WAAW,SAAUmgB,EAAa,CACxC,IAAIC,EAAaJ,IAAsBG,EACnCE,EAAWF,EAAY,iBACvBE,GAAYA,EAAS,SACvBA,EAAWA,EAAS,QAEtB,IAAIC,EAAeD,GAAYJ,EAAiBI,IAAaJ,EAAiBG,EAC1E,GAAA,EAEJR,IAAc,UAAY,CAACQ,GAExBR,IAAc,oBAAsB,CAACU,GAErCX,IAAU,UAAYS,GAEtB,CACG,IAAAZ,EAAOL,EAAI,qBAAqBgB,CAAW,EAW3C,GAVCX,EAAA,MAAM,SAAS,SAAUtmC,EAAO,CAK/BA,EAAM,eAAiBknC,GAAcT,IAAU,QAGnDhD,GAAgBzjC,CAAK,CAAA,CACtB,EACGtZ,GAAY+/C,CAAK,EACAE,EAAAM,EAAY,QAAQ,EAAGR,CAAK,UACtCrhD,EAASqhD,CAAK,EAEvB,QADIY,EAAYxhD,GAAK4gD,CAAK,EACjBp7C,EAAI,EAAGA,EAAIg8C,EAAU,OAAQh8C,IACjBs7C,EAAAM,EAAY,QAAQI,EAAUh8C,CAAC,CAAC,EAAGo7C,EAAMY,EAAUh8C,CAAC,CAAC,CAAC,EAG7E27C,EAAc,KAAKC,CAAW,EACX3E,GAAA2E,CAAW,EAAE,SAAW,EAAA,CAC7C,CACD,EACOngB,EAAA,cAAc,SAAUwC,EAAe1D,EAAgB,CAC7D,GAAI0D,IAAkB,SAGlB,KAAAgd,EAAOL,EAAI,wBAAwBrgB,CAAc,EACjD0gB,GAAQA,EAAK,kBACVA,EAAA,iBAAiBU,EAAe,GAAMlgB,CAAO,EACpD,CACD,EACH,CACgB,SAAAwgB,GAAcC,EAAmBC,EAAgBvB,EAAK,CAChE,GAAA,EAAAsB,GAAqB,MAAQC,GAAkB,MAGnD,KAAI5hB,EAAiBqgB,EAAI,SAAW,EAAA,aAAasB,EAAmBC,CAAc,EAClF,GAAK5hB,EAGc,CAAA0c,GAAA1c,CAAc,EAAE,SAAW,GAC1C,IAAA0gB,EAAOL,EAAI,wBAAwBrgB,CAAc,EACjD,CAAC0gB,GAAQ,CAACA,EAAK,kBAGdA,EAAA,MAAM,SAAS,SAAUtmC,EAAO,CACnCyjC,GAAgBzjC,CAAK,CAAA,CACtB,GACH,CACgB,SAAAynC,GAA+BR,EAAaxgB,EAASwf,EAAK,CACxE,IAAInE,EAAcmF,EAAY,YAC1BtgD,EAAOsgD,EAAY,QAAQxgB,EAAQ,QAAQ,EAC/C,GAAK9/B,EAMD,KAAA+gD,EAAYlhB,GAAe7/B,EAAM8/B,CAAO,EAE5CihB,GAAaniD,EAAQmiD,CAAS,EAAIA,EAAU,CAAC,EAAIA,IAAc,EAC3D,IAAAl4C,EAAK7I,EAAK,iBAAiB+gD,CAAS,EACxC,GAAI,CAACl4C,EAII,QAHHm4C,EAAQhhD,EAAK,MAAM,EACnBihD,EAAU,EAEP,CAACp4C,GAAMo4C,EAAUD,GACjBn4C,EAAA7I,EAAK,iBAAiBihD,GAAS,EAGxC,GAAIp4C,EAAI,CACF,IAAAyyC,EAASL,GAAUpyC,CAAE,EACzB+2C,GAAWzE,EAAaG,EAAO,MAAOA,EAAO,UAAWgE,CAAG,CAAA,KACtD,CAGL,IAAI4B,EAAUZ,EAAY,IAAI,CAAC,WAAY,OAAO,CAAC,EAC/CP,EAAYO,EAAY,IAAI,CAAC,WAAY,WAAW,CAAC,EACrDY,GAAW,MACFtB,GAAAzE,EAAa+F,EAASnB,EAAWT,CAAG,CACjD,EAEJ,CACO,SAAS6B,GAAiCP,EAAmBC,EAAgBl1C,EAAM2zC,EAAK,CAC7F,IAAI58B,EAAM,CACR,UAAW,GACX,YAAa,IACf,EACA,GAAIk+B,GAAqB,MAAQA,IAAsB,UAAYC,GAAkB,MAAQl1C,GAAQ,KAC5F,OAAA+W,EAET,IAAIuc,EAAiBqgB,EAAI,SAAW,EAAA,aAAasB,EAAmBC,CAAc,EAClF,GAAI,CAAC5hB,EACI,OAAAvc,EAEL,IAAAi9B,EAAOL,EAAI,wBAAwBrgB,CAAc,EACrD,GAAI,CAAC0gB,GAAQ,CAACA,EAAK,wBACV,OAAAj9B,EAMT,QAJI0+B,EAAczB,EAAK,wBAAwBh0C,CAAI,EAG/C01C,EACK7lD,EAAI,EAAGA,EAAI4lD,EAAY,OAAQ5lD,IAItC,GAAIy/C,GAAUmG,EAAY5lD,CAAC,CAAC,EAAE,QAAU,OAAQ,CAClC6lD,EAAA,GACZ,KAAA,CAGG,MAAA,CACL,UAAAA,EACA,YAAAD,CACF,CACF,CACgB,SAAAE,GAAiCC,EAAYj8C,EAAGg6C,EAAK,CAI/D,IAAAhE,EAASL,GAAUsG,CAAU,EAC7BlhB,EAAK8gB,GAAiC7F,EAAO,kBAAmBA,EAAO,eAAgBA,EAAO,sBAAuBgE,CAAG,EAC1H8B,EAAc/gB,EAAG,YACjBghB,EAAYhhB,EAAG,UAGb+gB,GACEC,GACFV,GAAcrF,EAAO,kBAAmBA,EAAO,eAAgBgE,CAAG,EAE/Dr/C,EAAAmhD,EAAa,SAAUG,EAAY,CAC/B,OAAA5C,GAA2B4C,EAAYj8C,CAAC,CAAA,CAChD,IAIDs6C,GAAWtE,EAAO,YAAaA,EAAO,MAAOA,EAAO,UAAWgE,CAAG,EAC9DhE,EAAO,QAAU,QACnBqF,GAAcrF,EAAO,kBAAmBA,EAAO,eAAgBgE,CAAG,EAKpEX,GAA2B4C,EAAYj8C,CAAC,EAE5C,CACgB,SAAAk8C,GAAgCD,EAAYj8C,EAAGg6C,EAAK,CAIlED,GAAaC,CAAG,EACZ,IAAAhE,EAASL,GAAUsG,CAAU,EAC7BH,EAAcD,GAAiC7F,EAAO,kBAAmBA,EAAO,eAAgBA,EAAO,sBAAuBgE,CAAG,EAAE,YACnI8B,EACGnhD,EAAAmhD,EAAa,SAAUG,EAAY,CAC/B,OAAA1C,GAA0B0C,EAAYj8C,CAAC,CAAA,CAC/C,EAEDu5C,GAA0B0C,EAAYj8C,CAAC,CAE3C,CACgB,SAAAm8C,GAA2BnB,EAAaxgB,EAASwf,EAAK,CAChE,GAACoC,GAAsB5hB,CAAO,EAGlC,KAAIsb,EAAWtb,EAAQ,SACnB9/B,EAAOsgD,EAAY,QAAQlF,CAAQ,EACnC2F,EAAYlhB,GAAe7/B,EAAM8/B,CAAO,EACvClhC,EAAQmiD,CAAS,IACpBA,EAAY,CAACA,CAAS,GAEZT,EAAAxgB,EAAQ,OAASyc,GAA4B,eAAiBzc,EAAQ,OAASuc,GAAqB,SAAW,UAAU,EAAE0E,EAAW3F,CAAQ,EAC5J,CACO,SAASuG,GAA6BrB,EAAa,CACpD,IAAAsB,EAAUtB,EAAY,WAAW,EAChCrgD,EAAA2hD,EAAS,SAAUvhB,EAAI,CAC1B,IAAIrgC,EAAOqgC,EAAG,KACZr/B,EAAOq/B,EAAG,KACPrgC,EAAA,kBAAkB,SAAU6I,EAAI6Q,EAAK,CAC5B4mC,EAAA,WAAW5mC,EAAK1Y,CAAI,EAAIm+C,GAAYt2C,CAAE,EAAIu2C,GAAYv2C,CAAE,CAAA,CACrE,CAAA,CACF,CACH,CACO,SAASg5C,GAAsB1hB,EAAS,CAC7C,IAAIzd,EAAM,CAAC,EACH,OAAAyd,EAAA,WAAW,SAAUmgB,EAAa,CACpC,IAAAsB,EAAUtB,EAAY,WAAW,EAChCrgD,EAAA2hD,EAAS,SAAUvhB,EAAI,CACfA,EAAG,SACZr/B,EAAOq/B,EAAG,KACR4f,EAAcK,EAAY,uBAAuB,EACjD,GAAAL,EAAY,OAAS,EAAG,CAC1B,IAAI5hB,EAAO,CACT,UAAW4hB,EACX,YAAaK,EAAY,WAC3B,EACIt/C,GAAQ,OACVq9B,EAAK,SAAWr9B,GAElB0hB,EAAI,KAAK2b,CAAI,CAAA,CACf,CACD,CAAA,CACF,EACM3b,CACT,CAQgB,SAAAo/B,GAAoBj5C,EAAIi3C,EAAOC,EAAW,CACxDgC,GAAwBl5C,EAAI,EAAI,EAChCw0C,GAAoBx0C,EAAI61C,EAAoB,EAC3BsD,GAAAn5C,EAAIi3C,EAAOC,CAAS,CACvC,CACO,SAASkC,GAAqBp5C,EAAI,CACvCk5C,GAAwBl5C,EAAI,EAAK,CACnC,CACO,SAASq5C,GAAoBr5C,EAAIi3C,EAAOC,EAAWoC,EAAY,CACpEA,EAAaF,GAAqBp5C,CAAE,EAAIi5C,GAAoBj5C,EAAIi3C,EAAOC,CAAS,CAClF,CACgB,SAAAiC,GAAiBn5C,EAAIi3C,EAAOC,EAAW,CACjD,IAAAzE,EAASL,GAAUpyC,CAAE,EACrBi3C,GAAS,MAQXxE,EAAO,MAAQwE,EACfxE,EAAO,UAAYyE,GAEVzE,EAAO,QAChBA,EAAO,MAAQ,KAEnB,CACA,IAAI8G,GAAe,CAAC,WAAY,OAAQ,QAAQ,EAC5CC,GAAwB,CAC1B,UAAW,eACX,UAAW,eACX,UAAW,cACb,EAIO,SAASC,GAAyBz5C,EAAI05C,EAAWC,EAExDC,EAAQ,CACND,EAAYA,GAAa,YACzB,QAAShnD,EAAI,EAAGA,EAAI4mD,GAAa,OAAQ5mD,IAAK,CACxC,IAAAi2B,EAAY2wB,GAAa5mD,CAAC,EAC1BupC,EAAQwd,EAAU,SAAS,CAAC9wB,EAAW+wB,CAAS,CAAC,EACjDxwB,EAAQnpB,EAAG,YAAY4oB,CAAS,EAE9BO,EAAA,MAAiC+S,EAAMsd,GAAsBG,CAAS,CAAC,EAAE,CAAA,CAEnF,CAoBgB,SAAAT,GAAwBl5C,EAAI65C,EAAc,CACxD,IAAIC,EAAUD,IAAiB,GAC3BE,EAAa/5C,EAGbA,EAAG,wBACL+5C,EAAW,wBAA0B/5C,EAAG,wBAItC,CAAC85C,GAAWC,EAAW,wBAIdA,EAAA,cAAgBA,EAAW,eAAiB,EACvDA,EAAW,qBAAuB,CAACD,EAEvC,CACO,SAASE,GAAqBh6C,EAAI,CAChC,MAAA,CAAC,EAAEA,GAAMA,EAAG,qBACrB,CAoBO,SAASi6C,GAAkBC,EAAc,CAC1C,IAAAhE,EAAiBtD,GAAiBsH,CAAY,EAC9C,OAAAhE,GAAkB,MAAQvD,IAAuB,KAClCuD,EAAAtD,GAAiBsH,CAAY,EAAIvH,MAE7CuD,CACT,CACO,SAAS2C,GAAsB5hB,EAAS,CAC7C,IAAIkjB,EAAcljB,EAAQ,KAC1B,OAAOkjB,IAAgB3G,IAAsB2G,IAAgB1G,IAAwB0G,IAAgBzG,EACvG,CACO,SAAS0G,GAAkBnjB,EAAS,CACzC,IAAIkjB,EAAcljB,EAAQ,KACnB,OAAAkjB,IAAgB7G,IAAyB6G,IAAgB5G,EAClE,CACO,SAAS8G,GAAer6C,EAAI,CAC7B,IAAAi1C,EAAQpC,GAAe7yC,CAAE,EACvBi1C,EAAA,WAAaj1C,EAAG,MAAM,KACtBi1C,EAAA,aAAej1C,EAAG,MAAM,OAC9B,IAAIs6C,EAAct6C,EAAG,OAAO,QAAU,CAAC,EACvCi1C,EAAM,WAAaqF,EAAY,OAASA,EAAY,MAAM,MAAQ,KAClErF,EAAM,aAAeqF,EAAY,OAASA,EAAY,MAAM,QAAU,IACxE,CC7rBA,IAAIvU,GAAMc,GAAU,IAChBzxB,GAAS,CAAC,CAAA,EAAI,CAAE,EAAE,EAAE,EACpBlE,GAAW,KAAK,KAChBqpC,GAAY,KAAK,MACN,SAASC,GAAcpT,EAAMjrC,EAAG,CAC3C,GAAKA,EAGL,KAAIhF,EAAOiwC,EAAK,KACZ/xC,EAAM+xC,EAAK,IAAK,EAChBG,EACAkT,EACA9nD,EACAkM,EACA0P,EACAtI,EACAy0C,EAAI3U,GAAI,EACR5zB,EAAI4zB,GAAI,EACR4U,EAAI5U,GAAI,EACR6U,EAAI7U,GAAI,EACR9zB,EAAI8zB,GAAI,EACR8U,EAAI9U,GAAI,EACZ,IAAKpzC,EAAI,EAAGkM,EAAI,EAAGlM,EAAI0C,GAAM,CAIzB,OAHAkyC,EAAMpwC,EAAKxE,GAAG,EACdkM,EAAIlM,EACJ8nD,EAAS,EACDlT,EAAG,CACP,KAAKmT,EACDD,EAAS,EACT,MACJ,KAAKE,EACDF,EAAS,EACT,MACJ,KAAKtoC,EACDsoC,EAAS,EACT,MACJ,KAAKI,EACDJ,EAAS,EACT,MACJ,KAAKxoC,EACD,IAAIhX,EAAIkB,EAAE,CAAC,EACP,EAAIA,EAAE,CAAC,EACP8K,EAAKiK,GAAS/U,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EACvC+K,EAAKgK,GAAS/U,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,EACvC2pC,EAAQyU,GAAU,CAACp+C,EAAE,CAAC,EAAI+K,EAAI/K,EAAE,CAAC,EAAI8K,CAAE,EAC3C9P,EAAKxE,CAAC,GAAKsU,EACX9P,EAAKxE,GAAG,GAAKsI,EACb9D,EAAKxE,CAAC,GAAKuU,EACX/P,EAAKxE,GAAG,GAAK,EACbwE,EAAKxE,GAAG,GAAKsU,EACb9P,EAAKxE,GAAG,GAAKuU,EACb/P,EAAKxE,GAAG,GAAKmzC,EACb3uC,EAAKxE,GAAG,GAAKmzC,EACbnzC,GAAK,EACLkM,EAAIlM,EACJ,MACJ,KAAKioD,EACD30C,EAAE,CAAC,EAAI9O,EAAKxE,GAAG,EACfsT,EAAE,CAAC,EAAI9O,EAAKxE,GAAG,EACfmoD,GAAiB70C,EAAGA,EAAG9J,CAAC,EACxBhF,EAAK0H,GAAG,EAAIoH,EAAE,CAAC,EACf9O,EAAK0H,GAAG,EAAIoH,EAAE,CAAC,EACfA,EAAE,CAAC,GAAK9O,EAAKxE,GAAG,EAChBsT,EAAE,CAAC,GAAK9O,EAAKxE,GAAG,EAChBmoD,GAAiB70C,EAAGA,EAAG9J,CAAC,EACxBhF,EAAK0H,GAAG,EAAIoH,EAAE,CAAC,EACf9O,EAAK0H,GAAG,EAAIoH,EAAE,CAAC,CAC/B,CACQ,IAAKsI,EAAI,EAAGA,EAAIksC,EAAQlsC,IAAK,CACzB,IAAIwsC,EAAM3lC,GAAO7G,CAAC,EAClBwsC,EAAI,CAAC,EAAI5jD,EAAKxE,GAAG,EACjBooD,EAAI,CAAC,EAAI5jD,EAAKxE,GAAG,EACjBmoD,GAAiBC,EAAKA,EAAK5+C,CAAC,EAC5BhF,EAAK0H,GAAG,EAAIk8C,EAAI,CAAC,EACjB5jD,EAAK0H,GAAG,EAAIk8C,EAAI,CAAC,CAC7B,CACA,CACI3T,EAAK,gBAAiB,EAC1B,CC3EA,IAAIl2B,GAAW,KAAK,KAChBozB,GAAU,KAAK,IACfC,GAAU,KAAK,IACf8B,GAAK,KAAK,GACd,SAAS2U,GAAK7/C,EAAG,CACb,OAAO,KAAK,KAAKA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,EAAIA,EAAE,CAAC,CAAC,CAC9C,CAEA,SAAS8/C,GAAOC,EAAG//C,EAAG,CAClB,OAAQ+/C,EAAE,CAAC,EAAI//C,EAAE,CAAC,EAAI+/C,EAAE,CAAC,EAAI//C,EAAE,CAAC,IAAM6/C,GAAKE,CAAC,EAAIF,GAAK7/C,CAAC,EAC1D,CAEA,SAASggD,GAAOD,EAAG//C,EAAG,CAClB,OAAQ+/C,EAAE,CAAC,EAAI//C,EAAE,CAAC,EAAI+/C,EAAE,CAAC,EAAI//C,EAAE,CAAC,EAAI,GAAK,GACnC,KAAK,KAAK8/C,GAAOC,EAAG//C,CAAC,CAAC,CAChC,CAEA,SAASigD,GAAW/vC,EAAIC,EAAIoI,EAAIC,EAAI0nC,EAAIC,EAAIlW,EAAIC,EAAIkW,EAAQhU,EAAKH,EAAM,CACnE,IAAImB,EAAMgT,GAAUlV,GAAK,KACrBmV,EAAKjX,GAAQgE,CAAG,GAAKl9B,EAAKqI,GAAM,EAC9B4wB,GAAQiE,CAAG,GAAKj9B,EAAKqI,GAAM,EAC7B8nC,EAAK,GAAKnX,GAAQiE,CAAG,GAAKl9B,EAAKqI,GAAM,EACnC6wB,GAAQgE,CAAG,GAAKj9B,EAAKqI,GAAM,EAC7B+nC,EAAUF,EAAKA,GAAOpW,EAAKA,GAAOqW,EAAKA,GAAOpW,EAAKA,GACnDqW,EAAS,IACTtW,GAAMl0B,GAASwqC,CAAM,EACrBrW,GAAMn0B,GAASwqC,CAAM,GAEzB,IAAI3kC,GAAKskC,IAAOC,EAAK,GAAK,GACpBpqC,IAAYk0B,EAAKA,GAAOC,EAAKA,GACvBD,EAAKA,GAAOqW,EAAKA,GACjBpW,EAAKA,GAAOmW,EAAKA,KAAUpW,EAAKA,GAAOqW,EAAKA,GAC7CpW,EAAKA,GAAOmW,EAAKA,GAAI,GAAK,EACjCG,EAAM5kC,EAAIquB,EAAKqW,EAAKpW,EACpBuW,EAAM7kC,EAAI,CAACsuB,EAAKmW,EAAKpW,EACrB6B,GAAM57B,EAAKqI,GAAM,EACf6wB,GAAQgE,CAAG,EAAIoT,EACfrX,GAAQiE,CAAG,EAAIqT,EACjB1U,GAAM57B,EAAKqI,GAAM,EACf2wB,GAAQiE,CAAG,EAAIoT,EACfpX,GAAQgE,CAAG,EAAIqT,EACjBxwC,EAAQ+vC,GAAO,CAAC,EAAG,CAAC,EAAG,EAAEK,EAAKG,GAAOvW,GAAKqW,EAAKG,GAAOvW,CAAE,CAAC,EACzD6V,EAAI,EAAEM,EAAKG,GAAOvW,GAAKqW,EAAKG,GAAOvW,CAAE,EACrClqC,EAAI,EAAE,GAAKqgD,EAAKG,GAAOvW,GAAK,GAAKqW,EAAKG,GAAOvW,CAAE,EAC/C4E,EAASkR,GAAOD,EAAG//C,CAAC,EAOxB,GANI8/C,GAAOC,EAAG//C,CAAC,GAAK,KAChB8uC,EAAS5D,IAET4U,GAAOC,EAAG//C,CAAC,GAAK,IAChB8uC,EAAS,GAETA,EAAS,EAAG,CACZ,IAAI59B,EAAI,KAAK,MAAM49B,EAAS5D,GAAK,GAAG,EAAI,IACxC4D,EAAS5D,GAAK,EAAKh6B,EAAI,EAAKg6B,EACpC,CACIe,EAAK,QAAQG,EAAKN,EAAIC,EAAI9B,EAAIC,EAAIj6B,EAAO6+B,EAAQ1B,EAAK+S,CAAE,CAC5D,CACA,IAAIO,GAAa,mCACbC,GAAY,sCAChB,SAASC,GAA0B5kD,EAAM,CACrC,IAAIiwC,EAAO,IAAIP,GACf,GAAI,CAAC1vC,EACD,OAAOiwC,EAEX,IAAI4U,EAAM,EACNC,EAAM,EACNC,EAAWF,EACXG,EAAWF,EACXG,EACArW,EAAMc,GAAU,IAChBwV,EAAUllD,EAAK,MAAM0kD,EAAU,EACnC,GAAI,CAACQ,EACD,OAAOjV,EAEX,QAAS,EAAI,EAAG,EAAIiV,EAAQ,OAAQ,IAAK,CAMrC,QALIC,EAAUD,EAAQ,CAAC,EACnBE,EAASD,EAAQ,OAAO,CAAC,EACzB/U,EAAM,OACNthC,EAAIq2C,EAAQ,MAAMR,EAAS,GAAK,CAAE,EAClCU,EAAOv2C,EAAE,OACJtT,EAAI,EAAGA,EAAI6pD,EAAM7pD,IACtBsT,EAAEtT,CAAC,EAAI,WAAWsT,EAAEtT,CAAC,CAAC,EAG1B,QADI8pD,EAAM,EACHA,EAAMD,GAAM,CACf,IAAIE,EAAS,OACTC,EAAS,OACTvX,EAAK,OACLC,EAAK,OACLkD,EAAM,OACN8S,EAAK,OACLC,EAAK,OACLjwC,EAAK2wC,EACL1wC,EAAK2wC,EACL5mD,EAAM,OACNunD,EAAW,OACf,OAAQL,EAAM,CACV,IAAK,IACDP,GAAO/1C,EAAEw2C,GAAK,EACdR,GAAOh2C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1B,MACJ,IAAK,IACDD,EAAM/1C,EAAEw2C,GAAK,EACbR,EAAMh2C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1B,MACJ,IAAK,IACDD,GAAO/1C,EAAEw2C,GAAK,EACdR,GAAOh2C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1BC,EAAWF,EACXG,EAAWF,EACXM,EAAS,IACT,MACJ,IAAK,IACDP,EAAM/1C,EAAEw2C,GAAK,EACbR,EAAMh2C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1BC,EAAWF,EACXG,EAAWF,EACXM,EAAS,IACT,MACJ,IAAK,IACDP,GAAO/1C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1B,MACJ,IAAK,IACDD,EAAM/1C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1B,MACJ,IAAK,IACDA,GAAOh2C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1B,MACJ,IAAK,IACDA,EAAMh2C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKyU,EAAKC,CAAG,EAC1B,MACJ,IAAK,IACD1U,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKthC,EAAEw2C,GAAK,EAAGx2C,EAAEw2C,GAAK,EAAGx2C,EAAEw2C,GAAK,EAAGx2C,EAAEw2C,GAAK,EAAGx2C,EAAEw2C,GAAK,EAAGx2C,EAAEw2C,GAAK,CAAC,EAC5ET,EAAM/1C,EAAEw2C,EAAM,CAAC,EACfR,EAAMh2C,EAAEw2C,EAAM,CAAC,EACf,MACJ,IAAK,IACDlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKthC,EAAEw2C,GAAK,EAAIT,EAAK/1C,EAAEw2C,GAAK,EAAIR,EAAKh2C,EAAEw2C,GAAK,EAAIT,EAAK/1C,EAAEw2C,GAAK,EAAIR,EAAKh2C,EAAEw2C,GAAK,EAAIT,EAAK/1C,EAAEw2C,GAAK,EAAIR,CAAG,EAChHD,GAAO/1C,EAAEw2C,EAAM,CAAC,EAChBR,GAAOh2C,EAAEw2C,EAAM,CAAC,EAChB,MACJ,IAAK,IACDC,EAASV,EACTW,EAASV,EACT5mD,EAAM+xC,EAAK,IAAK,EAChBwV,EAAWxV,EAAK,KACZgV,IAAYrW,EAAI,IAChB2W,GAAUV,EAAMY,EAASvnD,EAAM,CAAC,EAChCsnD,GAAUV,EAAMW,EAASvnD,EAAM,CAAC,GAEpCkyC,EAAMxB,EAAI,EACV16B,EAAKpF,EAAEw2C,GAAK,EACZnxC,EAAKrF,EAAEw2C,GAAK,EACZT,EAAM/1C,EAAEw2C,GAAK,EACbR,EAAMh2C,EAAEw2C,GAAK,EACbrV,EAAK,QAAQG,EAAKmV,EAAQC,EAAQtxC,EAAIC,EAAI0wC,EAAKC,CAAG,EAClD,MACJ,IAAK,IACDS,EAASV,EACTW,EAASV,EACT5mD,EAAM+xC,EAAK,IAAK,EAChBwV,EAAWxV,EAAK,KACZgV,IAAYrW,EAAI,IAChB2W,GAAUV,EAAMY,EAASvnD,EAAM,CAAC,EAChCsnD,GAAUV,EAAMW,EAASvnD,EAAM,CAAC,GAEpCkyC,EAAMxB,EAAI,EACV16B,EAAK2wC,EAAM/1C,EAAEw2C,GAAK,EAClBnxC,EAAK2wC,EAAMh2C,EAAEw2C,GAAK,EAClBT,GAAO/1C,EAAEw2C,GAAK,EACdR,GAAOh2C,EAAEw2C,GAAK,EACdrV,EAAK,QAAQG,EAAKmV,EAAQC,EAAQtxC,EAAIC,EAAI0wC,EAAKC,CAAG,EAClD,MACJ,IAAK,IACD5wC,EAAKpF,EAAEw2C,GAAK,EACZnxC,EAAKrF,EAAEw2C,GAAK,EACZT,EAAM/1C,EAAEw2C,GAAK,EACbR,EAAMh2C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKl8B,EAAIC,EAAI0wC,EAAKC,CAAG,EAClC,MACJ,IAAK,IACD5wC,EAAKpF,EAAEw2C,GAAK,EAAIT,EAChB1wC,EAAKrF,EAAEw2C,GAAK,EAAIR,EAChBD,GAAO/1C,EAAEw2C,GAAK,EACdR,GAAOh2C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKl8B,EAAIC,EAAI0wC,EAAKC,CAAG,EAClC,MACJ,IAAK,IACDS,EAASV,EACTW,EAASV,EACT5mD,EAAM+xC,EAAK,IAAK,EAChBwV,EAAWxV,EAAK,KACZgV,IAAYrW,EAAI,IAChB2W,GAAUV,EAAMY,EAASvnD,EAAM,CAAC,EAChCsnD,GAAUV,EAAMW,EAASvnD,EAAM,CAAC,GAEpC2mD,EAAM/1C,EAAEw2C,GAAK,EACbR,EAAMh2C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKmV,EAAQC,EAAQX,EAAKC,CAAG,EAC1C,MACJ,IAAK,IACDS,EAASV,EACTW,EAASV,EACT5mD,EAAM+xC,EAAK,IAAK,EAChBwV,EAAWxV,EAAK,KACZgV,IAAYrW,EAAI,IAChB2W,GAAUV,EAAMY,EAASvnD,EAAM,CAAC,EAChCsnD,GAAUV,EAAMW,EAASvnD,EAAM,CAAC,GAEpC2mD,GAAO/1C,EAAEw2C,GAAK,EACdR,GAAOh2C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,EAAKmV,EAAQC,EAAQX,EAAKC,CAAG,EAC1C,MACJ,IAAK,IACD7W,EAAKn/B,EAAEw2C,GAAK,EACZpX,EAAKp/B,EAAEw2C,GAAK,EACZlU,EAAMtiC,EAAEw2C,GAAK,EACbpB,EAAKp1C,EAAEw2C,GAAK,EACZnB,EAAKr1C,EAAEw2C,GAAK,EACZpxC,EAAK2wC,EAAK1wC,EAAK2wC,EACfD,EAAM/1C,EAAEw2C,GAAK,EACbR,EAAMh2C,EAAEw2C,GAAK,EACblV,EAAMxB,EAAI,EACVqV,GAAW/vC,EAAIC,EAAI0wC,EAAKC,EAAKZ,EAAIC,EAAIlW,EAAIC,EAAIkD,EAAKhB,EAAKH,CAAI,EAC3D,MACJ,IAAK,IACDhC,EAAKn/B,EAAEw2C,GAAK,EACZpX,EAAKp/B,EAAEw2C,GAAK,EACZlU,EAAMtiC,EAAEw2C,GAAK,EACbpB,EAAKp1C,EAAEw2C,GAAK,EACZnB,EAAKr1C,EAAEw2C,GAAK,EACZpxC,EAAK2wC,EAAK1wC,EAAK2wC,EACfD,GAAO/1C,EAAEw2C,GAAK,EACdR,GAAOh2C,EAAEw2C,GAAK,EACdlV,EAAMxB,EAAI,EACVqV,GAAW/vC,EAAIC,EAAI0wC,EAAKC,EAAKZ,EAAIC,EAAIlW,EAAIC,EAAIkD,EAAKhB,EAAKH,CAAI,EAC3D,KACpB,CACA,EACYmV,IAAW,KAAOA,IAAW,OAC7BhV,EAAMxB,EAAI,EACVqB,EAAK,QAAQG,CAAG,EAChByU,EAAME,EACND,EAAME,GAEVC,EAAU7U,CAClB,CACI,OAAAH,EAAK,SAAU,EACRA,CACX,CACA,IAAIyV,GAAW,SAAU5zC,EAAQ,CAC7BC,EAAU2zC,EAAS5zC,CAAM,EACzB,SAAS4zC,GAAU,CACf,OAAO5zC,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IACnE,CACI,OAAA4zC,EAAQ,UAAU,eAAiB,SAAU1gD,EAAG,CAAG,EAC5C0gD,CACX,EAAE9R,EAAI,EACN,SAAS+R,GAAY1V,EAAM,CACvB,OAAOA,EAAK,SAAW,IAC3B,CACA,SAAS2V,GAAkB5jD,EAAKwc,EAAM,CAClC,IAAIg1B,EAAYoR,GAA0B5iD,CAAG,EACzC6jD,EAAY/mD,EAAO,CAAE,EAAE0f,CAAI,EAC/B,OAAAqnC,EAAU,UAAY,SAAU5V,EAAM,CAClC,GAAI0V,GAAY1V,CAAI,EAAG,CACnBA,EAAK,QAAQuD,EAAU,IAAI,EAC3B,IAAI7sC,EAAMspC,EAAK,WAAY,EACvBtpC,GACAspC,EAAK,YAAYtpC,EAAK,CAAC,CAEvC,KACa,CACD,IAAIA,EAAMspC,EACVuD,EAAU,YAAY7sC,EAAK,CAAC,CACxC,CACK,EACDk/C,EAAU,eAAiB,SAAU7gD,EAAG,CACpCq+C,GAAc7P,EAAWxuC,CAAC,EAC1B,KAAK,WAAY,CACpB,EACM6gD,CACX,CACO,SAASC,GAAiB9jD,EAAKwc,EAAM,CACxC,OAAO,IAAIknC,GAAQE,GAAkB5jD,EAAKwc,CAAI,CAAC,CACnD,CACO,SAASunC,GAAiB/jD,EAAKgkD,EAAa,CAC/C,IAAIH,EAAYD,GAAkB5jD,EAAKgkD,CAAW,EAC9C5Q,EAAO,SAAUtjC,EAAQ,CACzBC,EAAUqjC,EAAKtjC,CAAM,EACrB,SAASsjC,EAAI52B,EAAM,CACf,IAAIxM,EAAQF,EAAO,KAAK,KAAM0M,CAAI,GAAK,KACvC,OAAAxM,EAAM,eAAiB6zC,EAAU,eACjC7zC,EAAM,UAAY6zC,EAAU,UACrB7zC,CACnB,CACQ,OAAOojC,CACV,EAACsQ,EAAO,EACT,OAAOtQ,CACX,CACO,SAAS6Q,GAAUC,EAAS1nC,EAAM,CAGrC,QAFI2nC,EAAW,CAAE,EACbjoD,EAAMgoD,EAAQ,OACT1qD,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CAC1B,IAAI4qD,EAASF,EAAQ1qD,CAAC,EACtB2qD,EAAS,KAAKC,EAAO,oBAAoB,EAAI,CAAC,CACtD,CACI,IAAIC,EAAa,IAAIzS,GAAKp1B,CAAI,EAC9B,OAAA6nC,EAAW,gBAAiB,EAC5BA,EAAW,UAAY,SAAUpW,EAAM,CACnC,GAAI0V,GAAY1V,CAAI,EAAG,CACnBA,EAAK,WAAWkW,CAAQ,EACxB,IAAIx/C,EAAMspC,EAAK,WAAY,EACvBtpC,GACAspC,EAAK,YAAYtpC,EAAK,CAAC,CAEvC,CACK,EACM0/C,CACX,CCxVA,IAAIC,GAAe,UAAY,CAC3B,SAASA,GAAc,CACnB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,EAAI,CACjB,CACI,OAAOA,CACX,IAEIC,GAAU,SAAUz0C,EAAQ,CAC5BC,EAAUw0C,EAAQz0C,CAAM,EACxB,SAASy0C,EAAO/nC,EAAM,CAClB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAA+nC,EAAO,UAAU,gBAAkB,UAAY,CAC3C,OAAO,IAAID,EACd,EACDC,EAAO,UAAU,UAAY,SAAU5/C,EAAKmuC,EAAO,CAC/CnuC,EAAI,OAAOmuC,EAAM,GAAKA,EAAM,EAAGA,EAAM,EAAE,EACvCnuC,EAAI,IAAImuC,EAAM,GAAIA,EAAM,GAAIA,EAAM,EAAG,EAAG,KAAK,GAAK,CAAC,CACtD,EACMyR,CACX,EAAE3S,EAAI,EAEN2S,GAAO,UAAU,KAAO,SCxBxB,IAAIC,GAAgB,UAAY,CAC5B,SAASA,GAAe,CACpB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,CAClB,CACI,OAAOA,CACX,IAEIC,GAAW,SAAU30C,EAAQ,CAC7BC,EAAU00C,EAAS30C,CAAM,EACzB,SAAS20C,EAAQjoC,EAAM,CACnB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAAioC,EAAQ,UAAU,gBAAkB,UAAY,CAC5C,OAAO,IAAID,EACd,EACDC,EAAQ,UAAU,UAAY,SAAU9/C,EAAKmuC,EAAO,CAChD,IAAI19B,EAAI,SACJtT,EAAIgxC,EAAM,GACV/wC,EAAI+wC,EAAM,GACVhyC,EAAIgyC,EAAM,GACV/xC,EAAI+xC,EAAM,GACVnnB,EAAK7qB,EAAIsU,EACTwW,EAAK7qB,EAAIqU,EACbzQ,EAAI,OAAO7C,EAAIhB,EAAGiB,CAAC,EACnB4C,EAAI,cAAc7C,EAAIhB,EAAGiB,EAAI6pB,EAAI9pB,EAAI6pB,EAAI5pB,EAAIhB,EAAGe,EAAGC,EAAIhB,CAAC,EACxD4D,EAAI,cAAc7C,EAAI6pB,EAAI5pB,EAAIhB,EAAGe,EAAIhB,EAAGiB,EAAI6pB,EAAI9pB,EAAIhB,EAAGiB,CAAC,EACxD4C,EAAI,cAAc7C,EAAIhB,EAAGiB,EAAI6pB,EAAI9pB,EAAI6pB,EAAI5pB,EAAIhB,EAAGe,EAAGC,EAAIhB,CAAC,EACxD4D,EAAI,cAAc7C,EAAI6pB,EAAI5pB,EAAIhB,EAAGe,EAAIhB,EAAGiB,EAAI6pB,EAAI9pB,EAAIhB,EAAGiB,CAAC,EACxD4C,EAAI,UAAW,CAClB,EACM8/C,CACX,EAAE7S,EAAI,EACN6S,GAAQ,UAAU,KAAO,UCpCzB,IAAIvX,GAAK,KAAK,GACVn7B,GAAMm7B,GAAK,EACX/B,GAAU,KAAK,IACfC,GAAU,KAAK,IACfsZ,GAAW,KAAK,KAChBC,GAAY,KAAK,MACjB1X,GAAU,KAAK,IACfl1B,GAAW,KAAK,KAChB1K,GAAU,KAAK,IACfD,GAAU,KAAK,IACf9J,GAAI,KACR,SAASshD,GAAUvqC,EAAIC,EAAIpI,EAAIC,EAAIoI,EAAIC,EAAIC,EAAIC,EAAI,CAC/C,IAAImqC,EAAO3yC,EAAKmI,EACZyqC,EAAO3yC,EAAKmI,EACZyqC,EAAOtqC,EAAKF,EACZyqC,EAAOtqC,EAAKF,EACZtN,EAAI83C,EAAOH,EAAOE,EAAOD,EAC7B,GAAI,EAAA53C,EAAIA,EAAI5J,IAGZ,OAAA4J,GAAK63C,GAAQzqC,EAAKE,GAAMwqC,GAAQ3qC,EAAKE,IAAOrN,EACrC,CAACmN,EAAKnN,EAAI23C,EAAMvqC,EAAKpN,EAAI43C,CAAI,CACxC,CACA,SAASG,GAAsB5qC,EAAIC,EAAIpI,EAAIC,EAAI67B,EAAQkX,EAAIC,EAAW,CAClE,IAAIC,EAAM/qC,EAAKnI,EACXmzC,EAAM/qC,EAAKnI,EACXiB,GAAM+xC,EAAYD,EAAK,CAACA,GAAMntC,GAASqtC,EAAMA,EAAMC,EAAMA,CAAG,EAC5D15B,EAAKvY,EAAKiyC,EACVz5B,EAAK,CAACxY,EAAKgyC,EACXE,EAAMjrC,EAAKsR,EACX45B,EAAMjrC,EAAKsR,EACX45B,EAAMtzC,EAAKyZ,EACX85B,EAAMtzC,EAAKyZ,EACX85B,GAAOJ,EAAME,GAAO,EACpBG,GAAOJ,EAAME,GAAO,EACpBjiD,EAAKgiD,EAAMF,EACX7hD,EAAKgiD,EAAMF,EACXt2C,EAAKzL,EAAKA,EAAKC,EAAKA,EACpBuO,EAAIg8B,EAASkX,EACb1iD,EAAI8iD,EAAMG,EAAMD,EAAMD,EACtB7iD,GAAKe,EAAK,EAAI,GAAK,GAAKsU,GAAS1K,GAAQ,EAAG2E,EAAIA,EAAI/C,EAAKzM,EAAIA,CAAC,CAAC,EAC/DojD,GAAOpjD,EAAIiB,EAAKD,EAAKd,GAAKuM,EAC1B42C,GAAO,CAACrjD,EAAIgB,EAAKC,EAAKf,GAAKuM,EAC3B62C,GAAOtjD,EAAIiB,EAAKD,EAAKd,GAAKuM,EAC1B82C,GAAO,CAACvjD,EAAIgB,EAAKC,EAAKf,GAAKuM,EAC3B+2C,EAAMJ,EAAMF,EACZO,EAAMJ,EAAMF,EACZO,EAAMJ,EAAMJ,EACZS,EAAMJ,EAAMJ,EAChB,OAAIK,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,EAAMC,EAAMA,IAC1CP,EAAME,EACND,EAAME,GAEH,CACH,GAAIH,EACJ,GAAIC,EACJ,GAAI,CAACl6B,EACL,GAAI,CAACC,EACL,GAAIg6B,GAAO5X,EAASh8B,EAAI,GACxB,GAAI6zC,GAAO7X,EAASh8B,EAAI,EAC3B,CACL,CACA,SAASo0C,GAAsBlB,EAAI,CAC/B,IAAIhnD,EACJ,GAAItB,EAAQsoD,CAAE,EAAG,CACb,IAAIhpD,EAAMgpD,EAAG,OACb,GAAI,CAAChpD,EACD,OAAOgpD,EAEPhpD,IAAQ,EACRgC,EAAM,CAACgnD,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAG,EAAG,CAAC,EAEpBhpD,IAAQ,EACbgC,EAAM,CAACgnD,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAGA,EAAG,CAAC,EAAGA,EAAG,CAAC,CAAC,EAE5BhpD,IAAQ,EACbgC,EAAMgnD,EAAG,OAAOA,EAAG,CAAC,CAAC,EAGrBhnD,EAAMgnD,CAElB,MAEQhnD,EAAM,CAACgnD,EAAIA,EAAIA,EAAIA,CAAE,EAEzB,OAAOhnD,CACX,CACO,SAAS+1C,GAAUtvC,EAAKmuC,EAAO,CAClC,IAAIzU,EACA2P,EAAS3gC,GAAQylC,EAAM,EAAG,CAAC,EAC3BuT,EAAch5C,GAAQylC,EAAM,IAAM,EAAG,CAAC,EACtCwT,EAAYtY,EAAS,EACrBuY,EAAiBF,EAAc,EACnC,GAAI,GAACC,GAAa,CAACC,GAOnB,IAJKD,IACDtY,EAASqY,EACTA,EAAc,GAEdA,EAAcrY,EAAQ,CACtB,IAAI75B,EAAM65B,EACVA,EAASqY,EACTA,EAAclyC,CACtB,CACI,IAAIg4B,EAAa2G,EAAM,WAAY1G,EAAW0G,EAAM,SACpD,GAAI,QAAM3G,CAAU,GAAK,MAAMC,CAAQ,GAGvC,KAAI0B,EAAKgF,EAAM,GAAI/E,EAAK+E,EAAM,GAC1BqS,EAAY,CAAC,CAACrS,EAAM,UACpB0T,EAAMvZ,GAAQb,EAAWD,CAAU,EACnCsa,EAAMD,EAAMz0C,IAAOy0C,EAAMz0C,GAE7B,GADA00C,EAAMnjD,KAAMkjD,EAAMC,GACd,EAAEzY,EAAS1qC,IACXqB,EAAI,OAAOmpC,EAAIC,CAAE,UAEZyY,EAAMz0C,GAAMzO,GACjBqB,EAAI,OAAOmpC,EAAKE,EAAS5C,GAAQe,CAAU,EAAG4B,EAAKC,EAAS7C,GAAQgB,CAAU,CAAC,EAC/ExnC,EAAI,IAAImpC,EAAIC,EAAIC,EAAQ7B,EAAYC,EAAU,CAAC+Y,CAAS,EACpDkB,EAAc/iD,KACdqB,EAAI,OAAOmpC,EAAKuY,EAAcjb,GAAQgB,CAAQ,EAAG2B,EAAKsY,EAAclb,GAAQiB,CAAQ,CAAC,EACrFznC,EAAI,IAAImpC,EAAIC,EAAIsY,EAAaja,EAAUD,EAAYgZ,CAAS,OAG/D,CACD,IAAIuB,EAAW,OACXC,EAAS,OACTC,EAAW,OACXC,EAAS,OACTC,EAAO,OACPC,EAAO,OACPC,EAAO,OACPC,EAAO,OACPC,EAAS,OACTC,EAAS,OACTC,EAAgB,OAChBC,EAAgB,OAChBC,EAAM,OACNC,EAAM,OACNC,EAAO,OACPC,EAAO,OACPC,EAAM1Z,EAAS5C,GAAQe,CAAU,EACjCwb,EAAM3Z,EAAS7C,GAAQgB,CAAU,EACjCyb,EAAOvB,EAAcjb,GAAQgB,CAAQ,EACrCyb,EAAOxB,EAAclb,GAAQiB,CAAQ,EACrC0b,EAAStB,EAAMljD,GACnB,GAAIwkD,EAAQ,CACR,IAAIC,EAAejV,EAAM,aACrBiV,IACA1pB,EAAK+nB,GAAsB2B,CAAY,EAAGrB,EAAWroB,EAAG,CAAC,EAAGsoB,EAAStoB,EAAG,CAAC,EAAGuoB,EAAWvoB,EAAG,CAAC,EAAGwoB,EAASxoB,EAAG,CAAC,GAE/G,IAAI2pB,GAAS/a,GAAQe,EAASqY,CAAW,EAAI,EAO7C,GANAS,EAAO15C,GAAQ46C,GAAQpB,CAAQ,EAC/BG,EAAO35C,GAAQ46C,GAAQnB,CAAM,EAC7BG,EAAO55C,GAAQ46C,GAAQtB,CAAQ,EAC/BO,EAAO75C,GAAQ46C,GAAQrB,CAAM,EAC7BS,EAAgBF,EAAS75C,GAAQy5C,EAAMC,CAAI,EAC3CM,EAAgBF,EAAS95C,GAAQ25C,EAAMC,CAAI,GACvCC,EAAS5jD,IAAK6jD,EAAS7jD,MACvBgkD,EAAMtZ,EAAS5C,GAAQgB,CAAQ,EAC/Bmb,EAAMvZ,EAAS7C,GAAQiB,CAAQ,EAC/Bob,EAAOnB,EAAcjb,GAAQe,CAAU,EACvCsb,EAAOpB,EAAclb,GAAQgB,CAAU,EACnCqa,EAAMtZ,IAAI,CACV,IAAI+a,GAAOrD,GAAU8C,EAAKC,EAAKH,EAAMC,EAAMH,EAAKC,EAAKK,EAAMC,CAAI,EAC/D,GAAII,GAAM,CACN,IAAI5tC,GAAKqtC,EAAMO,GAAK,CAAC,EACjB3tC,GAAKqtC,EAAMM,GAAK,CAAC,EACjB/1C,GAAKo1C,EAAMW,GAAK,CAAC,EACjB91C,GAAKo1C,EAAMU,GAAK,CAAC,EACjBnnD,GAAI,EAAIqqC,GAAQuZ,IAAUrqC,GAAKnI,GAAKoI,GAAKnI,KAAO4F,GAASsC,GAAKA,GAAKC,GAAKA,EAAE,EAAIvC,GAAS7F,GAAKA,GAAKC,GAAKA,EAAE,EAAE,EAAI,CAAC,EAC/GpR,GAAIgX,GAASkwC,GAAK,CAAC,EAAIA,GAAK,CAAC,EAAIA,GAAK,CAAC,EAAIA,GAAK,CAAC,CAAC,EACtDb,EAAgBh6C,GAAQ85C,GAASlZ,EAASjtC,KAAMD,GAAI,EAAE,EACtDumD,EAAgBj6C,GAAQ+5C,GAASd,EAActlD,KAAMD,GAAI,EAAE,CACnF,CACA,CAEA,CACQ,GAAI,CAACgnD,EACDnjD,EAAI,OAAOmpC,EAAK4Z,EAAK3Z,EAAK4Z,CAAG,UAExBP,EAAgB9jD,GAAG,CACxB,IAAI4kD,GAAU96C,GAAQw5C,EAAUQ,CAAa,EACzCe,GAAQ/6C,GAAQy5C,EAAQO,CAAa,EACrCgB,EAAMnD,GAAsBuC,EAAMC,EAAMC,EAAKC,EAAK3Z,EAAQka,GAAS/C,CAAS,EAC5EkD,GAAMpD,GAAsBqC,EAAKC,EAAKK,EAAMC,EAAM7Z,EAAQma,GAAOhD,CAAS,EAC9ExgD,EAAI,OAAOmpC,EAAKsa,EAAI,GAAKA,EAAI,GAAIra,EAAKqa,EAAI,GAAKA,EAAI,EAAE,EACjDhB,EAAgBF,GAAUgB,KAAYC,GACtCxjD,EAAI,IAAImpC,EAAKsa,EAAI,GAAIra,EAAKqa,EAAI,GAAIhB,EAAezC,GAAUyD,EAAI,GAAIA,EAAI,EAAE,EAAGzD,GAAU0D,GAAI,GAAIA,GAAI,EAAE,EAAG,CAAClD,CAAS,GAGjH+C,GAAU,GAAKvjD,EAAI,IAAImpC,EAAKsa,EAAI,GAAIra,EAAKqa,EAAI,GAAIF,GAASvD,GAAUyD,EAAI,GAAIA,EAAI,EAAE,EAAGzD,GAAUyD,EAAI,GAAIA,EAAI,EAAE,EAAG,CAACjD,CAAS,EAC1HxgD,EAAI,IAAImpC,EAAIC,EAAIC,EAAQ2W,GAAUyD,EAAI,GAAKA,EAAI,GAAIA,EAAI,GAAKA,EAAI,EAAE,EAAGzD,GAAU0D,GAAI,GAAKA,GAAI,GAAIA,GAAI,GAAKA,GAAI,EAAE,EAAG,CAAClD,CAAS,EAC5HgD,GAAQ,GAAKxjD,EAAI,IAAImpC,EAAKua,GAAI,GAAIta,EAAKsa,GAAI,GAAIF,GAAOxD,GAAU0D,GAAI,GAAIA,GAAI,EAAE,EAAG1D,GAAU0D,GAAI,GAAIA,GAAI,EAAE,EAAG,CAAClD,CAAS,EAEtI,MAEYxgD,EAAI,OAAOmpC,EAAK4Z,EAAK3Z,EAAK4Z,CAAG,EAC7BhjD,EAAI,IAAImpC,EAAIC,EAAIC,EAAQ7B,EAAYC,EAAU,CAAC+Y,CAAS,EAE5D,GAAI,EAAEkB,EAAc/iD,KAAM,CAACwkD,EACvBnjD,EAAI,OAAOmpC,EAAK8Z,EAAM7Z,EAAK8Z,CAAI,UAE1BR,EAAgB/jD,GAAG,CACxB,IAAI4kD,GAAU96C,GAAQs5C,EAAUW,CAAa,EACzCc,GAAQ/6C,GAAQu5C,EAAQU,CAAa,EACrCe,EAAMnD,GAAsB2C,EAAMC,EAAMP,EAAKC,EAAKlB,EAAa,CAAC8B,GAAOhD,CAAS,EAChFkD,GAAMpD,GAAsByC,EAAKC,EAAKH,EAAMC,EAAMpB,EAAa,CAAC6B,GAAS/C,CAAS,EACtFxgD,EAAI,OAAOmpC,EAAKsa,EAAI,GAAKA,EAAI,GAAIra,EAAKqa,EAAI,GAAKA,EAAI,EAAE,EACjDf,EAAgBF,GAAUe,KAAYC,GACtCxjD,EAAI,IAAImpC,EAAKsa,EAAI,GAAIra,EAAKqa,EAAI,GAAIf,EAAe1C,GAAUyD,EAAI,GAAIA,EAAI,EAAE,EAAGzD,GAAU0D,GAAI,GAAIA,GAAI,EAAE,EAAG,CAAClD,CAAS,GAGjHgD,GAAQ,GAAKxjD,EAAI,IAAImpC,EAAKsa,EAAI,GAAIra,EAAKqa,EAAI,GAAID,GAAOxD,GAAUyD,EAAI,GAAIA,EAAI,EAAE,EAAGzD,GAAUyD,EAAI,GAAIA,EAAI,EAAE,EAAG,CAACjD,CAAS,EACtHxgD,EAAI,IAAImpC,EAAIC,EAAIsY,EAAa1B,GAAUyD,EAAI,GAAKA,EAAI,GAAIA,EAAI,GAAKA,EAAI,EAAE,EAAGzD,GAAU0D,GAAI,GAAKA,GAAI,GAAIA,GAAI,GAAKA,GAAI,EAAE,EAAGlD,CAAS,EAChI+C,GAAU,GAAKvjD,EAAI,IAAImpC,EAAKua,GAAI,GAAIta,EAAKsa,GAAI,GAAIH,GAASvD,GAAU0D,GAAI,GAAIA,GAAI,EAAE,EAAG1D,GAAU0D,GAAI,GAAIA,GAAI,EAAE,EAAG,CAAClD,CAAS,EAE1I,MAEYxgD,EAAI,OAAOmpC,EAAK8Z,EAAM7Z,EAAK8Z,CAAI,EAC/BljD,EAAI,IAAImpC,EAAIC,EAAIsY,EAAaja,EAAUD,EAAYgZ,CAAS,CAExE,CACIxgD,EAAI,UAAW,GACnB,CC/NA,IAAI2jD,GAAe,UAAY,CAC3B,SAASA,GAAc,CACnB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,EAAI,EACT,KAAK,WAAa,EAClB,KAAK,SAAW,KAAK,GAAK,EAC1B,KAAK,UAAY,GACjB,KAAK,aAAe,CAC5B,CACI,OAAOA,CACX,IAEIC,GAAU,SAAUz4C,EAAQ,CAC5BC,EAAUw4C,EAAQz4C,CAAM,EACxB,SAASy4C,EAAO/rC,EAAM,CAClB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAA+rC,EAAO,UAAU,gBAAkB,UAAY,CAC3C,OAAO,IAAID,EACd,EACDC,EAAO,UAAU,UAAY,SAAU5jD,EAAKmuC,EAAO,CAC/C0V,GAA4B7jD,EAAKmuC,CAAK,CACzC,EACDyV,EAAO,UAAU,WAAa,UAAY,CACtC,OAAO,KAAK,MAAM,aAAe,KAAK,MAAM,UACrC,KAAK,MAAM,IAAM,KAAK,MAAM,EACtC,EACMA,CACX,EAAE3W,EAAI,EACN2W,GAAO,UAAU,KAAO,SChCxB,IAAIE,GAAa,UAAY,CACzB,SAASA,GAAY,CACjB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,EAAI,EACT,KAAK,GAAK,CAClB,CACI,OAAOA,CACX,IAEIC,GAAQ,SAAU54C,EAAQ,CAC1BC,EAAU24C,EAAM54C,CAAM,EACtB,SAAS44C,EAAKlsC,EAAM,CAChB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAAksC,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,IAAID,EACd,EACDC,EAAK,UAAU,UAAY,SAAU/jD,EAAKmuC,EAAO,CAC7C,IAAIhxC,EAAIgxC,EAAM,GACV/wC,EAAI+wC,EAAM,GACV/gC,EAAM,KAAK,GAAK,EACpBpN,EAAI,OAAO7C,EAAIgxC,EAAM,EAAG/wC,CAAC,EACzB4C,EAAI,IAAI7C,EAAGC,EAAG+wC,EAAM,EAAG,EAAG/gC,EAAK,EAAK,EACpCpN,EAAI,OAAO7C,EAAIgxC,EAAM,GAAI/wC,CAAC,EAC1B4C,EAAI,IAAI7C,EAAGC,EAAG+wC,EAAM,GAAI,EAAG/gC,EAAK,EAAI,CACvC,EACM22C,CACX,EAAE9W,EAAI,EACN8W,GAAK,UAAU,KAAO,OC9BP,SAASC,GAAa1sC,EAAQ2sC,EAAQC,EAAQC,EAAY,CACrE,IAAIC,EAAM,CAAE,EACR/mD,EAAI,CAAE,EACNG,EAAK,CAAE,EACPC,EAAK,CAAE,EACP4mD,EACAC,EACAhmD,EACAC,EACJ,GAAI4lD,EAAY,CACZ7lD,EAAM,CAAC,IAAU,GAAQ,EACzBC,EAAM,CAAC,KAAW,IAAS,EAC3B,QAAS1J,EAAI,EAAG0C,EAAM+f,EAAO,OAAQziB,EAAI0C,EAAK1C,IAC1C0vD,GAAMjmD,EAAKA,EAAKgZ,EAAOziB,CAAC,CAAC,EACzB2vD,GAAMjmD,EAAKA,EAAK+Y,EAAOziB,CAAC,CAAC,EAE7B0vD,GAAMjmD,EAAKA,EAAK6lD,EAAW,CAAC,CAAC,EAC7BK,GAAMjmD,EAAKA,EAAK4lD,EAAW,CAAC,CAAC,CACrC,CACI,QAAStvD,EAAI,EAAG0C,EAAM+f,EAAO,OAAQziB,EAAI0C,EAAK1C,IAAK,CAC/C,IAAI4vD,EAAQntC,EAAOziB,CAAC,EACpB,GAAIqvD,EACAG,EAAY/sC,EAAOziB,EAAIA,EAAI,EAAI0C,EAAM,CAAC,EACtC+sD,EAAYhtC,GAAQziB,EAAI,GAAK0C,CAAG,UAG5B1C,IAAM,GAAKA,IAAM0C,EAAM,EAAG,CAC1B6sD,EAAI,KAAKM,GAAQptC,EAAOziB,CAAC,CAAC,CAAC,EAC3B,QAChB,MAEgBwvD,EAAY/sC,EAAOziB,EAAI,CAAC,EACxByvD,EAAYhtC,EAAOziB,EAAI,CAAC,EAGhC8vD,GAAMtnD,EAAGinD,EAAWD,CAAS,EAC7BO,GAAQvnD,EAAGA,EAAG4mD,CAAM,EACpB,IAAI75C,EAAKy6C,GAAWJ,EAAOJ,CAAS,EAChCh6C,EAAKw6C,GAAWJ,EAAOH,CAAS,EAChCxjD,EAAMsJ,EAAKC,EACXvJ,IAAQ,IACRsJ,GAAMtJ,EACNuJ,GAAMvJ,GAEV8jD,GAAQpnD,EAAIH,EAAG,CAAC+M,CAAE,EAClBw6C,GAAQnnD,EAAIJ,EAAGgN,CAAE,EACjB,IAAIy6C,EAAMC,GAAM,GAAIN,EAAOjnD,CAAE,EACzBwnD,EAAMD,GAAM,GAAIN,EAAOhnD,CAAE,EACzB0mD,IACAK,GAAMM,EAAKA,EAAKxmD,CAAG,EACnBimD,GAAMO,EAAKA,EAAKvmD,CAAG,EACnBimD,GAAMQ,EAAKA,EAAK1mD,CAAG,EACnBimD,GAAMS,EAAKA,EAAKzmD,CAAG,GAEvB6lD,EAAI,KAAKU,CAAG,EACZV,EAAI,KAAKY,CAAG,CACpB,CACI,OAAId,GACAE,EAAI,KAAKA,EAAI,OAAO,EAEjBA,CACX,CC7DO,SAAS9U,GAAUtvC,EAAKmuC,EAAO8W,EAAW,CAC7C,IAAIhB,EAAS9V,EAAM,OACf72B,EAAS62B,EAAM,OACnB,GAAI72B,GAAUA,EAAO,QAAU,EAAG,CAC9B,GAAI2sC,EAAQ,CACR,IAAIiB,EAAgBlB,GAAa1sC,EAAQ2sC,EAAQgB,EAAW9W,EAAM,gBAAgB,EAClFnuC,EAAI,OAAOsX,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EAErC,QADI/f,EAAM+f,EAAO,OACRziB,EAAI,EAAGA,GAAKowD,EAAY1tD,EAAMA,EAAM,GAAI1C,IAAK,CAClD,IAAImwD,EAAME,EAAcrwD,EAAI,CAAC,EACzBswD,EAAMD,EAAcrwD,EAAI,EAAI,CAAC,EAC7BsT,EAAImP,GAAQziB,EAAI,GAAK0C,CAAG,EAC5ByI,EAAI,cAAcglD,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGG,EAAI,CAAC,EAAGA,EAAI,CAAC,EAAGh9C,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,CAC5E,CACA,KACa,CACDnI,EAAI,OAAOsX,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACrC,QAASziB,EAAI,EAAGgL,EAAIyX,EAAO,OAAQziB,EAAIgL,EAAGhL,IACtCmL,EAAI,OAAOsX,EAAOziB,CAAC,EAAE,CAAC,EAAGyiB,EAAOziB,CAAC,EAAE,CAAC,CAAC,CAErD,CACQowD,GAAajlD,EAAI,UAAW,CACpC,CACA,CCrBA,IAAIolD,GAAgB,UAAY,CAC5B,SAASA,GAAe,CACpB,KAAK,OAAS,KACd,KAAK,OAAS,EACd,KAAK,iBAAmB,IAChC,CACI,OAAOA,CACX,IAEIC,GAAW,SAAUl6C,EAAQ,CAC7BC,EAAUi6C,EAASl6C,CAAM,EACzB,SAASk6C,EAAQxtC,EAAM,CACnB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAAwtC,EAAQ,UAAU,gBAAkB,UAAY,CAC5C,OAAO,IAAID,EACd,EACDC,EAAQ,UAAU,UAAY,SAAUrlD,EAAKmuC,EAAO,CAChDmX,GAAqBtlD,EAAKmuC,EAAO,EAAI,CACxC,EACMkX,CACX,EAAEpY,EAAI,EAENoY,GAAQ,UAAU,KAAO,UCvBzB,IAAIE,GAAiB,UAAY,CAC7B,SAASA,GAAgB,CACrB,KAAK,OAAS,KACd,KAAK,QAAU,EACf,KAAK,OAAS,EACd,KAAK,iBAAmB,IAChC,CACI,OAAOA,CACX,IAEIC,GAAY,SAAUr6C,EAAQ,CAC9BC,EAAUo6C,EAAUr6C,CAAM,EAC1B,SAASq6C,EAAS3tC,EAAM,CACpB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAA2tC,EAAS,UAAU,gBAAkB,UAAY,CAC7C,MAAO,CACH,OAAQ,OACR,KAAM,IACT,CACJ,EACDA,EAAS,UAAU,gBAAkB,UAAY,CAC7C,OAAO,IAAID,EACd,EACDC,EAAS,UAAU,UAAY,SAAUxlD,EAAKmuC,EAAO,CACjDmX,GAAqBtlD,EAAKmuC,EAAO,EAAK,CACzC,EACMqX,CACX,EAAEvY,EAAI,EACNuY,GAAS,UAAU,KAAO,WC7B1B,IAAIhV,GAA8B,CAAE,EAChCiV,GAAa,UAAY,CACzB,SAASA,GAAY,CACjB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,QAAU,CACvB,CACI,OAAOA,CACX,IAEIC,GAAQ,SAAUv6C,EAAQ,CAC1BC,EAAUs6C,EAAMv6C,CAAM,EACtB,SAASu6C,EAAK7tC,EAAM,CAChB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAA6tC,EAAK,UAAU,gBAAkB,UAAY,CACzC,MAAO,CACH,OAAQ,OACR,KAAM,IACT,CACJ,EACDA,EAAK,UAAU,gBAAkB,UAAY,CACzC,OAAO,IAAID,EACd,EACDC,EAAK,UAAU,UAAY,SAAU1lD,EAAKmuC,EAAO,CAC7C,IAAI5gC,EACAC,EACAoI,EACAC,EACJ,GAAI,KAAK,iBAAkB,CACvB,IAAI66B,EAAiBf,GAAqBa,GAA6BrC,EAAO,KAAK,KAAK,EACxF5gC,EAAKmjC,EAAe,GACpBljC,EAAKkjC,EAAe,GACpB96B,EAAK86B,EAAe,GACpB76B,EAAK66B,EAAe,EAChC,MAEYnjC,EAAK4gC,EAAM,GACX3gC,EAAK2gC,EAAM,GACXv4B,EAAKu4B,EAAM,GACXt4B,EAAKs4B,EAAM,GAEf,IAAIj2B,EAAUi2B,EAAM,QAChBj2B,IAAY,IAGhBlY,EAAI,OAAOuN,EAAIC,CAAE,EACb0K,EAAU,IACVtC,EAAKrI,GAAM,EAAI2K,GAAWtC,EAAKsC,EAC/BrC,EAAKrI,GAAM,EAAI0K,GAAWrC,EAAKqC,GAEnClY,EAAI,OAAO4V,EAAIC,CAAE,EACpB,EACD6vC,EAAK,UAAU,QAAU,SAAUv9C,EAAG,CAClC,IAAIgmC,EAAQ,KAAK,MACjB,MAAO,CACHA,EAAM,IAAM,EAAIhmC,GAAKgmC,EAAM,GAAKhmC,EAChCgmC,EAAM,IAAM,EAAIhmC,GAAKgmC,EAAM,GAAKhmC,CACnC,CACJ,EACMu9C,CACX,EAAEzY,EAAI,EACNyY,GAAK,UAAU,KAAO,OC/DtB,IAAInoD,GAAM,CAAE,EACRooD,GAAoB,UAAY,CAChC,SAASA,GAAmB,CACxB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,KAAO,EACZ,KAAK,KAAO,EACZ,KAAK,QAAU,CACvB,CACI,OAAOA,CACX,IAEA,SAASC,GAAazX,EAAO,EAAG0X,EAAW,CACvC,IAAIC,EAAO3X,EAAM,KACb4X,EAAO5X,EAAM,KACjB,OAAI2X,GAAQ,MAAQC,GAAQ,KACjB,EACFF,EAAY5xC,GAAoBF,IAASo6B,EAAM,GAAIA,EAAM,KAAMA,EAAM,KAAMA,EAAM,GAAI,CAAC,GACtF0X,EAAY5xC,GAAoBF,IAASo6B,EAAM,GAAIA,EAAM,KAAMA,EAAM,KAAMA,EAAM,GAAI,CAAC,CAC1F,EAGM,EACF0X,EAAYlvC,GAAwBD,IAAay3B,EAAM,GAAIA,EAAM,KAAMA,EAAM,GAAI,CAAC,GAClF0X,EAAYlvC,GAAwBD,IAAay3B,EAAM,GAAIA,EAAM,KAAMA,EAAM,GAAI,CAAC,CACtF,CAET,CACA,IAAI6X,GAAe,SAAU76C,EAAQ,CACjCC,EAAU46C,EAAa76C,CAAM,EAC7B,SAAS66C,EAAYnuC,EAAM,CACvB,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAAmuC,EAAY,UAAU,gBAAkB,UAAY,CAChD,MAAO,CACH,OAAQ,OACR,KAAM,IACT,CACJ,EACDA,EAAY,UAAU,gBAAkB,UAAY,CAChD,OAAO,IAAIL,EACd,EACDK,EAAY,UAAU,UAAY,SAAUhmD,EAAKmuC,EAAO,CACpD,IAAI5gC,EAAK4gC,EAAM,GACX3gC,EAAK2gC,EAAM,GACXv4B,EAAKu4B,EAAM,GACXt4B,EAAKs4B,EAAM,GACX8X,EAAO9X,EAAM,KACb+X,EAAO/X,EAAM,KACb2X,EAAO3X,EAAM,KACb4X,EAAO5X,EAAM,KACbj2B,EAAUi2B,EAAM,QAChBj2B,IAAY,IAGhBlY,EAAI,OAAOuN,EAAIC,CAAE,EACbs4C,GAAQ,MAAQC,GAAQ,MACpB7tC,EAAU,IACVnB,GAAmBxJ,EAAI04C,EAAMrwC,EAAIsC,EAAS3a,EAAG,EAC7C0oD,EAAO1oD,GAAI,CAAC,EACZqY,EAAKrY,GAAI,CAAC,EACVwZ,GAAmBvJ,EAAI04C,EAAMrwC,EAAIqC,EAAS3a,EAAG,EAC7C2oD,EAAO3oD,GAAI,CAAC,EACZsY,EAAKtY,GAAI,CAAC,GAEdyC,EAAI,iBAAiBimD,EAAMC,EAAMtwC,EAAIC,CAAE,IAGnCqC,EAAU,IACVhD,GAAe3H,EAAI04C,EAAMH,EAAMlwC,EAAIsC,EAAS3a,EAAG,EAC/C0oD,EAAO1oD,GAAI,CAAC,EACZuoD,EAAOvoD,GAAI,CAAC,EACZqY,EAAKrY,GAAI,CAAC,EACV2X,GAAe1H,EAAI04C,EAAMH,EAAMlwC,EAAIqC,EAAS3a,EAAG,EAC/C2oD,EAAO3oD,GAAI,CAAC,EACZwoD,EAAOxoD,GAAI,CAAC,EACZsY,EAAKtY,GAAI,CAAC,GAEdyC,EAAI,cAAcimD,EAAMC,EAAMJ,EAAMC,EAAMnwC,EAAIC,CAAE,GAEvD,EACDmwC,EAAY,UAAU,QAAU,SAAUz9C,EAAG,CACzC,OAAOq9C,GAAa,KAAK,MAAOr9C,EAAG,EAAK,CAC3C,EACDy9C,EAAY,UAAU,UAAY,SAAUz9C,EAAG,CAC3C,IAAIJ,EAAIy9C,GAAa,KAAK,MAAOr9C,EAAG,EAAI,EACxC,OAAO49C,GAAeh+C,EAAGA,CAAC,CAC7B,EACM69C,CACX,EAAE/Y,EAAI,EAEN+Y,GAAY,UAAU,KAAO,eC/F7B,IAAII,GAAY,UAAY,CACxB,SAASA,GAAW,CAChB,KAAK,GAAK,EACV,KAAK,GAAK,EACV,KAAK,EAAI,EACT,KAAK,WAAa,EAClB,KAAK,SAAW,KAAK,GAAK,EAC1B,KAAK,UAAY,EACzB,CACI,OAAOA,CACX,IAEIC,GAAO,SAAUl7C,EAAQ,CACzBC,EAAUi7C,EAAKl7C,CAAM,EACrB,SAASk7C,EAAIxuC,EAAM,CACf,OAAO1M,EAAO,KAAK,KAAM0M,CAAI,GAAK,IAC1C,CACI,OAAAwuC,EAAI,UAAU,gBAAkB,UAAY,CACxC,MAAO,CACH,OAAQ,OACR,KAAM,IACT,CACJ,EACDA,EAAI,UAAU,gBAAkB,UAAY,CACxC,OAAO,IAAID,EACd,EACDC,EAAI,UAAU,UAAY,SAAUrmD,EAAKmuC,EAAO,CAC5C,IAAIhxC,EAAIgxC,EAAM,GACV/wC,EAAI+wC,EAAM,GACV9gC,EAAI,KAAK,IAAI8gC,EAAM,EAAG,CAAC,EACvB3G,EAAa2G,EAAM,WACnB1G,EAAW0G,EAAM,SACjBqS,EAAYrS,EAAM,UAClBmY,EAAQ,KAAK,IAAI9e,CAAU,EAC3B+e,EAAQ,KAAK,IAAI/e,CAAU,EAC/BxnC,EAAI,OAAOsmD,EAAQj5C,EAAIlQ,EAAGopD,EAAQl5C,EAAIjQ,CAAC,EACvC4C,EAAI,IAAI7C,EAAGC,EAAGiQ,EAAGm6B,EAAYC,EAAU,CAAC+Y,CAAS,CACpD,EACM6F,CACX,EAAEpZ,EAAI,EACNoZ,GAAI,UAAU,KAAO,MCxCrB,IAAIG,GAAgB,SAAUr7C,EAAQ,CAClCC,EAAUo7C,EAAcr7C,CAAM,EAC9B,SAASq7C,GAAe,CACpB,IAAIn7C,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO,WACNA,CACf,CACI,OAAAm7C,EAAa,UAAU,iBAAmB,UAAY,CAGlD,QAFIC,EAAQ,KAAK,MAAM,MACnBC,EAAY,KAAK,aAAc,EAC1B7xD,EAAI,EAAGA,EAAI4xD,EAAM,OAAQ5xD,IAC9B6xD,EAAYA,GAAaD,EAAM5xD,CAAC,EAAE,aAAc,EAEhD6xD,GACA,KAAK,WAAY,CAExB,EACDF,EAAa,UAAU,YAAc,UAAY,CAC7C,KAAK,iBAAkB,EAGvB,QAFIC,EAAQ,KAAK,MAAM,OAAS,CAAE,EAC9B7oD,EAAQ,KAAK,eAAgB,EACxB/I,EAAI,EAAGA,EAAI4xD,EAAM,OAAQ5xD,IACzB4xD,EAAM5xD,CAAC,EAAE,MACV4xD,EAAM5xD,CAAC,EAAE,gBAAiB,EAE9B4xD,EAAM5xD,CAAC,EAAE,KAAK,SAAS+I,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAG6oD,EAAM5xD,CAAC,EAAE,sBAAsB,CAEjF,EACD2xD,EAAa,UAAU,UAAY,SAAUxmD,EAAKmuC,EAAO,CAErD,QADIsY,EAAQtY,EAAM,OAAS,CAAE,EACpBt5C,EAAI,EAAGA,EAAI4xD,EAAM,OAAQ5xD,IAC9B4xD,EAAM5xD,CAAC,EAAE,UAAUmL,EAAKymD,EAAM5xD,CAAC,EAAE,MAAO,EAAI,CAEnD,EACD2xD,EAAa,UAAU,WAAa,UAAY,CAE5C,QADIC,EAAQ,KAAK,MAAM,OAAS,CAAE,EACzB,EAAI,EAAG,EAAIA,EAAM,OAAQ,IAC9BA,EAAM,CAAC,EAAE,YAAa,CAE7B,EACDD,EAAa,UAAU,gBAAkB,UAAY,CACjD,YAAK,iBAAiB,KAAK,IAAI,EACxBvZ,GAAK,UAAU,gBAAgB,KAAK,IAAI,CAClD,EACMuZ,CACX,EAAEvZ,EAAI,EC/CF0Z,GAAY,UAAY,CACxB,SAASA,EAASn2B,EAAY,CAC1B,KAAK,WAAaA,GAAc,CAAE,CAC1C,CACI,OAAAm2B,EAAS,UAAU,aAAe,SAAUrqD,EAAQse,EAAO,CACvD,KAAK,WAAW,KAAK,CACjB,OAAQte,EACR,MAAOse,CACnB,CAAS,CACJ,EACM+rC,CACX,ICTIC,GAAkB,SAAUz7C,EAAQ,CACpCC,EAAUw7C,EAAgBz7C,CAAM,EAChC,SAASy7C,EAAezpD,EAAGC,EAAGwY,EAAIC,EAAI2a,EAAYq2B,EAAa,CAC3D,IAAIx7C,EAAQF,EAAO,KAAK,KAAMqlB,CAAU,GAAK,KAC7C,OAAAnlB,EAAM,EAAIlO,GAAY,EACtBkO,EAAM,EAAIjO,GAAY,EACtBiO,EAAM,GAAKuK,GAAa,EACxBvK,EAAM,GAAKwK,GAAa,EACxBxK,EAAM,KAAO,SACbA,EAAM,OAASw7C,GAAe,GACvBx7C,CACf,CACI,OAAOu7C,CACX,EAAED,EAAQ,ECbNG,GAAkB,SAAU37C,EAAQ,CACpCC,EAAU07C,EAAgB37C,CAAM,EAChC,SAAS27C,EAAe3pD,EAAGC,EAAGiQ,EAAGmjB,EAAYq2B,EAAa,CACtD,IAAIx7C,EAAQF,EAAO,KAAK,KAAMqlB,CAAU,GAAK,KAC7C,OAAAnlB,EAAM,EAAIlO,GAAY,GACtBkO,EAAM,EAAIjO,GAAY,GACtBiO,EAAM,EAAIgC,GAAY,GACtBhC,EAAM,KAAO,SACbA,EAAM,OAASw7C,GAAe,GACvBx7C,CACf,CACI,OAAOy7C,CACX,EAAEH,EAAQ,ECbNI,GAAS,CAAC,EAAG,CAAC,EACdC,GAAU,CAAC,EAAG,CAAC,EACfj+C,GAAQ,IAAIhB,GACZiB,GAAQ,IAAIjB,GACZk/C,GAAwB,UAAY,CACpC,SAASA,EAAqB5jD,EAAM+jB,EAAW,CAC3C,KAAK,SAAW,CAAE,EAClB,KAAK,MAAQ,CAAE,EACf,KAAK,QAAU,CAAC,EAAG,CAAC,EACpB,QAAS,EAAI,EAAG,EAAI,EAAG,IACnB,KAAK,SAAS,CAAC,EAAI,IAAIrf,GAE3B,QAAS,EAAI,EAAG,EAAI,EAAG,IACnB,KAAK,MAAM,CAAC,EAAI,IAAIA,GAEpB1E,GACA,KAAK,iBAAiBA,EAAM+jB,CAAS,CAEjD,CACI,OAAA6/B,EAAqB,UAAU,iBAAmB,SAAU5jD,EAAM+jB,EAAW,CACzE,IAAI8/B,EAAU,KAAK,SACfC,EAAO,KAAK,MACZhqD,EAAIkG,EAAK,EACTjG,EAAIiG,EAAK,EACTuS,EAAKzY,EAAIkG,EAAK,MACdwS,EAAKzY,EAAIiG,EAAK,OAKlB,GAJA6jD,EAAQ,CAAC,EAAE,IAAI/pD,EAAGC,CAAC,EACnB8pD,EAAQ,CAAC,EAAE,IAAItxC,EAAIxY,CAAC,EACpB8pD,EAAQ,CAAC,EAAE,IAAItxC,EAAIC,CAAE,EACrBqxC,EAAQ,CAAC,EAAE,IAAI/pD,EAAG0Y,CAAE,EAChBuR,EACA,QAASvyB,EAAI,EAAGA,EAAI,EAAGA,IACnBqyD,EAAQryD,CAAC,EAAE,UAAUuyB,CAAS,EAGtCrf,GAAM,IAAIo/C,EAAK,CAAC,EAAGD,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EACzCn/C,GAAM,IAAIo/C,EAAK,CAAC,EAAGD,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EACzCC,EAAK,CAAC,EAAE,UAAW,EACnBA,EAAK,CAAC,EAAE,UAAW,EACnB,QAAStyD,EAAI,EAAGA,EAAI,EAAGA,IACnB,KAAK,QAAQA,CAAC,EAAIsyD,EAAKtyD,CAAC,EAAE,IAAIqyD,EAAQ,CAAC,CAAC,CAE/C,EACDD,EAAqB,UAAU,UAAY,SAAUj/C,EAAOwB,EAAK,CAC7D,IAAI49C,EAAa,GACbC,EAAQ,CAAC79C,EASb,OARAT,GAAM,IAAI,IAAU,GAAQ,EAC5BC,GAAM,IAAI,EAAG,CAAC,EACV,CAAC,KAAK,uBAAuB,KAAMhB,EAAOe,GAAOC,GAAOq+C,EAAO,CAAC,IAChED,EAAa,GACTC,IAIJ,CAAC,KAAK,uBAAuBr/C,EAAO,KAAMe,GAAOC,GAAOq+C,EAAO,EAAE,IACjED,EAAa,GACTC,IAIHA,GACDt/C,GAAM,KAAKyB,EAAK49C,EAAar+C,GAAQC,EAAK,EAEvCo+C,CACV,EACDH,EAAqB,UAAU,uBAAyB,SAAUvlC,EAAM1Z,EAAOe,EAAOC,EAAOq+C,EAAOllD,EAAS,CAEzG,QADIilD,EAAa,GACRvyD,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACxB,IAAIyyD,EAAO,KAAK,MAAMzyD,CAAC,EAGvB,GAFA,KAAK,qBAAqBA,EAAG6sB,EAAK,SAAUqlC,EAAM,EAClD,KAAK,qBAAqBlyD,EAAGmT,EAAM,SAAUg/C,EAAO,EAChDD,GAAO,CAAC,EAAIC,GAAQ,CAAC,GAAKD,GAAO,CAAC,EAAIC,GAAQ,CAAC,EAAG,CAElD,GADAI,EAAa,GACTC,EACA,OAAOD,EAEX,IAAIG,EAAQ,KAAK,IAAIP,GAAQ,CAAC,EAAID,GAAO,CAAC,CAAC,EACvCS,EAAQ,KAAK,IAAIT,GAAO,CAAC,EAAIC,GAAQ,CAAC,CAAC,EACvC,KAAK,IAAIO,EAAOC,CAAK,EAAIx+C,EAAM,QAC3Bu+C,EAAQC,EACRz/C,GAAM,MAAMiB,EAAOs+C,EAAM,CAACC,EAAQplD,CAAO,EAGzC4F,GAAM,MAAMiB,EAAOs+C,EAAME,EAAQrlD,CAAO,EAGhE,SACqB4G,EAAO,CACZ,IAAIw+C,EAAQ,KAAK,IAAIP,GAAQ,CAAC,EAAID,GAAO,CAAC,CAAC,EACvCS,EAAQ,KAAK,IAAIT,GAAO,CAAC,EAAIC,GAAQ,CAAC,CAAC,EACvC,KAAK,IAAIO,EAAOC,CAAK,EAAIz+C,EAAM,QAC3Bw+C,EAAQC,EACRz/C,GAAM,MAAMgB,EAAOu+C,EAAMC,EAAQplD,CAAO,EAGxC4F,GAAM,MAAMgB,EAAOu+C,EAAM,CAACE,EAAQrlD,CAAO,EAGjE,CACA,CACQ,OAAOilD,CACV,EACDH,EAAqB,UAAU,qBAAuB,SAAU/X,EAAKgY,EAAS3pD,EAAK,CAM/E,QALI+pD,EAAO,KAAK,MAAMpY,CAAG,EACrBuY,EAAS,KAAK,QACdC,EAAOR,EAAQ,CAAC,EAAE,IAAII,CAAI,EAAIG,EAAOvY,CAAG,EACxC5wC,EAAMopD,EACNnpD,EAAMmpD,EACD7yD,EAAI,EAAGA,EAAIqyD,EAAQ,OAAQryD,IAAK,CACrC,IAAI8yD,EAAST,EAAQryD,CAAC,EAAE,IAAIyyD,CAAI,EAAIG,EAAOvY,CAAG,EAC9C5wC,EAAM,KAAK,IAAIqpD,EAAQrpD,CAAG,EAC1BC,EAAM,KAAK,IAAIopD,EAAQppD,CAAG,CACtC,CACQhB,EAAI,CAAC,EAAIe,EACTf,EAAI,CAAC,EAAIgB,CACZ,EACM0oD,CACX,ICnHI5oD,GAAI,CAAE,EACNupD,GAA0B,SAAUz8C,EAAQ,CAC5CC,EAAUw8C,EAAwBz8C,CAAM,EACxC,SAASy8C,GAAyB,CAC9B,IAAIv8C,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,SAAW,GACjBA,EAAM,YAAc,GACpBA,EAAM,cAAgB,CAAE,EACxBA,EAAM,uBAAyB,CAAE,EACjCA,EAAM,QAAU,EACTA,CACf,CACI,OAAAu8C,EAAuB,UAAU,SAAW,SAAUpuD,EAAIC,EAAS,CAC/DD,EAAG,KAAKC,EAAS,IAAI,CACxB,EACDmuD,EAAuB,UAAU,SAAW,UAAY,CACpD,KAAK,MAAQ,CAAE,CAClB,EACDA,EAAuB,UAAU,UAAY,UAAY,CACrD,OAAO,KAAK,OACf,EACDA,EAAuB,UAAU,gBAAkB,UAAY,CAC3D,KAAK,QAAU,KAAK,cAAc,MACrC,EACDA,EAAuB,UAAU,iBAAmB,UAAY,CAC5D,KAAK,cAAgB,CAAE,EACvB,KAAK,uBAAyB,CAAE,EAChC,KAAK,QAAU,EACf,KAAK,WAAY,EACjB,KAAK,SAAW,EACnB,EACDA,EAAuB,UAAU,0BAA4B,UAAY,CACrE,KAAK,uBAAyB,CAAE,CACnC,EACDA,EAAuB,UAAU,eAAiB,SAAU/5C,EAAag6C,EAAe,CAChFA,EACA,KAAK,uBAAuB,KAAKh6C,CAAW,EAG5C,KAAK,cAAc,KAAKA,CAAW,EAEvC,KAAK,WAAY,CACpB,EACD+5C,EAAuB,UAAU,gBAAkB,SAAUE,EAAcD,EAAe,CACtFA,EAAgBA,GAAiB,GACjC,QAAShzD,EAAI,EAAGA,EAAIizD,EAAa,OAAQjzD,IACrC,KAAK,eAAeizD,EAAajzD,CAAC,EAAGgzD,CAAa,CAEzD,EACDD,EAAuB,UAAU,gBAAkB,UAAY,CAC3D,OAAO,KAAK,aACf,EACDA,EAAuB,UAAU,wBAA0B,UAAY,CACnE,OAAO,KAAK,sBACf,EACDA,EAAuB,UAAU,uBAAyB,SAAUpuD,EAAI,CACpE,QAAS,EAAI,KAAK,QAAS,EAAI,KAAK,cAAc,OAAQ,IACtDA,GAAMA,EAAG,KAAK,cAAc,CAAC,CAAC,EAElC,QAAS,EAAI,EAAG,EAAI,KAAK,uBAAuB,OAAQ,IACpDA,GAAMA,EAAG,KAAK,uBAAuB,CAAC,CAAC,CAE9C,EACDouD,EAAuB,UAAU,OAAS,UAAY,CAClD,KAAK,gBAAiB,EACtB,QAAS/yD,EAAI,KAAK,QAASA,EAAI,KAAK,cAAc,OAAQA,IAAK,CAC3D,IAAIgZ,EAAc,KAAK,cAAchZ,CAAC,EACtCgZ,EAAY,OAAS,KACrBA,EAAY,OAAQ,EACpBA,EAAY,OAAS,IACjC,CACQ,QAAShZ,EAAI,EAAGA,EAAI,KAAK,uBAAuB,OAAQA,IAAK,CACzD,IAAIgZ,EAAc,KAAK,uBAAuBhZ,CAAC,EAC/CgZ,EAAY,OAAS,KACrBA,EAAY,OAAQ,EACpBA,EAAY,OAAS,IACjC,CACK,EACD+5C,EAAuB,UAAU,gBAAkB,UAAY,CAC3D,GAAI,CAAC,KAAK,MAAO,CAEb,QADIvkD,EAAO,IAAI4F,GAAa,IAAU,IAAU,KAAW,IAAS,EAC3D,EAAI,EAAG,EAAI,KAAK,cAAc,OAAQ,IAAK,CAChD,IAAI4E,EAAc,KAAK,cAAc,CAAC,EAClCqiB,EAAYriB,EAAY,gBAAe,EAAG,MAAO,EACjDA,EAAY,sBACZqiB,EAAU,eAAeriB,EAAY,kBAAkBxP,EAAC,CAAC,EAE7DgF,EAAK,MAAM6sB,CAAS,CACpC,CACY,KAAK,MAAQ7sB,CACzB,CACQ,OAAO,KAAK,KACf,EACDukD,EAAuB,UAAU,QAAU,SAAUzqD,EAAGC,EAAG,CACvD,IAAI4wC,EAAW,KAAK,sBAAsB7wC,EAAGC,CAAC,EAC1CiG,EAAO,KAAK,gBAAiB,EACjC,GAAIA,EAAK,QAAQ2qC,EAAS,CAAC,EAAGA,EAAS,CAAC,CAAC,EACrC,QAASn5C,EAAI,EAAGA,EAAI,KAAK,cAAc,OAAQA,IAAK,CAChD,IAAIgZ,EAAc,KAAK,cAAchZ,CAAC,EACtC,GAAIgZ,EAAY,QAAQ1Q,EAAGC,CAAC,EACxB,MAAO,EAE3B,CAEQ,MAAO,EACV,EACMwqD,CACX,EAAEG,EAAU,EChEDC,GAAkB5uB,GAAW,EAIjC,SAAS6uB,GAAmBC,EAAeC,EAAiB/N,EAEnEgO,EAEAC,EAAkB,CAChB,IAAIC,EAIJ,GAAIH,GAAmBA,EAAgB,QAAS,CAC9C,IAAII,EAAgBJ,EAAgB,QAAQ,iBAAkB,EAC9DG,EAAmBC,GAAiBA,EAAc,SACtD,CACE,IAAIC,EAAmBL,GAAmBA,EAAgB,mBAAoB,EAC1EM,EAAWP,IAAkB,SACjC,GAAIM,EAAkB,CACpB,IAAIrnC,EAAW,OACX7I,EAAS,OACTsW,EAAQ,OACRw5B,GACFjnC,EAAWxmB,EAAUytD,EAAU,SAAU,GAAG,EAC5C9vC,EAAS3d,EAAUytD,EAAU,OAAQ,UAAU,EAC/Cx5B,EAAQ,IAERzN,EAAWgnC,EAAgB,WAAWM,EAAW,0BAA4B,mBAAmB,EAChGnwC,EAAS6vC,EAAgB,WAAWM,EAAW,wBAA0B,iBAAiB,EAC1F75B,EAAQu5B,EAAgB,WAAWM,EAAW,uBAAyB,gBAAgB,GAGrFH,IACFA,EAAiB,UAAY,OAASnnC,EAAWmnC,EAAiB,UAClEA,EAAiB,QAAU,OAAShwC,EAASgwC,EAAiB,QAC9DA,EAAiB,OAAS,OAAS15B,EAAQ05B,EAAiB,QAE1DtuD,EAAW40B,CAAK,IAClBA,EAAQA,EAAMwrB,EAAWiO,CAAgB,GAEvCruD,EAAWmnB,CAAQ,IACrBA,EAAWA,EAASi5B,CAAS,GAE/B,IAAI/oB,EAAS,CACX,SAAUlQ,GAAY,EACtB,MAAOyN,EACP,OAAQtW,CACT,EACD,OAAO+Y,CACX,KACI,QAAO,IAEX,CACA,SAASq3B,GAAkBR,EAAehmD,EAAI2e,EAAOsnC,EAAiB/N,EAAW5gD,EAAImvD,EAAQ,CAC3F,IAAIC,EAAS,GACTC,EACA7uD,EAAWogD,CAAS,GACtBuO,EAASnvD,EACTA,EAAK4gD,EACLA,EAAY,MACHtiD,EAASsiD,CAAS,IAC3B5gD,EAAK4gD,EAAU,GACfuO,EAASvO,EAAU,OACnBwO,EAASxO,EAAU,OACnByO,EAAYzO,EAAU,UACtBA,EAAYA,EAAU,WAExB,IAAI0O,EAAWZ,IAAkB,QAC5BY,GAEH5mD,EAAG,cAAc,OAAO,EAE1B,IAAI6mD,EAAkBd,GAAmBC,EAAeC,EAAiB/N,EAAW0O,EAAWD,GAAa,CAAE,EAAG,KAAMV,GAAmBA,EAAgB,wBAA0BA,EAAgB,wBAAwBjmD,EAAIk4C,CAAS,EAAI,IAAI,EACjP,GAAI2O,GAAmBA,EAAgB,SAAW,EAAG,CACnD,IAAI5nC,EAAW4nC,EAAgB,SAC3BC,EAAiBD,EAAgB,MACjCE,EAAkBF,EAAgB,OAClCG,EAAgB,CAClB,SAAU/nC,EACV,MAAO6nC,GAAkB,EACzB,OAAQC,EACR,KAAMzvD,EACN,MAAO,CAAC,CAACA,GAAM,CAAC,CAACmvD,EAGjB,WAAY,CAACG,EACb,MAAOZ,EACP,OAAQS,CACT,EACDC,EAAS1mD,EAAG,YAAY2e,EAAOqoC,CAAa,EAAIhnD,EAAG,UAAU2e,EAAOqoC,CAAa,CACrF,MACIhnD,EAAG,cAAe,EAElB,CAAC0mD,GAAU1mD,EAAG,KAAK2e,CAAK,EAExB8nC,GAAUA,EAAO,CAAC,EAClBnvD,GAAMA,EAAI,CAEd,CAiBA,SAAS2vD,GAAYjnD,EAAI2e,EAEzBsnC,EAAiB/N,EAAW5gD,EAAImvD,EAAQ,CACtCD,GAAkB,SAAUxmD,EAAI2e,EAAOsnC,EAAiB/N,EAAW5gD,EAAImvD,CAAM,CAC/E,CAUO,SAASS,GAAUlnD,EAAI2e,EAAOsnC,EAAiB/N,EAAW5gD,EAAImvD,EAAQ,CAC3ED,GAAkB,QAASxmD,EAAI2e,EAAOsnC,EAAiB/N,EAAW5gD,EAAImvD,CAAM,CAC9E,CAKO,SAASU,GAAiBnnD,EAAI,CACnC,GAAI,CAACA,EAAG,KACN,MAAO,GAET,QAASrN,EAAI,EAAGA,EAAIqN,EAAG,UAAU,OAAQrN,IAAK,CAC5C,IAAIwtB,EAAWngB,EAAG,UAAUrN,CAAC,EAC7B,GAAIwtB,EAAS,QAAU,QACrB,MAAO,EAEb,CACE,MAAO,EACT,CAIO,SAASinC,GAAcpnD,EAAI2e,EAAOsnC,EAAiB/N,EAAW5gD,EAAImvD,EAAQ,CAE3EU,GAAiBnnD,CAAE,GAGvBwmD,GAAkB,QAASxmD,EAAI2e,EAAOsnC,EAAiB/N,EAAW5gD,EAAImvD,CAAM,CAC9E,CACA,SAASY,GAAmBrnD,EAAIimD,EAAiB/N,EAAWoP,EAAM,CAChEtnD,EAAG,kBAAmB,EACtBA,EAAG,oBAAqB,EACxBonD,GAAcpnD,EAAI,CAChB,MAAO,CACL,QAAS,CACf,CACA,EAAKimD,EAAiB/N,EAAWoP,CAAI,CACrC,CACO,SAASC,GAAyBvnD,EAAIimD,EAAiB/N,EAAW,CACvE,SAASsP,GAAW,CAClBxnD,EAAG,QAAUA,EAAG,OAAO,OAAOA,CAAE,CACpC,CAGOA,EAAG,QAGNA,EAAG,SAAS,SAAUyQ,EAAM,CACrBA,EAAK,SAER42C,GAAmB52C,EAAMw1C,EAAiB/N,EAAWsP,CAAQ,CAErE,CAAK,EAPDH,GAAmBrnD,EAAIimD,EAAiB/N,EAAWsP,CAAQ,CAS/D,CAOO,SAASC,GAAaznD,EAAI,CAC/B8lD,GAAgB9lD,CAAE,EAAE,SAAWA,EAAG,KACpC,CCnKA,IAAIwG,GAAU,KAAK,IACfD,GAAU,KAAK,IACfmhD,GAAkB,CAAE,EAIjB,SAASC,GAAYhyC,EAAM,CAChC,OAAOo1B,GAAK,OAAOp1B,CAAI,CACzB,CACA,IAAIiyC,GAAuBC,GAIpB,SAASC,GAAWlL,EAAUjnC,EAAM,CACzC,OAAOiyC,GAAqBhL,EAAUjnC,CAAI,CAC5C,CAYO,SAASoyC,GAAcjlD,EAAMklD,EAAY,CAC9CN,GAAgB5kD,CAAI,EAAIklD,CAC1B,CA4BO,SAASC,GAAcnlD,EAAM,CAClC,GAAI4kD,GAAgB,eAAe5kD,CAAI,EACrC,OAAO4kD,GAAgB5kD,CAAI,CAE/B,CAQO,SAASolD,GAAStL,EAAUjnC,EAAMxU,EAAMgnD,EAAQ,CACrD,IAAI/gB,EAAOghB,GAA0BxL,EAAUjnC,CAAI,EACnD,OAAIxU,IACEgnD,IAAW,WACbhnD,EAAOknD,GAAclnD,EAAMimC,EAAK,gBAAe,CAAE,GAEnDkhB,GAAWlhB,EAAMjmC,CAAI,GAEhBimC,CACT,CAQO,SAASmhB,GAAUC,EAAUrnD,EAAMgnD,EAAQ,CAChD,IAAIM,EAAQ,IAAI1b,GAAQ,CACtB,MAAO,CACL,MAAOyb,EACP,EAAGrnD,EAAK,EACR,EAAGA,EAAK,EACR,MAAOA,EAAK,MACZ,OAAQA,EAAK,MACd,EACD,OAAQ,SAAUunD,EAAK,CACrB,GAAIP,IAAW,SAAU,CACvB,IAAIQ,EAAe,CACjB,MAAOD,EAAI,MACX,OAAQA,EAAI,MACb,EACDD,EAAM,SAASJ,GAAclnD,EAAMwnD,CAAY,CAAC,CACxD,CACA,CACA,CAAG,EACD,OAAOF,CACT,CAQA,SAASJ,GAAclnD,EAAMwnD,EAAc,CAEzC,IAAIC,EAASD,EAAa,MAAQA,EAAa,OAC3Cp1D,EAAQ4N,EAAK,OAASynD,EACtB5hD,EACAzT,GAAS4N,EAAK,MAChB6F,EAAS7F,EAAK,QAEd5N,EAAQ4N,EAAK,MACb6F,EAASzT,EAAQq1D,GAEnB,IAAI3hB,EAAK9lC,EAAK,EAAIA,EAAK,MAAQ,EAC3B+lC,EAAK/lC,EAAK,EAAIA,EAAK,OAAS,EAChC,MAAO,CACL,EAAG8lC,EAAK1zC,EAAQ,EAChB,EAAG2zC,EAAKlgC,EAAS,EACjB,MAAOzT,EACP,OAAQyT,CACT,CACH,CACO,IAAIo2C,GAAYyL,GAMhB,SAASP,GAAWlhB,EAAMjmC,EAAM,CACrC,GAAKimC,EAAK,eAGV,KAAI0hB,EAAW1hB,EAAK,gBAAiB,EACjCjrC,EAAI2sD,EAAS,mBAAmB3nD,CAAI,EACxCimC,EAAK,eAAejrC,CAAC,EACvB,CAIO,SAASsxC,GAAqBxB,EAAOlO,EAAW,CACrDgrB,OAAAA,GAA0C9c,EAAOA,EAAO,CACtD,UAAWlO,CACf,CAAG,EACMkO,CACT,CAIO,SAAS4B,GAAqBmb,EAAO,CAC1CC,OAAAA,GAA0CD,EAAM,MAAOA,EAAM,MAAOA,EAAM,KAAK,EACxEA,CACT,CASO,IAAIpb,GAAmBsb,GAQvB,SAASC,GAAazzD,EAAQi0B,EAAU,CAE7C,QADIy/B,EAAMzlC,GAAgB,EAAE,EACrBjuB,GAAUA,IAAWi0B,GAC1BxF,GAAWilC,EAAK1zD,EAAO,kBAAiB,EAAI0zD,CAAG,EAC/C1zD,EAASA,EAAO,OAElB,OAAO0zD,CACT,CAUO,SAASltD,GAAexG,EAAQwvB,EAAWtf,EAAQ,CACxD,OAAIsf,GAAa,CAAChuB,GAAYguB,CAAS,IACrCA,EAAYlB,GAAc,kBAAkBkB,CAAS,GAEnDtf,IACFsf,EAAYV,GAAc,CAAE,EAAEU,CAAS,GAElCD,GAAsB,CAAA,EAAIvvB,EAAQwvB,CAAS,CACpD,CAOO,SAASmkC,GAAmBC,EAAWpkC,EAAWtf,EAAQ,CAE/D,IAAI2jD,EAAQrkC,EAAU,CAAC,IAAM,GAAKA,EAAU,CAAC,IAAM,GAAKA,EAAU,CAAC,IAAM,EAAI,EAAI,KAAK,IAAI,EAAIA,EAAU,CAAC,EAAIA,EAAU,CAAC,CAAC,EACrHskC,EAAQtkC,EAAU,CAAC,IAAM,GAAKA,EAAU,CAAC,IAAM,GAAKA,EAAU,CAAC,IAAM,EAAI,EAAI,KAAK,IAAI,EAAIA,EAAU,CAAC,EAAIA,EAAU,CAAC,CAAC,EACrHukC,EAAS,CAACH,IAAc,OAAS,CAACC,EAAQD,IAAc,QAAUC,EAAQ,EAAGD,IAAc,MAAQ,CAACE,EAAQF,IAAc,SAAWE,EAAQ,CAAC,EAClJ,OAAAC,EAASvtD,GAAeutD,EAAQvkC,EAAWtf,CAAM,EAC1C,KAAK,IAAI6jD,EAAO,CAAC,CAAC,EAAI,KAAK,IAAIA,EAAO,CAAC,CAAC,EAAIA,EAAO,CAAC,EAAI,EAAI,QAAU,OAASA,EAAO,CAAC,EAAI,EAAI,SAAW,KACnH,CACA,SAASC,GAAW1pD,EAAI,CACtB,MAAO,CAACA,EAAG,OACb,CACA,SAAS2pD,GAAO3pD,EAAI,CAClB,OAAOA,EAAG,OAAS,IACrB,CAKO,SAAS4pD,GAAgBC,EAAIC,EAAI7D,EAAiB,CACvD,GAAI,CAAC4D,GAAM,CAACC,EACV,OAEF,SAASC,EAASzyC,EAAG,CACnB,IAAI0yC,EAAQ,CAAE,EACd,OAAA1yC,EAAE,SAAS,SAAUtX,EAAI,CACnB0pD,GAAW1pD,CAAE,GAAKA,EAAG,OACvBgqD,EAAMhqD,EAAG,IAAI,EAAIA,EAEzB,CAAK,EACMgqD,CACX,CACE,SAASC,EAAmBjqD,EAAI,CAC9B,IAAIjM,EAAM,CACR,EAAGiM,EAAG,EACN,EAAGA,EAAG,EACN,SAAUA,EAAG,QACd,EACD,OAAI2pD,GAAO3pD,CAAE,IACXjM,EAAI,MAAQkC,EAAO,CAAA,EAAI+J,EAAG,KAAK,GAE1BjM,CACX,CACE,IAAIm2D,EAASH,EAASF,CAAE,EACxBC,EAAG,SAAS,SAAU9pD,EAAI,CACxB,GAAI0pD,GAAW1pD,CAAE,GAAKA,EAAG,KAAM,CAC7B,IAAImqD,EAAQD,EAAOlqD,EAAG,IAAI,EAC1B,GAAImqD,EAAO,CACT,IAAIC,EAAUH,EAAmBjqD,CAAE,EACnCA,EAAG,KAAKiqD,EAAmBE,CAAK,CAAC,EACjClD,GAAYjnD,EAAIoqD,EAASnE,EAAiB7T,GAAUpyC,CAAE,EAAE,SAAS,CACzE,CACA,CACA,CAAG,CACH,CACO,SAASqqD,GAAiBj1C,EAAQjU,EAAM,CAG7C,OAAOzO,EAAI0iB,EAAQ,SAAUmtC,EAAO,CAClC,IAAItnD,EAAIsnD,EAAM,CAAC,EACftnD,EAAIuL,GAAQvL,EAAGkG,EAAK,CAAC,EACrBlG,EAAIsL,GAAQtL,EAAGkG,EAAK,EAAIA,EAAK,KAAK,EAClC,IAAIjG,EAAIqnD,EAAM,CAAC,EACf,OAAArnD,EAAIsL,GAAQtL,EAAGiG,EAAK,CAAC,EACrBjG,EAAIqL,GAAQrL,EAAGiG,EAAK,EAAIA,EAAK,MAAM,EAC5B,CAAClG,EAAGC,CAAC,CAChB,CAAG,CACH,CAIO,SAASovD,GAAeC,EAAYppD,EAAM,CAC/C,IAAIlG,EAAIuL,GAAQ+jD,EAAW,EAAGppD,EAAK,CAAC,EAChCuS,EAAKnN,GAAQgkD,EAAW,EAAIA,EAAW,MAAOppD,EAAK,EAAIA,EAAK,KAAK,EACjEjG,EAAIsL,GAAQ+jD,EAAW,EAAGppD,EAAK,CAAC,EAChCwS,EAAKpN,GAAQgkD,EAAW,EAAIA,EAAW,OAAQppD,EAAK,EAAIA,EAAK,MAAM,EAGvE,GAAIuS,GAAMzY,GAAK0Y,GAAMzY,EACnB,MAAO,CACL,EAAGD,EACH,EAAGC,EACH,MAAOwY,EAAKzY,EACZ,OAAQ0Y,EAAKzY,CACd,CAEL,CACO,SAASsvD,GAAWC,EAE3B1nD,EAAK5B,EAAM,CACT,IAAI67C,EAAY/mD,EAAO,CACrB,UAAW,EACZ,EAAE8M,CAAG,EACF9Q,EAAQ+qD,EAAU,MAAQ,CAC5B,cAAe,EAChB,EAOD,GANA77C,EAAOA,GAAQ,CACb,EAAG,GACH,EAAG,GACH,MAAO,EACP,OAAQ,CACT,EACGspD,EACF,OAAOA,EAAQ,QAAQ,UAAU,IAAM,GAAKx4D,EAAM,MAAQw4D,EAAQ,MAAM,CAAC,EAAGv0D,EAASjE,EAAOkP,CAAI,EAAG,IAAI4rC,GAAQiQ,CAAS,GAAKkL,GAASuC,EAAQ,QAAQ,UAAW,EAAE,EAAGzN,EAAW77C,EAAM,QAAQ,CAEnM,CAOO,SAASupD,GAAqBC,EAAKC,EAAKC,EAAKC,EAAK11C,EAAQ,CAC/D,QAASziB,EAAI,EAAGuT,EAAKkP,EAAOA,EAAO,OAAS,CAAC,EAAGziB,EAAIyiB,EAAO,OAAQziB,IAAK,CACtE,IAAIsT,EAAImP,EAAOziB,CAAC,EAChB,GAAIo4D,GAAkBJ,EAAKC,EAAKC,EAAKC,EAAK7kD,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGC,EAAG,CAAC,EAAGA,EAAG,CAAC,CAAC,EAChE,MAAO,GAETA,EAAKD,CACT,CACA,CAOO,SAAS8kD,GAAkBJ,EAAKC,EAAKC,EAAKC,EAAKE,EAAKC,EAAKC,EAAKC,EAAK,CAExE,IAAIC,EAAKP,EAAMF,EACXU,EAAKP,EAAMF,EACXU,EAAKJ,EAAMF,EACXO,EAAKJ,EAAMF,EAGXO,EAAiBC,GAAeH,EAAIC,EAAIH,EAAIC,CAAE,EAClD,GAAIK,GAASF,CAAc,EACzB,MAAO,GAMT,IAAIG,EAAQhB,EAAMK,EACdY,EAAQhB,EAAMK,EACdY,EAAIJ,GAAeE,EAAOC,EAAOR,EAAIC,CAAE,EAAIG,EAC/C,GAAIK,EAAI,GAAKA,EAAI,EACf,MAAO,GAET,IAAI5lD,EAAIwlD,GAAeE,EAAOC,EAAON,EAAIC,CAAE,EAAIC,EAC/C,MAAI,EAAAvlD,EAAI,GAAKA,EAAI,EAInB,CAIA,SAASwlD,GAAepgD,EAAIC,EAAIoI,EAAIC,EAAI,CACtC,OAAOtI,EAAKsI,EAAKD,EAAKpI,CACxB,CACA,SAASogD,GAAS13D,EAAK,CACrB,OAAOA,GAAO,MAAQA,GAAO,KAC/B,CACO,SAAS83D,GAAiB/oD,EAAK,CACpC,IAAIgpD,EAAoBhpD,EAAI,kBACxBqzB,EAAiBrzB,EAAI,eACrBipD,EAAWjpD,EAAI,SACfkpD,EAAuBj0D,EAAS+zD,CAAiB,EAAI,CACvD,UAAWA,CACf,EAAMA,EACAt1B,EAAWL,EAAe,SAC1B4hB,EAAiB5hB,EAAe,eAChC81B,EAAkB,CACpB,cAAez1B,EACf,KAAMu1B,EACN,MAAO,CAAC,MAAM,CACf,EACDE,EAAgBz1B,EAAW,OAAO,EAAIuhB,EACtC,IAAImU,EAAuBppD,EAAI,qBAC3BopD,GACF/0D,EAAKf,GAAK81D,CAAoB,EAAG,SAAU32D,EAAK,CACzCoF,GAAOsxD,EAAiB12D,CAAG,IAC9B02D,EAAgB12D,CAAG,EAAI22D,EAAqB32D,CAAG,EAC/C02D,EAAgB,MAAM,KAAK12D,CAAG,EAEtC,CAAK,EAEH,IAAIi9C,EAASL,GAAUrvC,EAAI,EAAE,EAC7B0vC,EAAO,kBAAoBhc,EAC3Bgc,EAAO,eAAiBuF,EACxBvF,EAAO,cAAgB,CACrB,KAAMuZ,EACN,OAAQ91D,EAAS,CACf,QAAS81D,EACT,kBAAmB,GACnB,gBAAiBE,CACvB,EAAOD,CAAoB,CACxB,CACH,CACA,SAASG,GAAgBpsD,EAAI1I,EAAI,CAC/B,IAAIu2B,EAGA7tB,EAAG,UACL6tB,EAAUv2B,EAAG0I,CAAE,GAEZ6tB,GACH7tB,EAAG,SAAS1I,CAAE,CAElB,CACO,SAAS+0D,GAAiBC,EAAKh1D,EAAI,CACxC,GAAIg1D,EACF,GAAIv2D,EAAQu2D,CAAG,EACb,QAAS35D,EAAI,EAAGA,EAAI25D,EAAI,OAAQ35D,IAC9By5D,GAAgBE,EAAI35D,CAAC,EAAG2E,CAAE,OAG5B80D,GAAgBE,EAAKh1D,CAAE,CAG7B,CAGAywD,GAAc,SAAUrK,EAAM,EAC9BqK,GAAc,UAAWnK,EAAO,EAChCmK,GAAc,SAAUrG,EAAM,EAC9BqG,GAAc,OAAQlG,EAAI,EAC1BkG,GAAc,UAAW5E,EAAO,EAChC4E,GAAc,WAAYzE,EAAQ,EAClCyE,GAAc,OAAQxZ,EAAI,EAC1BwZ,GAAc,OAAQvE,EAAI,EAC1BuE,GAAc,cAAejE,EAAW,EACxCiE,GAAc,MAAO5D,EAAG,m1BCvdxB,IAAIoI,GAAY,CAAC,EACD,SAAAC,GAAaC,EAAOC,EAAY,CAC9C,QAAS/5D,EAAI,EAAGA,EAAIugD,GAAe,OAAQvgD,IAAK,CAC1C,IAAAi2B,EAAYsqB,GAAevgD,CAAC,EAC5BO,EAAOw5D,EAAW9jC,CAAS,EAC3BO,EAAQsjC,EAAM,YAAY7jC,CAAS,EACjCO,EAAA,MAAQA,EAAM,OAAS,CAAC,EAC9BA,EAAM,MAAM,KAAOj2B,CAAA,CAEjB,IAAAy5D,EAAYF,EAAM,cAAc,MAAM,EAC1CA,EAAM,YAAY,EAAI,EACtBA,EAAM,SAAS,CACb,KAAMC,EAAW,MAAA,CAClB,EACKD,EAAA,UAAUE,EAAW,EAAI,CACjC,CACA,SAASC,GAAa7pD,EAAK8pD,EAAaC,EAAmB,CACzD,IAAIC,EAAehqD,EAAI,aACnBiqD,EAAiBjqD,EAAI,eACrBkqD,EAAgBlqD,EAAI,cACpBmqD,EAAcL,EAAY,OAC1BM,EACAJ,IACFI,EAAWJ,EAAa,kBAAkBC,EAAgB,SAAU,KAAMC,EAAeC,GAAeA,EAAY,IAAI,WAAW,EAAGJ,GAAqB,KAAO,CAChK,kBAAAA,GACE,IAAI,GAENK,GAAY,OACHA,EAAAr1D,EAAWiL,EAAI,WAAW,EAAIA,EAAI,YAAYiqD,EAAgBjqD,EAAK+pD,CAAiB,EAAI/pD,EAAI,aAKzG,QAHIqqD,EAAa,CACf,OAAQD,CACV,EACSx6D,EAAI,EAAGA,EAAIugD,GAAe,OAAQvgD,IAAK,CAC1C,IAAAi2B,EAAYsqB,GAAevgD,CAAC,EAC5B06D,EAAaR,EAAYjkC,CAAS,EACtCwkC,EAAWxkC,CAAS,EAAInwB,EAAUs0D,EAAeA,EAAa,kBAAkBC,EAAgBpkC,EAAW,KAAMqkC,EAAeI,GAAcA,EAAW,IAAI,WAAW,CAAC,EAAI,KAAMF,CAAQ,CAAA,CAEtL,OAAAC,CACT,CACA,SAASE,GAAcC,EAAUC,EAAmBzqD,EAAK0qD,EAEvD,CACA1qD,EAAMA,GAAOwpD,GAGb,QAFImB,EAAcH,aAAoB1e,GAClC8e,EAAkB,GACbh7D,EAAI,EAAGA,EAAIwgD,GAAe,OAAQxgD,IAAK,CAC9C,IAAI06D,EAAaG,EAAkBra,GAAexgD,CAAC,CAAC,EACpD,GAAI06D,GAAcA,EAAW,WAAW,MAAM,EAAG,CAC7BM,EAAA,GAClB,KAAA,CACF,CAEF,IAAItkC,EAAcqkC,EAAcH,EAAWA,EAAS,eAAe,EACnE,GAAII,EAAiB,CACdD,IAEErkC,IACHA,EAAc,IAAIwlB,GAClB0e,EAAS,eAAelkC,CAAW,GAGjCkkC,EAAS,aACXlkC,EAAY,WAAakkC,EAAS,aAGlC,IAAAK,EAAmBhB,GAAa7pD,EAAKyqD,CAAiB,EACtDN,EAAcM,EAAkB,OAChCK,EAAa,CAAC,CAACX,EAAY,WAAW,MAAM,EAC5CY,EAAcC,GAAgBb,EAAaO,GAAkBA,EAAe,OAAQ1qD,EAAK,GAAO,CAAC2qD,CAAW,EAChHI,EAAY,KAAOF,EAAiB,OAC/BF,GAEHH,EAAS,cAAcS,GAAiBd,EAAanqD,EAAK,EAAK,CAAC,EAElE,QAASpQ,EAAI,EAAGA,EAAIugD,GAAe,OAAQvgD,IAAK,CAC1C,IAAAi2B,EAAYsqB,GAAevgD,CAAC,EAC5B06D,EAAaG,EAAkB5kC,CAAS,EAC5C,GAAIykC,EAAY,CACV,IAAA7jC,EAAWH,EAAY,YAAYT,CAAS,EAC5CqlC,EAAY,CAAC,CAACx1D,EAAU40D,EAAW,WAAW,MAAM,EAAGQ,CAAU,EAMrE,GALII,IAAcJ,IAChBrkC,EAAS,OAAS,CAACykC,GAEZzkC,EAAA,MAAQukC,GAAgBV,EAAYI,GAAkBA,EAAe7kC,CAAS,EAAG7lB,EAAK,GAAM,CAAC2qD,CAAW,EACxGlkC,EAAA,MAAM,KAAOokC,EAAiBhlC,CAAS,EAC5C,CAAC8kC,EAAa,CACZ,IAAAQ,EAAwBX,EAAS,YAAY3kC,CAAS,EAC1DslC,EAAsB,WAAaF,GAAiBX,EAAYtqD,EAAK,EAAI,CAAA,CAC3E,CACF,CAKFsmB,EAAY,OAAS,CAAC,CAAC6jC,EAAY,WAAW,QAAQ,EAElD7jC,EAAY,MAAM,GAAK,OACbykC,EAAA,EAAIzkC,EAAY,MAAM,GAEhCA,EAAY,MAAM,GAAK,OACbykC,EAAA,EAAIzkC,EAAY,MAAM,GAEpCA,EAAY,OAAS,CAACwkC,EAEtBxkC,EAAY,SAASykC,CAAW,EAChCzkC,EAAY,MAAM,EACdtmB,EAAI,mBACNorD,GAAW9kC,CAAW,EAAE,aAAe,SAAUyjC,EAAmB,CAClE,IAAIc,EAAmBhB,GAAa7pD,EAAKyqD,EAAmBV,CAAiB,EAC7EN,GAAanjC,EAAaukC,CAAgB,CAC5C,QAEOvkC,IAETA,EAAY,OAAS,IAEvBkkC,EAAS,MAAM,CACjB,CAEgB,SAAAa,GAAqB1U,EAAW2U,EAAW,CACzDA,EAAYA,GAAa,QAIzB,QAHIC,EAAe,CACjB,OAAQ5U,EAAU,SAAS2U,CAAS,CACtC,EACS,EAAI,EAAG,EAAInb,GAAe,OAAQ,IAAK,CAC1C,IAAAtqB,EAAYsqB,GAAe,CAAC,EAChCob,EAAa1lC,CAAS,EAAI8wB,EAAU,SAAS,CAAC9wB,EAAWylC,CAAS,CAAC,CAAA,CAE9D,OAAAC,CACT,CAIO,SAASP,GAAgBQ,EAAgBC,EAEhDzrD,EAAK0rD,EAAaC,EAChB,CACA,IAAIC,EAAY,CAAC,EACjB,OAAAC,GAAmBD,EAAWJ,EAAgBxrD,EAAK0rD,EAAaC,CAAU,EACpDF,GAAAv4D,EAAO04D,EAAWH,CAAkB,EAEnDG,CACT,CACgB,SAAAX,GAAiBO,EAAgBxrD,EAAK0rD,EAAa,CACjE1rD,EAAMA,GAAO,CAAC,EACd,IAAIqkB,EAAa,CAAC,EACdynC,EACAC,EAAcP,EAAe,WAAW,QAAQ,EAChDQ,EAAgBt2D,EAAU81D,EAAe,WAAW,UAAU,EAAGE,EAAc,KAAO,CAAC,EACvFO,EAAcT,EAAe,WAAW,QAAQ,EACpD,OAAAM,EAAgBN,EAAe,WAAW,UAAU,IAAME,EAAc,KAAO,UAG7DI,IAAA,YAAcA,EAAgB9rD,EAAI,wBAA0B,OAC1E8rD,GAAiB,OACnBznC,EAAW,SAAWynC,GAEpBG,GAAe,OACjB5nC,EAAW,OAAS4nC,GAElBF,GAAe,OACjBA,GAAe,KAAK,GAAK,IACzB1nC,EAAW,SAAW0nC,GAEpBC,GAAiB,OACnB3nC,EAAW,SAAW2nC,GAGb3nC,EAAA,YAAcmnC,EAAe,IAAI,OAAO,IAAM,UAAYxrD,EAAI,cAAgB,KAAO,OACzFqkB,CACT,CAUA,SAASwnC,GAAmBD,EAAWJ,EAAgBxrD,EAAK0rD,EAAaC,EAAY,CAEnF3rD,EAAMA,GAAOwpD,GACb,IAAIj1B,EAAUi3B,EAAe,QACzBU,EAAkB33B,GAAWA,EAAQ,OAAO,UAe5C43B,EAAgBC,GAAiBZ,CAAc,EAC/Ca,EACJ,GAAIF,EAAe,CACjBE,EAAa,CAAC,EACd,QAASC,KAAUH,EACb,GAAAA,EAAc,eAAeG,CAAM,EAAG,CAExC,IAAIC,EAAgBf,EAAe,SAAS,CAAC,OAAQc,CAAM,CAAC,EAM1CE,GAAAH,EAAWC,CAAM,EAAI,CAAC,EAAGC,EAAeL,EAAiBlsD,EAAK0rD,EAAaC,EAAY,GAAO,EAAI,CAAA,CAExH,CAEEU,IACFT,EAAU,KAAOS,GAEf,IAAA/wB,EAAWkwB,EAAe,IAAI,UAAU,EACxClwB,IACFswB,EAAU,SAAWtwB,GAEnB,IAAAmxB,EAASjB,EAAe,IAAI,WAAW,EACvCiB,GAAU,OACZb,EAAU,OAASa,GAErBD,GAAkBZ,EAAWJ,EAAgBU,EAAiBlsD,EAAK0rD,EAAaC,EAAY,GAAM,EAAK,CACzG,CAgBA,SAASS,GAAiBZ,EAAgB,CAGjC,QADHkB,EACGlB,GAAkBA,IAAmBA,EAAe,SAAS,CAC9D,IAAAmB,GAAQnB,EAAe,QAAUhC,IAAW,KAChD,GAAImD,EAAM,CACRD,EAAkBA,GAAmB,CAAC,EAEtC,QADIE,EAAWt5D,GAAKq5D,CAAI,EACf/8D,EAAI,EAAGA,EAAIg9D,EAAS,OAAQh9D,IAAK,CACpC,IAAAi9D,EAAUD,EAASh9D,CAAC,EACxB88D,EAAgBG,CAAO,EAAI,CAAA,CAC7B,CAEFrB,EAAiBA,EAAe,WAAA,CAE3B,OAAAkB,CACT,CACA,IAAII,GAAyB,CAAC,YAAa,aAAc,WAAY,aAAc,kBAAmB,iBAAkB,oBAAqB,mBAAmB,EAC5JC,GAAkB,CAAC,QAAS,aAAc,QAAS,SAAU,MAAO,gBAAiB,UAAU,EAC/FC,GAAiB,CAAC,UAAW,cAAe,eAAgB,mBAAoB,kBAAmB,cAAe,cAAe,aAAc,gBAAiB,eAAe,EACnL,SAASR,GAAkBZ,EAAWJ,EAAgBU,EAAiBlsD,EAAK0rD,EAAaC,EAAYsB,EAASC,EAAQ,CAElGhB,EAAA,CAACR,GAAeQ,GAAmB1C,GACjD,IAAA2D,EAAentD,GAAOA,EAAI,aAC1BotD,EAAY5B,EAAe,WAAW,OAAO,EAC7C6B,EAAc7B,EAAe,WAAW,iBAAiB,EACzD8B,EAAU53D,EAAU81D,EAAe,WAAW,SAAS,EAAGU,EAAgB,OAAO,GACjFkB,IAAc,WAAaA,IAAc,UAMvCD,EACUC,EAAAD,EAEAC,EAAA,OAGZC,IAAgB,WAAaA,IAAgB,UAM3CF,EACYE,EAAAF,EAEAE,EAAA,MAGb1B,IAGHyB,EAAYA,GAAalB,EAAgB,MACzCmB,EAAcA,GAAenB,EAAgB,iBAE3CkB,GAAa,OACfxB,EAAU,KAAOwB,GAEfC,GAAe,OACjBzB,EAAU,OAASyB,GAErB,IAAIlf,EAAkBz4C,EAAU81D,EAAe,WAAW,iBAAiB,EAAGU,EAAgB,eAAe,EACzG/d,GAAmB,OACrByd,EAAU,UAAYzd,GAExB,IAAIof,EAAiB73D,EAAU81D,EAAe,WAAW,gBAAgB,EAAGU,EAAgB,cAAc,EACtGqB,GAAkB,OACpB3B,EAAU,SAAW2B,GAEvB,IAAIC,EAAuB93D,EAAU81D,EAAe,WAAW,sBAAsB,EAAGU,EAAgB,oBAAoB,EACxHsB,GAAwB,OAC1B5B,EAAU,eAAiB4B,GAEzB,CAAC9B,GAAe4B,GAAW,MAAQ,CAACJ,IACtCI,EAAUttD,GAAOA,EAAI,gBAEnBstD,GAAW,OACb1B,EAAU,QAAU0B,GAGlB,CAAC5B,GAAe,CAACC,GAEfC,EAAU,MAAQ,MAAQ5rD,EAAI,eAChC4rD,EAAU,KAAO5rD,EAAI,cAMzB,QAASpQ,EAAI,EAAGA,EAAIk9D,GAAuB,OAAQl9D,IAAK,CAClD,IAAA6C,EAAMq6D,GAAuBl9D,CAAC,EAC9BqB,EAAMyE,EAAU81D,EAAe,WAAW/4D,CAAG,EAAGy5D,EAAgBz5D,CAAG,CAAC,EACpExB,GAAO,OACT26D,EAAUn5D,CAAG,EAAIxB,EACnB,CAEF,QAASrB,EAAI,EAAGA,EAAIm9D,GAAgB,OAAQn9D,IAAK,CAC3C,IAAA6C,EAAMs6D,GAAgBn9D,CAAC,EACvBqB,EAAMu6D,EAAe,WAAW/4D,CAAG,EACnCxB,GAAO,OACT26D,EAAUn5D,CAAG,EAAIxB,EACnB,CAEE,GAAA26D,EAAU,eAAiB,KAAM,CAC/B,IAAA6B,EAAWjC,EAAe,WAAW,UAAU,EAC/CiC,GAAY,OACd7B,EAAU,cAAgB6B,EAC5B,CAEF,GAAI,CAACR,GAAW,CAACjtD,EAAI,WAAY,CAC/B,QAASpQ,EAAI,EAAGA,EAAIo9D,GAAe,OAAQp9D,IAAK,CAC1C,IAAA6C,EAAMu6D,GAAep9D,CAAC,EACtBqB,EAAMu6D,EAAe,WAAW/4D,CAAG,EACnCxB,GAAO,OACT26D,EAAUn5D,CAAG,EAAIxB,EACnB,CAEE,IAAAy8D,EAAalC,EAAe,WAAW,YAAY,EACnDkC,GAAc,OAChB9B,EAAU,WAAa8B,IAEpB9B,EAAU,kBAAoB,QAAUA,EAAU,kBAAoB,YAAcuB,IAMvFvB,EAAU,gBAAkBuB,IAEzBvB,EAAU,cAAgB,QAAUA,EAAU,cAAgB,YAAcuB,IAM/EvB,EAAU,YAAcuB,EAC1B,CAEJ,CACgB,SAAAQ,GAAQ3tD,EAAKu0B,EAAS,CACpC,IAAIq5B,EAAkBr5B,GAAWA,EAAQ,SAAS,WAAW,EAC7D,OAAOp+B,GAAK,CAEZ6J,EAAI,WAAa4tD,GAAmBA,EAAgB,WAAW,WAAW,GAAK,GAAI5tD,EAAI,YAAc4tD,GAAmBA,EAAgB,WAAW,YAAY,GAAK,IAAK5tD,EAAI,UAAY4tD,GAAmBA,EAAgB,WAAW,UAAU,GAAK,IAAM,KAAM5tD,EAAI,YAAc4tD,GAAmBA,EAAgB,WAAW,YAAY,GAAK,YAAA,EAAc,KAAK,GAAG,CAAC,CAC5W,CACO,IAAIxC,GAAaj3B,GAAU,EC5Y9B05B,GAAa,CAAC,YAAa,OAAO,EAClCC,GAAkB,CAAC,YAAa,aAAc,WAAY,aAAc,UAAW,aAAc,OAAQ,QAAS,SAAU,UAAU,EAEtIC,GAAU,IAAIjiB,GACdkiB,GAA8B,UAAY,CAC5C,SAASA,GAAiB,CAAA,CAK1B,OAAAA,EAAe,UAAU,aAAe,SAAUC,EAAY,CAC5D,IAAI15B,EAAU,KAAK,QACnB,OAAO,KAAK,WAAW,OAAO,IAAM,CAAC05B,GAAc15B,EAAUA,EAAQ,IAAIs5B,EAAU,EAAI,KACxF,EAKDG,EAAe,UAAU,QAAU,UAAY,CAC7C,OAAOL,GAAQ,CACb,UAAW,KAAK,WAAW,WAAW,EACtC,WAAY,KAAK,WAAW,YAAY,EACxC,SAAU,KAAK,WAAW,UAAU,EACpC,WAAY,KAAK,WAAW,YAAY,CAC9C,EAAO,KAAK,OAAO,CAChB,EACDK,EAAe,UAAU,YAAc,SAAU79D,EAAM,CAKrD,QAJIjB,EAAQ,CACV,KAAMiB,EACN,cAAe,KAAK,WAAW,eAAe,GAAK,KAAK,WAAW,UAAU,CAC9E,EACQ,EAAI,EAAG,EAAI29D,GAAgB,OAAQ,IAC1C5+D,EAAM4+D,GAAgB,CAAC,CAAC,EAAI,KAAK,WAAWA,GAAgB,CAAC,CAAC,EAEhE,OAAAC,GAAQ,SAAS7+D,CAAK,EACtB6+D,GAAQ,OAAQ,EACTA,GAAQ,gBAAiB,CACjC,EACMC,CACT,EAAG,ECxCQE,GAAqB,CAAC,CAAC,YAAa,OAAO,EAAG,CAAC,SAAU,OAAO,EAAG,CAAC,SAAS,EAAG,CAAC,YAAY,EAAG,CAAC,eAAe,EAAG,CAAC,eAAe,EAAG,CAAC,aAAa,EAAG,CAAC,WAAY,MAAM,EAAG,CAAC,iBAAkB,YAAY,EAAG,CAAC,UAAW,KAAK,EAAG,CAAC,WAAY,MAAM,EAAG,CAAC,YAAY,CAGjR,EACIC,GAAel1B,GAAgBi1B,EAAkB,EACjDE,GAA8B,UAAY,CAC5C,SAASA,GAAiB,CAAA,CAC1B,OAAAA,EAAe,UAAU,aAAe,SAAUh1B,EAAU,CAC1D,OAAO+0B,GAAa,KAAM/0B,CAAQ,CACnC,EACMg1B,CACT,EAAG,ECXQC,GAAqB,CAAC,CAAC,OAAQ,OAAO,EAAG,CAAC,SAAU,aAAa,EAAG,CAAC,YAAa,aAAa,EAAG,CAAC,SAAS,EAAG,CAAC,YAAY,EAAG,CAAC,eAAe,EAAG,CAAC,eAAe,EAAG,CAAC,aAAa,EAAG,CAAC,WAAY,YAAY,EAAG,CAAC,iBAAkB,kBAAkB,EAAG,CAAC,UAAW,WAAW,EAAG,CAAC,WAAY,YAAY,EAAG,CAAC,aAAc,kBAAkB,CAG5V,EACIC,GAAer1B,GAAgBo1B,EAAkB,EACjDE,GAA8B,UAAY,CAC5C,SAASA,GAAiB,CAAA,CAC1B,OAAAA,EAAe,UAAU,aAAe,SAAUn1B,EAAUC,EAAU,CACpE,OAAOi1B,GAAa,KAAMl1B,EAAUC,CAAQ,CAC7C,EACMk1B,CACT,EAAG,ECLCC,GAAqB,UAAY,CACnC,SAASA,EAAMC,EAAQC,EAAan6B,EAAS,CAC3C,KAAK,YAAcm6B,EACnB,KAAK,QAAUn6B,EACf,KAAK,OAASk6B,CAUlB,CACE,OAAAD,EAAM,UAAU,KAAO,SAAUC,EAAQC,EAAan6B,EAAS,CAK9D,EAIDi6B,EAAM,UAAU,YAAc,SAAUC,EAAQl6B,EAAS,CACvD7hC,EAAM,KAAK,OAAQ+7D,EAAQ,EAAI,CAChC,EAIDD,EAAM,UAAU,IAAM,SAAUnqB,EAAMnL,EAAc,CAClD,OAAImL,GAAQ,KACH,KAAK,OAEP,KAAK,OAAO,KAAK,UAAUA,CAAI,EAAG,CAACnL,GAAgB,KAAK,WAAW,CAC3E,EACDs1B,EAAM,UAAU,WAAa,SAAU/7D,EAAKymC,EAAc,CACxD,IAAIu1B,EAAS,KAAK,OACdx9D,EAAMw9D,GAAU,KAAOA,EAASA,EAAOh8D,CAAG,EAC9C,GAAIxB,GAAO,MAAQ,CAACioC,EAAc,CAChC,IAAIw1B,EAAc,KAAK,YACnBA,IAEFz9D,EAAMy9D,EAAY,WAAWj8D,CAAG,EAExC,CACI,OAAOxB,CACR,EAIDu9D,EAAM,UAAU,SAAW,SAAUnqB,EAAMqqB,EAAa,CACtD,IAAIC,EAAUtqB,GAAQ,KAClBuqB,EAAYD,EAAU,KAAK,UAAUtqB,CAAI,EAAI,KAC7CrzC,EAAM29D,EAAU,KAAK,OAAOC,CAAS,EAAI,KAAK,OAClD,OAAAF,EAAcA,GAAe,KAAK,aAAe,KAAK,YAAY,SAAS,KAAK,kBAAkBE,CAAS,CAAC,EACrG,IAAIJ,EAAMx9D,EAAK09D,EAAa,KAAK,OAAO,CAChD,EAIDF,EAAM,UAAU,QAAU,UAAY,CACpC,OAAO,KAAK,QAAU,IACvB,EACDA,EAAM,UAAU,YAAc,UAAY,CAAE,EAE5CA,EAAM,UAAU,MAAQ,UAAY,CAClC,IAAIj8D,EAAO,KAAK,YAChB,OAAO,IAAIA,EAAKN,EAAM,KAAK,MAAM,CAAC,CACnC,EAKDu8D,EAAM,UAAU,UAAY,SAAUnqB,EAAM,CAC1C,OAAI,OAAOA,GAAS,SACXA,EAAK,MAAM,GAAG,EAEhBA,CACR,EAIDmqB,EAAM,UAAU,kBAAoB,SAAUnqB,EAAM,CAClD,OAAOA,CACR,EAEDmqB,EAAM,UAAU,mBAAqB,UAAY,CAC/C,GAAI,CAAC9/D,EAAI,MAAQ,KAAK,OAAQ,CAC5B,GAAI,KAAK,OAAO,WAAa,KAC3B,MAAO,CAAC,CAAC,KAAK,OAAO,UAChB,GAAI,KAAK,YACd,OAAO,KAAK,YAAY,mBAAoB,CAEpD,CACG,EACD8/D,EAAM,UAAU,OAAS,SAAUK,EAASH,EAAa,CACvD,IAAI19D,EAAM,KAAK,OACf,GAAI,CAAC69D,EACH,OAAO79D,EAET,QAASpB,EAAI,EAAGA,EAAIi/D,EAAQ,QAErB,EAAAA,EAAQj/D,CAAC,IAIdoB,EAAMA,GAAO,OAAOA,GAAQ,SAAWA,EAAI69D,EAAQj/D,CAAC,CAAC,EAAI,KACrDoB,GAAO,OAPuBpB,IAElC,CASF,OAAIoB,GAAO,MAAQ09D,IACjB19D,EAAM09D,EAAY,OAAO,KAAK,kBAAkBG,CAAO,EAAGH,EAAY,WAAW,GAE5E19D,CACR,EACMw9D,CACT,EAAG,EAGHn3B,GAAkBm3B,EAAK,EACvBl2B,GAAiBk2B,EAAK,EACtBx6D,GAAMw6D,GAAOJ,EAAc,EAC3Bp6D,GAAMw6D,GAAOD,EAAc,EAC3Bv6D,GAAMw6D,GAAOh1B,EAAc,EAC3BxlC,GAAMw6D,GAAOR,EAAc,ECjI3B,IAAIc,GAAO,KAAK,MAAM,KAAK,OAAA,EAAW,EAAE,EAMjC,SAASC,GAAO35D,EAAM,CAG3B,MAAO,CAACA,GAAQ,GAAI05D,IAAM,EAAE,KAAK,GAAG,CACtC,CAIO,SAASE,GAAuBr8D,EAAQ,CAC7C,IAAIs8D,EAAoB,CAAC,EAClBt8D,EAAA,yBAA2B,SAAUokC,EAAem4B,EAAW,CAChE,IAAAv2B,EAAoB7B,GAAeC,CAAa,EAClCk4B,EAAAt2B,EAAkB,IAAI,EAAIu2B,CAC9C,EACOv8D,EAAA,iBAAmB,SAAUokC,EAAe03B,EAAQ,CACzD,IAAIr5D,EAAOq5D,EAAO,KAClB,GAAI,CAACr5D,EAAM,CACL,IAAA+5D,EAAoBr4B,GAAeC,CAAa,EAAE,KAClDpkC,EAAO,YAAYokC,CAAa,GAAKk4B,EAAkBE,CAAiB,IACnE/5D,EAAA65D,EAAkBE,CAAiB,EAAEV,CAAM,EACpD,CAEK,OAAAr5D,CACT,CACF,CASgB,SAAAg6D,GAAwBC,EAAQC,EAAkB,CAQhED,EAAO,kBAAoB,SAAUE,EAAgBC,EAAc/4D,EAAUjC,EAAS,CAChF,GAAA,CAAC+6D,EAAe,OAClB,OAEE,IAAAp9D,EAASs9D,EAAmBD,CAAY,EACxCE,EAAQv9D,EAAO,MACfw9D,EAAcx9D,EAAO,YACrBy9D,EAAgB,CAAC,EAIrB,IAHOzwC,EAAKowC,EAAgB,SAAUxvD,EAAM,CAC1C6vD,EAAc7vD,CAAI,EAAI,EAAA,CACvB,EACM4vD,EAAY,QAAQ,CACrB,IAAAE,EAAoBF,EAAY,IAAI,EACpCG,EAAaJ,EAAMG,CAAiB,EACpCE,EAAoB,CAAC,CAACH,EAAcC,CAAiB,EACrDE,IACFt5D,EAAS,KAAKjC,EAASq7D,EAAmBC,EAAW,aAAa,OAAO,EACzE,OAAOF,EAAcC,CAAiB,GAExC1wC,EAAY2wC,EAAW,UAAWC,EAAoBC,EAAmBC,CAAU,CAAA,CAE9E9wC,EAAKywC,EAAe,UAAY,CACrC,IAAIM,EAAS,GAIP,MAAA,IAAI,MAAMA,CAAM,CAAA,CACvB,EACD,SAASD,EAAWE,EAAmB,CACrCT,EAAMS,CAAiB,EAAE,aACrBT,EAAMS,CAAiB,EAAE,aAAe,GAC1CR,EAAY,KAAKQ,CAAiB,CACpC,CAQF,SAASH,EAAiBG,EAAmB,CAC3CP,EAAcO,CAAiB,EAAI,GACnCF,EAAWE,CAAiB,CAAA,CAEhC,EACA,SAASV,EAAmBD,EAAc,CACxC,IAAIE,EAAQ,CAAC,EACTC,EAAc,CAAC,EACZxwC,OAAAA,EAAKqwC,EAAc,SAAUzvD,EAAM,CACpC,IAAAqwD,EAAWC,EAA0BX,EAAO3vD,CAAI,EAChDuwD,EAAeF,EAAS,aAAed,EAAiBvvD,CAAI,EAC5DwwD,EAAgBC,EAAyBF,EAAcd,CAAY,EACvEY,EAAS,WAAaG,EAAc,OAChCH,EAAS,aAAe,GAC1BT,EAAY,KAAK5vD,CAAI,EAEhBof,EAAKoxC,EAAe,SAAUE,EAAe,CAC9C9lC,EAAeylC,EAAS,YAAaK,CAAa,EAAI,GAC/CL,EAAA,YAAY,KAAKK,CAAa,EAErC,IAAAC,EAAWL,EAA0BX,EAAOe,CAAa,EACzD9lC,EAAe+lC,EAAS,UAAWD,CAAa,EAAI,GAC7CC,EAAA,UAAU,KAAK3wD,CAAI,CAC9B,CACD,CAAA,CACF,EACM,CACL,MAAA2vD,EACA,YAAAC,CACF,CAAA,CAEO,SAAAU,EAA0BX,EAAO3vD,EAAM,CAC1C,OAAC2vD,EAAM3vD,CAAI,IACb2vD,EAAM3vD,CAAI,EAAI,CACZ,YAAa,CAAC,EACd,UAAW,CAAA,CACb,GAEK2vD,EAAM3vD,CAAI,CAAA,CAEV,SAAAywD,EAAyBF,EAAcd,EAAc,CAC5D,IAAIe,EAAgB,CAAC,EACdpxC,OAAAA,EAAKmxC,EAAc,SAAUK,EAAK,CACvChmC,EAAe6kC,EAAcmB,CAAG,GAAK,GAAKJ,EAAc,KAAKI,CAAG,CAAA,CACjE,EACMJ,CAAA,CAEX,CACgB,SAAAK,GAAqBC,EAAaC,EAAW,CAEpD,OAAAC,EAAaA,EAAa,GAAIF,EAAa,EAAI,EAAGC,EAAW,EAAI,CAC1E,CC3IA,MAAeE,GAAA,CACb,KAAM,CACJ,MAAO,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,UAAU,EAChI,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,EAC9F,UAAW,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,UAAU,EACxF,cAAe,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,CAChE,EACD,OAAQ,CACN,SAAU,CACR,IAAK,MACL,QAAS,KACf,CACG,EACD,QAAS,CACP,MAAO,CACL,MAAO,CACL,KAAM,aACN,QAAS,eACT,MAAO,sBACP,MAAO,oBACP,KAAM,kBACN,MAAO,kBACf,CACK,EACD,SAAU,CACR,MAAO,YACP,KAAM,CAAC,YAAa,QAAS,SAAS,CACvC,EACD,SAAU,CACR,MAAO,CACL,KAAM,OACN,KAAM,YACd,CACK,EACD,UAAW,CACT,MAAO,CACL,KAAM,uBACN,IAAK,sBACL,MAAO,QACP,MAAO,MACf,CACK,EACD,QAAS,CACP,MAAO,SACR,EACD,YAAa,CACX,MAAO,gBACP,KAAM,CAAC,2BAA2B,CACxC,CACG,EACD,OAAQ,CACN,UAAW,CACT,IAAK,YACL,IAAK,YACL,KAAM,aACN,QAAS,eACT,cAAe,sBACf,MAAO,cACP,KAAM,OACN,QAAS,UACT,QAAS,UACT,YAAa,cACb,EAAG,eACH,QAAS,WACT,IAAK,MACL,SAAU,0BACV,MAAO,aACP,MAAO,qBACP,OAAQ,iBACR,OAAQ,eACR,MAAO,QACP,aAAc,gBACd,WAAY,kBACZ,SAAU,WACV,OAAQ,eACR,MAAO,OACb,CACG,EACD,KAAM,CACJ,QAAS,CACP,UAAW,kCACX,aAAc,iBACf,EACD,OAAQ,CACN,OAAQ,CACN,OAAQ,GACR,SAAU,8CACV,YAAa,0BACd,EACD,SAAU,CACR,OAAQ,+CACR,SAAU,sEACV,YAAa,4CACb,UAAW,CACT,OAAQ,GACR,IAAK,EACf,CACA,CACK,EACD,KAAM,CACJ,QAAS,2BACT,YAAa,qCACb,SAAU,iCACV,YAAa,UACb,UAAW,CACT,OAAQ,KACR,IAAK,IACb,CACA,CACA,CACA,ECjHeC,GAAA,CACb,KAAM,CACJ,MAAO,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,KAAK,EAChF,UAAW,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MAAO,MAAO,KAAK,EACrF,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,KAAK,EAC3D,cAAe,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,CAClD,EACD,OAAQ,CACN,SAAU,CACR,IAAK,KACL,QAAS,IACf,CACG,EACD,QAAS,CACP,MAAO,CACL,MAAO,CACL,KAAM,OACN,QAAS,KACT,MAAO,OACP,MAAO,OACP,KAAM,OACN,MAAO,MACf,CACK,EACD,SAAU,CACR,MAAO,OACP,KAAM,CAAC,OAAQ,KAAM,IAAI,CAC1B,EACD,SAAU,CACR,MAAO,CACL,KAAM,OACN,KAAM,QACd,CACK,EACD,UAAW,CACT,MAAO,CACL,KAAM,SACN,IAAK,SACL,MAAO,QACP,MAAO,OACf,CACK,EACD,QAAS,CACP,MAAO,IACR,EACD,YAAa,CACX,MAAO,QACP,KAAM,CAAC,SAAS,CACtB,CACG,EACD,OAAQ,CACN,UAAW,CACT,IAAK,KACL,IAAK,MACL,KAAM,MACN,QAAS,MACT,cAAe,QACf,MAAO,MACP,KAAM,KACN,QAAS,OACT,QAAS,MACT,YAAa,MACb,EAAG,MACH,QAAS,MACT,IAAK,KACL,SAAU,QACV,MAAO,KACP,MAAO,MACP,OAAQ,MACR,OAAQ,MACR,MAAO,OACP,aAAc,OACd,WAAY,QACZ,SAAU,MACV,OAAQ,QACR,MAAO,IACb,CACG,EACD,KAAM,CACJ,QAAS,CACP,UAAW,sBACX,aAAc,SACf,EACD,OAAQ,CACN,OAAQ,CACN,OAAQ,GACR,SAAU,oCACV,YAAa,oBACd,EACD,SAAU,CACR,OAAQ,0BACR,SAAU,gDACV,YAAa,iCACb,UAAW,CACT,OAAQ,IACR,IAAK,GACf,CACA,CACK,EACD,KAAM,CACJ,QAAS,SACT,YAAa,uBACb,SAAU,oBACV,YAAa,UACb,UAAW,CACT,OAAQ,IACR,IAAK,EACb,CACA,CACA,CACA,ECxGA,IAAIC,GAAY,KACZC,GAAY,KACZC,GAAiBD,GACjBE,GAAgB,CAAE,EAClBC,GAAe,CAAE,EACVC,GAAe7iE,EAAI,aAAgC,UAAY,CACxE,IAAI8iE,GACJ,SAAS,gBAAgB,MAAQ,UAAU,UAAY,UAAU,iBAAmBJ,IAAgB,YAAa,EACjH,OAAOI,EAAQ,QAAQN,EAAS,EAAI,GAAKA,GAAYE,EACvD,EAAG,EAJ0CA,GAKtC,SAASK,GAAeC,EAAQC,EAAW,CAChDD,EAASA,EAAO,YAAa,EAC7BJ,GAAaI,CAAM,EAAI,IAAIlD,GAAMmD,CAAS,EAC1CN,GAAcK,CAAM,EAAIC,CAC1B,CAIO,SAASC,GAAmBF,EAAQ,CACzC,GAAIz8D,EAASy8D,CAAM,EAAG,CACpB,IAAIC,EAAYN,GAAcK,EAAO,YAAW,CAAE,GAAK,CAAE,EACzD,OAAIA,IAAWR,IAAaQ,IAAWP,GAC9Bl/D,EAAM0/D,CAAS,EAEfj/D,EAAMT,EAAM0/D,CAAS,EAAG1/D,EAAMo/D,GAAcD,EAAc,CAAC,EAAG,EAAK,CAEhF,KACI,QAAO1+D,EAAMT,EAAMy/D,CAAM,EAAGz/D,EAAMo/D,GAAcD,EAAc,CAAC,EAAG,EAAK,CAE3E,CACO,SAASS,GAAeC,EAAM,CACnC,OAAOR,GAAaQ,CAAI,CAC1B,CACO,SAASC,IAAwB,CACtC,OAAOT,GAAaF,EAAc,CACpC,CAEAK,GAAeN,GAAWH,EAAM,EAChCS,GAAeP,GAAWD,EAAM,ECxCzB,IAAIe,GAAa,IACbC,GAAaD,GAAa,GAC1BE,GAAWD,GAAa,GACxBE,GAAUD,GAAW,GACrBE,GAAWD,GAAU,IACrBE,GAA0B,CACnC,KAAM,SACN,MAAO,QACP,IAAK,MACL,KAAM,YACN,OAAQ,YACR,OAAQ,iBACR,YAAa,uBACb,KAAM,uCACR,EACIC,GAAmB,mBACZC,GAAuB,CAChC,KAAM,SACN,MAAO,cACP,IAAKD,GACL,KAAMA,GAAmB,IAAMD,GAAwB,KACvD,OAAQC,GAAmB,IAAMD,GAAwB,OACzD,OAAQC,GAAmB,IAAMD,GAAwB,OACzD,YAAaA,GAAwB,IACvC,EACWG,GAAmB,CAAC,OAAQ,QAAS,MAAO,OAAQ,SAAU,SAAU,aAAa,EACrFC,GAAY,CAAC,OAAQ,YAAa,UAAW,QAAS,OAAQ,YAAa,MAAO,WAAY,cAAe,OAAQ,SAAU,SAAU,aAAa,EAC1J,SAASC,GAAIt8D,EAAK9D,EAAK,CAC5B,OAAA8D,GAAO,GACA,OAAO,OAAO,EAAG9D,EAAM8D,EAAI,MAAM,EAAIA,CAC9C,CACO,SAASu8D,GAAmBC,EAAU,CAC3C,OAAQA,EAAQ,CACd,IAAK,YACL,IAAK,UACH,MAAO,QACT,IAAK,OACL,IAAK,YACH,MAAO,MACT,IAAK,WACL,IAAK,cACH,MAAO,OACT,QAEE,OAAOA,CACb,CACA,CACO,SAASC,GAAkBD,EAAU,CAC1C,OAAOA,IAAaD,GAAmBC,CAAQ,CACjD,CACO,SAASE,GAAoCF,EAAU,CAC5D,OAAQA,EAAQ,CACd,IAAK,OACL,IAAK,QACH,MAAO,MACT,IAAK,cACH,MAAO,cACT,QAEE,MAAO,QACb,CACA,CACO,SAASG,GAGhBx5C,EAAMy5C,EAAUC,EAAOnB,EAAM,CAC3B,IAAIoB,EAAOC,GAAqB55C,CAAI,EAChCphB,EAAI+6D,EAAKE,GAAmBH,CAAK,CAAC,EAAG,EACrCtb,EAAIub,EAAKG,GAAgBJ,CAAK,CAAC,EAAG,EAAG,EACrCnK,EAAI,KAAK,OAAOnR,EAAI,GAAK,CAAC,EAAI,EAC9B7+C,EAAIo6D,EAAKI,GAAeL,CAAK,CAAC,EAAG,EACjCv5D,EAAIw5D,EAAK,OAASD,EAAQ,MAAQ,IAAM,KAAK,EAAG,EAChDM,EAAIL,EAAKM,GAAgBP,CAAK,CAAC,EAAG,EAClC,GAAKM,EAAI,GAAK,GAAK,EACnBn6D,EAAI85D,EAAKO,GAAkBR,CAAK,CAAC,EAAG,EACpCr6D,EAAIs6D,EAAKQ,GAAkBT,CAAK,CAAC,EAAG,EACpCU,EAAIT,EAAKU,GAAuBX,CAAK,CAAC,EAAG,EACzC/7D,EAAIq8D,GAAK,GAAK,KAAO,KACrBrkD,EAAIhY,EAAE,YAAa,EACnB28D,EAAc/B,aAAgBtD,GAAQsD,EAAOD,GAAeC,GAAQP,EAAW,GAAKQ,GAAuB,EAC3G+B,EAAYD,EAAY,SAAS,MAAM,EACvCE,EAAQD,EAAU,IAAI,OAAO,EAC7BE,EAAYF,EAAU,IAAI,WAAW,EACrCG,EAAYH,EAAU,IAAI,WAAW,EACrCI,EAAgBJ,EAAU,IAAI,eAAe,EACjD,OAAQd,GAAY,IAAI,QAAQ,OAAQ97D,EAAI,EAAE,EAAE,QAAQ,OAAQgY,EAAI,EAAE,EAAE,QAAQ,UAAW/W,EAAI,EAAE,EAAE,QAAQ,QAASu6D,GAAIv6D,EAAI,IAAM,GAAI,CAAC,CAAC,EAAE,QAAQ,OAAQ2wD,EAAI,EAAE,EAAE,QAAQ,UAAWiL,EAAMpc,EAAI,CAAC,CAAC,EAAE,QAAQ,SAAUqc,EAAUrc,EAAI,CAAC,CAAC,EAAE,QAAQ,QAAS+a,GAAI/a,EAAG,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,EAAE,QAAQ,QAAS+a,GAAI55D,EAAG,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,EAAE,QAAQ,UAAWm7D,EAAUv6D,CAAC,CAAC,EAAE,QAAQ,QAASw6D,EAAcx6D,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,EAAE,QAAQ,QAASg5D,GAAIa,EAAG,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,EAAE,QAAQ,QAASb,GAAI,EAAI,GAAI,CAAC,CAAC,EAAE,QAAQ,OAAQ,EAAI,EAAE,EAAE,QAAQ,QAASA,GAAIt5D,EAAG,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,EAAE,QAAQ,QAASs5D,GAAI95D,EAAG,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,EAAE,QAAQ,SAAU85D,GAAIiB,EAAG,CAAC,CAAC,EAAE,QAAQ,OAAQA,EAAI,EAAE,CACrrB,CACO,SAASQ,GAAcC,EAAMtmD,EAAKumD,EAAWvC,EAAMmB,EAAO,CAC/D,IAAID,EAAW,KACf,GAAItlC,EAAgB2mC,CAAS,EAE3BrB,EAAWqB,UACFp8B,EAAkBo8B,CAAS,EAEpCrB,EAAWqB,EAAUD,EAAK,MAAOtmD,EAAK,CACpC,MAAOsmD,EAAK,KAClB,CAAK,MACI,CACL,IAAIjhE,EAAW0kC,EAAc,CAAE,EAAEw6B,EAAuB,EACxD,GAAI+B,EAAK,MAAQ,EACf,QAASxkE,EAAI,EAAGA,EAAI4iE,GAAiB,OAAQ,EAAE5iE,EAC7CuD,EAASq/D,GAAiB5iE,CAAC,CAAC,EAAI,YAAcuD,EAASq/D,GAAiB5iE,CAAC,CAAC,EAAI,IAGlF,IAAI0kE,EAAkBD,EAAYA,EAAU,UAAY,GAAQA,EAC9DE,EAAgBF,EAAWlhE,CAAQ,EAAIA,EACrC0zC,EAAO2tB,GAAiBJ,EAAK,MAAOnB,CAAK,EAC7C,GAAIqB,EAAgBztB,CAAI,EACtBmsB,EAAWsB,EAAgBztB,CAAI,UACtBytB,EAAgB,QAAS,CAGlC,QADIG,EAAWhC,GAAU,QAAQ5rB,CAAI,EAC5Bj3C,EAAI6kE,EAAW,EAAG7kE,GAAK,EAAG,EAAEA,EACnC,GAAI0kE,EAAgBztB,CAAI,EAAG,CACzBmsB,EAAWsB,EAAgBztB,CAAI,EAC/B,KACV,CAEMmsB,EAAWA,GAAY7/D,EAAS,IACtC,CACI,GAAIuhE,EAAe1B,CAAQ,EAAG,CAC5B,IAAI2B,EAAUP,EAAK,OAAS,KAAO,EAAIA,EAAK,OAAS,EAAIA,EAAK,MAAQpB,EAAS,OAASoB,EAAK,MAC7FO,EAAU,KAAK,IAAIA,EAAS3B,EAAS,OAAS,CAAC,EAC/CA,EAAWA,EAAS2B,CAAO,CACjC,CACA,CACE,OAAO5B,GAAO,IAAI,KAAKqB,EAAK,KAAK,EAAGpB,EAAUC,EAAOnB,CAAI,CAC3D,CACO,SAAS0C,GAAiB/gE,EAAOw/D,EAAO,CAC7C,IAAIC,EAAOC,GAAqB1/D,CAAK,EACjCkkD,EAAIub,EAAKG,GAAgBJ,CAAK,CAAC,EAAG,EAAG,EACrCn6D,EAAIo6D,EAAKI,GAAeL,CAAK,CAAC,EAAG,EACjC7+C,EAAI8+C,EAAKM,GAAgBP,CAAK,CAAC,EAAG,EAClC75D,EAAI85D,EAAKO,GAAkBR,CAAK,CAAC,EAAG,EACpC,EAAIC,EAAKQ,GAAkBT,CAAK,CAAC,EAAG,EACpCU,EAAIT,EAAKU,GAAuBX,CAAK,CAAC,EAAG,EACzC2B,EAAWjB,IAAM,EACjBkB,EAAWD,GAAY,IAAM,EAC7BE,EAASD,GAAYz7D,IAAM,EAC3B27D,EAAQD,GAAU1gD,IAAM,EACxB4gD,EAAUD,GAASj8D,IAAM,EACzBm8D,EAASD,GAAWrd,IAAM,EAC9B,OAAIsd,EACK,OACED,EACF,QACED,EACF,MACED,EACF,OACED,EACF,SACED,EACF,SAEA,aAEX,CACO,SAASM,GAAazhE,EAAOozC,EAAMosB,EAAO,CAC/C,IAAIC,EAAOiC,GAAgB1hE,CAAK,EAAI0/D,GAAqB1/D,CAAK,EAAIA,EAElE,OADAozC,EAAOA,GAAQ2tB,GAAiB/gE,EAAOw/D,CAAK,EACpCpsB,EAAI,CACV,IAAK,OACH,OAAOqsB,EAAKE,GAAmBH,CAAK,CAAC,EAAG,EAC1C,IAAK,YACH,OAAOC,EAAKG,GAAgBJ,CAAK,CAAC,EAAC,GAAM,EAAI,EAAI,EACnD,IAAK,UACH,OAAO,KAAK,OAAOC,EAAKG,GAAgBJ,CAAK,CAAC,EAAC,EAAK,GAAK,CAAC,EAC5D,IAAK,QACH,OAAOC,EAAKG,GAAgBJ,CAAK,CAAC,EAAG,EACvC,IAAK,MACH,OAAOC,EAAKI,GAAeL,CAAK,CAAC,EAAG,EACtC,IAAK,WACH,OAAOC,EAAKM,GAAgBP,CAAK,CAAC,EAAG,EAAG,GAC1C,IAAK,OACH,OAAOC,EAAKM,GAAgBP,CAAK,CAAC,EAAG,EACvC,IAAK,SACH,OAAOC,EAAKO,GAAkBR,CAAK,CAAC,EAAG,EACzC,IAAK,SACH,OAAOC,EAAKQ,GAAkBT,CAAK,CAAC,EAAG,EACzC,IAAK,cACH,OAAOC,EAAKU,GAAuBX,CAAK,CAAC,EAAG,CAClD,CACA,CACO,SAASG,GAAmBH,EAAO,CACxC,OAAOA,EAAQ,iBAAmB,aACpC,CACO,SAASI,GAAgBJ,EAAO,CACrC,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASK,GAAeL,EAAO,CACpC,OAAOA,EAAQ,aAAe,SAChC,CACO,SAASO,GAAgBP,EAAO,CACrC,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASQ,GAAkBR,EAAO,CACvC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAASS,GAAkBT,EAAO,CACvC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAASW,GAAuBX,EAAO,CAC5C,OAAOA,EAAQ,qBAAuB,iBACxC,CACO,SAASmC,GAAmBnC,EAAO,CACxC,OAAOA,EAAQ,iBAAmB,aACpC,CACO,SAASoC,GAAgBpC,EAAO,CACrC,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASqC,GAAerC,EAAO,CACpC,OAAOA,EAAQ,aAAe,SAChC,CACO,SAASsC,GAAgBtC,EAAO,CACrC,OAAOA,EAAQ,cAAgB,UACjC,CACO,SAASuC,GAAkBvC,EAAO,CACvC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAASwC,GAAkBxC,EAAO,CACvC,OAAOA,EAAQ,gBAAkB,YACnC,CACO,SAASyC,GAAuBzC,EAAO,CAC5C,OAAOA,EAAQ,qBAAuB,iBACxC,CC7NO,SAAS0C,GAAUz9D,EAAG,CACvB,GAAA,CAAC63B,GAAU73B,CAAC,EACd,OAAOw1B,EAAgBx1B,CAAC,EAAIA,EAAI,IAElC,IAAI09D,GAAS19D,EAAI,IAAI,MAAM,GAAG,EAC9B,OAAO09D,EAAM,CAAC,EAAE,QAAQ,iCAAkC,KAAK,GAAKA,EAAM,OAAS,EAAI,IAAMA,EAAM,CAAC,EAAI,GAC1G,CACgB,SAAAC,GAAYz/D,EAAK0/D,EAAgB,CACxC,OAAA1/D,GAAAA,GAAO,IAAI,YAAY,EAAE,QAAQ,QAAS,SAAUi5B,EAAO0mC,EAAQ,CACxE,OAAOA,EAAO,YAAY,CAAA,CAC3B,EACGD,GAAkB1/D,IACdA,EAAAA,EAAI,OAAO,CAAC,EAAE,cAAgBA,EAAI,MAAM,CAAC,GAE1CA,CACT,CACO,IAAIL,GAAoBigE,GASf,SAAAC,GAAkBxiE,EAAOyiE,EAAWC,EAAQ,CAC1D,IAAIC,EAAqC,kCACzC,SAASC,EAAqBjgE,EAAK,CACjC,OAAOA,GAAOkgE,GAAYlgE,CAAG,EAAIA,EAAM,GAAA,CAEzC,SAASmgE,EAAqBC,EAAK,CAC1B,MAAA,CAAC,EAAEA,GAAO,MAAQ,CAAC,MAAMA,CAAG,GAAK,SAASA,CAAG,EAAA,CAEtD,IAAIC,EAAaP,IAAc,OAC3BQ,EAAcjjE,aAAiB,KACnC,GAAIgjE,GAAcC,EAAa,CAC7B,IAAIxD,EAAOuD,EAAarnC,GAAU37B,CAAK,EAAIA,EAC3C,GAAK,MAAM,CAACy/D,CAAI,MAELwD,EACF,MAAA,QAFA,QAAAC,GAAWzD,EAAMkD,EAAoCD,CAAM,CAGpE,CAGF,GAAID,IAAc,UAChB,OAAOU,GAAoBnjE,CAAK,EAAI4iE,EAAqB5iE,CAAK,EAAI0hE,GAAgB1hE,CAAK,GAAI8iE,EAAqB9iE,CAAK,EAAIA,EAAQ,GAAW,IAG1I,IAAAojE,EAAgBhnC,GAAgBp8B,CAAK,EACzC,OAAO8iE,EAAqBM,CAAa,EAAIlB,GAAUkB,CAAa,EAAID,GAAoBnjE,CAAK,EAAI4iE,EAAqB5iE,CAAK,EAAI,OAAOA,GAAU,UAAYA,EAAQ,GAAK,GAC/K,CACA,IAAIqjE,GAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAG,EAClDC,GAAU,SAAUC,EAASC,EAAW,CAC1C,MAAO,IAAMD,GAAWC,GAAoB,IAAkB,GAChE,EAKgB,SAAAC,GAAUC,EAAKC,EAAYC,EAAQ,CAC5C3C,EAAe0C,CAAU,IAC5BA,EAAa,CAACA,CAAU,GAE1B,IAAIE,EAAYF,EAAW,OAC3B,GAAI,CAACE,EACI,MAAA,GAGT,QADIC,EAAQH,EAAW,CAAC,EAAE,OAAS,CAAC,EAC3BxnE,EAAI,EAAGA,EAAI2nE,EAAM,OAAQ3nE,IAAK,CACjC,IAAA4nE,EAAQV,GAAclnE,CAAC,EACrBunE,EAAAA,EAAI,QAAQJ,GAAQS,CAAK,EAAGT,GAAQS,EAAO,CAAC,CAAC,CAAA,CAErD,QAASP,EAAY,EAAGA,EAAYK,EAAWL,IAC7C,QAASzrD,EAAI,EAAGA,EAAI+rD,EAAM,OAAQ/rD,IAAK,CACrC,IAAIva,EAAMmmE,EAAWH,CAAS,EAAEM,EAAM/rD,CAAC,CAAC,EACxC2rD,EAAMA,EAAI,QAAQJ,GAAQD,GAActrD,CAAC,EAAGyrD,CAAS,EAAGI,EAAS74D,GAAWvN,CAAG,EAAIA,CAAG,CAAA,CAGnF,OAAAkmE,CACT,CAUgB,SAAAM,GAAiBC,EAAOC,EAAc,CACpD,IAAI33D,EAAM0tB,EAAgBgqC,CAAK,EAAI,CACjC,MAAOA,EACP,aAAAC,CACF,EAAID,GAAS,CAAC,EACV/hD,EAAQ3V,EAAI,MACZ5K,EAAO4K,EAAI,KACf23D,EAAe33D,EAAI,aACf,IAAA43D,EAAa53D,EAAI,YAAc,OACnC,GAAI,CAAC2V,EACI,MAAA,GAET,GAAIiiD,IAAe,OACjB,OAAOxiE,IAAS,UAAY,oJAE1BoJ,GAAWmX,CAAK,EAAI,KAAOgiD,GAAgB,IAAM,YAAc,iHAAwHn5D,GAAWmX,CAAK,EAAI,KAAOgiD,GAAgB,IAAM,YAMtO,IAAAE,EAAW73D,EAAI,UAAY,UACxB,MAAA,CACL,WAAA43D,EACA,QAAS,IAAMC,EAAW,OAC1B,MAAOziE,IAAS,UAAY,CAC1B,MAAO,EACP,OAAQ,EACR,aAAc,EACd,gBAAiBugB,CAAA,EACf,CACF,MAAO,GACP,OAAQ,GACR,aAAc,EACd,gBAAiBA,CAAA,CAErB,CAEJ,CAyCgB,SAAAmiD,GAAqBniD,EAAOoiD,EAAc,CACxD,OAAAA,EAAeA,GAAgB,cACxBrqC,EAAgB/X,CAAK,EAAIA,EAAQqiD,EAAgBriD,CAAK,GAAIA,EAAM,aAAeA,EAAM,WAAW,CAAC,GAAK,CAAA,GAAI,OAASoiD,CAC5H,CAOgB,SAAAE,GAAWC,EAAMvlE,EAAQ,CAEnC,GAAAA,IAAW,UAAYA,IAAW,QAAS,CACzC,IAAAwlE,EAAQ,OAAO,KAAK,EACxBA,EAAM,OAAS,KACfA,EAAM,SAAS,KAAOD,CAAA,MAEf,OAAA,KAAKA,EAAMvlE,CAAM,CAE5B,CC9LA,IAAI0B,GAAO8qB,EAIAi5C,GAAkB,CAAC,OAAQ,QAAS,MAAO,SAAU,QAAS,QAAQ,EAItEC,GAAW,CAAC,CAAC,QAAS,OAAQ,OAAO,EAAG,CAAC,SAAU,MAAO,QAAQ,CAAC,EAC9E,SAASC,GAAUC,EAAQC,EAAOC,EAAKC,EAAUC,EAAW,CAC1D,IAAIzgE,EAAI,EACJC,EAAI,EACJugE,GAAY,OACdA,EAAW,KAETC,GAAa,OACfA,EAAY,KAEd,IAAIC,EAAqB,EACzBJ,EAAM,UAAU,SAAU/qD,EAAOK,EAAK,CACpC,IAAI1P,EAAOqP,EAAM,gBAAiB,EAC9BorD,EAAYL,EAAM,QAAQ1qD,EAAM,CAAC,EACjCgrD,EAAgBD,GAAaA,EAAU,gBAAiB,EACxDE,EACAC,EACJ,GAAIT,IAAW,aAAc,CAC3B,IAAIU,EAAQ76D,EAAK,OAAS06D,EAAgB,CAACA,EAAc,EAAI16D,EAAK,EAAI,GACtE26D,EAAQ7gE,EAAI+gE,EAGRF,EAAQL,GAAYjrD,EAAM,SAC5BvV,EAAI,EACJ6gE,EAAQE,EACR9gE,GAAKygE,EAAqBH,EAC1BG,EAAqBx6D,EAAK,QAG1Bw6D,EAAqB,KAAK,IAAIA,EAAoBx6D,EAAK,MAAM,CAErE,KAAW,CACL,IAAI86D,EAAQ96D,EAAK,QAAU06D,EAAgB,CAACA,EAAc,EAAI16D,EAAK,EAAI,GACvE46D,EAAQ7gE,EAAI+gE,EAERF,EAAQL,GAAalrD,EAAM,SAC7BvV,GAAK0gE,EAAqBH,EAC1BtgE,EAAI,EACJ6gE,EAAQE,EACRN,EAAqBx6D,EAAK,OAE1Bw6D,EAAqB,KAAK,IAAIA,EAAoBx6D,EAAK,KAAK,CAEpE,CACQqP,EAAM,UAGVA,EAAM,EAAIvV,EACVuV,EAAM,EAAItV,EACVsV,EAAM,WAAY,EAClB8qD,IAAW,aAAergE,EAAI6gE,EAAQN,EAAMtgE,EAAI6gE,EAAQP,EAC5D,CAAG,CACH,CASO,IAAIx5D,GAAMq5D,GAQCa,GAAab,GAAW,UAAU,EAQlCa,GAAab,GAAW,YAAY,EA2B/C,SAASc,GAAcC,EAAcC,EAAe7M,EAAQ,CACjEA,EAAS8M,GAA6B9M,GAAU,CAAC,EACjD,IAAIryB,EAAiBk/B,EAAc,MAC/BE,EAAkBF,EAAc,OAChCvvD,EAAOyZ,GAAa61C,EAAa,KAAMj/B,CAAc,EACrDq/B,EAAMj2C,GAAa61C,EAAa,IAAKG,CAAe,EACpDxvD,EAAQwZ,GAAa61C,EAAa,MAAOj/B,CAAc,EACvDs/B,EAASl2C,GAAa61C,EAAa,OAAQG,CAAe,EAC1DhpE,EAAQgzB,GAAa61C,EAAa,MAAOj/B,CAAc,EACvDn2B,EAASuf,GAAa61C,EAAa,OAAQG,CAAe,EAC1DG,EAAiBlN,EAAO,CAAC,EAAIA,EAAO,CAAC,EACrCmN,EAAmBnN,EAAO,CAAC,EAAIA,EAAO,CAAC,EACvC5G,EAASwT,EAAa,OAuC1B,OArCI,MAAM7oE,CAAK,IACbA,EAAQ4pC,EAAiBpwB,EAAQ4vD,EAAmB7vD,GAElD,MAAM9F,CAAM,IACdA,EAASu1D,EAAkBE,EAASC,EAAiBF,GAEnD5T,GAAU,OAQR,MAAMr1D,CAAK,GAAK,MAAMyT,CAAM,IAC1B4hD,EAASzrB,EAAiBo/B,EAC5BhpE,EAAQ4pC,EAAiB,GAEzBn2B,EAASu1D,EAAkB,IAI3B,MAAMhpE,CAAK,IACbA,EAAQq1D,EAAS5hD,GAEf,MAAMA,CAAM,IACdA,EAASzT,EAAQq1D,IAIjB,MAAM97C,CAAI,IACZA,EAAOqwB,EAAiBpwB,EAAQxZ,EAAQopE,GAEtC,MAAMH,CAAG,IACXA,EAAMD,EAAkBE,EAASz1D,EAAS01D,GAGpCN,EAAa,MAAQA,EAAa,MAAK,CAC7C,IAAK,SACHtvD,EAAOqwB,EAAiB,EAAI5pC,EAAQ,EAAIi8D,EAAO,CAAC,EAChD,MACF,IAAK,QACH1iD,EAAOqwB,EAAiB5pC,EAAQopE,EAChC,KACN,CACE,OAAQP,EAAa,KAAOA,EAAa,OAAM,CAC7C,IAAK,SACL,IAAK,SACHI,EAAMD,EAAkB,EAAIv1D,EAAS,EAAIwoD,EAAO,CAAC,EACjD,MACF,IAAK,SACHgN,EAAMD,EAAkBv1D,EAAS01D,EACjC,KACN,CAEE5vD,EAAOA,GAAQ,EACf0vD,EAAMA,GAAO,EACT,MAAMjpE,CAAK,IAEbA,EAAQ4pC,EAAiBw/B,EAAmB7vD,GAAQC,GAAS,IAE3D,MAAM/F,CAAM,IAEdA,EAASu1D,EAAkBG,EAAiBF,GAAOC,GAAU,IAE/D,IAAIt7D,EAAO,IAAI4F,GAAa+F,EAAO0iD,EAAO,CAAC,EAAGgN,EAAMhN,EAAO,CAAC,EAAGj8D,EAAOyT,CAAM,EAC5E,OAAA7F,EAAK,OAASquD,EACPruD,CACT,CAyCO,SAASy7D,GAAgB58D,EAAIo8D,EAAcC,EAAe7M,EAAQzsD,EAAK1H,EAAK,CAIjFA,EAAMA,GAAO2E,EACb3E,EAAI,EAAI2E,EAAG,EACX3E,EAAI,EAAI2E,EAAG,EAIX,IAAImB,EAKF,GADAA,EAAOnB,EAAG,gBAAiB,EACvBA,EAAG,qBAAsB,CAC3B,IAAIklB,EAAYllB,EAAG,kBAAmB,EAGtCmB,EAAOA,EAAK,MAAO,EACnBA,EAAK,eAAe+jB,CAAS,CACnC,CAGE,IAAIsC,EAAa20C,GAAc7E,EAAgB,CAC7C,MAAOn2D,EAAK,MACZ,OAAQA,EAAK,MACjB,EAAKi7D,CAAY,EAAGC,EAAe7M,CAAM,EAInC7yD,EAAS6qB,EAAW,EAAIrmB,EAAK,EAC7BvE,EAAS4qB,EAAW,EAAIrmB,EAAK,EAK/B,OAAA9F,EAAI,GAAKsB,EACTtB,EAAI,GAAKuB,EAEPvB,IAAQ2E,GACVA,EAAG,WAAY,EAEV,EACT,CAQO,SAAS68D,GAAgBC,EAAK,CACnC,IAAIC,EAAaD,EAAI,YAAcA,EAAI,YAAY,WACnD,OAAO/B,EAAgBgC,CAAU,EAAIA,EAAaA,EAAa,CAC7D,KAAMA,CACV,EAAM,IACN,CAwBO,SAASC,GAAiBC,EAActmC,EAAW5zB,EAAK,CAC7D,IAAIm6D,EAAan6D,GAAOA,EAAI,WAC5B,CAAC00D,EAAeyF,CAAU,IAAMA,EAAa,CAACA,EAAYA,CAAU,GACpE,IAAIC,EAAU1nE,EAAM2lE,GAAS,CAAC,EAAG,CAAC,EAC9BgC,EAAU3nE,EAAM2lE,GAAS,CAAC,EAAG,CAAC,EAClCh3D,EAAKg3D,GAAS,CAAC,EAAG6B,EAAcE,CAAO,EACvC/4D,EAAKg3D,GAAS,CAAC,EAAG6B,EAAcG,CAAO,EACvC,SAAS3nE,EAAM4nE,EAAOC,EAAO,CAC3B,IAAIC,EAAY,CAAE,EACdC,EAAgB,EAChBC,EAAS,CAAE,EACXC,EAAmB,EACnBC,EAAoB,EAWxB,GAVAvmE,GAAKimE,EAAO,SAAUv6D,EAAM,CAC1B26D,EAAO36D,CAAI,EAAIm6D,EAAan6D,CAAI,CACtC,CAAK,EACD1L,GAAKimE,EAAO,SAAUv6D,EAAM,CAG1B86D,EAAQjnC,EAAW7zB,CAAI,IAAMy6D,EAAUz6D,CAAI,EAAI26D,EAAO36D,CAAI,EAAI6zB,EAAU7zB,CAAI,GAC5E+6D,EAASN,EAAWz6D,CAAI,GAAK06D,IAC7BK,EAASJ,EAAQ36D,CAAI,GAAK46D,GAChC,CAAK,EACGR,EAAWI,CAAK,EAElB,OAAIO,EAASlnC,EAAW0mC,EAAM,CAAC,CAAC,EAC9BI,EAAOJ,EAAM,CAAC,CAAC,EAAI,KACVQ,EAASlnC,EAAW0mC,EAAM,CAAC,CAAC,IACrCI,EAAOJ,EAAM,CAAC,CAAC,EAAI,MAEdI,EAMT,GAAIC,IAAqBC,GAAqB,CAACH,EAC7C,OAAOC,EAKJ,GAAID,GAAiBG,EACxB,OAAOJ,EAGP,QAAS5qE,EAAI,EAAGA,EAAI0qE,EAAM,OAAQ1qE,IAAK,CACrC,IAAI08D,EAASgO,EAAM1qE,CAAC,EACpB,GAAI,CAACirE,EAAQL,EAAWlO,CAAM,GAAKuO,EAAQX,EAAc5N,CAAM,EAAG,CAChEkO,EAAUlO,CAAM,EAAI4N,EAAa5N,CAAM,EACvC,KACV,CACA,CACM,OAAOkO,CAEb,CACE,SAASK,EAAQ7pE,EAAK+O,EAAM,CAC1B,OAAO/O,EAAI,eAAe+O,CAAI,CAClC,CACE,SAAS+6D,EAAS9pE,EAAK+O,EAAM,CAC3B,OAAO/O,EAAI+O,CAAI,GAAK,MAAQ/O,EAAI+O,CAAI,IAAM,MAC9C,CACE,SAASsB,EAAKi5D,EAAO3nE,EAAQT,EAAQ,CACnCmC,GAAKimE,EAAO,SAAUv6D,EAAM,CAC1BpN,EAAOoN,CAAI,EAAI7N,EAAO6N,CAAI,CAChC,CAAK,CACL,CACA,CAIO,SAASg7D,GAAgB7oE,EAAQ,CACtC,OAAO8oE,GAAiB,CAAE,EAAE9oE,CAAM,CACpC,CAMO,SAAS8oE,GAAiBroE,EAAQT,EAAQ,CAC/C,OAAAA,GAAUS,GAAU0B,GAAK+jE,GAAiB,SAAUr4D,EAAM,CACxD7N,EAAO,eAAe6N,CAAI,IAAMpN,EAAOoN,CAAI,EAAI7N,EAAO6N,CAAI,EAC9D,CAAG,EACMpN,CACT,CC9YA,IAAIsoE,GAAQ9mC,GAAW,EACnB+mC,GAA8B,SAAUh1D,EAAQ,CAClDC,EAAU+0D,EAAgBh1D,CAAM,EAChC,SAASg1D,EAAezM,EAAQC,EAAan6B,EAAS,CACpD,IAAInuB,EAAQF,EAAO,KAAK,KAAMuoD,EAAQC,EAAan6B,CAAO,GAAK,KAC/D,OAAAnuB,EAAM,IAAM+0D,GAAqB,cAAc,EACxC/0D,CACX,CACE,OAAA80D,EAAe,UAAU,KAAO,SAAUzM,EAAQC,EAAan6B,EAAS,CACtE,KAAK,qBAAqBk6B,EAAQl6B,CAAO,CAC1C,EACD2mC,EAAe,UAAU,qBAAuB,SAAUzM,EAAQl6B,EAAS,CACzE,IAAIylC,EAAaoB,GAAuB,IAAI,EACxCC,EAAsBrB,EAAasB,GAAuB7M,CAAM,EAAI,CAAE,EACtE8M,EAAahnC,EAAQ,SAAU,EACnCw8B,EAAatC,EAAQ8M,EAAW,IAAI,KAAK,QAAQ,CAAC,EAClDxK,EAAatC,EAAQ,KAAK,kBAAkB,EACxCuL,GACFwB,GAAwB/M,EAAQ4M,EAAqBrB,CAAU,CAElE,EACDkB,EAAe,UAAU,YAAc,SAAUzM,EAAQl6B,EAAS,CAChEw8B,EAAa,KAAK,OAAQtC,EAAQ,EAAI,EACtC,IAAIuL,EAAaoB,GAAuB,IAAI,EACxCpB,GACFwB,GAAwB,KAAK,OAAQ/M,EAAQuL,CAAU,CAE1D,EAIDkB,EAAe,UAAU,cAAgB,SAAUO,EAAcC,EAAQ,CAAE,EAuD3ER,EAAe,UAAU,iBAAmB,UAAY,CACtD,IAAIS,EAAO,KAAK,YAIhB,GAAI,CAACxkC,GAAgBwkC,CAAI,EAEvB,OAAOA,EAAK,cAGd,IAAIC,EAASX,GAAM,IAAI,EACvB,GAAI,CAACW,EAAO,cAAe,CAGzB,QAFIC,EAAU,CAAE,EACZzkC,EAAMukC,EACHvkC,GAAK,CACV,IAAIp3B,EAAMo3B,EAAI,UAAU,cACxBp3B,GAAO67D,EAAQ,KAAK77D,CAAG,EACvBo3B,EAAMA,EAAI,UAClB,CAEM,QADI0kC,EAAgB,CAAE,EACblsE,EAAIisE,EAAQ,OAAS,EAAGjsE,GAAK,EAAGA,IACvCksE,EAAgB/K,EAAa+K,EAAeD,EAAQjsE,CAAC,EAAG,EAAI,EAE9DgsE,EAAO,cAAgBE,CAC7B,CACI,OAAOF,EAAO,aACf,EASDV,EAAe,UAAU,uBAAyB,SAAUxnC,EAAU1zB,EAAK,CACzE,IAAI+7D,EAAWroC,EAAW,QACtBsoC,EAAQtoC,EAAW,KACvB,OAAOuB,GAAyB,KAAK,QAASvB,EAAU,CACtD,MAAO,KAAK,IAAIqoC,EAAU,EAAI,EAC9B,GAAI,KAAK,IAAIC,EAAO,EAAI,CACzB,EAAEh8D,CAAG,CACP,EACDk7D,EAAe,UAAU,mBAAqB,UAAY,CAExD,IAAIe,EAAiB,KACrB,MAAO,CACL,KAAMA,EAAe,IAAI,MAAM,EAC/B,IAAKA,EAAe,IAAI,KAAK,EAC7B,MAAOA,EAAe,IAAI,OAAO,EACjC,OAAQA,EAAe,IAAI,QAAQ,EACnC,MAAOA,EAAe,IAAI,OAAO,EACjC,OAAQA,EAAe,IAAI,QAAQ,CACpC,CACF,EAMDf,EAAe,UAAU,aAAe,UAAY,CAClD,MAAO,EACR,EACDA,EAAe,UAAU,UAAY,SAAUgB,EAAQ,CACrD,KAAK,OAAO,OAASA,CACtB,EACDhB,EAAe,gBAAkB,UAAY,CAC3C,IAAI3jE,EAAQ2jE,EAAe,UAC3B3jE,EAAM,KAAO,YACbA,EAAM,GAAK,GACXA,EAAM,KAAO,GACbA,EAAM,SAAW,GACjBA,EAAM,QAAU,GAChBA,EAAM,eAAiB,CAC3B,EAAK,EACI2jE,CACT,EAAE1M,EAAK,EACPt2B,GAAYgjC,GAAgB1M,EAAK,EACjC/1B,GAAsByiC,EAAc,EACpCiB,GAAqCjB,EAAc,EACnDkB,GAAsClB,GAAgBmB,EAAe,EACrE,SAASA,GAAgBtlC,EAAe,CACtC,IAAIulC,EAAO,CAAE,EACbn9C,OAAAA,EAAY+7C,GAAe,qBAAqBnkC,CAAa,EAAG,SAAUK,EAAK,CAC7EklC,EAAOA,EAAK,OAAOllC,EAAI,cAAgBA,EAAI,UAAU,cAAgB,EAAE,CAC3E,CAAG,EAEDklC,EAAOt+C,EAAWs+C,EAAM,SAAUlnE,EAAM,CACtC,OAAO0hC,GAAe1hC,CAAI,EAAE,IAChC,CAAG,EAEG2hC,IAAkB,WAAapM,EAAe2xC,EAAM,SAAS,GAAK,GACpEA,EAAK,QAAQ,SAAS,EAEjBA,CACT,CC5LA,IAAIC,GAAW,GAEX,OAAO,UAAc,MAEvBA,GAAW,UAAU,UAAY,IAEnC,IAAIC,GAAa,qBACjB,MAAeC,GAAA,CACb,SAAU,OAEV,QAAS,SACT,MAAO,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EACzG,cAAe,CAAC,UAAW,UAAW,SAAS,EAC/C,KAAM,CACJ,MAAO,CACL,OAAQ,CAAC,CACP,MAAOD,GACP,WAAY,CAAC,EAAG,CAAC,EACjB,WAAY,CAAC,EAAG,CAAC,EACjB,WAAY,EACZ,SAAU,KAAK,GAAK,CAC5B,EAAS,CACD,MAAOA,GACP,OAAQ,SACR,WAAY,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,EACjC,WAAY,CAAC,EAAG,CAAC,EACjB,WAAY,EACpB,EAAS,CACD,MAAOA,GACP,WAAY,CAAC,EAAG,CAAC,EACjB,WAAY,CAAC,EAAG,CAAC,EACjB,SAAU,CAAC,KAAK,GAAK,CAC7B,EAAS,CACD,MAAOA,GACP,WAAY,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,EACjC,WAAY,CAAC,EAAG,CAAC,CACzB,EAAS,CACD,MAAOA,GACP,WAAY,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EAC3B,WAAY,CAAC,EAAG,EAAG,EAAG,CAAC,EACvB,SAAU,KAAK,GAAK,CAC5B,EAAS,CACD,MAAOA,GACP,OAAQ,WACR,WAAY,CAAC,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,CAAC,EACjC,WAAY,CAAC,EAAG,CAAC,EACjB,WAAY,GACb,CAAA,CACP,CACG,EAGD,UAAW,CAIT,WAAYD,GAAS,MAAM,MAAM,EAAI,kBAAoB,aAEzD,SAAU,GACV,UAAW,SACX,WAAY,QACb,EAID,UAAW,KACX,eAAgB,CACd,SAAU,IACV,OAAQ,UACT,EACD,UAAW,OACX,kBAAmB,IACnB,wBAAyB,IACzB,gBAAiB,aACjB,sBAAuB,aACvB,mBAAoB,IAEpB,qBAAsB,IACtB,YAAa,IAMb,oBAAqB,IAErB,OAAQ,EACV,ECnFO,IAAIG,GAAoB1lE,EAAc,CAAC,UAAW,QAAS,WAAY,SAAU,cAAe,mBAAoB,YAAY,CAAC,EAC7H2lE,GAAyB,WACzBC,GAA2B,YAC3BC,GAA4B,aAC5BC,GAA8B,eAC9BC,GAA4B,aAC5BC,GAAwB,UACxBC,GAA0B,SAC1BC,GAAuB,MCRvBC,GAAa,CACtB,KAAM,EACN,MAAO,EACP,IAAK,CACP,EACIC,GAAmBjpC,GAAW,EAI3B,SAASkpC,GAAqB9oC,EAAS,CAE5C6oC,GAAiB7oC,CAAO,EAAE,WAAav9B,EAAe,CACxD,CAgBO,SAASsmE,GAAgCC,EAAiB7oB,EAAaxiD,EAAQ,CACpF,IAAImlE,EAAS,CAAE,EACXmG,EAAeC,GAAgC/oB,CAAW,EAE9D,GAAI,CAAC8oB,GAAgB,CAACD,EACpB,OAAOlG,EAET,IAAIqG,EAAiB,CAAE,EACnBC,EAAmB,CAAE,EACrBppC,EAAUmgB,EAAY,QACtBkpB,EAAaR,GAAiB7oC,CAAO,EAAE,WACvC9hC,EAAM+qE,EAAa,IAAM,IAAMtrE,EAAO,eACtC2rE,EACAC,EACJP,EAAkBA,EAAgB,MAAO,EACzClpE,EAAKkpE,EAAiB,SAAUQ,EAAmBC,EAAa,CAC9D,IAAIC,EAAeprE,EAASkrE,CAAiB,EAAIA,EAAoBR,EAAgBS,CAAW,EAAI,CAClG,KAAMD,CACP,EACGE,EAAa,OAAS,WAAaJ,GAAwB,OAC7DA,EAAuBG,EACvBF,EAA2BI,EAA0BD,CAAY,GAEnE5G,EAAO4G,EAAa,IAAI,EAAI,CAAE,CAClC,CAAG,EACD,IAAIE,EAAgBP,EAAW,IAAInrE,CAAG,GAAKmrE,EAAW,IAAInrE,EAAK,CAC7D,eAAgBqrE,EAChB,YAAa,CACjB,CAAG,EAGDzpE,EAAKkpE,EAAiB,SAAUU,EAAcD,EAAa,CACzD,IAAII,EAAeH,EAAa,KAC5B7oB,EAAQ8oB,EAA0BD,CAAY,EAElD,GAAIJ,GAAwB,KAAM,CAChC,IAAI/zD,EAAQq0D,EAAc,YAC1BE,EAAQhH,EAAO+G,CAAY,EAAGt0D,EAAOsrC,CAAK,EAC1CipB,EAAQV,EAAkB7zD,EAAOsrC,CAAK,EACtC+oB,EAAc,aAAe/oB,CAOnC,SAEayoB,IAAyBG,EAChCK,EAAQhH,EAAO+G,CAAY,EAAG,EAAGhpB,CAAK,EACtCipB,EAAQX,EAAgB,EAAGtoB,CAAK,MAG7B,CACH,IAAItrC,EAAQq0D,EAAc,eAC1BE,EAAQhH,EAAO+G,CAAY,EAAGt0D,EAAOsrC,CAAK,EAC1CipB,EAAQV,EAAkB7zD,EAAOsrC,CAAK,EACtC+oB,EAAc,gBAAkB/oB,CACtC,CACA,CAAG,EACD,SAASipB,EAAQC,EAAWC,EAASC,EAAU,CAC7C,QAAS5uE,EAAI,EAAGA,EAAI4uE,EAAU5uE,IAC5B0uE,EAAU,KAAKC,EAAU3uE,CAAC,CAEhC,CACE,SAASsuE,EAA0BD,EAAc,CAC/C,IAAIQ,EAAUR,EAAa,QAC3B,OAAOQ,EAAUA,EAAQ,OAAS,CACtC,CACE,OAAAf,EAAe,SAAWrG,EAAO,SAAWqG,GAC5CC,EAAiB,SAAWtG,EAAO,WAAasG,GACzCtG,CACT,CA8EO,SAASoG,GAAgC/oB,EAAa,CAM3D,IAAIgqB,EAAWhqB,EAAY,IAAI,OAAQ,EAAI,EAC3C,GAAI,CAACgqB,EACH,OAAOzpC,GAAyByf,EAAY,QAAS,UAAW,CAC9D,MAAOA,EAAY,IAAI,eAAgB,EAAI,EAC3C,GAAIA,EAAY,IAAI,YAAa,EAAI,CAC3C,EAAOrf,EAAgB,EAAE,OAAO,CAAC,CAEjC,CAIO,SAASspC,GAAkCnB,EAAc,CAG9D,MAAI,CAACA,EAAa,IAAI,YAAa,EAAI,GAAK,CAACA,EAAa,IAAI,sBAAuB,EAAI,EAChF,CAAE,EAEJvoC,GAAyBuoC,EAAa,QAAS,UAAW,CAC/D,MAAOA,EAAa,IAAI,mBAAoB,EAAI,EAChD,GAAIA,EAAa,IAAI,gBAAiB,EAAI,CAC9C,EAAKnoC,EAAgB,EAAE,MACvB,CAMO,SAASupC,GAAa1sE,EAAQ2sE,EAAU,CAC7C,OAAOC,GAAe5sE,EAAO,KAAMA,EAAO,aAAcA,EAAO,eAAgBA,EAAO,iBAAkBA,EAAO,WAAY2sE,CAAQ,CACrI,CAGA,SAASC,GAAe1qE,EAAM2qE,EAAcC,EAAgBC,EAAkBC,EAAYL,EAAU,CAClG,IAAI1sE,EAEAgtE,EAAU,EACd,GAAI9pE,GAAajB,CAAI,EACnB,OAAO+oE,GAAW,IAIpB,IAAIiC,EACAC,EACJ,GAAIJ,EAAkB,CACpB,IAAIK,EAAaL,EAAiBJ,CAAQ,EACtChsE,EAASysE,CAAU,GACrBF,EAAUE,EAAW,KACrBD,EAAUC,EAAW,MACZrqE,EAASqqE,CAAU,IAC5BF,EAAUE,EAEhB,CACE,GAAID,GAAW,KACb,OAAOA,IAAY,UAAYlC,GAAW,KAAOA,GAAW,IAE9D,GAAI4B,IAAiBnC,GAA0B,CAC7C,IAAI2C,EAAgBnrE,EACpB,GAAI4qE,IAAmB9B,IAErB,QADIsC,EAASD,EAAcV,CAAQ,EAC1BjvE,EAAI,EAAGA,GAAK4vE,GAAU,CAAE,GAAE,QAAU5vE,EAAIuvE,EAASvvE,IACxD,IAAKuC,EAASstE,EAAYD,EAAON,EAAatvE,CAAC,CAAC,IAAM,KACpD,OAAOuC,MAIX,SAASvC,EAAI,EAAGA,EAAI2vE,EAAc,QAAU3vE,EAAIuvE,EAASvvE,IAAK,CAC5D,IAAI8vE,EAAMH,EAAcL,EAAatvE,CAAC,EACtC,GAAI8vE,IAAQvtE,EAASstE,EAAYC,EAAIb,CAAQ,CAAC,IAAM,KAClD,OAAO1sE,CAEjB,CAEA,SAAa4sE,IAAiBlC,GAA2B,CACrD,IAAI8C,EAAiBvrE,EACrB,GAAI,CAACgrE,EACH,OAAOjC,GAAW,IAEpB,QAASvtE,EAAI,EAAGA,EAAI+vE,EAAe,QAAU/vE,EAAIuvE,EAASvvE,IAAK,CAC7D,IAAI6iC,EAAOktC,EAAe/vE,CAAC,EAC3B,GAAI6iC,IAAStgC,EAASstE,EAAYhtC,EAAK2sC,CAAO,CAAC,IAAM,KACnD,OAAOjtE,CAEf,CACA,SAAa4sE,IAAiBjC,GAA6B,CACvD,IAAI8C,EAAmBxrE,EACvB,GAAI,CAACgrE,EACH,OAAOjC,GAAW,IAEpB,IAAIqC,EAASI,EAAiBR,CAAO,EACrC,GAAI,CAACI,GAAUnqE,GAAamqE,CAAM,EAChC,OAAOrC,GAAW,IAEpB,QAASvtE,EAAI,EAAGA,EAAI4vE,EAAO,QAAU5vE,EAAIuvE,EAASvvE,IAChD,IAAKuC,EAASstE,EAAYD,EAAO5vE,CAAC,CAAC,IAAM,KACvC,OAAOuC,CAGf,SAAa4sE,IAAiBpC,GAE1B,QADIkD,EAAezrE,EACVxE,EAAI,EAAGA,EAAIiwE,EAAa,QAAUjwE,EAAIuvE,EAASvvE,IAAK,CAC3D,IAAI6iC,EAAOotC,EAAajwE,CAAC,EACrBqB,EAAM2/B,GAAiB6B,CAAI,EAC/B,GAAI,CAACz/B,EAAQ/B,CAAG,EACd,OAAOksE,GAAW,IAEpB,IAAKhrE,EAASstE,EAAYxuE,EAAI4tE,CAAQ,CAAC,IAAM,KAC3C,OAAO1sE,CAEf,CAEE,SAASstE,EAAYxuE,EAAK,CACxB,IAAI6uE,EAAQ7qE,EAAShE,CAAG,EAGxB,GAAIA,GAAO,MAAQ,OAAO,SAAS,OAAOA,CAAG,CAAC,GAAKA,IAAQ,GACzD,OAAO6uE,EAAQ3C,GAAW,MAAQA,GAAW,IACxC,GAAI2C,GAAS7uE,IAAQ,IAC1B,OAAOksE,GAAW,IAExB,CACE,OAAOA,GAAW,GACpB,CCnTA,IAAI4C,GAA2B/oE,EAAc,EAC7B,SAAAgpE,GAA8BtsC,EAAUusC,EAAS,CAC/DjqE,GAAO+pE,GAAyB,IAAIrsC,CAAQ,GAAK,MAAQusC,CAAO,EACvCF,GAAA,IAAIrsC,EAAUusC,CAAO,CAChD,CACgB,SAAAC,GAAsB3rC,EAASb,EAAUysC,EAAmB,CACtE,IAAAC,EAAwBL,GAAyB,IAAIrsC,CAAQ,EACjE,GAAI,CAAC0sC,EACI,OAAAD,EAEL,IAAAE,EAAkBD,EAAsB7rC,CAAO,EACnD,OAAK8rC,EAQEF,EAAkB,OAAOE,CAAe,EAPtCF,CAQX,CCrBA,IAAIG,GAAansC,GAAW,EACXA,GAAS,EAC1B,IAAIosC,GAA4B,UAAY,CAC1C,SAASA,GAAe,CAAA,CACxB,OAAAA,EAAa,UAAU,oBAAsB,SAAUxgE,EAAMwe,EAAOiiD,EAAY,CAC9E,IAAIC,EAAiBlwC,GAAiB,KAAK,IAAI,QAAS,EAAI,CAAC,EACzDmwC,EAAiB,KAAK,IAAI,aAAc,EAAI,EAChD,OAAOC,GAAe,KAAML,GAAYG,EAAgBC,EAAgB3gE,EAAMwe,EAAOiiD,CAAU,CAChG,EACDD,EAAa,UAAU,kBAAoB,UAAY,CACrDK,GAAa,KAAMN,EAAU,CAC9B,EACMC,CACT,EAAG,EAKH,SAASM,GAAkBC,EAAUC,EAAiB,CAGpD,QAFIC,EAAaF,EAAS,OAEjB,EAAI,EAAG,EAAIE,EAAY,IAC9B,GAAIF,EAAS,CAAC,EAAE,OAASC,EACvB,OAAOD,EAAS,CAAC,EAGrB,OAAOA,EAASE,EAAa,CAAC,CAChC,CAOA,SAASL,GAAeM,EAAMhG,EAAOwF,EAAgBC,EAAgB3gE,EAAMwe,EAAOiiD,EAAY,CAC5FjiD,EAAQA,GAAS0iD,EACjB,IAAIC,EAAcjG,EAAM18C,CAAK,EACzB4iD,EAAaD,EAAY,YAAc,EACvCE,EAAiBF,EAAY,eAAiBA,EAAY,gBAAkB,CAAE,EAElF,GAAIE,EAAe,eAAerhE,CAAI,EACpC,OAAOqhE,EAAerhE,CAAI,EAE5B,IAAIshE,EAAUb,GAAc,MAAQ,CAACE,EAAiBD,EAAiBI,GAAkBH,EAAgBF,CAAU,EAGnH,GADAa,EAAUA,GAAWZ,EACjB,GAACY,GAAW,CAACA,EAAQ,QAGzB,KAAIC,EAAoBD,EAAQF,CAAU,EAC1C,OAAIphE,IACFqhE,EAAerhE,CAAI,EAAIuhE,GAEzBJ,EAAY,YAAcC,EAAa,GAAKE,EAAQ,OAC7CC,EACT,CACA,SAASV,GAAaK,EAAMhG,EAAO,CACjCA,EAAMgG,CAAI,EAAE,WAAa,EACzBhG,EAAMgG,CAAI,EAAE,eAAiB,CAAE,CACjC,CCjCA,IAAIM,GACAC,GACAC,GACAC,GAAmB,cACnBC,GAAqB,EAiErBC,GAA2B,SAAU17D,EAAQ,CAC/CC,EAAUy7D,EAAa17D,CAAM,EAC7B,SAAS07D,GAAc,CACrB,OAAO17D,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAAA,CAE7D07D,OAAAA,EAAY,UAAU,KAAO,SAAUnT,EAAQC,EAAan6B,EAASstC,EAAOnQ,EAAQoQ,EAAe,CACjGD,EAAQA,GAAS,CAAC,EAClB,KAAK,OAAS,KACT,KAAA,OAAS,IAAIrT,GAAMqT,CAAK,EACxB,KAAA,QAAU,IAAIrT,GAAMkD,CAAM,EAC/B,KAAK,eAAiBoQ,CACxB,EACAF,EAAY,UAAU,UAAY,SAAUnT,EAAQ77C,EAAMmvD,EAAyB,CAK7E,IAAAC,EAAWC,GAAwBrvD,CAAI,EAC3C,KAAK,eAAe,UAAU67C,EAAQsT,EAAyBC,CAAQ,EAClE,KAAA,aAAa,KAAMA,CAAQ,CAClC,EAQAJ,EAAY,UAAU,YAAc,SAAUxsE,EAAM4K,EAAK,CACvD,OAAO,KAAK,aAAa5K,EAAM6sE,GAAwBjiE,CAAG,CAAC,CAC7D,EACA4hE,EAAY,UAAU,aAAe,SAAUxsE,EAAM4K,EAAK,CACxD,IAAIkiE,EAAgB,GAChBJ,EAAgB,KAAK,eACrB,GAAA,CAAC1sE,GAAQA,IAAS,WAAY,CAChC,IAAI+sE,EAAaL,EAAc,YAAY1sE,IAAS,UAAU,EAI1D,CAAC,KAAK,QAAUA,IAAS,WAC3BqsE,GAAS,KAAMU,CAAU,GAEzB,KAAK,YAAY,EACZ,KAAA,aAAaA,EAAYniE,CAAG,GAEnBkiE,EAAA,EAAA,CAalB,IAXI9sE,IAAS,YAAcA,IAAS,UAClC,KAAK,YAAY,EAUf,CAACA,GAAQA,IAAS,YAAcA,IAAS,WAAY,CACnD,IAAAgtE,EAAiBN,EAAc,kBAAkB,IAAI,EACrDM,IACcF,EAAA,GACX,KAAA,aAAaE,EAAgBpiE,CAAG,EACvC,CAEF,GAAI,CAAC5K,GAAQA,IAAS,YAAcA,IAAS,QAAS,CAChD,IAAAitE,EAAeP,EAAc,eAAe,IAAI,EAChDO,EAAa,QACVhuE,EAAAguE,EAAc,SAAUC,EAAa,CACxBJ,EAAA,GACX,KAAA,aAAaI,EAAatiE,CAAG,GACjC,IAAI,CACT,CAEK,OAAAkiE,CACT,EACAN,EAAY,UAAU,YAAc,SAAUnT,EAAQ,CAC/C,KAAA,aAAaA,EAAQ,IAAI,CAChC,EACAmT,EAAY,UAAU,aAAe,SAAUhuC,EAAW5zB,EAAK,CAC7D,IAAIyuD,EAAS,KAAK,OACd8T,EAAgB,KAAK,eACrBC,EAAkB,KAAK,iBACvBC,EAAe,CAAC,EAChBC,EAAiB1rE,EAAc,EAC/B2rE,EAA0B3iE,GAAOA,EAAI,wBACzCq9D,GAAqB,IAAI,EAGpBhpE,EAAAu/B,EAAW,SAAUgvC,EAAiBlvC,EAAU,CAC/CkvC,GAAmB,OAGlB1H,GAAe,SAASxnC,CAAQ,EAG1BA,IACT+uC,EAAa,KAAK/uC,CAAQ,EACXgvC,EAAA,IAAIhvC,EAAU,EAAI,GAHjC+6B,EAAO/6B,CAAQ,EAAI+6B,EAAO/6B,CAAQ,GAAK,KAAOzhC,EAAM2wE,CAAe,EAAIlwE,EAAM+7D,EAAO/6B,CAAQ,EAAGkvC,EAAiB,EAAI,EAItH,CACD,EACGD,GAKsBA,EAAA,KAAK,SAAU1xE,EAAK4xE,EAAwB,CAC9D3H,GAAe,SAAS2H,CAAsB,GAAK,CAACH,EAAe,IAAIG,CAAsB,IAC/FJ,EAAa,KAAKI,CAAsB,EACzBH,EAAA,IAAIG,EAAwB,EAAI,EACjD,CACD,EAEH3H,GAAe,kBAAkBuH,EAAcvH,GAAe,qBAAqB,EAAG4H,EAAgB,IAAI,EAC1G,SAASA,EAAepvC,EAAU,CAC5B,IAAAysC,EAAoBD,GAAsB,KAAMxsC,EAAUqvC,GAA2BnvC,EAAUF,CAAQ,CAAC,CAAC,EACzGsvC,EAAcT,EAAc,IAAI7uC,CAAQ,EACxCuvC,EAEHD,EAA6BL,GAA2BA,EAAwB,IAAIjvC,CAAQ,EAAI,eAAiB,cAAnG,aACXD,EAAgByvC,GAA0BF,EAAa7C,EAAmB8C,CAAS,EAE7EE,GAA0B1vC,EAAeC,EAAUwnC,EAAc,EAI3EzM,EAAO/6B,CAAQ,EAAI,KACL6uC,EAAA,IAAI7uC,EAAU,IAAI,EAChB8uC,EAAA,IAAI9uC,EAAU,CAAC,EAC/B,IAAI0vC,EAAoB,CAAC,EACrBC,EAAkB,CAAC,EACnBC,EAAuB,EACvBC,EAEClvE,EAAAo/B,EAAe,SAAUtB,EAAYvH,EAAO,CAC/C,IAAIyI,EAAiBlB,EAAW,SAC5B2B,EAAgB3B,EAAW,UAC/B,GAAI,CAAC2B,EACCT,IAIaA,EAAA,YAAY,CAAC,EAAG,IAAI,EACpBA,EAAA,cAAc,CAAC,EAAG,EAAK,OAKnC,CACL,IAAImwC,EAAe9vC,IAAa,SAC5B+vC,EAAsBvI,GAAe,SAASxnC,EAAUvB,EAAW,QAAQ,QAAS,CAACqxC,CACzF,EACA,GAAI,CAACC,EAaH,OAGF,GAAI/vC,IAAa,UAAW,CAC1B,GAAI6vC,EAOF,OAEcA,EAAA,EAAA,CAEd,GAAAlwC,GAAkBA,EAAe,cAAgBowC,EACpCpwC,EAAA,KAAOlB,EAAW,QAAQ,KAE1BkB,EAAA,YAAYS,EAAe,IAAI,EAC/BT,EAAA,cAAcS,EAAe,EAAK,MAC5C,CAEL,IAAI4vC,EAAWxwE,EAAO,CACpB,eAAgB03B,CAAA,EACfuH,EAAW,OAAO,EACrBkB,EAAiB,IAAIowC,EAAoB3vC,EAAe,KAAM,KAAM4vC,CAAQ,EAE5ExwE,EAAOmgC,EAAgBqwC,CAAQ,EAC3BvxC,EAAW,WACbkB,EAAe,iBAAmB,IAErBA,EAAA,KAAKS,EAAe,KAAM,IAAI,EAK9BT,EAAA,cAAc,KAAM,EAAI,CAAA,CACzC,CAEEA,GACgB+vC,EAAA,KAAK/vC,EAAe,MAAM,EAC5CgwC,EAAgB,KAAKhwC,CAAc,EACnCiwC,MAGAF,EAAkB,KAAK,MAAM,EAC7BC,EAAgB,KAAK,MAAM,IAE5B,IAAI,EACP5U,EAAO/6B,CAAQ,EAAI0vC,EACLb,EAAA,IAAI7uC,EAAU2vC,CAAe,EAC3Bb,EAAA,IAAI9uC,EAAU4vC,CAAoB,EAE9C5vC,IAAa,UACf6tC,GAAsB,IAAI,CAC5B,CAGG,KAAK,gBACRA,GAAsB,IAAI,CAE9B,EAIAK,EAAY,UAAU,UAAY,UAAY,CACxC,IAAAnT,EAASx8D,EAAM,KAAK,MAAM,EACzBoC,OAAAA,EAAAo6D,EAAQ,SAAUkV,EAAejwC,EAAU,CAC1C,GAAAwnC,GAAe,SAASxnC,CAAQ,EAAG,CAOrC,QANI9gB,EAAOmwD,GAA2BY,CAAa,EAI/CC,EAAUhxD,EAAK,OACfixD,EAAc,GACTj0E,EAAIg0E,EAAU,EAAGh0E,GAAK,EAAGA,IAE5BgjB,EAAKhjB,CAAC,GAAK,CAACk0E,GAAgClxD,EAAKhjB,CAAC,CAAC,EACvCi0E,EAAA,IAEdjxD,EAAKhjB,CAAC,EAAI,KACV,CAACi0E,GAAeD,KAGpBhxD,EAAK,OAASgxD,EACdnV,EAAO/6B,CAAQ,EAAI9gB,CAAA,CACrB,CACD,EACD,OAAO67C,EAAOiT,EAAgB,EACvBjT,CACT,EACAmT,EAAY,UAAU,SAAW,UAAY,CAC3C,OAAO,KAAK,MACd,EACAA,EAAY,UAAU,eAAiB,UAAY,CACjD,OAAO,KAAK,OACd,EACAA,EAAY,UAAU,iBAAmB,SAAU1tC,EAAS,CAC1D,KAAK,SAAWA,CAClB,EACA0tC,EAAY,UAAU,iBAAmB,UAAY,CACnD,OAAO,KAAK,QACd,EAIAA,EAAY,UAAU,aAAe,SAAUluC,EAAU5lB,EAAK,CAC5D,IAAIlG,EAAO,KAAK,eAAe,IAAI8rB,CAAQ,EAC3C,GAAI9rB,EAAM,CACJ,IAAAm8D,EAAOn8D,EAAKkG,GAAO,CAAC,EACxB,GAAIi2D,EACK,OAAAA,EACT,GAAWj2D,GAAO,MAChB,QAASle,EAAI,EAAGA,EAAIgY,EAAK,OAAQhY,IAC3B,GAAAgY,EAAKhY,CAAC,EACR,OAAOgY,EAAKhY,CAAC,EAGnB,CAEJ,EAIAgyE,EAAY,UAAU,gBAAkB,SAAU3rE,EAAW,CAC3D,IAAIy9B,EAAWz9B,EAAU,SACzB,GAAI,CAACy9B,EACH,MAAO,CAAC,EAEV,IAAI9I,EAAQ30B,EAAU,MAClBo1B,EAAKp1B,EAAU,GACf8J,EAAO9J,EAAU,KACjB+tE,EAAQ,KAAK,eAAe,IAAItwC,CAAQ,EAC5C,GAAI,CAACswC,GAAS,CAACA,EAAM,OACnB,MAAO,CAAC,EAEN,IAAA7xE,EACJ,OAAIy4B,GAAS,MACXz4B,EAAS,CAAC,EACVkC,EAAK0uE,GAA2Bn4C,CAAK,EAAG,SAAU9c,EAAK,CACrDk2D,EAAMl2D,CAAG,GAAK3b,EAAO,KAAK6xE,EAAMl2D,CAAG,CAAC,CAAA,CACrC,GACQud,GAAM,KACNl5B,EAAA8xE,GAAgB,KAAM54C,EAAI24C,CAAK,EAC/BjkE,GAAQ,KACR5N,EAAA8xE,GAAgB,OAAQlkE,EAAMikE,CAAK,EAGnC7xE,EAAAwC,GAAOqvE,EAAO,SAAUD,EAAM,CACrC,MAAO,CAAC,CAACA,CAAA,CACV,EAEIG,GAAgB/xE,EAAQ8D,CAAS,CAC1C,EAkBA2rE,EAAY,UAAU,eAAiB,SAAU3rE,EAAW,CAC1D,IAAIkE,EAAQlE,EAAU,MAClBy9B,EAAWz9B,EAAU,SACrBkuE,EAAYC,EAAajqE,CAAK,EAC9BhI,EAASgyE,EAAY,KAAK,gBAAgBA,CAAS,EAErDxvE,GAAO,KAAK,eAAe,IAAI++B,CAAQ,EAAG,SAAUqwC,EAAM,CAC1D,MAAO,CAAC,CAACA,CAAA,CACV,EACD,OAAOM,EAASH,GAAgB/xE,EAAQ8D,CAAS,CAAC,EAClD,SAASmuE,EAAatb,EAAG,CACvB,IAAIwb,EAAY5wC,EAAW,QACvB6wC,EAAS7wC,EAAW,KACpB8wC,EAAW9wC,EAAW,OAC1B,OAAOo1B,IAAMA,EAAEwb,CAAS,GAAK,MAAQxb,EAAEyb,CAAM,GAAK,MAAQzb,EAAE0b,CAAQ,GAAK,MAAQ,CAC/E,SAAA9wC,EAEA,MAAOo1B,EAAEwb,CAAS,EAClB,GAAIxb,EAAEyb,CAAM,EACZ,KAAMzb,EAAE0b,CAAQ,CAAA,EACd,IAAA,CAEN,SAASH,EAAS/zE,EAAK,CACrB,OAAO2F,EAAU,OAAStB,GAAOrE,EAAK2F,EAAU,MAAM,EAAI3F,CAAA,CAE9D,EACAsxE,EAAY,UAAU,cAAgB,SAAUluC,EAAUn/B,EAAIC,EAAS,CACrE,IAAI+tE,EAAgB,KAAK,eACrB,GAAAxtE,EAAW2+B,CAAQ,EAAG,CACxB,IAAI+wC,EAAclwE,EACdmwE,EAAahxC,EACH6uC,EAAA,KAAK,SAAUyB,EAAOjtC,EAAe,CACjD,QAASnnC,EAAI,EAAGo0E,GAASp0E,EAAIo0E,EAAM,OAAQp0E,IAAK,CAC1Cm0E,IAAAA,EAAOC,EAAMp0E,CAAC,EAClBm0E,GAAQW,EAAW,KAAKD,EAAa1tC,EAAegtC,EAAMA,EAAK,cAAc,CAAA,CAC/E,CACD,CAAA,KAGD,SADIC,EAAQ/uE,EAASy+B,CAAQ,EAAI6uC,EAAc,IAAI7uC,CAAQ,EAAI7gC,EAAS6gC,CAAQ,EAAI,KAAK,eAAeA,CAAQ,EAAI,KAC3G9jC,EAAI,EAAGo0E,GAASp0E,EAAIo0E,EAAM,OAAQp0E,IAAK,CAC1C,IAAAm0E,EAAOC,EAAMp0E,CAAC,EAClBm0E,GAAQxvE,EAAG,KAAKC,EAASuvE,EAAMA,EAAK,cAAc,CAAA,CAGxD,EAIAnC,EAAY,UAAU,gBAAkB,SAAU7hE,EAAM,CACtD,IAAI4kE,EAAUC,GAA8B7kE,EAAM,IAAI,EACtD,OAAOpL,GAAO,KAAK,eAAe,IAAI,QAAQ,EAAG,SAAUkwE,EAAW,CACpE,MAAO,CAAC,CAACA,GAAaF,GAAW,MAAQE,EAAU,OAASF,CAAA,CAC7D,CACH,EAIA/C,EAAY,UAAU,iBAAmB,SAAUryB,EAAa,CAC9D,OAAO,KAAK,eAAe,IAAI,QAAQ,EAAEA,CAAW,CACtD,EAKAqyB,EAAY,UAAU,gBAAkB,SAAU5tC,EAAS,CACzD,OAAOr/B,GAAO,KAAK,eAAe,IAAI,QAAQ,EAAG,SAAUkwE,EAAW,CACpE,MAAO,CAAC,CAACA,GAAaA,EAAU,UAAY7wC,CAAA,CAC7C,CACH,EAIA4tC,EAAY,UAAU,UAAY,UAAY,CAC5C,OAAOjtE,GAAO,KAAK,eAAe,IAAI,QAAQ,EAAG,SAAUkwE,EAAW,CACpE,MAAO,CAAC,CAACA,CAAA,CACV,CACH,EAIAjD,EAAY,UAAU,eAAiB,UAAY,CAC1C,OAAA,KAAK,iBAAiB,IAAI,QAAQ,CAC3C,EAKAA,EAAY,UAAU,WAAa,SAAUrtE,EAAIC,EAAS,CACxDgtE,GAAwB,IAAI,EACvBntE,EAAA,KAAK,eAAgB,SAAUywE,EAAgB,CAClD,IAAIC,EAAS,KAAK,eAAe,IAAI,QAAQ,EAAED,CAAc,EAC1DvwE,EAAA,KAAKC,EAASuwE,EAAQD,CAAc,GACtC,IAAI,CACT,EAOAlD,EAAY,UAAU,cAAgB,SAAUrtE,EAAIC,EAAS,CAC3DH,EAAK,KAAK,eAAe,IAAI,QAAQ,EAAG,SAAU0wE,EAAQ,CACxDA,GAAUxwE,EAAG,KAAKC,EAASuwE,EAAQA,EAAO,cAAc,CAAA,CACzD,CACH,EAKAnD,EAAY,UAAU,iBAAmB,SAAU5tC,EAASz/B,EAAIC,EAAS,CACvEgtE,GAAwB,IAAI,EACvBntE,EAAA,KAAK,eAAgB,SAAUywE,EAAgB,CAClD,IAAIC,EAAS,KAAK,eAAe,IAAI,QAAQ,EAAED,CAAc,EACzDC,EAAO,UAAY/wC,GAClBz/B,EAAA,KAAKC,EAASuwE,EAAQD,CAAc,GAExC,IAAI,CACT,EAIAlD,EAAY,UAAU,oBAAsB,SAAU5tC,EAASz/B,EAAIC,EAAS,CAC1E,OAAOH,EAAK,KAAK,gBAAgB2/B,CAAO,EAAGz/B,EAAIC,CAAO,CACxD,EACAotE,EAAY,UAAU,iBAAmB,SAAUltB,EAAa,CAC9D,OAAA8sB,GAAwB,IAAI,EACrB,KAAK,kBAAkB,IAAI9sB,EAAY,cAAc,GAAK,IACnE,EACAktB,EAAY,UAAU,wBAA0B,UAAY,CAC1D,OAAQ,KAAK,gBAAkB,CAAA,GAAI,MAAM,CAC3C,EACAA,EAAY,UAAU,aAAe,SAAUrtE,EAAIC,EAAS,CAC1DgtE,GAAwB,IAAI,EAC5B,IAAIwD,EAAmB,CAAC,EACnB3wE,EAAA,KAAK,eAAgB,SAAU4wE,EAAc,CAChD,IAAIF,EAAS,KAAK,eAAe,IAAI,QAAQ,EAAEE,CAAY,EAC3D1wE,EAAG,KAAKC,EAASuwE,EAAQE,CAAY,GAAKD,EAAiB,KAAKC,CAAY,GAC3E,IAAI,EACP,KAAK,eAAiBD,EACjB,KAAA,kBAAoBhuE,EAAcguE,CAAgB,CACzD,EACApD,EAAY,UAAU,YAAc,SAAU1tC,EAAS,CACrDqtC,GAAsB,IAAI,EAC1B,IAAIgB,EAAgB,KAAK,eACrB2C,EAAiB,CAAC,EACR3C,EAAA,KAAK,SAAU4C,EAAYpuC,EAAe,CAClDmkC,GAAe,SAASnkC,CAAa,GACvCmuC,EAAe,KAAKnuC,CAAa,CACnC,CACD,EACDmkC,GAAe,kBAAkBgK,EAAgBhK,GAAe,qBAAqB,EAAG,SAAUnkC,EAAe,CAC/G1iC,EAAKkuE,EAAc,IAAIxrC,CAAa,EAAG,SAAUquC,EAAW,CACtDA,IAAcruC,IAAkB,UAAY,CAACsuC,GAAkBD,EAAWlxC,CAAO,IACnFkxC,EAAU,YAAY,CACxB,CACD,CAAA,CACF,CACH,EACAxD,EAAY,cAAgB,UAAY,CACtCL,GAAwB,SAAUhtC,EAAS,CACrC,IAAA+wC,EAAgB/wC,EAAQ,eAAiB,CAAC,EAC9ClgC,EAAKkgC,EAAQ,eAAe,IAAI,QAAQ,EAAG,SAAUwwC,EAAQ,CAEjDA,GAAAO,EAAc,KAAKP,EAAO,cAAc,CAAA,CACnD,EACOxwC,EAAA,kBAAoBv9B,EAAcsuE,CAAa,CACzD,EACA9D,GAA0B,SAAUjtC,EAAS,CAQ7C,EACWktC,GAAA,SAAUltC,EAAS4tC,EAAY,CAGxC5tC,EAAQ,OAAS,CAAC,EACVA,EAAA,OAAOmtC,EAAgB,EAAIC,GAGnCptC,EAAQ,eAAiBv9B,EAAc,CACrC,OAAQ,CAAA,CAAC,CACV,EACDu9B,EAAQ,iBAAmBv9B,EAAc,EAGzC,IAAIuuE,EAAapD,EAAW,KACxBtvE,EAAS0yE,CAAU,GAAKA,EAAW,SAAW,OAChDA,EAAW,QAAU,IAEZC,GAAArD,EAAY5tC,EAAQ,OAAO,MAAM,EAEtC7hC,EAAAyvE,EAAY1F,GAAe,EAAK,EAC9BloC,EAAA,aAAa4tC,EAAY,IAAI,CACvC,CAAA,EACA,EACKP,CAAA,EACPpT,EAAK,EACP,SAAS6W,GAAkB3wB,EAAaxgB,EAAS,CAC/C,GAAIA,EAAS,CACX,IAAItJ,EAAQsJ,EAAQ,YAChB7I,EAAK6I,EAAQ,SACbo4B,EAASp4B,EAAQ,WACrB,OAAOtJ,GAAS,MAAQ8pB,EAAY,iBAAmB9pB,GAASS,GAAM,MAAQqpB,EAAY,KAAOrpB,GAAMihC,GAAU,MAAQ5X,EAAY,OAAS4X,CAAA,CAElJ,CACA,SAASkZ,GAAW/W,EAAQoT,EAAO,CAGjC,IAAI4D,EAAqBhX,EAAO,OAAS,CAACA,EAAO,WAC5Cp6D,EAAAwtE,EAAO,SAAU6D,EAAW3lE,EAAM,CACjCA,IAAS,cAAgB0lE,GAKxBvK,GAAe,SAASn7D,CAAI,IAC3B,OAAO2lE,GAAc,SACvBjX,EAAO1uD,CAAI,EAAK0uD,EAAO1uD,CAAI,EAAuBrN,EAAM+7D,EAAO1uD,CAAI,EAAG2lE,EAAW,EAAK,EAAvDzzE,EAAMyzE,CAAS,EAE1CjX,EAAO1uD,CAAI,GAAK,OAClB0uD,EAAO1uD,CAAI,EAAI2lE,GAGrB,CACD,CACH,CACA,SAASzB,GAAgBrxC,EAAMM,EAAU8wC,EAAO,CAG1C,GAAAhxE,EAAQkgC,CAAQ,EAAG,CACrB,IAAIyyC,EAAW3uE,EAAc,EACxB3C,OAAAA,EAAA6+B,EAAU,SAAU0yC,EAAc,CACrC,GAAIA,GAAgB,KAAM,CACxB,IAAIC,EAASjB,GAA8BgB,EAAc,IAAI,EAC7DC,GAAU,MAAQF,EAAS,IAAIC,EAAc,EAAI,CAAA,CACnD,CACD,EACMjxE,GAAOqvE,EAAO,SAAUD,EAAM,CACnC,OAAOA,GAAQ4B,EAAS,IAAI5B,EAAKnxC,CAAI,CAAC,CAAA,CACvC,CAAA,KACI,CACL,IAAIkzC,EAAWlB,GAA8B1xC,EAAU,IAAI,EACpD,OAAAv+B,GAAOqvE,EAAO,SAAUD,EAAM,CACnC,OAAOA,GAAQ+B,GAAY,MAAQ/B,EAAKnxC,CAAI,IAAMkzC,CAAA,CACnD,CAAA,CAEL,CACA,SAAS5B,GAAgBiB,EAAYlvE,EAAW,CAG9C,OAAOA,EAAU,eAAe,SAAS,EAAItB,GAAOwwE,EAAY,SAAUpB,EAAM,CACvE,OAAAA,GAAQA,EAAK,UAAY9tE,EAAU,OAC3C,CAAA,EAAIkvE,CACP,CACA,SAASlD,GAAwBrvD,EAAM,CACrC,IAAI+vD,EAA0B3rE,EAAc,EAC5C,OAAA4b,GAAQve,EAAK0uE,GAA2BnwD,EAAK,YAAY,EAAG,SAAU8gB,EAAU,CAItDivC,EAAA,IAAIjvC,EAAU,EAAI,CAAA,CAC3C,EACM,CACL,wBAAAivC,CACF,CACF,CACA3uE,GAAM4tE,GAAarB,EAAY,EC7rB/B,IAAIwF,GAAmB,CAAC,SAAU,QAAS,WAAY,YAAa,sBAAuB,iBAAkB,QAAS,aAAc,KAAM,MAAO,aAAc,sBAE/J,YAGA,QAAS,mBAAmB,EACxBC,GAA4B,UAAY,CAC1C,SAASA,EAAaC,EAAY,CAChC9mD,EAAY4mD,GAAkB,SAAUvtC,EAAY,CAClD,KAAKA,CAAU,EAAI0tC,EAAYD,EAAWztC,CAAU,EAAGytC,CAAU,CAClE,EAAE,IAAI,CACX,CACE,OAAOD,CACT,EAAG,ECbCG,GAA2B,CAAE,EAC7BC,GAAuC,UAAY,CACrD,SAASA,GAA0B,CACjC,KAAK,mBAAqB,CAAE,CAChC,CACE,OAAAA,EAAwB,UAAU,OAAS,SAAU7xC,EAASmf,EAAK,CACjE,IAAI2yB,EAAoB,CAAE,EAC1BlnD,EAAYgnD,GAA0B,SAAUlG,EAAS7qE,EAAM,CAC7D,IAAIwS,EAAOq4D,EAAQ,OAAO1rC,EAASmf,CAAG,EACtC2yB,EAAoBA,EAAkB,OAAOz+D,GAAQ,CAAA,CAAE,CAC7D,CAAK,EACD,KAAK,mBAAqBy+D,CAC3B,EACDD,EAAwB,UAAU,OAAS,SAAU7xC,EAASmf,EAAK,CACjEv0B,EAAY,KAAK,mBAAoB,SAAUy1B,EAAU,CACvDA,EAAS,QAAUA,EAAS,OAAOrgB,EAASmf,CAAG,CACrD,CAAK,CACF,EACD0yB,EAAwB,UAAU,qBAAuB,UAAY,CACnE,OAAO,KAAK,mBAAmB,MAAO,CACvC,EACDA,EAAwB,SAAW,SAAUhxE,EAAM6qE,EAAS,CAC1DkG,GAAyB/wE,CAAI,EAAI6qE,CAClC,EACDmG,EAAwB,IAAM,SAAUhxE,EAAM,CAC5C,OAAO+wE,GAAyB/wE,CAAI,CACrC,EACMgxE,CACT,EAAG,ECtBCE,GAAY,mBAOZC,GAA6B,UAAY,CAS3C,SAASA,EAAc7yB,EAAK,CAC1B,KAAK,iBAAmB,CAAC,EACzB,KAAK,WAAa,CAAC,EAKnB,KAAK,qBAAuB,CAAC,EAC7B,KAAK,KAAOA,CAAA,CAEd6yB,OAAAA,EAAc,UAAU,UAAY,SAAUC,EAAWzE,EAAyB/hE,EAAK,CACjFwmE,IAEFnyE,EAAKk8B,GAAiBi2C,EAAU,MAAM,EAAG,SAAUzB,EAAQ,CAC/CA,GAAAA,EAAO,MAAQ1vE,GAAa0vE,EAAO,IAAI,GAAKzuE,GAAeyuE,EAAO,IAAI,CAAA,CACjF,EACD1wE,EAAKk8B,GAAiBi2C,EAAU,OAAO,EAAG,SAAUC,EAAS,CAChDA,GAAAA,EAAQ,QAAUpxE,GAAaoxE,EAAQ,MAAM,GAAKnwE,GAAemwE,EAAQ,MAAM,CAAA,CAC3F,GAKHD,EAAYv0E,EAAMu0E,CAAS,EAI3B,IAAIE,EAAe,KAAK,cACpBC,EAAkBC,GAAeJ,EAAWzE,EAAyB,CAAC2E,CAAY,EACtF,KAAK,eAAiBC,EAAgB,WAElCD,GAiBEC,EAAgB,gBAAgB,SAClCD,EAAa,gBAAkBC,EAAgB,iBAE7CA,EAAgB,UAAU,SAC5BD,EAAa,UAAYC,EAAgB,WAEvCA,EAAgB,eAClBD,EAAa,aAAeC,EAAgB,eAG9C,KAAK,cAAgBA,CAEzB,EACAJ,EAAc,UAAU,YAAc,SAAUM,EAAY,CAC1D,IAAIH,EAAe,KAAK,cACxB,YAAK,iBAAmBA,EAAa,gBACrC,KAAK,WAAaA,EAAa,UAC/B,KAAK,cAAgBA,EAAa,aAClC,KAAK,qBAAuB,CAAC,EACtBz0E,EAAM40E,EAMXH,EAAa,WAAa,KAAK,cAAc,CACjD,EACAH,EAAc,UAAU,kBAAoB,SAAUhyC,EAAS,CACzD,IAAAk6B,EACAqY,EAAkB,KAAK,iBAC3B,GAAIA,EAAgB,OAAQ,CAGtB,IAAAC,EAAgBxyC,EAAQ,aAAa,UAAU,EAC/CwyC,IACOtY,EAAAx8D,EAET60E,EAAgBC,EAAc,gBAAiB,CAAA,CAAC,EAClD,CAEK,OAAAtY,CACT,EACA8X,EAAc,UAAU,eAAiB,SAAUhyC,EAAS,CACtD,IAAAyyC,EAAU,KAAK,KAAK,SAAS,EAC7BC,EAAW,KAAK,KAAK,UAAU,EAC/BC,EAAY,KAAK,WACjBC,EAAe,KAAK,cACpBC,EAAU,CAAC,EACXj1E,EAAS,CAAC,EAEd,GAAI,CAAC+0E,EAAU,QAAU,CAACC,EACjB,OAAAh1E,EAGT,QAASvC,EAAI,EAAG0C,EAAM40E,EAAU,OAAQt3E,EAAI0C,EAAK1C,IAC3Cy3E,GAAgBH,EAAUt3E,CAAC,EAAE,MAAOo3E,EAASC,CAAQ,GACvDG,EAAQ,KAAKx3E,CAAC,EAMd,MAAA,CAACw3E,EAAQ,QAAUD,IACrBC,EAAU,CAAC,EAAE,GAEXA,EAAQ,QAAU,CAACE,GAAcF,EAAS,KAAK,oBAAoB,IAC5Dj1E,EAAAxC,EAAIy3E,EAAS,SAAUx8C,EAAO,CAC9B,OAAA34B,EAAM24B,IAAU,GAAKu8C,EAAa,OAASD,EAAUt8C,CAAK,EAAE,MAAM,CAAA,CAC1E,GAGH,KAAK,qBAAuBw8C,EACrBj1E,CACT,EACOo0E,CACP,EAAA,EA8DF,SAASK,GAETJ,EAAWzE,EAAyBwF,EAAO,CACzC,IAAIL,EAAY,CAAC,EACbC,EACAhF,EACAqF,EAAqBhB,EAAU,WAE/BiB,EAAiBjB,EAAU,SAC3BkB,EAAwBlB,EAAU,QAClCmB,EAAcnB,EAAU,MACxBoB,EAAW,CAAC,CAACpB,EAAU,MACvBqB,EAAc,CAAC,EAAEH,GAAyBD,GAAkBD,GAAsBA,EAAmB,UACrGA,GACWrF,EAAAqF,EAERrF,EAAW,WACdA,EAAW,SAAWsF,MAMpBI,GAAeD,KACPpB,EAAA,QAAUA,EAAU,MAAQ,MAE3BrE,EAAAqE,GAEXoB,GACE50E,EAAQ20E,CAAW,GAChBtzE,EAAAszE,EAAa,SAAUG,EAAa,CAOnCA,GAAeA,EAAY,SACzBA,EAAY,MACdZ,EAAU,KAAKY,CAAW,EAChBX,IAEKA,EAAAW,GAEnB,CACD,EAQLC,EAAa5F,CAAU,EAClB9tE,EAAAqzE,EAAuB,SAAUjZ,EAAQ,CAC5C,OAAOsZ,EAAatZ,CAAM,CAAA,CAC3B,EACIp6D,EAAA6yE,EAAW,SAAUc,EAAO,CACxB,OAAAD,EAAaC,EAAM,MAAM,CAAA,CACjC,EACD,SAASD,EAAatZ,EAAQ,CACvBp6D,EAAA0tE,EAAyB,SAAUkG,EAAY,CAClDA,EAAWxZ,EAAQ8Y,CAAK,CAAA,CACzB,CAAA,CAEI,MAAA,CACL,WAAApF,EACA,gBAAiBuF,GAAyB,CAAC,EAC3C,aAAAP,EACA,UAAAD,CACF,CACF,CAMA,SAASG,GAAgBltE,EAAO6sE,EAASC,EAAU,CACjD,IAAIiB,EAAU,CACZ,MAAOlB,EACP,OAAQC,EACR,YAAaD,EAAUC,CACzB,EACIkB,EAAa,GACZ9zE,OAAAA,EAAA8F,EAAO,SAAU1G,EAAOm/B,EAAM,CAC7B,IAAAw1C,EAAUx1C,EAAK,MAAM0zC,EAAS,EAC9B,GAAA,GAAC8B,GAAW,CAACA,EAAQ,CAAC,GAAK,CAACA,EAAQ,CAAC,GAGrC,KAAAC,EAAWD,EAAQ,CAAC,EACpBE,EAAWF,EAAQ,CAAC,EAAE,YAAY,EACjC1+D,GAAQw+D,EAAQI,CAAQ,EAAG70E,EAAO40E,CAAQ,IAChCF,EAAA,IACf,CACD,EACMA,CACT,CACA,SAASz+D,GAAQ6+D,EAAMC,EAAQH,EAAU,CACvC,OAAIA,IAAa,MACRE,GAAQC,EACNH,IAAa,MACfE,GAAQC,EAGRD,IAASC,CAEpB,CACA,SAASlB,GAAcmB,EAAUC,EAAU,CAEzC,OAAOD,EAAS,KAAK,GAAG,IAAMC,EAAS,KAAK,GAAG,CACjD,CC3TA,IAAIr0E,GAAO8qB,EACPtsB,GAAWmlE,EACX2Q,GAAkB,CAAC,YAAa,YAAa,YAAa,YAAa,aAAc,QAAS,WAAW,EAC7G,SAASC,GAAmB5oE,EAAK,CAC3B,IAAA6oE,EAAe7oE,GAAOA,EAAI,UAC9B,GAAK6oE,EAGL,QAASj5E,EAAI,EAAG0C,EAAMq2E,GAAgB,OAAQ/4E,EAAI0C,EAAK1C,IAAK,CACtD,IAAA2uC,EAAYoqC,GAAgB/4E,CAAC,EAC7Bk5E,EAAqBD,EAAa,OAClCE,EAAuBF,EAAa,SACpCC,GAAsBA,EAAmBvqC,CAAS,IAIpDv+B,EAAIu+B,CAAS,EAAIv+B,EAAIu+B,CAAS,GAAK,CAAC,EAC/Bv+B,EAAIu+B,CAAS,EAAE,OAGlBwyB,EAAa/wD,EAAIu+B,CAAS,EAAE,OAAQuqC,EAAmBvqC,CAAS,CAAC,EAFjEv+B,EAAIu+B,CAAS,EAAE,OAASuqC,EAAmBvqC,CAAS,EAItDuqC,EAAmBvqC,CAAS,EAAI,MAE9BwqC,GAAwBA,EAAqBxqC,CAAS,IAIxDv+B,EAAIu+B,CAAS,EAAIv+B,EAAIu+B,CAAS,GAAK,CAAC,EAC/Bv+B,EAAIu+B,CAAS,EAAE,SAGlBwyB,EAAa/wD,EAAIu+B,CAAS,EAAE,SAAUwqC,EAAqBxqC,CAAS,CAAC,EAFrEv+B,EAAIu+B,CAAS,EAAE,SAAWwqC,EAAqBxqC,CAAS,EAI1DwqC,EAAqBxqC,CAAS,EAAI,KACpC,CAEJ,CACA,SAASyqC,GAAsBhpE,EAAKipE,EAASC,EAAW,CAClD,GAAAlpE,GAAOA,EAAIipE,CAAO,IAAMjpE,EAAIipE,CAAO,EAAE,QAAUjpE,EAAIipE,CAAO,EAAE,UAAW,CACrE,IAAAE,EAAYnpE,EAAIipE,CAAO,EAAE,OACzBG,EAAcppE,EAAIipE,CAAO,EAAE,SAC3BE,IAMED,GACFlpE,EAAIipE,CAAO,EAAE,OAASjpE,EAAIipE,CAAO,EAAE,SAAW,KAC9C1U,EAAgBv0D,EAAIipE,CAAO,EAAGE,CAAS,GAEvCnpE,EAAIipE,CAAO,EAAIE,GAGfC,IAIEppE,EAAA,SAAWA,EAAI,UAAY,CAAC,EAC5BA,EAAA,SAASipE,CAAO,EAAIG,EAGpBA,EAAY,QACVppE,EAAA,SAAS,MAAQopE,EAAY,OAE/BA,EAAY,YACVppE,EAAA,SAAS,UAAYopE,EAAY,WAEzC,CAEJ,CACA,SAASC,GAAsBrpE,EAAK,CAClCgpE,GAAsBhpE,EAAK,WAAW,EACtCgpE,GAAsBhpE,EAAK,WAAW,EACtCgpE,GAAsBhpE,EAAK,WAAW,EACtCgpE,GAAsBhpE,EAAK,OAAO,EAClCgpE,GAAsBhpE,EAAK,WAAW,EAEtCgpE,GAAsBhpE,EAAK,YAAY,EAEvCgpE,GAAsBhpE,EAAK,WAAW,CACxC,CACA,SAASspE,GAAgBtpE,EAAKsZ,EAAU,CAEtC,IAAIiwD,EAAiB12E,GAASmN,CAAG,GAAKA,EAAIsZ,CAAQ,EAC9CsyC,EAAY/4D,GAAS02E,CAAc,GAAKA,EAAe,UAC3D,GAAI3d,EAKO,QAAAh8D,EAAI,EAAG0C,EAAMk3E,GAA6B,OAAQ55E,EAAI0C,EAAK1C,IAAK,CACnE,IAAA65E,EAAeD,GAA6B55E,CAAC,EAC7Cg8D,EAAU,eAAe6d,CAAY,IACxBF,EAAAE,CAAY,EAAI7d,EAAU6d,CAAY,EACvD,CAGN,CACA,SAASC,GAAsB1pE,EAAK,CAC9BA,IACFqpE,GAAsBrpE,CAAG,EACzBspE,GAAgBtpE,EAAK,OAAO,EAC5BA,EAAI,UAAYspE,GAAgBtpE,EAAI,SAAU,OAAO,EAEzD,CACA,SAAS2pE,GAAcC,EAAW,CAC5B,GAAC/2E,GAAS+2E,CAAS,EAGvB,CAAAhB,GAAmBgB,CAAS,EAC5BP,GAAsBO,CAAS,EAC/BN,GAAgBM,EAAW,OAAO,EAElCN,GAAgBM,EAAW,YAAY,EAEvCN,GAAgBM,EAAW,WAAW,EAClCA,EAAU,WACIN,GAAAM,EAAU,SAAU,OAAO,EAE3BN,GAAAM,EAAU,SAAU,YAAY,EAEhCN,GAAAM,EAAU,SAAU,WAAW,GAEjD,IAAIC,EAAYD,EAAU,UACtBC,IACFjB,GAAmBiB,CAAS,EAC5BH,GAAsBG,CAAS,GAEjC,IAAIC,EAAWF,EAAU,SACrBE,IACFlB,GAAmBkB,CAAQ,EAC3BJ,GAAsBI,CAAQ,GAEhC,IAAIC,EAAWH,EAAU,SACrBG,GACFL,GAAsBK,CAAQ,EAEhC,IAAI31E,EAAOw1E,EAAU,KAGjB,GAAAA,EAAU,OAAS,QAAS,CAC9Bx1E,EAAOA,GAAQw1E,EAAU,MACrB,IAAAI,EAAWJ,EAAU,OAASA,EAAU,MAC5C,GAAII,GAAY,CAACC,GAAoBD,CAAQ,EAC3C,QAASp6E,EAAI,EAAGA,EAAIo6E,EAAS,OAAQp6E,IACb85E,GAAAM,EAASp6E,CAAC,CAAC,EAGrCuvB,EAAYyqD,EAAU,WAAY,SAAU5pE,EAAK,CAC/CqpE,GAAsBrpE,CAAG,CAAA,CAC1B,CAAA,CAEH,GAAI5L,GAAQ,CAAC61E,GAAoB71E,CAAI,EACnC,QAASxE,EAAI,EAAGA,EAAIwE,EAAK,OAAQxE,IACT85E,GAAAt1E,EAAKxE,CAAC,CAAC,EAK7B,GADJi6E,EAAYD,EAAU,UAClBC,GAAaA,EAAU,KAEzB,QADIK,EAASL,EAAU,KACdj6E,EAAI,EAAGA,EAAIs6E,EAAO,OAAQt6E,IACX85E,GAAAQ,EAAOt6E,CAAC,CAAC,EAK/B,GADJk6E,EAAWF,EAAU,SACjBE,GAAYA,EAAS,KAEvB,QADIK,EAASL,EAAS,KACbl6E,EAAI,EAAGA,EAAIu6E,EAAO,OAAQv6E,IAC7B8kE,EAAeyV,EAAOv6E,CAAC,CAAC,GAC1B85E,GAAsBS,EAAOv6E,CAAC,EAAE,CAAC,CAAC,EAClC85E,GAAsBS,EAAOv6E,CAAC,EAAE,CAAC,CAAC,GAEZ85E,GAAAS,EAAOv6E,CAAC,CAAC,EAKjCg6E,EAAU,OAAS,SACrBN,GAAgBM,EAAW,WAAW,EACtCN,GAAgBM,EAAW,OAAO,EAClCN,GAAgBM,EAAW,QAAQ,GAC1BA,EAAU,OAAS,WACNZ,GAAAY,EAAU,WAAY,WAAW,EACvDzqD,EAAYyqD,EAAU,OAAQ,SAAU5pE,EAAK,CAC3CqpE,GAAsBrpE,CAAG,CAAA,CAC1B,GACQ4pE,EAAU,OAAS,QAC5BP,GAAsBO,EAAU,MAAM,EAG1C,CACA,SAASQ,GAAMrxC,EAAG,CACT,OAAA27B,EAAe37B,CAAC,EAAIA,EAAIA,EAAI,CAACA,CAAC,EAAI,CAAC,CAC5C,CACA,SAASsxC,GAAMtxC,EAAG,CACR,OAAA27B,EAAe37B,CAAC,EAAIA,EAAE,CAAC,EAAIA,IAAM,CAAC,CAC5C,CACwB,SAAAuxC,GAAkB7b,EAAQ8b,EAAS,CACzDl2E,GAAK+1E,GAAM3b,EAAO,MAAM,EAAG,SAAUmb,EAAW,CACrC/2E,GAAA+2E,CAAS,GAAKD,GAAcC,CAAS,CAAA,CAC/C,EACG,IAAA1nB,EAAO,CAAC,QAAS,QAAS,aAAc,YAAa,aAAc,eAAgB,OAAO,EAC9FqoB,GAAWroB,EAAK,KAAK,YAAa,eAAgB,UAAW,UAAU,EAClE7tD,GAAA6tD,EAAM,SAAUsoB,EAAU,CAC7Bn2E,GAAK+1E,GAAM3b,EAAO+b,CAAQ,CAAC,EAAG,SAAUC,EAAS,CAC3CA,IACFnB,GAAgBmB,EAAS,WAAW,EACpBnB,GAAAmB,EAAQ,YAAa,OAAO,EAC9C,CACD,CAAA,CACF,EACDp2E,GAAK+1E,GAAM3b,EAAO,QAAQ,EAAG,SAAUic,EAAa,CAC9C,IAAAC,EAAsBD,GAAeA,EAAY,oBACrDpB,GAAgBqB,EAAqB,WAAW,EAChCrB,GAAAqB,GAAuBA,EAAoB,YAAa,OAAO,CAAA,CAChF,EACDt2E,GAAK+1E,GAAM3b,EAAO,QAAQ,EAAG,SAAUmc,EAAa,CAClD5B,GAAsB4B,EAAa,WAAW,EAC9CtB,GAAgBsB,EAAa,UAAU,EACvCtB,GAAgBsB,EAAa,YAAY,EACzCtB,GAAgBsB,EAAa,WAAW,CAAA,CACzC,EAEDv2E,GAAK+1E,GAAM3b,EAAO,KAAK,EAAG,SAAUoc,EAAU,CAC5CvB,GAAgBuB,EAAU,MAAM,EAE5BA,EAAS,MAAQA,EAAS,UAAY,OACxCA,EAAS,SAAWA,EAAS,KAC7B,OAAOA,EAAS,MAKdA,EAAS,SAAW,MAAQA,EAAS,aAAe,OACtDA,EAAS,YAAcA,EAAS,QAChC,OAAOA,EAAS,QAWlB,CACD,EACDx2E,GAAK+1E,GAAM3b,EAAO,GAAG,EAAG,SAAUqc,EAAQ,CACpCj4E,GAASi4E,CAAM,IACjBpB,GAAsBoB,CAAM,EAC5Bz2E,GAAK+1E,GAAMU,EAAO,OAAO,EAAG,SAAUC,EAAW,CAC/CrB,GAAsBqB,CAAS,CAAA,CAChC,EACH,CACD,EACD12E,GAAK+1E,GAAM3b,EAAO,QAAQ,EAAG,SAAUuc,EAAa,CAClDtB,GAAsBsB,CAAW,EACjChC,GAAsBgC,EAAa,OAAO,EAC1ChC,GAAsBgC,EAAa,WAAW,EACxBhC,GAAAgC,EAAa,eAAgB,EAAI,EACvD,IAAI52E,EAAO42E,EAAY,KACvBtW,EAAetgE,CAAI,GAAK+qB,EAAY/qB,EAAM,SAAUq+B,EAAM,CACpDulC,EAAgBvlC,CAAI,IACtBu2C,GAAsBv2C,EAAM,OAAO,EACnCu2C,GAAsBv2C,EAAM,WAAW,EACzC,CACD,CAAA,CACF,EACDp+B,GAAK+1E,GAAM3b,EAAO,OAAO,EAAG,SAAUwc,EAAY,CAChDjC,GAAsBiC,EAAY,WAAW,EACxC52E,GAAA42E,EAAW,QAAS,SAAUC,EAAY,CAC7ClC,GAAsBkC,EAAY,WAAW,CAAA,CAC9C,CAAA,CACF,EACD5B,GAAgBe,GAAM5b,EAAO,WAAW,EAAG,OAAO,EAClD6a,GAAgBe,GAAM5b,EAAO,OAAO,EAAE,YAAa,OAAO,CAG5D,CC1RA,SAAS0c,GAAInrE,EAAKqkC,EAAM,CAGtB,QAFIwqB,EAAUxqB,EAAK,MAAM,GAAG,EACxBrzC,EAAMgP,EACDpQ,EAAI,EAAGA,EAAIi/D,EAAQ,SAC1B79D,EAAMA,GAAOA,EAAI69D,EAAQj/D,CAAC,CAAC,EACvBoB,GAAO,MAFuBpB,IAElC,CAIK,OAAAoB,CACT,CACA,SAASo6E,GAAIprE,EAAKqkC,EAAMpzC,EAAK2B,EAAW,CAKtC,QAJIi8D,EAAUxqB,EAAK,MAAM,GAAG,EACxBrzC,EAAMgP,EACNvN,EACA7C,EAAI,EACDA,EAAIi/D,EAAQ,OAAS,EAAGj/D,IAC7B6C,EAAMo8D,EAAQj/D,CAAC,EACXoB,EAAIyB,CAAG,GAAK,OACVzB,EAAAyB,CAAG,EAAI,CAAC,GAEdzB,EAAMA,EAAIyB,CAAG,EAEEzB,EAAI69D,EAAQj/D,CAAC,CAAC,GAAK,OAC9BoB,EAAA69D,EAAQj/D,CAAC,CAAC,EAAIqB,EAEtB,CACA,SAASo6E,GAAuB5c,EAAQ,CAC5BA,GAAAp6D,EAAKi3E,GAAmB,SAAUv3E,EAAM,CAC5CA,EAAK,CAAC,IAAK06D,GAAU,EAAE16D,EAAK,CAAC,IAAK06D,KACpCA,EAAO16D,EAAK,CAAC,CAAC,EAAI06D,EAAO16D,EAAK,CAAC,CAAC,EAClC,CACD,CACH,CACA,IAAIu3E,GAAoB,CAAC,CAAC,IAAK,MAAM,EAAG,CAAC,IAAK,KAAK,EAAG,CAAC,KAAM,OAAO,EAAG,CAAC,KAAM,QAAQ,CAAC,EACnFC,GAA0B,CAAC,OAAQ,MAAO,WAAY,SAAU,UAAW,QAAS,YAAa,WAAY,UAAU,EACvHC,GAAqB,CAAC,CAAC,eAAgB,iBAAiB,EAAG,CAAC,cAAe,gBAAgB,EAAG,CAAC,cAAe,gBAAgB,CAAC,EACnI,SAASC,GAAmBhd,EAAQ,CAC9B,IAAAid,EAAYjd,GAAUA,EAAO,UACjC,GAAIid,EACF,QAAS97E,EAAI,EAAGA,EAAI47E,GAAmB,OAAQ57E,IAAK,CAClD,IAAI+7E,EAAUH,GAAmB57E,CAAC,EAAE,CAAC,EACjCg8E,EAAUJ,GAAmB57E,CAAC,EAAE,CAAC,EACjC87E,EAAUC,CAAO,GAAK,OACdD,EAAAE,CAAO,EAAIF,EAAUC,CAAO,EAIxC,CAGN,CACA,SAASE,GAAepd,EAAQ,CACzBA,GAGDA,EAAO,UAAY,QAAUA,EAAO,QAAU,MAAQA,EAAO,cAAgB,OAI/EA,EAAO,aAAeA,EAAO,OAEjC,CACA,SAASqd,GAAoBrd,EAAQ,CAC9BA,GAGDA,EAAO,UAAY,CAACA,EAAO,OAC7BA,EAAO,KAAOA,EAAO,SAKzB,CACA,SAASsd,GAAiBtd,EAAQ,CAC3BA,GAGDA,EAAO,oBAAsB,OACxBA,EAAA,SAAWA,EAAO,UAAY,CAAC,EAClCA,EAAO,SAAS,OAAS,OAI3BA,EAAO,SAAS,MAAQ,aAG9B,CACA,SAASud,GAAa53E,EAAMG,EAAI,CAC9B,GAAIH,EACF,QAASxE,EAAI,EAAGA,EAAIwE,EAAK,OAAQxE,IAC5B2E,EAAAH,EAAKxE,CAAC,CAAC,EACVwE,EAAKxE,CAAC,GAAKo8E,GAAa53E,EAAKxE,CAAC,EAAE,SAAU2E,CAAE,CAGlD,CACwB,SAAA03E,GAAqBxd,EAAQ8b,EAAS,CAC5D2B,GAAYzd,EAAQ8b,CAAO,EAEpB9b,EAAA,OAASl+B,GAAiBk+B,EAAO,MAAM,EACzCp6D,EAAAo6D,EAAO,OAAQ,SAAUmb,EAAW,CACnC,GAAC/2E,EAAS+2E,CAAS,EAGvB,KAAIuC,EAAavC,EAAU,KAC3B,GAAIuC,IAAe,OACbvC,EAAU,cAAgB,OAC5BA,EAAU,KAAOA,EAAU,sBAKpBuC,IAAe,OAASA,IAAe,QAAS,CACrDvC,EAAU,WAAa,OACzBA,EAAU,UAAYA,EAAU,WAKlCiC,GAAejC,EAAU,KAAK,EAC9B,IAAIx1E,EAAOw1E,EAAU,KACrB,GAAIx1E,GAAQ,CAACiB,GAAajB,CAAI,EAC5B,QAASxE,EAAI,EAAGA,EAAIwE,EAAK,OAAQxE,IAChBi8E,GAAAz3E,EAAKxE,CAAC,CAAC,EAGtBg6E,EAAU,aAAe,OACjBA,EAAA,SAAWA,EAAU,UAAY,CAAC,GACxCA,EAAU,SAAS,UAAY,QAIvBA,EAAA,SAAS,UAAYA,EAAU,aAE7C,SACSuC,IAAe,QAAS,CAC7B,IAAAC,EAAejB,GAAIvB,EAAW,eAAe,EACjDwC,GAAgB,MAAQhB,GAAIxB,EAAW,kBAAmBwC,CAAY,CAAA,SAC7DD,IAAe,MAAO,CAC/BV,GAAmB7B,CAAS,EAC5B6B,GAAmB7B,EAAU,eAAe,EAC5C6B,GAAmB7B,EAAU,QAAQ,EACrC,IAAIx1E,EAAOw1E,EAAU,KACrB,GAAIx1E,GAAQ,CAACiB,GAAajB,CAAI,EAC5B,QAASxE,EAAI,EAAGA,EAAIwE,EAAK,OAAQxE,IAC3B,OAAOwE,EAAKxE,CAAC,GAAM,WACF67E,GAAAr3E,EAAKxE,CAAC,CAAC,EAC1B67E,GAAmBr3E,EAAKxE,CAAC,GAAKwE,EAAKxE,CAAC,EAAE,QAAQ,EAGpD,SACSu8E,IAAe,WAAY,CACpC,IAAIE,EAAkBzC,EAAU,gBAC5ByC,IACQzC,EAAA,SAAWA,EAAU,UAAY,CAAC,EACvCA,EAAU,SAAS,QACtBA,EAAU,SAAS,MAAQyC,IAM/BP,GAAoBlC,CAAS,EAChBoC,GAAApC,EAAU,KAAMkC,EAAmB,CACvC,MAAAK,IAAe,SAAWA,IAAe,SAClDJ,GAAiBnC,CAAS,EAEjBuC,IAAe,QACpBvC,EAAU,SAAW,CAACA,EAAU,MAIlCA,EAAU,IAAMA,EAAU,SAExBA,EAAU,aAIHz2E,EAAAy2E,EAAWA,EAAU,WAAW,GAGzCA,EAAU,gBAAkB,OACpBA,EAAA,SAAWA,EAAU,UAAY,CAAC,EACxCA,EAAU,UAAYA,EAAU,SAAS,OAAS,OAI1CA,EAAA,SAAS,MAAQA,EAAU,iBAGzCyB,GAAuBzB,CAAS,EAAA,CACjC,EAEGnb,EAAO,YACTA,EAAO,UAAYA,EAAO,WAEvBp6D,EAAAk3E,GAAyB,SAAUe,EAAe,CACjD,IAAA9uD,EAAUixC,EAAO6d,CAAa,EAC9B9uD,IACGxqB,EAAQwqB,CAAO,IAClBA,EAAU,CAACA,CAAO,GAEfnpB,EAAAmpB,EAAS,SAAUixC,EAAQ,CAC9B4c,GAAuB5c,CAAM,CAAA,CAC9B,EACH,CACD,CACH,CC5Me,SAAS8d,GAAUh4C,EAAS,CACzC,IAAIi4C,EAAex1E,EAAe,EAClCu9B,EAAQ,WAAW,SAAUmgB,EAAa,CACxC,IAAI+3B,EAAQ/3B,EAAY,IAAI,OAAO,EAEnC,GAAI+3B,EAAO,CACT,IAAIC,EAAgBF,EAAa,IAAIC,CAAK,GAAKD,EAAa,IAAIC,EAAO,EAAE,EACrEr4E,EAAOsgD,EAAY,QAAS,EAC5Bi4B,EAAY,CAGd,qBAAsBv4E,EAAK,mBAAmB,sBAAsB,EACpE,qBAAsBA,EAAK,mBAAmB,sBAAsB,EACpE,iBAAkBA,EAAK,mBAAmB,kBAAkB,EAC5D,mBAAoBA,EAAK,mBAAmB,oBAAoB,EAChE,iBAAkBA,EAAK,mBAAmB,kBAAkB,EAC5D,KAAMA,EACN,YAAasgD,CACd,EAED,GAAI,CAACi4B,EAAU,kBAAoB,EAAEA,EAAU,kBAAoBA,EAAU,oBAC3E,OAEFD,EAAc,QAAUt4E,EAAK,mBAAmB,kBAAmBs4E,EAAcA,EAAc,OAAS,CAAC,EAAE,WAAW,EACtHA,EAAc,KAAKC,CAAS,CAClC,CACA,CAAG,EACDH,EAAa,KAAKI,EAAc,CAClC,CACA,SAASA,GAAeF,EAAe,CACrCr4E,EAAKq4E,EAAe,SAAUG,EAAiBC,EAAY,CACzD,IAAIC,EAAY,CAAE,EACdC,EAAY,CAAC,IAAK,GAAG,EACrBC,EAAO,CAACJ,EAAgB,qBAAsBA,EAAgB,oBAAoB,EAClFK,EAAaL,EAAgB,KAC7BM,EAAmBN,EAAgB,iBACnCO,EAAgBP,EAAgB,YAAY,IAAI,eAAe,GAAK,WAGxEK,EAAW,OAAOD,EAAM,SAAUI,EAAI90E,EAAI48C,EAAW,CACnD,IAAIt5C,EAAMqxE,EAAW,IAAIL,EAAgB,iBAAkB13B,CAAS,EAGpE,GAAI,MAAMt5C,CAAG,EACX,OAAOmxE,EAET,IAAIM,EACAC,EACAJ,EACFI,EAAsBL,EAAW,YAAY/3B,CAAS,EAEtDm4B,EAAUJ,EAAW,IAAIL,EAAgB,mBAAoB13B,CAAS,EAIxE,QADIq4B,EAAc,IACT1xE,EAAIgxE,EAAa,EAAGhxE,GAAK,EAAGA,IAAK,CACxC,IAAI6wE,EAAYD,EAAc5wE,CAAC,EAK/B,GAHKqxE,IACHI,EAAsBZ,EAAU,KAAK,WAAWA,EAAU,mBAAoBW,CAAO,GAEnFC,GAAuB,EAAG,CAC5B,IAAIt8E,EAAM07E,EAAU,KAAK,cAAcA,EAAU,qBAAsBY,CAAmB,EAE1F,GAAIH,IAAkB,OACnBA,IAAkB,YAAcn8E,EAAM,GAAKm8E,IAAkB,YAAcn8E,EAAM,GAAKm8E,IAAkB,YAAcvxE,GAAO,GAAK5K,EAAM,GACxIm8E,IAAkB,YAAcvxE,GAAO,GAAK5K,EAAM,EACnD,CAIA4K,EAAMgzB,GAAQhzB,EAAK5K,CAAG,EACtBu8E,EAAcv8E,EACd,KACZ,CACA,CACA,CACM,OAAA87E,EAAU,CAAC,EAAIlxE,EACfkxE,EAAU,CAAC,EAAIS,EACRT,CACb,CAAK,CACL,CAAG,CACH,CCnFA,IAAIU,GAAsC,UAAA,CACxC,SAASA,EAAW7R,EAAQ,CACrB,KAAA,KAAOA,EAAO,OAASA,EAAO,eAAiBkB,GAA8B,GAAK,IAClF,KAAA,aAAelB,EAAO,cAAgBoB,GAEtC,KAAA,eAAiBpB,EAAO,gBAAkBqB,GAC1C,KAAA,WAAarB,EAAO,YAAc,EACvC,KAAK,wBAA0BA,EAAO,wBACtC,KAAK,cAAgBA,EAAO,cACxB,IAAAqD,EAAmB,KAAK,iBAAmBrD,EAAO,iBACtD,GAAIqD,EACF,QAAS,EAAI,EAAG,EAAIA,EAAiB,OAAQ,IAAK,CAC5C,IAAAh1B,EAAMg1B,EAAiB,CAAC,EACxBh1B,EAAI,MAAQ,MACV20B,GAAa,KAAM,CAAC,IAAMzB,GAAW,OACvClzB,EAAI,KAAO,UAEf,CAEJ,CAEKwjC,OAAAA,CACP,EAAA,EACK,SAASC,GAAiBz8E,EAAK,CACpC,OAAOA,aAAew8E,EACxB,CAKgB,SAAAE,GAAaC,EAAYC,EAEzC9O,EAAc,CACGA,EAAAA,GAAgB+O,GAAmBF,CAAU,EAC5D,IAAI5O,EAAiB6O,EAAkB,eACnCE,EAAaC,GAA0BJ,EAAY7O,EAAcC,EAAgB6O,EAAkB,aAAcA,EAAkB,UAAU,EAC7I37E,EAAS,IAAIu7E,GAAW,CAC1B,KAAMG,EACN,aAAA7O,EACA,eAAAC,EACA,iBAAkB+O,EAAW,iBAC7B,WAAYA,EAAW,WACvB,wBAAyBA,EAAW,wBACpC,cAAe97E,EAAM47E,CAAiB,CAAA,CACvC,EACM,OAAA37E,CACT,CAIO,SAAS+7E,GAAiC75E,EAAM,CACrD,OAAO,IAAIq5E,GAAW,CACpB,KAAAr5E,EACA,aAAciB,GAAajB,CAAI,EAAI2oE,GAA4BJ,EAAA,CAChE,CACH,CAIO,SAASuR,GAAmBh8E,EAAQ,CACzC,OAAO,IAAIu7E,GAAW,CACpB,KAAMv7E,EAAO,KACb,aAAcA,EAAO,aACrB,eAAgBA,EAAO,eACvB,iBAAkBD,EAAMC,EAAO,gBAAgB,EAC/C,WAAYA,EAAO,WACnB,wBAAyBA,EAAO,uBAAA,CACjC,CACH,CAIO,SAAS47E,GAAmB15E,EAAM,CACvC,IAAI2qE,EAAe/B,GACf,GAAA3nE,GAAajB,CAAI,EACJ2qE,EAAAhC,WACN/pE,EAAQoB,CAAI,EAAG,CAEpBA,EAAK,SAAW,IACH2qE,EAAAnC,IAEjB,QAAShtE,EAAI,EAAG0C,EAAM8B,EAAK,OAAQxE,EAAI0C,EAAK1C,IAAK,CAC3C,IAAA6iC,EAAOr+B,EAAKxE,CAAC,EACjB,GAAI6iC,GAAQ,SAEDz/B,EAAQy/B,CAAI,GAAKp9B,GAAao9B,CAAI,EAAG,CAC/BssC,EAAAnC,GACf,KAAA,SACS/pE,EAAS4/B,CAAI,EAAG,CACVssC,EAAAlC,GACf,KAAA,EACF,CACF,SACShqE,EAASuB,CAAI,GACtB,QAAS3B,KAAO2B,EACV,GAAAyD,GAAOzD,EAAM3B,CAAG,GAAK0B,GAAYC,EAAK3B,CAAG,CAAC,EAAG,CAChCssE,EAAAjC,GACf,KAAA,EAIC,OAAAiC,CACT,CAKA,SAASiP,GAA0B55E,EAAM2qE,EAAcC,EAAgBmP,EAMvElP,EAAkB,CACZ,IAAAmP,EACAlP,EAKJ,GAAI,CAAC9qE,EACI,MAAA,CACL,iBAAkBi6E,GAA0BpP,CAAgB,EAC5D,WAAAC,EACA,wBAAAkP,CACF,EAEF,GAAIrP,IAAiBnC,GAA0B,CAC7C,IAAI2C,EAAgBnrE,EAKhB+5E,IAAiB,QAAUA,GAAgB,KAC7CG,GAAqB,SAAUr9E,EAAK,CAE9BA,GAAO,MAAQA,IAAQ,MACrBgE,EAAShE,CAAG,EACdiuE,GAAc,OAASA,EAAa,GAEvBA,EAAA,EAEjB,EAECF,EAAgBO,EAAe,EAAE,EAEpCL,EAAa/pE,GAASg5E,CAAY,EAAIA,EAAeA,EAAe,EAAI,EAEtE,CAAClP,GAAoBC,IAAe,IACtCD,EAAmB,CAAC,EACCqP,GAAA,SAAUr9E,EAAK25B,EAAO,CACzCq0C,EAAiBr0C,CAAK,EAAI35B,GAAO,KAAOA,EAAM,GAAK,EAAA,EAClD+tE,EAAgBO,EAAe,GAAQ,GAE5C6O,EAA0BnP,EAAmBA,EAAiB,OAASD,IAAmB9B,GAAuBqC,EAAc,OAASA,EAAc,CAAC,EAAIA,EAAc,CAAC,EAAE,OAAS,IAAA,SAC5KR,IAAiBlC,GACrBoC,IACHA,EAAmBsP,GAA4Bn6E,CAAI,WAE5C2qE,IAAiBjC,GACrBmC,IACHA,EAAmB,CAAC,EACf5qE,EAAAD,EAAM,SAAUo6E,EAAQ/7E,EAAK,CAChCwsE,EAAiB,KAAKxsE,CAAG,CAAA,CAC1B,WAEMssE,IAAiBpC,GAAwB,CAClD,IAAIhnE,EAASi7B,GAAiBx8B,EAAK,CAAC,CAAC,EACrCg6E,EAA0Bp7E,EAAQ2C,CAAM,GAAKA,EAAO,QAAU,CAAA,CAMzD,MAAA,CACL,WAAAupE,EACA,iBAAkBmP,GAA0BpP,CAAgB,EAC5D,wBAAAmP,CACF,CACF,CACA,SAASG,GAA4Bn6E,EAAM,CAGzC,QAFIq6E,EAAa,EACbz9E,EACGy9E,EAAar6E,EAAK,QAAU,EAAEpD,EAAMoD,EAAKq6E,GAAY,IAAI,CAChE,GAAIz9E,EACF,OAAOsC,GAAKtC,CAAG,CAEnB,CAIA,SAASq9E,GAA0BpP,EAAkB,CACnD,GAAKA,EAIL,KAAIyP,EAAU13E,EAAc,EAC5B,OAAOrH,EAAIsvE,EAAkB,SAAU0P,EAAS/jD,EAAO,CAC3C+jD,EAAA97E,EAAS87E,CAAO,EAAIA,EAAU,CACtC,KAAMA,CACR,EAEA,IAAIl8C,EAAO,CACT,KAAMk8C,EAAQ,KACd,YAAaA,EAAQ,YACrB,KAAMA,EAAQ,IAChB,EAII,GAAAl8C,EAAK,MAAQ,KACR,OAAAA,EAGTA,EAAK,MAAQ,GAMTA,EAAK,aAAe,OACtBA,EAAK,YAAcA,EAAK,MAE1B,IAAIm8C,EAAQF,EAAQ,IAAIj8C,EAAK,IAAI,EACjC,OAAKm8C,EAKEn8C,EAAA,MAAQ,IAAMm8C,EAAM,QAJjBF,EAAA,IAAIj8C,EAAK,KAAM,CACrB,MAAO,CAAA,CACR,EAIIA,CAAA,CACR,EACH,CACA,SAAS67C,GAAqB/5E,EAAIyqE,EAAgB5qE,EAAM+qE,EAAS,CAC/D,GAAIH,IAAmB9B,GACrB,QAASttE,EAAI,EAAGA,EAAIwE,EAAK,QAAUxE,EAAIuvE,EAASvvE,IAC3C2E,EAAAH,EAAKxE,CAAC,EAAIwE,EAAKxE,CAAC,EAAE,CAAC,EAAI,KAAMA,CAAC,MAInC,SADI+F,EAASvB,EAAK,CAAC,GAAK,CAAC,EAChBxE,EAAI,EAAGA,EAAI+F,EAAO,QAAU/F,EAAIuvE,EAASvvE,IAC7C2E,EAAAoB,EAAO/F,CAAC,EAAGA,CAAC,CAGrB,CACO,SAASi/E,GAAyB38E,EAAQ,CAC/C,IAAI6sE,EAAe7sE,EAAO,aACnB,OAAA6sE,IAAiBlC,IAA6BkC,IAAiBjC,EACxE,CC/PA,IAAIroC,GAAIqR,GAAIgpC,GAQRC,GACAC,GAKAC,GAAmC,UAAY,CACxCA,SAAAA,EAAoBC,EAAaC,EAAS,CAEjD,IAAIj9E,EAAUw7E,GAAiBwB,CAAW,EAAoDA,EAAhDjB,GAAiCiB,CAAW,EAE1F,KAAK,QAAUh9E,EACX,IAAAkC,EAAO,KAAK,MAAQlC,EAAO,KAE3BA,EAAO,eAAiB6qE,KAM1B,KAAK,QAAU,EACf,KAAK,SAAWoS,EAChB,KAAK,MAAQ/6E,GAEF46E,GAAA,KAAM56E,EAAMlC,CAAM,CAAA,CAEjC+8E,OAAAA,EAAoB,UAAU,UAAY,UAAY,CACpD,OAAO,KAAK,OACd,EACAA,EAAoB,UAAU,MAAQ,UAAY,CACzC,MAAA,EACT,EACAA,EAAoB,UAAU,QAAU,SAAUnhE,EAAKxV,EAAK,CAE5D,EACA22E,EAAoB,UAAU,WAAa,SAAUxqC,EAAS,CAAC,EAC/DwqC,EAAoB,UAAU,MAAQ,UAAY,CAAC,EACnDA,EAAoB,gBAAkB,UAAY,CAGhD,IAAI13E,EAAQ03E,EAAoB,UAChC13E,EAAM,KAAO,GACbA,EAAM,WAAa,EAAA,EACnB,EACF03E,EAAoB,cAAgB,UAAY,CAC1Cx6C,IAAAA,EACWu6C,GAAA,SAAUI,EAAUh7E,EAAMlC,EAAQ,CAC/C,IAAI6sE,EAAe7sE,EAAO,aACtB8sE,EAAiB9sE,EAAO,eACxBgtE,EAAahtE,EAAO,WACpBusE,EAAUvsE,EAAO,iBACjBm9E,EAAUN,GAAgBO,GAAgBvQ,EAAcC,CAAc,CAAC,EAK3E,GADA9rE,EAAOk8E,EAAUC,CAAO,EACpBtQ,IAAiBhC,GACnBqS,EAAS,QAAUG,EACnBH,EAAS,MAAQI,EACjBJ,EAAS,YAAcK,MAClB,CACD,IAAAC,EAAgBC,GAAuB5Q,EAAcC,CAAc,EACvEoQ,EAAS,QAAUt6E,EAAK46E,EAAe,KAAMt7E,EAAM8qE,EAAYT,CAAO,EAClE,IAAAmR,EAAaC,GAAwB9Q,EAAcC,CAAc,EACrEoQ,EAAS,MAAQt6E,EAAK86E,EAAY,KAAMx7E,EAAM8qE,EAAYT,CAAO,CAAA,CAErE,EACI,IAAA8Q,EAAuB,SAAUzhE,EAAKxV,EAAK,CAC7CwV,EAAMA,EAAM,KAAK,QACjBxV,EAAMA,GAAO,CAAC,EAId,QAHIlE,EAAO,KAAK,MACZ+6E,EAAU,KAAK,SACf93E,EAAS83E,EAAUrhE,EACdle,EAAI,EAAGA,EAAIu/E,EAASv/E,IAC3B0I,EAAI1I,CAAC,EAAIwE,EAAKiD,EAASzH,CAAC,EAEnB,OAAA0I,CACT,EACIm3E,EAA2B,SAAU3lE,EAAO0iB,EAAK/lB,EAASq7C,EAAQ,CAGpE,QAFI1tD,EAAO,KAAK,MACZ+6E,EAAU,KAAK,SACVllC,EAAM,EAAGA,EAAMklC,EAASllC,IAAO,CAMtC,QALI6lC,EAAYhuB,EAAO7X,CAAG,EACtB5wC,EAAMy2E,EAAU,CAAC,GAAK,KAAO,IAAWA,EAAU,CAAC,EACnDx2E,EAAMw2E,EAAU,CAAC,GAAK,KAAO,KAAYA,EAAU,CAAC,EACpD16B,EAAQ5oB,EAAM1iB,EACdxV,EAAMmS,EAAQwjC,CAAG,EACZr6C,EAAI,EAAGA,EAAIwlD,EAAOxlD,IAAK,CAE9B,IAAIqB,EAAMmD,EAAKxE,EAAIu/E,EAAUllC,CAAG,EAC5B31C,EAAAwV,EAAQla,CAAC,EAAIqB,EACjBA,EAAMoI,IAAQA,EAAMpI,GACpBA,EAAMqI,IAAQA,EAAMrI,EAAA,CAEtB6+E,EAAU,CAAC,EAAIz2E,EACfy2E,EAAU,CAAC,EAAIx2E,CAAA,CAEnB,EACIk2E,EAAqB,UAAY,CACnC,OAAO,KAAK,MAAQ,KAAK,MAAM,OAAS,KAAK,SAAW,CAC1D,EACAT,IAAmBt6C,EAAK,GAAIA,EAAGmoC,GAA2B,IAAMK,EAAuB,EAAI,CACzF,KAAM,GACN,WAAY8S,CACXt7C,EAAAA,EAAGmoC,GAA2B,IAAMM,EAAoB,EAAI,CAC7D,KAAM,GACN,WAAY,UAAY,CAChB,MAAA,IAAI,MAAM,2DAA2D,CAAA,CAC7E,EACCzoC,EAAGooC,EAAyB,EAAI,CACjC,KAAM,GACN,WAAYkT,CAAA,EACXt7C,EAAGqoC,EAA2B,EAAI,CACnC,KAAM,GACN,WAAY,SAAUr4B,EAAS,CAC7B,IAAIrwC,EAAO,KAAK,MACXC,EAAAowC,EAAS,SAAUurC,EAAQv9E,EAAK,CAEnC,QADIw9E,EAAS77E,EAAK3B,CAAG,IAAM2B,EAAK3B,CAAG,EAAI,IAC9B7C,EAAI,EAAGA,GAAKogF,GAAU,CAAC,GAAG,OAAQpgF,IAClCqgF,EAAA,KAAKD,EAAOpgF,CAAC,CAAC,CACvB,CACD,CAAA,CACH,EACC6kC,EAAGkoC,EAAsB,EAAI,CAC9B,WAAYoT,CAAA,EACXt7C,EAAGsoC,EAAyB,EAAI,CACjC,WAAY,GACZ,KAAM,GACN,WAAY,SAAUt4B,EAAS,CAI7B,KAAK,MAAQA,CACf,EAEA,MAAO,UAAY,CAEZ,KAAA,SAAW,KAAK,MAAM,EAC3B,KAAK,MAAQ,IAAA,CAEdhQ,EAAAA,GACH,SAASs7C,EAAiBtrC,EAAS,CACjC,QAAS70C,EAAI,EAAGA,EAAI60C,EAAQ,OAAQ70C,IAClC,KAAK,MAAM,KAAK60C,EAAQ70C,CAAC,CAAC,CAC5B,CACF,EACA,EACKq/E,CACP,EAAA,EAEEiB,GAAgB,SAAUC,EAASjR,EAAYT,EAAS3wD,EAAK,CAC/D,OAAOqiE,EAAQriE,CAAG,CACpB,EACIsiE,IAA0B37C,GAAK,GAAIA,GAAGmoC,GAA2B,IAAMK,EAAuB,EAAI,SAAUkT,EAASjR,EAAYT,EAAS3wD,EAAK,CAC1I,OAAAqiE,EAAQriE,EAAMoxD,CAAU,CACjC,EAAGzqC,GAAGmoC,GAA2B,IAAMM,EAAoB,EAAI,SAAUiT,EAASjR,EAAYT,EAAS3wD,EAAKxV,EAAK,CACxGwV,GAAAoxD,EAGP,QAFIzsC,EAAOn6B,GAAO,CAAC,EACflE,EAAO+7E,EACFvgF,EAAI,EAAGA,EAAIwE,EAAK,OAAQxE,IAAK,CAChC,IAAA8vE,EAAMtrE,EAAKxE,CAAC,EAChB6iC,EAAK7iC,CAAC,EAAI8vE,EAAMA,EAAI5xD,CAAG,EAAI,IAAA,CAEtB,OAAA2kB,CACT,EAAGgC,GAAGooC,EAAyB,EAAIqT,GAAez7C,GAAGqoC,EAA2B,EAAI,SAAUqT,EAASjR,EAAYT,EAAS3wD,EAAKxV,EAAK,CAEpI,QADIm6B,EAAOn6B,GAAO,CAAC,EACV1I,EAAI,EAAGA,EAAI6uE,EAAQ,OAAQ7uE,IAAK,CACnC,IAAAwvE,EAAUX,EAAQ7uE,CAAC,EAAE,KAMrBygF,EAAMF,EAAQ/Q,CAAO,EACzB3sC,EAAK7iC,CAAC,EAAIygF,EAAMA,EAAIviE,CAAG,EAAI,IAAA,CAEtB,OAAA2kB,CACT,EAAGgC,GAAGkoC,EAAsB,EAAIuT,GAAez7C,IAC/B,SAAAk7C,GAAuB5Q,EAAcC,EAAgB,CACnE,IAAIsR,EAASF,GAAuBd,GAAgBvQ,EAAcC,CAAc,CAAC,EAI1E,OAAAsR,CACT,CACA,IAAIC,GAAc,SAAUJ,EAASjR,EAAYT,EAAS,CACxD,OAAO0R,EAAQ,MACjB,EACIK,IAA2B1qC,GAAK,GAAIA,GAAG82B,GAA2B,IAAMK,EAAuB,EAAI,SAAUkT,EAASjR,EAAYT,EAAS,CAC7I,OAAO,KAAK,IAAI,EAAG0R,EAAQ,OAASjR,CAAU,CAChD,EAAGp5B,GAAG82B,GAA2B,IAAMM,EAAoB,EAAI,SAAUiT,EAASjR,EAAYT,EAAS,CACjG,IAAAiB,EAAMyQ,EAAQ,CAAC,EACnB,OAAOzQ,EAAM,KAAK,IAAI,EAAGA,EAAI,OAASR,CAAU,EAAI,CACtD,EAAGp5B,GAAG+2B,EAAyB,EAAI0T,GAAazqC,GAAGg3B,EAA2B,EAAI,SAAUqT,EAASjR,EAAYT,EAAS,CACpH,IAAAW,EAAUX,EAAQ,CAAC,EAAE,KAMrB4R,EAAMF,EAAQ/Q,CAAO,EAClB,OAAAiR,EAAMA,EAAI,OAAS,CAC5B,EAAGvqC,GAAG62B,EAAsB,EAAI4T,GAAazqC,IAC7B,SAAA+pC,GAAwB9Q,EAAcC,EAAgB,CACpE,IAAIsR,EAASE,GAAwBlB,GAAgBvQ,EAAcC,CAAc,CAAC,EAI3E,OAAAsR,CACT,CACA,IAAIG,GAAoB,SAAU5/C,EAAUguC,EAAU6R,EAAU,CAC9D,OAAO7/C,EAASguC,CAAQ,CAC1B,EACI8R,IAA2B7B,GAAK,CAAA,EAAIA,GAAGlS,EAAwB,EAAI6T,GAAmB3B,GAAGjS,EAAyB,EAAI,SAAUhsC,EAAUguC,EAAU6R,EAAU,CAChK,OAAO7/C,EAAS6/C,CAAQ,CAC1B,EAAG5B,GAAGhS,EAA2B,EAAI2T,GAAmB3B,GAAGnS,EAAsB,EAAI,SAAU9rC,EAAUguC,EAAU6R,EAAU,CAGvH,IAAAj9E,EAAQm9B,GAAiBC,CAAQ,EACrC,OAASp9B,aAAiB,MAAiBA,EAAMorE,CAAQ,EAAtBprE,CACrC,EAAGq7E,GAAG/R,EAAyB,EAAI0T,GAAmB3B,IAC/C,SAAS8B,GAAwB7R,EAAc,CAChD,IAAAuR,EAASK,GAAwB5R,CAAY,EAI1C,OAAAuR,CACT,CACA,SAAShB,GAAgBvQ,EAAcC,EAAgB,CACrD,OAAOD,IAAiBnC,GAA2BmC,EAAe,IAAMC,EAAiBD,CAC3F,CAQgB,SAAA8R,GAAiBz8E,EAAM+gD,EAGvClL,EAAK,CACH,GAAK71C,EAID,KAAAy8B,EAAWz8B,EAAK,eAAe+gD,CAAS,EAC5C,GAAItkB,GAAY,KAGZ,KAAAqhB,EAAQ99C,EAAK,SAAS,EACtB2qE,EAAe7sB,EAAM,UAAA,EAAY,aACrC,GAAIjI,GAAO,KAAM,CACX,IAAA40B,EAAWzqE,EAAK,kBAAkB61C,CAAG,EACrCymC,EAAWx+B,EAAM,qBAAqB2sB,CAAQ,EAClD,OAAO+R,GAAwB7R,CAAY,EAAEluC,EAAUguC,EAAU6R,CAAQ,CAAA,KACpE,CACL,IAAIv+E,EAAS0+B,EACb,OAAIkuC,IAAiBpC,KACnBxqE,EAASy+B,GAAiBC,CAAQ,GAE7B1+B,CAAA,GAEX,CC3QA,IAAI2+E,GAAsB,cACtBC,GAA+B,UAAY,CAC7C,SAASA,GAAkB,CAAA,CAI3BA,OAAAA,EAAgB,UAAU,cAAgB,SAAU57B,EAAW3F,EAAU,CACnE,IAAAp7C,EAAO,KAAK,QAAQo7C,CAAQ,EAC5Bh2B,EAAW,KAAK,YAAY27B,EAAW3F,CAAQ,EAC/CwhC,EAAe58E,EAAK,YAAY+gD,CAAS,EACzCp1C,EAAO3L,EAAK,QAAQ+gD,CAAS,EAC7B87B,EAAU78E,EAAK,eAAe+gD,CAAS,EACvCjmD,EAAQkF,EAAK,cAAc+gD,EAAW,OAAO,EAC7Cx/B,EAAQzmB,GAASA,EAAMkF,EAAK,cAAc+gD,EAAW,UAAU,GAAK,MAAM,EAC1E+7B,EAAchiF,GAASA,EAAM,OAC7BwkC,EAAW,KAAK,SAChBogB,EAAWpgB,IAAa,SACxBy9C,EAAa/8E,EAAK,YAAcA,EAAK,WAAW,IAAI,EACjD,MAAA,CACL,cAAes/B,EACf,iBAAkB,KAAK,QACvB,eAAgB,KAAK,eACrB,WAAYogB,EAAW,KAAK,QAAU,KACtC,YAAa,KAAK,YAClB,SAAUA,EAAW,KAAK,GAAK,KAC/B,WAAYA,EAAW,KAAK,KAAO,KACnC,KAAA/zC,EACA,UAAWixE,EACX,KAAMC,EACN,SAAAzhC,EACA,MAAOh2B,EACP,MAAA7D,EACA,YAAAu7D,EACA,eAAgBC,EAAaA,EAAW,eAAiB,KACzD,OAAQA,EAAaA,EAAW,OAAS,KAEzC,MAAO,CAAC,aAAc,OAAQ,OAAO,CACvC,CACF,EAWAJ,EAAgB,UAAU,kBAAoB,SAAU57B,EAAWi8B,EAAQ5hC,EAAU0a,EAAemK,EAAWgd,EAAc,CAC3HD,EAASA,GAAU,SACf,IAAAh9E,EAAO,KAAK,QAAQo7C,CAAQ,EAC5Bn6B,EAAS,KAAK,cAAc8/B,EAAW3F,CAAQ,EAOnD,GANI6hC,IACFh8D,EAAO,MAAQg8D,EAAa,mBAE1BnnB,GAAiB,MAAQwK,EAAer/C,EAAO,KAAK,IAC/CA,EAAA,MAAQA,EAAO,MAAM60C,CAAa,GAEvC,CAACmK,EAAW,CACV,IAAA1d,EAAYviD,EAAK,aAAa+gD,CAAS,EAE3Ckf,EAAY1d,EAAU,IAAIy6B,IAAW,SAAW,CAAC,QAAS,WAAW,EAAI,CAACA,EAAQ,QAAS,WAAW,CAAC,CAAA,CAErG,GAAAn5C,EAAkBo8B,CAAS,EAC7B,OAAAh/C,EAAO,OAAS+7D,EAChB/7D,EAAO,eAAiB60C,EACjBmK,EAAUh/C,CAAM,EACd,GAAAqY,EAAgB2mC,CAAS,EAAG,CACjC,IAAAj+D,EAAM8gE,GAAU7C,EAAWh/C,CAAM,EAGrC,OAAOjf,EAAI,QAAQ06E,GAAqB,SAAUtuB,EAAQ8uB,EAAQ,CAChE,IAAIh/E,EAAMg/E,EAAO,OACbC,EAAWD,EACXC,EAAS,OAAO,CAAC,IAAM,KAAOA,EAAS,OAAOj/E,EAAM,CAAC,IAAM,MAC7Di/E,EAAW,CAACA,EAAS,MAAM,EAAGj/E,EAAM,CAAC,GAOvC,IAAIrB,EAAM4/E,GAAiBz8E,EAAM+gD,EAAWo8B,CAAQ,EACpD,GAAIF,GAAgB3c,EAAe2c,EAAa,iBAAiB,EAAG,CAC9D,IAAAxS,EAAWzqE,EAAK,kBAAkBm9E,CAAQ,EAC1C1S,GAAY,IACR5tE,EAAAogF,EAAa,kBAAkBxS,CAAQ,EAC/C,CAEK,OAAA5tE,GAAO,KAAOA,EAAM,GAAK,EAAA,CACjC,CAAA,CAEL,EAIA8/E,EAAgB,UAAU,YAAc,SAAUjjE,EAAK0hC,EAAU,CAC/D,OAAOqhC,GAAiB,KAAK,QAAQrhC,CAAQ,EAAG1hC,CAAG,CACrD,EAOAijE,EAAgB,UAAU,cAAgB,SAAU57B,EAAWq8B,EAAgBhiC,EAAU,CAGzF,EACOuhC,CACP,EAAA,EAgBK,SAASU,GAA6Bt/E,EAAQ,CAC/C,IAAAu/E,EAEAC,EACA,OAAA3Z,EAAgB7lE,CAAM,EACpBA,EAAO,OACQw/E,EAAAx/E,GAcNu/E,EAAAv/E,EAER,CACL,KAAMu/E,EAEN,KAAMC,CACR,CACF,CCxJO,SAASC,GAAWC,EAAQ,CAC1B,OAAA,IAAIC,GAAKD,CAAM,CACxB,CACA,IAAIC,GAAoB,UAAY,CAClC,SAASA,EAAKD,EAAQ,CACpBA,EAASA,GAAU,CAAC,EACpB,KAAK,OAASA,EAAO,MACrB,KAAK,MAAQA,EAAO,KACpB,KAAK,OAASA,EAAO,MACrB,KAAK,SAAWA,EAAO,QACvB,KAAK,OAAS,EAAA,CAShBC,OAAAA,EAAK,UAAU,QAAU,SAAUC,EAAa,CAC9C,IAAIC,EAAS,KAAK,UACdC,EAAOF,GAAeA,EAAY,KAIlC,GAAA,KAAK,QAAUC,EAAQ,CACzB,IAAIx9E,EAAU,KAAK,QACnBA,EAAQ,KAAOA,EAAQ,WAAaw9E,EAAO,QAAQ,UAAA,CAEjD,KAAK,aACP,KAAK,WAAW,YAAc,MAE5B,IAAAE,EACA,KAAK,OAAS,CAACD,IACJC,EAAA,KAAK,MAAM,KAAK,OAAO,GAIlC,IAAAC,EAAYC,EAAe,KAAK,MAAM,EACtCC,EAAmB,KAAK,eAAiB,EACzCC,EAAQF,EAAeL,GAAeA,EAAY,KAAK,EACvDQ,EAAeR,GAAeA,EAAY,cAAgB,GAC1DI,IAAcG,GAASD,IAAqBE,KACjCL,EAAA,SAEf,SAASE,EAAenhF,EAAK,CACzB,QAAAA,GAAO,KAAOA,EAAM,GACfA,CAAA,CAEL,IAAAuhF,GACA,KAAK,QAAUN,IAAe,WAChC,KAAK,OAAS,GACOM,EAAA,KAAK,SAASP,CAAI,GAEzC,KAAK,OAASK,EACd,KAAK,cAAgBC,EACjB,IAAA/gE,EAAOugE,GAAeA,EAAY,KAgBtC,GAfIC,EAIF,KAAK,QAAUA,EAAO,cAOtB,KAAK,QAAU,KAAK,OAAS,KAAK,OAAO,KAAK,OAAO,EAAI,IAIvD,KAAK,UAAW,CAClB,IAAIloE,EAAQ,KAAK,UACb0iB,EAAM,KAAK,IAAIhb,GAAQ,KAAO,KAAK,UAAYA,EAAO,IAAU,KAAK,OAAO,EAChF,GAAI,CAACygE,IAASO,GAAsB1oE,EAAQ0iB,GAAM,CAChD,IAAIimD,EAAW,KAAK,UAChB,GAAAz/E,EAAQy/E,CAAQ,EAClB,QAAS7iF,EAAI,EAAGA,EAAI6iF,EAAS,OAAQ7iF,IACnC,KAAK,YAAY6iF,EAAS7iF,CAAC,EAAGka,EAAO0iB,EAAK8lD,EAAOC,CAAY,OAG/D,KAAK,YAAYE,EAAU3oE,EAAO0iB,EAAK8lD,EAAOC,CAAY,CAC5D,CAEF,KAAK,UAAY/lD,EAGjB,IAAIkmD,EAAe,KAAK,kBAAoB,KAAO,KAAK,iBAAmBlmD,EAK3E,KAAK,cAAgBkmD,CAAA,MAKhB,KAAA,UAAY,KAAK,cAAgB,KAAK,kBAAoB,KAAO,KAAK,iBAAmB,KAAK,QAErG,OAAO,KAAK,WAAW,CACzB,EACAZ,EAAK,UAAU,MAAQ,UAAY,CACjC,KAAK,OAAS,GACd,KAAK,UAAY,KAAK,SAAS,KAAK,OAAO,CAC7C,EACAA,EAAK,UAAU,YAAc,SAAUW,EAAU3oE,EAAO0iB,EAAK8lD,EAAOC,EAAc,CAChFI,GAAS,MAAM7oE,EAAO0iB,EAAK8lD,EAAOC,CAAY,EAC9C,KAAK,iBAAmBE,EACxB,KAAK,iBAAiB,CACpB,MAAA3oE,EACA,IAAA0iB,EACA,MAAOA,EAAM1iB,EACb,KAAM6oE,GAAS,IAAA,EACd,KAAK,OAAO,CACjB,EACAb,EAAK,UAAU,SAAW,SAAUG,EAAM,CACxC,KAAK,UAAY,KAAK,cAAgB,KAAK,QAAU,EACrD,KAAK,iBAAmB,KACpB,IAAAQ,EACAD,EACA,CAACP,GAAQ,KAAK,SACLQ,EAAA,KAAK,OAAO,KAAK,OAAO,EAC/BA,GAAYA,EAAS,WACvBD,EAAqBC,EAAS,mBAC9BA,EAAWA,EAAS,UAGlBz/E,EAAQy/E,CAAQ,GAAK,CAACA,EAAS,SACtBA,EAAA,OAGf,KAAK,UAAYA,EACZ,KAAA,OAAS,KAAK,cAAgB,KACnC,IAAIG,EAAa,KAAK,YACtB,OAAAA,GAAcA,EAAW,MAAM,EACxBJ,CACT,EACAV,EAAK,UAAU,WAAa,UAAY,CACtC,OAAO,KAAK,WAAa,KAAK,UAAY,KAAK,OACjD,EAKAA,EAAK,UAAU,KAAO,SAAUe,EAAU,EAKpC,KAAK,cAAgBA,GAAY,KAAK,UACxC,KAAK,YAAcA,EACnBA,EAAS,UAAY,KACrBA,EAAS,MAAM,EAEnB,EACAf,EAAK,UAAU,QAAU,UAAY,CAC/B,KAAK,YAGJ,KAAA,YAAc,KAAK,UAAU,YAAc,MAC3C,KAAA,cAAgB,KAAK,YAAY,UAAY,MAClD,KAAK,OAAS,GACd,KAAK,UAAY,GACnB,EACAA,EAAK,UAAU,YAAc,UAAY,CACvC,OAAO,KAAK,SACd,EACAA,EAAK,UAAU,cAAgB,UAAY,CACzC,OAAO,KAAK,WACd,EACAA,EAAK,UAAU,aAAe,SAAUtlD,EAAK,CAMtC,KAAA,cAAgB,KAAK,iBAAmBA,CAC/C,EACOslD,CACP,EAAA,EAEEa,GAAuB,UAAA,CACrB,IAAAnmD,EACA6oB,EACAi9B,EACAC,EACAO,EACAC,EAAK,CACP,MAAO,SAAUn6E,EAAGc,EAAGs5E,EAAOC,EAAQ,CAC1B59B,EAAAz8C,EACJ4zB,EAAA9yB,EACE44E,EAAAU,EACOT,EAAAU,EACJH,EAAA,KAAK,KAAKP,EAAeD,CAAK,EACzCS,EAAG,KAAOT,EAAQ,GAAKC,EAAe,EAAIW,EAAUC,CAAA,CAExD,EACO,OAAAJ,EACP,SAASI,GAAiB,CACjB,OAAA99B,EAAU7oB,EAAM6oB,IAAY,IAAA,CAErC,SAAS69B,GAAU,CACjB,IAAI/9B,EAAYE,EAAUy9B,EAAWR,EAAQ,KAAK,KAAKj9B,EAAUy9B,CAAQ,EACrE3gF,EAASkjD,GAAW7oB,EAAM,KAAO2oB,EAAYo9B,EAAep9B,EAG9DE,EACF,OAAAA,IACOljD,CAAA,CAEX,EAAE,EC9Mc,SAAAihF,GAAe3/E,EAE/BuM,EAAK,CAEC,IAAAq/D,EAAUr/D,GAAOA,EAAI,KACzB,OAAIq/D,IAAY,UAEP5rE,GAEL4rE,IAAY,QAEb,CAAClqE,GAAS1B,CAAK,GAAKA,GAAS,MAAQA,IAAU,MACxCA,EAAA,CAAC27B,GAAU37B,CAAK,GAOnBA,GAAS,MAAQA,IAAU,GAAK,IAGrC,OAAOA,CAAK,EAChB,CAEqBuD,EAAc,CACjC,OAAU,SAAU/F,EAAK,CAIvB,OAAO,WAAWA,CAAG,CACvB,EACA,KAAQ,SAAUA,EAAK,CAEd,MAAA,CAACm+B,GAAUn+B,CAAG,CACvB,EACA,KAAQ,SAAUA,EAAK,CACrB,OAAOgE,EAAShE,CAAG,EAAIkF,GAAKlF,CAAG,EAAIA,CAAA,CAEvC,CAAC,EAqCD,IAAIoiF,GAAmC,UAAY,CAOxCA,SAAAA,EAAoBC,EAAOC,EAAc,CAChD,IAAIC,EAASF,IAAU,OAClB,KAAA,UAAYE,EAAS,EAAI,GAC1BD,GAAgB,OAClBA,EAAeC,EAAS,MAAQ,OAE7B,KAAA,cAAgBD,IAAiB,MAAQ,KAAY,GAAA,CAI5DF,OAAAA,EAAoB,UAAU,SAAW,SAAUI,EAAMC,EAAM,CAE7D,IAAIC,EAAYx+E,GAASs+E,CAAI,EAAIA,EAAO5jD,GAAgB4jD,CAAI,EACxDG,EAAYz+E,GAASu+E,CAAI,EAAIA,EAAO7jD,GAAgB6jD,CAAI,EACxDG,EAAiB,MAAMF,CAAS,EAChCG,EAAiB,MAAMF,CAAS,EAOpC,GANIC,IACFF,EAAY,KAAK,eAEfG,IACFF,EAAY,KAAK,eAEfC,GAAkBC,EAAgB,CAChC,IAAAC,EAAY9+E,EAASw+E,CAAI,EACzBO,EAAY/+E,EAASy+E,CAAI,EACzBK,IACFJ,EAAYK,EAAYP,EAAO,GAE7BO,IACFJ,EAAYG,EAAYL,EAAO,EACjC,CAEK,OAAAC,EAAYC,EAAY,KAAK,UAAYD,EAAYC,EAAY,CAAC,KAAK,UAAY,CAC5F,EACOP,CACP,EAAA,ECtHEY,GAA8B,UAAY,CAC5C,SAASA,GAAiB,CAAA,CAC1BA,OAAAA,EAAe,UAAU,WAAa,UAAY,CAE1C,MAAA,IAAI,MAAM,eAAe,CACjC,EACAA,EAAe,UAAU,eAAiB,SAAU9+B,EAAW,CAEvD,MAAA,IAAI,MAAM,eAAe,CACjC,EACA8+B,EAAe,UAAU,aAAe,UAAY,CAEpD,EAIAA,EAAe,UAAU,iBAAmB,SAAUhqC,EAAK,CAE3D,EAUAgqC,EAAe,UAAU,sBAAwB,UAAY,CAE7D,EACAA,EAAe,UAAU,MAAQ,UAAY,CAE7C,EAMAA,EAAe,UAAU,cAAgB,SAAU9+B,EAAW0pB,EAAU,CAExE,EACAoV,EAAe,UAAU,sBAAwB,SAAUpjD,EAAUguC,EAAU,CAE/E,EACAoV,EAAe,UAAU,aAAe,SAAUC,EAAQC,EAAS,CAC1D,OAAAf,GAAec,EAAQC,CAAO,CACvC,EACOF,CACP,EAAA,EAEF,SAASG,GAAqBC,EAAgBC,EAAmB,CAC3D,IAAAC,EAAY,IAAIN,GAChB7/E,EAAOigF,EAAe,KACtBtV,EAAewV,EAAU,aAAeF,EAAe,aACvDG,EAAoBH,EAAe,WACnCnkB,EAAS,GACTmkB,EAAe,iBAAmBpX,IAOpC9sC,GAAW+/B,CAAM,EAQnB,IAAIukB,EAAa,CAAC,EACdC,EAAa,CAAC,EACdjW,EAAU4V,EAAe,iBAC7B,GAAI5V,EACGpqE,EAAAoqE,EAAS,SAAUkW,EAAQ7mE,EAAK,CACnC,IAAI/N,EAAO40E,EAAO,KACdC,EAAY,CACd,MAAO9mE,EACP,KAAA/N,EACA,YAAa40E,EAAO,WACtB,EAIA,GAHAF,EAAW,KAAKG,CAAS,EAGrB70E,GAAQ,KAAM,CAIhB,IAAI80E,EAAW,GACXh9E,GAAO68E,EAAY30E,CAAI,GAIzBowB,GAAW0kD,CAAQ,EAErBH,EAAW30E,CAAI,EAAI60E,CAAA,CACrB,CACD,MAKD,SAAShlF,EAAI,EAAGA,EAAIykF,EAAe,wBAA8BzkF,IAG/D6kF,EAAW,KAAK,CACd,MAAO7kF,CAAA,CACR,EAID,IAAA8/E,EAAgBC,GAAuB5Q,EAAc9B,EAAuB,EAC5EqX,EAAkB,cACVC,EAAA,eAAiB,SAAUp/B,EAAW,CAC9C,OAAOu6B,EAAct7E,EAAMogF,EAAmBC,EAAYt/B,CAAS,CACrE,EACAo/B,EAAU,WAAaz/E,EAAKggF,GAAY,KAAMT,CAAc,GAE9DE,EAAU,aAAez/E,EAAKigF,GAAc,KAAMV,CAAc,EAC5D,IAAAzE,EAAaC,GAAwB9Q,EAAc9B,EAAuB,EAC9EsX,EAAU,MAAQz/E,EAAK86E,EAAY,KAAMx7E,EAAMogF,EAAmBC,CAAU,EACxE,IAAAO,EAAiBpE,GAAwB7R,CAAY,EAC/CwV,EAAA,cAAgB,SAAUp/B,EAAW0pB,EAAU,CACvD,IAAI8P,EAAUe,EAAct7E,EAAMogF,EAAmBC,EAAYt/B,CAAS,EACnE,OAAA8/B,EAAsBtG,EAAS9P,CAAQ,CAChD,EACA,IAAIoW,EAAwBV,EAAU,sBAAwB,SAAU1jD,EAAUguC,EAAU,CAC1F,GAAIhuC,GAAY,KAGZ,KAAA8jD,EAASF,EAAW5V,CAAQ,EAEhC,GAAI8V,EACF,OAAOK,EAAenkD,EAAUguC,EAAU8V,EAAO,IAAI,EAEzD,EACA,OAAAJ,EAAU,iBAAmBz/E,EAAKogF,GAAkB,KAAMT,EAAYC,CAAU,EAChFH,EAAU,sBAAwBz/E,EAAKqgF,GAAuB,KAAMV,CAAU,EACvEF,CACT,CACA,SAASO,GAAWM,EAAU,CAC5B,IAAIrW,EAAeqW,EAAS,aACxB,GAAA,CAACC,GAAwBtW,CAAY,EAAG,CAC1C,IAAI7O,EAAS,GAIb//B,GAAW+/B,CAAM,CAAA,CAEnB,OAAOklB,EAAS,IAClB,CACA,SAASL,GAAaK,EAAU,CAC9B,IAAIrW,EAAeqW,EAAS,aACxBhhF,EAAOghF,EAAS,KAChB,GAAA,CAACC,GAAwBtW,CAAY,EAAG,CAC1C,IAAI7O,EAAS,GAIb//B,GAAW+/B,CAAM,CAAA,CAEnB,GAAI6O,IAAiBnC,GAA0B,CAE7C,QADIzqE,EAAS,CAAC,EACLvC,EAAI,EAAG0C,EAAM8B,EAAK,OAAQxE,EAAI0C,EAAK1C,IAE1CuC,EAAO,KAAKiC,EAAKxE,CAAC,EAAE,OAAO,EAEtB,OAAAuC,CAAA,SACE4sE,IAAiBlC,GAA2B,CAErD,QADI1qE,EAAS,CAAC,EACLvC,EAAI,EAAG0C,EAAM8B,EAAK,OAAQxE,EAAI0C,EAAK1C,IAE1CuC,EAAO,KAAKe,EAAO,GAAIkB,EAAKxE,CAAC,CAAC,CAAC,EAE1B,OAAAuC,CAAA,CAEX,CACA,SAAS+iF,GAAiBT,EAAYC,EAAYzqC,EAAK,CACrD,GAAIA,GAAO,KAIP,IAAA90C,GAAS80C,CAAG,GAEb,CAAC,MAAMA,CAAG,GAAK,CAACpyC,GAAO68E,EAAYzqC,CAAG,EACvC,OAAOwqC,EAAWxqC,CAAG,EACZ,GAAApyC,GAAO68E,EAAYzqC,CAAG,EAC/B,OAAOyqC,EAAWzqC,CAAG,EAEzB,CACA,SAASkrC,GAAsBV,EAAY,CACzC,OAAOxiF,EAAMwiF,CAAU,CACzB,CACA,IAAIa,GAAuBt+E,EAAc,EAClC,SAASu+E,GAA0BjB,EAAmB,CAC3DA,EAAoBriF,EAAMqiF,CAAiB,EAC3C,IAAIl/E,EAAOk/E,EAAkB,KACzBpkB,EAAS,GACR96D,GAIH+6B,GAAW+/B,CAAM,EAEf,IAAAslB,EAAapgF,EAAK,MAAM,GAAG,EAC3BogF,EAAW,SAAW,GAIxBrlD,GAAW+/B,CAAM,EAInB,IAAIulB,EAAY,GACZD,EAAW,CAAC,IAAM,YACpBpgF,EAAOogF,EAAW,CAAC,EACPC,EAAA,IAEdnB,EAAkB,YAAcmB,EACXH,GAAA,IAAIlgF,EAAMk/E,CAAiB,CAClD,CACgB,SAAAoB,GAAmBC,EAAgBC,EAAYC,EAAc,CACvE,IAAAC,EAAmBvlD,GAAiBolD,CAAc,EAClDI,EAAUD,EAAiB,OAC3B5lB,EAAS,GACR6lB,GAIH5lD,GAAW+/B,CAAM,EAEnB,QAAStgE,EAAI,EAAG0C,EAAMyjF,EAASnmF,EAAI0C,EAAK1C,IAAK,CACvC,IAAAomF,EAAcF,EAAiBlmF,CAAC,EACpCgmF,EAAaK,GAAyBD,EAAaJ,CAAkD,EAGjGhmF,IAAM0C,EAAM,IACdsjF,EAAW,OAAS,KAAK,IAAIA,EAAW,OAAQ,CAAC,EACnD,CAEK,OAAAA,CACT,CACA,SAASK,GAAyBD,EAAaE,EAAcL,EAE7DM,EAAW,CACT,IAAIjmB,EAAS,GACRgmB,EAAa,QAIhB/lD,GAAW+/B,CAAM,EAEdr9D,EAASmjF,CAAW,GAIvB7lD,GAAW+/B,CAAM,EAEnB,IAAIkmB,EAAYJ,EAAY,KACxB1B,EAAoBgB,GAAqB,IAAIc,CAAS,EACrD9B,GAIHnkD,GAAW+/B,CAAM,EAGnB,IAAImmB,EAAkB1mF,EAAIumF,EAAc,SAAUI,EAAU,CACnD,OAAAlC,GAAqBkC,EAAUhC,CAAiB,CAAA,CACxD,EACGiC,EAAahmD,GAAiB+jD,EAAkB,UAAU,CAC5D,SAAU+B,EAAgB,CAAC,EAC3B,aAAcA,EACd,OAAQpkF,EAAM+jF,EAAY,MAAM,CAAA,CACjC,CAAC,EAUF,OAAOrmF,EAAI4mF,EAAY,SAAUpkF,EAAQqkF,EAAa,CACpD,IAAItmB,EAAS,GACRr9D,EAASV,CAAM,GAIlBg+B,GAAW+/B,CAAM,EAEd/9D,EAAO,MAIVg+B,GAAW+/B,CAAM,EAEf,IAAA6O,EAAe+O,GAAmB37E,EAAO,IAAI,EAC5CkjF,GAAwBtW,CAAY,GAIvC5uC,GAAW+/B,CAAM,EAEf,IAAAumB,EACAC,EAAgBR,EAAa,CAAC,EAuBlC,GAAIQ,GAAiBF,IAAgB,GAGlC,CAACrkF,EAAO,WAAY,CACrB,IAAI+sE,EAAawX,EAAc,WAO3BxX,IACK/sE,EAAA,KAAOukF,EAAc,KAAK,MAAM,EAAGxX,CAAU,EAAE,OAAO/sE,EAAO,IAAI,GAEpDskF,EAAA,CACpB,eAAgBxZ,GAChB,aAAciC,EACd,WAAYwX,EAAc,cAAc,UAC1C,CAAA,MAEsBD,EAAA,CACpB,eAAgBxZ,GAChB,aAAc,EACd,WAAY9qE,EAAO,UACrB,EAEF,OAAOw7E,GAAax7E,EAAO,KAAMskF,EAAqB,IAAI,CAAA,CAC3D,CACH,CACA,SAASpB,GAAwBtW,EAAc,CACtC,OAAAA,IAAiBnC,IAA4BmC,IAAiBlC,EACvE,CClXA,IAAI8Z,GAAY,YAILC,GAAkB,OAAO,cAAgBD,GAAY,MAAQ,YAC7DE,GAAkB,OAAO,cAAgBF,GAAY,MAAQ,YAC7DG,GAAiB,OAAO,aAAeH,GAAY,MAAQ,WAC3DI,GAAmB,OAAO,eAAiBJ,GAAY,MAAQ,aAItEK,GAAY,CACd,MAASD,GACT,IAAOD,GAEP,QAAW,MACX,OAAU,MACV,KAAQC,EACV,EACIE,GACJ,SAASC,GAAeC,EAAU,CAEzB,OAAAA,EAAW,MAAQP,GAAkBC,EAC9C,CAEA,SAASO,IAAmB,CACnB,MAAA,CAAC,IAAU,IAAS,CAC7B,CAEA,SAASC,GAAWC,EAAe,CACjC,IAAI/kF,EAAO+kF,EAAc,YAEzB,OAAO/kF,IAAS,MAAQ+kF,EAAc,QAAU,IAAI/kF,EAAK+kF,CAAa,CACxE,CACA,SAASC,GAAarlC,EAAOslC,EAAQnY,EAAS7yC,EAAKirD,EAAQ,CACrD,IAAAC,EAAWV,GAAU3X,GAAW,OAAO,EAC3C,GAAIoY,EAAQ,CACN,IAAAE,EAAWzlC,EAAMslC,CAAM,EACvBI,EAASD,GAAYA,EAAS,OAC9B,GAAEC,IAAWprD,EAAM,CAIrB,QAHIqrD,EAAW,IAAIH,EAASlrD,CAAG,EAGtB1wB,EAAI,EAAGA,EAAI87E,EAAQ97E,IACjB+7E,EAAA/7E,CAAC,EAAI67E,EAAS77E,CAAC,EAE1Bo2C,EAAMslC,CAAM,EAAIK,CAAA,CAClB,MAEA3lC,EAAMslC,CAAM,EAAI,IAAIE,EAASlrD,CAAG,CAEpC,CAKA,IAAIsrD,GAAyB,UAAY,CACvC,SAASA,GAAY,CACnB,KAAK,QAAU,CAAC,EAEhB,KAAK,WAAa,CAAC,EACnB,KAAK,QAAU,CAAC,EAChB,KAAK,OAAS,EACd,KAAK,UAAY,EACjB,KAAK,kBAAoB9gF,EAAc,CAAA,CAKzC8gF,OAAAA,EAAU,UAAU,SAAW,SAAU1I,EAAU2I,EAAiBC,EAAgB,CAIlF,KAAK,UAAY5I,EAEjB,KAAK,QAAU,CAAC,EAChB,KAAK,SAAW,KAChB,KAAK,YAAc,KAAK,mBACpB,IAAAl9E,EAASk9E,EAAS,UAAU,EAC5B6I,EAAgB,KAAK,sBAAwBhB,GAAuB/kF,EAAO,YAAY,EAE3F,KAAK,gBAAkB8lF,GAAkBC,EAEzC,KAAK,WAAa,CAAC,EACUpJ,GAAyB38E,CAAM,EAC5D,KAAK,YAAcvC,EAAIooF,EAAiB,SAAU9tC,EAAK,CAM9C,MAAA,CAEL,KAAMA,EAAI,KACV,SAAUA,EAAI,QAChB,CAAA,CACD,EACD,KAAK,sBAAsB,EAAGmlC,EAAS,MAAA,CAAO,CAChD,EACA0I,EAAU,UAAU,YAAc,UAAY,CAC5C,OAAO,KAAK,SACd,EAQAA,EAAU,UAAU,UAAY,UAAY,CACnC,OAAA,KAAK,UAAU,UAAU,CAClC,EAIAA,EAAU,UAAU,2BAA6B,SAAU1Y,EAAShqE,EAAM,CACxE,IAAI8iF,EAAmB,KAAK,kBACxBzD,EAAa,KAAK,YAClB0D,EAAaD,EAAiB,IAAI9Y,CAAO,EAC7C,GAAI+Y,GAAc,MAChB,GAAI1D,EAAW0D,CAAU,EAAE,OAAS/iF,EAC3B,OAAA+iF,OAGTA,EAAa1D,EAAW,OAE1B,OAAAA,EAAW0D,CAAU,EAAI,CACvB,KAAA/iF,CACF,EACiB8iF,EAAA,IAAI9Y,EAAS+Y,CAAU,EACnC,KAAA,QAAQA,CAAU,EAAI,IAAInB,GAAU5hF,GAAQ,OAAO,EAAE,KAAK,SAAS,EACnE,KAAA,WAAW+iF,CAAU,EAAIf,GAAiB,EACxCe,CACT,EACAL,EAAU,UAAU,mBAAqB,SAAUN,EAAQY,EAAa,CAClE,IAAAC,EAAQ,KAAK,QAAQb,CAAM,EAC3BvtC,EAAM,KAAK,YAAYutC,CAAM,EAC7Bc,EAAa,KAAK,WAClBjhF,EAAS4yC,EAAI,eAAiB,EAC9B33C,EAAM+lF,EAAM,OACZhhF,IAAW,IAGFihF,EAAAd,CAAM,EAAIJ,GAAiB,GAIxC,QAFImB,EAAeD,EAAWd,CAAM,EAE3B5nF,EAAIyH,EAAQzH,EAAI0C,EAAK1C,IAAK,CAC7B,IAAAqB,EAAMonF,EAAMzoF,CAAC,EAAIwoF,EAAY,gBAAgBC,EAAMzoF,CAAC,CAAC,EACpD,MAAMqB,CAAG,IACZsnF,EAAa,CAAC,EAAI,KAAK,IAAItnF,EAAKsnF,EAAa,CAAC,CAAC,EAC/CA,EAAa,CAAC,EAAI,KAAK,IAAItnF,EAAKsnF,EAAa,CAAC,CAAC,EACjD,CAEFtuC,EAAI,YAAcmuC,EAClBnuC,EAAI,cAAgB33C,EACpB23C,EAAI,KAAO,SACb,EACA6tC,EAAU,UAAU,eAAiB,SAAUN,EAAQ,CACjD,IAAArD,EAAU,KAAK,YAAYqD,CAAM,EACjCY,EAAcjE,EAAQ,YACnB,OAAAiE,CACT,EACAN,EAAU,UAAU,qBAAuB,SAAUjZ,EAAU,CACzD,IAAApsC,EAAO,KAAK,YAAYosC,CAAQ,EACpC,OAAOpsC,GAAQA,EAAK,QACtB,EAIAqlD,EAAU,UAAU,WAAa,SAAU1jF,EAAM,CAI/C,IAAIg7E,EAAW,KAAK,UAChBtlE,EAAQ,KAAK,MAAM,EACvBslE,EAAS,WAAWh7E,CAAI,EACpB,IAAAo4B,EAAM4iD,EAAS,MAAM,EACrB,OAACA,EAAS,aACL5iD,GAAA1iB,GAELA,EAAQ0iB,GACL,KAAA,sBAAsB1iB,EAAO0iB,EAAK,EAAI,EAEtC,CAAC1iB,EAAO0iB,CAAG,CACpB,EACAsrD,EAAU,UAAU,aAAe,SAAUU,EAAQC,EAAY,CAO/D,QANIC,EAAS,KAAK,QACdjE,EAAa,KAAK,YAClBkE,EAASlE,EAAW,OACpBmE,EAAY,KAAK,WACjB9uE,EAAQ,KAAK,MAAM,EACnB0iB,EAAM1iB,EAAQ,KAAK,IAAI0uE,EAAO,OAAQC,GAAc,CAAC,EAChD7oF,EAAI,EAAGA,EAAI+oF,EAAQ/oF,IAAK,CAC3B,IAAAq6C,EAAMwqC,EAAW7kF,CAAC,EACtB2nF,GAAamB,EAAQ9oF,EAAGq6C,EAAI,KAAMzd,EAAK,EAAI,CAAA,CAG7C,QADIqsD,EAAgB,CAAC,EACZ/qE,EAAMhE,EAAOgE,EAAM0e,EAAK1e,IAG/B,QAFIgrE,EAAYhrE,EAAMhE,EAEb0tE,EAAS,EAAGA,EAASmB,EAAQnB,IAAU,CAC1C,IAAAvtC,EAAMwqC,EAAW+C,CAAM,EACvBvmF,EAAMgmF,GAAuB,UAAU,KAAK,KAAMuB,EAAOM,CAAS,GAAKD,EAAe5uC,EAAI,SAAU6uC,EAAWtB,CAAM,EAClHkB,EAAAlB,CAAM,EAAE1pE,CAAG,EAAI7c,EAClB,IAAAsnF,EAAeK,EAAUpB,CAAM,EACnCvmF,EAAMsnF,EAAa,CAAC,IAAMA,EAAa,CAAC,EAAItnF,GAC5CA,EAAMsnF,EAAa,CAAC,IAAMA,EAAa,CAAC,EAAItnF,EAAA,CAG3C,YAAA,UAAY,KAAK,OAASu7B,EACxB,CACL,MAAA1iB,EACA,IAAA0iB,CACF,CACF,EACAsrD,EAAU,UAAU,sBAAwB,SAAUhuE,EAAO0iB,EAAKirD,EAAQ,CASxE,QARIrI,EAAW,KAAK,UAChBsJ,EAAS,KAAK,QACdjE,EAAa,KAAK,YAClBkE,EAASlE,EAAW,OACpBmE,EAAY,KAAK,WACjBG,EAAWppF,EAAI8kF,EAAY,SAAUxqC,EAAK,CAC5C,OAAOA,EAAI,QAAA,CACZ,EACQr6C,EAAI,EAAGA,EAAI+oF,EAAQ/oF,IAAK,CAC3B,IAAAq6C,EAAMwqC,EAAW7kF,CAAC,EACjBgpF,EAAUhpF,CAAC,IACJgpF,EAAAhpF,CAAC,EAAIwnF,GAAiB,GAElCG,GAAamB,EAAQ9oF,EAAGq6C,EAAI,KAAMzd,EAAKirD,CAAM,CAAA,CAE/C,GAAIrI,EAAS,YACXA,EAAS,YAAYtlE,EAAO0iB,EAAKksD,EAAQE,CAAS,MAGlD,SADI/nD,EAAW,CAAC,EACP/iB,EAAMhE,EAAOgE,EAAM0e,EAAK1e,IAAO,CAE3B+iB,EAAAu+C,EAAS,QAAQthE,EAAK+iB,CAAQ,EAQzC,QAAS2mD,EAAS,EAAGA,EAASmB,EAAQnB,IAAU,CAC1C,IAAAwB,EAAaN,EAAOlB,CAAM,EAE1BvmF,EAAM,KAAK,gBAAgB4/B,EAAUkoD,EAASvB,CAAM,EAAG1pE,EAAK0pE,CAAM,EACtEwB,EAAWlrE,CAAG,EAAI7c,EACd,IAAAsnF,EAAeK,EAAUpB,CAAM,EACnCvmF,EAAMsnF,EAAa,CAAC,IAAMA,EAAa,CAAC,EAAItnF,GAC5CA,EAAMsnF,EAAa,CAAC,IAAMA,EAAa,CAAC,EAAItnF,EAAA,CAC9C,CAGA,CAACm+E,EAAS,YAAcA,EAAS,OAEnCA,EAAS,MAAM,EAEZ,KAAA,UAAY,KAAK,OAAS5iD,EAE/B,KAAK,QAAU,CAAC,CAClB,EACAsrD,EAAU,UAAU,MAAQ,UAAY,CACtC,OAAO,KAAK,MACd,EAIAA,EAAU,UAAU,IAAM,SAAU7tC,EAAKn8B,EAAK,CAC5C,GAAI,EAAEA,GAAO,GAAKA,EAAM,KAAK,QACpB,MAAA,KAEL,IAAAmrE,EAAW,KAAK,QAAQhvC,CAAG,EAC/B,OAAOgvC,EAAWA,EAAS,KAAK,YAAYnrE,CAAG,CAAC,EAAI,GACtD,EACAgqE,EAAU,UAAU,UAAY,SAAUrD,EAAY3mE,EAAK,CACzD,IAAI0qE,EAAS,CAAC,EACVU,EAAS,CAAC,EACd,GAAIprE,GAAO,KAAM,CACTA,EAAA2mE,EAENA,EAAa,CAAC,EAEd,QAAS7kF,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAC3CspF,EAAO,KAAKtpF,CAAC,CACf,MAESspF,EAAAzE,EAEX,QAAS7kF,EAAI,EAAG0C,EAAM4mF,EAAO,OAAQtpF,EAAI0C,EAAK1C,IAC5C4oF,EAAO,KAAK,KAAK,IAAIU,EAAOtpF,CAAC,EAAGke,CAAG,CAAC,EAE/B,OAAA0qE,CACT,EAIAV,EAAU,UAAU,cAAgB,SAAU7tC,EAAKkvC,EAAQ,CACzD,GAAI,EAAEA,GAAU,GAAKA,EAAS,KAAK,WAC1B,MAAA,KAEL,IAAAF,EAAW,KAAK,QAAQhvC,CAAG,EACxB,OAAAgvC,EAAWA,EAASE,CAAM,EAAI,GACvC,EAIArB,EAAU,UAAU,OAAS,SAAU7tC,EAAK,CACtC,IAAAmvC,EAAU,KAAK,QAAQnvC,CAAG,EAC1BpuC,EAAM,EACV,GAAIu9E,EACO,QAAAxpF,EAAI,EAAG0C,EAAM,KAAK,QAAS1C,EAAI0C,EAAK1C,IAAK,CAChD,IAAI6D,EAAQ,KAAK,IAAIw2C,EAAKr6C,CAAC,EACtB,MAAM6D,CAAK,IACPoI,GAAApI,EACT,CAGG,OAAAoI,CACT,EAIAi8E,EAAU,UAAU,UAAY,SAAU7tC,EAAK,CAC7C,IAAIovC,EAAe,CAAC,EAEpB,KAAK,KAAK,CAACpvC,CAAG,EAAG,SAAUh5C,EAAK,CACzB,MAAMA,CAAG,GACZooF,EAAa,KAAKpoF,CAAG,CACvB,CACD,EAGD,IAAIqoF,EAAqBD,EAAa,KAAK,SAAU,EAAGliF,EAAG,CACzD,OAAO,EAAIA,CAAA,CACZ,EACG7E,EAAM,KAAK,MAAM,EAErB,OAAOA,IAAQ,EAAI,EAAIA,EAAM,IAAM,EAAIgnF,GAAoBhnF,EAAM,GAAK,CAAC,GAAKgnF,EAAmBhnF,EAAM,CAAC,EAAIgnF,EAAmBhnF,EAAM,EAAI,CAAC,GAAK,CAC/I,EAIAwlF,EAAU,UAAU,gBAAkB,SAAUyB,EAAU,CACxD,GAAIA,GAAY,KAAK,WAAaA,EAAW,EACpC,MAAA,GAEL,GAAA,CAAC,KAAK,SACD,OAAAA,EAGT,IAAInS,EAAU,KAAK,SAEf4J,EAAe5J,EAAQmS,CAAQ,EACnC,GAAIvI,GAAgB,MAAQA,EAAe,KAAK,QAAUA,IAAiBuI,EAClE,OAAAA,EAIT,QAFIxvE,EAAO,EACPC,EAAQ,KAAK,OAAS,EACnBD,GAAQC,GAAO,CAChB,IAAAC,GAAOF,EAAOC,GAAS,EAAI,EAC3B,GAAAo9D,EAAQn9D,CAAG,EAAIsvE,EACjBxvE,EAAOE,EAAM,UACJm9D,EAAQn9D,CAAG,EAAIsvE,EACxBvvE,EAAQC,EAAM,MAEP,QAAAA,CACT,CAEK,MAAA,EACT,EASA6tE,EAAU,UAAU,iBAAmB,SAAU7tC,EAAKx2C,EAAO+lF,EAAa,CACxE,IAAId,EAAS,KAAK,QACdU,EAAUV,EAAOzuC,CAAG,EACpBwvC,EAAiB,CAAC,EACtB,GAAI,CAACL,EACI,OAAAK,EAELD,GAAe,OACHA,EAAA,KAMP,QAJLE,EAAU,IACVC,EAAU,GACVC,EAAoB,EAEfhqF,EAAI,EAAG0C,EAAM,KAAK,QAAS1C,EAAI0C,EAAK1C,IAAK,CAC5C,IAAAulD,EAAY,KAAK,YAAYvlD,CAAC,EAC9BkzC,EAAOrvC,EAAQ2lF,EAAQjkC,CAAS,EAChCn8C,EAAO,KAAK,IAAI8pC,CAAI,EACpB9pC,GAAQwgF,KAONxgF,EAAO0gF,GAAW1gF,IAAS0gF,GAAW52C,GAAQ,GAAK62C,EAAU,KACrDD,EAAA1gF,EACA2gF,EAAA72C,EACU82C,EAAA,GAElB92C,IAAS62C,IACXF,EAAeG,GAAmB,EAAIhqF,GAE1C,CAEF,OAAA6pF,EAAe,OAASG,EACjBH,CACT,EACA3B,EAAU,UAAU,WAAa,UAAY,CACvC,IAAA+B,EACAzS,EAAU,KAAK,SACnB,GAAIA,EAAS,CACX,IAAI70E,EAAO60E,EAAQ,YACf0S,EAAY,KAAK,OAErB,GAAIvnF,IAAS,MAAO,CACLsnF,EAAA,IAAItnF,EAAKunF,CAAS,EAC/B,QAASlqF,EAAI,EAAGA,EAAIkqF,EAAWlqF,IAClBiqF,EAAAjqF,CAAC,EAAIw3E,EAAQx3E,CAAC,CAC3B,MAEAiqF,EAAa,IAAItnF,EAAK60E,EAAQ,OAAQ,EAAG0S,CAAS,CACpD,KACK,CACD,IAAAvnF,EAAO2kF,GAAe,KAAK,SAAS,EACxC2C,EAAa,IAAItnF,EAAK,KAAK,MAAA,CAAO,EAClC,QAAS3C,EAAI,EAAGA,EAAIiqF,EAAW,OAAQjqF,IACrCiqF,EAAWjqF,CAAC,EAAIA,CAClB,CAEK,OAAAiqF,CACT,EAIA/B,EAAU,UAAU,OAAS,SAAU7K,EAAM14E,EAAI,CAC3C,GAAA,CAAC,KAAK,OACD,OAAA,KAWT,QATIsjF,EAAW,KAAK,MAAM,EACtBziC,EAAQyiC,EAAS,MAAM,EACvBtlF,EAAO2kF,GAAeW,EAAS,SAAS,EACxCgC,EAAa,IAAItnF,EAAK6iD,CAAK,EAC3B3hD,EAAQ,CAAC,EACT07E,EAAUlC,EAAK,OACf51E,EAAS,EACT0iF,EAAO9M,EAAK,CAAC,EACbyL,EAASb,EAAS,QACbjoF,EAAI,EAAGA,EAAIwlD,EAAOxlD,IAAK,CAC9B,IAAIoqF,EAAO,OACPb,EAAStB,EAAS,YAAYjoF,CAAC,EAEnC,GAAIu/E,IAAY,EACd6K,EAAOzlF,EAAG3E,CAAC,UACFu/E,IAAY,EAAG,CACxB,IAAIl+E,EAAMynF,EAAOqB,CAAI,EAAEZ,CAAM,EACtBa,EAAAzlF,EAAGtD,EAAKrB,CAAC,CAAA,KACX,CAEE,QADH4b,EAAI,EACDA,EAAI2jE,EAAS3jE,IAClB/X,EAAM+X,CAAC,EAAIktE,EAAOzL,EAAKzhE,CAAC,CAAC,EAAE2tE,CAAM,EAEnC1lF,EAAM+X,CAAC,EAAI5b,EACJoqF,EAAAzlF,EAAG,MAAM,KAAMd,CAAK,CAAA,CAEzBumF,IACFH,EAAWxiF,GAAQ,EAAI8hF,EACzB,CAGF,OAAI9hF,EAAS+9C,IACXyiC,EAAS,SAAWgC,GAEtBhC,EAAS,OAASxgF,EAElBwgF,EAAS,QAAU,CAAC,EACpBA,EAAS,iBAAiB,EACnBA,CACT,EAKAC,EAAU,UAAU,YAAc,SAAU3qD,EAAO,CAC7C,IAAA0qD,EAAW,KAAK,MAAM,EACtBvlF,EAAMulF,EAAS,OACnB,GAAI,CAACvlF,EACI,OAAA,KAEL,IAAA26E,EAAO35E,GAAK65B,CAAK,EACjBgiD,EAAUlC,EAAK,OACnB,GAAI,CAACkC,EACI,OAAA,KAEL,IAAA8K,EAAgBpC,EAAS,MAAM,EAC/BtlF,EAAO2kF,GAAeW,EAAS,SAAS,EACxCgC,EAAa,IAAItnF,EAAK0nF,CAAa,EACnC5iF,EAAS,EACT0iF,EAAO9M,EAAK,CAAC,EACb5zE,EAAM8zB,EAAM4sD,CAAI,EAAE,CAAC,EACnBzgF,EAAM6zB,EAAM4sD,CAAI,EAAE,CAAC,EACnBG,EAAWrC,EAAS,QACpBsC,EAAgB,GAChB,GAAA,CAACtC,EAAS,SAAU,CAEtB,IAAI/pE,EAAM,EACV,GAAIqhE,IAAY,EAAG,CAEjB,QADI6J,EAAakB,EAASjN,EAAK,CAAC,CAAC,EACxBr9E,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACxB,IAAAqB,EAAM+nF,EAAWppF,CAAC,GAMlBqB,GAAOoI,GAAOpI,GAAOqI,GAAO,MAAMrI,CAAG,KACvC4oF,EAAWxiF,GAAQ,EAAIyW,GAEzBA,GAAA,CAEcqsE,EAAA,EAAA,SACPhL,IAAY,EAAG,CAKxB,QAJI6J,EAAakB,EAASjN,EAAK,CAAC,CAAC,EAC7BmN,EAAcF,EAASjN,EAAK,CAAC,CAAC,EAC9B9pC,EAAOhW,EAAM8/C,EAAK,CAAC,CAAC,EAAE,CAAC,EACvB7pC,EAAOjW,EAAM8/C,EAAK,CAAC,CAAC,EAAE,CAAC,EAClBr9E,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACxB,IAAAqB,EAAM+nF,EAAWppF,CAAC,EAClB05B,EAAO8wD,EAAYxqF,CAAC,GAEnBqB,GAAOoI,GAAOpI,GAAOqI,GAAO,MAAMrI,CAAG,KAAOq4B,GAAQ6Z,GAAQ7Z,GAAQ8Z,GAAQ,MAAM9Z,CAAI,KACzFuwD,EAAWxiF,GAAQ,EAAIyW,GAEzBA,GAAA,CAEcqsE,EAAA,EAAA,CAClB,CAEF,GAAI,CAACA,EACH,GAAIhL,IAAY,EACd,QAASv/E,EAAI,EAAGA,EAAIqqF,EAAerqF,IAAK,CAClC,IAAA2pF,EAAW1B,EAAS,YAAYjoF,CAAC,EACjCqB,EAAMipF,EAASjN,EAAK,CAAC,CAAC,EAAEsM,CAAQ,GAEhCtoF,GAAOoI,GAAOpI,GAAOqI,GAAO,MAAMrI,CAAG,KACvC4oF,EAAWxiF,GAAQ,EAAIkiF,EACzB,KAGF,SAAS3pF,EAAI,EAAGA,EAAIqqF,EAAerqF,IAAK,CAGtC,QAFIoqF,EAAO,GACPT,EAAW1B,EAAS,YAAYjoF,CAAC,EAC5B4b,EAAI,EAAGA,EAAI2jE,EAAS3jE,IAAK,CAC5B,IAAA6uE,EAAOpN,EAAKzhE,CAAC,EACbva,EAAMipF,EAASG,CAAI,EAAEd,CAAQ,GAE7BtoF,EAAMk8B,EAAMktD,CAAI,EAAE,CAAC,GAAKppF,EAAMk8B,EAAMktD,CAAI,EAAE,CAAC,KACtCL,EAAA,GACT,CAEEA,IACFH,EAAWxiF,GAAQ,EAAIwgF,EAAS,YAAYjoF,CAAC,EAC/C,CAKN,OAAIyH,EAAS4iF,IACXpC,EAAS,SAAWgC,GAEtBhC,EAAS,OAASxgF,EAElBwgF,EAAS,QAAU,CAAC,EACpBA,EAAS,iBAAiB,EACnBA,CACT,EAcAC,EAAU,UAAU,IAAM,SAAU7K,EAAM14E,EAAI,CAExC,IAAA5B,EAAS,KAAK,MAAMs6E,CAAI,EACvB,YAAA,YAAYt6E,EAAQs6E,EAAM14E,CAAE,EAC1B5B,CACT,EAIAmlF,EAAU,UAAU,OAAS,SAAU7K,EAAM14E,EAAI,CAC1C,KAAA,YAAY,KAAM04E,EAAM14E,CAAE,CACjC,EACAujF,EAAU,UAAU,YAAc,SAAUnlF,EAAQs6E,EAAM14E,EAAI,CAO5D,QANI+lF,EAAe3nF,EAAO,QACtB4nF,EAAc,CAAC,EACfpL,EAAUlC,EAAK,OACfuN,EAAY7nF,EAAO,MAAM,EACzB6lF,EAAS,CAAC,EACVI,EAAYjmF,EAAO,WACd/C,EAAI,EAAGA,EAAIq9E,EAAK,OAAQr9E,IAC/BgpF,EAAU3L,EAAKr9E,CAAC,CAAC,EAAIwnF,GAAiB,EAExC,QAASjiC,EAAY,EAAGA,EAAYqlC,EAAWrlC,IAAa,CAE1D,QADIokC,EAAW5mF,EAAO,YAAYwiD,CAAS,EAClC3pC,EAAI,EAAGA,EAAI2jE,EAAS3jE,IAC3BgtE,EAAOhtE,CAAC,EAAI8uE,EAAarN,EAAKzhE,CAAC,CAAC,EAAE+tE,CAAQ,EAE5Cf,EAAOrJ,CAAO,EAAIh6B,EAClB,IAAIslC,EAAWlmF,GAAMA,EAAG,MAAM,KAAMikF,CAAM,EAC1C,GAAIiC,GAAY,KAAM,CAEhB,OAAOA,GAAa,WACtBF,EAAY,CAAC,EAAIE,EACNA,EAAAF,GAEb,QAAS3qF,EAAI,EAAGA,EAAI6qF,EAAS,OAAQ7qF,IAAK,CACpC,IAAAq6C,EAAMgjC,EAAKr9E,CAAC,EACZqB,EAAMwpF,EAAS7qF,CAAC,EAChB8qF,EAAiB9B,EAAU3uC,CAAG,EAC9BgvC,EAAWqB,EAAarwC,CAAG,EAC3BgvC,IACFA,EAASM,CAAQ,EAAItoF,GAEnBA,EAAMypF,EAAe,CAAC,IACxBA,EAAe,CAAC,EAAIzpF,GAElBA,EAAMypF,EAAe,CAAC,IACxBA,EAAe,CAAC,EAAIzpF,EACtB,CACF,CACF,CAEJ,EAMA6mF,EAAU,UAAU,eAAiB,SAAU6C,EAAgBC,EAAM,CACnE,IAAIjoF,EAAS,KAAK,MAAM,CAACgoF,CAAc,EAAG,EAAI,EAC1CE,EAAgBloF,EAAO,QACvBsmF,EAAW4B,EAAcF,CAAc,EACvCroF,EAAM,KAAK,MAAM,EACjBwoF,EAAe,EACfC,EAAY,KAAK,MAAM,EAAIH,CAAI,EAC/BI,EAAkB,KAAK,YAAY,CAAC,EACpCC,EACAC,EACAC,EACAtB,EAAa,IAAK3C,GAAe,KAAK,SAAS,GAAG,KAAK,KAAK,KAAK,KAAK5kF,EAAMyoF,CAAS,EAAI,GAAK,EAAGzoF,CAAG,CAAC,EAEzGunF,EAAWiB,GAAc,EAAIE,EAC7B,QAASprF,EAAI,EAAGA,EAAI0C,EAAM,EAAG1C,GAAKmrF,EAAW,CAK3C,QAJIK,EAAiB,KAAK,IAAIxrF,EAAImrF,EAAWzoF,EAAM,CAAC,EAChD+oF,EAAe,KAAK,IAAIzrF,EAAImrF,EAAY,EAAGzoF,CAAG,EAC9CgpF,GAAQD,EAAeD,GAAkB,EACzCG,EAAO,EACFztE,EAAMstE,EAAgBttE,EAAMutE,EAAcvtE,IAAO,CACpD,IAAAyrE,EAAW,KAAK,YAAYzrE,CAAG,EAC/B3V,EAAI8gF,EAASM,CAAQ,EACrB,MAAMphF,CAAC,IAGHojF,GAAApjF,EAAA,CAEVojF,GAAQF,EAAeD,EACvB,IAAII,EAAa5rF,EACb6rF,EAAW,KAAK,IAAI7rF,EAAImrF,EAAWzoF,CAAG,EACtCopF,EAAU9rF,EAAI,EACd+rF,EAAU1C,EAAS+B,CAAe,EAC5BC,EAAA,GACKE,EAAAK,EAKf,QAJII,EAAgB,GAChBC,EAAW,EAGN/tE,EAAM0tE,EAAY1tE,EAAM2tE,EAAU3tE,IAAO,CAC5C,IAAAyrE,EAAW,KAAK,YAAYzrE,CAAG,EAC/B3V,EAAI8gF,EAASM,CAAQ,EACrB,GAAA,MAAMphF,CAAC,EAAG,CACZ0jF,IACID,EAAgB,IACFA,EAAArC,GAElB,QAAA,CAGK2B,EAAA,KAAK,KAAKQ,EAAUJ,IAASnjF,EAAIwjF,IAAYD,EAAU5tE,IAAQytE,EAAOI,EAAQ,EACjFT,EAAOD,IACCA,EAAAC,EACKC,EAAA5B,EACjB,CAEEsC,EAAW,GAAKA,EAAWJ,EAAWD,IAGxC3B,EAAWiB,GAAc,EAAI,KAAK,IAAIc,EAAeT,CAAY,EAClDA,EAAA,KAAK,IAAIS,EAAeT,CAAY,GAErDtB,EAAWiB,GAAc,EAAIK,EACXH,EAAAG,CAAA,CAGpB,OAAAtB,EAAWiB,GAAc,EAAI,KAAK,YAAYxoF,EAAM,CAAC,EACrDK,EAAO,OAASmoF,EAChBnoF,EAAO,SAAWknF,EAClBlnF,EAAO,YAAc,KAAK,WACnBA,CACT,EAMAmlF,EAAU,UAAU,iBAAmB,SAAU6C,EAAgBC,EAAM,CASrE,QARIjoF,EAAS,KAAK,MAAM,CAACgoF,CAAc,EAAG,EAAI,EAC1CE,EAAgBloF,EAAO,QACvBooF,EAAY,KAAK,MAAM,EAAIH,CAAI,EAC/B3B,EAAW4B,EAAcF,CAAc,EACvCroF,EAAM,KAAK,MAAM,EAEjBunF,EAAa,IAAK3C,GAAe,KAAK,SAAS,GAAG,KAAK,KAAK5kF,EAAMyoF,CAAS,EAAI,CAAC,EAChF1jF,EAAS,EACJzH,EAAI,EAAGA,EAAI0C,EAAK1C,GAAKmrF,EAAW,CACvC,IAAIe,EAAWlsF,EACXmsF,EAAW9C,EAAS,KAAK,YAAY6C,CAAQ,CAAC,EAC9CE,EAAWpsF,EACX6zB,EAAWw1D,EAAS,KAAK,YAAY+C,CAAQ,CAAC,EAC9CC,EAAgBlB,EAEhBnrF,EAAImrF,EAAYzoF,IAClB2pF,EAAgB3pF,EAAM1C,GAGxB,QAAS4b,EAAI,EAAGA,EAAIywE,EAAezwE,IAAK,CACtC,IAAI+tE,EAAW,KAAK,YAAY3pF,EAAI4b,CAAC,EACjC/X,EAAQwlF,EAASM,CAAQ,EACzB9lF,EAAQsoF,IACCA,EAAAtoF,EACXqoF,EAAWlsF,EAAI4b,GAEb/X,EAAQgwB,IACCA,EAAAhwB,EACXuoF,EAAWpsF,EAAI4b,EACjB,CAEE,IAAA0wE,EAAc,KAAK,YAAYJ,CAAQ,EACvCK,EAAc,KAAK,YAAYH,CAAQ,EAEvCF,EAAWE,GACbnC,EAAWxiF,GAAQ,EAAI6kF,EACvBrC,EAAWxiF,GAAQ,EAAI8kF,IAEvBtC,EAAWxiF,GAAQ,EAAI8kF,EACvBtC,EAAWxiF,GAAQ,EAAI6kF,EACzB,CAEF,OAAAvpF,EAAO,OAAS0E,EAChB1E,EAAO,SAAWknF,EAClBlnF,EAAO,iBAAiB,EACjBA,CACT,EAKAmlF,EAAU,UAAU,WAAa,SAAUsE,EAAWxB,EAAMyB,EAAaC,EAAa,CAUpF,QATI3pF,EAAS,KAAK,MAAM,CAACypF,CAAS,EAAG,EAAI,EACrCvB,EAAgBloF,EAAO,QACvB4pF,EAAc,CAAC,EACfxB,EAAY,KAAK,MAAM,EAAIH,CAAI,EAC/B3B,EAAW4B,EAAcuB,CAAS,EAClC9pF,EAAM,KAAK,MAAM,EACjBooF,EAAiB/nF,EAAO,WAAWypF,CAAS,EAAIhF,GAAiB,EACjEyC,EAAa,IAAK3C,GAAe,KAAK,SAAS,GAAG,KAAK,KAAK5kF,EAAMyoF,CAAS,CAAC,EAC5E1jF,EAAS,EACJzH,EAAI,EAAGA,EAAI0C,EAAK1C,GAAKmrF,EAAW,CAEnCA,EAAYzoF,EAAM1C,IACpBmrF,EAAYzoF,EAAM1C,EAClB2sF,EAAY,OAASxB,GAEvB,QAASvvE,EAAI,EAAGA,EAAIuvE,EAAWvvE,IAAK,CAClC,IAAIikC,EAAU,KAAK,YAAY7/C,EAAI4b,CAAC,EACxB+wE,EAAA/wE,CAAC,EAAIytE,EAASxpC,CAAO,CAAA,CAE/B,IAAAh8C,EAAQ4oF,EAAYE,CAAW,EAC/BC,EAAiB,KAAK,YAAY,KAAK,IAAI5sF,EAAI0sF,EAAYC,EAAa9oF,CAAK,GAAK,EAAGnB,EAAM,CAAC,CAAC,EAEjG2mF,EAASuD,CAAc,EAAI/oF,EACvBA,EAAQinF,EAAe,CAAC,IAC1BA,EAAe,CAAC,EAAIjnF,GAElBA,EAAQinF,EAAe,CAAC,IAC1BA,EAAe,CAAC,EAAIjnF,GAEtBomF,EAAWxiF,GAAQ,EAAImlF,CAAA,CAEzB,OAAA7pF,EAAO,OAAS0E,EAChB1E,EAAO,SAAWknF,EAClBlnF,EAAO,iBAAiB,EACjBA,CACT,EASAmlF,EAAU,UAAU,KAAO,SAAU7K,EAAM14E,EAAI,CACzC,GAAC,KAAK,OAKD,QAFL46E,EAAUlC,EAAK,OACfyL,EAAS,KAAK,QACT9oF,EAAI,EAAG0C,EAAM,KAAK,QAAS1C,EAAI0C,EAAK1C,IAAK,CAC5C,IAAAupF,EAAS,KAAK,YAAYvpF,CAAC,EAE/B,OAAQu/E,EAAS,CACf,IAAK,GACH56E,EAAG3E,CAAC,EACJ,MACF,IAAK,GACH2E,EAAGmkF,EAAOzL,EAAK,CAAC,CAAC,EAAEkM,CAAM,EAAGvpF,CAAC,EAC7B,MACF,IAAK,GACH2E,EAAGmkF,EAAOzL,EAAK,CAAC,CAAC,EAAEkM,CAAM,EAAGT,EAAOzL,EAAK,CAAC,CAAC,EAAEkM,CAAM,EAAGvpF,CAAC,EACtD,MACF,QAGS,QAFH4b,EAAI,EACJ/X,EAAQ,CAAC,EACN+X,EAAI2jE,EAAS3jE,IAClB/X,EAAM+X,CAAC,EAAIktE,EAAOzL,EAAKzhE,CAAC,CAAC,EAAE2tE,CAAM,EAGnC1lF,EAAM+X,CAAC,EAAI5b,EACR2E,EAAA,MAAM,KAAMd,CAAK,CAAA,CACxB,CAEJ,EAIAqkF,EAAU,UAAU,cAAgB,SAAU7tC,EAAK,CAE7C,IAAAmvC,EAAU,KAAK,QAAQnvC,CAAG,EAC1BwyC,EAAgBrF,GAAiB,EACrC,GAAI,CAACgC,EACI,OAAAqD,EAGL,IAAAC,EAAU,KAAK,MAAM,EAIrBC,EAAS,CAAC,KAAK,SACf7M,EACJ,GAAI6M,EACF,OAAO,KAAK,WAAW1yC,CAAG,EAAE,MAAM,EAGpC,GADY6lC,EAAA,KAAK,QAAQ7lC,CAAG,EACxB6lC,EACF,OAAOA,EAAU,MAAM,EAEbA,EAAA2M,EAGZ,QAFIpjF,EAAMy2E,EAAU,CAAC,EACjBx2E,EAAMw2E,EAAU,CAAC,EACZlgF,EAAI,EAAGA,EAAI8sF,EAAS9sF,IAAK,CAC5B,IAAAupF,EAAS,KAAK,YAAYvpF,CAAC,EAC3B6D,EAAQ2lF,EAAQD,CAAM,EAC1B1lF,EAAQ4F,IAAQA,EAAM5F,GACtBA,EAAQ6F,IAAQA,EAAM7F,EAAA,CAEZ,OAAAq8E,EAAA,CAACz2E,EAAKC,CAAG,EAChB,KAAA,QAAQ2wC,CAAG,EAAI6lC,EACbA,CACT,EAIAgI,EAAU,UAAU,eAAiB,SAAUhqE,EAAK,CAC9C,IAAAqrE,EAAS,KAAK,YAAYrrE,CAAG,EAC7B,GAAC,KAAK,UAAU,WAQX,OAAA,KAAK,UAAU,QAAQqrE,CAAM,EALpC,QAFIloF,EAAM,CAAC,EACPynF,EAAS,KAAK,QACT9oF,EAAI,EAAGA,EAAI8oF,EAAO,OAAQ9oF,IACjCqB,EAAI,KAAKynF,EAAO9oF,CAAC,EAAEupF,CAAM,CAAC,EAErB,OAAAloF,CAIX,EAMA6mF,EAAU,UAAU,MAAQ,SAAU8E,EAAYC,EAAe,CAC3D,IAAAlqF,EAAS,IAAImlF,EACbY,EAAS,KAAK,QACdoE,EAAgBF,GAAc7rF,GAAO6rF,EAAY,SAAU5rF,EAAKwmF,EAAQ,CAC1E,OAAAxmF,EAAIwmF,CAAM,EAAI,GACPxmF,CACT,EAAG,EAAE,EACL,GAAI8rF,EACF,QAASltF,EAAI,EAAGA,EAAI8oF,EAAO,OAAQ9oF,IAEjC+C,EAAO,QAAQ/C,CAAC,EAAKktF,EAAcltF,CAAC,EAAgBynF,GAAWqB,EAAO9oF,CAAC,CAAC,EAAhC8oF,EAAO9oF,CAAC,OAGlD+C,EAAO,QAAU+lF,EAEnB,YAAK,iBAAiB/lF,CAAM,EACvBkqF,IACIlqF,EAAA,SAAW,KAAK,cAAc,GAEvCA,EAAO,iBAAiB,EACjBA,CACT,EACAmlF,EAAU,UAAU,iBAAmB,SAAUnlF,EAAQ,CACvDA,EAAO,OAAS,KAAK,OACrBA,EAAO,UAAY,KAAK,UACxBA,EAAO,UAAY,KAAK,UACxBA,EAAO,YAAc,KAAK,YACnBA,EAAA,QAAUV,EAAM,KAAK,OAAO,EAC5BU,EAAA,WAAaV,EAAM,KAAK,UAAU,CAC3C,EACA6lF,EAAU,UAAU,cAAgB,UAAY,CAC9C,GAAI,KAAK,SAAU,CACb,IAAAvlF,EAAO,KAAK,SAAS,YACrB60E,EAAU,OACd,GAAI70E,IAAS,MAAO,CACd,IAAAunF,EAAY,KAAK,SAAS,OACpB1S,EAAA,IAAI70E,EAAKunF,CAAS,EAC5B,QAASlqF,EAAI,EAAGA,EAAIkqF,EAAWlqF,IAC7Bw3E,EAAQx3E,CAAC,EAAI,KAAK,SAASA,CAAC,CAC9B,MAEUw3E,EAAA,IAAI70E,EAAK,KAAK,QAAQ,EAE3B,OAAA60E,CAAA,CAEF,OAAA,IACT,EACA0Q,EAAU,UAAU,mBAAqB,SAAUhqE,EAAK,CAC/C,OAAAA,CACT,EACAgqE,EAAU,UAAU,WAAa,SAAUhqE,EAAK,CAC9C,OAAIA,EAAM,KAAK,QAAUA,GAAO,EACvB,KAAK,SAASA,CAAG,EAEnB,EACT,EACAgqE,EAAU,UAAU,iBAAmB,UAAY,CACjD,KAAK,YAAc,KAAK,SAAW,KAAK,WAAa,KAAK,kBAC5D,EACAA,EAAU,cAAgB,UAAY,CACpC,SAASiF,EAAkBlsD,EAAU6/C,EAAUv7B,EAAW0pB,EAAU,CAClE,OAAOuU,GAAeviD,EAASguC,CAAQ,EAAG,KAAK,YAAYA,CAAQ,CAAC,CAAA,CAE7CoY,GAAA,CACvB,UAAW8F,EACX,WAAY,SAAUlsD,EAAU6/C,EAAUv7B,EAAW0pB,EAAU,CAC7D,OAAOuU,GAAeviD,EAAS6/C,CAAQ,EAAG,KAAK,YAAY7R,CAAQ,CAAC,CACtE,EACA,aAAcke,EACd,SAAU,SAAUlsD,EAAU6/C,EAAUv7B,EAAW0pB,EAAU,CAK3D,IAAIprE,EAAQo9B,IAAaA,EAAS,OAAS,KAAOA,EAAWA,EAAS,OAC/D,OAAAuiD,GAAe3/E,aAAiB,MAAQA,EAAMorE,CAAQ,EAE3DprE,EAAO,KAAK,YAAYorE,CAAQ,CAAC,CACrC,EACA,WAAY,SAAUhuC,EAAU6/C,EAAUv7B,EAAW0pB,EAAU,CAC7D,OAAOhuC,EAASguC,CAAQ,CAAA,CAE5B,CAAA,EACA,EACKiZ,CACP,EAAA,ECh5BEkF,GAA6B,UAAY,CAC3C,SAASA,EAAcC,EAAY,CAEjC,KAAK,YAAc,CAAC,EACpB,KAAK,WAAa,CAAC,EAEnB,KAAK,kBAAoB,CAAC,EAC1B,KAAK,iBAAmB,EACxB,KAAK,OAAS,GACd,KAAK,YAAcA,CAAA,CAKrBD,OAAAA,EAAc,UAAU,MAAQ,UAAY,CAC1C,KAAK,gBAAgB,CAAI,EAAA,EAAE,EAC3B,KAAK,WAAa,CAAC,EACnB,KAAK,OAAS,EAChB,EACAA,EAAc,UAAU,gBAAkB,SAAUpH,EAAYsH,EAAkB,CAChF,KAAK,YAActH,EACnB,KAAK,kBAAoBsH,EACpB,KAAA,mBACD,KAAK,iBAAmB,OAC1B,KAAK,iBAAmB,EAE5B,EAKAF,EAAc,UAAU,gBAAkB,UAAY,CACpD,OAAO,KAAK,YAAY,IAAM,IAAM,KAAK,gBAC3C,EAIAA,EAAc,UAAU,cAAgB,UAAY,CAG9C,KAAK,aACP,KAAK,cAAc,EACnB,KAAK,OAAS,GAElB,EACAA,EAAc,UAAU,cAAgB,UAAY,CAClD,KAAK,gBAAgB,CAAI,EAAA,EAAE,EAC3B,IAAIC,EAAa,KAAK,YAClBE,EAAkB,KAAK,2BAA2B,EAClDC,EAAc,CAAC,CAACD,EAAgB,OAChCE,EACAH,EACA,GAAAppC,GAASmpC,CAAU,EAAG,CACxB,IAAIvoC,EAAcuoC,EACd7oF,EAAO,OACP2qE,EAAe,OACfuX,EAAW,OAEf,GAAI8G,EAAa,CACX,IAAAE,EAAcH,EAAgB,CAAC,EACnCG,EAAY,cAAc,EAC1BhH,EAAWgH,EAAY,UAAU,EACjClpF,EAAOkiF,EAAS,KAChBvX,EAAeuX,EAAS,aACL4G,EAAA,CAACI,EAAY,iBAAiB,CAAA,MAI1ClpF,EAAAsgD,EAAY,IAAI,OAAQ,EAAI,EACpBqqB,EAAA1pE,GAAajB,CAAI,EAAI2oE,GAA4BJ,GAChEugB,EAAmB,CAAC,EAGtB,IAAIK,EAAmB,KAAK,wBAAwB,GAAK,CAAC,EACtDC,EAAkBlH,GAAYA,EAAS,eAAiB,CAAC,EACzDtX,EAAiBtpE,EAAU6nF,EAAiB,eAAgBC,EAAgB,cAAc,GAAK,KAC/FrP,EAAez4E,EAAU6nF,EAAiB,aAAcC,EAAgB,YAAY,EAIpF/I,EAAa/+E,EAAU6nF,EAAiB,WAAYC,EAAgB,UAAU,EAG9EC,EAAoBze,IAAmBwe,EAAgB,gBAAkB,CAAC,CAACrP,GAAiB,CAAC,CAACqP,EAAgB,cAAgB/I,EAC/G4I,EAAAI,EAAoB,CAAC9P,GAAav5E,EAAM,CACzD,eAAA4qE,EACA,aAAAmP,EACA,WAAAsG,CAAA,EACC1V,CAAY,CAAC,EAAI,CAAC,CAAA,KAChB,CACL,IAAIvB,EAAeyf,EAEnB,GAAIG,EAAa,CACX,IAAAjrF,EAAS,KAAK,gBAAgBgrF,CAAe,EACjDE,EAAmBlrF,EAAO,WAC1B+qF,EAAmB/qF,EAAO,gBAAA,KAGvB,CACH,IAAIy7E,EAAapQ,EAAa,IAAI,SAAU,EAAI,EAChD6f,EAAmB,CAAC1P,GAAaC,EAAY,KAAK,wBAAwB,EAAG,IAAI,CAAC,EAClFsP,EAAmB,CAAC,CAAA,CACtB,CAKG,KAAA,gBAAgBG,EAAkBH,CAAgB,CACzD,EACAF,EAAc,UAAU,gBAAkB,SAAUU,EAAW,CAC7D,IAAIlgB,EAAe,KAAK,YACpBmgB,EAAkBngB,EAAa,IAAI,YAAa,EAAI,EACpDogB,EAAsBpgB,EAAa,IAAI,sBAAuB,EAAI,EAItE,GAAIogB,GAAuB,KAAM,CAC/B,IAAI1tB,EAAS,GACTwtB,EAAU,SAAW,GAIvBG,GAAQ3tB,CAAM,CAChB,CAEE,IAAA0lB,EACAM,EAAe,CAAC,EAChBgH,EAAmB,CAAC,EACnB7oF,OAAAA,EAAAqpF,EAAW,SAAUI,EAAO,CAC/BA,EAAM,cAAc,EACpB,IAAIxH,EAAWwH,EAAM,UAAUF,GAAuB,CAAC,EACnD1tB,EAAS,GACT0tB,GAAuB,MAAQ,CAACtH,GAIlCuH,GAAQ3tB,CAAM,EAEhBgmB,EAAa,KAAKI,CAAQ,EACT4G,EAAA,KAAKY,EAAM,iBAAiB,CAAA,CAC9C,EACGH,EACW/H,EAAAF,GAAmBiI,EAAiBzH,EAAc,CAC7D,aAAc1Y,EAAa,cAAA,CAC5B,EACQogB,GAAuB,OAChChI,EAAa,CAAC1H,GAAmBgI,EAAa,CAAC,CAAC,CAAC,GAE5C,CACL,WAAAN,EACA,iBAAAsH,CACF,CACF,EACAF,EAAc,UAAU,SAAW,UAAY,CAC7C,GAAI,KAAK,OACA,MAAA,GAIT,QADIG,EAAkB,KAAK,2BAA2B,EAC7CvtF,EAAI,EAAGA,EAAIutF,EAAgB,OAAQvtF,IAAK,CAC3C,IAAAmuF,EAAWZ,EAAgBvtF,CAAC,EAChC,GAGAmuF,EAAS,YAAc,KAAK,kBAAkBnuF,CAAC,IAAMmuF,EAAS,gBAAgB,EACrE,MAAA,EACT,CAEJ,EAKAf,EAAc,UAAU,UAAY,SAAUgB,EAAa,CACzDA,EAAcA,GAAe,EACzB,IAAA9rF,EAAS,KAAK,YAAY8rF,CAAW,EACzC,GAAI,CAAC9rF,EAAQ,CAEP,IAAAirF,EAAkB,KAAK,2BAA2B,EACtD,OAAOA,EAAgB,CAAC,GAAKA,EAAgB,CAAC,EAAE,UAAUa,CAAW,CAAA,CAEhE,OAAA9rF,CACT,EASA8qF,EAAc,UAAU,mBAAqB,SAAUiB,EAAkB,CAInE,IAAAC,EAASD,EAAiB,gBAAgB,EAC9C,OAAO,KAAK,mBAAmBC,EAAO,WAAYD,EAAiB,OAAQC,EAAO,IAAI,CACxF,EACAlB,EAAc,UAAU,mBAAqB,SAAUmB,EAAWC,EAAcC,EAAe,CAE7F,IAAIL,EAAc,EACdM,EAAY,KAAK,WACjBC,EAAiBD,EAAUN,CAAW,EACrCO,IACcA,EAAAD,EAAUN,CAAW,EAAI,CAAC,GAEzC,IAAAQ,EAAcD,EAAeF,CAAa,EAC9C,GAAI,CAACG,EAAa,CAChB,IAAIlB,EAAc,KAAK,2BAA2B,EAAE,CAAC,EACjDxpC,GAAS,KAAK,WAAW,GAAKwpC,EAChCkB,EAAclB,EAAY,mBAAmBa,EAAWC,EAAcC,CAAa,GAEnFG,EAAc,IAAI1G,GAElB0G,EAAY,SAAS,IAAIvP,GAAoBmP,EAAcD,EAAU,MAAM,EAAGA,CAAS,GAEzFI,EAAeF,CAAa,EAAIG,CAAA,CAE3B,OAAAA,CACT,EAKAxB,EAAc,UAAU,2BAA6B,UAAY,CAI/D,IAAIC,EAAa,KAAK,YAClB,GAAAnpC,GAASmpC,CAAU,EAAG,CACpB,IAAAzf,EAAeC,GAAgCwf,CAAU,EAC7D,OAAQzf,EAAoB,CAACA,EAAa,kBAAkB,EAArC,CAAA,CAAqC,KAE5D,QAAO7tE,EAAIgvE,GAAkCse,CAAU,EAAG,SAAUzf,EAAc,CAChF,OAAOA,EAAa,iBAAiB,CAAA,CACtC,CAEL,EACAwf,EAAc,UAAU,wBAA0B,UAAY,CAC5D,IAAIC,EAAa,KAAK,YAClBje,EACAmP,EACAsG,EACA,GAAA3gC,GAASmpC,CAAU,EACJje,EAAAie,EAAW,IAAI,iBAAkB,EAAI,EACvC9O,EAAA8O,EAAW,IAAI,eAAgB,EAAI,EACrCxI,EAAAwI,EAAW,IAAI,aAAc,EAAI,UAGvC,CAAC,KAAK,2BAAA,EAA6B,OAAQ,CAClD,IAAI9jD,EAAQ8jD,EACKje,EAAA7lC,EAAM,IAAI,iBAAkB,EAAI,EAClCg1C,EAAAh1C,EAAM,IAAI,eAAgB,EAAI,EAChCs7C,EAAAt7C,EAAM,IAAI,aAAc,EAAI,CAAA,CAEpC,MAAA,CACL,eAAA6lC,EACA,aAAAmP,EACA,WAAAsG,CACF,CACF,EACOuI,CACP,EAAA,EAQF,SAASlpC,GAASmpC,EAAY,CAE5B,OAAOA,EAAW,WAAa,QACjC,CACA,SAASY,GAAQ3tB,EAAQ,CACjB,MAAA,IAAI,MAAMA,CAAM,CACxB,CCjXA,IAAIuuB,GAA0B,gBAC9B,SAASC,GAAqB9yB,EAAW,CACvC,IAAIlwB,EAAakwB,EAAU,WAC3B,OAAIlwB,GAAc,KACT+iD,GAEA,eAAiBjgF,GAAWk9B,EAAa,EAAE,EAAI,IAE1D,CAEA,SAASijD,GAAoB/yB,EAAWgM,EAAY,CAC9C,IAAAgnB,EAAgBhzB,EAAU,OAAS,UACnCizB,EAAejzB,EAAU,UAAY,GACrCkzB,EAAiBlzB,EAAU,YAAc,MACzCmzB,EAAiBnzB,EAAU,OAAS,UACpCozB,EAAgBpzB,EAAU,UAAY,GACtCqzB,EAAkBrzB,EAAU,YAAc,MAC9C,OAAIgM,IAAe,OAEV,CAEL,UAAW,aAAep5D,GAAWqgF,EAAe,EAAE,EAAI,YAAcrgF,GAAWogF,CAAa,EAAI,gBAAkBpgF,GAAWsgF,EAAiB,EAAE,EAEpJ,WAAY,aAAetgF,GAAWwgF,EAAgB,EAAE,EAAI,YAAcxgF,GAAWugF,CAAc,EAAI,gBAAkBvgF,GAAWygF,EAAkB,EAAE,CAC1J,EAEO,CACL,UAAW,CACT,SAAUJ,EACV,KAAMD,EACN,WAAYE,CACd,EACA,WAAY,CACV,SAAUE,EACV,KAAMD,EACN,WAAYE,CAAA,CAEhB,CAEJ,CAGA,IAAIC,GAAY,CAAC,EAAG,GAAI,GAAI,EAAE,EAC1BC,GAAiB,CAAC,GAAI;AAAA,EAAM;AAAA;AAAA,EAAQ;AAAA;AAAA;AAAA,CAAQ,EAEhC,SAAAC,GAAoBhqF,EAAMq5D,EAAQ,CAChD,OAAAA,EAAO,KAAOr5D,EACPq5D,CACT,CACA,SAAS4wB,GAAkBC,EAAM,CAC/B,OAAOA,EAAK,OAAS,SACvB,CACA,SAASC,GAAWD,EAAM,CACjB,OAAAD,GAAkBC,CAAI,EAAIE,GAAeC,EAClD,CACA,SAASC,GAAiBJ,EAAM,CAC1B,GAAAD,GAAkBC,CAAI,EAAG,CAC3B,IAAIK,EAAa,EACbC,EAAcN,EAAK,OAAO,OAC1BO,EAAgBD,EAAc,GAAKA,EAAc,GAAK,CAACN,EAAK,SAC3DjrF,OAAAA,EAAAirF,EAAK,OAAQ,SAAUQ,EAAU,CAChC,IAAAC,EAAcL,GAAiBI,CAAQ,EAGvCC,GAAeJ,IACjBA,EAAaI,GAAc,EAAEF,IAE7B,CAACE,GAGEV,GAAkBS,CAAQ,GAAK,CAACA,EAAS,WAC9C,CACD,EACMH,CAAA,CAEF,MAAA,EACT,CACA,SAASH,GAAazkF,EAAKilF,EAAUC,EAAsBC,EAAkB,CAC3E,IAAIC,EAAWH,EAAS,SACpBI,EAAOC,GAAOX,GAAiBM,CAAQ,CAAC,EACxCM,EAAoB,CAAC,EACrBC,EAAYP,EAAS,QAAU,CAAC,EACpChqF,GAAO,CAACuqF,GAAavtF,EAAQutF,CAAS,CAAC,EACvCA,EAAYA,GAAa,CAAC,EAC1B,IAAIC,EAAYzlF,EAAI,UAChB,GAAAilF,EAAS,YAAcQ,EAAW,CACpCD,EAAYA,EAAU,MAAM,EAC5B,IAAIE,EAAW,CACb,SAAU,MACV,UAAW,MACb,EACI,GAAA5oF,GAAO4oF,EAAUD,CAAS,EAAG,CAC/B,IAAIE,EAAe,IAAIrN,GAAoBoN,EAASD,CAAS,EAAG,IAAI,EAC1DD,EAAA,KAAK,SAAUrpF,EAAGC,EAAG,CAC7B,OAAOupF,EAAa,SAASxpF,EAAE,UAAWC,EAAE,SAAS,CAAA,CACtD,CAAA,MAGMqpF,IAAc,cACrBD,EAAU,QAAQ,CACpB,CAEGlsF,EAAAksF,EAAW,SAAUT,EAAUhyE,EAAK,CACvC,IAAI6yE,EAAiBX,EAAS,eAC1BY,EAAgBrB,GAAWO,CAAQ,EAEvCa,EAAiBztF,EAAOA,EAAO,CAAC,EAAG6H,CAAG,EAAG,CACvC,eAAA4lF,CACD,CAAA,EAAI5lF,EAAK+kF,EAAUhyE,EAAM,EAAIsyE,EAAK,KAAO,EAAGF,CAAgB,EAC7DU,GAAiB,MAAQN,EAAkB,KAAKM,CAAa,CAAA,CAC9D,EACD,IAAIA,EAAgB7lF,EAAI,aAAe,WAAaulF,EAAkB,KAAKF,EAAK,QAAQ,EAAIS,GAAcX,EAAkBI,EAAkB,KAAK,EAAE,EAAGH,EAAWF,EAAuBG,EAAK,IAAI,EACnM,GAAID,EACK,OAAAS,EAET,IAAIE,EAAoB7qB,GAAkB+pB,EAAS,OAAQ,UAAWjlF,EAAI,MAAM,EAC5EgmF,EAAYpC,GAAoBuB,EAAkBnlF,EAAI,UAAU,EAAE,UAClEimF,EAAoBtC,GAAqBwB,CAAgB,EACzD,OAAAnlF,EAAI,aAAe,WACdkmF,GAAuBlmF,EAAK+lF,EAAmBC,CAAS,EAAIX,EAAK,SAAWQ,EAE5EC,GAAcX,EAAkB,eAAkBa,EAAY,IAAMC,EAAoB,MAASxiF,GAAWsiF,CAAiB,EAAI,SAAWF,EAAeX,CAAoB,CAE1L,CACA,SAASR,GAAe1kF,EAAKilF,EAAUC,EAAsBC,EAAkB,CAC7E,IAAItoB,EAAa78D,EAAI,WACjBmmF,EAASlB,EAAS,OAClBmB,EAAUnB,EAAS,QACnBoB,EAAW,CAACpB,EAAS,WACrBjgF,EAAOigF,EAAS,KAChB7pB,EAASp7D,EAAI,OACb4lF,EAAiBX,EAAS,gBAAkBjlF,EAAI,gBAAkB,SAAUtH,EAAO,CACrF,OAAAA,EAAQT,EAAQS,CAAK,EAAIA,EAAQ,CAACA,CAAK,EAChC9D,EAAI8D,EAAO,SAAUxC,EAAK6c,EAAK,CAC7B,OAAAmoD,GAAkBhlE,EAAK+B,EAAQquF,CAAe,EAAIA,EAAgBvzE,CAAG,EAAIuzE,EAAiBlrB,CAAM,CAAA,CACxG,CACH,EACA,GAAI,EAAA+qB,GAAUC,GAGV,KAAAG,EAAYF,EAAW,GAAKrmF,EAAI,mBAAmB,kBAAkBilF,EAAS,WAAYA,EAAS,aAAe,OAAQpoB,CAAU,EACpI2pB,EAAeL,EAAS,GAAKjrB,GAAkBl2D,EAAM,UAAWo2D,CAAM,EACtEkrB,EAAkBrB,EAAS,UAC3BwB,EAAoBL,EAAU,GAAKR,EAAeX,EAAS,MAAOA,EAAS,SAAS,EACpFyB,EAAkB,CAACL,GAAY,CAACF,EAEhCQ,EAAqB,CAACN,GAAYF,EAClCzsD,EAAKkqD,GAAoBuB,EAAkBtoB,CAAU,EACvDmpB,EAAYtsD,EAAG,UACfktD,EAAaltD,EAAG,WAClB,OAAOmjC,IAAe,YAAcwpB,EAAW,GAAKE,IAAcJ,EAAS,GAAKD,GAAuBlmF,EAAKwmF,EAAcR,CAAS,IAEhII,EAAU,GAAKS,GAAwB7mF,EAAKymF,EAAmBC,EAAiBC,EAAoBC,CAAU,GAAKd,GAAcX,GAAmBkB,EAAW,GAAKE,IAAcJ,EAAS,GAAKW,GAAmBN,EAAc,CAACH,EAAUL,CAAS,IAAMI,EAAU,GAAKW,GAAoBN,EAAmBC,EAAiBC,EAAoBC,CAAU,GAAI1B,CAAoB,EAC7X,CAIO,SAAS8B,GAAmB/B,EAAUgC,EAAoBpqB,EAAY4oB,EAAWrqB,EAAQ+pB,EAAkB,CAChH,GAAKF,EAGD,KAAAiC,EAAU1C,GAAWS,CAAQ,EAC7BjlF,EAAM,CACR,OAAAo7D,EACA,WAAAyB,EACA,UAAA4oB,EACA,mBAAAwB,EACA,eAAgBhC,EAAS,cAC3B,EACA,OAAOiC,EAAQlnF,EAAKilF,EAAU,EAAGE,CAAgB,EACnD,CACA,SAASG,GAAO6B,EAAU,CACjB,MAAA,CACL,KAAMhD,GAAUgD,CAAQ,EACxB,SAAU/C,GAAe+C,CAAQ,CACnC,CACF,CACA,SAASrB,GAAcj1B,EAAWu2B,EAAgBC,EAAQ,CACxD,IAAIC,EAAW,iCACXC,EAAY,WAAaF,EAAS,SAClCpB,EAAoBtC,GAAqB9yB,CAAS,EACtD,MAAO,eAAkB02B,EAAY,IAAMtB,EAAoB,MAASmB,EAAiBE,EAAW,QACtG,CACA,SAASR,GAAmB9hF,EAAMwiF,EAAerzF,EAAO,CAClD,IAAAszF,EAAYD,EAAgB,kBAAoB,GACpD,MAAO,gBAAmBrzF,EAAQ,IAAMszF,EAAY,KAAQhkF,GAAWuB,CAAI,EAAI,SACjF,CACA,SAAS+hF,GAAoBW,EAAWC,EAAYhB,EAAoBxyF,EAAO,CAEzE,IAAAyzF,EAAajB,EAAqB,OAAS,OAC3CkB,EAAWF,EAAa,2BAA6BC,EAAa,GACtE,OAAAF,EAAYzvF,EAAQyvF,CAAS,EAAIA,EAAY,CAACA,CAAS,EAChD,gBAAmBG,EAAW,IAAM1zF,EAAQ,KAEjDS,EAAI8yF,EAAW,SAAUhvF,EAAO,CAChC,OAAO+K,GAAW/K,CAAK,CAAA,CACxB,EAAE,KAAK,cAAc,EAAI,SAC5B,CACA,SAASwtF,GAAuBlmF,EAAKgF,EAAM7Q,EAAO,CAChD,OAAO6L,EAAI,mBAAmB,kBAAkBgF,EAAM7Q,CAAK,CAC7D,CACA,SAAS0yF,GAAwB7mF,EAAKy9E,EAAQkK,EAAYhB,EAAoBxyF,EAAO,CAC/E,IAAA2zF,EAAS,CAAC3zF,CAAK,EACf4zF,EAAcpB,EAAqB,GAAK,GAC5C,OAAAgB,GAAcG,EAAO,KAAK,CACxB,QAAS,CAAC,EAAG,EAAG,EAAGC,CAAW,EAC9B,MAAO,OAAA,CACR,EAEM/nF,EAAI,mBAAmB,kBAAkB/H,EAAQwlF,CAAM,EAAIA,EAAO,KAAK,IAAI,EAAIA,EAAQqK,CAAM,CACtG,CACgB,SAAAE,GAAoChe,EAAQ5vB,EAAW,CACrE,IAAIjmD,EAAQ61E,EAAO,QAAU,EAAA,cAAc5vB,EAAW,OAAO,EACzDx/B,EAAQzmB,EAAM61E,EAAO,cAAc,EACvC,OAAOjN,GAAqBniD,CAAK,CACnC,CACgB,SAAAqtE,GAA2B7pD,EAAOy+B,EAAY,CACxD,IAAAr8B,EAAUpC,EAAM,IAAI,SAAS,EAC1B,OAAAoC,IAELq8B,IAAe,WAAa,CAAC,EAAG,EAAE,EAAI,GAC1C,CAMA,IAAIqrB,GAAyC,UAAY,CACvD,SAASA,GAA4B,CACnC,KAAK,eAAiB,CAAC,EAIvB,KAAK,iBAAmBjzD,GAAgB,CAAA,CAE1CizD,OAAAA,EAA0B,UAAU,mBAAqB,UAAY,CACnE,MAAO,aAAe,KAAK,kBAC7B,EACAA,EAA0B,UAAU,kBAAoB,SAAUC,EAAYtuE,EAAUgjD,EAAY,CAClG,IAAIC,EAAWD,IAAe,WAAa,KAAK,mBAAuB,EAAA,KACnEj6D,EAAS85D,GAAiB,CAC5B,MAAO7iD,EACP,KAAMsuE,EACN,WAAAtrB,EACA,SAAAC,CAAA,CACD,EACG,OAAA5iE,EAAS0I,CAAM,EACVA,GAKF,KAAA,eAAek6D,CAAQ,EAAIl6D,EAAO,MAChCA,EAAO,QAElB,EAgBAslF,EAA0B,UAAU,kBAAoB,SAAU9yF,EAAM0yF,EAAQ,CAC9E,IAAIM,EAAW,CAAC,EACZnwF,EAAQ6vF,CAAM,EACXxuF,EAAAwuF,EAAQ,SAAUjlF,EAAK,CACnB,OAAA1K,EAAOiwF,EAAUvlF,CAAG,CAAA,CAC5B,EAED1K,EAAOiwF,EAAUN,CAAM,EAErB,IAAAtkD,EAAY,KAAK,mBAAmB,EACnC,YAAA,eAAeA,CAAS,EAAI4kD,EAC1B,IAAM5kD,EAAY,IAAMpuC,EAAO,GACxC,EACO8yF,CACP,EAAA,EC7RK,SAASG,GAA2BpjF,EAAK,CAC9C,IAAI+kE,EAAS/kE,EAAI,OACbm1C,EAAYn1C,EAAI,UAChBwxE,EAAiBxxE,EAAI,eACrB5L,EAAO2wE,EAAO,QAAS,EACvBse,EAAcjvF,EAAK,iBAAiB,kBAAkB,EACtDkvF,EAAgBD,EAAY,OAC5B5vF,EAAQsxE,EAAO,YAAY5vB,CAAS,EACpCouC,EAAavwF,EAAQS,CAAK,EAC1B+vF,EAAcT,GAAoChe,EAAQ5vB,CAAS,EAEnEsuC,EACAC,EACAnD,EACAoD,EACJ,GAAIL,EAAgB,GAAKC,GAAc,CAACD,EAAe,CACrD,IAAIM,EAAkBC,GAAwBpwF,EAAOsxE,EAAQ5vB,EAAWkuC,EAAaG,CAAW,EAChGC,EAAcG,EAAgB,aAC9BF,EAAkBE,EAAgB,iBAClCrD,EAAYqD,EAAgB,OAE5BD,EAAYC,EAAgB,aAAa,CAAC,CAC3C,SAAUN,EAAe,CACxB,IAAInP,EAAU//E,EAAK,iBAAiBivF,EAAY,CAAC,CAAC,EAClDM,EAAYF,EAAc5S,GAAiBz8E,EAAM+gD,EAAWkuC,EAAY,CAAC,CAAC,EAC1EK,EAAkBvP,EAAQ,IAC9B,MACIwP,EAAYF,EAAcF,EAAa9vF,EAAM,CAAC,EAAIA,EAGpD,IAAIqwF,EAAsB1wD,GAAgB2xC,CAAM,EAC5Cgf,EAAaD,GAAuB/e,EAAO,MAAQ,GACnD9b,EAAW70D,EAAK,QAAQ+gD,CAAS,EACjC6uC,EAAaxS,EAAiBuS,EAAa96B,EAC/C,OAAOm2B,GAAoB,UAAW,CACpC,OAAQ2E,EAGR,SAAUvS,GAAkB,CAACsS,EAC7B,UAAWH,EACX,OAAQ,CAACvE,GAAoB,YAAa,CACxC,WAAY,OACZ,YAAaoE,EAGb,KAAMQ,EAGN,OAAQ,CAAC7tF,GAAK6tF,CAAU,EACxB,MAAOP,EACP,UAAWC,EACX,UAAWvuC,CACjB,CAAK,CAAC,EAAE,OAAOorC,GAAa,CAAE,CAAA,CAC9B,CAAG,CACH,CACA,SAASsD,GAAwBpwF,EAAOsxE,EAAQ5vB,EAAWkuC,EAAazuE,EAAU,CAEhF,IAAIxgB,EAAO2wE,EAAO,QAAS,EACvBkf,EAAsBlzF,GAAO0C,EAAO,SAAUwwF,EAAqBhzF,EAAK6c,EAAK,CAC/E,IAAIo2E,EAAU9vF,EAAK,iBAAiB0Z,CAAG,EACvC,OAAOm2E,EAAsBA,GAAuBC,GAAWA,EAAQ,UAAY,IAASA,EAAQ,aAAe,IACpH,EAAE,EAAK,EACJC,EAAe,CAAE,EACjBC,EAAmB,CAAE,EACrBC,EAAS,CAAE,EACfhB,EAAY,OAAShvF,EAAKgvF,EAAa,SAAUp5C,EAAK,CACpDq6C,EAAYzT,GAAiBz8E,EAAM+gD,EAAWlL,CAAG,EAAGA,CAAG,CACxD,CAAA,EAEC51C,EAAKZ,EAAO6wF,CAAW,EACzB,SAASA,EAAYrzF,EAAKg5C,EAAK,CAC7B,IAAIkqC,EAAU//E,EAAK,iBAAiB61C,CAAG,EAEnC,CAACkqC,GAAWA,EAAQ,UAAU,UAAY,KAG1C8P,EACFI,EAAO,KAAKjF,GAAoB,YAAa,CAC3C,WAAY,UACZ,YAAaxqE,EACb,KAAMu/D,EAAQ,YACd,MAAOljF,EACP,UAAWkjF,EAAQ,IAC3B,CAAO,CAAC,GAEFgQ,EAAa,KAAKlzF,CAAG,EACrBmzF,EAAiB,KAAKjQ,EAAQ,IAAI,GAExC,CACE,MAAO,CACL,aAAcgQ,EACd,iBAAkBC,EAClB,OAAQC,CACT,CACH,CCtFA,IAAIppB,GAAQspB,GAAoB,EAChC,SAASC,GAAgBpwF,EAAM+gD,EAAW,CACxC,OAAO/gD,EAAK,QAAQ+gD,CAAS,GAAK/gD,EAAK,MAAM+gD,CAAS,CACxD,CACO,IAAIsvC,GAAmC,+BAC1CC,GAA2B,SAAUx+E,EAAQ,CAC/CC,EAAUu+E,EAAax+E,CAAM,EAC7B,SAASw+E,GAAc,CAUrB,IAAIt+E,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAIhE,OAAAE,EAAM,wBAA0B,CAAC,EAC1BA,CAAA,CAETs+E,OAAAA,EAAY,UAAU,KAAO,SAAUj2B,EAAQC,EAAan6B,EAAS,CACnE,KAAK,YAAc,KAAK,eACxB,KAAK,SAAWq9C,GAAW,CACzB,MAAO+S,GACP,MAAOC,EAAA,CACR,EACD,KAAK,SAAS,QAAU,CACtB,MAAO,IACT,EACK,KAAA,qBAAqBn2B,EAAQl6B,CAAO,EACzC,IAAIswD,EAAgB5pB,GAAM,IAAI,EAAE,cAAgB,IAAI+hB,GAAc,IAAI,EACtE6H,EAAc,cAAc,EAC5B,IAAIzwF,EAAO,KAAK,eAAeq6D,EAAQl6B,CAAO,EAC9CuwD,GAAS1wF,EAAM,IAAI,EACd,KAAA,SAAS,QAAQ,KAAOA,EAIvB6mE,GAAA,IAAI,EAAE,oBAAsB7mE,EAWlC2wF,GAAe,IAAI,EACnB,KAAK,yBAAyB3wF,CAAI,CACpC,EAIAswF,EAAY,UAAU,qBAAuB,SAAUj2B,EAAQl6B,EAAS,CAClE,IAAAylC,EAAaF,GAAgB,IAAI,EACjCuB,EAAsBrB,EAAae,GAAgBtM,CAAM,EAAI,CAAC,EAK9Du2B,EAAe,KAAK,QACpB9pB,GAAe,SAAS8pB,CAAY,IACtBA,GAAA,UAEXj0B,EAAMtC,EAAQl6B,EAAQ,WAAW,IAAI,KAAK,OAAO,CAAC,EACzDw8B,EAAatC,EAAQ,KAAK,kBAAkB,EAE5Cw2B,GAA0Bx2B,EAAQ,QAAS,CAAC,MAAM,CAAC,EAC9C,KAAA,kBAAkBA,EAAO,IAAI,EAC9BuL,GACeC,GAAAxL,EAAQ4M,EAAqBrB,CAAU,CAE5D,EACA0qB,EAAY,UAAU,YAAc,SAAUQ,EAAiB3wD,EAAS,CAEtE2wD,EAAkBn0B,EAAa,KAAK,OAAQm0B,EAAiB,EAAI,EAC5D,KAAA,kBAAkBA,EAAgB,IAAI,EACvC,IAAAlrB,EAAaF,GAAgB,IAAI,EACjCE,GACeC,GAAA,KAAK,OAAQirB,EAAiBlrB,CAAU,EAEvD,IAAA6qB,EAAgB5pB,GAAM,IAAI,EAAE,cAChC4pB,EAAc,MAAM,EACpBA,EAAc,cAAc,EAC5B,IAAIzwF,EAAO,KAAK,eAAe8wF,EAAiB3wD,CAAO,EACvDuwD,GAAS1wF,EAAM,IAAI,EACnB,KAAK,SAAS,MAAM,EACf,KAAA,SAAS,QAAQ,KAAOA,EACvB6mE,GAAA,IAAI,EAAE,oBAAsB7mE,EAClC2wF,GAAe,IAAI,EACnB,KAAK,yBAAyB3wF,CAAI,CACpC,EACAswF,EAAY,UAAU,kBAAoB,SAAUtwF,EAAM,CAIxD,GAAIA,GAAQ,CAAC61E,GAAoB71E,CAAI,EAEnC,QADIwnB,EAAQ,CAAC,MAAM,EACVhsB,EAAI,EAAGA,EAAIwE,EAAK,OAAQxE,IAC3BwE,EAAKxE,CAAC,GAAKwE,EAAKxE,CAAC,EAAE,OACrBq1F,GAA0B7wF,EAAKxE,CAAC,EAAG,QAASgsB,CAAK,CAIzD,EAKA8oE,EAAY,UAAU,eAAiB,SAAUj2B,EAAQl6B,EAAS,CAElE,EAIAmwD,EAAY,UAAU,WAAa,SAAUrvE,EAAQ,CAI/C,IAAAjhB,EAAO,KAAK,WAAW,EACtBA,EAAA,WAAWihB,EAAO,IAAI,CAC7B,EAOAqvE,EAAY,UAAU,QAAU,SAAUl1C,EAAU,CAC9C,IAAA21C,EAAOC,GAAe,IAAI,EAC9B,GAAID,EAAM,CACJ,IAAA/wF,EAAO+wF,EAAK,QAAQ,KACjB,OAAA31C,GAAY,MAAQ,CAACp7C,EAAK,cAAgBA,EAAOA,EAAK,cAAco7C,CAAQ,CAAA,KAM5E,QAAAyrB,GAAM,IAAI,EAAE,IAEvB,EACAypB,EAAY,UAAU,WAAa,UAAY,CACzC,IAAAW,EAAW,KAAK,QAAQ,EAC5B,OAAOA,GAAYA,EAAS,iBAAmBA,EAAS,mBAAqB,CAAC,CAC5E,KAAMA,CAAA,CACP,CACH,EACAX,EAAY,UAAU,QAAU,SAAUtwF,EAAM,CAC1C,IAAA+wF,EAAOC,GAAe,IAAI,EAC9B,GAAID,EAAM,CACR,IAAI3wF,EAAU2wF,EAAK,QAMnB3wF,EAAQ,WAAaJ,EASjB+wF,IAAS,KAAK,WAChB3wF,EAAQ,KAAOJ,EACjB,CAEI6mE,GAAA,IAAI,EAAE,KAAO7mE,CACrB,EACAswF,EAAY,UAAU,UAAY,UAAY,CAC5C,IAAIrtB,EAAS,KAAK,IAAI,SAAU,EAAI,EACpC,GAAIA,EACK,OAAAiuB,EAAqBjuB,CAAM,CAEtC,EACAqtB,EAAY,UAAU,iBAAmB,UAAY,CAC5C,OAAAzpB,GAAM,IAAI,EAAE,aACrB,EACAypB,EAAY,UAAU,UAAY,UAAY,CACrC,OAAA,KAAK,iBAAiB,EAAE,UAAU,CAC3C,EAIAA,EAAY,UAAU,WAAa,UAAY,CACtC,OAAAzpB,GAAM,IAAI,EAAE,mBACrB,EACAypB,EAAY,UAAU,WAAa,UAAY,CACzC,IAAAa,EAAU,KAAK,IAAI,SAAS,EAChC,OAAOA,GAAW,QACpB,EACAb,EAAY,UAAU,gBAAkB,UAAY,CAC3C,OAAA,KAAK,eAAiB,QAC/B,EAOAA,EAAY,UAAU,YAAc,UAAY,CAC9C,IAAI9vC,EAAW,KAAK,iBAEpB,OAAOA,GAAYA,EAAS,aAAeA,EAAS,YAAY,CAClE,EAeA8vC,EAAY,UAAU,cAAgB,SAAUvvC,EAAWq8B,EAAgBhiC,EAAU,CACnF,OAAO4zC,GAA2B,CAChC,OAAQ,KACR,UAAAjuC,EACA,eAAAq8B,CAAA,CACD,CACH,EACAkT,EAAY,UAAU,mBAAqB,UAAY,CACrD,IAAInwD,EAAU,KAAK,QAGnB,GAAI7lC,EAAI,MAAQ,EAAE6lC,GAAWA,EAAQ,KAC5B,MAAA,GAEL,IAAAgvB,EAAmB,KAAK,WAAW,WAAW,EAClD,OAAIA,GACE,KAAK,UAAU,QAAU,KAAK,WAAW,oBAAoB,IAC5CA,EAAA,IAGhB,CAAC,CAACA,CACX,EACAmhC,EAAY,UAAU,YAAc,UAAY,CAC9C,KAAK,SAAS,MAAM,CACtB,EACAA,EAAY,UAAU,oBAAsB,SAAU3kF,EAAMwe,EAAOwiD,EAAiB,CAClF,IAAIxsC,EAAU,KAAK,QAEf5e,EAAQ4qD,GAAa,UAAU,oBAAoB,KAAK,KAAMxgE,EAAMwe,EAAOwiD,CAAe,EAC9F,OAAKprD,IACHA,EAAQ4e,EAAQ,oBAAoBx0B,EAAMwe,EAAOwiD,CAAe,GAE3DprD,CACT,EAKA+uE,EAAY,UAAU,kBAAoB,SAAUc,EAAU,CAC5D,OAAO,KAAK,aAAa,iBAAiBA,CAAQ,CACpD,EAIAd,EAAY,UAAU,eAAiB,UAAY,CAC1C,OAAA,KAAK,IAAI,aAAa,CAC/B,EAIAA,EAAY,UAAU,wBAA0B,UAAY,CACnD,OAAA,KAAK,IAAI,sBAAsB,CACxC,EAEAA,EAAY,UAAU,OAAS,SAAUe,EAAkBj2C,EAAU,CACnE,KAAK,aAAa,KAAK,QAAQA,CAAQ,EAAGi2C,CAAgB,CAC5D,EACAf,EAAY,UAAU,SAAW,SAAUe,EAAkBj2C,EAAU,CACjE,IAAAk2C,EAAc,KAAK,OAAO,YAC9B,GAAKA,EAGD,KAAAC,EAAe,KAAK,OAAO,aAC3BvxF,EAAO,KAAK,QAAQo7C,CAAQ,EAC5B,GAAAm2C,IAAiB,UAAYD,IAAgB,MAAO,CACjD,KAAA,OAAO,YAAc,CAAC,EAC3B,KAAK,wBAA0B,CAAC,EAChC,MAAA,CAEF,QAAS91F,EAAI,EAAGA,EAAI61F,EAAiB,OAAQ71F,IAAK,CAC5C,IAAAulD,EAAYswC,EAAiB71F,CAAC,EAC9Bg2F,EAAWpB,GAAgBpwF,EAAM+gD,CAAS,EAC9CuwC,EAAYE,CAAQ,EAAI,GACnB,KAAA,wBAAwBA,CAAQ,EAAI,EAAA,EAE7C,EACAlB,EAAY,UAAU,aAAe,SAAUe,EAAkBj2C,EAAU,CAEzE,QADIq2C,EAAS,CAAC,EACLj2F,EAAI,EAAGA,EAAI61F,EAAiB,OAAQ71F,IACpCi2F,EAAA,CAAC,EAAIJ,EAAiB71F,CAAC,EAC9B,KAAK,WAAW61F,EAAiB71F,CAAC,EAAG4/C,CAAQ,EAAI,KAAK,SAASq2C,EAAQr2C,CAAQ,EAAI,KAAK,OAAOq2C,EAAQr2C,CAAQ,CAEnH,EACAk1C,EAAY,UAAU,uBAAyB,UAAY,CACrD,GAAA,KAAK,OAAO,cAAgB,MACvB,MAAA,CAAA,EAAG,MAAM,KAAK,KAAK,QAAQ,EAAE,YAAY,EAKlD,QAHIoB,EAAyB,KAAK,wBAC9BC,EAAYp6D,GAAYm6D,CAAsB,EAC9CzxC,EAAc,CAAC,EACVzkD,EAAI,EAAGA,EAAIm2F,EAAU,OAAQn2F,IAAK,CACzC,IAAIulD,EAAY2wC,EAAuBC,EAAUn2F,CAAC,CAAC,EAC/CulD,GAAa,GACfd,EAAY,KAAKc,CAAS,CAC5B,CAEK,OAAAd,CACT,EACAqwC,EAAY,UAAU,WAAa,SAAUvvC,EAAW3F,EAAU,CAC5D,IAAAk2C,EAAc,KAAK,OAAO,YAC9B,GAAI,CAACA,EACI,MAAA,GAEL,IAAAtxF,EAAO,KAAK,QAAQo7C,CAAQ,EAChC,OAAQk2C,IAAgB,OAASA,EAAYlB,GAAgBpwF,EAAM+gD,CAAS,CAAC,IAAM,CAAC/gD,EAAK,aAAa+gD,CAAS,EAAE,IAAI,CAAC,SAAU,UAAU,CAAC,CAC7I,EACAuvC,EAAY,UAAU,6BAA+B,UAAY,CAC3D,GAAA,KAAKD,EAAgC,EAChC,MAAA,GAEL,IAAAuB,EAAyB,KAAK,OAAO,oBAEzC,OAAKA,EAGDA,IAA2B,GACtB,GAGFA,GAA0BA,EAAuB,QAN/C,EAOX,EACAtB,EAAY,UAAU,aAAe,SAAUtwF,EAAMqxF,EAAkB,CACrE,IAAIhxD,EAAIqR,EACJ2oB,EAAS,KAAK,OACdk3B,EAAel3B,EAAO,aACtBn8D,EAAMmzF,EAAiB,OACvB,GAAA,GAACE,GAAgB,CAACrzF,IAGtB,GAAIqzF,IAAiB,SACnBl3B,EAAO,YAAc,cACZk3B,IAAiB,WAAY,CACjC3tB,EAAgBvJ,EAAO,WAAW,IACrCA,EAAO,YAAc,CAAC,GAGxB,QADIi3B,EAAcj3B,EAAO,YAChB7+D,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACxB,IAAAulD,EAAYswC,EAAiB71F,CAAC,EAE9Bg2F,EAAWpB,GAAgBpwF,EAAM+gD,CAAS,EAC9CuwC,EAAYE,CAAQ,EAAI,GACxB,KAAK,wBAAwBA,CAAQ,EAAIxxF,EAAK,YAAY+gD,CAAS,CAAA,CAE5D,SAAAwwC,IAAiB,UAAYA,IAAiB,GAAM,CACzD,IAAAM,EAAgBR,EAAiBnzF,EAAM,CAAC,EACxCszF,EAAWpB,GAAgBpwF,EAAM6xF,CAAa,EAClDx3B,EAAO,aAAeh6B,EAAK,GAAIA,EAAGmxD,CAAQ,EAAI,GAAMnxD,GAC/C,KAAA,yBAA2BqR,EAAK,CAAA,EAAIA,EAAG8/C,CAAQ,EAAIxxF,EAAK,YAAY6xF,CAAa,EAAGngD,EAAA,EAE7F,EACA4+C,EAAY,UAAU,yBAA2B,SAAUtwF,EAAM,CAG3D,GAAA,MAAK,OAAO,YAGhB,KAAIigD,EAAc,CAAC,EACfjgD,EAAK,eACFA,EAAA,KAAK,SAAU0Z,EAAK,CACnB,IAAA6gE,EAAUv6E,EAAK,eAAe0Z,CAAG,EACjC6gE,GAAWA,EAAQ,UACrBt6B,EAAY,KAAKvmC,CAAG,CACtB,CACD,EAECumC,EAAY,OAAS,GAClB,KAAA,aAAajgD,EAAMigD,CAAW,EAEvC,EAKAqwC,EAAY,cAAgB,SAAUttD,EAAK,CAClC,OAAA8jC,GAAe,cAAc9jC,CAAG,CACzC,EACAstD,EAAY,gBAAkB,UAAY,CACxC,IAAIntF,EAAQmtF,EAAY,UACxBntF,EAAM,KAAO,kBACbA,EAAM,YAAc,EACpBA,EAAM,kBAAoB,GAC1BA,EAAM,gBAAkB,GACxBA,EAAM,cAAgB,SAEtBA,EAAM,sBAAwB,YAC9BA,EAAM,eAAiB,MAAA,EACvB,EACKmtF,CAAA,EACPxpB,EAAc,EAChBgrB,GAAaxB,GAAa3T,EAAe,EACzCmV,GAAaxB,GAAankB,EAAY,EACtCroC,GAAYwsD,GAAaxpB,EAAc,EAMvC,SAAS6pB,GAAerwC,EAAa,CAGnC,IAAI30C,EAAO20C,EAAY,KAClByxC,GAA0BzxC,CAAW,IAC5BA,EAAA,KAAO0xC,GAAkB1xC,CAAW,GAAK30C,EAEzD,CACA,SAASqmF,GAAkB1xC,EAAa,CAClC,IAAAtgD,EAAOsgD,EAAY,WAAW,EAC9B2xC,EAAWjyF,EAAK,iBAAiB,YAAY,EAC7CkyF,EAAU,CAAC,EACRnnE,OAAAA,EAAKknE,EAAU,SAAUE,EAAS,CACnC,IAAApS,EAAU//E,EAAK,iBAAiBmyF,CAAO,EAC3CpS,EAAQ,aAAemS,EAAQ,KAAKnS,EAAQ,WAAW,CAAA,CACxD,EACMmS,EAAQ,KAAK,GAAG,CACzB,CACA,SAAS3B,GAAcnwF,EAAS,CAC9B,OAAOA,EAAQ,MAAM,WAAW,EAAE,MAAM,CAC1C,CACA,SAASowF,GAAcpwF,EAAS,CAC9B,IAAIkgD,EAAclgD,EAAQ,MAC1B,OAAAkgD,EAAY,QAAQA,EAAY,WAAW,EAAE,cAAc,EACpD8xC,EACT,CACA,SAASA,GAAiBvgC,EAAOzxD,EAAS,CAEpCA,EAAQ,YAAcyxD,EAAM,IAAMzxD,EAAQ,WAAW,SACvDA,EAAQ,MAAM,WAAA,EAAa,aAAaA,EAAQ,UAAU,CAE9D,CAEA,SAASswF,GAAS1wF,EAAMsgD,EAAa,CAC5Bv1B,EAAKsnE,GAAmBryF,EAAK,kBAAmBA,EAAK,kBAAkB,EAAG,SAAUokC,EAAY,CACrGpkC,EAAK,WAAWokC,EAAY2gC,GAAautB,GAAchyC,CAAW,CAAC,CAAA,CACpE,CACH,CACA,SAASgyC,GAAahyC,EAAa/5C,EAAS,CACtC,IAAAwqF,EAAOC,GAAe1wC,CAAW,EACrC,OAAIywC,GAEFA,EAAK,cAAcxqF,GAAW,MAAM,MAAA,CAAO,EAEtCA,CACT,CACA,SAASyqF,GAAe1wC,EAAa,CACnC,IAAIiyC,GAAajyC,EAAY,SAAW,CAAI,GAAA,UACxCkyC,EAAWD,GAAaA,EAAU,YAAYjyC,EAAY,GAAG,EACjE,GAAIkyC,EAAU,CAGZ,IAAIzB,EAAOyB,EAAS,YACpB,GAAIzB,EAAM,CACR,IAAI0B,EAAe1B,EAAK,aACpB0B,IACK1B,EAAA0B,EAAa,IAAInyC,EAAY,GAAG,EACzC,CAEK,OAAAywC,CAAA,CAEX,CC9eA,IAAI2B,GAA6B,UAAY,CAC3C,SAASA,GAAgB,CACvB,KAAK,MAAQ,IAAIv8D,GACjB,KAAK,IAAM4wC,GAAqB,eAAe,CACnD,CACE,OAAA2rB,EAAc,UAAU,KAAO,SAAUvyD,EAASmf,EAAK,CAAE,EACzDozC,EAAc,UAAU,OAAS,SAAU3tD,EAAO5E,EAASmf,EAAKxf,EAAS,CAAE,EAC3E4yD,EAAc,UAAU,QAAU,SAAUvyD,EAASmf,EAAK,CAAE,EAC5DozC,EAAc,UAAU,WAAa,SAAU3tD,EAAO5E,EAASmf,EAAKxf,EAAS,CAE5E,EACD4yD,EAAc,UAAU,aAAe,SAAU3tD,EAAO5E,EAASmf,EAAKxf,EAAS,CAE9E,EACD4yD,EAAc,UAAU,aAAe,SAAU3tD,EAAO5E,EAASmf,EAAKxf,EAAS,CAE9E,EAKD4yD,EAAc,UAAU,iBAAmB,SAAUC,EAAcC,EAAQzyD,EAAS,CAEnF,EAODuyD,EAAc,UAAU,aAAe,SAAUvyF,EAAI,CACnD,IAAIikE,EAAQ,KAAK,MACbA,GACFA,EAAM,SAASjkE,CAAE,CAEpB,EACMuyF,CACT,EAAG,EAEHG,GAA4BH,EAAa,EACzCI,GAAgCJ,EAAa,ECvC9B,SAASK,IAAsB,CAC5C,IAAIlsB,EAAQ9mC,GAAW,EACvB,OAAO,SAAUugB,EAAa,CAC5B,IAAIknB,EAASX,EAAMvmB,CAAW,EAC1B0yC,EAAkB1yC,EAAY,gBAC9B2yC,EAAgB,CAAC,CAACzrB,EAAO,MACzB0rB,EAAsB,CAAC,CAAC1rB,EAAO,kBAI/B2rB,EAAQ3rB,EAAO,MAAQ,CAAC,EAAEwrB,GAAmBA,EAAgB,OAC7DI,EAAc5rB,EAAO,kBAAoB,CAAC,EAAEwrB,GAAmBA,EAAgB,mBACnF,OAAUC,IAAkBE,GAASD,IAAwBE,IAAgB,OAC9E,CACH,CCRA,IAAIvsB,GAAQspB,GAAoB,EAC5BkD,GAAgBN,GAAoB,EACpCO,GAAyB,UAAY,CACvC,SAASA,GAAY,CACd,KAAA,MAAQ,IAAIn9D,GACZ,KAAA,IAAM4wC,GAAqB,WAAW,EAC3C,KAAK,WAAayW,GAAW,CAC3B,KAAM+V,GACN,MAAOC,EAAA,CACR,EACD,KAAK,WAAW,QAAU,CACxB,KAAM,IACR,CAAA,CAEFF,OAAAA,EAAU,UAAU,KAAO,SAAUnzD,EAASmf,EAAK,CAAC,EACpDg0C,EAAU,UAAU,OAAS,SAAUhzC,EAAangB,EAASmf,EAAKxf,EAAS,CAI3E,EAIAwzD,EAAU,UAAU,UAAY,SAAUhzC,EAAangB,EAASmf,EAAKxf,EAAS,CAC5E,IAAI9/B,EAAOsgD,EAAY,QAAQxgB,GAAWA,EAAQ,QAAQ,EACrD9/B,GAMWyzF,GAAAzzF,EAAM8/B,EAAS,UAAU,CAC3C,EAIAwzD,EAAU,UAAU,SAAW,SAAUhzC,EAAangB,EAASmf,EAAKxf,EAAS,CAC3E,IAAI9/B,EAAOsgD,EAAY,QAAQxgB,GAAWA,EAAQ,QAAQ,EACrD9/B,GAMWyzF,GAAAzzF,EAAM8/B,EAAS,QAAQ,CACzC,EAIAwzD,EAAU,UAAU,OAAS,SAAUnzD,EAASmf,EAAK,CACnD,KAAK,MAAM,UAAU,CACvB,EAIAg0C,EAAU,UAAU,QAAU,SAAUnzD,EAASmf,EAAK,CAAC,EACvDg0C,EAAU,UAAU,WAAa,SAAUhzC,EAAangB,EAASmf,EAAKxf,EAAS,CAC7E,KAAK,OAAOwgB,EAAangB,EAASmf,EAAKxf,CAAO,CAChD,EAEAwzD,EAAU,UAAU,aAAe,SAAUhzC,EAAangB,EAASmf,EAAKxf,EAAS,CAC/E,KAAK,OAAOwgB,EAAangB,EAASmf,EAAKxf,CAAO,CAChD,EAEAwzD,EAAU,UAAU,aAAe,SAAUhzC,EAAangB,EAASmf,EAAKxf,EAAS,CAC/E,KAAK,OAAOwgB,EAAangB,EAASmf,EAAKxf,CAAO,CAChD,EAOAwzD,EAAU,UAAU,aAAe,SAAUnzF,EAAI,CAC9B+0D,GAAA,KAAK,MAAO/0D,CAAE,CACjC,EACAmzF,EAAU,iBAAmB,SAAUxzD,EAASsE,EAAY,CACpDyiC,GAAA/mC,CAAO,EAAE,aAAesE,CAChC,EACAkvD,EAAU,gBAAkB,UAAY,CACtC,IAAInwF,EAAQmwF,EAAU,UACtBnwF,EAAM,KAAO,OAAA,EACb,EACKmwF,CACP,EAAA,EAKF,SAASI,GAAW7qF,EAAImpB,EAAO+sB,EAAgB,CACzCl2C,GAAMg6C,GAAqBh6C,CAAE,IAC9BmpB,IAAU,WAAa8sB,GAAgBE,IAAen2C,EAAIk2C,CAAc,CAE7E,CACA,SAAS00C,GAAgBzzF,EAAM8/B,EAAS9N,EAAO,CAC7C,IAAI+uB,EAAY4yC,GAAyB3zF,EAAM8/B,CAAO,EAClDif,EAAiBjf,GAAWA,EAAQ,cAAgB,KAAOgjB,GAAkBhjB,EAAQ,YAAY,EAAI,KACrGihB,GAAa,KACf9gD,EAAK0uE,GAA2B5tB,CAAS,EAAG,SAAU1F,EAAS,CAC7Dq4C,GAAW1zF,EAAK,iBAAiBq7C,CAAO,EAAGrpB,EAAO+sB,CAAc,CAAA,CACjE,EAEI/+C,EAAA,kBAAkB,SAAU6I,EAAI,CACxB6qF,GAAA7qF,EAAImpB,EAAO+sB,CAAc,CAAA,CACrC,CAEL,CACA8zC,GAA4BS,EAAsB,EAClDR,GAAgCQ,EAAS,EACzC,SAASC,GAAenzF,EAAS,CACxB,OAAAizF,GAAcjzF,EAAQ,KAAK,CACpC,CACA,SAASozF,GAAgBpzF,EAAS,CAChC,IAAIkgD,EAAclgD,EAAQ,MACtB+/B,EAAU//B,EAAQ,QAClBk/C,EAAMl/C,EAAQ,IACd0/B,EAAU1/B,EAAQ,QAElBwzF,EAAoBtzC,EAAY,gBAAgB,kBAChDX,EAAOv/C,EAAQ,KACfyzF,EAAe/zD,GAAW+mC,GAAM/mC,CAAO,EAAE,aACzCsE,EAAawvD,EAAoB,2BAA6BC,GAAgBl0C,EAAKk0C,CAAY,EAAIA,EAGrG,SACF,OAAIzvD,IAAe,UACjBub,EAAKvb,CAAU,EAAEkc,EAAangB,EAASmf,EAAKxf,CAAO,EAE9Cg0D,GAAkB1vD,CAAU,CACrC,CACA,IAAI0vD,GAAoB,CACtB,yBAA0B,CACxB,SAAU,SAAU7yE,EAAQ7gB,EAAS,CAC3BA,EAAA,KAAK,kBAAkB6gB,EAAQ7gB,EAAQ,MAAOA,EAAQ,QAASA,EAAQ,IAAKA,EAAQ,OAAO,CAAA,CAEvG,EACA,OAAQ,CAKN,mBAAoB,GACpB,SAAU,SAAU6gB,EAAQ7gB,EAAS,CAC3BA,EAAA,KAAK,OAAOA,EAAQ,MAAOA,EAAQ,QAASA,EAAQ,IAAKA,EAAQ,OAAO,CAAA,CAClF,CAEJ,EC5JI2zF,GAAgB,2BAChBC,GAAO,mBACPC,GAAgB,mBAWb,SAASC,GAAStwD,EAAIrO,EAAO4+D,EAAU,CAC5C,IAAIC,EACAC,EAAW,EACXC,EAAW,EACXC,EAAQ,KACR7lD,EACAvkB,EACAxsB,EACA62F,EACJj/D,EAAQA,GAAS,EACjB,SAASk/D,GAAO,CACdH,EAAW,IAAI,KAAM,EAAC,QAAS,EAC/BC,EAAQ,KACR3wD,EAAG,MAAMzZ,EAAOxsB,GAAQ,CAAA,CAAE,CAC9B,CACE,IAAIwC,EAAK,UAAY,CAEnB,QADIu0F,EAAS,CAAE,EACN92F,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACtC82F,EAAO92F,CAAE,EAAI,UAAUA,CAAE,EAE3Bw2F,EAAW,IAAI,KAAM,EAAC,QAAS,EAC/BjqE,EAAQ,KACRxsB,EAAO+2F,EACP,IAAIC,EAAYH,GAAoBj/D,EAChCq/D,EAAeJ,GAAoBL,EACvCK,EAAmB,KACnB9lD,EAAO0lD,GAAYQ,EAAeP,EAAWC,GAAYK,EACzD,aAAaJ,CAAK,EASdK,EACFL,EAAQ,WAAWE,EAAME,CAAS,EAE9BjmD,GAAQ,EACV+lD,EAAM,EAENF,EAAQ,WAAWE,EAAM,CAAC/lD,CAAI,EAGlC2lD,EAAWD,CACZ,EAKD,OAAAj0F,EAAG,MAAQ,UAAY,CACjBo0F,IACF,aAAaA,CAAK,EAClBA,EAAQ,KAEX,EAIDp0F,EAAG,iBAAmB,SAAU00F,EAAe,CAC7CL,EAAmBK,CACpB,EACM10F,CACT,CAsBO,SAAS20F,GAAel4F,EAAKm4F,EAAQvO,EAAMwO,EAAc,CAC9D,IAAIpxD,EAAKhnC,EAAIm4F,CAAM,EACnB,GAAKnxD,EAGL,KAAIqxD,EAAWrxD,EAAGmwD,EAAa,GAAKnwD,EAChCsxD,EAAmBtxD,EAAGqwD,EAAa,EACnCkB,EAAWvxD,EAAGowD,EAAI,EACtB,GAAImB,IAAa3O,GAAQ0O,IAAqBF,EAAc,CAC1D,GAAIxO,GAAQ,KACV,OAAO5pF,EAAIm4F,CAAM,EAAIE,EAEvBrxD,EAAKhnC,EAAIm4F,CAAM,EAAIb,GAASe,EAAUzO,EAAMwO,IAAiB,UAAU,EACvEpxD,EAAGmwD,EAAa,EAAIkB,EACpBrxD,EAAGqwD,EAAa,EAAIe,EACpBpxD,EAAGowD,EAAI,EAAIxN,CACf,CACE,OAAO5iD,EACT,CAIO,SAASwxD,GAAMx4F,EAAKm4F,EAAQ,CACjC,IAAInxD,EAAKhnC,EAAIm4F,CAAM,EACfnxD,GAAMA,EAAGmwD,EAAa,IAExBnwD,EAAG,OAASA,EAAG,MAAO,EACtBhnC,EAAIm4F,CAAM,EAAInxD,EAAGmwD,EAAa,EAElC,CC1HA,IAAIltB,GAAQ9mC,GAAW,EACnBs1D,GAAsB,CACxB,UAAWxwD,GAAgBo1B,GAAoB,EAAI,EACnD,UAAWp1B,GAAgBi1B,GAAoB,EAAI,CACrD,EACIw7B,GAAkB,CACpB,UAAW,SACX,UAAW,MACb,EACA,SAASC,GAAej1C,EAAak1C,EAAW,CAC9C,IAAIC,EAAcn1C,EAAY,mBAAqB+0C,GAAoBG,CAAS,EAChF,OAAKC,IACH,QAAQ,KAAK,uBAAyBD,EAAY,IAAI,EAC/CH,GAAoB,UAG/B,CACA,SAASK,GAAmBp1C,EAAak1C,EAAW,CAElD,IAAIG,EAAWr1C,EAAY,gBAAkBg1C,GAAgBE,CAAS,EACtE,OAAKG,IACH,QAAQ,KAAK,uBAAyBH,EAAY,IAAI,EAC/C,OAGX,CACA,IAAII,GAAkB,CACpB,kBAAmB,GACnB,iBAAkB,GAClB,MAAO,SAAUt1C,EAAangB,EAAS,CACrC,IAAIngC,EAAOsgD,EAAY,QAAS,EAC5Bk1C,EAAYl1C,EAAY,uBAAyB,YAEjDu1C,EAAav1C,EAAY,SAASk1C,CAAS,EAC3CM,EAAWP,GAAej1C,EAAak1C,CAAS,EAChDO,EAAcD,EAASD,CAAU,EACjCG,EAAcH,EAAW,WAAW,OAAO,EAC3CG,IACFh2F,EAAK,UAAU,QAASg2F,CAAW,EACnCA,EAAY,MAAQ,IAGtB,IAAIL,EAAWD,GAAmBp1C,EAAak1C,CAAS,EACpDj0E,EAAQw0E,EAAYJ,CAAQ,EAE5BM,EAAgBt1F,EAAW4gB,CAAK,EAAIA,EAAQ,KAC5C20E,EAAeH,EAAY,OAAS,QAAUA,EAAY,SAAW,OAEzE,GAAI,CAACA,EAAYJ,CAAQ,GAAKM,GAAiBC,EAAc,CAI3D,IAAIC,EAAe71C,EAAY,oBAE/BA,EAAY,KAAM,KAAMngB,EAAQ,eAAc,CAAE,EAC3C41D,EAAYJ,CAAQ,IACvBI,EAAYJ,CAAQ,EAAIQ,EACxBn2F,EAAK,UAAU,mBAAoB,EAAI,GAEzC+1F,EAAY,KAAOA,EAAY,OAAS,QAAUp1F,EAAWo1F,EAAY,IAAI,EAAII,EAAeJ,EAAY,KAC5GA,EAAY,OAASA,EAAY,SAAW,QAAUp1F,EAAWo1F,EAAY,MAAM,EAAII,EAAeJ,EAAY,MACxH,CAII,GAHA/1F,EAAK,UAAU,QAAS+1F,CAAW,EACnC/1F,EAAK,UAAU,WAAY21F,CAAQ,EAE/B,CAACx1D,EAAQ,iBAAiBmgB,CAAW,GAAK21C,EAC5C,OAAAj2F,EAAK,UAAU,mBAAoB,EAAK,EACjC,CACL,SAAU,SAAUA,EAAM0Z,EAAK,CAC7B,IAAI08E,EAAa91C,EAAY,cAAc5mC,CAAG,EAC1C49D,EAAYx4E,EAAO,CAAE,EAAEi3F,CAAW,EACtCze,EAAUqe,CAAQ,EAAIM,EAAcG,CAAU,EAC9Cp2F,EAAK,cAAc0Z,EAAK,QAAS49D,CAAS,CACpD,CACO,CAEP,CACA,EACI+e,GAAc,IAAIj8B,GAClBk8B,GAAgB,CAClB,kBAAmB,GACnB,iBAAkB,GAClB,MAAO,SAAUh2C,EAAangB,EAAS,CACrC,GAAI,EAAAmgB,EAAY,mBAAqBngB,EAAQ,iBAAiBmgB,CAAW,GAGzE,KAAItgD,EAAOsgD,EAAY,QAAS,EAC5Bk1C,EAAYl1C,EAAY,uBAAyB,YAEjDw1C,EAAWP,GAAej1C,EAAak1C,CAAS,EAChDG,EAAW31F,EAAK,UAAU,UAAU,EACxC,MAAO,CACL,SAAUA,EAAK,cAAgB,SAAUA,EAAM0Z,EAAK,CAElD,IAAI6gE,EAAUv6E,EAAK,eAAe0Z,CAAG,EACrC,GAAI6gE,GAAWA,EAAQib,CAAS,EAAG,CACjCa,GAAY,OAAS9b,EAAQib,CAAS,EACtC,IAAI16F,EAAQg7F,EAASO,EAAW,EAC5BE,EAAcv2F,EAAK,uBAAuB0Z,EAAK,OAAO,EAC1D5a,EAAOy3F,EAAaz7F,CAAK,EACrBu7F,GAAY,OAAO,QACrBr2F,EAAK,cAAc0Z,EAAK,QAAS28E,GAAY,OAAO,KAAK,EACzDA,GAAY,OAAO,MAAM,MAAQ,IAE/BV,KAAY76F,GACdkF,EAAK,cAAc0Z,EAAK,mBAAoB,EAAK,CAE7D,CACA,EAAU,IACL,EACL,CACA,EAGI88E,GAAuB,CACzB,iBAAkB,GAClB,aAAc,SAAUr2D,EAAS,CAG/B,IAAIs2D,EAA0B7zF,EAAe,EAC7Cu9B,EAAQ,WAAW,SAAUmgB,EAAa,CACxC,IAAI6wC,EAAU7wC,EAAY,WAAY,EACtC,GAAI,CAAAA,EAAY,kBAGhB,KAAIjiD,EAAMiiD,EAAY,KAAO,IAAM6wC,EAC/BuF,EAAaD,EAAwB,IAAIp4F,CAAG,EAC3Cq4F,IACHA,EAAa,CAAE,EACfD,EAAwB,IAAIp4F,EAAKq4F,CAAU,GAE7C7vB,GAAMvmB,CAAW,EAAE,MAAQo2C,EACjC,CAAK,EACDv2D,EAAQ,WAAW,SAAUmgB,EAAa,CACxC,GAAI,EAAAA,EAAY,gBAAiB,GAAIngB,EAAQ,iBAAiBmgB,CAAW,GAGzE,KAAIq2C,EAAUr2C,EAAY,WAAY,EAClCs2C,EAAS,CAAE,EACX52F,EAAOsgD,EAAY,QAAS,EAC5Bo2C,EAAa7vB,GAAMvmB,CAAW,EAAE,MAChCk1C,EAAYl1C,EAAY,uBAAyB,YACjDq1C,EAAWD,GAAmBp1C,EAAak1C,CAAS,EACxDx1F,EAAK,KAAK,SAAU0Z,EAAK,CACvB,IAAIqrE,EAAS/kF,EAAK,YAAY0Z,CAAG,EACjCk9E,EAAO7R,CAAM,EAAIrrE,CACzB,CAAO,EAGDi9E,EAAQ,KAAK,SAAU5R,EAAQ,CAC7B,IAAIrrE,EAAMk9E,EAAO7R,CAAM,EACnB8R,EAAc72F,EAAK,cAAc0Z,EAAK,kBAAkB,EAK5D,GAAIm9E,EAAa,CACf,IAAIvf,EAAYt3E,EAAK,uBAAuB0Z,EAAK,OAAO,EACpDw+C,EAASy+B,EAAQ,QAAQ5R,CAAM,GAAKA,EAAS,GAC7CqB,EAAYuQ,EAAQ,MAAO,EAC/Brf,EAAUqe,CAAQ,EAAIr1C,EAAY,oBAAoB4X,EAAQw+B,EAAYtQ,CAAS,CAC7F,CACA,CAAO,EACP,CAAK,CACL,CACA,ECzKIl3C,GAAK,KAAK,GASC,SAAS4nD,GAAex3C,EAAK9gC,EAAM,CAChDA,EAAOA,GAAQ,CAAE,EACjB2hD,EAAgB3hD,EAAM,CACpB,KAAM,UACN,UAAW,OACX,SAAU,GACV,WAAY,SACZ,UAAW,SACX,WAAY,aACZ,UAAW,2BACX,YAAa,GACb,MAAO,UACP,cAAe,GACf,UAAW,EACX,OAAQ,CACZ,CAAG,EACD,IAAI4lD,EAAQ,IAAI2yB,GACZC,EAAO,IAAIC,GAAa,CAC1B,MAAO,CACL,KAAMz4E,EAAK,SACZ,EACD,OAAQA,EAAK,OACb,EAAG,GACP,CAAG,EACD4lD,EAAM,IAAI4yB,CAAI,EACd,IAAI9kE,EAAc,IAAIglE,GAAa,CACjC,MAAO,CACL,KAAM14E,EAAK,KACX,KAAMA,EAAK,UACX,SAAUA,EAAK,SACf,WAAYA,EAAK,WACjB,UAAWA,EAAK,UAChB,WAAYA,EAAK,UAClB,EACD,OAAQA,EAAK,OACb,EAAG,KACP,CAAG,EACG24E,EAAY,IAAIF,GAAa,CAC/B,MAAO,CACL,KAAM,MACP,EACD,YAAa/kE,EACb,WAAY,CACV,SAAU,QACV,SAAU,EACX,EACD,OAAQ1T,EAAK,OACb,EAAG,KACP,CAAG,EACD4lD,EAAM,IAAI+yB,CAAS,EACnB,IAAI3uC,EACJ,OAAIhqC,EAAK,cACPgqC,EAAM,IAAI4uC,GAAY,CACpB,MAAO,CACL,WAAY,CAACloD,GAAK,EAClB,SAAU,CAACA,GAAK,EAAI,GACpB,EAAG1wB,EAAK,aACT,EACD,MAAO,CACL,OAAQA,EAAK,MACb,QAAS,QACT,UAAWA,EAAK,SACjB,EACD,OAAQA,EAAK,OACb,EAAG,KACT,CAAK,EACDgqC,EAAI,aAAa,EAAI,EAAE,KAAK,IAAM,CAChC,SAAUtZ,GAAK,EAAI,CACzB,CAAK,EAAE,MAAM,eAAe,EACxBsZ,EAAI,aAAa,EAAI,EAAE,KAAK,IAAM,CAChC,WAAYtZ,GAAK,EAAI,CACtB,CAAA,EAAE,MAAM,GAAG,EAAE,MAAM,eAAe,EACnCk1B,EAAM,IAAI5b,CAAG,GAGf4b,EAAM,OAAS,UAAY,CACzB,IAAIxqB,EAAY1nB,EAAY,gBAAe,EAAG,MAC1Cle,EAAIwK,EAAK,YAAcA,EAAK,cAAgB,EAG5CsxB,GAAMwP,EAAI,SAAU,EAAGtrC,EAAI,GAAKwK,EAAK,aAAeo7B,EAAY,GAAK,GAAKA,GAAa,GAAKp7B,EAAK,aAAeo7B,EAAY,EAAI,EAAIA,EAAY,IAEjJp7B,EAAK,YAAc,EAAIo7B,EAAY,IAEnCA,EAAY,EAAI5lC,GACf+7B,EAAKuP,EAAI,UAAS,EAAK,EAC3B9gC,EAAK,aAAegqC,EAAI,SAAS,CAC/B,GAAI1Y,EACJ,GAAIC,CACV,CAAK,EACDonD,EAAU,SAAS,CACjB,EAAGrnD,EAAK97B,EACR,EAAG+7B,EAAK/7B,EACR,MAAOA,EAAI,EACX,OAAQA,EAAI,CAClB,CAAK,EACDgjF,EAAK,SAAS,CACZ,EAAG,EACH,EAAG,EACH,MAAO13C,EAAI,SAAU,EACrB,OAAQA,EAAI,UAAS,CAC3B,CAAK,CACF,EACD8kB,EAAM,OAAQ,EACPA,CACT,CC7GA,IAAIizB,GAAyB,UAAY,CACvC,SAASA,EAAUxlB,EAAYvyB,EAAKg4C,EAAuBC,EAAgB,CAEzE,KAAK,cAAgB30F,EAAc,EACnC,KAAK,WAAaivE,EAClB,KAAK,IAAMvyB,EAKag4C,EAAA,KAAK,uBAAyBA,EAAsB,MAAM,EACjEC,EAAA,KAAK,gBAAkBA,EAAe,MAAM,EACxD,KAAA,aAAeD,EAAsB,OAAOC,CAAc,CAAA,CAEjEF,OAAAA,EAAU,UAAU,YAAc,SAAUl3D,EAASL,EAAS,CAiB5DK,EAAQ,YAAYL,CAAO,EAQtB,KAAA,cAAc,KAAK,SAAU03D,EAAY,CAC5C,IAAIC,EAAcD,EAAW,YAC7BC,GAAeA,EAAY,MAAM,CAAA,CAClC,CACH,EAEAJ,EAAU,UAAU,eAAiB,SAAUtG,EAAMl4B,EAAS,CAExD,GAACk4B,EAAK,WAGV,KAAIyB,EAAW,KAAK,aAAa,IAAIzB,EAAK,WAAW,EAAE,EACnD2G,EAAOlF,EAAS,QAChBmF,EAAc,CAAC9+B,GAAW25B,EAAS,qBAAuB,CAACkF,GAAQA,EAAK,oBAAsB3G,EAAK,gBAAkByB,EAAS,WAC9Hp1E,EAAOu6E,EAAcnF,EAAS,KAAO,KACrCrU,EAAeuZ,GAAQA,EAAK,aAC5BxZ,EAAQC,GAAgB,KAAO,KAAK,KAAKA,EAAe/gE,CAAI,EAAI,KAC7D,MAAA,CACL,KAAAA,EACA,MAAA8gE,EACA,aAAAC,CACF,EACF,EACAkZ,EAAU,UAAU,YAAc,SAAUO,EAAY,CAC/C,OAAA,KAAK,aAAa,IAAIA,CAAU,CACzC,EAQAP,EAAU,UAAU,kBAAoB,SAAU/2C,EAAaX,EAAM,CACnE,IAAI6yC,EAAW,KAAK,aAAa,IAAIlyC,EAAY,GAAG,EAChDtgD,EAAOsgD,EAAY,QAAQ,EAC3Bu3C,EAAU73F,EAAK,MAAM,EAMrB4zF,EAAoBpB,EAAS,oBAAsB7yC,EAAK,0BAA4Bk4C,GAAWrF,EAAS,UACxGW,EAAQ7yC,EAAY,IAAI,OAAO,GAAKu3C,GAAWv3C,EAAY,IAAI,gBAAgB,EAG/E69B,EAAe79B,EAAY,IAAI,sBAAsB,IAAM,MAAQu3C,EAAU,KACrEv3C,EAAA,gBAAkBkyC,EAAS,QAAU,CAC/C,kBAAAoB,EACA,aAAAzV,EACA,MAAAgV,CACF,CACF,EACAkE,EAAU,UAAU,iBAAmB,SAAUl3D,EAAS,CACxD,IAAIoyD,EAAY,KACZuF,EAAcvF,EAAU,aAAe3vF,EAAc,EACjDu9B,EAAA,WAAW,SAAUmgB,EAAa,CACpC,IAAA8yC,EAAc9yC,EAAY,eAAe,EACzCs3C,EAAat3C,EAAY,IAC7Bw3C,EAAY,IAAIF,EAAY,CAC1B,GAAIA,EACJ,KAAM,KACN,KAAM,KACN,UAAWt3C,EAAY,wBAAwB,EAC/C,mBAAoB8yC,GAAe,EAAE9yC,EAAY,oBAAsBA,EAAY,sBACnF,WAAY,GACZ,KAAM,KAAK,MAAM8yC,GAAe,GAAG,EACnC,MAAO,CAAA,CACR,EACSb,EAAA,MAAMjyC,EAAaA,EAAY,QAAQ,CAAA,CAClD,CACH,EACA+2C,EAAU,UAAU,kBAAoB,UAAY,CAClD,IAAIU,EAAe,KAAK,cACpB53D,EAAU,KAAK,IAAI,SAAS,EAC5Bmf,EAAM,KAAK,IACVr/C,EAAA,KAAK,aAAc,SAAUoF,EAAS,CACrC,IAAA2yF,EAASD,EAAa,IAAI1yF,EAAQ,GAAG,GAAK0yF,EAAa,IAAI1yF,EAAQ,IAAK,CAAA,CAAE,EAC1Ey2D,EAAS,GAKbl6D,GAAO,EAAEyD,EAAQ,OAASA,EAAQ,cAAey2D,CAAM,EACvDz2D,EAAQ,OAAS,KAAK,uBAAuBA,EAAS2yF,EAAQ73D,EAASmf,CAAG,EAC1Ej6C,EAAQ,cAAgB,KAAK,wBAAwBA,EAAS2yF,EAAQ73D,EAASmf,CAAG,GACjF,IAAI,CACT,EACA+3C,EAAU,UAAU,YAAc,SAAU13C,EAAM5a,EAAO5E,EAASmf,EAAK,CACrE,IAAI24C,EAAat4C,EAAK,WAClBv/C,EAAU63F,EAAW,QACzB73F,EAAQ,MAAQ2kC,EAChB3kC,EAAQ,QAAU+/B,EAClB//B,EAAQ,IAAMk/C,EACH24C,EAAA,QAAU,CAACt4C,EAAK,yBACtB,KAAA,MAAM5a,EAAOkzD,CAAU,CAC9B,EACAZ,EAAU,UAAU,0BAA4B,SAAUl3D,EAASL,EAAS,CAE1E,KAAK,mBAAmB,KAAK,uBAAwBK,EAASL,EAAS,CACrE,MAAO,EAAA,CACR,CACH,EACAu3D,EAAU,UAAU,mBAAqB,SAAUl3D,EAASL,EAASl0B,EAAK,CACxE,KAAK,mBAAmB,KAAK,gBAAiBu0B,EAASL,EAASl0B,CAAG,CACrE,EACAyrF,EAAU,UAAU,mBAAqB,SAAUa,EAAe/3D,EAASL,EAASl0B,EAAK,CACvFA,EAAMA,GAAO,CAAC,EACd,IAAIusF,EAAa,GACb5F,EAAY,KACXtyF,EAAAi4F,EAAe,SAAUE,EAAc1+E,EAAK,CAC/C,GAAI,EAAA9N,EAAI,YAAcA,EAAI,aAAewsF,EAAa,YAGtD,KAAIC,EAAqB9F,EAAU,cAAc,IAAI6F,EAAa,GAAG,EACjEE,EAAgBD,EAAmB,cACnCZ,EAAcY,EAAmB,YACrC,GAAIZ,EAAa,CACX,IAAAc,EACA9F,EAAegF,EAAY,aAClBhF,EAAA,KAAK,SAAU+F,EAAM,CAC5BC,EAAa7sF,EAAK4sF,CAAI,IACxBA,EAAK,MAAM,EACUD,EAAA,GACvB,CACD,EACDA,GAAsBd,EAAY,MAAM,EAC9BlF,EAAA,cAAckF,EAAa33D,CAAO,EAC5C,IAAI44D,EAAgBnG,EAAU,eAAekF,EAAa7rF,EAAI,KAAK,EAKtD6mF,EAAA,KAAK,SAAU+F,EAAM,CAChCA,EAAK,QAAQE,CAAa,CAAA,CAC3B,EACGjB,EAAY,QAAQiB,CAAa,IACtBP,EAAA,SAENG,GACKA,EAAA,KAAK,SAAUvH,EAAM6G,EAAY,CACzCa,EAAa7sF,EAAKmlF,CAAI,GACxBA,EAAK,MAAM,EAEb,IAAIpT,EAAc4U,EAAU,eAAexB,EAAMnlF,EAAI,KAAK,EAS9C+xE,EAAA,KAAO,CAACya,EAAa,kBAAoBj4D,EAAQ,iBAAiB4wD,EAAK,QAAQ,KAAK,EACtFwB,EAAA,cAAcxB,EAAMjxD,CAAO,EACjCixD,EAAK,QAAQpT,CAAW,IACbwa,EAAA,GACf,CACD,EACH,CACD,EACQ,SAAAM,EAAa7sF,EAAKmlF,EAAM,CACxBnlF,OAAAA,EAAI,WAAa,CAACA,EAAI,UAAYA,EAAI,SAAS,IAAImlF,EAAK,WAAW,EAAE,EAAA,CAEzE,KAAA,WAAaoH,GAAc,KAAK,UACvC,EACAd,EAAU,UAAU,mBAAqB,SAAUl3D,EAAS,CACtD,IAAAg4D,EACIh4D,EAAA,WAAW,SAAUmgB,EAAa,CAE3B63C,EAAA73C,EAAY,SAAS,QAAa,GAAA63C,CAAA,CAChD,EACI,KAAA,WAAaA,GAAc,KAAK,UACvC,EACAd,EAAU,UAAU,KAAO,UAAY,CAEhC,KAAA,aAAa,KAAK,SAAU7E,EAAU,CACzC,IAAIzB,EAAOyB,EAAS,KACjB,EAAA,CACD,GAAIzB,EAAK,QAAS,CAChByB,EAAS,WAAazB,EAAK,gBAC3B,KAAA,CAEFA,EAAOA,EAAK,YAAY,CAAA,OACjBA,EAAA,CACV,CACH,EACAsG,EAAU,UAAU,cAAgB,SAAUtG,EAAMjxD,EAAS,CAC/CA,IAAA,WAAaixD,EAAK,QAAQ,QAAUjxD,EAClD,EACAu3D,EAAU,UAAU,uBAAyB,SAAUe,EAAcC,EAAoBl4D,EAASmf,EAAK,CACrG,IAAIizC,EAAY,KACZoG,EAAmBN,EAAmB,cAGtCO,EAAmBP,EAAmB,cAAgBz1F,EAAc,EACpEm1E,EAAaqgB,EAAa,WAC1BS,EAAkBT,EAAa,gBAI/BA,EAAa,kBACfj4D,EAAQ,cAAct8B,CAAM,EACnBk0E,EACD53C,EAAA,oBAAoB43C,EAAYl0E,CAAM,EACrCg1F,GACTA,EAAgB14D,EAASmf,CAAG,EAAE,KAAKz7C,CAAM,EAE3C,SAASA,EAAOy8C,EAAa,CAC3B,IAAIs3C,EAAat3C,EAAY,IAGzBywC,EAAO6H,EAAiB,IAAIhB,EAAYe,GAAoBA,EAAiB,IAAIf,CAAU,GAAKpa,GAAW,CAC7G,KAAMsb,GACN,MAAOC,GACP,MAAOC,EAAA,CACR,CAAC,EACFjI,EAAK,QAAU,CACb,MAAOzwC,EACP,QAAAngB,EACA,IAAAmf,EAEA,eAAgB84C,EAAa,UAAY,CAACA,EAAa,SACvD,KAAMA,EAAa,KACnB,MAAOA,EAAa,MACpB,UAAA7F,CACF,EACUA,EAAA,MAAMjyC,EAAaywC,CAAI,CAAA,CAErC,EACAsG,EAAU,UAAU,wBAA0B,SAAUe,EAAcC,EAAoBl4D,EAASmf,EAAK,CACtG,IAAIizC,EAAY,KACZkF,EAAcY,EAAmB,YAAcA,EAAmB,aAEnE7a,GAAW,CACZ,MAAOyb,EAAA,CACR,EACDxB,EAAY,QAAU,CACpB,QAAAt3D,EACA,IAAAmf,EACA,aAAc84C,EAAa,aAC3B,UAAA7F,CACF,EACA,IAAI2G,EAAkBzB,EAAY,aAG9B0B,EAAkB1B,EAAY,aAAe70F,EAAc,EAC3Dm1E,EAAaqgB,EAAa,WAC1BS,EAAkBT,EAAa,gBAC/BgB,EAAkB,GAClBC,EAAyB,GAOzBv9B,EAAS,GAINl6D,GAAA,CAACw2F,EAAa,kBAAmBt8B,CAAM,EAC1Cic,EACM53C,EAAA,oBAAoB43C,EAAYuhB,CAAU,EACzCT,EACTA,EAAgB14D,EAASmf,CAAG,EAAE,KAAKg6C,CAAU,GAO3BF,EAAA,GACbn5F,EAAAkgC,EAAQ,UAAU,EAAGm5D,CAAU,GAEtC,SAASA,EAAWh5C,EAAa,CAC/B,IAAIs3C,EAAat3C,EAAY,IACzBk4C,EAAOW,EAAgB,IAAIvB,EAAYsB,GAAmBA,EAAgB,IAAItB,CAAU,IAG5FyB,EAAyB,GAAM7b,GAAW,CACxC,MAAO+b,GACP,QAASC,EACV,CAAA,EAAE,EACHhB,EAAK,QAAU,CACb,MAAOl4C,EACP,gBAAA84C,CAGF,EACAZ,EAAK,MAAQf,EACbe,EAAK,QAAUY,EACL7G,EAAA,MAAMjyC,EAAak4C,CAAI,CAAA,CAE/Ba,GACF5B,EAAY,MAAM,CAEtB,EACAJ,EAAU,UAAU,MAAQ,SAAU/2C,EAAaywC,EAAM,CACvD,IAAI6G,EAAat3C,EAAY,IACzBkyC,EAAW,KAAK,aAAa,IAAIoF,CAAU,EAC9C,CAAApF,EAAS,OAASA,EAAS,KAAOzB,GACnCyB,EAAS,MAAQA,EAAS,KAAK,KAAKzB,CAAI,EACxCyB,EAAS,KAAOzB,EAChBA,EAAK,gBAAkByB,EAAS,QAChCzB,EAAK,WAAayB,CACpB,EACA6E,EAAU,iBAAmB,SAAUe,EAAcqB,EAAY,CAC3D,OAAA94F,EAAWy3F,CAAY,IACVA,EAAA,CACb,aAAcA,EACd,WAAYsB,GAAiBtB,CAAY,CAC3C,GAEWA,EAAA,IAAMz9B,GAAO,cAAc,EACxC8+B,IAAerB,EAAa,WAAaqB,GAClCrB,CACT,EAEOf,CACP,EAAA,EACF,SAAS4B,GAAiB74F,EAAS,CACjCA,EAAQ,aAAaA,EAAQ,QAASA,EAAQ,IAAKA,EAAQ,OAAO,CACpE,CACA,SAASm5F,GAAUn5F,EAAS,CAC1B,OAAOA,EAAQ,iBAAmBu5F,EACpC,CACA,SAASA,IAAe,CACtB,KAAK,MAAM,MAAM,EACZ,KAAA,gBAAgB,MAAM,CAC7B,CACA,SAASH,IAAc,CAChB,KAAA,OAAS,KAAK,MAAM,MAAM,CACjC,CACA,SAASV,GAAe14F,EAAS,CAC/B,OAAOA,EAAQ,KAAOA,EAAQ,KAAKA,EAAQ,MAAOA,EAAQ,QAASA,EAAQ,IAAKA,EAAQ,OAAO,EAAI,IACrG,CACA,SAAS24F,GAAgB34F,EAAS,CAC5BA,EAAQ,gBACVA,EAAQ,KAAK,eAAe,EAE9B,IAAIw5F,EAAex5F,EAAQ,aAAe+7B,GAAiB/7B,EAAQ,MAAMA,EAAQ,MAAOA,EAAQ,QAASA,EAAQ,IAAKA,EAAQ,OAAO,CAAC,EACtI,OAAOw5F,EAAa,OAAS,EAAIr+F,EAAIq+F,EAAc,SAAU51F,EAAG0V,EAAK,CACnE,OAAOmgF,GAAuBngF,CAAG,CAClC,CAAA,EAAIogF,EACP,CACA,IAAIA,GAA2BD,GAAuB,CAAC,EACvD,SAASA,GAAuBE,EAAgB,CACvC,OAAA,SAAU94E,EAAQ7gB,EAAS,CAChC,IAAIJ,EAAOI,EAAQ,KACf45F,EAAc55F,EAAQ,aAAa25F,CAAc,EACjD,GAAAC,GAAeA,EAAY,SAC7B,QAASx+F,EAAIylB,EAAO,MAAOzlB,EAAIylB,EAAO,IAAKzlB,IAC7Bw+F,EAAA,SAASh6F,EAAMxE,CAAC,OAErBw+F,GAAeA,EAAY,UACxBA,EAAA,SAAS/4E,EAAQjhB,CAAI,CAErC,CACF,CACA,SAASg5F,GAAgB54F,EAAS,CACzB,OAAAA,EAAQ,KAAK,MAAM,CAC5B,CAQA,SAASs5F,GAAiBO,EAAY,CACvBliB,GAAA,KACT,GAAA,CAEFkiB,EAAWC,GAAaC,EAAO,OACrB,CAAA,CACL,OAAApiB,EACT,CACA,IAAImiB,GAAc,CAAC,EACfC,GAAU,CAAC,EACXpiB,GACJqiB,GAAYF,GAAa1sB,EAAW,EACpC4sB,GAAYD,GAASvoB,EAAY,EACjCsoB,GAAY,iBAAmBA,GAAY,oBAAsB,SAAUl5F,EAAM,CAClE+2E,GAAA/2E,CACf,EACAk5F,GAAY,cAAgB,SAAUG,EAAM,CACtCA,EAAK,WAAa,UAAYA,EAAK,UACrCtiB,GAAasiB,EAAK,QAEtB,EACA,SAASD,GAAY77F,EAAQ+7F,EAAK,CAEvB,QAAApiC,KAAUoiC,EAAI,UAErB/7F,EAAO25D,CAAM,EAAIv0D,EAGrB,CC5bA,IAAI42F,GAAW,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EAC7J,MAAeC,GAAA,CACb,MAAOD,GACP,WAAY,CAAC,CAAC,UAAW,UAAW,SAAS,EAAG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EAAG,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EAAGA,EAAQ,CACnO,ECJA,IAAIE,GAAgB,UAChB1pE,GAAkB,UAClB2pE,GAAa,UAAY,CAC3B,MAAO,CACL,SAAU,CACR,UAAW,CACT,MAAOD,EACf,CACK,EACD,UAAW,CACT,UAAW,CACT,MAAO,SACf,CACK,EACD,UAAW,CACT,UAAW,CACT,MAAO,CAAC,yBAA0B,wBAAwB,CAClE,CACK,EACD,eAAgB,CACd,UAAW,CACT,MAAO,SACf,CACA,CACG,CACH,EACItE,GAAe,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,SAAS,EACjH1oB,GAAQ,CACV,SAAU,GACV,MAAO0oB,GACP,gBAAiBplE,GACjB,YAAa,CACX,UAAW,CACT,MAAO,SACR,EACD,WAAY,CACV,MAAO,SACR,EACD,MAAO,CAEL,MAAO,MACb,CACG,EACD,OAAQ,CACN,UAAW,CACT,MAAO0pE,EACR,EACD,cAAe,CACb,MAAOA,EACb,CACG,EACD,UAAW,CACT,MAAOA,EACR,EACD,MAAO,CACL,UAAW,CACT,MAAO,SACR,EACD,aAAc,CACZ,MAAO,SACb,CACG,EACD,QAAS,CACP,UAAW,CACT,YAAaA,EACnB,CACG,EACD,SAAU,CACR,YAAa,UACb,UAAW,CACT,MAAOA,EACR,EACD,WAAY,CACV,MAAO,uBACR,EACD,YAAa,CACX,MAAO,UACP,YAAa,SACd,EACD,gBAAiB,CACf,MAAO,UACP,QAAS,EACV,EACD,YAAa,wBACb,SAAU,CACR,YAAa,CACX,YAAa,UACb,MAAO,SACR,EACD,gBAAiB,CACf,MAAO,UACP,QAAS,EACjB,CACK,EACD,eAAgB,CACd,UAAW,CACT,MAAO,UACP,MAAO,CACR,EACD,UAAW,CACT,MAAO,SACf,CACK,EACD,uBAAwB,CACtB,UAAW,CACT,MAAO,SACR,EACD,UAAW,CACT,MAAO,SACf,CACA,CACG,EACD,UAAW,CACT,UAAW,CACT,MAAOA,EACb,CACG,EACD,SAAU,CACR,UAAW,CACT,MAAOA,EACR,EACD,MAAO,CACL,MAAOA,EACR,EACD,aAAc,CACZ,MAAOA,GACP,YAAaA,EACnB,CACG,EACD,SAAU,CACR,UAAW,CACT,MAAO1pE,EACR,EACD,SAAU,CACR,MAAO0pE,EACR,EACD,WAAY,CACV,MAAOA,EACR,EACD,UAAW,CACT,MAAOA,EACb,CACG,EACD,SAAUC,GAAY,EACtB,QAASA,GAAY,EACrB,UAAWA,GAAY,EACvB,aAAcA,GAAY,EAC1B,KAAM,CACJ,OAAQ,QACT,EACD,MAAO,CACL,MAAOvE,EACR,EACD,MAAO,CACL,MAAO,CACL,MAAOsE,EACR,EACD,SAAU,CACR,UAAW,CACT,MAAO,CAAC,CAAC,EAAG,uBAAuB,CAAC,CAC5C,CACK,EACD,UAAW,CACT,MAAOA,EACR,EACD,OAAQ,CACN,MAAO,SACb,CACG,EACD,YAAa,CACX,UAAW,CACT,MAAO,UACP,OAAQ,UACR,YAAa,UACb,aAAc,SAGpB,CACA,CACA,EACAhtB,GAAM,aAAa,UAAU,KAAO,GCjKpC,IAAIktB,GAAgC,UAAY,CAC9C,SAASA,GAAmB,CAAA,CAC5B,OAAAA,EAAiB,UAAU,eAAiB,SAAU50F,EAAO,CAC3D,IAAI60F,EAAW,CAAE,EACbC,EAAY,CAAE,EACdC,EAAa,CAAE,EAEnB,GAAIxhE,EAAgBvzB,CAAK,EAAG,CAC1B,IAAIg1F,EAAcr4D,GAAe38B,CAAK,EAEtC60F,EAAS,SAAWG,EAAY,MAAQ,KACxCH,EAAS,QAAUG,EAAY,KAAO,IAC5C,KAES,CAGH,IAAIC,EAAa,CAAC,QAAS,OAAQ,IAAI,EACnCC,EAAa,CACf,KAAM,EACN,UAAW,EACX,SAAU,CACX,EACDlwE,EAAYhlB,EAAO,SAAUlJ,EAAKwB,EAAK,CAErC,QADI68F,EAAW,GACN1/F,EAAI,EAAGA,EAAIw/F,EAAW,OAAQx/F,IAAK,CAC1C,IAAI2/F,EAAaH,EAAWx/F,CAAC,EACzB4/F,EAAY/8F,EAAI,YAAY88F,CAAU,EAC1C,GAAIC,EAAY,GAAKA,IAAc/8F,EAAI,OAAS88F,EAAW,OAAQ,CACjE,IAAI77D,EAAWjhC,EAAI,MAAM,EAAG+8F,CAAS,EAEjC97D,IAAa,SACfs7D,EAAS,SAAWt7D,EACpBs7D,EAASO,EAAW,YAAa,CAAA,EAAIt+F,EACrCq+F,EAAW,GAEzB,CACA,CACYD,EAAW,eAAe58F,CAAG,IAC/Bw8F,EAAUx8F,CAAG,EAAIxB,EACjBq+F,EAAW,IAERA,IACHJ,EAAWz8F,CAAG,EAAIxB,EAE5B,CAAO,CACP,CACI,MAAO,CACL,SAAU+9F,EACV,UAAWC,EACX,WAAYC,CACb,CACF,EACDH,EAAiB,UAAU,OAAS,SAAUr0F,EAAWP,EAAO,CAE9D,IAAIs1F,EAAY,KAAK,UACrB,GAAI,CAACA,EACH,MAAO,GAET,IAAIjlC,EAAWilC,EAAU,SACrBC,EAAcD,EAAU,YACxBt2D,EAAQs2D,EAAU,MAClB17C,EAAO07C,EAAU,KAErB,GAAI,CAACt2D,GAAS,CAAC4a,EACb,MAAO,GAET,IAAIi7C,EAAW70F,EAAM,SACjB80F,EAAY90F,EAAM,UACtB,OAAOw1F,EAAMX,EAAU71D,EAAO,UAAU,GAAKw2D,EAAMX,EAAU71D,EAAO,SAAS,GAAKw2D,EAAMX,EAAU71D,EAAO,QAAS,gBAAgB,GAAKw2D,EAAMX,EAAU71D,EAAO,MAAM,GAAKw2D,EAAMX,EAAU71D,EAAO,IAAI,GAAKw2D,EAAMV,EAAWS,EAAa,MAAM,GAAKC,EAAMV,EAAWS,EAAa,WAAW,GAAKC,EAAMV,EAAWS,EAAa,UAAU,IAAM,CAAC37C,EAAK,uBAAyBA,EAAK,sBAAsBr5C,EAAWP,EAAM,WAAYqwD,EAAUklC,CAAW,GAC1b,SAASC,EAAMx1F,EAAOy1F,EAAM77F,EAAM87F,EAAY,CAC5C,OAAO11F,EAAMpG,CAAI,GAAK,MAAQ67F,EAAKC,GAAc97F,CAAI,IAAMoG,EAAMpG,CAAI,CAC3E,CACG,EACDg7F,EAAiB,UAAU,aAAe,UAAY,CAEpD,KAAK,UAAY,IAClB,EACMA,CACT,EAAG,ECjGCe,GAAuB,CAAC,SAAU,aAAc,eAAgB,cAAc,EAC9EC,GAAeD,GAAqB,OAAO,CAAC,kBAAkB,CAAC,EAE/DE,GAAmB,CACrB,kBAAmB,GAEnB,iBAAkB,GAClB,MAAO,SAAUt7C,EAAangB,EAAS,CACrC,IAAIngC,EAAOsgD,EAAY,QAAS,EAIhC,GAHIA,EAAY,YACdtgD,EAAK,UAAU,aAAcsgD,EAAY,UAAU,EAEjD,CAACA,EAAY,gBACf,OAKF,QAHIu7C,EAAgB,CAAE,EAClBC,EAAkB,CAAE,EACpBC,EAAc,GACTvgG,EAAI,EAAGA,EAAIkgG,GAAqB,OAAQlgG,IAAK,CACpD,IAAIwgG,EAAiBN,GAAqBlgG,CAAC,EACvCqB,EAAMyjD,EAAY,IAAI07C,CAAc,EACpCr7F,EAAW9D,CAAG,GAChBk/F,EAAc,GACdD,EAAgBE,CAAc,EAAIn/F,GAElCg/F,EAAcG,CAAc,EAAIn/F,CAExC,CAOI,GANAg/F,EAAc,OAASA,EAAc,QAAUv7C,EAAY,cAC3DtgD,EAAK,UAAUlB,EAAO,CACpB,WAAYwhD,EAAY,YAAcu7C,EAAc,OACpD,iBAAkBv7C,EAAY,IAAI,kBAAkB,CACrD,EAAEu7C,CAAa,CAAC,EAEb17D,EAAQ,iBAAiBmgB,CAAW,EACtC,OAEF,IAAI27C,EAAgB/8F,GAAK48F,CAAe,EACxC,SAASI,EAASl8F,EAAM0Z,EAAK,CAG3B,QAFI0L,EAAWk7B,EAAY,YAAY5mC,CAAG,EACtCuH,EAASq/B,EAAY,cAAc5mC,CAAG,EACjCle,EAAI,EAAGA,EAAIygG,EAAc,OAAQzgG,IAAK,CAC7C,IAAIwgG,EAAiBC,EAAczgG,CAAC,EACpCwE,EAAK,cAAc0Z,EAAKsiF,EAAgBF,EAAgBE,CAAc,EAAE52E,EAAUnE,CAAM,CAAC,CACjG,CACA,CACI,MAAO,CACL,SAAU86E,EAAcG,EAAW,IACpC,CACL,CACA,EACIC,GAAiB,CACnB,kBAAmB,GAEnB,iBAAkB,GAClB,MAAO,SAAU77C,EAAangB,EAAS,CAKrC,GAJI,CAACmgB,EAAY,iBAIbngB,EAAQ,iBAAiBmgB,CAAW,EACtC,OAEF,IAAItgD,EAAOsgD,EAAY,QAAS,EAChC,SAAS47C,EAASl8F,EAAM0Z,EAAK,CAE3B,QADI6oC,EAAYviD,EAAK,aAAa0Z,CAAG,EAC5Ble,EAAI,EAAGA,EAAImgG,GAAa,OAAQngG,IAAK,CAC5C,IAAIwgG,EAAiBL,GAAangG,CAAC,EAC/BqB,EAAM0lD,EAAU,WAAWy5C,EAAgB,EAAI,EAC/Cn/F,GAAO,MACTmD,EAAK,cAAc0Z,EAAKsiF,EAAgBn/F,CAAG,CAErD,CACA,CACI,MAAO,CACL,SAAUmD,EAAK,cAAgBk8F,EAAW,IAC3C,CACL,CACA,EC/EgB,SAAAE,GAAsBp8F,EAAM+gD,EAAW1iD,EAAK,CAC1D,OAAQA,EAAK,CACX,IAAK,QACH,IAAIvD,EAAQkF,EAAK,cAAc+gD,EAAW,OAAO,EACjD,OAAOjmD,EAAMkF,EAAK,UAAU,UAAU,CAAC,EACzC,IAAK,UACH,OAAOA,EAAK,cAAc+gD,EAAW,OAAO,EAAE,QAChD,IAAK,SACL,IAAK,aACL,IAAK,QACI,OAAA/gD,EAAK,cAAc+gD,EAAW1iD,CAAG,CAIxC,CAEN,CACgB,SAAAg+F,GAAkBr8F,EAAM3B,EAAK,CAC3C,OAAQA,EAAK,CACX,IAAK,QACC,IAAAvD,EAAQkF,EAAK,UAAU,OAAO,EAClC,OAAOlF,EAAMkF,EAAK,UAAU,UAAU,CAAC,EACzC,IAAK,UACI,OAAAA,EAAK,UAAU,OAAO,EAAE,QACjC,IAAK,SACL,IAAK,aACL,IAAK,QACI,OAAAA,EAAK,UAAU3B,CAAG,CAIzB,CAEN,CCHA,SAASi+F,GAA+Bt7F,EAAMu7F,EAAcC,EAAOr8D,EAASL,EAAS,CACnF,IAAI28D,EAAkBz7F,EAAOu7F,EACxBC,EAAM,SAASC,CAAe,GAIjCt8D,EAAQ,cAAc,CACpB,SAAU,SACV,QAAS,KACX,EAAG,SAAUmgB,EAAa,CAIxB,QAHInF,EAAcmF,EAAY,YAC1BgxC,EAAchxC,EAAY,OAAO,YACjCo8C,EAAW58D,EAAQ,SACdtkC,EAAI,EAAGA,EAAIkhG,EAAS,OAAQlhG,IACnC,GAAIkhG,EAASlhG,CAAC,EAAE,cAAgB2/C,EAAa,CACvC,IAAAn7C,EAAOsgD,EAAY,QAAQ,EAC3BS,EAAYlhB,GAAe7/B,EAAM8/B,EAAQ,iBAAiB,EAC9D08D,EAAM,QAAQC,EAAiB,CAC7B,KAAMA,EACN,SAAUn8C,EAAY,GACtB,KAAM1hD,EAAQmiD,CAAS,EAAI/gD,EAAK,QAAQ+gD,EAAU,CAAC,CAAC,EAAI/gD,EAAK,QAAQ+gD,CAAS,EAC9E,SAAUlgD,EAASywF,CAAW,EAAIA,EAAcxyF,EAAO,CAAA,EAAIwyF,CAAW,CAAA,CACvE,CAAA,CAEL,CACD,CAEL,CACgB,SAAAqL,GAAyBC,EAAeJ,EAAOl9C,EAAK,CACpDs9C,EAAA,GAAG,gBAAiB,SAAU37E,EAAQ,CAC9C,IAAAkf,EAAUmf,EAAI,SAAS,EACvBr+B,EAAO,aACTq7E,GAA+B,MAAO,gBAAiBE,EAAOr8D,EAASlf,CAAM,EAC7Eq7E,GAA+B,MAAO,gBAAiBE,EAAOr8D,EAASlf,CAAM,GACpEA,EAAO,aAAe,UAC/Bq7E,GAA+B,MAAO,WAAYE,EAAOr8D,EAASlf,CAAM,EACxEq7E,GAA+B,MAAO,WAAYE,EAAOr8D,EAASlf,CAAM,GAC/DA,EAAO,aAAe,aAC/Bq7E,GAA+B,MAAO,aAAcE,EAAOr8D,EAASlf,CAAM,EAC1Eq7E,GAA+B,MAAO,aAAcE,EAAOr8D,EAASlf,CAAM,EAC5E,CACD,CACH,CCxEO,SAAS47E,GAAoBt+F,EAAQyJ,EAAK80F,EAAkB,CAEjE,QADIC,EACGx+F,GACD,EAAAyJ,EAAIzJ,CAAM,IACZw+F,EAAQx+F,EACJu+F,KAINv+F,EAASA,EAAO,cAAgBA,EAAO,OAEzC,OAAOw+F,CACT,CCvDA,IAAIC,GAAgB,KAAK,MAAM,KAAK,OAAM,EAAK,CAAC,EAC5CC,GAAwB,OAAO,OAAO,gBAAmB,WACzDC,GAAW,UAAY,CACvB,SAASA,GAAU,CACf,KAAK,IAAM,cAAgBF,IACnC,CACI,OAAAE,EAAQ,UAAU,IAAM,SAAU7+F,EAAK,CACnC,OAAO,KAAK,OAAOA,CAAG,EAAE,KAAK,GAAG,CACnC,EACD6+F,EAAQ,UAAU,IAAM,SAAU7+F,EAAKgB,EAAO,CAC1C,IAAId,EAAS,KAAK,OAAOF,CAAG,EAC5B,OAAI4+F,GACA,OAAO,eAAe1+F,EAAQ,KAAK,IAAK,CACpC,MAAOc,EACP,WAAY,GACZ,aAAc,EAC9B,CAAa,EAGDd,EAAO,KAAK,GAAG,EAAIc,EAEhB,IACV,EACD69F,EAAQ,UAAU,OAAY,SAAU7+F,EAAK,CACzC,OAAI,KAAK,IAAIA,CAAG,GACZ,OAAO,KAAK,OAAOA,CAAG,EAAE,KAAK,GAAG,EACzB,IAEJ,EACV,EACD6+F,EAAQ,UAAU,IAAM,SAAU7+F,EAAK,CACnC,MAAO,CAAC,CAAC,KAAK,OAAOA,CAAG,EAAE,KAAK,GAAG,CACrC,EACD6+F,EAAQ,UAAU,OAAS,SAAU7+F,EAAK,CACtC,GAAIA,IAAQ,OAAOA,CAAG,EAClB,MAAM,UAAU,4CAA4C,EAEhE,OAAOA,CACV,EACM6+F,CACX,ICaIC,GAAWC,GAAa,OAAO,CACjC,KAAM,WACN,MAAO,CACL,GAAI,EACJ,GAAI,EACJ,MAAO,EACP,OAAQ,CACT,EACD,UAAW,SAAUntD,EAAM6E,EAAO,CAChC,IAAIhF,EAAKgF,EAAM,GACX/E,EAAK+E,EAAM,GACX14C,EAAQ04C,EAAM,MAAQ,EACtBjlC,EAASilC,EAAM,OAAS,EAC5B7E,EAAK,OAAOH,EAAIC,EAAKlgC,CAAM,EAC3BogC,EAAK,OAAOH,EAAK1zC,EAAO2zC,EAAKlgC,CAAM,EACnCogC,EAAK,OAAOH,EAAK1zC,EAAO2zC,EAAKlgC,CAAM,EACnCogC,EAAK,UAAW,CACpB,CACA,CAAC,EAKGotD,GAAUD,GAAa,OAAO,CAChC,KAAM,UACN,MAAO,CACL,GAAI,EACJ,GAAI,EACJ,MAAO,EACP,OAAQ,CACT,EACD,UAAW,SAAUntD,EAAM6E,EAAO,CAChC,IAAIhF,EAAKgF,EAAM,GACX/E,EAAK+E,EAAM,GACX14C,EAAQ04C,EAAM,MAAQ,EACtBjlC,EAASilC,EAAM,OAAS,EAC5B7E,EAAK,OAAOH,EAAIC,EAAKlgC,CAAM,EAC3BogC,EAAK,OAAOH,EAAK1zC,EAAO2zC,CAAE,EAC1BE,EAAK,OAAOH,EAAIC,EAAKlgC,CAAM,EAC3BogC,EAAK,OAAOH,EAAK1zC,EAAO2zC,CAAE,EAC1BE,EAAK,UAAW,CACpB,CACA,CAAC,EAKGqtD,GAAMF,GAAa,OAAO,CAC5B,KAAM,MACN,MAAO,CAEL,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CACT,EACD,UAAW,SAAUntD,EAAM6E,EAAO,CAChC,IAAIhxC,EAAIgxC,EAAM,EACV/wC,EAAI+wC,EAAM,EACVhuB,EAAIguB,EAAM,MAAQ,EAAI,EAEtB90B,EAAI,KAAK,IAAI8G,EAAGguB,EAAM,MAAM,EAC5B9gC,EAAI8S,EAAI,EAERrhB,EAAKuO,EAAIA,GAAKgM,EAAIhM,GAClB+7B,EAAKhsC,EAAIic,EAAIhM,EAAIvO,EACjBkpC,EAAQ,KAAK,KAAKlpC,EAAKuO,CAAC,EAExBxO,EAAK,KAAK,IAAImpC,CAAK,EAAI36B,EACvBupF,EAAO,KAAK,IAAI5uD,CAAK,EACrB6uD,EAAO,KAAK,IAAI7uD,CAAK,EACrB8uD,EAAQzpF,EAAI,GACZ0pF,EAAS1pF,EAAI,GACjBi8B,EAAK,OAAOnsC,EAAI0B,EAAIuqC,EAAKtqC,CAAE,EAC3BwqC,EAAK,IAAInsC,EAAGisC,EAAI/7B,EAAG,KAAK,GAAK26B,EAAO,KAAK,GAAK,EAAIA,CAAK,EACvDsB,EAAK,cAAcnsC,EAAI0B,EAAK+3F,EAAOE,EAAO1tD,EAAKtqC,EAAK+3F,EAAOC,EAAO35F,EAAGC,EAAI25F,EAAQ55F,EAAGC,CAAC,EACrFksC,EAAK,cAAcnsC,EAAGC,EAAI25F,EAAQ55F,EAAI0B,EAAK+3F,EAAOE,EAAO1tD,EAAKtqC,EAAK+3F,EAAOC,EAAO35F,EAAI0B,EAAIuqC,EAAKtqC,CAAE,EAChGwqC,EAAK,UAAW,CACpB,CACA,CAAC,EAKG0tD,GAAQP,GAAa,OAAO,CAC9B,KAAM,QACN,MAAO,CACL,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CACT,EACD,UAAW,SAAUz2F,EAAKmuC,EAAO,CAC/B,IAAIjlC,EAASilC,EAAM,OACf14C,EAAQ04C,EAAM,MACdhxC,EAAIgxC,EAAM,EACV/wC,EAAI+wC,EAAM,EACVtvC,EAAKpJ,EAAQ,EAAI,EACrBuK,EAAI,OAAO7C,EAAGC,CAAC,EACf4C,EAAI,OAAO7C,EAAI0B,EAAIzB,EAAI8L,CAAM,EAC7BlJ,EAAI,OAAO7C,EAAGC,EAAI8L,EAAS,EAAI,CAAC,EAChClJ,EAAI,OAAO7C,EAAI0B,EAAIzB,EAAI8L,CAAM,EAC7BlJ,EAAI,OAAO7C,EAAGC,CAAC,EACf4C,EAAI,UAAW,CACnB,CACA,CAAC,EAKGi3F,GAAc,CAChB,KAAMC,GACN,KAAM5G,GACN,UAAWA,GACX,OAAQA,GACR,OAAQ6G,GACR,QAAST,GACT,IAAKC,GACL,MAAOK,GACP,SAAUR,EACZ,EACIY,GAAoB,CACtB,KAAM,SAAUj6F,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CACjCA,EAAM,GAAKhxC,EACXgxC,EAAM,GAAK/wC,EAAIic,EAAI,EACnB80B,EAAM,GAAKhxC,EAAIgjB,EACfguB,EAAM,GAAK/wC,EAAIic,EAAI,CACpB,EACD,KAAM,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CACjCA,EAAM,EAAIhxC,EACVgxC,EAAM,EAAI/wC,EACV+wC,EAAM,MAAQhuB,EACdguB,EAAM,OAAS90B,CAChB,EACD,UAAW,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CACtCA,EAAM,EAAIhxC,EACVgxC,EAAM,EAAI/wC,EACV+wC,EAAM,MAAQhuB,EACdguB,EAAM,OAAS90B,EACf80B,EAAM,EAAI,KAAK,IAAIhuB,EAAG9G,CAAC,EAAI,CAC5B,EACD,OAAQ,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CACnC,IAAIp5C,EAAO,KAAK,IAAIorB,EAAG9G,CAAC,EACxB80B,EAAM,EAAIhxC,EACVgxC,EAAM,EAAI/wC,EACV+wC,EAAM,MAAQp5C,EACdo5C,EAAM,OAASp5C,CAChB,EACD,OAAQ,SAAUoI,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CAEnCA,EAAM,GAAKhxC,EAAIgjB,EAAI,EACnBguB,EAAM,GAAK/wC,EAAIic,EAAI,EACnB80B,EAAM,EAAI,KAAK,IAAIhuB,EAAG9G,CAAC,EAAI,CAC5B,EACD,QAAS,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CACpCA,EAAM,GAAKhxC,EAAIgjB,EAAI,EACnBguB,EAAM,GAAK/wC,EAAIic,EAAI,EACnB80B,EAAM,MAAQhuB,EACdguB,EAAM,OAAS90B,CAChB,EACD,IAAK,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CAChCA,EAAM,EAAIhxC,EAAIgjB,EAAI,EAClBguB,EAAM,EAAI/wC,EAAIic,EAAI,EAClB80B,EAAM,MAAQhuB,EACdguB,EAAM,OAAS90B,CAChB,EACD,MAAO,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CAClCA,EAAM,EAAIhxC,EAAIgjB,EAAI,EAClBguB,EAAM,EAAI/wC,EAAIic,EAAI,EAClB80B,EAAM,MAAQhuB,EACdguB,EAAM,OAAS90B,CAChB,EACD,SAAU,SAAUlc,EAAGC,EAAG+iB,EAAG9G,EAAG80B,EAAO,CACrCA,EAAM,GAAKhxC,EAAIgjB,EAAI,EACnBguB,EAAM,GAAK/wC,EAAIic,EAAI,EACnB80B,EAAM,MAAQhuB,EACdguB,EAAM,OAAS90B,CACnB,CACA,EACWg+E,GAAqB,CAAE,EAClC/9F,EAAK29F,GAAa,SAAUz/F,EAAMwN,EAAM,CACtCqyF,GAAmBryF,CAAI,EAAI,IAAIxN,CACjC,CAAC,EACD,IAAI8/F,GAAYb,GAAa,OAAO,CAClC,KAAM,SACN,MAAO,CACL,WAAY,GACZ,EAAG,EACH,EAAG,EACH,MAAO,EACP,OAAQ,CACT,EACD,sBAAuB,SAAUl5F,EAAK8zB,EAAQhuB,EAAM,CAClD,IAAI9N,EAAMozB,GAAsBprB,EAAK8zB,EAAQhuB,CAAI,EAC7C8qC,EAAQ,KAAK,MACjB,OAAIA,GAASA,EAAM,aAAe,OAAS9c,EAAO,WAAa,WAC7D97B,EAAI,EAAI8N,EAAK,EAAIA,EAAK,OAAS,IAE1B9N,CACR,EACD,UAAW,SAAUyK,EAAKmuC,EAAOopD,EAAU,CACzC,IAAIC,EAAarpD,EAAM,WACvB,GAAIqpD,IAAe,OAAQ,CACzB,IAAIC,EAAcJ,GAAmBG,CAAU,EAC1CC,IAEHD,EAAa,OACbC,EAAcJ,GAAmBG,CAAU,GAE7CJ,GAAkBI,CAAU,EAAErpD,EAAM,EAAGA,EAAM,EAAGA,EAAM,MAAOA,EAAM,OAAQspD,EAAY,KAAK,EAC5FA,EAAY,UAAUz3F,EAAKy3F,EAAY,MAAOF,CAAQ,CAC5D,CACA,CACA,CAAC,EAED,SAASG,GAAmB98E,EAAO2qD,EAAY,CAC7C,GAAI,KAAK,OAAS,QAAS,CACzB,IAAIoyB,EAAc,KAAK,MACnB,KAAK,gBACPA,EAAY,OAAS/8E,EACrB+8E,EAAY,KAAOpyB,GAAc,OAEjCoyB,EAAY,UAAY,GACf,KAAK,MAAM,aAAe,OACnCA,EAAY,OAAS/8E,EAErB+8E,EAAY,KAAO/8E,EAErB,KAAK,WAAY,CACrB,CACA,CAIO,SAASg9E,GAAaJ,EAAYr6F,EAAGC,EAAG+iB,EAAG9G,EAAGuB,EAErDi9E,EAAY,CAEV,IAAIC,EAAUN,EAAW,QAAQ,OAAO,IAAM,EAC1CM,IACFN,EAAaA,EAAW,OAAO,EAAG,CAAC,EAAE,cAAgBA,EAAW,OAAO,CAAC,GAE1E,IAAIO,EACJ,OAAIP,EAAW,QAAQ,UAAU,IAAM,EACrCO,EAAaC,GAAkBR,EAAW,MAAM,CAAC,EAAG,IAAIvuF,GAAa9L,EAAGC,EAAG+iB,EAAG9G,CAAC,EAAGw+E,EAAa,SAAW,OAAO,EACxGL,EAAW,QAAQ,SAAS,IAAM,EAC3CO,EAAaE,GAAiBT,EAAW,MAAM,CAAC,EAAG,CAAA,EAAI,IAAIvuF,GAAa9L,EAAGC,EAAG+iB,EAAG9G,CAAC,EAAGw+E,EAAa,SAAW,OAAO,EAEpHE,EAAa,IAAIT,GAAU,CACzB,MAAO,CACL,WAAYE,EACZ,EAAGr6F,EACH,EAAGC,EACH,MAAO+iB,EACP,OAAQ9G,CAChB,CACA,CAAK,EAEH0+E,EAAW,eAAiBD,EAE5BC,EAAW,SAAWL,GAClB98E,GACFm9E,EAAW,SAASn9E,CAAK,EAEpBm9E,CACT,CACO,SAASG,GAAoBC,EAAY,CAC9C,OAAKlgG,EAAQkgG,CAAU,IACrBA,EAAa,CAAC,CAACA,EAAY,CAACA,CAAU,GAEjC,CAACA,EAAW,CAAC,GAAK,EAAGA,EAAW,CAAC,GAAK,CAAC,CAChD,CACO,SAASC,GAAsBC,EAAcF,EAAY,CAC9D,GAAIE,GAAgB,KAGpB,OAAKpgG,EAAQogG,CAAY,IACvBA,EAAe,CAACA,EAAcA,CAAY,GAErC,CAAC5vE,GAAa4vE,EAAa,CAAC,EAAGF,EAAW,CAAC,CAAC,GAAK,EAAG1vE,GAAa9tB,EAAU09F,EAAa,CAAC,EAAGA,EAAa,CAAC,CAAC,EAAGF,EAAW,CAAC,CAAC,GAAK,CAAC,CAC1I,CC7UA,SAASG,GAAU78B,EAAK,CACpB,OAAO,SAASA,CAAG,CACvB,CACO,SAAS88B,GAAqBv4F,EAAK/J,EAAKoN,EAAM,CACjD,IAAIlG,EAAIlH,EAAI,GAAK,KAAO,EAAIA,EAAI,EAC5B2f,EAAK3f,EAAI,IAAM,KAAO,EAAIA,EAAI,GAC9BmH,EAAInH,EAAI,GAAK,KAAO,EAAIA,EAAI,EAC5B4f,EAAK5f,EAAI,IAAM,KAAO,EAAIA,EAAI,GAC7BA,EAAI,SACLkH,EAAIA,EAAIkG,EAAK,MAAQA,EAAK,EAC1BuS,EAAKA,EAAKvS,EAAK,MAAQA,EAAK,EAC5BjG,EAAIA,EAAIiG,EAAK,OAASA,EAAK,EAC3BwS,EAAKA,EAAKxS,EAAK,OAASA,EAAK,GAEjClG,EAAIm7F,GAAUn7F,CAAC,EAAIA,EAAI,EACvByY,EAAK0iF,GAAU1iF,CAAE,EAAIA,EAAK,EAC1BxY,EAAIk7F,GAAUl7F,CAAC,EAAIA,EAAI,EACvByY,EAAKyiF,GAAUziF,CAAE,EAAIA,EAAK,EAC1B,IAAI2iF,EAAiBx4F,EAAI,qBAAqB7C,EAAGC,EAAGwY,EAAIC,CAAE,EAC1D,OAAO2iF,CACX,CACO,SAASC,GAAqBz4F,EAAK/J,EAAKoN,EAAM,CACjD,IAAI5N,EAAQ4N,EAAK,MACb6F,EAAS7F,EAAK,OACd/E,EAAM,KAAK,IAAI7I,EAAOyT,CAAM,EAC5B/L,EAAIlH,EAAI,GAAK,KAAO,GAAMA,EAAI,EAC9BmH,EAAInH,EAAI,GAAK,KAAO,GAAMA,EAAI,EAC9BoX,EAAIpX,EAAI,GAAK,KAAO,GAAMA,EAAI,EAC7BA,EAAI,SACLkH,EAAIA,EAAI1H,EAAQ4N,EAAK,EACrBjG,EAAIA,EAAI8L,EAAS7F,EAAK,EACtBgK,EAAIA,EAAI/O,GAEZnB,EAAIm7F,GAAUn7F,CAAC,EAAIA,EAAI,GACvBC,EAAIk7F,GAAUl7F,CAAC,EAAIA,EAAI,GACvBiQ,EAAIA,GAAK,GAAKirF,GAAUjrF,CAAC,EAAIA,EAAI,GACjC,IAAImrF,EAAiBx4F,EAAI,qBAAqB7C,EAAGC,EAAG,EAAGD,EAAGC,EAAGiQ,CAAC,EAC9D,OAAOmrF,CACX,CACO,SAASE,GAAkB14F,EAAK/J,EAAKoN,EAAM,CAK9C,QAJIm1F,EAAiBviG,EAAI,OAAS,SAC5BwiG,GAAqBz4F,EAAK/J,EAAKoN,CAAI,EACnCk1F,GAAqBv4F,EAAK/J,EAAKoN,CAAI,EACrCmtB,EAAav6B,EAAI,WACZpB,EAAI,EAAGA,EAAI27B,EAAW,OAAQ37B,IACnC2jG,EAAe,aAAahoE,EAAW37B,CAAC,EAAE,OAAQ27B,EAAW37B,CAAC,EAAE,KAAK,EAEzE,OAAO2jG,CACX,CACO,SAASG,GAAkBtmF,EAAWumF,EAAe,CACxD,GAAIvmF,IAAcumF,GAAkB,CAACvmF,GAAa,CAACumF,EAC/C,MAAO,GAEX,GAAI,CAACvmF,GAAa,CAACumF,GAAkBvmF,EAAU,SAAWumF,EAAc,OACpE,MAAO,GAEX,QAAS/jG,EAAI,EAAGA,EAAIwd,EAAU,OAAQxd,IAClC,GAAIwd,EAAUxd,CAAC,IAAM+jG,EAAc/jG,CAAC,EAChC,MAAO,GAGf,MAAO,EACX,CACA,SAASgkG,GAAW3iG,EAAK,CACrB,OAAO,SAASA,EAAK,EAAE,CAC3B,CACO,SAAS4iG,GAAQxzF,EAAMyzF,EAAOlhF,EAAM,CACvC,IAAImhF,EAAK,CAAC,QAAS,QAAQ,EAAED,CAAK,EAC9BE,EAAM,CAAC,cAAe,cAAc,EAAEF,CAAK,EAC3CG,EAAM,CAAC,cAAe,YAAY,EAAEH,CAAK,EACzCI,EAAM,CAAC,eAAgB,eAAe,EAAEJ,CAAK,EACjD,GAAIlhF,EAAKmhF,CAAE,GAAK,MAAQnhF,EAAKmhF,CAAE,IAAM,OACjC,OAAO,WAAWnhF,EAAKmhF,CAAE,CAAC,EAE9B,IAAIn2F,EAAM,SAAS,YAAY,iBAAiByC,CAAI,EACpD,OAASA,EAAK2zF,CAAG,GAAKJ,GAAWh2F,EAAIm2F,CAAE,CAAC,GAAKH,GAAWvzF,EAAK,MAAM0zF,CAAE,CAAC,IAC/DH,GAAWh2F,EAAIq2F,CAAG,CAAC,GAAK,IACxBL,GAAWh2F,EAAIs2F,CAAG,CAAC,GAAK,GAAM,CACzC,CC7EO,SAASC,GAAkBC,EAAUp5D,EAAW,CACnD,MAAI,CAACo5D,GAAYA,IAAa,SAAW,EAAEp5D,EAAY,GAC5C,KAEJo5D,IAAa,SACd,CAAC,EAAIp5D,EAAW,EAAIA,CAAS,EAC7Bo5D,IAAa,SACT,CAACp5D,CAAS,EACV7lC,GAASi/F,CAAQ,EACb,CAACA,CAAQ,EAAIphG,EAAQohG,CAAQ,EAAIA,EAAW,IAC9D,CACO,SAASC,GAAYp3F,EAAI,CAC5B,IAAI/N,EAAQ+N,EAAG,MACXq3F,EAAWplG,EAAM,UAAYA,EAAM,UAAY,GAAKilG,GAAkBjlG,EAAM,SAAUA,EAAM,SAAS,EACrGqlG,EAAiBrlG,EAAM,eAC3B,GAAIolG,EAAU,CACV,IAAIE,EAAetlG,EAAM,eAAiB+N,EAAG,aAAgBA,EAAG,aAAY,EAAK,EAC7Eu3F,GAAeA,IAAgB,IAC/BF,EAAW3kG,EAAI2kG,EAAU,SAAUpgB,EAAQ,CACvC,OAAOA,EAASsgB,CAChC,CAAa,EACDD,GAAkBC,EAE9B,CACI,MAAO,CAACF,EAAUC,CAAc,CACpC,CCfA,IAAIE,GAAmB,IAAI3wD,GAAU,EAAI,EACzC,SAAS4wD,GAAexlG,EAAO,CAC3B,IAAIs5C,EAASt5C,EAAM,OACnB,MAAO,EAAEs5C,GAAU,MAAQA,IAAW,QAAU,EAAEt5C,EAAM,UAAY,GACxE,CACA,SAASylG,GAAuBC,EAAc,CAC1C,OAAO,OAAOA,GAAiB,UAAYA,IAAiB,MAChE,CACA,SAASC,GAAa3lG,EAAO,CACzB,IAAIu5C,EAAOv5C,EAAM,KACjB,OAAOu5C,GAAQ,MAAQA,IAAS,MACpC,CACA,SAASqsD,GAAW/5F,EAAK7L,EAAO,CAC5B,GAAIA,EAAM,aAAe,MAAQA,EAAM,cAAgB,EAAG,CACtD,IAAI6lG,EAAsBh6F,EAAI,YAC9BA,EAAI,YAAc7L,EAAM,YAAcA,EAAM,QAC5C6L,EAAI,KAAM,EACVA,EAAI,YAAcg6F,CAC1B,MAEQh6F,EAAI,KAAM,CAElB,CACA,SAASi6F,GAAaj6F,EAAK7L,EAAO,CAC9B,GAAIA,EAAM,eAAiB,MAAQA,EAAM,gBAAkB,EAAG,CAC1D,IAAI6lG,EAAsBh6F,EAAI,YAC9BA,EAAI,YAAc7L,EAAM,cAAgBA,EAAM,QAC9C6L,EAAI,OAAQ,EACZA,EAAI,YAAcg6F,CAC1B,MAEQh6F,EAAI,OAAQ,CAEpB,CACO,SAASk6F,GAAoBl6F,EAAKm6F,EAASj4F,EAAI,CAClD,IAAIpM,EAAQgpC,GAAoBq7D,EAAQ,MAAOA,EAAQ,QAASj4F,CAAE,EAClE,GAAI+8B,GAAanpC,CAAK,EAAG,CACrB,IAAIskG,EAAgBp6F,EAAI,cAAclK,EAAOqkG,EAAQ,QAAU,QAAQ,EACvE,GAAI,OAAO,WAAc,YAClBC,GACAA,EAAc,aAAc,CAC/B,IAAIC,EAAS,IAAI,UACjBA,EAAO,cAAeF,EAAQ,GAAK,EAAKA,EAAQ,GAAK,CAAG,EACxDE,EAAO,WAAW,EAAG,GAAIF,EAAQ,UAAY,GAAKl9F,EAAgB,EAClEo9F,EAAO,UAAWF,EAAQ,QAAU,EAAKA,EAAQ,QAAU,CAAG,EAC9DC,EAAc,aAAaC,CAAM,CAC7C,CACQ,OAAOD,CACf,CACA,CACA,SAASE,GAAUt6F,EAAKkC,EAAI/N,EAAOq5C,EAAS,CACxC,IAAI9T,EACA6gE,EAAYZ,GAAexlG,CAAK,EAChCqmG,EAAUV,GAAa3lG,CAAK,EAC5BsmG,EAAgBtmG,EAAM,cACtBumG,EAAaD,EAAgB,EAC7BE,EAAY,CAACz4F,EAAG,MACf,CAACA,EAAG,QAAUw4F,IAAeC,GAC9Bz4F,EAAG,gBAAiB,EAExB,IAAIonC,EAAOpnC,EAAG,MAAQw3F,GAClBkB,EAAY14F,EAAG,QACnB,GAAI,CAACsrC,EAAS,CACV,IAAIE,EAAOv5C,EAAM,KACbs5C,EAASt5C,EAAM,OACf0mG,EAAkBL,GAAW,CAAC,CAAC9sD,EAAK,WACpCotD,EAAoBP,GAAa,CAAC,CAAC9sD,EAAO,WAC1CstD,EAAiBP,GAAW,CAAC,CAAC9sD,EAAK,MACnCstD,EAAmBT,GAAa,CAAC,CAAC9sD,EAAO,MACzCwtD,EAAe,OACfC,EAAiB,OACjBC,EAAc,OACdC,EAAgB,OAChB/3F,EAAO,QACPw3F,GAAmBC,KACnBz3F,EAAOnB,EAAG,gBAAiB,GAE3B24F,IACAI,EAAeL,EACTlC,GAAkB14F,EAAK0tC,EAAMrqC,CAAI,EACjCnB,EAAG,qBACTA,EAAG,qBAAuB+4F,GAE1BH,IACAI,EAAiBN,EACXlC,GAAkB14F,EAAKytC,EAAQpqC,CAAI,EACnCnB,EAAG,uBACTA,EAAG,uBAAyBg5F,GAE5BH,IACAI,EAAeP,GAAa,CAAC14F,EAAG,oBAC1Bg4F,GAAoBl6F,EAAK0tC,EAAMxrC,CAAE,EACjCA,EAAG,oBACTA,EAAG,oBAAsBi5F,GAEzBH,IACAI,EAAiBR,GAAa,CAAC14F,EAAG,sBAC5Bg4F,GAAoBl6F,EAAKytC,EAAQvrC,CAAE,EACnCA,EAAG,sBACTA,EAAG,sBAAwBi5F,GAE3BN,EACA76F,EAAI,UAAYi7F,EAEXF,IACDI,EACAn7F,EAAI,UAAYm7F,EAGhBX,EAAU,IAGdM,EACA96F,EAAI,YAAck7F,EAEbF,IACDI,EACAp7F,EAAI,YAAco7F,EAGlBb,EAAY,GAG5B,CACI,IAAI38F,EAAQsE,EAAG,eAAgB,EAC/BonC,EAAK,SAAS1rC,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGsE,EAAG,sBAAsB,EAC3D,IAAIq3F,EACAC,EACAx5F,EAAI,aAAe7L,EAAM,WACzBulC,EAAK4/D,GAAYp3F,CAAE,EAAGq3F,EAAW7/D,EAAG,CAAC,EAAG8/D,EAAiB9/D,EAAG,CAAC,GAEjE,IAAI2hE,EAAe,IACfV,GAAcC,EAAYjpF,MAC1B23B,EAAK,OAAOtpC,EAAI,GAAG,EACf06F,EACApxD,EAAK,WAAW,IAAI,GAGpBA,EAAK,WAAWtpC,CAAG,EACnBq7F,EAAe,IAEnB/xD,EAAK,MAAO,EACZpnC,EAAG,UAAUonC,EAAMpnC,EAAG,MAAOsrC,CAAO,EACpClE,EAAK,SAAU,EACfpnC,EAAG,YAAa,GAEhBm5F,GACA/xD,EAAK,YAAYtpC,EAAK06F,EAAaD,EAAgB,CAAC,EAEpDlB,IACAv5F,EAAI,YAAYu5F,CAAQ,EACxBv5F,EAAI,eAAiBw5F,GAEpBhsD,IACGr5C,EAAM,aACFomG,GACAN,GAAaj6F,EAAK7L,CAAK,EAEvBqmG,GACAT,GAAW/5F,EAAK7L,CAAK,IAIrBqmG,GACAT,GAAW/5F,EAAK7L,CAAK,EAErBomG,GACAN,GAAaj6F,EAAK7L,CAAK,IAI/BolG,GACAv5F,EAAI,YAAY,EAAE,CAE1B,CACA,SAASs7F,GAAWt7F,EAAKkC,EAAI/N,EAAO,CAChC,IAAI2B,EAAQoM,EAAG,QAAU48B,GAAoB3qC,EAAM,MAAO+N,EAAG,QAASA,EAAIA,EAAG,MAAM,EACnF,GAAI,GAACpM,GAAS,CAACmpC,GAAanpC,CAAK,GAGjC,KAAIqH,EAAIhJ,EAAM,GAAK,EACfiJ,EAAIjJ,EAAM,GAAK,EACfsB,EAAQyM,EAAG,SAAU,EACrBgH,EAAShH,EAAG,UAAW,EACvB4oD,EAASh1D,EAAM,MAAQA,EAAM,OAWjC,GAVIL,GAAS,MAAQyT,GAAU,KAC3BzT,EAAQyT,EAAS4hD,EAEZ5hD,GAAU,MAAQzT,GAAS,KAChCyT,EAASzT,EAAQq1D,EAEZr1D,GAAS,MAAQyT,GAAU,OAChCzT,EAAQK,EAAM,MACdoT,EAASpT,EAAM,QAEf3B,EAAM,QAAUA,EAAM,QAAS,CAC/B,IAAIgV,EAAKhV,EAAM,IAAM,EACjBiV,EAAKjV,EAAM,IAAM,EACrB6L,EAAI,UAAUlK,EAAOqT,EAAIC,EAAIjV,EAAM,OAAQA,EAAM,QAASgJ,EAAGC,EAAG3H,EAAOyT,CAAM,CACrF,SACa/U,EAAM,IAAMA,EAAM,GAAI,CAC3B,IAAIgV,EAAKhV,EAAM,GACXiV,EAAKjV,EAAM,GACXonG,EAAS9lG,EAAQ0T,EACjBqyF,EAAUtyF,EAASE,EACvBpJ,EAAI,UAAUlK,EAAOqT,EAAIC,EAAImyF,EAAQC,EAASr+F,EAAGC,EAAG3H,EAAOyT,CAAM,CACzE,MAEQlJ,EAAI,UAAUlK,EAAOqH,EAAGC,EAAG3H,EAAOyT,CAAM,EAEhD,CACA,SAASuyF,GAAUz7F,EAAKkC,EAAI/N,EAAO,CAC/B,IAAIulC,EACAtkC,EAAOjB,EAAM,KAEjB,GADAiB,GAAQ,OAASA,GAAQ,IACrBA,EAAM,CACN4K,EAAI,KAAO7L,EAAM,MAAQG,GACzB0L,EAAI,UAAY7L,EAAM,UACtB6L,EAAI,aAAe7L,EAAM,aACzB,IAAIolG,EAAW,OACXC,EAAiB,OACjBx5F,EAAI,aAAe7L,EAAM,WACzBulC,EAAK4/D,GAAYp3F,CAAE,EAAGq3F,EAAW7/D,EAAG,CAAC,EAAG8/D,EAAiB9/D,EAAG,CAAC,GAE7D6/D,IACAv5F,EAAI,YAAYu5F,CAAQ,EACxBv5F,EAAI,eAAiBw5F,GAErBrlG,EAAM,aACFwlG,GAAexlG,CAAK,GACpB6L,EAAI,WAAW5K,EAAMjB,EAAM,EAAGA,EAAM,CAAC,EAErC2lG,GAAa3lG,CAAK,GAClB6L,EAAI,SAAS5K,EAAMjB,EAAM,EAAGA,EAAM,CAAC,IAInC2lG,GAAa3lG,CAAK,GAClB6L,EAAI,SAAS5K,EAAMjB,EAAM,EAAGA,EAAM,CAAC,EAEnCwlG,GAAexlG,CAAK,GACpB6L,EAAI,WAAW5K,EAAMjB,EAAM,EAAGA,EAAM,CAAC,GAGzColG,GACAv5F,EAAI,YAAY,EAAE,CAE9B,CACA,CACA,IAAI07F,GAAsB,CAAC,aAAc,gBAAiB,eAAe,EACrEC,GAAe,CACf,CAAC,UAAW,MAAM,EAAG,CAAC,WAAY,OAAO,EAAG,CAAC,aAAc,EAAE,CACjE,EACA,SAASC,GAAgB57F,EAAK7L,EAAO0nG,EAAWC,EAAat4E,EAAO,CAChE,IAAIu4E,EAAe,GACnB,GAAI,CAACD,IACDD,EAAYA,GAAa,CAAE,EACvB1nG,IAAU0nG,GACV,MAAO,GAGf,GAAIC,GAAe3nG,EAAM,UAAY0nG,EAAU,QAAS,CACpDG,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,GACf,IAAIxpC,EAAU,KAAK,IAAI,KAAK,IAAIp+D,EAAM,QAAS,CAAC,EAAG,CAAC,EACpD6L,EAAI,YAAc,MAAMuyD,CAAO,EAAIztB,GAAqB,QAAUytB,CAC1E,EACQupC,GAAe3nG,EAAM,QAAU0nG,EAAU,SACpCE,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnB/7F,EAAI,yBAA2B7L,EAAM,OAAS2wC,GAAqB,OAEvE,QAASjwC,EAAI,EAAGA,EAAI6mG,GAAoB,OAAQ7mG,IAAK,CACjD,IAAI0pB,EAAWm9E,GAAoB7mG,CAAC,GAChCinG,GAAe3nG,EAAMoqB,CAAQ,IAAMs9E,EAAUt9E,CAAQ,KAChDw9E,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnB/7F,EAAIue,CAAQ,EAAIve,EAAI,KAAO7L,EAAMoqB,CAAQ,GAAK,GAE1D,CACI,OAAIu9E,GAAe3nG,EAAM,cAAgB0nG,EAAU,eAC1CE,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnB/7F,EAAI,YAAc7L,EAAM,aAAe2wC,GAAqB,aAEzDi3D,CACX,CACA,SAASE,GAA2Bj8F,EAAKkC,EAAIg6F,EAAQJ,EAAat4E,EAAO,CACrE,IAAIrvB,EAAQg7F,GAASjtF,EAAIshB,EAAM,OAAO,EAClCq4E,EAAYC,EACV,KACCI,GAAU/M,GAAS+M,EAAQ14E,EAAM,OAAO,GAAK,CAAA,EACpD,GAAIrvB,IAAU0nG,EACV,MAAO,GAEX,IAAIE,EAAeH,GAAgB57F,EAAK7L,EAAO0nG,EAAWC,EAAat4E,CAAK,EAsB5E,IArBIs4E,GAAe3nG,EAAM,OAAS0nG,EAAU,QACnCE,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnBnC,GAAuBzlG,EAAM,IAAI,IAAM6L,EAAI,UAAY7L,EAAM,QAE7D2nG,GAAe3nG,EAAM,SAAW0nG,EAAU,UACrCE,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnBnC,GAAuBzlG,EAAM,MAAM,IAAM6L,EAAI,YAAc7L,EAAM,UAEjE2nG,GAAe3nG,EAAM,UAAY0nG,EAAU,WACtCE,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnB/7F,EAAI,YAAc7L,EAAM,SAAW,KAAO,EAAIA,EAAM,SAEpD+N,EAAG,YAAa,CAChB,IAAI+9B,EAAY9rC,EAAM,UAClBgoG,EAAel8D,GAAc9rC,EAAM,eAAiB+N,EAAG,aAAgBA,EAAG,aAAc,EAAG,GAC3FlC,EAAI,YAAcm8F,IACbJ,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnB/7F,EAAI,UAAYm8F,EAE5B,CACI,QAAStnG,EAAI,EAAGA,EAAI8mG,GAAa,OAAQ9mG,IAAK,CAC1C,IAAImE,EAAO2iG,GAAa9mG,CAAC,EACrB0pB,EAAWvlB,EAAK,CAAC,GACjB8iG,GAAe3nG,EAAMoqB,CAAQ,IAAMs9E,EAAUt9E,CAAQ,KAChDw9E,IACDC,GAAeh8F,EAAKwjB,CAAK,EACzBu4E,EAAe,IAEnB/7F,EAAIue,CAAQ,EAAIpqB,EAAMoqB,CAAQ,GAAKvlB,EAAK,CAAC,EAErD,CACI,OAAO+iG,CACX,CACA,SAASK,GAAep8F,EAAKkC,EAAIg6F,EAAQJ,EAAat4E,EAAO,CACzD,OAAOo4E,GAAgB57F,EAAKmvF,GAASjtF,EAAIshB,EAAM,OAAO,EAAG04E,GAAU/M,GAAS+M,EAAQ14E,EAAM,OAAO,EAAGs4E,EAAat4E,CAAK,CAC1H,CACA,SAAS64E,GAAoBr8F,EAAKkC,EAAI,CAClC,IAAI7D,EAAI6D,EAAG,UACPojB,EAAMtlB,EAAI,KAAO,EACjB3B,EACA2B,EAAI,aAAaslB,EAAMjnB,EAAE,CAAC,EAAGinB,EAAMjnB,EAAE,CAAC,EAAGinB,EAAMjnB,EAAE,CAAC,EAAGinB,EAAMjnB,EAAE,CAAC,EAAGinB,EAAMjnB,EAAE,CAAC,EAAGinB,EAAMjnB,EAAE,CAAC,CAAC,EAGvF2B,EAAI,aAAaslB,EAAK,EAAG,EAAGA,EAAK,EAAG,CAAC,CAE7C,CACA,SAASg3E,GAAiBjqF,EAAWrS,EAAKwjB,EAAO,CAE7C,QADI+4E,EAAa,GACR1nG,EAAI,EAAGA,EAAIwd,EAAU,OAAQxd,IAAK,CACvC,IAAImZ,EAAWqE,EAAUxd,CAAC,EAC1B0nG,EAAaA,GAAcvuF,EAAS,WAAY,EAChDquF,GAAoBr8F,EAAKgO,CAAQ,EACjChO,EAAI,UAAW,EACfgO,EAAS,UAAUhO,EAAKgO,EAAS,KAAK,EACtChO,EAAI,KAAM,CAClB,CACIwjB,EAAM,WAAa+4E,CACvB,CACA,SAASC,GAAmBC,EAAIj2F,EAAI,CAChC,OAAIi2F,GAAMj2F,EACCi2F,EAAG,CAAC,IAAMj2F,EAAG,CAAC,GACdi2F,EAAG,CAAC,IAAMj2F,EAAG,CAAC,GACdi2F,EAAG,CAAC,IAAMj2F,EAAG,CAAC,GACdi2F,EAAG,CAAC,IAAMj2F,EAAG,CAAC,GACdi2F,EAAG,CAAC,IAAMj2F,EAAG,CAAC,GACdi2F,EAAG,CAAC,IAAMj2F,EAAG,CAAC,EAEhB,GAACi2F,GAAM,CAACj2F,EAIrB,CACA,IAAIk2F,GAAiB,EACjBC,GAAkB,EAClBC,GAAiB,EACjBC,GAAwB,EAC5B,SAASC,GAAa3oG,EAAO,CACzB,IAAIqmG,EAAUV,GAAa3lG,CAAK,EAC5BomG,EAAYZ,GAAexlG,CAAK,EACpC,MAAO,EAAEA,EAAM,UACR,EAAE,CAACqmG,EAAU,CAACD,IACbC,GAAW,OAAOrmG,EAAM,MAAS,UACjComG,GAAa,OAAOpmG,EAAM,QAAW,UACtCA,EAAM,cAAgB,GACtBA,EAAM,cAAgB,GACtBA,EAAM,YAAc,EAC/B,CACA,SAAS6nG,GAAeh8F,EAAKwjB,EAAO,CAChCA,EAAM,WAAaxjB,EAAI,KAAM,EAC7BwjB,EAAM,aAAexjB,EAAI,OAAQ,EACjCwjB,EAAM,UAAY,GAClBA,EAAM,YAAc,EACxB,CACA,SAAS2rE,GAASjtF,EAAI4qB,EAAS,CAC3B,OAAOA,GAAW5qB,EAAG,cAAgBA,EAAG,KAC5C,CACO,SAAS66F,GAAY/8F,EAAKkC,EAAI,CACjC86F,GAAMh9F,EAAKkC,EAAI,CAAE,QAAS,GAAO,UAAW,EAAG,WAAY,CAAC,EAAI,EAAI,CACxE,CACO,SAAS86F,GAAMh9F,EAAKkC,EAAIshB,EAAOy5E,EAAQ,CAC1C,IAAI5+F,EAAI6D,EAAG,UACX,GAAI,CAACA,EAAG,gBAAgBshB,EAAM,UAAWA,EAAM,WAAY,GAAO,EAAK,EAAG,CACtEthB,EAAG,SAAW,GACdA,EAAG,aAAe,GAClB,MACR,CACI,IAAImQ,EAAYnQ,EAAG,YACfg7F,EAAkB15E,EAAM,gBACxB25E,EAAoB,GACpBC,EAAgB,GAkBpB,IAjBI,CAACF,GAAmBvE,GAAkBtmF,EAAW6qF,CAAe,KAC5DA,GAAmBA,EAAgB,SACnClB,GAAeh8F,EAAKwjB,CAAK,EACzBxjB,EAAI,QAAS,EACbo9F,EAAgBD,EAAoB,GACpC35E,EAAM,gBAAkB,KACxBA,EAAM,WAAa,GACnBA,EAAM,OAAS,MAEfnR,GAAaA,EAAU,SACvB2pF,GAAeh8F,EAAKwjB,CAAK,EACzBxjB,EAAI,KAAM,EACVs8F,GAAiBjqF,EAAWrS,EAAKwjB,CAAK,EACtC25E,EAAoB,IAExB35E,EAAM,gBAAkBnR,GAExBmR,EAAM,WAAY,CAClBthB,EAAG,aAAe,GAClB,MACR,CACIA,EAAG,aAAeA,EAAG,YAAa,EAClCA,EAAG,iBAAkB,EACrB,IAAIg6F,EAAS14E,EAAM,OACd04E,IACDkB,EAAgBD,EAAoB,IAExC,IAAIE,EAAen7F,aAAc+qC,IAC1B/qC,EAAG,WACH46F,GAAa56F,EAAG,KAAK,EACxBi7F,GAAqBX,GAAmBn+F,EAAG69F,EAAO,SAAS,GAC3DF,GAAeh8F,EAAKwjB,CAAK,EACzB64E,GAAoBr8F,EAAKkC,CAAE,GAErBm7F,GACNrB,GAAeh8F,EAAKwjB,CAAK,EAE7B,IAAIrvB,EAAQg7F,GAASjtF,EAAIshB,EAAM,OAAO,EAClCthB,aAAc+qC,IACVzpB,EAAM,eAAiBk5E,KACvBU,EAAgB,GAChB55E,EAAM,aAAek5E,IAEzBT,GAA2Bj8F,EAAKkC,EAAIg6F,EAAQkB,EAAe55E,CAAK,GAC5D,CAAC65E,GAAiB,CAAC75E,EAAM,WAAa,CAACA,EAAM,cAC7CxjB,EAAI,UAAW,EAEnBs6F,GAAUt6F,EAAKkC,EAAI/N,EAAOkpG,CAAY,EAClCA,IACA75E,EAAM,UAAYrvB,EAAM,MAAQ,GAChCqvB,EAAM,YAAcrvB,EAAM,QAAU,KAIpC+N,aAAc0sC,IACVprB,EAAM,eAAiBo5E,KACvBQ,EAAgB,GAChB55E,EAAM,aAAeo5E,IAEzBX,GAA2Bj8F,EAAKkC,EAAIg6F,EAAQkB,EAAe55E,CAAK,EAChEi4E,GAAUz7F,EAAKkC,EAAI/N,CAAK,GAEnB+N,aAAc+sC,IACfzrB,EAAM,eAAiBm5E,KACvBS,EAAgB,GAChB55E,EAAM,aAAem5E,IAEzBP,GAAep8F,EAAKkC,EAAIg6F,EAAQkB,EAAe55E,CAAK,EACpD83E,GAAWt7F,EAAKkC,EAAI/N,CAAK,GAEpB+N,EAAG,0BACJshB,EAAM,eAAiBq5E,KACvBO,EAAgB,GAChB55E,EAAM,aAAeq5E,IAEzBS,GAAiBt9F,EAAKkC,EAAIshB,CAAK,GAGnC65E,GAAgBJ,GAChBjB,GAAeh8F,EAAKwjB,CAAK,EAE7BthB,EAAG,gBAAiB,EACpBA,EAAG,YAAcA,EAAG,WAAY,EAChCshB,EAAM,OAASthB,EACfA,EAAG,QAAU,EACbA,EAAG,aAAe,EACtB,CACA,SAASo7F,GAAiBt9F,EAAKkC,EAAIshB,EAAO,CACtC,IAAIskC,EAAe5lD,EAAG,gBAAiB,EACnCq7F,EAAuBr7F,EAAG,wBAAyB,EACvDlC,EAAI,KAAM,EACV,IAAIw9F,EAAa,CACb,gBAAiB,KACjB,OAAQ,KACR,WAAY,GACZ,UAAWh6E,EAAM,UACjB,WAAYA,EAAM,WAClB,QAASA,EAAM,OAClB,EACG3uB,EACA0C,EACJ,IAAK1C,EAAIqN,EAAG,UAAS,EAAI3K,EAAMuwD,EAAa,OAAQjzD,EAAI0C,EAAK1C,IAAK,CAC9D,IAAIgZ,EAAci6C,EAAajzD,CAAC,EAChCgZ,EAAY,aAAeA,EAAY,YAAa,EACpDA,EAAY,iBAAkB,EAC9BmvF,GAAMh9F,EAAK6N,EAAa2vF,EAAY3oG,IAAM0C,EAAM,CAAC,EACjDsW,EAAY,gBAAiB,EAC7BA,EAAY,YAAcA,EAAY,WAAY,EAClD2vF,EAAW,OAAS3vF,CAC5B,CACI,QAAS4vF,EAAM,EAAGC,EAAQH,EAAqB,OAAQE,EAAMC,EAAOD,IAAO,CACvE,IAAI5vF,EAAc0vF,EAAqBE,CAAG,EAC1C5vF,EAAY,aAAeA,EAAY,YAAa,EACpDA,EAAY,iBAAkB,EAC9BmvF,GAAMh9F,EAAK6N,EAAa2vF,EAAYC,IAAQC,EAAQ,CAAC,EACrD7vF,EAAY,gBAAiB,EAC7BA,EAAY,YAAcA,EAAY,WAAY,EAClD2vF,EAAW,OAAS3vF,CAC5B,CACI3L,EAAG,0BAA2B,EAC9BA,EAAG,SAAW,GACdlC,EAAI,QAAS,CACjB,CC3fA,IAAI29F,GAAW,IAAIpH,GACfqH,GAAa,IAAIllF,GAAI,GAAG,EACxBmlF,GAAY,CAAC,SAAU,aAAc,mBAAoB,QAAS,kBAAmB,aAAc,aAAc,eAAgB,eAAe,EAOpI,SAAAC,GAA+BC,EAAaplD,EAAK,CAC/D,GAAIolD,IAAgB,OACX,OAAA,KAEL,IAAAz4E,EAAMqzB,EAAI,oBAAoB,EAC9BjsB,EAAKisB,EAAI,MAAM,EACfqlD,EAAQtxE,EAAG,QAAQ,OAAS,MAC5BqxE,EAAY,OACLJ,GAAA,OAAUI,CAAW,EAE5B,IAAAE,EAAaN,GAAS,IAAII,CAAW,EACzC,GAAIE,EACK,OAAAA,EAEL,IAAAC,EAAW9lG,EAAS2lG,EAAa,CACnC,OAAQ,OACR,WAAY,EACZ,iBAAkB,GAClB,MAAO,qBACP,gBAAiB,KACjB,WAAY,EACZ,WAAY,EACZ,SAAU,EACV,aAAc,IACd,cAAe,GAAA,CAChB,EACGG,EAAS,kBAAoB,SAC/BA,EAAS,gBAAkB,MAE7B,IAAI/D,EAAU,CACZ,OAAQ,QACV,EACA,OAAAgE,EAAkBhE,CAAO,EACzBA,EAAQ,SAAW+D,EAAS,SAC5B/D,EAAQ,OAASA,EAAQ,OAAS6D,EAAQ,EAAI,EAAI14E,EACzCq4E,GAAA,IAAII,EAAa5D,CAAO,EACjC4D,EAAY,MAAQ,GACb5D,EACP,SAASgE,EAAkBhE,EAAS,CAGlC,QAFI5hG,EAAO,CAAC+sB,CAAG,EACX84E,EAAa,GACRvpG,EAAI,EAAGA,EAAIgpG,GAAU,OAAQ,EAAEhpG,EAAG,CACzC,IAAI6D,EAAQwlG,EAASL,GAAUhpG,CAAC,CAAC,EACjC,GAAI6D,GAAS,MAAQ,CAACT,EAAQS,CAAK,GAAK,CAACwB,EAASxB,CAAK,GAAK,CAAC0B,GAAS1B,CAAK,GAAK,OAAOA,GAAU,UAAW,CAC7F0lG,EAAA,GACb,KAAA,CAEF7lG,EAAK,KAAKG,CAAK,CAAA,CAEb,IAAA+H,EACJ,GAAI29F,EAAY,CACd39F,EAAWlI,EAAK,KAAK,GAAG,GAAKylG,EAAQ,OAAS,IAC1C,IAAAK,EAAQT,GAAW,IAAIn9F,CAAQ,EAC/B49F,IACFL,EAAQ7D,EAAQ,WAAakE,EAAQlE,EAAQ,MAAQkE,EACvD,CAEE,IAAAC,EAAaC,GAAoBL,EAAS,UAAU,EACpDM,EAAaC,GAAoBP,EAAS,UAAU,EACpDQ,EAAcC,GAAqBT,EAAS,MAAM,EAClDU,EAAoBC,GAAoBP,CAAU,EAClDQ,EAAmBC,GAAoBP,CAAU,EACjDlpG,EAAS,CAAC0oG,GAAS/oG,GAAY,aAAa,EAC5C+pG,EAAUhB,GAAS,CACrB,IAAK,IACL,MAAO,CAAC,EACR,IAAK,MACL,SAAU,CAAA,CACZ,EACIiB,EAAQC,EAAe,EACvBl/F,EACA1K,IACKA,EAAA,MAAQ2pG,EAAM,MAAQ35E,EACtBhwB,EAAA,OAAS2pG,EAAM,OAAS35E,EACzBtlB,EAAA1K,EAAO,WAAW,IAAI,GAEnB6pG,EAAA,EACPf,GACSR,GAAA,IAAIn9F,EAAUnL,GAAU0pG,CAAO,EAE5C7E,EAAQ,MAAQ7kG,EAChB6kG,EAAQ,WAAa6E,EACrB7E,EAAQ,SAAW8E,EAAM,MACzB9E,EAAQ,UAAY8E,EAAM,OAM1B,SAASC,GAAiB,CAafrqG,QADLY,EAAQ,EACHZ,EAAI,EAAGuqG,EAAOR,EAAkB,OAAQ/pG,EAAIuqG,EAAM,EAAEvqG,EAC3DY,EAAQ0/B,GAAuB1/B,EAAOmpG,EAAkB/pG,CAAC,CAAC,EAGnDA,QADLwqG,EAAgB,EACXxqG,EAAI,EAAGuqG,EAAOV,EAAY,OAAQ7pG,EAAIuqG,EAAM,EAAEvqG,EACrDwqG,EAAgBlqE,GAAuBkqE,EAAeX,EAAY7pG,CAAC,EAAE,MAAM,EAEpEY,GAAA4pG,EACT,IAAIn2F,EAAS41F,EAAmBF,EAAkB,OAASF,EAAY,OAahE,MAAA,CACL,MAAO,KAAK,IAAI,EAAG,KAAK,IAAIjpG,EAAOyoG,EAAS,YAAY,CAAC,EACzD,OAAQ,KAAK,IAAI,EAAG,KAAK,IAAIh1F,EAAQg1F,EAAS,aAAa,CAAC,CAC9D,CAAA,CAEF,SAASiB,GAAa,CAChBn/F,IACFA,EAAI,UAAU,EAAG,EAAG1K,EAAO,MAAOA,EAAO,MAAM,EAC3C4oG,EAAS,kBACXl+F,EAAI,UAAYk+F,EAAS,gBACzBl+F,EAAI,SAAS,EAAG,EAAG1K,EAAO,MAAOA,EAAO,MAAM,IAIlD,QADIgqG,EAAO,EACFzqG,EAAI,EAAGA,EAAI2pG,EAAW,OAAQ,EAAE3pG,EACvCyqG,GAAQd,EAAW3pG,CAAC,EAEtB,GAAIyqG,GAAQ,EAEV,OAMK,QAJHliG,EAAI,CAAC0hG,EACLS,EAAM,EACNC,EAAW,EACXC,EAAO,EACJriG,EAAI6hG,EAAM,QAAQ,CACnB,GAAAM,EAAM,IAAM,EAAG,CAKV,QAJHG,EAAYF,EAAW,EAAId,EAAY,OACvCvhG,EAAI,EACJwiG,EAAO,EACPC,EAAY,EACTziG,EAAI8hG,EAAM,MAAQ,GAAG,CAEjBpqG,QADLgrG,GAAO,EACFhrG,EAAI,EAAGA,EAAIypG,EAAWmB,CAAI,EAAE,OAAQ,EAAE5qG,EACrCgrG,IAAAvB,EAAWmB,CAAI,EAAE5qG,CAAC,EAE5B,GAAIgrG,IAAQ,EAEV,MAGE,GAAAF,EAAO,IAAM,EAAG,CACd,IAAA5qG,IAAQ,EAAImpG,EAAS,YAAc,GACnClvF,GAAO7R,EAAImhG,EAAWmB,CAAI,EAAEE,CAAI,EAAI5qG,GACpC+qG,GAAQ1iG,EAAIohG,EAAWe,CAAG,EAAIxqG,GAC9BU,GAAQ6oG,EAAWmB,CAAI,EAAEE,CAAI,EAAIzB,EAAS,WAC1Ch1F,GAASs1F,EAAWe,CAAG,EAAIrB,EAAS,WACpC6B,GAAYH,EAAY,EAAIlB,EAAYgB,CAAS,EAAE,OAC3CM,GAAAhxF,GAAM8wF,GAAOrqG,GAAOyT,GAAQw1F,EAAYgB,CAAS,EAAEK,EAAS,CAAC,CAAA,CAEtE5iG,GAAAmhG,EAAWmB,CAAI,EAAEE,CAAI,EACxB,EAAAC,EACA,EAAAD,EACEA,IAASrB,EAAWmB,CAAI,EAAE,SACrBE,EAAA,EACT,CAEA,EAAAF,EACEA,IAASnB,EAAW,SACfmB,EAAA,EACT,CAEFriG,GAAKohG,EAAWe,CAAG,EACjB,EAAAC,EACA,EAAAD,EACEA,IAAQf,EAAW,SACfe,EAAA,EACR,CAEF,SAASS,GAAY7iG,GAAGC,GAAG3H,EAAOyT,GAAQsuF,GAAY,CAChD,IAAA55F,GAAQogG,EAAQ,EAAI14E,EACpB26E,GAASrI,GAAaJ,GAAYr6F,GAAIS,GAAOR,GAAIQ,GAAOnI,EAAQmI,GAAOsL,GAAStL,GAAOsgG,EAAS,MAAOA,EAAS,gBAAgB,EACpI,GAAIF,EAAO,CACT,IAAIkC,GAAcxzE,EAAG,QAAQ,iBAAiBuzE,EAAM,EAChDC,IACMlB,EAAA,SAAS,KAAKkB,EAAW,CACnC,MAGAnD,GAAY/8F,EAAKigG,EAAM,CACzB,CACF,CACF,CAEJ,CAOA,SAAStB,GAAqBsB,EAAQ,CACpC,GAAI,CAACA,GAAUA,EAAO,SAAW,EACxB,MAAA,CAAC,CAAC,MAAM,CAAC,EAEd,GAAA/lG,EAAS+lG,CAAM,EACV,MAAA,CAAC,CAACA,CAAM,CAAC,EAGlB,QADIE,EAAc,GACTtrG,EAAI,EAAGA,EAAIorG,EAAO,OAAQ,EAAEprG,EACnC,GAAI,CAACqF,EAAS+lG,EAAOprG,CAAC,CAAC,EAAG,CACVsrG,EAAA,GACd,KAAA,CAGJ,GAAIA,EACK,OAAAxB,GAAqB,CAACsB,CAAM,CAAC,EAGtC,QADI7oG,EAAS,CAAC,EACLvC,EAAI,EAAGA,EAAIorG,EAAO,OAAQ,EAAEprG,EAC/BqF,EAAS+lG,EAAOprG,CAAC,CAAC,EACpBuC,EAAO,KAAK,CAAC6oG,EAAOprG,CAAC,CAAC,CAAC,EAEhBuC,EAAA,KAAK6oG,EAAOprG,CAAC,CAAC,EAGlB,OAAAuC,CACT,CAOA,SAASmnG,GAAoB6B,EAAM,CACjC,GAAI,CAACA,GAAQA,EAAK,SAAW,EAC3B,MAAO,CAAC,CAAC,EAAG,CAAC,CAAC,EAEZ,GAAAhmG,GAASgmG,CAAI,EAAG,CACd,IAAAC,EAAY,KAAK,KAAKD,CAAI,EAC9B,MAAO,CAAC,CAACC,EAAWA,CAAS,CAAC,CAAA,CAOhC,QADIC,EAAc,GACT,EAAI,EAAG,EAAIF,EAAK,OAAQ,EAAE,EACjC,GAAI,CAAChmG,GAASgmG,EAAK,CAAC,CAAC,EAAG,CACRE,EAAA,GACd,KAAA,CAGJ,GAAIA,EACK,OAAA/B,GAAoB,CAAC6B,CAAI,CAAC,EAGnC,QADIhpG,EAAS,CAAC,EACL,EAAI,EAAG,EAAIgpG,EAAK,OAAQ,EAAE,EACjC,GAAIhmG,GAASgmG,EAAK,CAAC,CAAC,EAAG,CACrB,IAAIC,EAAY,KAAK,KAAKD,EAAK,CAAC,CAAC,EACjChpG,EAAO,KAAK,CAACipG,EAAWA,CAAS,CAAC,CAAA,KAC7B,CACL,IAAIA,EAAYzrG,EAAIwrG,EAAK,CAAC,EAAG,SAAU7xF,EAAG,CACjC,OAAA,KAAK,KAAKA,CAAC,CAAA,CACnB,EACG8xF,EAAU,OAAS,IAAM,EAG3BjpG,EAAO,KAAKipG,EAAU,OAAOA,CAAS,CAAC,EAEvCjpG,EAAO,KAAKipG,CAAS,CACvB,CAGG,OAAAjpG,CACT,CAOA,SAASqnG,GAAoB2B,EAAM,CACjC,GAAI,CAACA,GAAQ,OAAOA,GAAS,UAAYA,EAAK,SAAW,EAChD,MAAA,CAAC,EAAG,CAAC,EAEV,GAAAhmG,GAASgmG,CAAI,EAAG,CACd,IAAAG,EAAc,KAAK,KAAKH,CAAI,EACzB,MAAA,CAACG,EAAaA,CAAW,CAAA,CAElC,IAAIF,EAAYzrG,EAAIwrG,EAAM,SAAU7xF,EAAG,CAC9B,OAAA,KAAK,KAAKA,CAAC,CAAA,CACnB,EACD,OAAO6xF,EAAK,OAAS,EAAIC,EAAU,OAAOA,CAAS,EAAIA,CACzD,CASA,SAASxB,GAAoBuB,EAAM,CAC1B,OAAAxrG,EAAIwrG,EAAM,SAAU79D,EAAM,CAC/B,OAAOw8D,GAAoBx8D,CAAI,CAAA,CAChC,CACH,CACA,SAASw8D,GAAoBqB,EAAM,CAEjC,QADII,EAAc,EACT3rG,EAAI,EAAGA,EAAIurG,EAAK,OAAQ,EAAEvrG,EACjC2rG,GAAeJ,EAAKvrG,CAAC,EAEnB,OAAAurG,EAAK,OAAS,IAAM,EAGfI,EAAc,EAEhBA,CACT,CC3Ve,SAASC,GAAYjnE,EAASmf,EAAK,CAChDnf,EAAQ,cAAc,SAAUmgB,EAAa,CAC3C,GAAI,CAAAngB,EAAQ,iBAAiBmgB,CAAW,EAGxC,KAAItgD,EAAOsgD,EAAY,QAAS,EAC5BtgD,EAAK,iBACPA,EAAK,KAAK,SAAU0Z,EAAK,CACvB,IAAI2tF,EAAQrnG,EAAK,cAAc0Z,EAAK,OAAO,EAC3C,GAAI2tF,EAAO,CACT,IAAI/vB,EAAYt3E,EAAK,uBAAuB0Z,EAAK,OAAO,EACxD49D,EAAU,MAAQmtB,GAA+B4C,EAAO/nD,CAAG,CACrE,CACA,CAAO,EAEH,IAAI+nD,EAAQrnG,EAAK,UAAU,OAAO,EAClC,GAAIqnG,EAAO,CACT,IAAIvsG,EAAQkF,EAAK,UAAU,OAAO,EAClClF,EAAM,MAAQ2pG,GAA+B4C,EAAO/nD,CAAG,CAC7D,EACA,CAAG,CACH,CCpBA,IAAIgoD,GAAY,IAAI1hG,GCEhB2hG,GAAa,CAAC,EAEF,SAAAC,GAAa77F,EAAM87F,EAAM,CAMvCF,GAAW57F,CAAI,EAAI87F,CACrB,CACO,SAASC,GAAQ/7F,EAAM,CAM5B,OAAO47F,GAAW57F,CAAI,CACxB,CCqBA,IAAIg8F,GAAyB,EACzBC,GAAmC,IAGnCC,GAA+B,IAG/BC,GAA4B,IAC5BC,GAA6B,IAC7BC,GAA+B,IAC/BC,GAAyB,IACzBC,GAAqC,KACrCC,GAAyB,IACzBC,GAAwB,IACxBC,GAA4B,IAI5BC,GAAoC,KAGpCC,GAAoC,KACpCC,GAAwB,IACxBC,GAAuB,IACvBC,GAAwB,IACjBC,GAAW,CACpB,UAAW,CACT,OAAQb,GACR,cAAeF,GACf,UAAWI,EACb,EACA,OAAQ,CACN,OAAQC,GACR,mBAAoBC,GACpB,OAAQC,GACR,MAAOC,GACP,kBAAmBG,GACnB,UAAWF,GACX,MAAOG,GACP,WAAYF,GACZ,KAAMG,GACN,MAAOC,EAAA,CAEX,EAMIE,GAAsB,sBACtBC,GAAiB,kBACjBC,GAA0B,sBAC1BC,GAAa,kBACbC,GAAqB,wBACrBC,GAAyB,EACzBC,GAA0B,EAC1BC,GAAyB,EAG7B,SAASC,GAAwCltB,EAAQ,CACvD,OAAO,UAAY,CAEjB,QADIv+E,EAAO,CAAC,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACjCD,EAAAC,CAAE,EAAI,UAAUA,CAAE,EAErB,GAAA,KAAK,aAAc,CACL,KAAK,GACrB,MAAA,CAEK,OAAAyrG,GAA+B,KAAMntB,EAAQv+E,CAAI,CAC1D,CACF,CACA,SAAS2rG,GAA8CptB,EAAQ,CAC7D,OAAO,UAAY,CAEjB,QADIv+E,EAAO,CAAC,EACHC,EAAK,EAAGA,EAAK,UAAU,OAAQA,IACjCD,EAAAC,CAAE,EAAI,UAAUA,CAAE,EAElB,OAAAyrG,GAA+B,KAAMntB,EAAQv+E,CAAI,CAC1D,CACF,CACA,SAAS0rG,GAA+B7N,EAAMtf,EAAQv+E,EAAM,CAErD,OAAAA,EAAA,CAAC,EAAIA,EAAK,CAAC,GAAKA,EAAK,CAAC,EAAE,YAAY,EAClCiI,GAAS,UAAUs2E,CAAM,EAAE,MAAMsf,EAAM79F,CAAI,CACpD,CACA,IAAI4rG,GAA6B,SAAUz3F,EAAQ,CACjDC,EAAUw3F,EAAez3F,CAAM,EAC/B,SAASy3F,GAAgB,CACvB,OAAOz3F,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAAA,CAEtDy3F,OAAAA,CAAA,EACP3jG,EAAQ,EACN4jG,GAAqBD,GAAc,UACvCC,GAAmB,GAAKF,GAA8C,IAAI,EAC1EE,GAAmB,IAAMF,GAA8C,KAAK,EAI5E,IAAIG,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GAAuB,SAAU74F,EAAQ,CAC3CC,EAAU44F,EAAS74F,CAAM,EAChB64F,SAAAA,EAAQpnG,EAEjBkqE,EAAOjvD,EAAM,CACX,IAAIxM,EAAQF,EAAO,KAAK,KAAM,IAAI6oF,EAAkB,GAAK,KACzD3oF,EAAM,aAAe,CAAC,EACtBA,EAAM,WAAa,CAAC,EACpBA,EAAM,iBAAmB,CAAC,EAC1BA,EAAM,eAAiB,CAAC,EAExBA,EAAM,gBAAkB,CAAC,EACzBwM,EAAOA,GAAQ,CAAC,EAEZ3d,EAAS4sE,CAAK,IAChBA,EAAQm9B,GAAan9B,CAAK,GAE5Bz7D,EAAM,KAAOzO,EACb,IAAIsnG,EAAkB,SAClBC,EAAuB,OACvBC,EAAsB,GAUtBvsF,EAAK,IAcT,IAAI6U,EAAKrhB,EAAM,IAAMg5F,GAAaznG,EAAK,CACrC,SAAUib,EAAK,UAAYqsF,EAC3B,iBAAkBrsF,EAAK,iBACvB,MAAOA,EAAK,MACZ,OAAQA,EAAK,OACb,IAAKA,EAAK,IACV,aAAcld,EAAUkd,EAAK,aAAcusF,CAAmB,EAC9D,iBAAkBzpG,EAAUkd,EAAK,iBAAkBssF,CAAoB,EACvE,YAAatsF,EAAK,WAAA,CACnB,EACDxM,EAAM,KAAOwM,EAAK,IAElBxM,EAAM,kBAAoBkiF,GAASxzF,EAAK2yB,EAAG,MAAOA,CAAE,EAAG,EAAE,EACzDo6C,EAAQ5vE,EAAM4vE,CAAK,EACVA,GAAAw9B,GAAex9B,EAAO,EAAI,EACnCz7D,EAAM,OAASy7D,EACfz7D,EAAM,QAAUwrD,GAAmBh/C,EAAK,QAAU2+C,EAAW,EACvDnrD,EAAA,aAAe,IAAIggE,GACzB,IAAI1yB,EAAMttC,EAAM,KAAOu4F,GAAmBv4F,CAAK,EAEtC,SAAAk5F,EAAiBpoG,EAAGC,EAAG,CACvB,OAAAD,EAAE,OAASC,EAAE,MAAA,CAEtBgW,OAAAA,GAAQoyF,GAAaD,CAAgB,EACrCnyF,GAAQqyF,GAAoBF,CAAgB,EAC5Cl5F,EAAM,WAAa,IAAIqlF,GAAUrlF,EAAOstC,EAAK8rD,GAAoBD,EAAW,EACtEn5F,EAAA,eAAiB,IAAIu3F,GAE3Bv3F,EAAM,YAAY,EAElBA,EAAM,OAAStR,EAAKsR,EAAM,OAAQA,CAAK,EACvCqhB,EAAG,UAAU,GAAG,QAASrhB,EAAM,SAAUA,CAAK,EAC9Ck4F,GAAkB72E,EAAIrhB,CAAK,EAC3Bm4F,GAAe92E,EAAIrhB,CAAK,EAExB9P,GAAe8P,CAAK,EACbA,CAAA,CAET24F,OAAAA,EAAQ,UAAU,SAAW,UAAY,CACvC,GAAI,MAAK,UAGT,CAAAD,GAAmB,IAAI,EACvB,IAAInY,EAAY,KAAK,WAEjB,GAAA,KAAKsW,EAAc,EAAG,CACpB,IAAAwC,EAAS,KAAKxC,EAAc,EAAE,OAClC,KAAKD,EAAmB,EAAI,GACxB,GAAA,CACFa,GAAQ,IAAI,EACZG,GAAc,OAAO,KAAK,KAAM,KAAM,KAAKf,EAAc,EAAE,YAAY,QAChEvjG,EAAG,CACV,WAAKsjG,EAAmB,EAAI,GAC5B,KAAKC,EAAc,EAAI,KACjBvjG,CAAA,CAQR,KAAK,IAAI,MAAM,EACf,KAAKsjG,EAAmB,EAAI,GAC5B,KAAKC,EAAc,EAAI,KACHmB,GAAA,KAAK,KAAMqB,CAAM,EACjBpB,GAAA,KAAK,KAAMoB,CAAM,CAAA,SAG9B9Y,EAAU,WAAY,CAE7B,IAAI+Y,EAAa3D,GACbxnE,EAAU,KAAK,OACfmf,EAAM,KAAK,KACfizC,EAAU,WAAa,GACpB,EAAA,CACG,IAAAgZ,EAAY,CAAC,IAAI,KACrBhZ,EAAU,mBAAmBpyD,CAAO,EAEpCoyD,EAAU,0BAA0BpyD,CAAO,EAC3C2pE,GAAkB,KAAM3pE,CAAO,EAO/BoyD,EAAU,mBAAmBpyD,CAAO,EACpCmqE,GAAa,KAAM,KAAK,OAAQhrD,EAAK,SAAU,EAAE,EACnCgsD,GAAA,CAAK,IAAA,KAASC,CAAA,OACrBD,EAAa,GAAK/Y,EAAU,YAEhCA,EAAU,YACb,KAAK,IAAI,MAAM,CACjB,EAIJ,EACAoY,EAAQ,UAAU,OAAS,UAAY,CACrC,OAAO,KAAK,IACd,EACAA,EAAQ,UAAU,MAAQ,UAAY,CACpC,OAAO,KAAK,EACd,EACAA,EAAQ,UAAU,MAAQ,UAAY,CACpC,OAAO,KAAK,GACd,EACAA,EAAQ,UAAU,MAAQ,UAAY,CACpC,OAAO,KAAK,IACd,EAEAA,EAAQ,UAAU,UAAY,SAAUtwC,EAAQmxC,EAAUC,EAAY,CAChE,GAAA,MAAK7C,EAAmB,EAM5B,IAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEE,IAAAyC,EACAK,EACAC,EASA,GARAltG,EAAS+sG,CAAQ,IACnBC,EAAaD,EAAS,WACtBH,EAASG,EAAS,OAClBE,EAAeF,EAAS,aACxBG,EAAgBH,EAAS,WACzBA,EAAWA,EAAS,UAEtB,KAAK5C,EAAmB,EAAI,GACxB,CAAC,KAAK,QAAU4C,EAAU,CAC5B,IAAI99B,EAAgB,IAAIyE,GAAc,KAAK,IAAI,EAC3C1E,EAAQ,KAAK,OACbttC,EAAU,KAAK,OAAS,IAAIqtC,GAChCrtC,EAAQ,UAAY,KAAK,WACzBA,EAAQ,IAAM,KAAK,KACnBA,EAAQ,KAAK,KAAM,KAAM,KAAMstC,EAAO,KAAK,QAASC,CAAa,CAAA,CAE9D,KAAA,OAAO,UAAUrT,EAAQ,CAC5B,aAAAqxC,GACC/9B,EAAuB,EAC1B,IAAIi+B,EAAe,CACjB,iBAAkBD,EAClB,cAAe,EACjB,EACA,GAAIF,EACF,KAAK5C,EAAc,EAAI,CACrB,OAAAwC,EACA,aAAAO,CACF,EACA,KAAKhD,EAAmB,EAAI,GAGvB,KAAA,QAAQ,OAAO,MACf,CACD,GAAA,CACFa,GAAQ,IAAI,EACZG,GAAc,OAAO,KAAK,KAAM,KAAMgC,CAAY,QAC3CtmG,EAAG,CACV,WAAKujG,EAAc,EAAI,KACvB,KAAKD,EAAmB,EAAI,GACtBtjG,CAAA,CAIH,KAAK,MAER,KAAK,IAAI,MAAM,EAEjB,KAAKujG,EAAc,EAAI,KACvB,KAAKD,EAAmB,EAAI,GACRoB,GAAA,KAAK,KAAMqB,CAAM,EACjBpB,GAAA,KAAK,KAAMoB,CAAM,CAAA,EAEzC,EAIAV,EAAQ,UAAU,SAAW,UAAY,CAEzC,EAEAA,EAAQ,UAAU,SAAW,UAAY,CACvC,OAAO,KAAK,MACd,EACAA,EAAQ,UAAU,UAAY,UAAY,CACxC,OAAO,KAAK,QAAU,KAAK,OAAO,UAAU,CAC9C,EACAA,EAAQ,UAAU,SAAW,UAAY,CAChC,OAAA,KAAK,IAAI,SAAS,CAC3B,EACAA,EAAQ,UAAU,UAAY,UAAY,CACjC,OAAA,KAAK,IAAI,UAAU,CAC5B,EACAA,EAAQ,UAAU,oBAAsB,UAAY,CAClD,OAAO,KAAK,IAAI,QAAQ,KACUrwG,EAAI,iBAAmB,OAAO,kBAAoB,CACtF,EAKAqwG,EAAQ,UAAU,kBAAoB,SAAUnsF,EAAM,CAI7C,OAAA,KAAK,eAAeA,CAAI,CACjC,EACAmsF,EAAQ,UAAU,eAAiB,SAAUnsF,EAAM,CACjDA,EAAOA,GAAQ,CAAC,EACZ,IAAAlM,EAAU,KAAK,IAAI,QAMvB,OAAOA,EAAQ,kBAAkB,CAC/B,gBAAiBkM,EAAK,iBAAmB,KAAK,OAAO,IAAI,iBAAiB,EAC1E,WAAYA,EAAK,YAAc,KAAK,oBAAoB,CAAA,CACzD,CACH,EACAmsF,EAAQ,UAAU,kBAAoB,SAAUnsF,EAAM,CACpDA,EAAOA,GAAQ,CAAC,EACZ,IAAAlM,EAAU,KAAK,IAAI,QAMvB,OAAOA,EAAQ,eAAe,CAC5B,WAAYkM,EAAK,UAAA,CAClB,CACH,EAIAmsF,EAAQ,UAAU,cAAgB,UAAY,CACxC,GAACrwG,EAAI,aAGT,KAAI+4B,EAAK,KAAK,IACV7f,EAAO6f,EAAG,QAAQ,eAAe,EAEhCpzB,OAAAA,EAAAuT,EAAM,SAAU3K,EAAI,CACpBA,EAAA,cAAc,KAAM,EAAI,CAAA,CAC5B,EACMwqB,EAAG,QAAQ,UAAU,EAC9B,EACAs3E,EAAQ,UAAU,WAAa,SAAUnsF,EAAM,CAC7C,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEFA,EAAOA,GAAQ,CAAC,EAChB,IAAIqtF,EAAoBrtF,EAAK,kBACzB2hB,EAAU,KAAK,OACf2rE,EAAyB,CAAC,EAC1BzjF,EAAO,KACNpoB,EAAA4rG,EAAmB,SAAUlpE,EAAe,CAC/CxC,EAAQ,cAAc,CACpB,SAAUwC,CACZ,EAAG,SAAUquC,EAAW,CACtB,IAAIrxB,EAAOt3B,EAAK,eAAe2oD,EAAU,QAAQ,EAC5CrxB,EAAK,MAAM,SACdmsD,EAAuB,KAAKnsD,CAAI,EAChCA,EAAK,MAAM,OAAS,GACtB,CACD,CAAA,CACF,EACD,IAAIosD,EAAM,KAAK,IAAI,QAAQ,YAAc,MAAQ,KAAK,gBAAkB,KAAK,eAAevtF,CAAI,EAAE,UAAU,UAAYA,GAAQA,EAAK,MAAQ,MAAM,EAC9Ive,OAAAA,EAAA6rG,EAAwB,SAAUnsD,EAAM,CAC3CA,EAAK,MAAM,OAAS,EAAA,CACrB,EACMosD,CACT,EACApB,EAAQ,UAAU,oBAAsB,SAAUnsF,EAAM,CACtD,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEE,IAAAwtF,EAAQxtF,EAAK,OAAS,MACtBytF,EAAU,KAAK,MACf78F,EAAU,KAAK,IACfC,EAAU,KAAK,IACf68F,EAAa,IACb,GAAAC,GAAgBF,CAAO,EAAG,CAC5B,IAAIG,EAASF,EACTzF,EAAQyF,EACRG,EAAU,CAACH,EACXI,EAAW,CAACJ,EACZK,EAAe,CAAC,EAChBC,EAAQhuF,GAAQA,EAAK,YAAc,KAAK,oBAAoB,EAC3Dve,EAAA82B,GAAW,SAAU01E,EAAOx1E,EAAI,CAC/B,GAAAw1E,EAAM,QAAUR,EAAS,CAC3B,IAAIhwG,EAAS+vG,EAAQS,EAAM,MAAQ,EAAA,QAAQ,UAAU,EAAE,UAAYA,EAAM,eAAe5uG,EAAM2gB,CAAI,CAAC,EAC/FgzC,EAAei7C,EAAM,OAAO,EAAE,sBAAsB,EAC/CL,EAAAh9F,EAAQoiD,EAAa,KAAM46C,CAAM,EAClC3F,EAAAr3F,EAAQoiD,EAAa,IAAKi1C,CAAK,EAC7B4F,EAAAh9F,EAAQmiD,EAAa,MAAO66C,CAAO,EAClCC,EAAAj9F,EAAQmiD,EAAa,OAAQ86C,CAAQ,EAChDC,EAAa,KAAK,CAChB,IAAKtwG,EACL,KAAMu1D,EAAa,KACnB,IAAKA,EAAa,GAAA,CACnB,CAAA,CACH,CACD,EACS46C,GAAAI,EACD/F,GAAA+F,EACEH,GAAAG,EACCF,GAAAE,EACZ,IAAIpwG,EAAQiwG,EAAUD,EAClBv8F,EAASy8F,EAAW7F,EACpBiG,EAAe9wG,GAAY,aAAa,EACxC+wG,EAAO3B,GAAa0B,EAAc,CACpC,SAAUV,EAAQ,MAAQ,QAAA,CAC3B,EAKD,GAJAW,EAAK,OAAO,CACV,MAAAvwG,EACA,OAAAyT,CAAA,CACD,EACGm8F,EAAO,CACT,IAAIY,EAAY,GACX3sG,OAAAA,EAAAssG,EAAc,SAAUluE,EAAM,CAC7B,IAAAv6B,EAAIu6B,EAAK,KAAO+tE,EAChBroG,EAAIs6B,EAAK,IAAMooE,EACnBmG,GAAa,2BAA6B9oG,EAAI,IAAMC,EAAI,MAAQs6B,EAAK,IAAM,MAAA,CAC5E,EACIsuE,EAAA,QAAQ,WAAW,EAAE,UAAYC,EAClCpuF,EAAK,0BACFmuF,EAAA,QAAQ,mBAAmBnuF,EAAK,wBAAwB,EAE/DmuF,EAAK,mBAAmB,EACjBA,EAAK,QAAQ,UAAU,CAAA,KAG9B,QAAInuF,EAAK,0BACFmuF,EAAA,IAAI,IAAI1V,GAAa,CACxB,MAAO,CACL,EAAG,EACH,EAAG,EACH,MAAA76F,EACA,OAAAyT,CACF,EACA,MAAO,CACL,KAAM2O,EAAK,wBAAA,CACb,CACD,CAAC,EAECve,EAAAssG,EAAc,SAAUluE,EAAM,CAC7B,IAAAkzB,EAAM,IAAIs7C,GAAc,CAC1B,MAAO,CACL,EAAGxuE,EAAK,KAAOmuE,EAAQJ,EACvB,EAAG/tE,EAAK,IAAMmuE,EAAQ/F,EACtB,MAAOpoE,EAAK,GAAA,CACd,CACD,EACDsuE,EAAK,IAAIp7C,CAAG,CAAA,CACb,EACDo7C,EAAK,mBAAmB,EACjBD,EAAa,UAAU,UAAYluF,GAAQA,EAAK,MAAQ,MAAM,CACvE,KAEO,QAAA,KAAK,WAAWA,CAAI,CAE/B,EACAmsF,EAAQ,UAAU,eAAiB,SAAU7pE,EAAQzhC,EAAO,CAC1D,OAAOwqG,GAAe,KAAM,iBAAkB/oE,EAAQzhC,CAAK,CAC7D,EACAsrG,EAAQ,UAAU,iBAAmB,SAAU7pE,EAAQzhC,EAAO,CAC5D,OAAOwqG,GAAe,KAAM,mBAAoB/oE,EAAQzhC,CAAK,CAC/D,EAMAsrG,EAAQ,UAAU,aAAe,SAAU7pE,EAAQzhC,EAAO,CACxD,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEF,IAAI8gC,EAAU,KAAK,OACfpiC,EACA+uG,EAAaC,GAAsB5sE,EAASW,CAAM,EACjD7gC,OAAAA,EAAA6sG,EAAY,SAAUE,EAAQ3uG,EAAK,CACtCA,EAAI,QAAQ,QAAQ,GAAK,GAAK4B,EAAK+sG,EAAQ,SAAUjoE,EAAO,CAC1D,IAAIyb,EAAWzb,EAAM,iBACjB,GAAAyb,GAAYA,EAAS,aACvBziD,EAASA,GAAU,CAAC,CAACyiD,EAAS,aAAanhD,CAAK,UACvChB,IAAQ,eAAgB,CACjC,IAAIshD,EAAO,KAAK,WAAW5a,EAAM,QAAQ,EACrC4a,GAAQA,EAAK,eACf5hD,EAASA,GAAU4hD,EAAK,aAAatgD,EAAO0lC,CAAK,EAKnD,GAMD,IAAI,GACN,IAAI,EACA,CAAC,CAAChnC,CACX,EAgBA4sG,EAAQ,UAAU,UAAY,SAAU7pE,EAAQ24D,EAAY,CAC1D,IAAIt5D,EAAU,KAAK,OACf8sE,EAAeF,GAAsB5sE,EAASW,EAAQ,CACxD,gBAAiB,QAAA,CAClB,EACGwf,EAAc2sD,EAAa,YAM3BjtG,EAAOsgD,EAAY,QAAQ,EAC3B4sD,EAAkBD,EAAa,eAAe,iBAAiB,EAAIA,EAAa,gBAAkBA,EAAa,eAAe,WAAW,EAAIjtG,EAAK,gBAAgBitG,EAAa,SAAS,EAAI,KACzL,OAAAC,GAAmB,KAAO9Q,GAAsBp8F,EAAMktG,EAAiBzT,CAAU,EAAI4C,GAAkBr8F,EAAMy5F,CAAU,CAChI,EAIAkR,EAAQ,UAAU,wBAA0B,SAAU1rE,EAAgB,CAC7D,OAAA,KAAK,eAAeA,EAAe,QAAQ,CACpD,EAIA0rE,EAAQ,UAAU,qBAAuB,SAAUrqD,EAAa,CACvD,OAAA,KAAK,WAAWA,EAAY,QAAQ,CAC7C,EACAqqD,EAAQ,UAAU,YAAc,UAAY,CAC1C,IAAI34F,EAAQ,KACP/R,EAAAktG,GAAmB,SAAUC,EAAS,CACrC,IAAA/nG,EAAU,SAAUC,EAAG,CACrB,IAAA66B,EAAUnuB,EAAM,SAAS,EACzBnJ,EAAKvD,EAAE,OACP2b,EACAosF,EAAcD,IAAY,YA0B9B,GAxBIC,EACFpsF,EAAS,CAAC,EAEJpY,GAAAg0F,GAAoBh0F,EAAI,SAAU6kB,EAAQ,CAC1C,IAAA4tB,EAASL,GAAUvtB,CAAM,EACzB,GAAA4tB,GAAUA,EAAO,WAAa,KAAM,CACtC,IAAIgyD,EAAYhyD,EAAO,WAAanb,EAAQ,iBAAiBmb,EAAO,WAAW,EACtE,OAAAr6B,EAAAqsF,GAAaA,EAAU,cAAchyD,EAAO,UAAWA,EAAO,SAAUzyC,CAAE,GAAK,CAAC,EAClF,EAAA,SAGAyyC,EAAO,UACd,OAAAr6B,EAASniB,EAAO,GAAIw8C,EAAO,SAAS,EAC7B,IAER,EAAI,EASLr6B,EAAQ,CACV,IAAI0hB,EAAgB1hB,EAAO,cACvB4/B,EAAiB5/B,EAAO,gBAMxB0hB,IAAkB,YAAcA,IAAkB,aAAeA,IAAkB,cACrEA,EAAA,SAChBke,EAAiB5/B,EAAO,aAE1B,IAAI8jB,EAAQpC,GAAiBke,GAAkB,MAAQ1gB,EAAQ,aAAawC,EAAeke,CAAc,EACrGlB,EAAO5a,GAAS/yB,EAAM+yB,EAAM,WAAa,SAAW,aAAe,gBAAgB,EAAEA,EAAM,QAAQ,EASvG9jB,EAAO,MAAQ3b,EACf2b,EAAO,KAAOmsF,EACdp7F,EAAM,iBAAiB,UAAY,CACjC,SAAUnJ,EACV,YAAaoY,EACb,MAAA8jB,EACA,KAAA4a,CACF,EACM3tC,EAAA,QAAQo7F,EAASnsF,CAAM,CAAA,CAEjC,EAMA5b,EAAQ,qBAAuB,GAC/B2M,EAAM,IAAI,GAAGo7F,EAAS/nG,EAAS2M,CAAK,CAAA,CACrC,EACI/R,EAAAstG,GAAgB,SAAUC,EAAYlnG,EAAW,CACpD0L,EAAM,eAAe,GAAG1L,EAAW,SAAUR,EAAO,CAC7C,KAAA,QAAQQ,EAAWR,CAAK,GAC5BkM,CAAK,CAAA,CACT,EAGD/R,EAAK,CAAC,eAAe,EAAG,SAAUqG,EAAW,CAC3C0L,EAAM,eAAe,GAAG1L,EAAW,SAAUR,EAAO,CAC7C,KAAA,QAAQQ,EAAWR,CAAK,GAC5BkM,CAAK,CAAA,CACT,EACD2qF,GAAyB,KAAK,eAAgB,KAAM,KAAK,IAAI,CAC/D,EACAgO,EAAQ,UAAU,WAAa,UAAY,CACzC,OAAO,KAAK,SACd,EACAA,EAAQ,UAAU,MAAQ,UAAY,CACpC,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEF,KAAK,UAAU,CACb,OAAQ,CAAA,GACP,EAAI,CACT,EACAA,EAAQ,UAAU,QAAU,UAAY,CACtC,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEF,KAAK,UAAY,GACb,IAAApnG,EAAM,KAAK,OAAO,EAClBA,GACFkqG,GAAuB,KAAK,SAAUC,GAAmB,EAAE,EAE7D,IAAIjB,EAAQ,KACRntD,EAAMmtD,EAAM,KACZtsE,EAAUssE,EAAM,OACfxsG,EAAAwsG,EAAM,iBAAkB,SAAUz7B,EAAW,CACtCA,EAAA,QAAQ7wC,EAASmf,CAAG,CAAA,CAC/B,EACIr/C,EAAAwsG,EAAM,aAAc,SAAUA,EAAO,CACxCA,EAAM,QAAQtsE,EAASmf,CAAG,CAAA,CAC3B,EAEDmtD,EAAM,IAAI,QAAQ,EAGZA,EAAA,KAAOA,EAAM,OAASA,EAAM,WAAaA,EAAM,eAAiBA,EAAM,aAAeA,EAAM,iBAAmBA,EAAM,WAAaA,EAAM,KAAOA,EAAM,IAAMA,EAAM,kBAAoBA,EAAM,OAASA,EAAM,aAAeA,EAAM,eAAiB,KAC9O,OAAA11E,GAAU01E,EAAM,EAAE,CAC3B,EAIA9B,EAAQ,UAAU,OAAS,SAAUnsF,EAAM,CACrC,GAAA,MAAKoqF,EAAmB,EAM5B,IAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEG,KAAA,IAAI,OAAOpqF,CAAI,EACpB,IAAI2hB,EAAU,KAAK,OAGnB,GADK,KAAA,YAAc,KAAK,WAAW,OAAO,EACtC,EAACA,EAGD,KAAAwtE,EAAcxtE,EAAQ,YAAY,OAAO,EACzCkrE,EAAS7sF,GAAQA,EAAK,OAItB,KAAKqqF,EAAc,IACjBwC,GAAU,OACHA,EAAA,KAAKxC,EAAc,EAAE,QAElB8E,EAAA,GACd,KAAK9E,EAAc,EAAI,MAEzB,KAAKD,EAAmB,EAAI,GACxB,GAAA,CACF+E,GAAelE,GAAQ,IAAI,EACbG,GAAA,OAAO,KAAK,KAAM,CAC9B,KAAM,SACN,UAAW9qG,EAAO,CAEhB,SAAU,CAAA,EACT0f,GAAQA,EAAK,SAAS,CAAA,CAC1B,QACMlZ,EAAG,CACV,WAAKsjG,EAAmB,EAAI,GACtBtjG,CAAA,CAER,KAAKsjG,EAAmB,EAAI,GACRoB,GAAA,KAAK,KAAMqB,CAAM,EACjBpB,GAAA,KAAK,KAAMoB,CAAM,GACvC,EACAV,EAAQ,UAAU,YAAc,SAAUh/F,EAAM4nB,EAAK,CACnD,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAQE,GANA90B,EAASkN,CAAI,IACT4nB,EAAA5nB,EACCA,EAAA,IAETA,EAAOA,GAAQ,UACf,KAAK,YAAY,EACb,EAACiiG,GAAejiG,CAAI,EAMxB,KAAI9C,EAAK+kG,GAAejiG,CAAI,EAAE,KAAK,KAAM4nB,CAAG,EACxCF,EAAK,KAAK,IACd,KAAK,WAAaxqB,EAClBwqB,EAAG,IAAIxqB,CAAE,EACX,EAIA8hG,EAAQ,UAAU,YAAc,UAAY,CAC1C,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEF,KAAK,YAAc,KAAK,IAAI,OAAO,KAAK,UAAU,EAClD,KAAK,WAAa,IACpB,EACAA,EAAQ,UAAU,oBAAsB,SAAUkD,EAAU,CAC1D,IAAI/tE,EAAUhhC,EAAO,CAAC,EAAG+uG,CAAQ,EACzB,OAAA/tE,EAAA,KAAOytE,GAAeM,EAAS,IAAI,EACpC/tE,CACT,EAUA6qE,EAAQ,UAAU,eAAiB,SAAU7qE,EAASl0B,EAAK,CACzD,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAOF,GALKnN,EAASmN,CAAG,IACTA,EAAA,CACJ,OAAQ,CAAC,CAACA,CACZ,GAEE,EAACkiG,GAAQhuE,EAAQ,IAAI,GAIpB,KAAK,OAIN,IAAA,KAAK8oE,EAAmB,EAAG,CACxB,KAAA,gBAAgB,KAAK9oE,CAAO,EACjC,MAAA,CAEF,IAAIurE,EAASz/F,EAAI,OACAm+F,GAAA,KAAK,KAAMjqE,EAASurE,CAAM,EAC3C,IAAI0C,EAAQniG,EAAI,MACZmiG,EACF,KAAK,IAAI,MAAM,EACNA,IAAU,IAASzzG,EAAI,QAAQ,QAMxC,KAAK,kBAAkB,EAEL0vG,GAAA,KAAK,KAAMqB,CAAM,EACjBpB,GAAA,KAAK,KAAMoB,CAAM,EACvC,EACAV,EAAQ,UAAU,kBAAoB,UAAY,CAChDrD,GAAU,QAAQ,sBAAuB,KAAK,OAAQ,KAAK,KAAM,CAG/D,cAAe,CAAA,CAAC,CACjB,CACH,EACAqD,EAAQ,UAAU,WAAa,SAAU1pF,EAAQ,CAC/C,GAAI,KAAK,UAAW,CACF,KAAK,GACrB,MAAA,CAEF,IAAIk6B,EAAcl6B,EAAO,YACrBkf,EAAU,KAAK,SAAS,EACxBmgB,EAAcngB,EAAQ,iBAAiBgb,CAAW,EAItDmF,EAAY,WAAWr/B,CAAM,EAQ7B,KAAK,WAAW,WAAa,GACxB,KAAA,QAAQ,OAAO,CACtB,EAGA0pF,EAAQ,cAAgB,UAAY,CAClClB,GAAU,SAAUjN,EAAO,CACzB,IAAIjK,EAAYiK,EAAM,WACZjK,EAAA,iBAAiBiK,EAAM,MAAM,EACvCjK,EAAU,kBAAkB,EAC5BmX,GAAYlN,EAAO,EAAI,EACvBkN,GAAYlN,EAAO,EAAK,EACxBjK,EAAU,KAAK,CACjB,EAIcmX,GAAA,SAAUlN,EAAOwR,EAAa,CAO1C,QANI7tE,EAAUq8D,EAAM,OAChBjK,EAAYiK,EAAM,WAClByR,EAAWD,EAAcxR,EAAM,iBAAmBA,EAAM,aACxD0R,EAAUF,EAAcxR,EAAM,eAAiBA,EAAM,WACrDnpE,EAAKmpE,EAAM,IACXl9C,EAAMk9C,EAAM,KACPhhG,EAAI,EAAGA,EAAIyyG,EAAS,OAAQzyG,IAC1ByyG,EAAAzyG,CAAC,EAAE,QAAU,GAExBwyG,EAAc7tE,EAAQ,cAAc,SAAUwC,EAAeoC,EAAO,CAChDpC,IAAA,UAAYwrE,EAAUppE,CAAK,CAAA,CAC9C,EAAI5E,EAAQ,WAAWguE,CAAS,EACjC,SAASA,EAAUppE,EAAO,CAOxB,IAAIqpE,EAAiBrpE,EAAM,iBAE3BA,EAAM,iBAAmB,GAEzB,IAAIspE,EAAS,OAAStpE,EAAM,GAAK,IAAMA,EAAM,KACzC4a,EAAO,CAACyuD,GAAkBF,EAAQG,CAAM,EAC5C,GAAI,CAAC1uD,EAAM,CACL,IAAA2uD,EAAY5rE,GAAeqC,EAAM,IAAI,EACrCwpE,EAAQP,EAActb,GAAc,SAAS4b,EAAU,KAAMA,EAAU,GAAG,EAM9Ehb,GAAU,SAASgb,EAAU,GAAG,EAIhC3uD,EAAO,IAAI4uD,EACX5uD,EAAK,KAAKxf,EAASmf,CAAG,EACtB4uD,EAAQG,CAAM,EAAI1uD,EAClBsuD,EAAS,KAAKtuD,CAAI,EACftsB,EAAA,IAAIssB,EAAK,KAAK,CAAA,CAEb5a,EAAA,SAAW4a,EAAK,KAAO0uD,EAC7B1uD,EAAK,QAAU,GACfA,EAAK,QAAU5a,EACf4a,EAAK,MAAM,kBAAoB,CAC7B,SAAU5a,EAAM,SAChB,MAAOA,EAAM,cACf,EACA,CAACipE,GAAezb,EAAU,YAAY5yC,EAAM5a,EAAO5E,EAASmf,CAAG,CAAA,CAEjE,QAAS9jD,EAAI,EAAGA,EAAIyyG,EAAS,QAAS,CAChC,IAAAtuD,EAAOsuD,EAASzyG,CAAC,EAChBmkD,EAAK,QAURnkD,KATC,CAAAwyG,GAAeruD,EAAK,WAAW,QAAQ,EACrCtsB,EAAA,OAAOssB,EAAK,KAAK,EACfA,EAAA,QAAQxf,EAASmf,CAAG,EAChB2uD,EAAA,OAAOzyG,EAAG,CAAC,EAChB0yG,EAAQvuD,EAAK,IAAI,IAAMA,GAClB,OAAAuuD,EAAQvuD,EAAK,IAAI,EAErBA,EAAA,KAAOA,EAAK,MAAM,kBAAoB,KAG7C,CAEJ,EACAgqD,GAAiB,SAAUnN,EAAOtgB,EAAQp8C,EAASR,EAAUM,EAAS,CACpE,IAAIO,EAAUq8D,EAAM,OAGpB,GAFAr8D,EAAQ,iBAAiBL,CAAO,EAE5B,CAACR,EAAU,CAIRr/B,EAAA,CAAA,EAAG,OAAOu8F,EAAM,gBAAgB,EAAE,OAAOA,EAAM,YAAY,EAAGgS,CAAQ,EAC3E,MAAA,CAEF,IAAIzoG,EAAQ,CAAC,EACbA,EAAMu5B,EAAW,IAAI,EAAIQ,EAAQR,EAAW,IAAI,EAChDv5B,EAAMu5B,EAAW,OAAO,EAAIQ,EAAQR,EAAW,OAAO,EACtDv5B,EAAMu5B,EAAW,MAAM,EAAIQ,EAAQR,EAAW,MAAM,EACpD,IAAIz9B,EAAY,CACd,SAAAy9B,EACA,MAAAv5B,CACF,EACA65B,IAAY/9B,EAAU,QAAU+9B,GAChC,IAAI6uE,EAAkB3uE,EAAQ,gBAC1B4uE,EACAD,GAAmB,OACrBC,EAAqB9rG,EAAc,EACnC3C,EAAK0uE,GAA2B8/B,CAAe,EAAG,SAAUx3E,EAAI,CAC9D,IAAI03E,EAAUn+B,GAA8Bv5C,EAAI,IAAI,EAChD03E,GAAW,MACMD,EAAA,IAAIC,EAAS,EAAI,CACtC,CACD,GAGHxuE,GAAWA,EAAQ,cAAct+B,EAAW,SAAUkjC,EAAO,CAC3D,IAAI6pE,EAAaF,GAAsBA,EAAmB,IAAI3pE,EAAM,EAAE,GAAK,KAC3E,GAAI,CAAA6pE,EAIA,GAAA3rD,GAAkBnjB,CAAO,EAC3B,GAAIiF,aAAiBurD,GACfxwD,EAAQ,OAASqc,IAAyB,CAACrc,EAAQ,SAAW,CAACiF,EAAM,IAAI,CAAC,WAAY,UAAU,CAAC,GACpE+b,GAAA/b,EAAOjF,EAAS08D,EAAM,IAAI,MAEtD,CACL,IAAIn8D,EAAK8gB,GAAiCpc,EAAM,SAAUA,EAAM,eAAgBjF,EAAQ,KAAM08D,EAAM,IAAI,EACtGn7C,EAAYhhB,EAAG,UACf+gB,EAAc/gB,EAAG,YACfP,EAAQ,OAASqc,IAAyBkF,GAAa,CAACvhB,EAAQ,SAClE6gB,GAAc5b,EAAM,SAAUA,EAAM,eAAgBy3D,EAAM,IAAI,EAM5Dp7C,GACGnhD,EAAAmhD,EAAa,SAAUG,EAAY,CACtCzhB,EAAQ,OAASqc,GAAwB2C,GAAcyC,CAAU,EAAIvC,GAAcuC,CAAU,CAAA,CAC9F,CACH,MAEOG,GAAsB5hB,CAAO,GAElCiF,aAAiBurD,KACQ7uC,GAAA1c,EAAOjF,EAAS08D,EAAM,IAAI,EACrD76C,GAA6B5c,CAAK,EAClC0lE,GAAmBjO,CAAK,IAG3BA,CAAK,EACRr8D,GAAWA,EAAQ,cAAct+B,EAAW,SAAUkjC,EAAO,CAC3D,IAAI6pE,EAAaF,GAAsBA,EAAmB,IAAI3pE,EAAM,EAAE,GAAK,KACvE6pE,GAIKJ,EAAAhS,EAAMl9D,IAAa,SAAW,aAAe,gBAAgB,EAAEyF,EAAM,QAAQ,CAAC,GACtFy3D,CAAK,EACR,SAASgS,EAAS7uD,EAAM,CACtBA,GAAQA,EAAK,SAAWA,EAAKu8B,CAAM,GAAKv8B,EAAKu8B,CAAM,EAAEv8B,EAAK,QAASxf,EAASq8D,EAAM,KAAM18D,CAAO,CAAA,CAEnG,EACgB8pE,GAAA,CACd,iBAAkB,SAAU9pE,EAAS,CACnC2pE,GAAQ,IAAI,EACEG,GAAA,OAAO,KAAK,KAAM9pE,EAAS,CAIvC,cAAeA,EAAQ,WAAa,IAAA,CACrC,CACH,EACA,OAAQ,SAAUA,EAAS8rE,EAAc,CACvC,IAAIzrE,EAAU,KAAK,OACfmf,EAAM,KAAK,KACXjsB,EAAK,KAAK,IACVw7E,EAAc,KAAK,aACnBtc,EAAY,KAAK,WAErB,GAAKpyD,EAGL,CAAAA,EAAQ,iBAAiBL,CAAO,EACtByyD,EAAA,YAAYpyD,EAASL,CAAO,EACtCyyD,EAAU,mBAAmBpyD,CAAO,EAMxB0uE,EAAA,OAAO1uE,EAASmf,CAAG,EACrBizC,EAAA,0BAA0BpyD,EAASL,CAAO,EAIpDgqE,GAAkB,KAAM3pE,CAAO,EAKnB0uE,EAAA,OAAO1uE,EAASmf,CAAG,EAC/BwvD,EAAkB3uE,CAAO,EACfoyD,EAAA,mBAAmBpyD,EAASL,CAAO,EAC7CsqE,GAAO,KAAMjqE,EAASmf,EAAKxf,EAAS8rE,CAAY,EAEhD,IAAI76E,EAAkBoP,EAAQ,IAAI,iBAAiB,GAAK,cACpDlI,EAAWkI,EAAQ,IAAI,UAAU,EACrC9M,EAAG,mBAAmBtC,CAAe,EAEjCkH,GAAY,MAAQA,IAAa,QACnC5E,EAAG,YAAY4E,CAAQ,EAEfqvE,GAAA,QAAQ,cAAennE,EAASmf,CAAG,EAC/C,EACA,gBAAiB,SAAUxf,EAAS,CAClC,IAAI9tB,EAAQ,KACRmuB,EAAU,KAAK,OACfmf,EAAM,KAAK,KAEf,GAAKnf,EAGL,CAAAA,EAAQ,iBAAiBL,CAAO,EAEhC,IAAIivE,EAAqB,CAAC,EAClB5uE,EAAA,cAAc,SAAUwC,EAAe1D,EAAgB,CAC7D,GAAI0D,IAAkB,SAGlB,KAAAqsE,EAAgBh9F,EAAM,wBAAwBitB,CAAc,EAC5D,GAAA+vE,GAAiBA,EAAc,QACjC,GAAIA,EAAc,gBAAiB,CACjC,IAAIjxG,EAASixG,EAAc,gBAAgB/vE,EAAgBkB,EAASmf,EAAKxf,CAAO,EAChF/hC,GAAUA,EAAO,QAAUgxG,EAAmB,KAAKC,CAAa,CAAA,MAEhED,EAAmB,KAAKC,CAAa,EAEzC,CACD,EACD,IAAIC,EAAiBrsG,EAAc,EAC3Bu9B,EAAA,WAAW,SAAUmgB,EAAa,CACxC,IAAI4uD,EAAYl9F,EAAM,WAAWsuC,EAAY,QAAQ,EACrD,GAAI4uD,EAAU,gBAAiB,CAC7B,IAAInxG,EAASmxG,EAAU,gBAAgB5uD,EAAangB,EAASmf,EAAKxf,CAAO,EACzE/hC,GAAUA,EAAO,QAAUkxG,EAAe,IAAI3uD,EAAY,IAAK,CAAC,CAAA,MAEjD2uD,EAAA,IAAI3uD,EAAY,IAAK,CAAC,CACvC,CACD,EACDwuD,EAAkB3uE,CAAO,EAGpB,KAAA,WAAW,mBAAmBA,EAASL,EAAS,CACnD,SAAU,GACV,SAAUmvE,CAAA,CACX,EAGD3E,GAAa,KAAMnqE,EAASmf,EAAKxf,EAAS,GAAImvE,CAAc,EAClD3H,GAAA,QAAQ,cAAennE,EAASmf,CAAG,EAC/C,EACA,WAAY,SAAUxf,EAAS,CAC7B,IAAIK,EAAU,KAAK,OAEdA,IAGLA,EAAQ,iBAAiBL,CAAO,EACtBwzD,GAAA,iBAAiBxzD,EAAS,YAAY,EAChDgvE,EAAkB3uE,CAAO,EAEpB,KAAA,WAAW,mBAAmBA,EAASL,EAAS,CACnD,SAAU,EAAA,CACX,EACDsqE,GAAO,KAAMjqE,EAAS,KAAK,KAAML,EAAS,EAAE,EAC5CwnE,GAAU,QAAQ,cAAennE,EAAS,KAAK,IAAI,EACrD,EACA,aAAc,SAAUL,EAAS,CAE/B,IAAI9tB,EAAQ,KACRmuB,EAAU,KAAK,OAEdA,IAGLA,EAAQ,iBAAiBL,CAAO,EAExBK,EAAA,WAAW,SAAUmgB,EAAa,CAC5BA,EAAA,UAAU,eAAe,CAAA,CACtC,EAESgzC,GAAA,iBAAiBxzD,EAAS,cAAc,EAClDgvE,EAAkB3uE,CAAO,EAEpB,KAAA,WAAW,mBAAmBA,EAASL,EAAS,CACnD,WAAY,SACZ,SAAU,EAAA,CACX,EACOK,EAAA,cAAc,SAAUwC,EAAe1D,EAAgB,CAC7D,GAAI0D,IAAkB,SAAU,CAC1B,IAAAqsE,EAAgBh9F,EAAM,wBAAwBitB,CAAc,EAC/C+vE,GAAAA,EAAc,SAAWA,EAAc,aAAa/vE,EAAgBkB,EAASnuB,EAAM,KAAM8tB,CAAO,CAAA,CACnH,CACD,EACOK,EAAA,WAAW,SAAUmgB,EAAa,CACxC,IAAI4uD,EAAYl9F,EAAM,WAAWsuC,EAAY,QAAQ,EACrD4uD,EAAU,aAAa5uD,EAAangB,EAASnuB,EAAM,KAAM8tB,CAAO,CAAA,CACjE,EACDwnE,GAAU,QAAQ,cAAennE,EAAS,KAAK,IAAI,EACrD,EACA,aAAc,SAAUL,EAAS,CACjB8pE,GAAA,OAAO,KAAK,KAAM9pE,CAAO,CAAA,CAE3C,EACA+pE,GAAiB,SAAUrN,EAAOp4D,EAAYtD,EAAQzhC,EAAO,CAC3D,GAAIm9F,EAAM,UAAW,CACHA,EAAM,GACtB,MAAA,CAMF,QAJIr8D,EAAUq8D,EAAM,OAChB2S,EAAe3S,EAAM,aAAa,qBAAqB,EACvDz+F,EACAkvG,EAAeF,GAAsB5sE,EAASW,CAAM,EAC/CtlC,EAAI,EAAGA,EAAI2zG,EAAa,OAAQ3zG,IAAK,CACxC,IAAAglD,EAAW2uD,EAAa3zG,CAAC,EACzB,GAAAglD,EAASpc,CAAU,IAAMrmC,EAASyiD,EAASpc,CAAU,EAAEjE,EAAS8sE,EAAc5tG,CAAK,IAAM,KACpF,OAAAtB,CACT,CAKJ,EACoB+rG,GAAA,SAAUtN,EAAOr8D,EAAS,CAC5C,IAAIivE,EAAY5S,EAAM,WAClBjK,EAAYiK,EAAM,WACdr8D,EAAA,WAAW,SAAUmgB,EAAa,CACxCiyC,EAAU,kBAAkBjyC,EAAa8uD,EAAU9uD,EAAY,QAAQ,CAAC,CAAA,CACzE,CACH,EACmBypD,GAAA,SAAUjqE,EAASurE,EAAQ,CAC5C,IAAIr5F,EAAQ,KACRmuB,EAAU,KAAK,SAAS,EACxB6iB,EAAcljB,EAAQ,KACtBuvE,EAAgBvvE,EAAQ,cACxBwvE,EAAaxB,GAAQ9qD,CAAW,EAChCusD,EAAaD,EAAW,WACxBE,GAAcD,EAAW,QAAU,UAAU,MAAM,GAAG,EACtD1b,EAAe2b,EAAW,IAAI,EAC9BC,EAAUD,EAAW,CAAC,GAAK,MAAQ9sE,GAAe8sE,EAAW,CAAC,CAAC,EACnE,KAAK5G,EAAmB,EAAI,GACxB,IAAA8G,EAAW,CAAC5vE,CAAO,EACnB6vE,EAAU,GAEV7vE,EAAQ,QACA6vE,EAAA,GACVD,EAAWn0G,EAAIukC,EAAQ,MAAO,SAAUzB,EAAM,CAC5C,OAAAA,EAAOt/B,EAASD,EAAO,CAAI,EAAAu/B,CAAI,EAAGyB,CAAO,EACzCzB,EAAK,MAAQ,KACNA,CAAA,CACR,GAEH,IAAIuxE,EAAgB,CAAC,EACjB/B,EACAgC,EAAiBnuD,GAAsB5hB,CAAO,EAC9CgwE,EAAa7sD,GAAkBnjB,CAAO,EA8B1C,GA5BIgwE,GACFzwD,GAAa,KAAK,IAAI,EAEnBp/C,EAAAyvG,EAAU,SAAUK,EAAW,CASlC,GAPAlC,EAAWyB,EAAW,OAAOS,EAAW/9F,EAAM,OAAQA,EAAM,IAAI,EAEhE67F,EAAWA,GAAY/uG,EAAO,CAAA,EAAIixG,CAAS,EAElClC,EAAA,KAAO0B,EAAW,OAAS1B,EAAS,KAC7C+B,EAAc,KAAK/B,CAAQ,EAEvBiC,EAAY,CACV,IAAAzvE,EAAK2vE,GAAyBlwE,CAAO,EACvCU,EAAiBH,EAAG,eACpBE,EAAoBF,EAAG,kBACrBugB,EAAoBrgB,EAAoBC,EAAe,KAAK,EAAE,CAAC,EAAI,SACxDmpE,GAAA33F,EAAO6hF,EAAckc,EAAWnvD,CAAiB,EAChE6pD,GAAmBz4F,CAAK,OACf69F,GAGMlG,GAAA33F,EAAO6hF,EAAckc,EAAW,QAAQ,EACvDtF,GAAmBz4F,CAAK,GACfy9F,GACT9F,GAAe33F,EAAO6hF,EAAckc,EAAWN,EAAQ,KAAMA,EAAQ,GAAG,CAC1E,CACD,EACG5b,IAAiB,QAAU,CAACic,GAAc,CAACD,GAAkB,CAACJ,EAC5D,GAAA,CAEE,KAAK5G,EAAc,GACrBY,GAAQ,IAAI,EACEG,GAAA,OAAO,KAAK,KAAM9pE,CAAO,EACvC,KAAK+oE,EAAc,EAAI,MAEvBe,GAAc/V,CAAY,EAAE,KAAK,KAAM/zD,CAAO,QAEzCx6B,EAAG,CACV,WAAKsjG,EAAmB,EAAI,GACtBtjG,CAAA,CAcV,GAVIqqG,EACS9B,EAAA,CACT,KAAM0B,EAAW,OAASvsD,EAC1B,cAAAqsD,EACA,MAAOO,CACT,EAEA/B,EAAW+B,EAAc,CAAC,EAE5B,KAAKhH,EAAmB,EAAI,GACxB,CAACyC,EAAQ,CACX,IAAIzO,EAAgB,KAAK,eAGzB,GAFcA,EAAA,QAAQiR,EAAS,KAAMA,CAAQ,EAEzCgC,EAAgB,CAClB,IAAII,EAAS,CACX,KAAM,gBACN,cAAAZ,EACA,SAAUxtD,GAAsB1hB,CAAO,EACvC,YAAaL,EAAQ,aAAe,GACpC,WAAYA,EAAQ,KACpB,kBAAmBA,CACrB,EACc88D,EAAA,QAAQqT,EAAO,KAAMA,CAAM,CAAA,CAC3C,CAEJ,EACAjG,GAAsB,SAAUqB,EAAQ,CAEtC,QADI6E,EAAiB,KAAK,gBACnBA,EAAe,QAAQ,CACxB,IAAApwE,EAAUowE,EAAe,MAAM,EAClBnG,GAAA,KAAK,KAAMjqE,EAASurE,CAAM,CAAA,CAE/C,EACApB,GAAsB,SAAUoB,EAAQ,CACrC,CAAAA,GAAU,KAAK,QAAQ,SAAS,CACnC,EAaoBnB,GAAA,SAAU72E,EAAImpE,EAAO,CACpCnpE,EAAA,GAAG,WAAY,SAAUpS,EAAQ,CAC5Bu7E,EAAA,QAAQ,WAAYv7E,CAAM,EAShCoS,EAAG,UAAU,cAAgB,CAACmpE,EAAMqM,EAAc,GAAK,CAACrM,EAAM,WAAW,YAAc,CAACA,EAAM,gBAAgB,QAC5GA,EAAM,QAAQ,UAAU,CAC1B,CACD,CACH,EACiB2N,GAAA,SAAU92E,EAAImpE,EAAO,CACjCnpE,EAAA,GAAG,YAAa,SAAU/tB,EAAG,CAC9B,IAAIuD,EAAKvD,EAAE,OACPi8C,EAAas7C,GAAoBh0F,EAAIg6C,EAAoB,EACzDtB,IAC+BD,GAAAC,EAAYj8C,EAAGk3F,EAAM,IAAI,EAC1DiO,GAAmBjO,CAAK,EAE3B,CAAA,EAAE,GAAG,WAAY,SAAUl3F,EAAG,CAC7B,IAAIuD,EAAKvD,EAAE,OACPi8C,EAAas7C,GAAoBh0F,EAAIg6C,EAAoB,EACzDtB,IAC8BC,GAAAD,EAAYj8C,EAAGk3F,EAAM,IAAI,EACzDiO,GAAmBjO,CAAK,EAE3B,CAAA,EAAE,GAAG,QAAS,SAAUl3F,EAAG,CAC1B,IAAIuD,EAAKvD,EAAE,OACPi8C,EAAas7C,GAAoBh0F,EAAI,SAAUtK,EAAQ,CAClD,OAAA08C,GAAU18C,CAAM,EAAE,WAAa,MACrC,EAAI,EACP,GAAIgjD,EAAY,CACV,IAAAisD,EAAajsD,EAAW,SAAW,WAAa,SAChDjG,EAASL,GAAUsG,CAAU,EACjCi7C,EAAM,KAAK,eAAe,CACxB,KAAMgR,EACN,SAAUlyD,EAAO,SACjB,gBAAiBA,EAAO,UACxB,YAAaA,EAAO,YACpB,YAAa,EAAA,CACd,CAAA,CACH,CACD,CACH,EACA,SAASwzD,EAAkB3uE,EAAS,CAClCA,EAAQ,kBAAkB,EAClBA,EAAA,WAAW,SAAUmgB,EAAa,CACxCA,EAAY,kBAAkB,CAAA,CAC/B,CAAA,CAIH,SAAS6vD,EAAgBhwE,EAAS,CAEhC,IAAIiwE,EAAmB,CAAC,EACpBC,EAAgB,CAAC,EACjBC,EAAoB,GAcxB,GAbQnwE,EAAA,cAAc,SAAUwC,EAAe1D,EAAgB,CAC7D,IAAI6oC,EAAS7oC,EAAe,IAAI,QAAQ,GAAK,EACzCsxE,EAAItxE,EAAe,IAAI,GAAG,GAAK,EAC/BuxE,EAAYvxE,EAAe,aAAa,EACxBqxE,EAAAA,GAAqB,CAAC,CAACE,GAC1C7tE,IAAkB,SAAW0tE,EAAgBD,GAAkB,KAAK,CACnE,OAAAtoC,EACA,EAAAyoC,EACA,IAAKtxE,EAAe,eACpB,KAAM0D,EACN,IAAK6tE,CAAA,CACN,CAAA,CACF,EACGF,EAAmB,CAEjB,IAAAG,EAAUL,EAAiB,OAAOC,CAAa,EAC/CK,EACAC,EACI53F,GAAA03F,EAAS,SAAU3tG,EAAGC,EAAG,CAC3B,OAAAD,EAAE,SAAWC,EAAE,OACVD,EAAE,EAAIC,EAAE,EAEVD,EAAE,OAASC,EAAE,MAAA,CACrB,EACI9C,EAAAwwG,EAAS,SAAUpyE,EAAM,CAC5B,IAAIY,EAAiBkB,EAAQ,aAAa9B,EAAK,KAAMA,EAAK,GAAG,EACzDypC,EAASzpC,EAAK,OACdhgC,EAAMggC,EAAK,IACXqyE,GAAsB,OACf5oC,EAAA,KAAK,IAAI4oC,EAAoB5oC,CAAM,GAE1CzpE,GACEypE,IAAW4oC,GAAsBryG,IAAQsyG,GAC3C7oC,IAEgB6oC,EAAAtyG,GACTsyG,IACL7oC,IAAW4oC,GACb5oC,IAEgB6oC,EAAA,IAECD,EAAA5oC,EACrB7oC,EAAe,UAAU6oC,CAAM,CAAA,CAChC,CAAA,CACH,CAEFsiC,GAAS,SAAU5N,EAAOr8D,EAASmf,EAAKxf,EAAS8rE,EAAc,CAC7DuE,EAAgBhwE,CAAO,EACvBkqE,GAAiB7N,EAAOr8D,EAASmf,EAAKxf,EAAS8rE,CAAY,EACtD3rG,EAAAu8F,EAAM,aAAc,SAAUiQ,EAAO,CACxCA,EAAM,QAAU,EAAA,CACjB,EACDnC,GAAa9N,EAAOr8D,EAASmf,EAAKxf,EAAS8rE,CAAY,EAElD3rG,EAAAu8F,EAAM,aAAc,SAAUiQ,EAAO,CACnCA,EAAM,SACHA,EAAA,OAAOtsE,EAASmf,CAAG,CAC3B,CACD,CACH,EACA+qD,GAAmB,SAAU7N,EAAOr8D,EAASmf,EAAKxf,EAAS8rE,EAAcgF,EAAW,CAClF3wG,EAAK2wG,GAAapU,EAAM,iBAAkB,SAAUwS,EAAe,CACjE,IAAI/vE,EAAiB+vE,EAAc,QACnC6B,EAAY5xE,EAAgB+vE,CAAa,EACzCA,EAAc,OAAO/vE,EAAgBkB,EAASmf,EAAKxf,CAAO,EAC1DgxE,EAAQ7xE,EAAgB+vE,CAAa,EACrC+B,EAAa9xE,EAAgB+vE,CAAa,CAAA,CAC3C,CACH,EAIA1E,GAAe,SAAU9N,EAAOr8D,EAASmf,EAAKxf,EAAS8rE,EAAcoF,EAAU,CAE7E,IAAIze,EAAYiK,EAAM,WACPoP,EAAA9sG,EAAO8sG,GAAgB,GAAI,CACxC,cAAezrE,EAAQ,UAAU,CAAA,CAClC,EAEDmnE,GAAU,QAAQ,sBAAuBnnE,EAASmf,EAAKssD,CAAY,EACnE,IAAIzT,EAAa,GACTh4D,EAAA,WAAW,SAAUmgB,EAAa,CACxC,IAAI4uD,EAAY1S,EAAM,WAAWl8C,EAAY,QAAQ,EACrD4uD,EAAU,QAAU,GACpB,IAAIjX,EAAaiX,EAAU,WACjB3c,EAAA,cAAc0F,EAAYn4D,CAAO,EAE3C+wE,EAAYvwD,EAAa4uD,CAAS,EAC9B8B,GAAYA,EAAS,IAAI1wD,EAAY,GAAG,GAC1C23C,EAAW,MAAM,EAEfA,EAAW,QAAQ1F,EAAU,eAAe0F,CAAU,CAAC,IAC5CE,EAAA,IAEf+W,EAAU,MAAM,OAAS,CAAC,CAAC5uD,EAAY,IAAI,QAAQ,EAInD2wD,EAAY3wD,EAAa4uD,CAAS,EAClCvtD,GAA6BrB,CAAW,CAAA,CACzC,EACSiyC,EAAA,WAAa4F,GAAc5F,EAAU,WAC/C+U,GAAU,QAAQ,sBAAuBnnE,EAASmf,EAAKssD,CAAY,EAEnEtE,GAAU,QAAQ,oBAAqBnnE,EAASmf,EAAKssD,CAAY,EACzDzrE,EAAA,WAAW,SAAUmgB,EAAa,CACxC,IAAI4uD,EAAY1S,EAAM,WAAWl8C,EAAY,QAAQ,EAErDwwD,EAAQxwD,EAAa4uD,CAAS,EAG9B6B,EAAazwD,EAAa4uD,CAAS,CAAA,CACpC,EAEDgC,EAAuB1U,EAAOr8D,CAAO,EACrCmnE,GAAU,QAAQ,qBAAsBnnE,EAASmf,EAAKssD,CAAY,CACpE,EACAnB,GAAqB,SAAUjO,EAAO,CACpCA,EAAMsM,EAAuB,EAAI,GAE3BtM,EAAA,QAAQ,OAAO,CACvB,EACAkO,GAAqB,SAAUlO,EAAO,CAC/BA,EAAMsM,EAAuB,IAGlCtM,EAAM,MAAM,EAAE,QAAQ,SAAS,SAAU3zF,EAAI,CAEvCsoG,GAAyBtoG,CAAE,GAG/BuoG,EAAmBvoG,CAAE,CAAA,CACtB,EACD2zF,EAAMsM,EAAuB,EAAI,GACnC,EACA,SAASsI,EAAmBvoG,EAAI,CAI9B,QAHIwoG,EAAY,CAAC,EACb77C,EAAY3sD,EAAG,cAEVrN,EAAI,EAAGA,EAAIg6D,EAAU,OAAQh6D,IAAK,CACrC,IAAAi2B,EAAY+jC,EAAUh6D,CAAC,EACrBi2B,IAAc,YAAcA,IAAc,QAAUA,IAAc,UACtE4/E,EAAU,KAAK5/E,CAAS,CAC1B,CAGE5oB,EAAG,UAAYA,EAAG,OAAO,QAC3BwoG,EAAU,KAAK,QAAQ,EAErBxoG,EAAG,aAAeizC,IAAwBjzC,EAAG,OAAO,SACtDwoG,EAAU,KAAK,UAAU,EAChBxoG,EAAG,aAAegzC,IAAoBhzC,EAAG,OAAO,MACzDwoG,EAAU,KAAK,MAAM,EAEvBxoG,EAAG,UAAUwoG,CAAS,CAAA,CAEf,SAAAH,EAAuB1U,EAAOr8D,EAAS,CAC9C,IAAI9M,EAAKmpE,EAAM,IACXnqF,EAAUghB,EAAG,QACbi+E,EAAU,EACNj/F,EAAA,SAAS,SAAUxJ,EAAI,CACxBA,EAAG,SACNyoG,GACF,CACD,EACGA,EAAUnxE,EAAQ,IAAI,qBAAqB,GAAK,CAAC7lC,EAAI,MAAQ,CAACA,EAAI,QAC5D6lC,EAAA,WAAW,SAAUmgB,EAAa,CACxC,GAAI,CAAAA,EAAY,uBAGhB,KAAI4uD,EAAY1S,EAAM,WAAWl8C,EAAY,QAAQ,EACjD4uD,EAAU,SACFA,EAAA,aAAa,SAAUrmG,EAAI,CAC/BA,EAAG,OAAO,WACTA,EAAA,OAAO,SAAS,WAAa,GAClC,CACD,EACH,CACD,CACH,CAMO,SAAAooG,EAAY3wD,EAAa4uD,EAAW,CAC3C,IAAIqC,EAAYjxD,EAAY,IAAI,WAAW,GAAK,KACtC4uD,EAAA,aAAa,SAAUrmG,EAAI,CAE9BA,EAAG,UAENA,EAAG,MAAM,MAAQ0oG,EACnB,CACD,CAAA,CAGM,SAAAT,EAAQ/rE,EAAO4a,EAAM,CAC5B,GAAI,CAAA5a,EAAM,aAGV,KAAIwrE,EAAIxrE,EAAM,IAAI,GAAG,GAAK,EACtB+iC,EAAS/iC,EAAM,IAAI,QAAQ,GAAK,EAE/B4a,EAAA,aAAa,SAAU92C,EAAI,CACpB,OAAA2oG,EAAA3oG,EAAI0nG,EAAGzoC,EAAQ,IAAS,EAE3B,EAAA,CACR,EAAA,CAGH,SAAS0pC,EAAU3oG,EAAI0nG,EAAGzoC,EAAQ2pC,EAAO,CAEnC,IAAAn8C,EAAQzsD,EAAG,eAAe,EAC1B6oG,EAAY7oG,EAAG,iBAAiB,EAChC8oG,EAAU9oG,EAAG,QACjB,GAAI8oG,EAGF,QADIv4F,EAAWvQ,EAAG,YAAY,EACrBrN,EAAI,EAAGA,EAAI4d,EAAS,OAAQ5d,IAC3Bi2G,EAAA,KAAK,IAAID,EAAUp4F,EAAS5d,CAAC,EAAG+0G,EAAGzoC,EAAQ2pC,CAAK,EAAGA,CAAK,OAIlE5oG,EAAG,EAAI0nG,EACP1nG,EAAG,OAASi/D,EACZ2pC,EAAQ,KAAK,IAAI5oG,EAAG,GAAI4oG,CAAK,EAU/B,GAPIn8C,IACFA,EAAM,EAAIi7C,EACVj7C,EAAM,OAASwS,EAGf,SAAS2pC,CAAK,IAAMn8C,EAAM,GAAKm8C,EAAQ,IAErCC,EAAW,CACb,IAAIE,EAAsB/oG,EAAG,oBAC7B6oG,EAAU,EAAInB,EACdmB,EAAU,OAAS5pC,EACV,SAAA2pC,CAAK,IAAMC,EAAU,GAAKD,GAASG,GAAuBA,EAAoB,UAAY,EAAI,IAAA,CAElG,OAAAH,CAAA,CAIA,SAAAZ,EAAY9rE,EAAO4a,EAAM,CAC3BA,EAAA,aAAa,SAAU92C,EAAI,CAE1B,GAAAsoG,CAAAA,GAAyBtoG,CAAE,EAG3B,KAAAqpB,EAAcrpB,EAAG,eAAe,EAChC2Q,EAAY3Q,EAAG,iBAAiB,EAChCA,EAAG,kBACLA,EAAG,gBAAkB,MAEnBqpB,GAAeA,EAAY,kBAC7BA,EAAY,gBAAkB,MAE5B1Y,GAAaA,EAAU,kBACzBA,EAAU,gBAAkB,MAG1B3Q,EAAG,YACLA,EAAG,WAAaA,EAAG,cACnBA,EAAG,YAAY,GACNA,EAAG,aACZA,EAAG,WAAa,MAClB,CACD,CAAA,CAEM,SAAAkoG,EAAahsE,EAAO4a,EAAM,CAC7B,IAAAkyD,EAAsB9sE,EAAM,SAAS,gBAAgB,EACrD+sE,EAAkB/sE,EAAM,mBAAmB,EAC3Cjd,EAAW+pF,EAAoB,IAAI,UAAU,EAC7CE,EAAkBjqF,EAAW,EAAI,CACnC,SAAAA,EACA,MAAO+pF,EAAoB,IAAI,OAAO,EACtC,OAAQA,EAAoB,IAAI,QAAQ,CAAA,EAEtC,KACClyD,EAAA,aAAa,SAAU92C,EAAI,CAC9B,GAAIA,EAAG,QAAUA,EAAG,OAAO,SAAU,CAE/B,GAAAsoG,GAAyBtoG,CAAE,EAC7B,OAOF,GALIA,aAAcu0F,IAChBl6C,GAAer6C,CAAE,EAIfA,EAAG,QAAS,CACd,IAAImpG,EAAanpG,EAAG,WAEhBmpG,GACFnpG,EAAG,UAAUmpG,CAAU,CACzB,CAGF,GAAIF,EAAiB,CACnBjpG,EAAG,gBAAkBkpG,EACjB,IAAA7/E,EAAcrpB,EAAG,eAAe,EAChC2Q,EAAY3Q,EAAG,iBAAiB,EAEhCqpB,IACFA,EAAY,gBAAkB6/E,GAE5Bv4F,IACFA,EAAU,gBAAkBu4F,EAC9B,CAGElpG,EAAG,SACLuoG,EAAmBvoG,CAAE,CACvB,CACF,CACD,CAAA,CAGH0hG,GAAqB,SAAU/N,EAAO,CAC7B,OAAA,IAAkB,SAAU1qF,EAAQ,CACzCC,EAAUwxB,EAASzxB,CAAM,EACzB,SAASyxB,GAAU,CACjB,OAAOzxB,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAAA,CAErD,OAAAyxB,EAAA,UAAU,qBAAuB,UAAY,CAC5C,OAAAi5D,EAAM,aAAa,qBAAqB,CACjD,EACQj5D,EAAA,UAAU,sBAAwB,SAAU16B,EAAI,CACtD,KAAOA,GAAI,CACT,IAAIopG,EAAYppG,EAAG,kBACnB,GAAIopG,GAAa,KACf,OAAOzV,EAAM,OAAO,aAAayV,EAAU,SAAUA,EAAU,KAAK,EAEtEppG,EAAKA,EAAG,MAAA,CAEZ,EACA06B,EAAQ,UAAU,cAAgB,SAAU16B,EAAIk2C,EAAgB,CAC9DD,GAAcj2C,EAAIk2C,CAAc,EAChC0rD,GAAmBjO,CAAK,CAC1B,EACAj5D,EAAQ,UAAU,cAAgB,SAAU16B,EAAIk2C,EAAgB,CAC9DC,GAAcn2C,EAAIk2C,CAAc,EAChC0rD,GAAmBjO,CAAK,CAC1B,EACQj5D,EAAA,UAAU,UAAY,SAAU16B,EAAI,CAC1Co2C,GAAUp2C,CAAE,EACZ4hG,GAAmBjO,CAAK,CAC1B,EACQj5D,EAAA,UAAU,UAAY,SAAU16B,EAAI,CAC1Cq2C,GAAUr2C,CAAE,EACZ4hG,GAAmBjO,CAAK,CAC1B,EACQj5D,EAAA,UAAU,YAAc,SAAU16B,EAAI,CAC5Cs2C,GAAYt2C,CAAE,EACd4hG,GAAmBjO,CAAK,CAC1B,EACQj5D,EAAA,UAAU,YAAc,SAAU16B,EAAI,CAC5Cu2C,GAAYv2C,CAAE,EACd4hG,GAAmBjO,CAAK,CAC1B,EACQj5D,EAAA,UAAU,SAAW,UAAY,CACvC,OAAOi5D,EAAM,SAAS,CACxB,EACQj5D,EAAA,UAAU,wBAA0B,SAAUtE,EAAgB,CAC7D,OAAAu9D,EAAM,wBAAwBv9D,CAAc,CACrD,EACQsE,EAAA,UAAU,qBAAuB,SAAU+c,EAAa,CACvD,OAAAk8C,EAAM,qBAAqBl8C,CAAW,CAC/C,EACO/c,CAAA,EACPquC,EAAY,GAAG4qB,CAAK,CACxB,EACAgO,GAAgB,SAAUiC,EAAO,CACtB,SAAAyF,EAA4BC,EAAQn1B,EAAQ,CACnD,QAASxhF,EAAI,EAAGA,EAAI22G,EAAO,OAAQ32G,IAAK,CAClC,IAAA42G,EAAaD,EAAO32G,CAAC,EACzB42G,EAAWpJ,EAAkB,EAAIhsB,CAAA,CACnC,CAEG/8E,EAAAstG,GAAgB,SAAUC,EAAYlnG,EAAW,CACpDmmG,EAAM,eAAe,GAAGnmG,EAAW,SAAUR,EAAO,CAClD,GAAIqmG,GAAgBM,EAAM,KAAK,GAAKA,EAAMzD,EAAkB,IAAMC,GAAwB,CACpF,GAAAnjG,GAASA,EAAM,cACjB,OAEE,IAAAusG,EAAW5F,EAAM,oBAAoB3mG,CAAK,EAC1CwsG,EAAgB,CAAC,EAChBryG,EAAA82B,GAAW,SAAUq7E,EAAY,CAChCA,IAAe3F,GAAS2F,EAAW,QAAU3F,EAAM,OACrD6F,EAAc,KAAKF,CAAU,CAC/B,CACD,EACDF,EAA4BI,EAAerJ,EAAsB,EAC5DhpG,EAAAqyG,EAAe,SAAUF,EAAY,CACpCA,EAAWpJ,EAAkB,IAAME,IACrCkJ,EAAW,eAAeC,CAAQ,CACpC,CACD,EACDH,EAA4BI,EAAenJ,EAAsB,CAAA,CACnE,CACD,CAAA,CACF,CACH,CAAA,EACA,EACKwB,CAAA,EACP/kG,EAAQ,EACN2sG,GAAe5H,GAAQ,UAC3B4H,GAAa,GAAKnJ,GAAwC,IAAI,EAC9DmJ,GAAa,IAAMnJ,GAAwC,KAAK,EAKhEmJ,GAAa,IAAM,SAAUlsG,EAAWlG,EAAIwG,EAAK,CAC/C,IAAI0hB,EAAO,KAEX,SAASmqF,GAAU,CAEjB,QADIC,EAAQ,CAAC,EACJ70G,EAAK,EAAGA,EAAK,UAAU,OAAQA,IAChC60G,EAAA70G,CAAE,EAAI,UAAUA,CAAE,EAE1BuC,GAAMA,EAAG,OAASA,EAAG,MAAM,KAAMsyG,CAAK,EAEjCpqF,EAAA,IAAIhiB,EAAWmsG,CAAO,CAAA,CAI7B,KAAK,GAAG,KAAK,KAAMnsG,EAAWmsG,EAAS7rG,CAAG,CAC5C,EACA,IAAIwmG,GAAoB,CAAC,QAAS,WAAY,YAAa,WAAY,YAAa,YAAa,UAAW,YAAa,aAAa,EAMtI,IAAIW,GAAU,CAAC,EAIXP,GAAiB,CAAC,EAClBnC,GAAqB,CAAC,EACtBz9B,GAA0B,CAAC,EAC3Bw9B,GAAc,CAAC,EACfP,GAAe,CAAC,EAChBgD,GAAiB,CAAC,EAClB72E,GAAY,CAAC,EACbo1E,GAAkB,CAAC,EACnBuG,GAAS,CAAK,IAAA,KAAS,EAEvBhF,GAAoB,qBAWR,SAAAn1E,GAAKh1B,EAAKkqE,EAAOjvD,EAAM,CAEvB,CAMR,IAAAm0F,EAAgBC,GAAiBrvG,CAAG,EACxC,GAAIovG,EAIK,OAAAA,CAMT,CAEF,IAAIlG,EAAQ,IAAI9B,GAAQpnG,EAAKkqE,EAAOjvD,CAAI,EACxC,OAAAiuF,EAAM,GAAK,MAAQiG,KACT37E,GAAA01E,EAAM,EAAE,EAAIA,EACVgB,GAAuBlqG,EAAKmqG,GAAmBjB,EAAM,EAAE,EACnEjC,GAAciC,CAAK,EACTnF,GAAA,QAAQ,YAAamF,CAAK,EAC7BA,CACT,CA2DO,SAASmG,GAAiBrvG,EAAK,CACpC,OAAOwzB,GAAU87E,GAAuBtvG,EAAKmqG,EAAiB,CAAC,CACjE,CAOgB,SAAAoF,GAAcnnG,EAAM8hE,EAAO,CACzCm9B,GAAaj/F,CAAI,EAAI8hE,CACvB,CAIO,SAASslC,GAAqBC,EAAkB,CACjD7zG,EAAQwuE,GAAyBqlC,CAAgB,EAAI,GACvDrlC,GAAwB,KAAKqlC,CAAgB,CAEjD,CACgB,SAAAC,GAAkBC,EAAUC,EAAW,CACnCC,GAAAhI,GAAoB8H,EAAUC,EAAWpL,EAA0B,CACvF,CAKO,SAASsL,GAAiBC,EAAc,CAC7CC,GAAwB,YAAaD,CAAY,CACnD,CAKO,SAASE,GAAmBC,EAAgB,CACjDF,GAAwB,cAAeE,CAAc,CACvD,CACgB,SAAAF,GAAwB5nG,EAAMxL,EAAI,CACtCmnG,GAAA,GAAG37F,EAAMxL,CAAE,CACvB,CACgB,SAAAuzG,GAAenE,EAAYlpG,EAAWstG,EAAQ,CACxDhzG,EAAW0F,CAAS,IACbstG,EAAAttG,EACGA,EAAA,IAEV,IAAAmnG,EAAa/uG,EAAS8wG,CAAU,EAAIA,EAAW,KAAO,CAACA,EAAYA,EAAa,CAClF,MAAOlpG,CACR,CAAA,EAAE,CAAC,EAEJkpG,EAAW,OAASA,EAAW,OAAS/B,GAAY,YAAY,EAChEnnG,EAAYkpG,EAAW,MACnB,CAAAhC,GAAelnG,CAAS,IAK5BzE,GAAOmnG,GAAW,KAAKyE,CAAU,GAAKzE,GAAW,KAAK1iG,CAAS,CAAC,EAC3DynG,GAAQN,CAAU,IACrBM,GAAQN,CAAU,EAAI,CACpB,OAAAmG,EACA,WAAApE,CACF,GAEFhC,GAAelnG,CAAS,EAAImnG,EAC9B,CACgB,SAAAoG,GAAyB5yG,EAAM6yG,EAAiB,CACtC7hC,GAAA,SAAShxE,EAAM6yG,CAAe,CACxD,CAaA,SAASC,GAAeZ,EAAUa,EAAY,CAC5CX,GAAkBjI,GAAa+H,EAAUa,EAAY9L,GAAwB,QAAQ,CACvF,CACA,SAAS+L,GAAed,EAAUe,EAAY,CAC5Cb,GAAkBjI,GAAa+H,EAAUe,EAAY7L,GAAuB,QAAQ,CACtF,CAEA,IAAI8L,GAAkB,CAAC,EACvB,SAASd,GAAkBe,EAAYjB,EAAUtvE,EAAIwwE,EAAiB3a,EAAY,CAehF,IAdI94F,EAAWuyG,CAAQ,GAAKz0G,EAASy0G,CAAQ,KACtCtvE,EAAAsvE,EACMA,EAAAkB,GAYT,EAAAj1G,EAAQ+0G,GAAiBtwE,CAAE,GAAK,GAGpC,CAAAswE,GAAgB,KAAKtwE,CAAE,EACvB,IAAIw0D,EAAef,GAAU,iBAAiBzzD,EAAI61D,CAAU,EAC5DrB,EAAa,OAAS8a,EACtB9a,EAAa,MAAQx0D,EACrBuwE,EAAW,KAAK/b,CAAY,EAC9B,CACgB,SAAAic,GAAgB1oG,EAAM2oG,EAAW,CAC/C1G,GAAejiG,CAAI,EAAI2oG,CACzB,CA6BgB,SAAAC,GAAYC,EAASC,EAASC,EAAc,CACtDH,IAAAA,EAAc7M,GAAQ,aAAa,EACvC6M,GAAeA,EAAYC,EAASC,EAASC,CAAY,CAC3D,CAKO,IAAIC,GAAoBxzB,GAe/B6yB,GAAe7L,GAAwBvS,EAAe,EACtDoe,GAAe1L,GAAmChS,EAAa,EAC/D0d,GAAe1L,GAAmC9R,EAAoB,EACtEwd,GAAe7L,GAAwBvM,EAAgB,EACvDoY,GAAe1L,GAAmCnM,EAAc,EAChE6X,GAAetL,GAAuBrB,EAAK,EAC3C0L,GAAqB9H,EAAc,EACnCgI,GAAkBpL,GAA8B1vB,EAAS,EACzDk8B,GAAgB,UAAWO,EAAc,EAEzClB,GAAe,CACb,KAAMv3D,GACN,MAAOA,GACP,OAAQA,EACV,EAAGx4C,EAAI,EACP+vG,GAAe,CACb,KAAMt3D,GACN,MAAOA,GACP,OAAQA,EACV,EAAGz4C,EAAI,EACP+vG,GAAe,CACb,KAAMr3D,GACN,MAAOA,GACP,OAAQA,EACV,EAAG14C,EAAI,EACP+vG,GAAe,CACb,KAAMp3D,GACN,MAAOA,GACP,OAAQA,EACV,EAAG34C,EAAI,EACP+vG,GAAe,CACb,KAAMn3D,GACN,MAAOA,GACP,OAAQA,EACV,EAAG54C,EAAI,EAEPmvG,GAAc,QAAStY,EAAU,EACjCsY,GAAc,OAAQ+B,EAAS,ECjrE/B,SAASC,GAAwBC,EAA4B,CAC3D,OAAOA,GAA8B,KAAO,EAAIA,EAA2B,QAAU,CACvF,CACA,SAASC,GAAiB32E,EAAM,CAC9B,OAAOA,CACT,CACA,IAAI42E,GAA0B,UAAY,CAIxC,SAASA,EAAWC,EAAQC,EAAQC,EAAcC,EAAcj1G,EAEhEk1G,EAAU,CACR,KAAK,KAAOJ,EACZ,KAAK,KAAOC,EACZ,KAAK,cAAgBC,GAAgBJ,GACrC,KAAK,cAAgBK,GAAgBL,GAErC,KAAK,QAAU50G,EACf,KAAK,kBAAoBk1G,IAAa,UAC1C,CAIE,OAAAL,EAAW,UAAU,IAAM,SAAUx0G,EAAM,CACzC,YAAK,KAAOA,EACL,IACR,EAIDw0G,EAAW,UAAU,OAAS,SAAUx0G,EAAM,CAC5C,YAAK,QAAUA,EACR,IACR,EAIDw0G,EAAW,UAAU,gBAAkB,SAAUx0G,EAAM,CACrD,YAAK,iBAAmBA,EACjB,IACR,EAIDw0G,EAAW,UAAU,gBAAkB,SAAUx0G,EAAM,CACrD,YAAK,iBAAmBA,EACjB,IACR,EAIDw0G,EAAW,UAAU,iBAAmB,SAAUx0G,EAAM,CACtD,YAAK,kBAAoBA,EAClB,IACR,EAIDw0G,EAAW,UAAU,OAAS,SAAUx0G,EAAM,CAC5C,YAAK,QAAUA,EACR,IACR,EACDw0G,EAAW,UAAU,QAAU,UAAY,CACzC,KAAK,KAAK,kBAAoB,mBAAqB,kBAAkB,EAAG,CACzE,EACDA,EAAW,UAAU,iBAAmB,UAAY,CAClD,IAAIC,EAAS,KAAK,KACdC,EAAS,KAAK,KACdI,EAAkB,CAAE,EACpBC,EAAgB,IAAI,MAAMN,EAAO,MAAM,EACvCO,EAAgB,IAAI,MAAMN,EAAO,MAAM,EAC3C,KAAK,cAAcD,EAAQ,KAAMM,EAAe,eAAe,EAC/D,KAAK,cAAcL,EAAQI,EAAiBE,EAAe,eAAe,EAC1E,QAASj6G,EAAI,EAAGA,EAAI05G,EAAO,OAAQ15G,IAAK,CACtC,IAAIk6G,EAASF,EAAch6G,CAAC,EACxBm6G,EAAeJ,EAAgBG,CAAM,EACrCE,EAAkBd,GAAwBa,CAAY,EAE1D,GAAIC,EAAkB,EAAG,CAGvB,IAAIC,EAASF,EAAa,MAAO,EAC7BA,EAAa,SAAW,IAC1BJ,EAAgBG,CAAM,EAAIC,EAAa,CAAC,GAE1C,KAAK,SAAW,KAAK,QAAQE,EAAQr6G,CAAC,CAC9C,MAAiBo6G,IAAoB,GAC7BL,EAAgBG,CAAM,EAAI,KAC1B,KAAK,SAAW,KAAK,QAAQC,EAAcn6G,CAAC,GAE5C,KAAK,SAAW,KAAK,QAAQA,CAAC,CAEtC,CACI,KAAK,gBAAgBi6G,EAAeF,CAAe,CACpD,EA0BDN,EAAW,UAAU,iBAAmB,UAAY,CAClD,IAAIC,EAAS,KAAK,KACdC,EAAS,KAAK,KACdW,EAAkB,CAAE,EACpBP,EAAkB,CAAE,EACpBC,EAAgB,CAAE,EAClBC,EAAgB,CAAE,EACtB,KAAK,cAAcP,EAAQY,EAAiBN,EAAe,eAAe,EAC1E,KAAK,cAAcL,EAAQI,EAAiBE,EAAe,eAAe,EAC1E,QAASj6G,EAAI,EAAGA,EAAIg6G,EAAc,OAAQh6G,IAAK,CAC7C,IAAIk6G,EAASF,EAAch6G,CAAC,EACxBu6G,EAAeD,EAAgBJ,CAAM,EACrCC,EAAeJ,EAAgBG,CAAM,EACrCM,EAAkBlB,GAAwBiB,CAAY,EACtDH,EAAkBd,GAAwBa,CAAY,EAC1D,GAAIK,EAAkB,GAAKJ,IAAoB,EAC7C,KAAK,kBAAoB,KAAK,iBAAiBD,EAAcI,CAAY,EACzER,EAAgBG,CAAM,EAAI,aACjBM,IAAoB,GAAKJ,EAAkB,EACpD,KAAK,kBAAoB,KAAK,iBAAiBD,EAAcI,CAAY,EACzER,EAAgBG,CAAM,EAAI,aACjBM,IAAoB,GAAKJ,IAAoB,EACtD,KAAK,SAAW,KAAK,QAAQD,EAAcI,CAAY,EACvDR,EAAgBG,CAAM,EAAI,aACjBM,EAAkB,GAAKJ,EAAkB,EAClD,KAAK,mBAAqB,KAAK,kBAAkBD,EAAcI,CAAY,EAC3ER,EAAgBG,CAAM,EAAI,aACjBM,EAAkB,EAC3B,QAAS5R,EAAM,EAAGA,EAAM4R,EAAiB5R,IACvC,KAAK,SAAW,KAAK,QAAQ2R,EAAa3R,CAAG,CAAC,OAGhD,KAAK,SAAW,KAAK,QAAQ2R,CAAY,CAEjD,CACI,KAAK,gBAAgBN,EAAeF,CAAe,CACpD,EACDN,EAAW,UAAU,gBAAkB,SAAUQ,EAAeF,EAAiB,CAC/E,QAAS,EAAI,EAAG,EAAIE,EAAc,OAAQ,IAAK,CAC7C,IAAIQ,EAASR,EAAc,CAAC,EACxBE,EAAeJ,EAAgBU,CAAM,EACrCC,EAAepB,GAAwBa,CAAY,EACvD,GAAIO,EAAe,EACjB,QAASxuG,EAAI,EAAGA,EAAIwuG,EAAcxuG,IAChC,KAAK,MAAQ,KAAK,KAAKiuG,EAAajuG,CAAC,CAAC,OAE/BwuG,IAAiB,GAC1B,KAAK,MAAQ,KAAK,KAAKP,CAAY,EAGrCJ,EAAgBU,CAAM,EAAI,IAChC,CACG,EACDhB,EAAW,UAAU,cAAgB,SAAU/0G,EAE/C3E,EAIA46G,EAAQC,EAAe,CAErB,QADIC,EAAiB,KAAK,kBACjB76G,EAAI,EAAGA,EAAI0E,EAAI,OAAQ1E,IAAK,CAEnC,IAAI6C,EAAM,OAAS,KAAK+3G,CAAa,EAAEl2G,EAAI1E,CAAC,EAAGA,CAAC,EAIhD,GAHK66G,IACHF,EAAO36G,CAAC,EAAI6C,GAEV,EAAC9C,EAGL,KAAI+6G,EAAY/6G,EAAI8C,CAAG,EACnB63G,EAAepB,GAAwBwB,CAAS,EAChDJ,IAAiB,GAGnB36G,EAAI8C,CAAG,EAAI7C,EACP66G,GACFF,EAAO,KAAK93G,CAAG,GAER63G,IAAiB,EAC1B36G,EAAI8C,CAAG,EAAI,CAACi4G,EAAW96G,CAAC,EAExB86G,EAAU,KAAK96G,CAAC,EAExB,CACG,EACMy5G,CACT,EAAG,EC9MCsB,GAAkC,UAAY,CACvCA,SAAAA,EAAmBtzC,EAAQuzC,EAAY,CAC9C,KAAK,QAAUvzC,EACf,KAAK,QAAUuzC,CAAA,CAEjBD,OAAAA,EAAmB,UAAU,IAAM,UAAY,CACtC,MAAA,CAEL,eAAgB,KAAK,uBAAuB,EAC5C,OAAQ,KAAK,OACf,CACF,EAQAA,EAAmB,UAAU,uBAAyB,UAAY,CAC5D,OAAC,KAAK,kBACR,KAAK,gBAAkB,KAAK,QAAU,KAAK,QAAQ,yBAAA,EAA6B,CAAC,GAE5E,KAAK,eACd,EACOA,CACP,EAAA,EAEc,SAAAE,GAAoBz2G,EAAM8pF,EAAQ,CAChD,IAAI4sB,EAAU,CAAC,EACXzzC,EAASyzC,EAAQ,OAAS,CAAC,EAC3BC,EAAsB/zG,EAAc,EACpCg0G,EAAiB,CAAC,EAClBC,EAAmB,CAAC,EACpBC,EAAmB,CAAC,EACnB72G,EAAAD,EAAK,WAAY,SAAUgrE,EAAS,CACnC,IAAA8kB,EAAU9vF,EAAK,iBAAiBgrE,CAAO,EACvComB,EAAWtB,EAAQ,SACvB,GAAIsB,EAAU,CAIZ,IAAI2lB,EAAgBjnB,EAAQ,cAC5BknB,GAAqB/zC,EAAQmuB,CAAQ,EAAE2lB,CAAa,EAAI/rC,EACnD8kB,EAAQ,eACS6mB,EAAA,IAAIvlB,EAAU,CAAC,EAK/B6lB,GAAgBnnB,EAAQ,IAAI,IAC9B8mB,EAAe,CAAC,EAAI5rC,GAIDgsC,GAAAF,EAAkB1lB,CAAQ,EAAE2lB,CAAa,EAAI/2G,EAAK,kBAAkB8vF,EAAQ,IAAI,GAEnGA,EAAQ,gBACV+mB,EAAiB,KAAK7rC,CAAO,CAC/B,CAEgB1C,GAAA,KAAK,SAAUtkE,EAAG+xC,EAAU,CACxC,IAAAmhE,EAAYF,GAAqB/zC,EAAQltB,CAAQ,EACjD00B,EAAWqlB,EAAQ,UAAU/5C,CAAQ,EACrC00B,GAAY,MAAQA,IAAa,KACzBysC,EAAAzsC,CAAQ,EAAIqlB,EAAQ,KAChC,CACD,CAAA,CACF,EACD,IAAIqnB,EAAkB,CAAC,EACnBC,EAAyB,CAAC,EACVT,EAAA,KAAK,SAAU3yG,EAAGotF,EAAU,CAC1C,IAAAtM,EAAS7hB,EAAOmuB,CAAQ,EACLgmB,EAAAhmB,CAAQ,EAAItM,EAAO,CAAC,EAGzBqyB,EAAAA,EAAgB,OAAOryB,CAAM,CAAA,CAChD,EACD4xB,EAAQ,gBAAkBS,EAC1BT,EAAQ,sBAAwBn7G,EAAI47G,EAAiB,SAAUnsC,EAAS,CAC/D,OAAAhrE,EAAK,iBAAiBgrE,CAAO,EAAE,aAAA,CACvC,EACD0rC,EAAQ,uBAAyBU,EACjC,IAAIC,EAAcp0C,EAAO,MAGrBo0C,GAAeA,EAAY,SAC7BT,EAAiBS,EAAY,MAAM,GAErC,IAAIC,EAAgBr0C,EAAO,QACvB,OAAAq0C,GAAiBA,EAAc,OACjCT,EAAmBS,EAAc,MAAM,EAC7BT,EAAiB,SAC3BA,EAAmBD,EAAe,MAAM,GAE1C3zC,EAAO,eAAiB2zC,EACxB3zC,EAAO,iBAAmB4zC,EAC1BH,EAAQ,WAAa,IAAIH,GAAmBO,EAAkBhtB,CAAM,EAC7D4sB,CACT,CACA,SAASM,GAAqB/zC,EAAQptB,EAAK,CACzC,OAAKotB,EAAO,eAAeptB,CAAG,IACrBotB,EAAAptB,CAAG,EAAI,CAAC,GAEVotB,EAAOptB,CAAG,CACnB,CAEO,SAAS0hE,GAAuBC,EAAU,CAC/C,OAAOA,IAAa,WAAa,UAAYA,IAAa,OAAS,OAAS,OAC9E,CACA,SAASP,GAAgBhsC,EAAS,CAGzB,MAAA,EAAEA,IAAY,WAAaA,IAAY,OAChD,CCnHA,IAAIwsC,GAAqC,UAAY,CAInD,SAASA,EAAsB7rG,EAAK,CAkClC,KAAK,UAAY,CAAE,EACfA,GAAO,MACT63B,EAAc,KAAM73B,CAAG,CAE7B,CACE,OAAO6rG,CACT,EAAG,EC1CC5wC,GAAQ9mC,GAAW,EACnB23E,GAAe,CACjB,MAAO,IACP,IAAK,IACL,QAAS,IACT,OAAQ,IACR,KAAM,GACR,EAYIC,GAAgC,UAAY,CAC9C,SAASA,EAAiB/rG,EAAK,CAC7B,KAAK,WAAaA,EAAI,WACtB,KAAK,YAAcA,EAAI,iBACvB,KAAK,OAASA,EAAI,OAClB,KAAK,cAAgBA,EAAI,mBACzB,KAAK,kBAAkBA,EAAI,gBAAgB,CAC/C,CACE,OAAA+rG,EAAiB,UAAU,mBAAqB,UAAY,CAC1D,OAAO,KAAK,WACb,EACDA,EAAiB,UAAU,kBAAoB,SAAUC,EAAkB,CACzE,KAAK,YAAcA,EACdA,IAGA,KAAK,cACR,KAAK,YAAcC,GAAuB,KAAK,MAAM,GAExD,EAQDF,EAAiB,UAAU,wBAA0B,SAAU3sC,EAAS,CACtE,OAAO1pE,EAAU,KAAK,YAAY,IAAI0pE,CAAO,EAAG,EAAE,CACnD,EAMD2sC,EAAiB,UAAU,mBAAqB,SAAUltC,EAAU,CAClE,IAAII,EAAmB,KAAK,OAAO,iBACnC,GAAIA,EACF,OAAOA,EAAiBJ,CAAQ,CAEnC,EACDktC,EAAiB,UAAU,gBAAkB,UAAY,CAQvD,QAPIG,EAAW,KAAK,cAChBC,EAAyBt9B,GAAyB,KAAK,MAAM,EAC7Du9B,EAAiB,CAACC,GAA2BH,CAAQ,EAGrDI,EAAU,GACVr/B,EAAO,CAAE,EACJs/B,EAAa,EAAGC,EAAe,EAAGD,EAAaL,EAAUK,IAAc,CAC9E,IAAI77B,EAAW,OACXt7E,EAAO,OACPgjF,EAAc,OACdq0B,EAAe,KAAK,WAAWD,CAAY,EAE/C,GAAIC,GAAgBA,EAAa,gBAAkBF,EACjD77B,EAAWy7B,EAAyBM,EAAa,KAAO,KACxDr3G,EAAOq3G,EAAa,KACpBr0B,EAAcq0B,EAAa,YAC3BD,QACK,CACL,IAAIE,EAAe,KAAK,mBAAmBH,CAAU,EACjDG,IACFh8B,EAAWy7B,EAAyBO,EAAa,KAAO,KACxDt3G,EAAOs3G,EAAa,KAE9B,CACMz/B,EAAK,KAAK,CACR,SAAUyD,EACV,KAAMt7E,EACN,YAAagjF,CACrB,CAAO,EAOG+zB,GAA0Bz7B,GAAY,OAGtC,CAAC+7B,GAAgB,CAACA,EAAa,sBACjCH,GAAWF,EAET17B,EAAS,QAAQ,MAAO,IAAI,EAAE,QAAQ,MAAO,IAAI,EAEjDA,GAEJ47B,GAAW,IACXA,GAAWR,GAAa12G,CAAI,GAAK,IAC7BgjF,IACFk0B,GAAWl0B,EAAY,KAEzBk0B,GAAW,GACjB,CAII,IAAIp6G,EAAS,KAAK,OACdy6G,EAAO,CAACz6G,EAAO,eAAgBA,EAAO,WAAYo6G,CAAO,EAAE,KAAK,IAAI,EACxE,MAAO,CACL,WAAYr/B,EACZ,KAAM0/B,CACP,CACF,EACDZ,EAAiB,UAAU,yBAA2B,UAAY,CAEhE,QADI55G,EAAS,CAAE,EACNo6G,EAAa,EAAGC,EAAe,EAAGD,EAAa,KAAK,cAAeA,IAAc,CACxF,IAAIjgD,EAAS,OACTmgD,EAAe,KAAK,WAAWD,CAAY,EAE/C,GAAIC,GAAgBA,EAAa,gBAAkBF,EAC5CE,EAAa,qBAChBngD,EAASmgD,EAAa,MAExBD,QACK,CACL,IAAIE,EAAe,KAAK,mBAAmBH,CAAU,EACjDG,IACFpgD,EAASogD,EAAa,KAEhC,CACMv6G,EAAO,KAAKm6D,CAAM,CACxB,CACI,OAAOn6D,CACR,EACD45G,EAAiB,UAAU,2BAA6B,SAAUp3B,EAAQ,CACxE,KAAK,WAAW,KAAKA,CAAM,EAC3BA,EAAO,mBAAqB,GAC5B,KAAK,gBAIL,KAAK,kBAAkB,EAAI,CAC5B,EACMo3B,CACT,EAAG,EAEI,SAASa,GAAmB1uB,EAAQ,CACzC,OAAOA,aAAkB6tB,EAC3B,CACO,SAASc,GAAiBpuC,EAAS,CAExC,QADIquC,EAAiB91G,EAAe,EAC3BpH,EAAI,EAAGA,GAAK6uE,GAAW,CAAE,GAAE,OAAQ7uE,IAAK,CAC/C,IAAIm9G,EAAgBtuC,EAAQ7uE,CAAC,EACzBo9G,EAAcn6G,EAASk6G,CAAa,EAAIA,EAAc,KAAOA,EAC7DC,GAAe,MAAQF,EAAe,IAAIE,CAAW,GAAK,MAC5DF,EAAe,IAAIE,EAAap9G,CAAC,CAEvC,CACE,OAAOk9G,CACT,CACO,SAASb,GAAuB/5G,EAAQ,CAC7C,IAAI+6G,EAAchyC,GAAM/oE,CAAM,EAC9B,OAAO+6G,EAAY,aAAeA,EAAY,WAAaJ,GAAiB36G,EAAO,gBAAgB,EACrG,CACO,SAASm6G,GAA2BH,EAAU,CACnD,OAAOA,EAAW,EACpB,CCvKA,IAAIr5G,GAAWmlE,EACXroE,GAAMquB,EACN84D,GAAiB,OAAO,WAAe,IAAc,MAAQ,WAG7Do2B,GAAY,QACZC,GAAkB,GAElBC,GAA0B,CAAC,gBAAiB,YAAa,UAAW,sBAAuB,cAAe,aAAc,WAAY,kBAAmB,cAAe,YAAa,kBAAkB,EACrMC,GAAmB,CAAC,oBAAoB,EAIxCC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GACAC,GAA0B,UAAY,CAM/BA,SAAAA,EAAWC,EAAiBC,EAAW,CAC9C,KAAK,KAAO,OACZ,KAAK,YAAc,GACnB,KAAK,UAAY,CAAC,EAClB,KAAK,QAAU,CAAC,EAKhB,KAAK,QAAU,CAAC,EAEhB,KAAK,QAAU,CAAC,EAEhB,KAAK,aAAe,CAAC,EAErB,KAAK,aAAe,CAAC,EAErB,KAAK,YAAc,CAAC,EAEpB,KAAK,mBAAqB,CAAC,EAC3B,KAAK,iBAAmB,CAAC,EAKzB,KAAK,cAAgB,GAGrB,KAAK,qBAAuB,CAAC,eAAgB,aAAc,mBAAoB,iBAAkB,KAAK,EAEjG,KAAA,kBAAoB,CAAC,aAAc,aAAa,EACrD,KAAK,mBAAqB,CAAC,aAAc,mBAAoB,gBAAgB,EACzE,IAAAt5B,EACAu5B,EAAoB,GACpBpB,GAAmBkB,CAAe,GACpCr5B,EAAaq5B,EAAgB,WACxB,KAAA,YAAcA,EAAgB,mBAAmB,EACtD,KAAK,QAAUA,IAEKE,EAAA,GACPv5B,EAAAq5B,GAEFr5B,EAAAA,GAAc,CAAC,IAAK,GAAG,EAMpC,QALIw5B,EAAiB,CAAC,EAClBC,EAAiB,CAAC,EAClBC,EAAqB,CAAC,EACtBC,EAAc,GACdC,EAAW,CAAC,EACPz+G,EAAI,EAAGA,EAAI6kF,EAAW,OAAQ7kF,IAAK,CAEtC,IAAA0+G,EAAe75B,EAAW7kF,CAAC,EAC3B2+G,EAAgB7gF,EAAgB4gF,CAAY,EAAI,IAAIzC,GAAsB,CAC5E,KAAMyC,CAAA,CACP,EAAMA,aAAwBzC,GAAmEyC,EAA1C,IAAIzC,GAAsByC,CAAY,EAC1FE,EAAgBD,EAAc,KACpBA,EAAA,KAAOA,EAAc,MAAQ,QACtCA,EAAc,WACjBA,EAAc,SAAWC,EACzBD,EAAc,cAAgB,GAEhC,IAAIE,EAAYF,EAAc,UAAYA,EAAc,WAAa,CAAC,EACtEL,EAAe,KAAKM,CAAa,EACjCP,EAAeO,CAAa,EAAID,EAC5BF,EAASG,CAAa,GAAK,OACfJ,EAAA,IAEZG,EAAc,wBACGJ,EAAAK,CAAa,EAAI,CAAC,GAEnCC,EAAU,WAAa,IACzB,KAAK,YAAc7+G,GAEjB6+G,EAAU,SAAW,IACvB,KAAK,UAAY7+G,GAKfo+G,IACFO,EAAc,cAAgB3+G,EAChC,CAOF,GALA,KAAK,WAAas+G,EAClB,KAAK,UAAYD,EACjB,KAAK,sBAAsBG,CAAW,EACtC,KAAK,UAAYL,EACjB,KAAK,oBAAsBI,EACvB,KAAK,YAAa,CACpB,IAAIO,EAAiB,KAAK,cAAgBppB,EAAqB,EACxDnmE,EAAK+uF,EAAgB,SAAU9uC,EAAS,CAC7CsvC,EAAe,IAAIT,EAAe7uC,CAAO,EAAE,cAAeA,CAAO,CAAA,CAClE,CAAA,CACH,CAmBFyuC,OAAAA,EAAW,UAAU,aAAe,SAAU5jE,EAAK,CAC7C,IAAAutC,EAAS,KAAK,mBAAmBvtC,CAAG,EACxC,GAAIutC,GAAU,KACL,OAAAvtC,EAGL,GADKutC,EAAAvtC,EACL,CAAC,KAAK,YACD,OAAA,KAAK,WAAWutC,CAAM,EAI/B,IAAIpY,EAAU,KAAK,cAAc,IAAIoY,CAAM,EAC3C,GAAIpY,GAAW,KACN,OAAAA,EAET,IAAIstC,EAAe,KAAK,QAAQ,mBAAmBl1B,CAAM,EACzD,GAAIk1B,EACF,OAAOA,EAAa,IAExB,EAKAmB,EAAW,UAAU,kBAAoB,SAAU5jE,EAAK,CAClD,IAAAutC,EAAS,KAAK,mBAAmBvtC,CAAG,EACxC,GAAIutC,GAAU,KACL,OAAAA,EAET,GAAIvtC,GAAO,KACF,MAAA,GAEL,IAAAkqC,EAAU,KAAK,YAAYlqC,CAAG,EAC3B,OAAAkqC,EAAUA,EAAQ,cAAgB,KAAK,YAAc,KAAK,QAAQ,wBAAwBlqC,CAAG,EAAI,EAC1G,EAoBA4jE,EAAW,UAAU,mBAAqB,SAAU5jE,EAAK,CACnD,GAAAkrB,GAAgBlrB,CAAG,GAEpBA,GAAO,MAAQ,CAAC,MAAMA,CAAG,GAAK,CAAC,KAAK,YAAYA,CAAG,IAAM,CAAC,KAAK,aAAe,KAAK,QAAQ,wBAAwBA,CAAG,EAAI,GAC3H,MAAO,CAACA,CAEZ,EACA4jE,EAAW,UAAU,kBAAoB,SAAU5jE,EAAK,CAClD,IAAAutC,EAAS,KAAK,kBAAkBvtC,CAAG,EAMhC,OAAAutC,CACT,EAOAq2B,EAAW,UAAU,iBAAmB,SAAU5jE,EAAK,CAErD,OAAO,KAAK,YAAY,KAAK,aAAaA,CAAG,CAAC,CAChD,EACA4jE,EAAW,UAAU,sBAAwB,SAAUO,EAAa,CAClE,IAAIH,EAAiB,KAAK,UACrB,KAAA,YAAcG,EAAc,SAAUhvC,EAAS,CAClD,OAAO6uC,EAAe,eAAe7uC,CAAO,EAAI6uC,EAAe7uC,CAAO,EAAI,MAC5E,EAAI,SAAUA,EAAS,CACrB,OAAO6uC,EAAe7uC,CAAO,CAC/B,CACF,EAIAyuC,EAAW,UAAU,qBAAuB,UAAY,CAC/C,OAAA,KAAK,YAAY,gBAAgB,MAAM,CAChD,EACAA,EAAW,UAAU,aAAe,SAAUroB,EAAU13E,EAAK,CAC3D,IAAI6gG,EAAoB,KAAK,YAC7B,GAAI7gG,GAAO,KACF,OAAA6gG,EAAkB,uBAAuBnpB,CAAQ,EAEtD,IAAAvY,EAAO0hC,EAAkB,OAAOnpB,CAAQ,EACrC,OAAAvY,EAAOA,EAAKn/D,CAAG,EAAI,IAC5B,EACA+/F,EAAW,UAAU,iBAAmB,SAAUroB,EAAU,CAC1D,IAAImpB,EAAoB,KAAK,YACzB1hC,EAAO0hC,EAAkB,OAAOnpB,CAAQ,EACpC,OAAAvY,GAAQ,CAAC,GAAG,MAAM,CAC5B,EACA4gC,EAAW,UAAU,SAAW,UAAY,CAC1C,OAAO,KAAK,MACd,EAUAA,EAAW,UAAU,SAAW,SAAUz5G,EAAMw6G,EAAU52B,EAAgB,CACxE,IAAI5xE,EAAQ,KACR8rC,EAIJ,GAHI99C,aAAgB0jF,KACV5lC,EAAA99C,GAEN,CAAC89C,EAAO,CACV,IAAIuiC,EAAa,KAAK,WAClBrF,EAAW1B,GAAiBt5E,CAAI,GAAKy6G,GAAmBz6G,CAAI,EAAI,IAAI66E,GAAoB76E,EAAMqgF,EAAW,MAAM,EAAIrgF,EACvH89C,EAAQ,IAAI4lC,GACZ,IAAIm2B,EAAiBt+G,GAAI8kF,EAAY,SAAUrV,EAAS,CAC/C,MAAA,CACL,KAAMh5D,EAAM,UAAUg5D,CAAO,EAAE,KAC/B,SAAUA,CACZ,CAAA,CACD,EACKltB,EAAA,SAASk9B,EAAU6+B,EAAgBj2B,CAAc,CAAA,CAEzD,KAAK,OAAS9lC,EAEd,KAAK,WAAa08D,GAAY,CAAA,GAAI,MAAM,EACxC,KAAK,QAAU,CAAC,EAChB,KAAK,iBAAmB,CAAC,EACzB,KAAK,QAAQ,EAAG18D,EAAM,MAAA,CAAO,EAG7B,KAAK,YAAc24D,GAAoB,KAAM,KAAK,OAAO,EACpD,KAAA,WAAa,KAAK,YAAY,UACrC,EAIAgD,EAAW,UAAU,WAAa,SAAUz5G,EAAM,CAChD,IAAI+4B,EAAQ,KAAK,OAAO,WAAW/4B,CAAI,EACvC,KAAK,QAAQ+4B,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CACjC,EAgBA0gF,EAAW,UAAU,aAAe,SAAUr1B,EAAQle,EAAO,CAC3D,IAAI7lC,EAAK,KAAK,OAAO,aAAa+jD,EAAQle,GAASA,EAAM,MAAM,EAC7DxwD,EAAQ2qB,EAAG,MACXjI,EAAMiI,EAAG,IACPq6E,EAAuB,KAAK,sBAAsB,EAEtD,GADA,KAAK,mBAAmB,EACpBx0C,EACF,QAASxsD,EAAMhE,EAAOgE,EAAM0e,EAAK1e,IAAO,CACtC,IAAIgrE,EAAYhrE,EAAMhE,EACtB,KAAK,UAAUgE,CAAG,EAAIwsD,EAAMwe,CAAS,EACjCg2B,GACFlB,GAAe,KAAM9/F,CAAG,CAC1B,CAGN,EACA+/F,EAAW,UAAU,mBAAqB,UAAY,CAGpD,QAFI37D,EAAQ,KAAK,OACbuiC,EAAa,KAAK,WACb,EAAI,EAAG,EAAIA,EAAW,OAAQ,IAAK,CAC1C,IAAIN,EAAU,KAAK,UAAUM,EAAW,CAAC,CAAC,EACtCN,EAAQ,aACVjiC,EAAM,mBAAmBiiC,EAAQ,cAAeA,EAAQ,WAAW,CACrE,CAEJ,EACA05B,EAAW,UAAU,sBAAwB,UAAY,CACnD,IAAAz+B,EAAW,KAAK,OAAO,YAAY,EAChC,OAAA,KAAK,WAAa,MAAQA,EAAS,UAAY,EAAA,eAAiBrS,IAA6B,CAACqS,EAAS,WAChH,EACAy+B,EAAW,UAAU,QAAU,SAAU/jG,EAAO0iB,EAAK,CACnD,GAAI,EAAA1iB,GAAS0iB,GAGb,KAAI0lB,EAAQ,KAAK,OACbk9B,EAAWl9B,EAAM,YAAY,EACjC,KAAK,mBAAmB,EACxB,IAAI08D,EAAW,KAAK,UAChBG,EAAS,KAAK,QACdhwC,EAAeqQ,EAAS,UAAA,EAAY,aACpC4/B,EAAmBjwC,IAAiBpC,GASpC,GAAAqyC,GAAoB,CAAC5/B,EAAS,KAEhC,QADI6/B,EAAiB,CAAC,EACbnhG,EAAMhE,EAAOgE,EAAM0e,EAAK1e,IAAO,CAEtC,IAAI+iB,EAAWu+C,EAAS,QAAQthE,EAAKmhG,CAAc,EAInD,GAHI,CAAC,KAAK,eAAiBn+E,GAAiBD,CAAQ,IAClD,KAAK,cAAgB,IAEnBA,EAAU,CACZ,IAAIo4B,EAAWp4B,EAAS,KACpB+9E,EAAS9gG,CAAG,GAAK,MAAQm7C,GAAY,OACvC2lD,EAAS9gG,CAAG,EAAIklB,GAAoBi2B,EAAU,IAAI,GAEpD,IAAIimD,EAASr+E,EAAS,GAClBk+E,EAAOjhG,CAAG,GAAK,MAAQohG,GAAU,OACnCH,EAAOjhG,CAAG,EAAIklB,GAAoBk8E,EAAQ,IAAI,EAChD,CACF,CAGA,GAAA,KAAK,wBACP,QAASphG,EAAMhE,EAAOgE,EAAM0e,EAAK1e,IAC/B8/F,GAAe,KAAM9/F,CAAG,EAG5Bw/F,GAAqB,IAAI,EAC3B,EAeAO,EAAW,UAAU,qBAAuB,SAAU5jE,EAAK,CAClD,OAAA,KAAK,mBAAmBA,CAAG,GAAK,KAAK,OAAO,cAAc,KAAK,kBAAkBA,CAAG,CAAC,CAC9F,EAKA4jE,EAAW,UAAU,qBAAuB,SAAU/rD,EAAQ7X,EAAK,CAC3DA,EAAA,KAAK,aAAaA,CAAG,EAC3B,KAAK,mBAAmBA,CAAG,EAAI6X,EAAO,MAAM,CAC9C,EACA+rD,EAAW,UAAU,mBAAqB,SAAUp7G,EAAK,CAChD,OAAA,KAAK,iBAAiBA,CAAG,CAClC,EACAo7G,EAAW,UAAU,mBAAqB,SAAUp7G,EAAKgB,EAAO,CACrDZ,GAAAJ,CAAG,EAAIolC,EAAc,KAAK,iBAAkBplC,CAAG,EAAI,KAAK,iBAAiBA,CAAG,EAAIgB,CAC3F,EAOAo6G,EAAW,UAAU,QAAU,SAAU//F,EAAK,CACxC,IAAAyrE,EAAW,KAAK,YAAYzrE,CAAG,EAC/B/N,EAAO,KAAK,UAAUw5E,CAAQ,EAClC,OAAIx5E,GAAQ,MAAQ,KAAK,aAAe,OACtCA,EAAOytG,GAAmB,KAAM,KAAK,YAAaj0B,CAAQ,GAExDx5E,GAAQ,OACHA,EAAA,IAEFA,CACT,EACA8tG,EAAW,UAAU,aAAe,SAAUr2B,EAAQ1pE,EAAK,CACzD,IAAIqhG,EAAU,KAAK,OAAO,IAAI33B,EAAQ1pE,CAAG,EACrCsqE,EAAc,KAAK,OAAO,eAAeZ,CAAM,EACnD,OAAIY,EACKA,EAAY,WAAW+2B,CAAO,EAEhCA,CACT,EAOAtB,EAAW,UAAU,MAAQ,SAAU//F,EAAK,CAC1C,OAAOy/F,GAAM,KAAM,KAAK,YAAYz/F,CAAG,CAAC,CAC1C,EACA+/F,EAAW,UAAU,MAAQ,UAAY,CAChC,OAAA,KAAK,OAAO,MAAM,CAC3B,EAMAA,EAAW,UAAU,IAAM,SAAU5jE,EAAKn8B,EAAK,CAC7C,IAAIokC,EAAQ,KAAK,OACbiiC,EAAU,KAAK,UAAUlqC,CAAG,EAChC,GAAIkqC,EACF,OAAOjiC,EAAM,IAAIiiC,EAAQ,cAAermE,CAAG,CAE/C,EAIA+/F,EAAW,UAAU,cAAgB,SAAU5jE,EAAKkvC,EAAQ,CAC1D,IAAIjnC,EAAQ,KAAK,OACbiiC,EAAU,KAAK,UAAUlqC,CAAG,EAChC,GAAIkqC,EACF,OAAOjiC,EAAM,cAAciiC,EAAQ,cAAegF,CAAM,CAE5D,EACA00B,EAAW,UAAU,WAAa,UAAY,CACrC,OAAA,KAAK,OAAO,WAAW,CAChC,EACAA,EAAW,UAAU,cAAgB,SAAU5jE,EAAK,CAClD,OAAO,KAAK,OAAO,cAAc,KAAK,kBAAkBA,CAAG,CAAC,CAC9D,EACA4jE,EAAW,UAAU,OAAS,SAAU5jE,EAAK,CAC3C,OAAO,KAAK,OAAO,OAAO,KAAK,kBAAkBA,CAAG,CAAC,CACvD,EACA4jE,EAAW,UAAU,UAAY,SAAU5jE,EAAK,CAC9C,OAAO,KAAK,OAAO,UAAU,KAAK,kBAAkBA,CAAG,CAAC,CAC1D,EACA4jE,EAAW,UAAU,UAAY,SAAUp5B,EAAY3mE,EAAK,CAC1D,IAAI1H,EAAQ,KACR8rC,EAAQ,KAAK,OACV,OAAAwiB,EAAe+f,CAAU,EAAIviC,EAAM,UAAUviD,GAAI8kF,EAAY,SAAUxqC,EAAK,CAC1E,OAAA7jC,EAAM,kBAAkB6jC,CAAG,CACnC,CAAA,EAAGn8B,CAAG,EAAIokC,EAAM,UAAUuiC,CAAU,CACvC,EAKAo5B,EAAW,UAAU,SAAW,SAAU//F,EAAK,CAE7C,QADIshG,EAAwB,KAAK,YAAY,sBACpC,EAAI,EAAG98G,EAAM88G,EAAsB,OAAQ,EAAI98G,EAAK,IAIvD,GAAA,MAAM,KAAK,OAAO,IAAI88G,EAAsB,CAAC,EAAGthG,CAAG,CAAC,EAC/C,MAAA,GAGJ,MAAA,EACT,EAIA+/F,EAAW,UAAU,YAAc,SAAU9tG,EAAM,CACxC,QAAAnQ,EAAI,EAAG0C,EAAM,KAAK,OAAO,QAAS1C,EAAI0C,EAAK1C,IAClD,GAAI,KAAK,QAAQA,CAAC,IAAMmQ,EACf,OAAAnQ,EAGJ,MAAA,EACT,EACAi+G,EAAW,UAAU,YAAc,SAAU//F,EAAK,CACzC,OAAA,KAAK,OAAO,YAAYA,CAAG,CACpC,EACA+/F,EAAW,UAAU,gBAAkB,SAAUt0B,EAAU,CAClD,OAAA,KAAK,OAAO,gBAAgBA,CAAQ,CAC7C,EAQAs0B,EAAW,UAAU,WAAa,SAAU5jE,EAAKx2C,EAAO,CACtD,IAAI47G,EAAkBplE,GAAO,KAAK,oBAAoBA,CAAG,EAMrDsvC,EAAW81B,GAAmBA,EAAgB57G,CAAK,EACvD,OAAI8lF,GAAY,MAAQ,MAAMA,CAAQ,EAC7B4zB,GAEF5zB,CACT,EASAs0B,EAAW,UAAU,iBAAmB,SAAU5jE,EAAKx2C,EAAO+lF,EAAa,CAClE,OAAA,KAAK,OAAO,iBAAiB,KAAK,kBAAkBvvC,CAAG,EAAGx2C,EAAO+lF,CAAW,CACrF,EACAq0B,EAAW,UAAU,KAAO,SAAU5gC,EAAM14E,EAAIwG,EAAK,CAG/Ck9B,EAAkBg1C,CAAI,IAClBlyE,EAAAxG,EACDA,EAAA04E,EACLA,EAAO,CAAC,GAGV,IAAIqiC,EAAOv0G,GAAO,KACdw0G,EAAa5/G,GAAI89G,GAAoBxgC,CAAI,EAAG,KAAK,kBAAmB,IAAI,EACvE,KAAA,OAAO,KAAKsiC,EAAYD,EAAOppC,EAAY3xE,EAAI+6G,CAAI,EAAI/6G,CAAE,CAChE,EACAs5G,EAAW,UAAU,WAAa,SAAU5gC,EAAM14E,EAAIwG,EAAK,CAGrDk9B,EAAkBg1C,CAAI,IAClBlyE,EAAAxG,EACDA,EAAA04E,EACLA,EAAO,CAAC,GAGV,IAAIqiC,EAAOv0G,GAAO,KACdw0G,EAAa5/G,GAAI89G,GAAoBxgC,CAAI,EAAG,KAAK,kBAAmB,IAAI,EACvE,YAAA,OAAS,KAAK,OAAO,OAAOsiC,EAAYD,EAAOppC,EAAY3xE,EAAI+6G,CAAI,EAAI/6G,CAAE,EACvE,IACT,EAKAs5G,EAAW,UAAU,YAAc,SAAU1gF,EAAO,CAGlD,IAAI/mB,EAAQ,KACRopG,EAAa,CAAC,EACdviC,EAAOthD,GAAYwB,CAAK,EAErBhO,OAAAA,EAAK8tD,EAAM,SAAUhjC,EAAK,CAC3B,IAAAutC,EAASpxE,EAAM,kBAAkB6jC,CAAG,EAC7BulE,EAAAh4B,CAAM,EAAIrqD,EAAM8c,CAAG,CACR,CACvB,EACD,KAAK,OAAS,KAAK,OAAO,YAAYulE,CAAU,EACzC,IACT,EAEA3B,EAAW,UAAU,SAAW,SAAU5gC,EAAM14E,EAAIwG,EAAK,CAGnDk9B,EAAkBg1C,CAAI,IAClBlyE,EAAAxG,EACDA,EAAA04E,EACLA,EAAO,CAAC,GAGVlyE,EAAMA,GAAO,KACb,IAAI5I,EAAS,CAAC,EACT,YAAA,KAAK86E,EAAM,UAAY,CAC1B96E,EAAO,KAAKoC,GAAMA,EAAG,MAAM,KAAM,SAAS,CAAC,GAC1CwG,CAAG,EACC5I,CACT,EACA07G,EAAW,UAAU,IAAM,SAAU5gC,EAAM14E,EAAIwG,EAAK00G,EAAW,CAIzD,IAAAH,EAAOv0G,GAAO00G,GAAa,KAC3BF,EAAa5/G,GAAI89G,GAAoBxgC,CAAI,EAAG,KAAK,kBAAmB,IAAI,EACxErlE,EAAO+lG,GAAyB,IAAI,EACnC,OAAA/lG,EAAA,OAAS,KAAK,OAAO,IAAI2nG,EAAYD,EAAOppC,EAAY3xE,EAAI+6G,CAAI,EAAI/6G,CAAE,EACpEqT,CACT,EACAimG,EAAW,UAAU,OAAS,SAAU5gC,EAAM14E,EAAIwG,EAAK00G,EAAW,CAG5D,IAAAH,EAAOv0G,GAAO00G,GAAa,KAS3BF,EAAa5/G,GAAI89G,GAAoBxgC,CAAI,EAAG,KAAK,kBAAmB,IAAI,EAKvE,KAAA,OAAO,OAAOsiC,EAAYD,EAAOppC,EAAY3xE,EAAI+6G,CAAI,EAAI/6G,CAAE,CAClE,EAKAs5G,EAAW,UAAU,WAAa,SAAUzxB,EAAWxB,EAAMyB,EAAaC,EAAa,CACjF,IAAA10E,EAAO+lG,GAAyB,IAAI,EACnC,OAAA/lG,EAAA,OAAS,KAAK,OAAO,WAAW,KAAK,kBAAkBw0E,CAAS,EAAGxB,EAAMyB,EAAaC,CAAW,EAC/F10E,CACT,EAMAimG,EAAW,UAAU,iBAAmB,SAAUlzB,EAAgBC,EAAM,CAClE,IAAAhzE,EAAO+lG,GAAyB,IAAI,EACnC,OAAA/lG,EAAA,OAAS,KAAK,OAAO,iBAAiB,KAAK,kBAAkB+yE,CAAc,EAAGC,CAAI,EAChFhzE,CACT,EAMAimG,EAAW,UAAU,eAAiB,SAAUlzB,EAAgBC,EAAM,CAChE,IAAAhzE,EAAO+lG,GAAyB,IAAI,EACnC,OAAA/lG,EAAA,OAAS,KAAK,OAAO,eAAe,KAAK,kBAAkB+yE,CAAc,EAAGC,CAAI,EAC9EhzE,CACT,EACAimG,EAAW,UAAU,eAAiB,SAAU//F,EAAK,CAC5C,OAAA,KAAK,OAAO,eAAeA,CAAG,CACvC,EAKA+/F,EAAW,UAAU,aAAe,SAAU//F,EAAK,CACjD,IAAIigG,EAAY,KAAK,UACjBl9E,EAAW,KAAK,eAAe/iB,CAAG,EACtC,OAAO,IAAI0gD,GAAM39B,EAAUk9E,EAAWA,GAAaA,EAAU,OAAO,CACtE,EAIAF,EAAW,UAAU,KAAO,SAAU6B,EAAW,CAC/C,IAAIC,EAAW,KACf,OAAO,IAAItG,GAAWqG,EAAYA,EAAU,WAAW,WAAW,EAAI,CAAC,EAAG,KAAK,SAAS,EAAE,WAAW,EAAG,SAAU5hG,EAAK,CAC9G,OAAAy/F,GAAMmC,EAAW5hG,CAAG,CAC7B,EAAG,SAAUA,EAAK,CACT,OAAAy/F,GAAMoC,EAAU7hG,CAAG,CAAA,CAC3B,CACH,EAIA+/F,EAAW,UAAU,UAAY,SAAUp7G,EAAK,CAC9C,IAAIm9G,EAAS,KAAK,QACX,OAAAA,GAAUA,EAAOn9G,CAAG,CAC7B,EACAo7G,EAAW,UAAU,UAAY,SAAUgC,EAAO5+G,EAAK,CAChD,KAAA,QAAU,KAAK,SAAW,CAAC,EAC5B4B,GAASg9G,CAAK,EACTh4E,EAAO,KAAK,QAASg4E,CAAK,EAE5B,KAAA,QAAQA,CAAK,EAAI5+G,CAE1B,EAKA48G,EAAW,UAAU,cAAgB,SAAU//F,EAAKrb,EAAK,CACnD,IAAAq9G,EAAa,KAAK,aAAahiG,CAAG,EAClC7c,EAAM6+G,GAAcA,EAAWr9G,CAAG,EACtC,OAAIxB,GAEK,KAAK,UAAUwB,CAAG,CAG7B,EAIAo7G,EAAW,UAAU,cAAgB,UAAY,CACxC,OAAA,KAAK,aAAa,OAAS,CACpC,EAKAA,EAAW,UAAU,uBAAyB,SAAU//F,EAAKrb,EAAK,CAChE,IAAIs9G,EAAc,KAAK,aACnBD,EAAaC,EAAYjiG,CAAG,EAC3BgiG,IACUA,EAAAC,EAAYjiG,CAAG,EAAI,CAAC,GAE/B,IAAA7c,EAAM6+G,EAAWr9G,CAAG,EACxB,OAAIxB,GAAO,OACHA,EAAA,KAAK,UAAUwB,CAAG,EAEpBiiE,EAAezjE,CAAG,EACpBA,EAAMA,EAAI,MAAM,EACP4B,GAAS5B,CAAG,IACrBA,EAAM4mC,EAAc,CAAC,EAAG5mC,CAAG,GAE7B6+G,EAAWr9G,CAAG,EAAIxB,GAEbA,CACT,EAEA48G,EAAW,UAAU,cAAgB,SAAU//F,EAAKrb,EAAKgB,EAAO,CAC9D,IAAIq8G,EAAa,KAAK,aAAahiG,CAAG,GAAK,CAAC,EACvC,KAAA,aAAaA,CAAG,EAAIgiG,EACrBj9G,GAASJ,CAAG,EACPolC,EAAOi4E,EAAYr9G,CAAG,EAE7Bq9G,EAAWr9G,CAAG,EAAIgB,CAEtB,EAIAo6G,EAAW,UAAU,eAAiB,UAAY,CAChD,KAAK,QAAU,CAAC,EAChB,KAAK,aAAe,CAAC,CACvB,EACAA,EAAW,UAAU,UAAY,SAAUp7G,EAAKxB,EAAK,CAC1C4B,GAAAJ,CAAG,EAAIolC,EAAc,KAAK,QAASplC,CAAG,EAAI,KAAK,QAAQA,CAAG,EAAIxB,CACzE,EAIA48G,EAAW,UAAU,UAAY,SAAUp7G,EAAK,CACvC,OAAA,KAAK,QAAQA,CAAG,CACzB,EAIAo7G,EAAW,UAAU,cAAgB,SAAU//F,EAAK,CAC3C,OAAA,KAAK,aAAaA,CAAG,CAC9B,EAIA+/F,EAAW,UAAU,cAAgB,SAAU//F,EAAKs3C,EAAQ1yD,EAAO,CACjE,KAAK,aAAaob,CAAG,EAAIpb,EAAQmlC,EAAc,KAAK,aAAa/pB,CAAG,GAAK,GAAIs3C,CAAM,EAAIA,CACzF,EAIAyoD,EAAW,UAAU,iBAAmB,UAAY,CAClD,KAAK,aAAa,OAAS,CAC7B,EAIAA,EAAW,UAAU,iBAAmB,SAAU//F,EAAK7Q,EAAI,CACzD,IAAIsyC,EAAc,KAAK,WAAa,KAAK,UAAU,YACnDD,GAAgBC,EAAa,KAAK,SAAUzhC,EAAK7Q,CAAE,EAC9C,KAAA,YAAY6Q,CAAG,EAAI7Q,CAC1B,EACA4wG,EAAW,UAAU,iBAAmB,SAAU//F,EAAK,CAC9C,OAAA,KAAK,YAAYA,CAAG,CAC7B,EACA+/F,EAAW,UAAU,kBAAoB,SAAUt5G,EAAIC,EAAS,CAC9D2qB,EAAY,KAAK,YAAa,SAAUliB,EAAI6Q,EAAK,CAC3C7Q,GACF1I,GAAMA,EAAG,KAAKC,EAASyI,EAAI6Q,CAAG,CAChC,CACD,CACH,EAKA+/F,EAAW,UAAU,aAAe,SAAUjmG,EAAM,CAClD,OAAKA,IACHA,EAAO,IAAIimG,EAAW,KAAK,QAAU,KAAK,QAAUl+G,GAAI,KAAK,WAAY,KAAK,YAAa,IAAI,EAAG,KAAK,SAAS,GAElH+9G,GAAmB9lG,EAAM,IAAI,EAC7BA,EAAK,OAAS,KAAK,OACZA,CACT,EAIAimG,EAAW,UAAU,WAAa,SAAUr1E,EAAYw3E,EAAgB,CAClE,IAAAC,EAAiB,KAAKz3E,CAAU,EAC/BP,EAAkBg4E,CAAc,IAGhC,KAAA,iBAAmB,KAAK,kBAAoB,CAAC,EAC7C,KAAA,iBAAiB,KAAKz3E,CAAU,EAChC,KAAAA,CAAU,EAAI,UAAY,CAC7B,IAAIloC,EAAM2/G,EAAe,MAAM,KAAM,SAAS,EACvC,OAAAD,EAAe,MAAM,KAAM,CAAC1/G,CAAG,EAAE,OAAO4/G,GAAa,SAAS,CAAC,CAAC,CACzE,EACF,EAIArC,EAAW,cAAgB,UAAY,CACrCP,GAAuB,SAAUl5G,EAAM,CACrC,IAAI+5G,EAAqB/5G,EAAK,oBAC9B+qB,EAAYgvF,EAAoB,SAAUkB,EAAiBplE,EAAK,CAC1D,IAAAkqC,EAAU//E,EAAK,UAAU61C,CAAG,EAE5BmuC,EAAcjE,EAAQ,YACtBjiC,EAAQ99C,EAAK,OACjB,GAAIgkF,EAAa,CACfi3B,EAAkBlB,EAAmBlkE,CAAG,EAAI,IAAI6sC,GAAesB,EAAY,WAAW,MAAM,EAG5F,QAASxoF,EAAI,EAAGA,EAAIy/G,EAAgB,OAAQz/G,IAC1Cy/G,EAAgBz/G,CAAC,EAAIu9G,GAEvB,QAASv9G,EAAI,EAAGA,EAAIsiD,EAAM,MAAA,EAAStiD,IAEjCy/G,EAAgBn9D,EAAM,IAAIiiC,EAAQ,cAAevkF,CAAC,CAAC,EAAIA,CACzD,CACF,CACD,CACH,EACqB49G,GAAA,SAAUp5G,EAAMojF,EAAQ1pE,EAAK,CAChD,OAAOklB,GAAoB5+B,EAAK,aAAaojF,EAAQ1pE,CAAG,EAAG,IAAI,CACjE,EAIQy/F,GAAA,SAAUn5G,EAAMmlF,EAAU,CAC5B,IAAAluD,EAAKj3B,EAAK,QAAQmlF,CAAQ,EAC9B,OAAIluD,GAAM,MAAQj3B,EAAK,WAAa,OAClCi3B,EAAKmiF,GAAmBp5G,EAAMA,EAAK,UAAWmlF,CAAQ,GAEpDluD,GAAM,OACRA,EAAK6hF,GAAY3zB,GAEZluD,CACT,EACAoiF,GAAsB,SAAUh5B,EAAY,CAC1C,OAAK/f,EAAe+f,CAAU,IAC5BA,EAAaA,GAAc,KAAO,CAACA,CAAU,EAAI,CAAC,GAE7CA,CACT,EAIAk5B,GAA2B,SAAUwC,EAAU,CAC7C,IAAIvoG,EAAO,IAAIimG,EAAWsC,EAAS,QAAUA,EAAS,QAAUxgH,GAAIwgH,EAAS,WAAYA,EAAS,YAAaA,CAAQ,EAAGA,EAAS,SAAS,EAE5I,OAAAzC,GAAmB9lG,EAAMuoG,CAAQ,EAC1BvoG,CACT,EACqB8lG,GAAA,SAAU/6G,EAAQT,EAAQ,CACtCitB,EAAKiuF,GAAwB,OAAOl7G,EAAO,kBAAoB,CAAE,CAAA,EAAG,SAAUonB,EAAU,CACzFpnB,EAAO,eAAeonB,CAAQ,IACzB3mB,EAAA2mB,CAAQ,EAAIpnB,EAAOonB,CAAQ,EACpC,CACD,EACD3mB,EAAO,iBAAmBT,EAAO,iBAC1BitB,EAAKkuF,GAAkB,SAAU/zF,EAAU,CAChD3mB,EAAO2mB,CAAQ,EAAI82F,EAAal+G,EAAOonB,CAAQ,CAAC,CAAA,CACjD,EACD3mB,EAAO,iBAAmBklC,EAAc,CAAA,EAAI3lC,EAAO,gBAAgB,CACrE,EACiB07G,GAAA,SAAUx5G,EAAM0Z,EAAK,CACpC,IAAI8gG,EAAWx6G,EAAK,UAChB26G,EAAS36G,EAAK,QACdi8G,EAAaj8G,EAAK,YAClBk8G,EAAWl8G,EAAK,UAChB2L,EAAO6uG,EAAS9gG,CAAG,EACnBud,EAAK0jF,EAAOjhG,CAAG,EAOf,GANA/N,GAAQ,MAAQswG,GAAc,OAChCzB,EAAS9gG,CAAG,EAAI/N,EAAOytG,GAAmBp5G,EAAMi8G,EAAYviG,CAAG,GAE7Dud,GAAM,MAAQilF,GAAY,OAC5BvB,EAAOjhG,CAAG,EAAIud,EAAKmiF,GAAmBp5G,EAAMk8G,EAAUxiG,CAAG,GAEvDud,GAAM,MAAQtrB,GAAQ,KAAM,CAC9B,IAAIwwG,EAAkBn8G,EAAK,iBACvBo8G,EAAQD,EAAgBxwG,CAAI,GAAKwwG,EAAgBxwG,CAAI,GAAK,GAAK,EAC9DsrB,EAAAtrB,EACDywG,EAAQ,IACVnlF,GAAM,SAAWmlF,GAEnBzB,EAAOjhG,CAAG,EAAIud,CAAA,CAElB,CAAA,EACA,EACKwiF,CACP,EAAA,EC95Ba,SAAS4C,GAExBv+G,EAAQ8N,EAAK,CACN0tE,GAAiBx7E,CAAM,IAC1BA,EAAS+7E,GAAiC/7E,CAAM,GAElD8N,EAAMA,GAAO,CAAE,EACf,IAAI0wG,EAAU1wG,EAAI,iBAAmB,CAAE,EACnCy+D,EAAUz+D,EAAI,kBAAoB9N,EAAO,kBAAoB,CAAE,EAC/Dy+G,EAAkB35G,EAAe,EACjCu/E,EAAa,CAAE,EACf21B,EAAW0E,GAAY1+G,EAAQw+G,EAASjyC,EAASz+D,EAAI,eAAe,EAGpE6wG,EAAuB7wG,EAAI,yBAA2BqsG,GAA2BH,CAAQ,EACzF4E,EAA6BryC,IAAYvsE,EAAO,iBAChD46G,EAAiBgE,EAA6B7E,GAAuB/5G,CAAM,EAAI26G,GAAiBpuC,CAAO,EACvGsyC,EAAY/wG,EAAI,aAChB,CAAC+wG,GAAa/wG,EAAI,kBACpB+wG,EAAY/wG,EAAI,gBAAgB9N,EAAQg6G,CAAQ,GAIlD,QAFI8E,EAAeh6G,EAAc+5G,CAAS,EACtCE,EAAa,IAAIn6B,GAAeo1B,CAAQ,EACnCt8G,EAAI,EAAGA,EAAIqhH,EAAW,OAAQrhH,IACrCqhH,EAAWrhH,CAAC,EAAI,GAElB,SAASshH,EAAc15B,EAAQ,CAC7B,IAAI1pE,EAAMmjG,EAAWz5B,CAAM,EAC3B,GAAI1pE,EAAM,EAAG,CACX,IAAIi/F,EAAgBtuC,EAAQ+Y,CAAM,EAC9BlY,EAAazsE,EAASk6G,CAAa,EAAIA,EAAgB,CACzD,KAAMA,CACP,EACG56E,EAAa,IAAI05E,GACjBmB,EAAc1tC,EAAW,KACzB0tC,GAAe,MAAQF,EAAe,IAAIE,CAAW,GAAK,OAI5D76E,EAAW,KAAOA,EAAW,YAAc66E,GAE7C1tC,EAAW,MAAQ,OAASntC,EAAW,KAAOmtC,EAAW,MACzDA,EAAW,aAAe,OAASntC,EAAW,YAAcmtC,EAAW,aACvE,IAAI2qC,EAAS1zB,EAAW,OACxB,OAAA06B,EAAWz5B,CAAM,EAAIyyB,EACrB93E,EAAW,cAAgBqlD,EAC3BjB,EAAW,KAAKpkD,CAAU,EACnBA,CACb,CACI,OAAOokD,EAAWzoE,CAAG,CACzB,CACE,GAAI,CAAC+iG,EACH,QAASjhH,EAAI,EAAGA,EAAIs8G,EAAUt8G,IAC5BshH,EAActhH,CAAC,EAInBohH,EAAa,KAAK,SAAUG,EAAa3rB,EAAU,CACjD,IAAIa,EAAW91D,GAAiB4gF,CAAW,EAAE,MAAO,EAIpD,GAAI9qB,EAAS,SAAW,GAAK,CAACpxF,EAASoxF,EAAS,CAAC,CAAC,GAAKA,EAAS,CAAC,EAAI,EAAG,CACtE2qB,EAAa,IAAIxrB,EAAU,EAAK,EAChC,MACN,CACI,IAAI4rB,EAAgBJ,EAAa,IAAIxrB,EAAU,CAAA,CAAE,EACjDnxF,EAAKgyF,EAAU,SAAUgrB,EAAoBvjG,EAAK,CAEhD,IAAIwjG,EAAer8G,EAASo8G,CAAkB,EAAIvE,EAAe,IAAIuE,CAAkB,EAAIA,EACvFC,GAAgB,MAAQA,EAAepF,IACzCkF,EAActjG,CAAG,EAAIwjG,EACrBC,EAASL,EAAcI,CAAY,EAAG9rB,EAAU13E,CAAG,EAE3D,CAAK,CACL,CAAG,EAED,IAAI0jG,EAAc,EAClBn9G,EAAKq8G,EAAS,SAAUe,EAAe,CACrC,IAAIjsB,EACAksB,EACAC,EACAC,EACJ,GAAI38G,EAASw8G,CAAa,EACxBjsB,EAAWisB,EACXG,EAAa,CAAE,MACV,CACLA,EAAaH,EACbjsB,EAAWosB,EAAW,KACtB,IAAIx5B,EAAcw5B,EAAW,YAC7BA,EAAW,YAAc,KACzBA,EAAa1+G,EAAO,CAAE,EAAE0+G,CAAU,EAClCA,EAAW,YAAcx5B,EAEzBs5B,EAAoBE,EAAW,QAC/BD,EAAsBC,EAAW,UACjCA,EAAW,KAAOA,EAAW,SAAWA,EAAW,cAAgBA,EAAW,QAAUA,EAAW,UAAY,IACrH,CACI,IAAIvrB,EAAW2qB,EAAa,IAAIxrB,CAAQ,EAExC,GAAIa,IAAa,GAKjB,IAFAA,EAAW91D,GAAiB81D,CAAQ,EAEhC,CAACA,EAAS,OACZ,QAASz2F,EAAI,EAAGA,GAAK8hH,GAAqBA,EAAkB,QAAU,GAAI9hH,IAAK,CAC7E,KAAO4hH,EAActF,GAAYgF,EAAcM,CAAW,EAAE,UAAY,MACtEA,IAEFA,EAActF,GAAY7lB,EAAS,KAAKmrB,GAAa,CAC7D,CAGIn9G,EAAKgyF,EAAU,SAAUirB,EAAcnG,EAAe,CACpD,IAAIh5E,EAAa++E,EAAcI,CAAY,EAM3C,GAJIR,GAA8Bc,EAAW,MAAQ,OACnDz/E,EAAW,KAAOy/E,EAAW,MAE/BL,EAASp+G,EAASg/B,EAAYy/E,CAAU,EAAGpsB,EAAU2lB,CAAa,EAC9Dh5E,EAAW,MAAQ,MAAQu/E,EAAmB,CAChD,IAAIG,EAAwBH,EAAkBvG,CAAa,EAC3D,CAACt4G,EAASg/G,CAAqB,IAAMA,EAAwB,CAC3D,KAAMA,CAChB,GACQ1/E,EAAW,KAAOA,EAAW,YAAc0/E,EAAsB,KACjE1/E,EAAW,eAAiB0/E,EAAsB,cAC1D,CAEMF,GAAuBx+G,EAASg/B,EAAW,UAAWw/E,CAAmB,CAC/E,CAAK,EACL,CAAG,EACD,SAASJ,EAASp/E,EAAYqzD,EAAU2lB,EAAe,CACjDzuC,GAAkB,IAAI8oB,CAAQ,GAAK,KACrCrzD,EAAW,UAAUqzD,CAAQ,EAAI2lB,GAEjCh5E,EAAW,SAAWqzD,EACtBrzD,EAAW,cAAgBg5E,EAC3BwF,EAAgB,IAAInrB,EAAU,EAAI,EAExC,CAEE,IAAIssB,EAAgB9xG,EAAI,cACpB+xG,EAAqB/xG,EAAI,mBACzBgyG,EAAWD,GAAsB,KACrCA,EAAqBD,EAAgBC,GAAsB,EAAI,EAC/D,IAAIE,EAAQH,GAAiB,QAC7B,SAASI,EAA0B//E,EAAY,CACzCA,EAAW,MAAQ,OAErBA,EAAW,KAAOA,EAAW,SAEnC,CAEE,GAAK0+E,EAiCHx8G,EAAKkiF,EAAY,SAAUpkD,EAAY,CAErC+/E,EAA0B//E,CAAU,CAC1C,CAAK,EAGDokD,EAAW,KAAK,SAAU47B,EAAOC,EAAO,CACtC,OAAOD,EAAM,cAAgBC,EAAM,aACzC,CAAK,MAxCD,SAASd,EAAe,EAAGA,EAAepF,EAAUoF,IAAgB,CAClE,IAAIn/E,EAAa++E,EAAcI,CAAY,EACvC9rB,EAAWrzD,EAAW,SACtBqzD,GAAY,OAEdrzD,EAAW,SAAWkgF,GAAgBJ,EAAOtB,EAAiBqB,CAAQ,EACtE7/E,EAAW,cAAgB,GAEvB,CAAC2/E,GAAiBC,GAAsB,KAC1C5/E,EAAW,aAAe,IAE5B4/E,KAEFG,EAA0B//E,CAAU,EAChCA,EAAW,MAAQ,OAASysC,GAAa1sE,EAAQo/G,CAAY,IAAMn0C,GAAW,MAa/EhrC,EAAW,eAAiBA,EAAW,UAAU,UAAY,MAAQA,EAAW,UAAU,YAAc,SACzGA,EAAW,KAAO,UAE1B,CAYE,OAAAmgF,GAAkB/7B,CAAU,EACrB,IAAIw1B,GAAiB,CAC1B,OAAQ75G,EACR,WAAYqkF,EACZ,mBAAoB21B,EACpB,iBAAkB2E,CACtB,CAAG,CACH,CACA,SAASyB,GAAkBngH,EAAQ,CAEjC,QADIogH,EAAiBv7G,EAAe,EAC3BpH,EAAI,EAAGA,EAAIuC,EAAO,OAAQvC,IAAK,CACtC,IAAIq6C,EAAM93C,EAAOvC,CAAC,EACd4iH,EAAkBvoE,EAAI,KACtBmL,EAAQm9D,EAAe,IAAIC,CAAe,GAAK,EAC/Cp9D,EAAQ,IAEVnL,EAAI,KAAOuoE,GAAmBp9D,EAAQ,IAExCA,IACAm9D,EAAe,IAAIC,EAAiBp9D,CAAK,CAC7C,CACA,CAWA,SAASw7D,GAAY1+G,EAAQw+G,EAASjyC,EAASg0C,EAAa,CAG1D,IAAIvG,EAAW,KAAK,IAAIh6G,EAAO,yBAA2B,EAAGw+G,EAAQ,OAAQjyC,EAAQ,OAAQg0C,GAAe,CAAC,EAC7Gp+G,OAAAA,EAAKq8G,EAAS,SAAUkB,EAAY,CAClC,IAAIF,EACA7+G,EAAS++G,CAAU,IAAMF,EAAoBE,EAAW,WAC1D1F,EAAW,KAAK,IAAIA,EAAUwF,EAAkB,MAAM,EAE5D,CAAG,EACMxF,CACT,CACA,SAASmG,GAAgBtyG,EAAMpQ,EAAKqiH,EAAU,CAC5C,GAAIA,GAAYriH,EAAI,OAAOoQ,CAAI,EAAG,CAEhC,QADI,EAAI,EACDpQ,EAAI,OAAOoQ,EAAO,CAAC,GACxB,IAEFA,GAAQ,CACZ,CACE,OAAApQ,EAAI,IAAIoQ,EAAM,EAAI,EACXA,CACT,CCzPA,IAAI2yG,GAAwC,UAAA,CAC1C,SAASA,EAAaC,EAAc,CAClC,KAAK,aAAe,CAAC,EACrB,KAAK,QAAU37G,EAAc,EAC7B,KAAK,gBAAkBA,EAAc,EACrC,KAAK,aAAe27G,CAAA,CAEfD,OAAAA,CACP,EAAA,EACK,SAASE,GAAwBl+D,EAAa,CAC/C,IAAAi+D,EAAej+D,EAAY,IAAI,kBAAkB,EACjDviD,EAAS,IAAIugH,GAAaC,CAAY,EACtCE,EAAQC,GAASH,CAAY,EACjC,GAAIE,EACF,OAAAA,EAAMn+D,EAAaviD,EAAQA,EAAO,QAASA,EAAO,eAAe,EAC1DA,CAEX,CACA,IAAI2gH,GAAW,CACb,YAAa,SAAUp+D,EAAaviD,EAAQ4gH,EAASC,EAAiB,CACpE,IAAIC,EAAav+D,EAAY,uBAAuB,QAASrf,EAAgB,EAAE,OAAO,CAAC,EACnF69E,EAAax+D,EAAY,uBAAuB,QAASrf,EAAgB,EAAE,OAAO,CAAC,EAShFljC,EAAA,aAAe,CAAC,IAAK,GAAG,EACvB4gH,EAAA,IAAI,IAAKE,CAAU,EACnBF,EAAA,IAAI,IAAKG,CAAU,EACvBC,GAAWF,CAAU,IACPD,EAAA,IAAI,IAAKC,CAAU,EACnC9gH,EAAO,sBAAwB,GAE7BghH,GAAWD,CAAU,IACPF,EAAA,IAAI,IAAKE,CAAU,EAC5B/gH,EAAA,uBAAyB,OAASA,EAAO,sBAAwB,GAE5E,EACA,WAAY,SAAUuiD,EAAaviD,EAAQ4gH,EAASC,EAAiB,CACnE,IAAII,EAAkB1+D,EAAY,uBAAuB,aAAcrf,EAAgB,EAAE,OAAO,CAAC,EAM1FljC,EAAA,aAAe,CAAC,QAAQ,EACvB4gH,EAAA,IAAI,SAAUK,CAAe,EACjCD,GAAWC,CAAe,IACZJ,EAAA,IAAI,SAAUI,CAAe,EAC7CjhH,EAAO,sBAAwB,EAEnC,EACA,MAAO,SAAUuiD,EAAaviD,EAAQ4gH,EAASC,EAAiB,CAC9D,IAAIK,EAAa3+D,EAAY,uBAAuB,QAASrf,EAAgB,EAAE,OAAO,CAAC,EACnFi+E,EAAkBD,EAAW,cAAc,YAAY,EACvDE,EAAiBF,EAAW,cAAc,WAAW,EASlDlhH,EAAA,aAAe,CAAC,SAAU,OAAO,EAChC4gH,EAAA,IAAI,SAAUO,CAAe,EAC7BP,EAAA,IAAI,QAASQ,CAAc,EAC/BJ,GAAWG,CAAe,IACZN,EAAA,IAAI,SAAUM,CAAe,EAC7CnhH,EAAO,sBAAwB,GAE7BghH,GAAWI,CAAc,IACXP,EAAA,IAAI,QAASO,CAAc,EACpCphH,EAAA,uBAAyB,OAASA,EAAO,sBAAwB,GAE5E,EACA,IAAK,SAAUuiD,EAAaviD,EAAQ4gH,EAASC,EAAiB,CACrD7gH,EAAA,aAAe,CAAC,MAAO,KAAK,CACrC,EACA,SAAU,SAAUuiD,EAAaviD,EAAQ4gH,EAASC,EAAiB,CACjE,IAAIz+E,EAAUmgB,EAAY,QACtB8+D,EAAgBj/E,EAAQ,aAAa,WAAYmgB,EAAY,IAAI,eAAe,CAAC,EACjF++D,EAAethH,EAAO,aAAeqhH,EAAc,WAAW,MAAM,EACxEn/G,EAAKm/G,EAAc,kBAAmB,SAAUE,EAAW9oF,EAAO,CAChE,IAAI+oF,EAAYp/E,EAAQ,aAAa,eAAgBm/E,CAAS,EAC1DE,EAAUH,EAAa7oF,CAAK,EACxBmoF,EAAA,IAAIa,EAASD,CAAS,EAC1BR,GAAWQ,CAAS,IACNX,EAAA,IAAIY,EAASD,CAAS,EAClCxhH,EAAO,uBAAyB,OAClCA,EAAO,sBAAwBy4B,GAEnC,CACD,CAAA,CAEL,EACA,SAASuoF,GAAWQ,EAAW,CACtB,OAAAA,EAAU,IAAI,MAAM,IAAM,UACnC,CC7GO,SAASE,GAAgBn/D,EAAao5D,EAAiB9tG,EAAK,CACjEA,EAAMA,GAAO,CAAE,EACf,IAAI8zG,EAAU9zG,EAAI,QACd+zG,EAAwB/zG,EAAI,sBAC5Bg0G,EACA91B,EACAhsC,EACA+hE,GAAwBnG,CAAe,EACzCkG,EAAsBlG,GAEtB5vB,EAAS4vB,EAAgB,OACzBkG,EAAsB91B,EAAO,WAC7BhsC,EAAQ47D,EAAgB,OAG1B,IAAIoG,EAAW,CAAC,EAAEx/D,GAAeA,EAAY,IAAI,OAAO,GACpDy/D,EACAC,EACAC,EACAC,EA0BJ,GAzBAjgH,EAAK2/G,EAAqB,SAAUzF,EAAe3jF,EAAO,CACpD31B,EAASs5G,CAAa,IACxByF,EAAoBppF,CAAK,EAAI2jF,EAAgB,CAC3C,KAAMA,CACP,GAEC2F,GAAY,CAAC3F,EAAc,eAEzB,CAACuF,GAAW,CAACK,GAAoB5F,EAAc,cACjD4F,EAAmB5F,GAGjB,CAAC6F,GAAkB7F,EAAc,OAAS,WAAaA,EAAc,OAAS,SAAW,CAACwF,GAAyBA,IAA0BxF,EAAc,YAC7J6F,EAAiB7F,GAGzB,CAAG,EACG6F,GAAkB,CAACN,GAAW,CAACK,IAGjCL,EAAU,IAKRM,EAAgB,CAIlBC,EAAuB,qBAAuB3/D,EAAY,GAC1D4/D,EAAuB,qBAAuB5/D,EAAY,GAEtDy/D,IACFA,EAAiB,sBAAwB,IAE3C,IAAII,EAAuBH,EAAe,SACtCI,EAAiBJ,EAAe,KAChCK,EAAyB,EAC7BpgH,EAAK2/G,EAAqB,SAAUzF,EAAe,CAC7CA,EAAc,WAAagG,GAC7BE,GAER,CAAK,EACD,IAAIC,EAA6B,CAC/B,KAAML,EACN,SAAUE,EACV,cAAeE,EACf,KAAMD,EACN,aAAc,GACd,mBAAoB,GACpB,cAAeR,EAAoB,MACpC,EACGW,EAA6B,CAC/B,KAAML,EAGN,SAAUA,EACV,cAAeG,EAAyB,EACxC,KAAMD,EACN,aAAc,GACd,mBAAoB,GACpB,cAAeR,EAAoB,OAAS,CAC7C,EACG91B,GACEhsC,IACFwiE,EAA2B,cAAgBxiE,EAAM,2BAA2BoiE,EAAsBE,CAAc,EAChHG,EAA2B,cAAgBziE,EAAM,2BAA2BmiE,EAAsBG,CAAc,GAElHt2B,EAAO,2BAA2Bw2B,CAA0B,EAC5Dx2B,EAAO,2BAA2By2B,CAA0B,IAE5DX,EAAoB,KAAKU,CAA0B,EACnDV,EAAoB,KAAKW,CAA0B,EAEzD,CACE,MAAO,CACL,iBAAkBP,GAAkBA,EAAe,KACnD,mBAAoBD,GAAoBA,EAAiB,KACzD,iBAAkBL,EAClB,qBAAsBQ,EACtB,qBAAsBD,CACvB,CACH,CACA,SAASJ,GAAwBnG,EAAiB,CAChD,MAAO,CAAClB,GAAmBkB,EAAgB,MAAM,CACnD,CACO,SAAS8G,GAAmBxgH,EAAMygH,EAAY,CAGnD,MAAO,CAAC,CAACA,GAAcA,IAAezgH,EAAK,mBAAmB,kBAAkB,CAClF,CACO,SAAS0gH,GAAoB1gH,EAAM2gH,EAAW,CACnD,OAAOH,GAAmBxgH,EAAM2gH,CAAS,EAAI3gH,EAAK,mBAAmB,sBAAsB,EAAI2gH,CACjG,CC5HA,SAASC,GAAmBtgE,EAAaugE,EAAc,CACrD,IAAItC,EAAej+D,EAAY,IAAI,kBAAkB,EACjDwgE,EAAqBC,GAAiB,IAAIxC,CAAY,EACtDyC,EACJ,OAAIH,GAAgBA,EAAa,eAC/BG,EAAkBp3F,EAAWi3F,EAAa,aAAc,SAAUhrE,EAAK,CACrE,IAAIkqC,EAAU,CACZ,KAAMlqC,CACP,EACG0pE,EAAYsB,EAAa,QAAQ,IAAIhrE,CAAG,EAC5C,GAAI0pE,EAAW,CACb,IAAI/H,EAAW+H,EAAU,IAAI,MAAM,EACnCx/B,EAAQ,KAAOw3B,GAAuBC,CAAQ,CACtD,CACM,OAAOz3B,CACb,CAAK,GAEEihC,IAEHA,EAAkBF,IAAuBA,EAAmB,kBAAoBA,EAAmB,kBAAiB,EAAKA,EAAmB,WAAW,MAAK,IAAO,CAAC,IAAK,GAAG,GAEvKE,CACT,CACA,SAASC,GAAkBC,EAAaC,EAAuBN,EAAc,CAC3E,IAAIO,EACAC,EACJ,OAAAR,GAAgB91F,EAAYm2F,EAAa,SAAUnhC,EAAStV,EAAU,CACpE,IAAI2mB,EAAWrR,EAAQ,SACnBuhC,EAAoBT,EAAa,gBAAgB,IAAIzvB,CAAQ,EAC7DkwB,IACEF,GAAyB,OAC3BA,EAAwB32C,GAE1BsV,EAAQ,YAAcuhC,EAAkB,eAAgB,EACpDH,IACFphC,EAAQ,sBAAwB,KAGhCA,EAAQ,UAAU,UAAY,OAChCshC,EAAgB,GAEtB,CAAG,EACG,CAACA,GAAiBD,GAAyB,OAC7CF,EAAYE,CAAqB,EAAE,UAAU,SAAW,GAEnDA,CACT,CAKA,SAASG,GAAiBC,EAAWlhE,EAAa10C,EAAK,CACrDA,EAAMA,GAAO,CAAE,EACf,IAAI6kF,EAAgBnwC,EAAY,iBAAkB,EAC9CxiD,EACA2jH,EAAmB,GAKrB3jH,EAAS2yF,EAAc,UAAW,EAElCgxB,EAAmB3jH,EAAO,eAAiByqE,GAE7C,IAAIs4C,EAAerC,GAAwBl+D,CAAW,EAClD0gE,EAAkBJ,GAAmBtgE,EAAaugE,CAAY,EAC9Da,EAAqB91G,EAAI,mBACzB+1G,EAAkB99E,EAAkB69E,CAAkB,EAAIA,EAAqBA,EAAqB38C,GAAamE,GAAiC83C,EAAiB1gE,CAAW,EAAI,KAClLshE,EAAyB,CAC3B,gBAAiBZ,EACjB,cAAep1G,EAAI,cACnB,aAAc00C,EAAY,UAAW,EACrC,gBAAiBqhE,EACjB,wBAAyB,CAACF,CAC3B,EACG33B,EAASuyB,GAAwBv+G,EAAQ8jH,CAAsB,EAC/DR,EAAwBH,GAAkBn3B,EAAO,WAAYl+E,EAAI,sBAAuBi1G,CAAY,EACpG/iE,EAAS2jE,EAA8D,KAA3ChxB,EAAc,mBAAmB3G,CAAM,EACnE+3B,EAAuBpC,GAAgBn/D,EAAa,CACtD,OAAQwpC,EACR,MAAOhsC,CACX,CAAG,EACG99C,EAAO,IAAIy5G,GAAW3vB,EAAQxpC,CAAW,EAC7CtgD,EAAK,mBAAmB6hH,CAAoB,EAC5C,IAAIj+B,EAAiBw9B,GAAyB,MAAQU,GAA0BhkH,CAAM,EAAI,SAAU++E,EAAS7R,EAASjqB,EAAW0pB,EAAU,CAEzI,OAAOA,IAAa22C,EAAwBrgE,EAAY,KAAK,sBAAsB87B,EAAS7R,EAASjqB,EAAW0pB,CAAQ,CAC5H,EAAM,KACJ,OAAAzqE,EAAK,cAAgB,GACrBA,EAAK,SAELyhH,EAAmB3jH,EAASggD,EAAO,KAAM8lC,CAAc,EAChD5jF,CACT,CACA,SAAS8hH,GAA0BhkH,EAAQ,CACzC,GAAIA,EAAO,eAAiByqE,GAAwB,CAClD,IAAIw5C,EAAaC,GAAiBlkH,EAAO,MAAQ,CAAA,CAAE,EACnD,MAAO,CAACwiE,EAAe9jC,GAAiBulF,CAAU,CAAC,CACvD,CACA,CACA,SAASC,GAAiB9hH,EAAK,CAE7B,QADI1E,EAAI,EACDA,EAAI0E,EAAI,QAAUA,EAAI1E,CAAC,GAAK,MACjCA,IAEF,OAAO0E,EAAI1E,CAAC,CACd,CCpHA,IAAIymH,GAAqB,UAAY,CACnC,SAASA,EAAMC,EAAS,CACtB,KAAK,SAAWA,GAAW,CAAE,EAC7B,KAAK,QAAU,CAAC,IAAU,IAAS,CACvC,CACE,OAAAD,EAAM,UAAU,WAAa,SAAUt2G,EAAM,CAC3C,OAAO,KAAK,SAASA,CAAI,CAC1B,EAIDs2G,EAAM,UAAU,YAAc,SAAUtzG,EAAO,CAC7C,IAAI++C,EAAS,KAAK,QAClB/+C,EAAM,CAAC,EAAI++C,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI/+C,EAAM,CAAC,GAC5CA,EAAM,CAAC,EAAI++C,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI/+C,EAAM,CAAC,EAG7C,EAIDszG,EAAM,UAAU,oBAAsB,SAAUjiH,EAAM61C,EAAK,CACzD,KAAK,YAAY71C,EAAK,qBAAqB61C,CAAG,CAAC,CAChD,EAMDosE,EAAM,UAAU,UAAY,UAAY,CACtC,OAAO,KAAK,QAAQ,MAAO,CAC5B,EAIDA,EAAM,UAAU,UAAY,SAAUvsG,EAAO0iB,EAAK,CAChD,IAAI+pF,EAAa,KAAK,QACjB,MAAMzsG,CAAK,IACdysG,EAAW,CAAC,EAAIzsG,GAEb,MAAM0iB,CAAG,IACZ+pF,EAAW,CAAC,EAAI/pF,EAEnB,EAID6pF,EAAM,UAAU,gBAAkB,SAAU5iH,EAAO,CACjD,OAAO,KAAK,QAAQ,CAAC,GAAKA,GAAS,KAAK,QAAQ,CAAC,GAAKA,CACvD,EAKD4iH,EAAM,UAAU,QAAU,UAAY,CACpC,OAAO,KAAK,QACb,EAKDA,EAAM,UAAU,SAAW,SAAUG,EAAS,CAC5C,KAAK,SAAWA,CACjB,EACMH,CACT,EAAG,EACHnvB,GAAgCmvB,EAAK,EClErC,IAAII,GAAU,EACVC,GAA2B,UAAY,CACzC,SAASA,EAAY12G,EAAK,CACxB,KAAK,WAAaA,EAAI,YAAc,CAAE,EACtC,KAAK,aAAeA,EAAI,YACxB,KAAK,eAAiBA,EAAI,cAC1B,KAAK,IAAM,EAAEy2G,EACjB,CACE,OAAAC,EAAY,kBAAoB,SAAU/C,EAAW,CACnD,IAAIllD,EAASklD,EAAU,OACnBv/G,EAAOq6D,EAAO,KACdkoD,EAAaviH,GAAQzE,EAAIyE,EAAMwiH,EAAO,EAC1C,OAAO,IAAIF,EAAY,CACrB,WAAYC,EACZ,YAAa,CAACA,EAEd,cAAeloD,EAAO,eAAiB,EAC7C,CAAK,CACF,EAEDioD,EAAY,UAAU,WAAa,SAAUG,EAAU,CAErD,OAAO,KAAK,kBAAkB,IAAIA,CAAQ,CAC3C,EAIDH,EAAY,UAAU,gBAAkB,SAAUG,EAAU,CAC1D,IAAIjsF,EACAksF,EAAc,KAAK,aAMvB,GAAI,CAAC7hH,EAAS4hH,CAAQ,GAAK,CAACC,EAC1B,OAAOD,EAUT,GAAIC,GAAe,CAAC,KAAK,eACvB,OAAAlsF,EAAQ,KAAK,WAAW,OACxB,KAAK,WAAWA,CAAK,EAAIisF,EAClBjsF,EAET,IAAIj7B,EAAM,KAAK,gBAAiB,EAEhC,OAAAi7B,EAAQj7B,EAAI,IAAIknH,CAAQ,EACpBjsF,GAAS,OACPksF,GACFlsF,EAAQ,KAAK,WAAW,OACxB,KAAK,WAAWA,CAAK,EAAIisF,EAEzBlnH,EAAI,IAAIknH,EAAUjsF,CAAK,GAEvBA,EAAQ,KAGLA,CACR,EAED8rF,EAAY,UAAU,gBAAkB,UAAY,CAClD,OAAO,KAAK,OAAS,KAAK,KAAO1/G,EAAc,KAAK,UAAU,EAC/D,EACM0/G,CACT,EAAG,EACH,SAASE,GAAQ5lH,EAAK,CACpB,OAAI6B,EAAS7B,CAAG,GAAKA,EAAI,OAAS,KACzBA,EAAI,MAEJA,EAAM,EAEjB,CCzEO,SAAS+lH,GAAqBp+G,EAAO,CAC1C,OAAOA,EAAM,OAAS,YAAcA,EAAM,OAAS,KACrD,CAMO,SAASq+G,GAAuBl1D,EAAQm1D,EAAaC,EAAaC,EAAa,CACpF,IAAIhlH,EAAS,CAAE,EACXilH,EAAOt1D,EAAO,CAAC,EAAIA,EAAO,CAAC,EAC3B/wC,EAAW5e,EAAO,SAAWs9B,GAAK2nF,EAAOH,CAAiB,EAC1DC,GAAe,MAAQnmG,EAAWmmG,IACpCnmG,EAAW5e,EAAO,SAAW+kH,GAE3BC,GAAe,MAAQpmG,EAAWomG,IACpCpmG,EAAW5e,EAAO,SAAWglH,GAG/B,IAAIvpF,EAAYz7B,EAAO,kBAAoBklH,GAAqBtmG,CAAQ,EAEpEumG,EAAiBnlH,EAAO,eAAiB,CAACw7B,GAAM,KAAK,KAAKm0B,EAAO,CAAC,EAAI/wC,CAAQ,EAAIA,EAAU6c,CAAS,EAAGD,GAAM,KAAK,MAAMm0B,EAAO,CAAC,EAAI/wC,CAAQ,EAAIA,EAAU6c,CAAS,CAAC,EACzK,OAAA2pF,GAAUD,EAAgBx1D,CAAM,EACzB3vD,CACT,CACO,SAASqlH,GAAiBzmG,EAAU,CACzC,IAAI4e,EAAQ,KAAK,IAAI,GAAIH,GAAiBze,CAAQ,CAAC,EAE/CiD,EAAIjD,EAAW4e,EACnB,OAAK3b,EAEMA,IAAM,EACfA,EAAI,EACKA,IAAM,EACfA,EAAI,EAGJA,GAAK,EAPLA,EAAI,EASC2Z,GAAM3Z,EAAI2b,CAAK,CACxB,CAIO,SAAS0nF,GAAqBtmG,EAAU,CAE7C,OAAOgd,GAAahd,CAAQ,EAAI,CAClC,CACA,SAASqc,GAAMkqF,EAAgBxpG,EAAKg0C,EAAQ,CAC1Cw1D,EAAexpG,CAAG,EAAI,KAAK,IAAI,KAAK,IAAIwpG,EAAexpG,CAAG,EAAGg0C,EAAO,CAAC,CAAC,EAAGA,EAAO,CAAC,CAAC,CACpF,CAEO,SAASy1D,GAAUD,EAAgBx1D,EAAQ,CAChD,CAAC,SAASw1D,EAAe,CAAC,CAAC,IAAMA,EAAe,CAAC,EAAIx1D,EAAO,CAAC,GAC7D,CAAC,SAASw1D,EAAe,CAAC,CAAC,IAAMA,EAAe,CAAC,EAAIx1D,EAAO,CAAC,GAC7D10B,GAAMkqF,EAAgB,EAAGx1D,CAAM,EAC/B10B,GAAMkqF,EAAgB,EAAGx1D,CAAM,EAC3Bw1D,EAAe,CAAC,EAAIA,EAAe,CAAC,IACtCA,EAAe,CAAC,EAAIA,EAAe,CAAC,EAExC,CACO,SAAS3vE,GAAQ12C,EAAK6wD,EAAQ,CACnC,OAAO7wD,GAAO6wD,EAAO,CAAC,GAAK7wD,GAAO6wD,EAAO,CAAC,CAC5C,CACO,SAASjpD,GAAU5H,EAAK6wD,EAAQ,CACrC,OAAIA,EAAO,CAAC,IAAMA,EAAO,CAAC,EACjB,IAED7wD,EAAM6wD,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAIA,EAAO,CAAC,EAClD,CACO,SAASnpD,GAAM1H,EAAK6wD,EAAQ,CACjC,OAAO7wD,GAAO6wD,EAAO,CAAC,EAAIA,EAAO,CAAC,GAAKA,EAAO,CAAC,CACjD,CCpEA,IAAI21D,GAA4B,SAAUvxG,EAAQ,CAChDC,EAAUsxG,EAAcvxG,CAAM,EAC9B,SAASuxG,EAAanB,EAAS,CAC7B,IAAIlwG,EAAQF,EAAO,KAAK,KAAMowG,CAAO,GAAK,KAC1ClwG,EAAM,KAAO,UACb,IAAIgyE,EAAchyE,EAAM,WAAW,aAAa,EAGhD,OAAKgyE,IACHA,EAAc,IAAIs+B,GAAY,EAAE,GAE9B1jH,EAAQolF,CAAW,IACrBA,EAAc,IAAIs+B,GAAY,CAC5B,WAAY/mH,EAAIyoF,EAAa,SAAU3lD,EAAM,CAC3C,OAAO5/B,EAAS4/B,CAAI,EAAIA,EAAK,MAAQA,CACtC,CAAA,CACT,CAAO,GAEHrsB,EAAM,aAAegyE,EACrBhyE,EAAM,QAAUA,EAAM,WAAW,QAAQ,GAAK,CAAC,EAAGgyE,EAAY,WAAW,OAAS,CAAC,EAC5EhyE,CACX,CACE,OAAAqxG,EAAa,UAAU,MAAQ,SAAUxmH,EAAK,CAE5C,OAAIA,GAAO,KACF,IAEFgE,EAAShE,CAAG,EAAI,KAAK,aAAa,WAAWA,CAAG,EAErD,KAAK,MAAMA,CAAG,CACjB,EACDwmH,EAAa,UAAU,QAAU,SAAUt8G,EAAM,CAC/C,OAAAA,EAAO,KAAK,MAAMA,CAAI,EACfu8G,GAAoBv8G,EAAM,KAAK,OAAO,GAAK,KAAK,aAAa,WAAWA,CAAI,GAAK,IACzF,EAMDs8G,EAAa,UAAU,UAAY,SAAUxmH,EAAK,CAChD,OAAAA,EAAM,KAAK,eAAe,KAAK,MAAMA,CAAG,CAAC,EAClC0mH,GAAsB1mH,EAAK,KAAK,OAAO,CAC/C,EAKDwmH,EAAa,UAAU,MAAQ,SAAUxmH,EAAK,CAC5C,OAAAA,EAAM,KAAK,MAAM2mH,GAAkB3mH,EAAK,KAAK,OAAO,CAAC,EAC9C,KAAK,oBAAoBA,CAAG,CACpC,EACDwmH,EAAa,UAAU,SAAW,UAAY,CAI5C,QAHII,EAAQ,CAAE,EACV/1D,EAAS,KAAK,QACd3mD,EAAO2mD,EAAO,CAAC,EACZ3mD,GAAQ2mD,EAAO,CAAC,GACrB+1D,EAAM,KAAK,CACT,MAAO18G,CACf,CAAO,EACDA,IAEF,OAAO08G,CACR,EACDJ,EAAa,UAAU,cAAgB,SAAUR,EAAa,CAG7D,EAIDQ,EAAa,UAAU,YAAc,SAAUjhF,EAAM,CACnD,GAAIA,GAAQ,KAAM,CAChB,KAAK,sBAAwB,KAAK,sBAAwB,KAC1D,MACN,CAOI,QANIshF,EAAqBthF,EAAK,eAC1BuhF,EAAiB,KAAK,sBAAwB,CAAE,EAChDC,EAAiB,KAAK,sBAAwB,CAAE,EAEhDC,EAAU,EACVC,EAAiB,KAAK,aAAa,WAAW,OACzC5lH,EAAM,KAAK,IAAI4lH,EAAgBJ,EAAmB,MAAM,EAAGG,EAAU3lH,EAAK,EAAE2lH,EAAS,CAC5F,IAAIE,EAAgBL,EAAmBG,CAAO,EAC9CF,EAAeE,CAAO,EAAIE,EAC1BH,EAAeG,CAAa,EAAIF,CACtC,CAGI,QADIG,EAAgB,EACbH,EAAUC,EAAgB,EAAED,EAAS,CAC1C,KAAOD,EAAeI,CAAa,GAAK,MACtCA,IAGFL,EAAe,KAAKK,CAAa,EACjCJ,EAAeI,CAAa,EAAIH,CACtC,CACG,EACDR,EAAa,UAAU,eAAiB,SAAUtI,EAAS,CACzD,IAAIkJ,EAAuB,KAAK,sBAGhC,OAAOA,GAAwBlJ,GAAW,GAAKA,EAAUkJ,EAAqB,OAASA,EAAqBlJ,CAAO,EAAIA,CACxH,EAgBDsI,EAAa,UAAU,oBAAsB,SAAUa,EAAY,CACjE,IAAIC,EAAuB,KAAK,sBAGhC,OAAOA,GAAwBD,GAAc,GAAKA,EAAaC,EAAqB,OAASA,EAAqBD,CAAU,EAAIA,CACjI,EAIDb,EAAa,UAAU,SAAW,SAAUrjD,EAAM,CAChD,GAAI,CAAC,KAAK,UAAW,CACnB,IAAI+jD,EAAgB,KAAK,oBAAoB/jD,EAAK,KAAK,EACnDokD,EAAW,KAAK,aAAa,WAAWL,CAAa,EAGzD,OAAOK,GAAY,KAAO,GAAKA,EAAW,EAChD,CACG,EACDf,EAAa,UAAU,MAAQ,UAAY,CACzC,OAAO,KAAK,QAAQ,CAAC,EAAI,KAAK,QAAQ,CAAC,EAAI,CAC5C,EACDA,EAAa,UAAU,oBAAsB,SAAUrjH,EAAM61C,EAAK,CAChE,KAAK,YAAY71C,EAAK,qBAAqB61C,CAAG,CAAC,CAChD,EAKDwtE,EAAa,UAAU,gBAAkB,SAAUhkH,EAAO,CACxD,OAAAA,EAAQ,KAAK,eAAeA,CAAK,EAC1B,KAAK,QAAQ,CAAC,GAAKA,GAAS,KAAK,QAAQ,CAAC,GAAKA,CACvD,EACDgkH,EAAa,UAAU,eAAiB,UAAY,CAClD,OAAO,KAAK,YACb,EACDA,EAAa,UAAU,cAAgB,UAAY,CAAE,EACrDA,EAAa,UAAU,eAAiB,UAAY,CAAE,EACtDA,EAAa,KAAO,UACbA,CACT,EAAEpB,EAAK,EACPA,GAAM,cAAcoB,EAAY,ECpKhC,IAAIgB,GAAcC,GACdC,GAA6B,SAAUzyG,EAAQ,CACjDC,EAAUwyG,EAAezyG,CAAM,EAC/B,SAASyyG,GAAgB,CACvB,IAAIvyG,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO,WAEbA,EAAM,UAAY,EAClBA,EAAM,mBAAqB,EACpBA,CACX,CACE,OAAAuyG,EAAc,UAAU,MAAQ,SAAU1nH,EAAK,CAC7C,OAAOA,CACR,EACD0nH,EAAc,UAAU,QAAU,SAAU1nH,EAAK,CAC/C,OAAO2nH,GAAe3nH,EAAK,KAAK,OAAO,CACxC,EACD0nH,EAAc,UAAU,UAAY,SAAU1nH,EAAK,CACjD,OAAO4nH,GAAiB5nH,EAAK,KAAK,OAAO,CAC1C,EACD0nH,EAAc,UAAU,MAAQ,SAAU1nH,EAAK,CAC7C,OAAO6nH,GAAa7nH,EAAK,KAAK,OAAO,CACtC,EACD0nH,EAAc,UAAU,UAAY,SAAU7uG,EAAO0iB,EAAK,CACxD,IAAI+pF,EAAa,KAAK,QAEjB,MAAMzsG,CAAK,IACdysG,EAAW,CAAC,EAAI,WAAWzsG,CAAK,GAE7B,MAAM0iB,CAAG,IACZ+pF,EAAW,CAAC,EAAI,WAAW/pF,CAAG,EAEjC,EACDmsF,EAAc,UAAU,YAAc,SAAU51G,EAAO,CACrD,IAAI++C,EAAS,KAAK,QAClB/+C,EAAM,CAAC,EAAI++C,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI/+C,EAAM,CAAC,GAC5CA,EAAM,CAAC,EAAI++C,EAAO,CAAC,IAAMA,EAAO,CAAC,EAAI/+C,EAAM,CAAC,GAE5C,KAAK,UAAU++C,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,CACpC,EACD62D,EAAc,UAAU,YAAc,UAAY,CAChD,OAAO,KAAK,SACb,EACDA,EAAc,UAAU,YAAc,SAAU5nG,EAAU,CACxD,KAAK,UAAYA,EAGjB,KAAK,YAAc,KAAK,QAAQ,MAAO,EACvC,KAAK,mBAAqBgoG,GAA4BhoG,CAAQ,CAC/D,EAID4nG,EAAc,UAAU,SAAW,SAAUK,EAAqB,CAChE,IAAIjoG,EAAW,KAAK,UAChB+wC,EAAS,KAAK,QACdw1D,EAAiB,KAAK,YACtB2B,EAAoB,KAAK,mBACzBpB,EAAQ,CAAE,EAEd,GAAI,CAAC9mG,EACH,OAAO8mG,EAGT,IAAIqB,EAAY,IACZp3D,EAAO,CAAC,EAAIw1D,EAAe,CAAC,IAC1B0B,EACFnB,EAAM,KAAK,CACT,MAAOY,GAAYnB,EAAe,CAAC,EAAIvmG,EAAUkoG,CAAiB,CAC5E,CAAS,EAEDpB,EAAM,KAAK,CACT,MAAO/1D,EAAO,CAAC,CACzB,CAAS,GAIL,QADIsS,EAAOkjD,EAAe,CAAC,EACpBljD,GAAQkjD,EAAe,CAAC,IAC7BO,EAAM,KAAK,CACT,MAAOzjD,CACf,CAAO,EAEDA,EAAOqkD,GAAYrkD,EAAOrjD,EAAUkoG,CAAiB,EACjD7kD,IAASyjD,EAAMA,EAAM,OAAS,CAAC,EAAE,QAKrC,GAAIA,EAAM,OAASqB,EACjB,MAAO,CAAE,EAKb,IAAIC,EAAetB,EAAM,OAASA,EAAMA,EAAM,OAAS,CAAC,EAAE,MAAQP,EAAe,CAAC,EAClF,OAAIx1D,EAAO,CAAC,EAAIq3D,IACVH,EACFnB,EAAM,KAAK,CACT,MAAOY,GAAYU,EAAepoG,EAAUkoG,CAAiB,CACvE,CAAS,EAEDpB,EAAM,KAAK,CACT,MAAO/1D,EAAO,CAAC,CACzB,CAAS,GAGE+1D,CACR,EACDc,EAAc,UAAU,cAAgB,SAAU1B,EAAa,CAI7D,QAHIY,EAAQ,KAAK,SAAS,EAAI,EAC1BuB,EAAa,CAAE,EACft3D,EAAS,KAAK,UAAW,EACpBlyD,EAAI,EAAGA,EAAIioH,EAAM,OAAQjoH,IAAK,CAOrC,QANIypH,EAAWxB,EAAMjoH,CAAC,EAClB0pH,EAAWzB,EAAMjoH,EAAI,CAAC,EACtBwlD,EAAQ,EACRmkE,EAAkB,CAAE,EACpBxoG,EAAWsoG,EAAS,MAAQC,EAAS,MACrCE,EAAgBzoG,EAAWkmG,EACxB7hE,EAAQ6hE,EAAc,GAAG,CAC9B,IAAIwC,EAAYhB,GAAYa,EAAS,OAASlkE,EAAQ,GAAKokE,CAAa,EAEpEC,EAAY33D,EAAO,CAAC,GAAK23D,EAAY33D,EAAO,CAAC,GAC/Cy3D,EAAgB,KAAKE,CAAS,EAEhCrkE,GACR,CACMgkE,EAAW,KAAKG,CAAe,CACrC,CACI,OAAOH,CACR,EAKDT,EAAc,UAAU,SAAW,SAAUvkH,EAAM4L,EAAK,CACtD,GAAI5L,GAAQ,KACV,MAAO,GAET,IAAIw5B,EAAY5tB,GAAOA,EAAI,UACvB4tB,GAAa,KACfA,EAAY8rF,GAAwBtlH,EAAK,KAAK,GAAK,EAC1Cw5B,IAAc,SAEvBA,EAAY,KAAK,oBAInB,IAAI+rF,EAAUlB,GAAYrkH,EAAK,MAAOw5B,EAAW,EAAI,EACrD,OAAOgsF,GAAqBD,CAAO,CACpC,EAIDhB,EAAc,UAAU,cAAgB,SAAU1B,EAAaC,EAAaC,EAAa,CACvFF,EAAcA,GAAe,EAC7B,IAAIn1D,EAAS,KAAK,QACds1D,EAAOt1D,EAAO,CAAC,EAAIA,EAAO,CAAC,EAC/B,GAAK,SAASs1D,CAAI,EAKlB,CAAIA,EAAO,IACTA,EAAO,CAACA,EACRt1D,EAAO,QAAS,GAElB,IAAI3vD,EAAS0nH,GAA8B/3D,EAAQm1D,EAAaC,EAAaC,CAAW,EACxF,KAAK,mBAAqBhlH,EAAO,kBACjC,KAAK,UAAYA,EAAO,SACxB,KAAK,YAAcA,EAAO,eAC3B,EACDwmH,EAAc,UAAU,eAAiB,SAAU34G,EAAK,CACtD,IAAI8hD,EAAS,KAAK,QAElB,GAAIA,EAAO,CAAC,IAAMA,EAAO,CAAC,EACxB,GAAIA,EAAO,CAAC,IAAM,EAAG,CAGnB,IAAIg4D,EAAa,KAAK,IAAIh4D,EAAO,CAAC,CAAC,EAM9B9hD,EAAI,SACP8hD,EAAO,CAAC,GAAKg4D,EAAa,GAC1Bh4D,EAAO,CAAC,GAAKg4D,EAAa,CAIpC,MACQh4D,EAAO,CAAC,EAAI,EAGhB,IAAIs1D,EAAOt1D,EAAO,CAAC,EAAIA,EAAO,CAAC,EAE1B,SAASs1D,CAAI,IAChBt1D,EAAO,CAAC,EAAI,EACZA,EAAO,CAAC,EAAI,GAEd,KAAK,cAAc9hD,EAAI,YAAaA,EAAI,YAAaA,EAAI,WAAW,EAEpE,IAAI+Q,EAAW,KAAK,UACf/Q,EAAI,SACP8hD,EAAO,CAAC,EAAI22D,GAAY,KAAK,MAAM32D,EAAO,CAAC,EAAI/wC,CAAQ,EAAIA,CAAQ,GAEhE/Q,EAAI,SACP8hD,EAAO,CAAC,EAAI22D,GAAY,KAAK,KAAK32D,EAAO,CAAC,EAAI/wC,CAAQ,EAAIA,CAAQ,EAErE,EACD4nG,EAAc,UAAU,cAAgB,SAAUt/G,EAAKC,EAAK,CAC1D,KAAK,YAAc,CAACD,EAAKC,CAAG,CAC7B,EACDq/G,EAAc,KAAO,WACdA,CACT,EAAEtC,EAAK,EACPA,GAAM,cAAcsC,EAAa,EC5NjC,IAAIoB,GAAsB,OAAO,aAAiB,IAC9CC,GAAoBD,GAA8B,aAAR,MACvC,SAASE,GAAmBC,EAAK,CACtC,OAAIlnH,EAAQknH,CAAG,EAENH,GAAsB,IAAI,aAAaG,CAAG,EAAIA,EAGhD,IAAIF,GAAiBE,CAAG,CACjC,CCNA,IAAIC,GAAe,cACnB,SAASC,GAAiB1lE,EAAa,CACrC,OAAOA,EAAY,IAAI,OAAO,GAAKylE,GAAezlE,EAAY,WAChE,CACA,SAAS2lE,GAAWh4D,EAAM,CACxB,OAAOA,EAAK,IAAMA,EAAK,KACzB,CA4BO,SAASi4D,GAAuBnuC,EAAY53C,EAAS,CAC1D,IAAIwyD,EAAe,CAAE,EACrB,OAAAxyD,EAAQ,iBAAiB43C,EAAY,SAAUz3B,EAAa,CAEtD6lE,GAAc7lE,CAAW,GAC3BqyC,EAAa,KAAKryC,CAAW,CAEnC,CAAG,EACMqyC,CACT,CASA,SAASyzB,GAAoBC,EAAW,CAQtC,IAAIC,EAAa,CAAE,EACnBrmH,EAAKomH,EAAW,SAAU/lE,EAAa,CACrC,IAAIimE,EAAYjmE,EAAY,iBACxBkmE,EAAWD,EAAU,YAAa,EACtC,GAAI,EAAAC,EAAS,OAAS,QAAUA,EAAS,OAAS,SAOlD,QAJIxmH,EAAOsgD,EAAY,QAAS,EAC5BjiD,EAAMmoH,EAAS,IAAM,IAAMA,EAAS,MACpCpjC,EAASpjF,EAAK,kBAAkBA,EAAK,aAAawmH,EAAS,GAAG,CAAC,EAC/D1oE,EAAQ99C,EAAK,SAAU,EAClBxE,EAAI,EAAGirH,EAAM3oE,EAAM,MAAK,EAAItiD,EAAIirH,EAAK,EAAEjrH,EAAG,CACjD,IAAI6D,EAAQy+C,EAAM,IAAIslC,EAAQ5nF,CAAC,EAC1B8qH,EAAWjoH,CAAG,EAKjBioH,EAAWjoH,CAAG,EAAE,KAAKgB,CAAK,EAH1BinH,EAAWjoH,CAAG,EAAI,CAACgB,CAAK,CAMhC,CACA,CAAG,EACD,IAAIqnH,EAAc,CAAE,EACpB,QAASroH,KAAOioH,EACd,GAAIA,EAAW,eAAejoH,CAAG,EAAG,CAClC,IAAIsoH,EAAeL,EAAWjoH,CAAG,EACjC,GAAIsoH,EAAc,CAEhBA,EAAa,KAAK,SAAU7jH,EAAGC,EAAG,CAChC,OAAOD,EAAIC,CACrB,CAAS,EAED,QADIkC,EAAM,KACDyC,EAAI,EAAGA,EAAIi/G,EAAa,OAAQ,EAAEj/G,EAAG,CAC5C,IAAI8D,EAAQm7G,EAAaj/G,CAAC,EAAIi/G,EAAaj/G,EAAI,CAAC,EAC5C8D,EAAQ,IAEVvG,EAAMA,IAAQ,KAAOuG,EAAQ,KAAK,IAAIvG,EAAKuG,CAAK,EAE5D,CAEQk7G,EAAYroH,CAAG,EAAI4G,CAC3B,CACA,CAEE,OAAOyhH,CACT,CACO,SAASE,GAAiBP,EAAW,CAC1C,IAAIK,EAAcN,GAAoBC,CAAS,EAC3CQ,EAAiB,CAAE,EACvB5mH,OAAAA,EAAKomH,EAAW,SAAU/lE,EAAa,CACrC,IAAIimE,EAAYjmE,EAAY,iBACxBkmE,EAAWD,EAAU,YAAa,EAClCO,EAAaN,EAAS,UAAW,EACjCO,EACJ,GAAIP,EAAS,OAAS,WACpBO,EAAYP,EAAS,aAAc,UAC1BA,EAAS,OAAS,SAAWA,EAAS,OAAS,OAAQ,CAChE,IAAInoH,EAAMmoH,EAAS,IAAM,IAAMA,EAAS,MACpCQ,EAASN,EAAYroH,CAAG,EACxB4oH,EAAa,KAAK,IAAIH,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EACnDviH,EAAQiiH,EAAS,MAAM,UAAW,EAClCU,EAAY,KAAK,IAAI3iH,EAAM,CAAC,EAAIA,EAAM,CAAC,CAAC,EAC5CwiH,EAAYC,EAASC,EAAaC,EAAYF,EAASC,CAC7D,KAAW,CACL,IAAIjnH,EAAOsgD,EAAY,QAAS,EAChCymE,EAAY,KAAK,IAAID,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EAAI9mH,EAAK,MAAO,CACxE,CACI,IAAImnH,EAAW/3F,GAAakxB,EAAY,IAAI,UAAU,EAAGymE,CAAS,EAC9DK,EAAch4F,GAAakxB,EAAY,IAAI,aAAa,EAAGymE,CAAS,EACpEM,EAAcj4F,GAGlBkxB,EAAY,IAAI,aAAa,IAAMgnE,GAAchnE,CAAW,EAAI,GAAM,GAAIymE,CAAS,EAC/EQ,EAASjnE,EAAY,IAAI,QAAQ,EACjCknE,EAAiBlnE,EAAY,IAAI,gBAAgB,EACrDumE,EAAe,KAAK,CAClB,UAAWE,EACX,SAAUI,EACV,YAAaC,EACb,YAAaC,EACb,OAAQE,EACR,eAAgBC,EAChB,QAASvB,GAAWO,CAAQ,EAC5B,QAASR,GAAiB1lE,CAAW,CAC3C,CAAK,CACL,CAAG,EACMmnE,GAAuBZ,CAAc,CAC9C,CACA,SAASY,GAAuBZ,EAAgB,CAE9C,IAAIa,EAAa,CAAE,EACnBznH,EAAK4mH,EAAgB,SAAUc,EAAYjuG,EAAK,CAC9C,IAAIkuG,EAAUD,EAAW,QACrBZ,EAAYY,EAAW,UACvBE,EAAgBH,EAAWE,CAAO,GAAK,CACzC,UAAWb,EACX,cAAeA,EACf,eAAgB,EAChB,YAAa,KACb,IAAK,MACL,OAAQ,CAAA,CACT,EACGe,EAASD,EAAc,OAC3BH,EAAWE,CAAO,EAAIC,EACtB,IAAIE,EAAUJ,EAAW,QACpBG,EAAOC,CAAO,GACjBF,EAAc,iBAEhBC,EAAOC,CAAO,EAAID,EAAOC,CAAO,GAAK,CACnC,MAAO,EACP,SAAU,CACX,EAKD,IAAIZ,EAAWQ,EAAW,SACtBR,GAAY,CAACW,EAAOC,CAAO,EAAE,QAE/BD,EAAOC,CAAO,EAAE,MAAQZ,EACxBA,EAAW,KAAK,IAAIU,EAAc,cAAeV,CAAQ,EACzDU,EAAc,eAAiBV,GAEjC,IAAIC,EAAcO,EAAW,YAC7BP,IAAgBU,EAAOC,CAAO,EAAE,SAAWX,GAC3C,IAAIC,EAAcM,EAAW,YAC7BN,IAAgBS,EAAOC,CAAO,EAAE,SAAWV,GAC3C,IAAIE,EAASI,EAAW,OACxBJ,GAAU,OAASM,EAAc,IAAMN,GACvC,IAAIC,EAAiBG,EAAW,eAChCH,GAAkB,OAASK,EAAc,YAAcL,EAC3D,CAAG,EACD,IAAIzpH,EAAS,CAAE,EACfkC,OAAAA,EAAKynH,EAAY,SAAUG,EAAetJ,EAAc,CACtDxgH,EAAOwgH,CAAY,EAAI,CAAE,EACzB,IAAIuJ,EAASD,EAAc,OACvBd,EAAYc,EAAc,UAC1BG,EAAqBH,EAAc,YACvC,GAAIG,GAAsB,KAAM,CAC9B,IAAIC,EAAc/oH,GAAK4oH,CAAM,EAAE,OAG/BE,EAAqB,KAAK,IAAI,GAAKC,EAAc,EAAG,EAAE,EAAI,GAChE,CACI,IAAIC,EAAc94F,GAAa44F,EAAoBjB,CAAS,EACxDoB,EAAgB/4F,GAAay4F,EAAc,IAAK,CAAC,EACjDruE,EAAgBquE,EAAc,cAC9BO,EAAiBP,EAAc,eAC/BQ,GAAa7uE,EAAgB0uE,IAAgBE,GAAkBA,EAAiB,GAAKD,GACzFE,EAAY,KAAK,IAAIA,EAAW,CAAC,EAEjCpoH,EAAK6nH,EAAQ,SAAUQ,EAAQ,CAC7B,IAAIhkD,EAAWgkD,EAAO,SAClBC,EAAWD,EAAO,SACtB,GAAKA,EAAO,MAkBL,CAIL,IAAIE,EAAaF,EAAO,MACpBhkD,IACFkkD,EAAa,KAAK,IAAIA,EAAYlkD,CAAQ,GAGxCikD,IACFC,EAAa,KAAK,IAAIA,EAAYD,CAAQ,GAE5CD,EAAO,MAAQE,EACfhvE,GAAiBgvE,EAAaL,EAAgBK,EAC9CJ,GACR,KAjCyB,CACjB,IAAII,EAAaH,EACb/jD,GAAYA,EAAWkkD,IACzBA,EAAa,KAAK,IAAIlkD,EAAU9qB,CAAa,GAO3C+uE,GAAYA,EAAWC,IACzBA,EAAaD,GAEXC,IAAeH,IACjBC,EAAO,MAAQE,EACfhvE,GAAiBgvE,EAAaL,EAAgBK,EAC9CJ,IAEV,CAgBA,CAAK,EAEDC,GAAa7uE,EAAgB0uE,IAAgBE,GAAkBA,EAAiB,GAAKD,GACrFE,EAAY,KAAK,IAAIA,EAAW,CAAC,EACjC,IAAII,EAAW,EACXC,EACJzoH,EAAK6nH,EAAQ,SAAUQ,EAAQ5uG,EAAK,CAC7B4uG,EAAO,QACVA,EAAO,MAAQD,GAEjBK,EAAaJ,EACbG,GAAYH,EAAO,OAAS,EAAIH,EACtC,CAAK,EACGO,IACFD,GAAYC,EAAW,MAAQP,GAEjC,IAAIllH,EAAS,CAACwlH,EAAW,EACzBxoH,EAAK6nH,EAAQ,SAAUQ,EAAQP,EAAS,CACtChqH,EAAOwgH,CAAY,EAAEwJ,CAAO,EAAIhqH,EAAOwgH,CAAY,EAAEwJ,CAAO,GAAK,CAC/D,UAAWhB,EACX,OAAQ9jH,EACR,MAAOqlH,EAAO,KACf,EACDrlH,GAAUqlH,EAAO,OAAS,EAAIH,EACpC,CAAK,CACL,CAAG,EACMpqH,CACT,CACA,SAAS4qH,GAAqBC,EAAmB36D,EAAM3N,EAAa,CAClE,GAAIsoE,GAAqB36D,EAAM,CAC7B,IAAIlwD,EAAS6qH,EAAkB3C,GAAWh4D,CAAI,CAAC,EAI/C,OAAOlwD,CACX,CACA,CAqIA,SAASooH,GAAc7lE,EAAa,CAClC,OAAOA,EAAY,kBAAoBA,EAAY,iBAAiB,OAAS,aAC/E,CACA,SAASgnE,GAAchnE,EAAa,CAClC,OAAOA,EAAY,iBAAmBA,EAAY,gBAAgB,KACpE,CCjZA,IAAIuoE,GAAS,SAAU/lH,EAAGgB,EAAGsR,EAAIC,EAAI,CACnC,KAAOD,EAAKC,GAAI,CACV,IAAAQ,EAAMT,EAAKC,IAAO,EAClBvS,EAAE+S,CAAG,EAAE,CAAC,EAAI/R,EACdsR,EAAKS,EAAM,EAENR,EAAAQ,CACP,CAEK,OAAAT,CACT,EACI0zG,GAAyB,SAAUh3G,EAAQ,CAC7CC,EAAU+2G,EAAWh3G,CAAM,EAC3B,SAASg3G,EAAUC,EAAU,CAC3B,IAAI/2G,EAAQF,EAAO,KAAK,KAAMi3G,CAAQ,GAAK,KAC3C,OAAA/2G,EAAM,KAAO,OACNA,CAAA,CAKT82G,OAAAA,EAAU,UAAU,SAAW,SAAU9oD,EAAM,CACzC,IAAA+B,EAAS,KAAK,WAAW,QAAQ,EACrC,OAAOpD,GAAOqB,EAAK,MAAO7B,GAAqBO,GAAoCH,GAAmB,KAAK,aAAa,CAAC,CAAC,GAAKJ,GAAqB,OAAQ4D,EAAQ,KAAK,WAAW,QAAQ,CAAC,CAC/L,EACA+mD,EAAU,UAAU,kBAAoB,SAAU9oD,EAAMtmD,EAAKsvG,EAAgB,CACvE,IAAAnqD,EAAQ,KAAK,WAAW,QAAQ,EAChCnB,EAAO,KAAK,WAAW,QAAQ,EACnC,OAAOqC,GAAcC,EAAMtmD,EAAKsvG,EAAgBtrD,EAAMmB,CAAK,CAC7D,EAIAiqD,EAAU,UAAU,SAAW,UAAY,CACzC,IAAInsG,EAAW,KAAK,UAChB+wC,EAAS,KAAK,QACd+1D,EAAQ,CAAC,EAEb,GAAI,CAAC9mG,EACI,OAAA8mG,EAETA,EAAM,KAAK,CACT,MAAO/1D,EAAO,CAAC,EACf,MAAO,CAAA,CACR,EACG,IAAAqU,EAAS,KAAK,WAAW,QAAQ,EACjCknD,EAAaC,GAAiB,KAAK,cAAe,KAAK,gBAAiBnnD,EAAQrU,CAAM,EAClF,OAAA+1D,EAAAA,EAAM,OAAOwF,CAAU,EAC/BxF,EAAM,KAAK,CACT,MAAO/1D,EAAO,CAAC,EACf,MAAO,CAAA,CACR,EACM+1D,CACT,EACAqF,EAAU,UAAU,eAAiB,SAAUl9G,EAAK,CAClD,IAAI8hD,EAAS,KAAK,QAQlB,GANIA,EAAO,CAAC,IAAMA,EAAO,CAAC,IAExBA,EAAO,CAAC,GAAKqQ,GACbrQ,EAAO,CAAC,GAAKqQ,IAGXrQ,EAAO,CAAC,IAAM,MAAaA,EAAO,CAAC,IAAM,IAAU,CACjD,IAAAhpD,MAAQ,KACZgpD,EAAO,CAAC,EAAI,CAAC,IAAI,KAAKhpD,EAAE,YAAY,EAAGA,EAAE,SAAA,EAAYA,EAAE,SAAS,EAChEgpD,EAAO,CAAC,EAAIA,EAAO,CAAC,EAAIqQ,EAAA,CAE1B,KAAK,cAAcnyD,EAAI,YAAaA,EAAI,YAAaA,EAAI,WAAW,CACtE,EACAk9G,EAAU,UAAU,cAAgB,SAAUK,EAAerG,EAAaC,EAAa,CACrFoG,EAAgBA,GAAiB,GACjC,IAAIz7D,EAAS,KAAK,QACds1D,EAAOt1D,EAAO,CAAC,EAAIA,EAAO,CAAC,EAC/B,KAAK,gBAAkBs1D,EAAOmG,EAC1BrG,GAAe,MAAQ,KAAK,gBAAkBA,IAChD,KAAK,gBAAkBA,GAErBC,GAAe,MAAQ,KAAK,gBAAkBA,IAChD,KAAK,gBAAkBA,GAEzB,IAAIqG,EAAoBC,GAAe,OACnC3vG,EAAM,KAAK,IAAImvG,GAAOQ,GAAgB,KAAK,gBAAiB,EAAGD,CAAiB,EAAGA,EAAoB,CAAC,EAE5G,KAAK,UAAYC,GAAe3vG,CAAG,EAAE,CAAC,EAGjC,KAAA,cAAgB2vG,GAAe,KAAK,IAAI3vG,EAAM,EAAG,CAAC,CAAC,EAAE,CAAC,CAC7D,EACAovG,EAAU,UAAU,MAAQ,SAAUjsH,EAAK,CAEzC,OAAOkE,GAASlE,CAAG,EAAIA,EAAM,CAACkiE,GAAqBliE,CAAG,CACxD,EACAisH,EAAU,UAAU,QAAU,SAAUjsH,EAAK,CAC3C,OAAOymH,GAAoB,KAAK,MAAMzmH,CAAG,EAAG,KAAK,OAAO,CAC1D,EACAisH,EAAU,UAAU,UAAY,SAAUjsH,EAAK,CAC7C,OAAO0mH,GAAsB,KAAK,MAAM1mH,CAAG,EAAG,KAAK,OAAO,CAC5D,EACAisH,EAAU,UAAU,MAAQ,SAAUjsH,EAAK,CACzC,OAAO2mH,GAAkB3mH,EAAK,KAAK,OAAO,CAC5C,EACAisH,EAAU,KAAO,OACVA,CAAA,EACPvE,EAAa,EAOX8E,GAAiB,CAErB,CAAC,SAAUzrD,EAAU,EAAG,CAAC,SAAUC,EAAU,EAAG,CAAC,OAAQC,EAAQ,EAAG,CAAC,cAAeA,GAAW,CAAC,EAAG,CAAC,WAAYA,GAAW,EAAE,EAAG,CAAC,MAAOC,GAAU,GAAG,EAAG,CAAC,YAAaA,GAAU,GAAG,EAAG,CAAC,OAAQA,GAAU,CAAC,EAAG,CAAC,QAASA,GAAU,EAAE,EAAG,CAAC,UAAWA,GAAU,EAAE,EAAG,CAAC,YAAaC,GAAW,CAAC,EAAG,CAAC,OAAQA,EAAQ,CAC/S,EACA,SAASsrD,GAAgB72E,EAAM82E,EAAQC,EAAQ3qD,EAAO,CAChD,IAAA4qD,EAAQ1qD,GAAqBwqD,CAAM,EACnCG,EAAQ3qD,GAAqByqD,CAAM,EACnCG,EAAS,SAAUl3E,EAAM,CACpB,OAAAquB,GAAa2oD,EAAOh3E,EAAMosB,CAAK,IAAMiC,GAAa4oD,EAAOj3E,EAAMosB,CAAK,CAC7E,EACI+qD,EAAa,UAAY,CAC3B,OAAOD,EAAO,MAAM,CACtB,EAGIE,EAAc,UAAY,CACrB,OAAAD,EAAA,GAAgBD,EAAO,OAAO,CACvC,EACIG,EAAY,UAAY,CACnB,OAAAD,EAAA,GAAiBF,EAAO,KAAK,CACtC,EAEII,EAAa,UAAY,CACpB,OAAAD,EAAA,GAAeH,EAAO,MAAM,CACrC,EACIK,EAAe,UAAY,CACtB,OAAAD,EAAA,GAAgBJ,EAAO,QAAQ,CACxC,EACIM,EAAe,UAAY,CACtB,OAAAD,EAAA,GAAkBL,EAAO,QAAQ,CAC1C,EACIO,EAAoB,UAAY,CAC3B,OAAAD,EAAA,GAAkBN,EAAO,aAAa,CAC/C,EACA,OAAQl3E,EAAM,CACZ,IAAK,OACH,OAAOm3E,EAAW,EACpB,IAAK,QACH,OAAOC,EAAY,EACrB,IAAK,MACH,OAAOC,EAAU,EACnB,IAAK,OACH,OAAOC,EAAW,EACpB,IAAK,SACH,OAAOC,EAAa,EACtB,IAAK,SACH,OAAOC,EAAa,EACtB,IAAK,cACH,OAAOC,EAAkB,CAAA,CAE/B,CAiDA,SAASC,GAAgBC,EAAgBC,EAAa,CAClC,OAAAD,GAAArsD,GACXqsD,EAAiB,GAAK,GAE3BA,EAAiB,IAAM,EACvBA,EAAiB,IAAM,EAAIA,EAAiB,IAAM,EAAI,CAC1D,CACA,SAASE,GAAiBF,EAAgB,CACxC,IAAIG,EAAmB,GAAKxsD,GACV,OAAAqsD,GAAAG,EACXH,EAAiB,EAAI,EAAIA,EAAiB,EAAI,EAAIA,EAAiB,EAAI,EAAI,CACpF,CACA,SAASI,GAAgBJ,EAAgB,CACrB,OAAAA,GAAAtsD,GACXssD,EAAiB,GAAK,GAAKA,EAAiB,EAAI,EAAIA,EAAiB,IAAM,EAAIA,EAAiB,EAAI,EAAI,CACjH,CACA,SAASK,GAA6BL,EAAgBM,EAAW,CAC/D,OAAAN,GAAkBM,EAAY7sD,GAAaD,GACpCwsD,EAAiB,GAAK,GAAKA,EAAiB,GAAK,GAAKA,EAAiB,GAAK,GAAKA,EAAiB,GAAK,GAAKA,EAAiB,EAAI,EAAIA,EAAiB,EAAI,EAAI,CACvK,CACA,SAASO,GAAwBP,EAAgB,CACxC,OAAAQ,GAAgBR,CAAoB,CAC7C,CACA,SAASS,GAAwB/rD,EAAMgsD,EAAUjsD,EAAO,CAClD,IAAAksD,EAAU,IAAI,KAAKjsD,CAAI,EACnB,OAAAP,GAAmBusD,CAAQ,EAAG,CACpC,IAAK,OACL,IAAK,QACHC,EAAQ9pD,GAAgBpC,CAAK,CAAC,EAAE,CAAC,EACnC,IAAK,MACHksD,EAAQ7pD,GAAerC,CAAK,CAAC,EAAE,CAAC,EAClC,IAAK,OACHksD,EAAQ5pD,GAAgBtC,CAAK,CAAC,EAAE,CAAC,EACnC,IAAK,SACHksD,EAAQ3pD,GAAkBvC,CAAK,CAAC,EAAE,CAAC,EACrC,IAAK,SACHksD,EAAQ1pD,GAAkBxC,CAAK,CAAC,EAAE,CAAC,EACnCksD,EAAQzpD,GAAuBzC,CAAK,CAAC,EAAE,CAAC,CAAA,CAE5C,OAAOksD,EAAQ,QAAQ,CACzB,CACA,SAAS7B,GAAiB8B,EAAgBZ,EAAgBvrD,EAAOnR,EAAQ,CACvE,IAAIo3D,EAAY,IACZmG,EAAY5sD,GACZ6sD,EAAO,EACX,SAASC,EAAexuG,EAAUyuG,EAAcC,EAAcC,EAAeC,EAAeC,EAAQtnH,EAAK,CAOvG,QANI46D,EAAO,IAAI,KAAKssD,CAAY,EAC5BK,EAAWL,EACX1mH,EAAIo6D,EAAKwsD,CAAa,EAAE,EAIrBG,EAAWJ,GAAgBI,GAAY/9D,EAAO,CAAC,GACpDxpD,EAAI,KAAK,CACP,MAAOunH,CAAA,CACR,EACI/mH,GAAAiY,EACAmiD,EAAAysD,CAAa,EAAE7mH,CAAC,EACrB+mH,EAAW3sD,EAAK,QAAQ,EAG1B56D,EAAI,KAAK,CACP,MAAOunH,EACP,OAAQ,EAAA,CACT,CAAA,CAEM,SAAAC,EAAcZ,EAAUa,EAAgBC,EAAY,CAC3D,IAAIC,EAAgB,CAAC,EACjBC,EAAe,CAACH,EAAe,OAC/B,GAAA,CAAArC,GAAgB/qD,GAAmBusD,CAAQ,EAAGp9D,EAAO,CAAC,EAAGA,EAAO,CAAC,EAAGmR,CAAK,EAG7E,CAAIitD,IACFH,EAAiB,CAAC,CAEhB,MAAOd,GAAwB,IAAI,KAAKn9D,EAAO,CAAC,CAAC,EAAGo9D,EAAUjsD,CAAK,CAAA,EAClE,CACD,MAAOnR,EAAO,CAAC,CAAA,CAChB,GAEH,QAASlyD,EAAI,EAAGA,EAAImwH,EAAe,OAAS,EAAGnwH,IAAK,CAC9C,IAAAuwH,EAAYJ,EAAenwH,CAAC,EAAE,MAC9BwwH,EAAUL,EAAenwH,EAAI,CAAC,EAAE,MACpC,GAAIuwH,IAAcC,EAGlB,KAAIrvG,EAAW,OACXsvG,EAAa,OACbC,EAAa,OACbV,GAAS,GACb,OAAQV,EAAU,CAChB,IAAK,OACQnuG,EAAA,KAAK,IAAI,EAAG,KAAK,MAAMytG,EAAiBrsD,GAAU,GAAG,CAAC,EACjEkuD,EAAajtD,GAAmBH,CAAK,EACrCqtD,EAAalrD,GAAmBnC,CAAK,EACrC,MACF,IAAK,YACL,IAAK,UACL,IAAK,QACHliD,EAAW2tG,GAAiBF,CAAc,EAC1C6B,EAAahtD,GAAgBJ,CAAK,EAClCqtD,EAAajrD,GAAgBpC,CAAK,EAClC,MACF,IAAK,OACL,IAAK,YACL,IAAK,MACQliD,EAAAwtG,GAAgBC,CAAkB,EAC7C6B,EAAa/sD,GAAeL,CAAK,EACjCqtD,EAAahrD,GAAerC,CAAK,EACxB2sD,GAAA,GACT,MACF,IAAK,WACL,IAAK,cACL,IAAK,OACH7uG,EAAW6tG,GAAgBJ,CAAc,EACzC6B,EAAa7sD,GAAgBP,CAAK,EAClCqtD,EAAa/qD,GAAgBtC,CAAK,EAClC,MACF,IAAK,SACQliD,EAAA8tG,GAA6BL,EAAgB,EAAI,EAC5D6B,EAAa5sD,GAAkBR,CAAK,EACpCqtD,EAAa9qD,GAAkBvC,CAAK,EACpC,MACF,IAAK,SACQliD,EAAA8tG,GAA6BL,EAAgB,EAAK,EAC7D6B,EAAa3sD,GAAkBT,CAAK,EACpCqtD,EAAa7qD,GAAkBxC,CAAK,EACpC,MACF,IAAK,cACHliD,EAAWguG,GAAwBP,CAAc,EACjD6B,EAAazsD,GAAuBX,CAAK,EACzCqtD,EAAa5qD,GAAuBzC,CAAK,EACzC,KAAA,CAEJssD,EAAexuG,EAAUovG,EAAWC,EAASC,EAAYC,EAAYV,GAAQK,CAAa,EACtFf,IAAa,QAAUc,EAAW,OAAS,GAAKpwH,IAAM,GAExDowH,EAAW,QAAQ,CACjB,MAAOA,EAAW,CAAC,EAAE,MAAQjvG,CAAA,CAC9B,EACH,CAEF,QAASnhB,EAAI,EAAGA,EAAIqwH,EAAc,OAAQrwH,IACxCowH,EAAW,KAAKC,EAAcrwH,CAAC,CAAC,EAG3B,OAAAqwH,EAAA,CAMA,QAJLM,EAAc,CAAC,EACfC,EAAoB,CAAC,EACrBC,EAAY,EACZC,EAAqB,EAChB9wH,EAAI,EAAGA,EAAIyvH,EAAU,QAAUC,IAASpG,EAAW,EAAEtpH,EAAG,CAC/D,IAAI+wH,EAAkBhuD,GAAmB0sD,EAAUzvH,CAAC,CAAC,EACrD,GAAKijE,GAAkBwsD,EAAUzvH,CAAC,CAAC,EAIrB,CAAAkwH,EAAAT,EAAUzvH,CAAC,EAAG2wH,EAAYA,EAAY,OAAS,CAAC,GAAK,CAAC,EAAGC,CAAiB,EACpF,IAAAI,EAAsBvB,EAAUzvH,EAAI,CAAC,EAAI+iE,GAAmB0sD,EAAUzvH,EAAI,CAAC,CAAC,EAAI,KACpF,GAAI+wH,IAAoBC,EAAqB,CAC3C,GAAIJ,EAAkB,OAAQ,CACPE,EAAAD,EAEHD,EAAA,KAAK,SAAUtpH,EAAGC,EAAG,CAC9B,OAAAD,EAAE,MAAQC,EAAE,KAAA,CACpB,EAED,QADI0pH,EAA6B,CAAC,EACzBroB,EAAM,EAAGA,EAAMgoB,EAAkB,OAAQ,EAAEhoB,EAAK,CACnD,IAAAsoB,EAAYN,EAAkBhoB,CAAG,EAAE,OACnCA,IAAQ,GAAKgoB,EAAkBhoB,EAAM,CAAC,EAAE,QAAUsoB,KACzBD,EAAA,KAAKL,EAAkBhoB,CAAG,CAAC,EAClDsoB,GAAah/D,EAAO,CAAC,GAAKg/D,GAAah/D,EAAO,CAAC,GACjD2+D,IAEJ,CAEF,IAAIM,GAAiBj/D,EAAO,CAAC,EAAIA,EAAO,CAAC,GAAK08D,EAO9C,GALIiC,EAAYM,EAAgB,KAAOL,EAAqBK,EAAgB,MAI5ER,EAAY,KAAKM,CAA0B,EACvCJ,EAAYM,GAAiB3B,IAAmBC,EAAUzvH,CAAC,GAC7D,KACF,CAGF4wH,EAAoB,CAAC,CAAA,EACvB,CAgBF,QATIQ,EAAsBrsH,GAAOhF,EAAI4wH,EAAa,SAAUP,EAAY,CAC/D,OAAArrH,GAAOqrH,EAAY,SAAU5rD,EAAM,CACjC,OAAAA,EAAK,OAAStS,EAAO,CAAC,GAAKsS,EAAK,OAAStS,EAAO,CAAC,GAAK,CAACsS,EAAK,MAAA,CACpE,CAAA,CACF,EAAG,SAAU4rD,EAAY,CACxB,OAAOA,EAAW,OAAS,CAAA,CAC5B,EACGnI,EAAQ,CAAC,EACToJ,EAAWD,EAAoB,OAAS,EACnCpxH,EAAI,EAAGA,EAAIoxH,EAAoB,OAAQ,EAAEpxH,EAEhD,QADIowH,EAAagB,EAAoBpxH,CAAC,EAC7B4b,EAAI,EAAGA,EAAIw0G,EAAW,OAAQ,EAAEx0G,EACvCqsG,EAAM,KAAK,CACT,MAAOmI,EAAWx0G,CAAC,EAAE,MACrB,MAAOy1G,EAAWrxH,CAAA,CACnB,EAGCioH,EAAA,KAAK,SAAU3gH,EAAGC,EAAG,CAClB,OAAAD,EAAE,MAAQC,EAAE,KAAA,CACpB,EAGD,QADIhF,EAAS,CAAC,EACLvC,EAAI,EAAGA,EAAIioH,EAAM,OAAQ,EAAEjoH,GAC9BA,IAAM,GAAKioH,EAAMjoH,CAAC,EAAE,QAAUioH,EAAMjoH,EAAI,CAAC,EAAE,QACtCuC,EAAA,KAAK0lH,EAAMjoH,CAAC,CAAC,EAGjB,OAAAuC,CACT,CACAkkH,GAAM,cAAc6G,EAAS,ECzc7B,IAAIgE,GAAa7K,GAAM,UAEnB8K,GAAqBxI,GAAc,UACnCyI,GAAmB1I,GACnB2I,GAAY,KAAK,MACjBC,GAAW,KAAK,KAChBpzG,GAAU,KAAK,IACfqzG,GAAU,KAAK,IACfC,GAAwB,SAAUt7G,EAAQ,CAC5CC,EAAUq7G,EAAUt7G,CAAM,EAC1B,SAASs7G,GAAW,CAClB,IAAIp7G,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO,MACbA,EAAM,KAAO,GACbA,EAAM,eAAiB,IAAIuyG,GAE3BvyG,EAAM,UAAY,EACXA,CACX,CAIE,OAAAo7G,EAAS,UAAU,SAAW,SAAUxI,EAAqB,CAC3D,IAAIyI,EAAgB,KAAK,eACrB3/D,EAAS,KAAK,QACd4/D,EAAiBD,EAAc,UAAW,EAC1C5J,EAAQsJ,GAAmB,SAAS,KAAK,KAAMnI,CAAmB,EACtE,OAAOh7F,EAAW65F,EAAO,SAAUzjD,EAAM,CACvC,IAAInjE,EAAMmjE,EAAK,MACXutD,EAASjJ,GAAiBxqG,GAAQ,KAAK,KAAMjd,CAAG,CAAC,EAErD,OAAA0wH,EAAS1wH,IAAQ6wD,EAAO,CAAC,GAAK,KAAK,QAAU8/D,GAAiBD,EAAQD,EAAe,CAAC,CAAC,EAAIC,EAC3FA,EAAS1wH,IAAQ6wD,EAAO,CAAC,GAAK,KAAK,QAAU8/D,GAAiBD,EAAQD,EAAe,CAAC,CAAC,EAAIC,EACpF,CACL,MAAOA,CACR,CACF,EAAE,IAAI,CACR,EACDH,EAAS,UAAU,UAAY,SAAU13G,EAAO0iB,EAAK,CACnD,IAAIsiC,EAAOyyD,GAAQ,KAAK,IAAI,EAE5Bz3G,EAAQy3G,GAAQ,KAAK,IAAI,EAAGz3G,CAAK,CAAC,EAAIglD,EACtCtiC,EAAM+0F,GAAQ,KAAK,IAAI,EAAG/0F,CAAG,CAAC,EAAIsiC,EAClCqyD,GAAmB,UAAU,KAAK,KAAMr3G,EAAO0iB,CAAG,CACnD,EAIDg1F,EAAS,UAAU,UAAY,UAAY,CACzC,IAAI1yD,EAAO,KAAK,KACZhN,EAASo/D,GAAW,UAAU,KAAK,IAAI,EAC3Cp/D,EAAO,CAAC,EAAI5zC,GAAQ4gD,EAAMhN,EAAO,CAAC,CAAC,EACnCA,EAAO,CAAC,EAAI5zC,GAAQ4gD,EAAMhN,EAAO,CAAC,CAAC,EAEnC,IAAI2/D,EAAgB,KAAK,eACrBC,EAAiBD,EAAc,UAAW,EAC9C,YAAK,UAAY3/D,EAAO,CAAC,EAAI8/D,GAAiB9/D,EAAO,CAAC,EAAG4/D,EAAe,CAAC,CAAC,GAC1E,KAAK,UAAY5/D,EAAO,CAAC,EAAI8/D,GAAiB9/D,EAAO,CAAC,EAAG4/D,EAAe,CAAC,CAAC,GACnE5/D,CACR,EACD0/D,EAAS,UAAU,YAAc,SAAU1/D,EAAQ,CACjD,KAAK,eAAe,YAAYA,CAAM,EACtC,IAAIgN,EAAO,KAAK,KAChBhN,EAAO,CAAC,EAAIy/D,GAAQz/D,EAAO,CAAC,CAAC,EAAIy/D,GAAQzyD,CAAI,EAC7ChN,EAAO,CAAC,EAAIy/D,GAAQz/D,EAAO,CAAC,CAAC,EAAIy/D,GAAQzyD,CAAI,EAC7CoyD,GAAW,YAAY,KAAK,KAAMp/D,CAAM,CACzC,EACD0/D,EAAS,UAAU,oBAAsB,SAAUptH,EAAM61C,EAAK,CAG5D,KAAK,YAAY71C,EAAK,qBAAqB61C,CAAG,CAAC,CAChD,EAKDu3E,EAAS,UAAU,cAAgB,SAAUjE,EAAe,CAC1DA,EAAgBA,GAAiB,GACjC,IAAIz7D,EAAS,KAAK,QACds1D,EAAOt1D,EAAO,CAAC,EAAIA,EAAO,CAAC,EAC/B,GAAI,EAAAs1D,IAAS,KAAYA,GAAQ,GAGjC,KAAIrmG,EAAW8wG,GAAoBzK,CAAI,EACnC0K,EAAMvE,EAAgBnG,EAAOrmG,EAMjC,IAJI+wG,GAAO,KACT/wG,GAAY,IAGP,CAAC,MAAMA,CAAQ,GAAK,KAAK,IAAIA,CAAQ,EAAI,GAAK,KAAK,IAAIA,CAAQ,EAAI,GACxEA,GAAY,GAEd,IAAIgxG,EAAa,CAACrJ,GAAiB4I,GAASx/D,EAAO,CAAC,EAAI/wC,CAAQ,EAAIA,CAAQ,EAAG2nG,GAAiB2I,GAAUv/D,EAAO,CAAC,EAAI/wC,CAAQ,EAAIA,CAAQ,CAAC,EAC3I,KAAK,UAAYA,EACjB,KAAK,YAAcgxG,EACpB,EACDP,EAAS,UAAU,eAAiB,SAAUxhH,EAAK,CACjDmhH,GAAmB,eAAe,KAAK,KAAMnhH,CAAG,EAChD,KAAK,QAAUA,EAAI,OACnB,KAAK,QAAUA,EAAI,MACpB,EACDwhH,EAAS,UAAU,MAAQ,SAAUvwH,EAAK,CACxC,OAAOA,CACR,EACDuwH,EAAS,UAAU,QAAU,SAAUvwH,EAAK,CAC1C,OAAAA,EAAMswH,GAAQtwH,CAAG,EAAIswH,GAAQ,KAAK,IAAI,EAC/B7J,GAAoBzmH,EAAK,KAAK,OAAO,CAC7C,EACDuwH,EAAS,UAAU,UAAY,SAAUvwH,EAAK,CAC5C,OAAAA,EAAMswH,GAAQtwH,CAAG,EAAIswH,GAAQ,KAAK,IAAI,EAC/B5J,GAAsB1mH,EAAK,KAAK,OAAO,CAC/C,EACDuwH,EAAS,UAAU,MAAQ,SAAUvwH,EAAK,CACxC,OAAAA,EAAM2mH,GAAkB3mH,EAAK,KAAK,OAAO,EAClCid,GAAQ,KAAK,KAAMjd,CAAG,CAC9B,EACDuwH,EAAS,KAAO,MACTA,CACT,EAAEnL,EAAK,EACH9+G,GAAQiqH,GAAS,UACrBjqH,GAAM,cAAgB4pH,GAAmB,cACzC5pH,GAAM,SAAW4pH,GAAmB,SACpC,SAASS,GAAiB3wH,EAAK+wH,EAAa,CAC1C,OAAOZ,GAAiBnwH,EAAKyoH,GAAwBsI,CAAW,CAAC,CACnE,CACA3L,GAAM,cAAcmL,EAAQ,ECnI5B,IAAIS,GAAkC,UAAY,CACvCA,SAAAA,EAAmBtpH,EAAOwgC,EAEnCuoF,EAAgB,CACT,KAAA,eAAe/oH,EAAOwgC,EAAOuoF,CAAc,CAAA,CAMlDO,OAAAA,EAAmB,UAAU,eAAiB,SAAUtpH,EAAOwgC,EAE/D5K,EAAY,CACNA,EAAW,CAAC,EAAIA,EAAW,CAAC,IACjBA,EAAA,CAAC,IAAK,GAAG,GAEnB,KAAA,SAAWA,EAAW,CAAC,EACvB,KAAA,SAAWA,EAAW,CAAC,EAC5B,IAAI2zF,EAAY,KAAK,WAAavpH,EAAM,OAAS,UACjD,KAAK,eAAiBA,EAAM,OAAS,YAAcwgC,EAAM,kBAAoBA,EAAM,iBAAiB,EACpG,IAAIgpF,EAAehpF,EAAM,IAAI,MAAO,EAAI,EACpCgpF,GAAgB,OACHA,EAAAhpF,EAAM,IAAI,aAAc,EAAI,GAEzC,IAAAipF,EAAc,KAAK,aAAeD,EAClCptH,EAAWqtH,CAAW,EAEnB,KAAA,aAAeC,GAAqB1pH,EAAOypH,EAAY,CAC1D,IAAK7zF,EAAW,CAAC,EACjB,IAAKA,EAAW,CAAC,CAAA,CAClB,CAAC,EACO6zF,IAAgB,YACpB,KAAA,aAAeC,GAAqB1pH,EAAOypH,CAAW,GAE7D,IAAIE,EAAc,KAAK,aAAenpF,EAAM,IAAI,MAAO,EAAI,EAU3D,GATIpkC,EAAWutH,CAAW,EAEnB,KAAA,aAAeD,GAAqB1pH,EAAO2pH,EAAY,CAC1D,IAAK/zF,EAAW,CAAC,EACjB,IAAKA,EAAW,CAAC,CAAA,CAClB,CAAC,EACO+zF,IAAgB,YACpB,KAAA,aAAeD,GAAqB1pH,EAAO2pH,CAAW,GAEzDJ,EAIG,KAAA,aAAe/oF,EAAM,cAAgB,EAAA,WACrC,CACD,IAAAopF,EAAcppF,EAAM,IAAI,aAAa,EACrCqpF,EAAiBxvH,EAAQuvH,CAAW,EAAIA,EAAc,CAACA,GAAe,EAAGA,GAAe,CAAC,EACzF,OAAOC,EAAe,CAAC,GAAM,WAAa,OAAOA,EAAe,CAAC,GAAM,UAIpE,KAAA,kBAAoB,CAAC,EAAG,CAAC,EAE9B,KAAK,kBAAoB,CAACh/F,GAAag/F,EAAe,CAAC,EAAG,CAAC,EAAGh/F,GAAag/F,EAAe,CAAC,EAAG,CAAC,CAAC,CAClG,CAEJ,EAOAP,EAAmB,UAAU,UAAY,UAAY,CAUnD,IAAIC,EAAY,KAAK,WACjBO,EAAU,KAAK,SACfC,EAAU,KAAK,SACfC,EAAc,KAAK,aACnBC,EAAmB,KAAK,kBACxBxL,EAAQ8K,EAAqD,KAAzCQ,EAAUD,GAAW,KAAK,IAAIA,CAAO,EAGzDppH,EAAM,KAAK,eAAiB,UAAYopH,EAAU,KAAK,aACvDnpH,EAAM,KAAK,eAAiB,UAAYopH,EAAU,KAAK,aAEvDG,EAAWxpH,GAAO,KAClBypH,EAAWxpH,GAAO,KAClBD,GAAO,OACTA,EAAM6oH,EAAYS,EAAc,EAAI,IAAMF,EAAUG,EAAiB,CAAC,EAAIxL,GAExE99G,GAAO,OACHA,EAAA4oH,EAAYS,EAAcA,EAAc,EAAI,IAAMD,EAAUE,EAAiB,CAAC,EAAIxL,IAEzF/9G,GAAO,MAAQ,CAAC,SAASA,CAAG,KAAOA,EAAM,MACzCC,GAAO,MAAQ,CAAC,SAASA,CAAG,KAAOA,EAAM,KACtC,IAAAk9G,EAAUhhH,GAAM6D,CAAG,GAAK7D,GAAM8D,CAAG,GAAK4oH,GAAa,CAACS,EAEpD,KAAK,iBAEHtpH,EAAM,GAAKC,EAAM,GAAK,CAACupH,IACnBxpH,EAAA,GAIJA,EAAM,GAAKC,EAAM,GAAK,CAACwpH,IACnBxpH,EAAA,IAQV,IAAIypH,EAAgB,KAAK,eACrBC,EAAgB,KAAK,eACzB,OAAID,GAAiB,OACb1pH,EAAA0pH,EACKF,EAAA,IAETG,GAAiB,OACb1pH,EAAA0pH,EACKF,EAAA,IAIN,CACL,IAAAzpH,EACA,IAAAC,EACA,SAAAupH,EACA,SAAAC,EACA,QAAAtM,CACF,CACF,EACAyL,EAAmB,UAAU,iBAAmB,SAAUgB,EAAYhyH,EAAK,CAIpE,KAAAiyH,GAAkBD,CAAU,CAAC,EAAIhyH,CACxC,EACAgxH,EAAmB,UAAU,oBAAsB,SAAUgB,EAAYhyH,EAAK,CACxE,IAAA2hC,EAAOuwF,GAAwBF,CAAU,EAM7C,KAAKrwF,CAAI,EAAI3hC,CACf,EACAgxH,EAAmB,UAAU,OAAS,UAAY,CAEhD,KAAK,OAAS,EAChB,EACOA,CACP,EAAA,EAEEkB,GAA0B,CAC5B,IAAK,iBACL,IAAK,gBACP,EACID,GAAoB,CACtB,IAAK,WACL,IAAK,UACP,EAgBgB,SAAAE,GAAyBzqH,EAAOwgC,EAEhDuoF,EAAgB,CAEd,IAAI2B,EAAgB1qH,EAAM,cAC1B,OAAI0qH,IAGJA,EAAgB,IAAIpB,GAAmBtpH,EAAOwgC,EAAOuoF,CAAc,EAEnE/oH,EAAM,cAAgB0qH,EACfA,EACT,CACgB,SAAAhB,GAAqB1pH,EAAO2qH,EAAQ,CAC3C,OAAAA,GAAU,KAAO,KAAO9tH,GAAM8tH,CAAM,EAAI,IAAM3qH,EAAM,MAAM2qH,CAAM,CACzE,CCpLO,SAASC,GAAe5qH,EAAOwgC,EAAO,CAC3C,IAAIqqF,EAAY7qH,EAAM,KAClB8qH,EAAkBL,GAAyBzqH,EAAOwgC,EAAOxgC,EAAM,UAAS,CAAE,EAAE,UAAW,EAC3FA,EAAM,SAAS8qH,EAAgB,OAAO,EACtC,IAAIpqH,EAAMoqH,EAAgB,IACtBnqH,EAAMmqH,EAAgB,IAUtBlvF,EAAU4E,EAAM,QACpB,GAAI5E,GAAWivF,IAAc,OAA0C,CACrE,IAAIE,EAAkBpJ,GAAuB,MAAO/lF,CAAO,EACvDovF,EAA8B,GAIlC,GAHAxkG,EAAYukG,EAAiB,SAAUhvE,EAAa,CAClDivE,EAA8BA,GAA+BjvE,EAAY,YAAa,IAAKvb,EAAM,IACvG,CAAK,EACGwqF,EAA6B,CAG/B,IAAI3G,EAAoBhC,GAAiB0I,CAAe,EAEpDE,EAAgBC,GAAuBxqH,EAAKC,EAAK6/B,EAAO6jF,CAAiB,EAC7E3jH,EAAMuqH,EAAc,IACpBtqH,EAAMsqH,EAAc,GAC1B,CACA,CACE,MAAO,CACL,OAAQ,CAACvqH,EAAKC,CAAG,EAGjB,OAAQmqH,EAAgB,SACxB,OAAQA,EAAgB,QACzB,CACH,CACA,SAASI,GAAuBxqH,EAAKC,EAAK6/B,EAE1C6jF,EAAmB,CAEjB,IAAI9B,EAAa/hF,EAAM,KAAK,UAAW,EACnC2qF,EAAa,KAAK,IAAI5I,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EAEnD6I,EAAoBhH,GAAqBC,EAAmB7jF,EAAM,IAAI,EAC1E,GAAI4qF,IAAsB,OACxB,MAAO,CACL,IAAK1qH,EACL,IAAKC,CACN,EAEH,IAAI0qH,EAAc,IAClB7kG,EAAY4kG,EAAmB,SAAUtxF,EAAM,CAC7CuxF,EAAc,KAAK,IAAIvxF,EAAK,OAAQuxF,CAAW,CACnD,CAAG,EACD,IAAIC,EAAc,KAClB9kG,EAAY4kG,EAAmB,SAAUtxF,EAAM,CAC7CwxF,EAAc,KAAK,IAAIxxF,EAAK,OAASA,EAAK,MAAOwxF,CAAW,CAChE,CAAG,EACDD,EAAc,KAAK,IAAIA,CAAW,EAClCC,EAAc,KAAK,IAAIA,CAAW,EAClC,IAAIC,EAAgBF,EAAcC,EAE9BE,EAAW7qH,EAAMD,EACjB+qH,EAAuB,GAAKJ,EAAcC,GAAeH,EACzDO,EAAiBF,EAAWC,EAAuBD,EACvD,OAAA7qH,GAAO+qH,GAAkBJ,EAAcC,GACvC7qH,GAAOgrH,GAAkBL,EAAcE,GAChC,CACL,IAAK7qH,EACL,IAAKC,CACN,CACH,CAIO,SAASgrH,GAAgB3rH,EAAO4rH,EAAS,CAC9C,IAAIprF,EAAQorF,EACRC,EAAajB,GAAe5qH,EAAOwgC,CAAK,EACxC2oB,EAAS0iE,EAAW,OACpBvN,EAAc99E,EAAM,IAAI,aAAa,EACrCxgC,aAAiB6oH,KACnB7oH,EAAM,KAAOwgC,EAAM,IAAI,SAAS,GAElC,IAAIqqF,EAAY7qH,EAAM,KAClBoY,EAAWooB,EAAM,IAAI,UAAU,EAC/BsrF,EAAmBjB,IAAc,YAAcA,IAAc,OACjE7qH,EAAM,UAAUmpD,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACpCnpD,EAAM,eAAe,CACnB,YAAas+G,EACb,OAAQuN,EAAW,OACnB,OAAQA,EAAW,OACnB,YAAaC,EAAmBtrF,EAAM,IAAI,aAAa,EAAI,KAC3D,YAAasrF,EAAmBtrF,EAAM,IAAI,aAAa,EAAI,IAC/D,CAAG,EAMGpoB,GAAY,MACdpY,EAAM,aAAeA,EAAM,YAAYoY,CAAQ,CAEnD,CAIO,SAAS2zG,GAAmBvrF,EAAOyyE,EAAU,CAElD,GADAA,EAAWA,GAAYzyE,EAAM,IAAI,MAAM,EACnCyyE,EACF,OAAQA,EAAQ,CAEd,IAAK,WACH,OAAO,IAAI6L,GAAa,CACtB,YAAat+E,EAAM,eAAiBA,EAAM,eAAgB,EAAGA,EAAM,cAAe,EAClF,OAAQ,CAAC,IAAU,IAAS,CACtC,CAAS,EACH,IAAK,OACH,OAAO,IAAI+jF,GAAU,CACnB,OAAQ/jF,EAAM,QAAQ,eAAgB,EACtC,OAAQA,EAAM,QAAQ,IAAI,QAAQ,CAC5C,CAAS,EACH,QAEE,OAAO,IAAKk9E,GAAM,SAASzK,CAAQ,GAAK+M,GAChD,CAEA,CAIO,SAASgM,GAAgBtiE,EAAM,CACpC,IAAI9zB,EAAa8zB,EAAK,MAAM,UAAW,EACnChpD,EAAMk1B,EAAW,CAAC,EAClBj1B,EAAMi1B,EAAW,CAAC,EACtB,MAAO,EAAEl1B,EAAM,GAAKC,EAAM,GAAKD,EAAM,GAAKC,EAAM,EAClD,CASO,SAASsrH,GAAmBviE,EAAM,CACvC,IAAI+6D,EAAiB/6D,EAAK,cAAa,EAAG,IAAI,WAAW,EACrDwiE,EAAoBxiE,EAAK,OAAS,WAAaA,EAAK,MAAM,UAAS,EAAG,CAAC,EAAI,KAC/E,OAAIA,EAAK,MAAM,OAAS,OACf,SAAU8U,EAAK,CACpB,OAAO,SAAU/C,EAAMtmD,EAAK,CAC1B,OAAOu0C,EAAK,MAAM,kBAAkB+R,EAAMtmD,EAAKqpD,CAAG,CACnD,CACF,EAACimD,CAAc,EACP1vF,EAAgB0vF,CAAc,EAChC,SAAUjmD,EAAK,CACpB,OAAO,SAAU/C,EAAM,CAGrB,IAAI1K,EAAQrH,EAAK,MAAM,SAAS+R,CAAI,EAChCjkE,EAAOgnE,EAAI,QAAQ,UAAWzN,GAAwB,EAAE,EAC5D,OAAOv5D,CACR,CACF,EAACitH,CAAc,EACPnlF,EAAkBmlF,CAAc,EAClC,SAAU7oH,EAAI,CACnB,OAAO,SAAU6/D,EAAMtmD,EAAK,CAO1B,OAAI+2G,GAAqB,OACvB/2G,EAAMsmD,EAAK,MAAQywD,GAEdtwH,EAAGuwH,GAAgBziE,EAAM+R,CAAI,EAAGtmD,EAAKsmD,EAAK,OAAS,KAAO,CAC/D,MAAOA,EAAK,KACb,EAAG,IAAI,CACT,CACF,EAACgpD,CAAc,EAET,SAAUhpD,EAAM,CACrB,OAAO/R,EAAK,MAAM,SAAS+R,CAAI,CAChC,CAEL,CACO,SAAS0wD,GAAgBziE,EAAM+R,EAAM,CAI1C,OAAO/R,EAAK,OAAS,WAAaA,EAAK,MAAM,SAAS+R,CAAI,EAAIA,EAAK,KACrE,CAKO,SAAS2wD,GAAuB1iE,EAAM,CAC3C,IAAIsxD,EAAYtxD,EAAK,MACjB1pD,EAAQ0pD,EAAK,MACjB,GAAI,GAACsxD,EAAU,IAAI,CAAC,YAAa,MAAM,CAAC,GAAKh7G,EAAM,WAGnD,KAAIqsH,EACAvE,EACAwE,EAAsBtsH,EAAM,UAAW,EAEvCA,aAAiB8+G,GACnBgJ,EAAY9nH,EAAM,MAAO,GAEzBqsH,EAAuBrsH,EAAM,SAAU,EACvC8nH,EAAYuE,EAAqB,QAEnC,IAAIE,EAAiB7iE,EAAK,cAAe,EACrC+6D,EAAiBwH,GAAmBviE,CAAI,EACxCjkD,EACAoT,EAAO,EAEPivG,EAAY,KACdjvG,EAAO,KAAK,KAAKivG,EAAY,EAAE,GAEjC,QAAS7wH,EAAI,EAAGA,EAAI6wH,EAAW7wH,GAAK4hB,EAAM,CACxC,IAAI4iD,EAAO4wD,EAAuBA,EAAqBp1H,CAAC,EAAI,CAC1D,MAAOq1H,EAAoB,CAAC,EAAIr1H,CACjC,EACG85D,EAAQ0zD,EAAehpD,EAAMxkE,CAAC,EAC9Bu1H,EAAsBD,EAAe,YAAYx7D,CAAK,EACtD07D,EAAaC,GAAeF,EAAqBD,EAAe,IAAI,QAAQ,GAAK,CAAC,EACtF9mH,EAAOA,EAAK,MAAMgnH,CAAU,EAAIhnH,EAAOgnH,CAC3C,CACE,OAAOhnH,EACT,CACA,SAASinH,GAAeC,EAAUtjH,EAAQ,CACxC,IAAIujH,EAAgBvjH,EAAS,KAAK,GAAK,IACnCwjH,EAAcF,EAAS,MACvBG,EAAeH,EAAS,OACxBI,EAAaF,EAAc,KAAK,IAAI,KAAK,IAAID,CAAa,CAAC,EAAI,KAAK,IAAIE,EAAe,KAAK,IAAIF,CAAa,CAAC,EAC9GI,EAAcH,EAAc,KAAK,IAAI,KAAK,IAAID,CAAa,CAAC,EAAI,KAAK,IAAIE,EAAe,KAAK,IAAIF,CAAa,CAAC,EAC/GK,EAAc,IAAI5hH,GAAashH,EAAS,EAAGA,EAAS,EAAGI,EAAYC,CAAW,EAClF,OAAOC,CACT,CAKO,SAASC,GAA0B1sF,EAAO,CAC/C,IAAIpoB,EAAWooB,EAAM,IAAI,UAAU,EACnC,OAAOpoB,GAAmB,MAC5B,CAMO,SAAS+0G,GAAoBzjE,EAAM,CACxC,OAAOA,EAAK,OAAS,YAAcwjE,GAA0BxjE,EAAK,cAAe,CAAA,IAAM,CACzF,CACO,SAAS0jE,GAAwB3xH,EAAMw/G,EAAS,CAErD,IAAIoS,EAAa,CAAE,EAInB7mG,OAAAA,EAAY/qB,EAAK,iBAAiBw/G,CAAO,EAAG,SAAUrtB,EAAS,CAO7Dy/B,EAAWlR,GAAoB1gH,EAAMmyF,CAAO,CAAC,EAAI,EACrD,CAAG,EACM56D,GAAYq6F,CAAU,CAC/B,CACO,SAASC,GAAwB13F,EAAYn6B,EAAMw/G,EAAS,CAC7Dx/G,GACF+qB,EAAY4mG,GAAwB3xH,EAAMw/G,CAAO,EAAG,SAAU3pE,EAAK,CACjE,IAAIi8E,EAAe9xH,EAAK,qBAAqB61C,CAAG,EAChDi8E,EAAa,CAAC,EAAI33F,EAAW,CAAC,IAAMA,EAAW,CAAC,EAAI23F,EAAa,CAAC,GAClEA,EAAa,CAAC,EAAI33F,EAAW,CAAC,IAAMA,EAAW,CAAC,EAAI23F,EAAa,CAAC,EACxE,CAAK,CAEL,CC/SA,IAAIC,GAAoC,UAAY,CAClD,SAASA,GAAuB,CAAA,CAChC,OAAAA,EAAqB,UAAU,iBAAmB,UAAY,CAC5D,IAAI13D,EAAS,KAAK,OAClB,MAAO,CAACA,EAAO,KAChB,EAKD03D,EAAqB,UAAU,iBAAmB,UAAY,CAE7D,EACMA,CACT,EAAG,ECPCC,GAAa,CAAE,EACfC,GAAqB,CACvB,qBAAsBlf,GACtB,kBAAmBE,GACnB,iBAAkBI,GAClB,mBAAoBG,GACpB,wBAAyBD,GACzB,eAAgBG,GAChB,yBAA0BE,GAC1B,eAAgBE,GAChB,eAAgBE,GAChB,kBAAmBW,GACnB,gBAAiBN,GACjB,YAAaE,GACb,aAAc/M,GACd,SAAUmB,GACV,eAAgB7hC,GAChB,cAAe4rB,GACf,YAAapC,GACb,UAAWgD,GAEX,uBAAwB,SAAUjkB,EAAqB,CACrDvI,GAAe,cAAcuI,CAAmB,CACjD,EACD,sBAAuB,SAAU6iD,EAAoB,CACnDx/B,GAAc,cAAcw/B,CAAkB,CAC/C,EACD,oBAAqB,SAAUC,EAAkB,CAC/C7hC,GAAY,cAAc6hC,CAAgB,CAC3C,EACD,kBAAmB,SAAUC,EAAgB,CAC3C9+B,GAAU,cAAc8+B,CAAc,CACvC,EACD,yBAA0B,SAAUzvF,EAAem4B,EAAW,CAC5DgM,GAAe,yBAAyBnkC,EAAem4B,CAAS,CACjE,EACD,gBAAiB,SAAUu3D,EAAaC,EAAa,CACnD75F,GAAgB45F,EAAaC,CAAW,CAC5C,CACA,EACO,SAASC,GAAIC,EAAK,CACvB,GAAI5zH,EAAQ4zH,CAAG,EAAG,CAEhBvyH,EAAKuyH,EAAK,SAAUC,EAAW,CAC7BF,GAAIE,CAAS,CACnB,CAAK,EACD,MACJ,CACMtzH,EAAQ6yH,GAAYQ,CAAG,GAAK,IAGhCR,GAAW,KAAKQ,CAAG,EACf7xH,EAAW6xH,CAAG,IAChBA,EAAM,CACJ,QAASA,CACV,GAEHA,EAAI,QAAQP,EAAkB,EAChC,CC9DA,IAAIprD,GAAQ9mC,GAAW,EACvB,SAAS2yF,GAAoBzkE,EAAMm2B,EAAQ,CACzC,IAAIuuC,EAAO/oG,EAAWw6D,EAAQ,SAAUvnF,EAAK,CAC3C,OAAOoxD,EAAK,MAAM,MAAMpxD,CAAG,CAC/B,CAAG,EACD,OAAIoxD,EAAK,OAAS,QAAU0kE,EAAK,OAAS,IAGxCA,EAAK,KAAM,EACXA,EAAK,QAAQA,EAAK,CAAC,CAAC,EACpBA,EAAK,KAAKA,EAAKA,EAAK,OAAS,CAAC,CAAC,GAE1BA,CACT,CACO,SAASC,GAAiB3kE,EAAM,CACrC,IAAI4kE,EAAS5kE,EAAK,cAAa,EAAG,IAAI,cAAc,EACpD,GAAI4kE,EAAQ,CACV,IAAIC,EAAmBtC,GAAmBviE,CAAI,EAC1C8kE,EAAW9kE,EAAK,MAAM,UAAW,EACjC+kE,EAAcN,GAAoBzkE,EAAM4kE,CAAM,EAC9CpP,EAAQwP,GAAcD,EAAa,SAAUn2H,EAAK,CACpD,OAAOA,GAAOk2H,EAAS,CAAC,GAAKl2H,GAAOk2H,EAAS,CAAC,CACpD,CAAK,EACD,MAAO,CACL,OAAQnpG,EAAW65F,EAAO,SAAUyP,EAAQ,CAC1C,IAAIlzD,EAAO,CACT,MAAOkzD,CACR,EACD,MAAO,CACL,eAAgBJ,EAAiB9yD,CAAI,EACrC,SAAU/R,EAAK,MAAM,SAAS+R,CAAI,EAClC,UAAWkzD,CACZ,CACF,CAAA,CACF,CACL,CAEE,OAAOjlE,EAAK,OAAS,WAAaklE,GAAmBllE,CAAI,EAAImlE,GAAqBnlE,CAAI,CACxF,CASO,SAASolE,GAAgBplE,EAAMqlE,EAAW,CAC/C,IAAIT,EAAS5kE,EAAK,aAAY,EAAG,IAAI,cAAc,EACnD,GAAI4kE,EAAQ,CACV,IAAIU,EAAWtlE,EAAK,MAAM,UAAW,EACjC+kE,EAAcN,GAAoBzkE,EAAM4kE,CAAM,EAClD,MAAO,CACL,MAAOI,GAAcD,EAAa,SAAUn2H,EAAK,CAC/C,OAAOA,GAAO02H,EAAS,CAAC,GAAK12H,GAAO02H,EAAS,CAAC,CAC/C,CAAA,CACF,CACL,CAEE,OAAOtlE,EAAK,OAAS,WAAaulE,GAAkBvlE,EAAMqlE,CAAS,EAAI,CACrE,MAAO1pG,EAAWqkC,EAAK,MAAM,SAAQ,EAAI,SAAU+R,EAAM,CACvD,OAAOA,EAAK,KACb,CAAA,CACF,CACH,CACA,SAASmzD,GAAmBllE,EAAM,CAChC,IAAIwlE,EAAaxlE,EAAK,cAAe,EACjClwD,EAAS21H,GAA2BzlE,EAAMwlE,CAAU,EACxD,MAAO,CAACA,EAAW,IAAI,MAAM,GAAKxlE,EAAK,MAAM,UAAY,CACvD,OAAQ,CAAE,EACV,sBAAuBlwD,EAAO,qBAClC,EAAMA,CACN,CACA,SAAS21H,GAA2BzlE,EAAMwlE,EAAY,CACpD,IAAIE,EAAcC,GAAa3lE,EAAM,QAAQ,EACzC4lE,EAAsBpC,GAA0BgC,CAAU,EAC1D11H,EAAS+1H,GAAaH,EAAaE,CAAmB,EAC1D,GAAI91H,EACF,OAAOA,EAET,IAAIg2H,EACAC,EACJ,OAAInwF,EAAkBgwF,CAAmB,EACvCE,EAASE,GAAuChmE,EAAM4lE,CAAmB,GAEzEG,EAAuBH,IAAwB,OAASK,GAAyBjmE,CAAI,EAAI4lE,EACzFE,EAASI,GAAoClmE,EAAM+lE,CAAoB,GAGlEI,GAAaT,EAAaE,EAAqB,CACpD,OAAQE,EACR,sBAAuBC,CAC3B,CAAG,CACH,CACA,SAASR,GAAkBvlE,EAAMqlE,EAAW,CAC1C,IAAIe,EAAaT,GAAa3lE,EAAM,OAAO,EACvCqmE,EAAqB7C,GAA0B6B,CAAS,EACxDv1H,EAAS+1H,GAAaO,EAAYC,CAAkB,EACxD,GAAIv2H,EACF,OAAOA,EAET,IAAI0lH,EACA8Q,EAMJ,IAHI,CAACjB,EAAU,IAAI,MAAM,GAAKrlE,EAAK,MAAM,aACvCw1D,EAAQ,CAAE,GAER5/E,EAAkBywF,CAAkB,EACtC7Q,EAAQwQ,GAAuChmE,EAAMqmE,EAAoB,EAAI,UAKtEA,IAAuB,OAAQ,CACtC,IAAIE,EAAed,GAA2BzlE,EAAMA,EAAK,cAAa,CAAE,EACxEsmE,EAAuBC,EAAa,sBACpC/Q,EAAQ75F,EAAW4qG,EAAa,OAAQ,SAAUC,EAAW,CAC3D,OAAOA,EAAU,SACvB,CAAK,CACL,MACIF,EAAuBD,EACvB7Q,EAAQ0Q,GAAoClmE,EAAMsmE,EAAsB,EAAI,EAG9E,OAAOH,GAAaC,EAAYC,EAAoB,CAClD,MAAO7Q,EACP,qBAAsB8Q,CAC1B,CAAG,CACH,CACA,SAASnB,GAAqBnlE,EAAM,CAClC,IAAIw1D,EAAQx1D,EAAK,MAAM,SAAU,EAC7B+6D,EAAiBwH,GAAmBviE,CAAI,EAC5C,MAAO,CACL,OAAQrkC,EAAW65F,EAAO,SAAUzjD,EAAMtmD,EAAK,CAC7C,MAAO,CACL,MAAOsmD,EAAK,MACZ,eAAgBgpD,EAAehpD,EAAMtmD,CAAG,EACxC,SAAUu0C,EAAK,MAAM,SAAS+R,CAAI,EAClC,UAAWA,EAAK,KACjB,CACF,CAAA,CACF,CACH,CACA,SAAS4zD,GAAa3lE,EAAMtuD,EAAM,CAEhC,OAAOknE,GAAM5Y,CAAI,EAAEtuD,CAAI,IAAMknE,GAAM5Y,CAAI,EAAEtuD,CAAI,EAAI,GACnD,CACA,SAASm0H,GAAa9uB,EAAO3mG,EAAK,CAChC,QAAS7C,EAAI,EAAGA,EAAIwpG,EAAM,OAAQxpG,IAChC,GAAIwpG,EAAMxpG,CAAC,EAAE,MAAQ6C,EACnB,OAAO2mG,EAAMxpG,CAAC,EAAE,KAGtB,CACA,SAAS44H,GAAapvB,EAAO3mG,EAAKgB,EAAO,CACvC,OAAA2lG,EAAM,KAAK,CACT,IAAK3mG,EACL,MAAOgB,CACX,CAAG,EACMA,CACT,CACA,SAAS60H,GAAyBjmE,EAAM,CACtC,IAAIlwD,EAAS8oE,GAAM5Y,CAAI,EAAE,aACzB,OAAOlwD,IAA0B8oE,GAAM5Y,CAAI,EAAE,aAAeA,EAAK,0BAA2B,EAC9F,CAMO,SAASymE,GAA0BzmE,EAAM,CAC9C,IAAIhtC,EAAS0zG,GAA2C1mE,CAAI,EACxD+6D,EAAiBwH,GAAmBviE,CAAI,EACxCzgC,GAAYvM,EAAO,WAAaA,EAAO,aAAe,IAAM,KAAK,GACjE2zG,EAAe3mE,EAAK,MACpB4mE,EAAgBD,EAAa,UAAW,EAIxCvI,EAAYuI,EAAa,MAAO,EACpC,GAAIC,EAAc,CAAC,EAAIA,EAAc,CAAC,EAAI,EACxC,MAAO,GAET,IAAIz3G,EAAO,EAEPivG,EAAY,KACdjvG,EAAO,KAAK,IAAI,EAAG,KAAK,MAAMivG,EAAY,EAAE,CAAC,GAU/C,QARIK,EAAYmI,EAAc,CAAC,EAC3BC,EAAW7mE,EAAK,YAAYy+D,EAAY,CAAC,EAAIz+D,EAAK,YAAYy+D,CAAS,EACvEqI,EAAQ,KAAK,IAAID,EAAW,KAAK,IAAItnG,CAAQ,CAAC,EAC9CwnG,EAAQ,KAAK,IAAIF,EAAW,KAAK,IAAItnG,CAAQ,CAAC,EAC9CynG,EAAO,EACPC,EAAO,EAGJxI,GAAamI,EAAc,CAAC,EAAGnI,GAAatvG,EAAM,CACvD,IAAIhhB,EAAQ,EACRyT,EAAS,EAGT7F,EAAOmrH,GAA4BnM,EAAe,CACpD,MAAO0D,CACR,CAAA,EAAGzrG,EAAO,KAAM,SAAU,KAAK,EAEhC7kB,EAAQ4N,EAAK,MAAQ,IACrB6F,EAAS7F,EAAK,OAAS,IAEvBirH,EAAO,KAAK,IAAIA,EAAM74H,EAAO,CAAC,EAC9B84H,EAAO,KAAK,IAAIA,EAAMrlH,EAAQ,CAAC,CACnC,CACE,IAAIulH,EAAKH,EAAOF,EACZM,EAAKH,EAAOF,EAEhB,MAAMI,CAAE,IAAMA,EAAK,KACnB,MAAMC,CAAE,IAAMA,EAAK,KACnB,IAAI14G,EAAW,KAAK,IAAI,EAAG,KAAK,MAAM,KAAK,IAAIy4G,EAAIC,CAAE,CAAC,CAAC,EACnDrwB,EAAQn+B,GAAM5Y,EAAK,KAAK,EACxB64D,EAAa74D,EAAK,UAAW,EAC7BqnE,EAAmBtwB,EAAM,iBACzBuwB,EAAgBvwB,EAAM,cAO1B,OAAIswB,GAAoB,MAAQC,GAAiB,MAAQ,KAAK,IAAID,EAAmB34G,CAAQ,GAAK,GAAK,KAAK,IAAI44G,EAAgBlJ,CAAS,GAAK,GAG3IiJ,EAAmB34G,GAGnBqoF,EAAM,cAAgB8hB,EAAW,CAAC,GAAK9hB,EAAM,cAAgB8hB,EAAW,CAAC,EAC1EnqG,EAAW24G,GAKXtwB,EAAM,cAAgBqnB,EACtBrnB,EAAM,iBAAmBroF,EACzBqoF,EAAM,YAAc8hB,EAAW,CAAC,EAChC9hB,EAAM,YAAc8hB,EAAW,CAAC,GAE3BnqG,CACT,CACA,SAASg4G,GAA2C1mE,EAAM,CACxD,IAAIwlE,EAAaxlE,EAAK,cAAe,EACrC,MAAO,CACL,WAAYA,EAAK,UAAYA,EAAK,UAAW,EAAGA,EAAK,cAAgB,CAACA,EAAK,aAAc,EAAG,GAAK,EACjG,YAAawlE,EAAW,IAAI,QAAQ,GAAK,EACzC,KAAMA,EAAW,QAAO,CACzB,CACH,CACA,SAASU,GAAoClmE,EAAMunE,EAAkBC,EAAU,CAC7E,IAAIzM,EAAiBwH,GAAmBviE,CAAI,EACxC2mE,EAAe3mE,EAAK,MACpB4mE,EAAgBD,EAAa,UAAW,EACxCnB,EAAaxlE,EAAK,cAAe,EACjClwD,EAAS,CAAE,EAEXqf,EAAO,KAAK,KAAKo4G,GAAoB,GAAK,EAAG,CAAC,EAC9CzJ,EAAY8I,EAAc,CAAC,EAC3BxI,EAAYuI,EAAa,MAAO,EAKhC7I,IAAc,GAAK3uG,EAAO,GAAKivG,EAAYjvG,EAAO,IACpD2uG,EAAY,KAAK,MAAM,KAAK,KAAKA,EAAY3uG,CAAI,EAAIA,CAAI,GAO3D,IAAIs4G,EAAehE,GAAoBzjE,CAAI,EACvC0nE,EAAkBlC,EAAW,IAAI,cAAc,GAAKiC,EACpDE,EAAkBnC,EAAW,IAAI,cAAc,GAAKiC,EACpDC,GAAmB5J,IAAc8I,EAAc,CAAC,GAClDgB,EAAQhB,EAAc,CAAC,CAAC,EAI1B,QADInI,EAAYX,EACTW,GAAamI,EAAc,CAAC,EAAGnI,GAAatvG,EACjDy4G,EAAQnJ,CAAS,EAEfkJ,GAAmBlJ,EAAYtvG,IAASy3G,EAAc,CAAC,GACzDgB,EAAQhB,EAAc,CAAC,CAAC,EAE1B,SAASgB,EAAQnJ,EAAW,CAC1B,IAAIoJ,EAAU,CACZ,MAAOpJ,CACR,EACD3uH,EAAO,KAAK03H,EAAW/I,EAAY,CACjC,eAAgB1D,EAAe8M,CAAO,EACtC,SAAUlB,EAAa,SAASkB,CAAO,EACvC,UAAWpJ,CACjB,CAAK,CACL,CACE,OAAO3uH,CACT,CACA,SAASk2H,GAAuChmE,EAAMunE,EAAkBC,EAAU,CAChF,IAAIb,EAAe3mE,EAAK,MACpB+6D,EAAiBwH,GAAmBviE,CAAI,EACxClwD,EAAS,CAAE,EACfgtB,OAAAA,EAAY6pG,EAAa,SAAU,EAAE,SAAU50D,EAAM,CACnD,IAAI+1D,EAAWnB,EAAa,SAAS50D,CAAI,EACrC0sD,EAAY1sD,EAAK,MACjBw1D,EAAiBx1D,EAAK,MAAO+1D,CAAQ,GACvCh4H,EAAO,KAAK03H,EAAW/I,EAAY,CACjC,eAAgB1D,EAAehpD,CAAI,EACnC,SAAU+1D,EACV,UAAWrJ,CACnB,CAAO,CAEP,CAAG,EACM3uH,CACT,CChUA,IAAIi4H,GAAoB,CAAC,EAAG,CAAC,EAIzBC,GAAoB,UAAY,CAClC,SAASA,EAAKpgF,EAAKtxC,EAAOmpD,EAAQ,CAChC,KAAK,OAAS,GACd,KAAK,QAAU,GACf,KAAK,IAAM7X,EACX,KAAK,MAAQtxC,EACb,KAAK,QAAUmpD,GAAU,CAAC,EAAG,CAAC,CAClC,CAIE,OAAAuoE,EAAK,UAAU,QAAU,SAAU9pF,EAAO,CACxC,IAAIuhB,EAAS,KAAK,QACdzoD,EAAM,KAAK,IAAIyoD,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACnCxoD,EAAM,KAAK,IAAIwoD,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACvC,OAAOvhB,GAASlnC,GAAOknC,GAASjnC,CACjC,EAID+wH,EAAK,UAAU,YAAc,SAAUj2H,EAAM,CAC3C,OAAO,KAAK,MAAM,QAAQA,CAAI,CAC/B,EAIDi2H,EAAK,UAAU,UAAY,UAAY,CACrC,OAAO,KAAK,QAAQ,MAAO,CAC5B,EAIDA,EAAK,UAAU,kBAAoB,SAAU97F,EAAY,CACvD,OAAOD,GAAkBC,GAAc,KAAK,MAAM,UAAW,EAAE,KAAK,OAAO,CAC5E,EAID87F,EAAK,UAAU,UAAY,SAAUvgH,EAAO0iB,EAAK,CAC/C,IAAIs1B,EAAS,KAAK,QAClBA,EAAO,CAAC,EAAIh4C,EACZg4C,EAAO,CAAC,EAAIt1B,CACb,EAID69F,EAAK,UAAU,YAAc,SAAUj2H,EAAMg5B,EAAO,CAClD,IAAI00B,EAAS,KAAK,QACdnpD,EAAQ,KAAK,MACjB,OAAAvE,EAAOuE,EAAM,UAAUvE,CAAI,EACvB,KAAK,QAAUuE,EAAM,OAAS,YAChCmpD,EAASA,EAAO,MAAO,EACvBwoE,GAAmBxoE,EAAQnpD,EAAM,OAAO,GAEnCs0B,GAAU74B,EAAMg2H,GAAmBtoE,EAAQ10B,CAAK,CACxD,EAIDi9F,EAAK,UAAU,YAAc,SAAU9pF,EAAOnT,EAAO,CACnD,IAAI00B,EAAS,KAAK,QACdnpD,EAAQ,KAAK,MACb,KAAK,QAAUA,EAAM,OAAS,YAChCmpD,EAASA,EAAO,MAAO,EACvBwoE,GAAmBxoE,EAAQnpD,EAAM,OAAO,GAE1C,IAAI2K,EAAI2pB,GAAUsT,EAAOuhB,EAAQsoE,GAAmBh9F,CAAK,EACzD,OAAO,KAAK,MAAM,MAAM9pB,CAAC,CAC1B,EAID+mH,EAAK,UAAU,YAAc,SAAU7qE,EAAOpyB,EAAO,CAGpD,EAUDi9F,EAAK,UAAU,eAAiB,SAAUrqH,EAAK,CAC7CA,EAAMA,GAAO,CAAE,EACf,IAAI0nH,EAAY1nH,EAAI,WAAa,KAAK,aAAc,EAChD7N,EAASs1H,GAAgB,KAAMC,CAAS,EACxC7P,EAAQ1lH,EAAO,MACfo4H,EAAc56H,EAAIkoH,EAAO,SAAU2S,EAAS,CAC9C,MAAO,CACL,MAAO,KAAK,YAAY,KAAK,MAAM,OAAS,UAAY,KAAK,MAAM,oBAAoBA,CAAO,EAAIA,CAAO,EACzG,UAAWA,CACZ,CACF,EAAE,IAAI,EACHC,EAAiB/C,EAAU,IAAI,gBAAgB,EACnD,OAAAgD,GAAqB,KAAMH,EAAaE,EAAgBzqH,EAAI,KAAK,EAC1DuqH,CACR,EACDF,EAAK,UAAU,oBAAsB,UAAY,CAC/C,GAAI,KAAK,MAAM,OAAS,UAEtB,MAAO,CAAE,EAEX,IAAIM,EAAiB,KAAK,MAAM,SAAS,WAAW,EAChD1T,EAAc0T,EAAe,IAAI,aAAa,EAE5C1T,EAAc,GAAKA,EAAc,MACrCA,EAAc,GAEhB,IAAImC,EAAa,KAAK,MAAM,cAAcnC,CAAW,EACjD2T,EAAmBj7H,EAAIypH,EAAY,SAAUG,EAAiB,CAChE,OAAO5pH,EAAI4pH,EAAiB,SAAUE,EAAW,CAC/C,MAAO,CACL,MAAO,KAAK,YAAYA,CAAS,EACjC,UAAWA,CACZ,CACF,EAAE,IAAI,CACR,EAAE,IAAI,EACP,OAAOmR,CACR,EACDP,EAAK,UAAU,cAAgB,UAAY,CACzC,OAAOrD,GAAiB,IAAI,EAAE,MAC/B,EACDqD,EAAK,UAAU,cAAgB,UAAY,CACzC,OAAO,KAAK,MAAM,SAAS,WAAW,CACvC,EAQDA,EAAK,UAAU,aAAe,UAAY,CACxC,OAAO,KAAK,MAAM,SAAS,UAAU,CACtC,EAIDA,EAAK,UAAU,aAAe,UAAY,CACxC,IAAInP,EAAa,KAAK,QAClB3sF,EAAa,KAAK,MAAM,UAAW,EACnCj8B,EAAMi8B,EAAW,CAAC,EAAIA,EAAW,CAAC,GAAK,KAAK,OAAS,EAAI,GAE7Dj8B,IAAQ,IAAMA,EAAM,GACpB,IAAIxC,EAAO,KAAK,IAAIorH,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EACjD,OAAO,KAAK,IAAIprH,CAAI,EAAIwC,CACzB,EAMD+3H,EAAK,UAAU,0BAA4B,UAAY,CACrD,OAAOvB,GAA0B,IAAI,CACtC,EACMuB,CACT,EAAG,EACH,SAASC,GAAmBxoE,EAAQ+oE,EAAO,CACzC,IAAI/6H,EAAOgyD,EAAO,CAAC,EAAIA,EAAO,CAAC,EAC3BxvD,EAAMu4H,EACNp+D,EAAS38D,EAAOwC,EAAM,EAC1BwvD,EAAO,CAAC,GAAK2K,EACb3K,EAAO,CAAC,GAAK2K,CACf,CAUA,SAASi+D,GAAqBroE,EAAMkoE,EAAaE,EAAgBr9F,EAAO,CACtE,IAAI09F,EAAWP,EAAY,OAC3B,GAAI,CAACloE,EAAK,QAAUooE,GAAkB,CAACK,EACrC,OAEF,IAAI5P,EAAa74D,EAAK,UAAW,EAC7BtqC,EACAgzG,EACJ,GAAID,IAAa,EACfP,EAAY,CAAC,EAAE,MAAQrP,EAAW,CAAC,EACnCnjG,EAAOwyG,EAAY,CAAC,EAAI,CACtB,MAAOrP,EAAW,CAAC,EACnB,UAAWqP,EAAY,CAAC,EAAE,SAC3B,MACI,CACL,IAAIS,EAAWT,EAAYO,EAAW,CAAC,EAAE,UAAYP,EAAY,CAAC,EAAE,UAChEU,GAAWV,EAAYO,EAAW,CAAC,EAAE,MAAQP,EAAY,CAAC,EAAE,OAASS,EACzE32H,EAAKk2H,EAAa,SAAUW,EAAW,CACrCA,EAAU,OAASD,EAAU,CACnC,CAAK,EACD,IAAI18F,EAAa8zB,EAAK,MAAM,UAAW,EACvC0oE,EAAW,EAAIx8F,EAAW,CAAC,EAAIg8F,EAAYO,EAAW,CAAC,EAAE,UACzD/yG,EAAO,CACL,MAAOwyG,EAAYO,EAAW,CAAC,EAAE,MAAQG,EAAUF,EACnD,UAAWx8F,EAAW,CAAC,EAAI,CAC5B,EACDg8F,EAAY,KAAKxyG,CAAI,CACzB,CACE,IAAI7a,EAAUg+G,EAAW,CAAC,EAAIA,EAAW,CAAC,EAEtCiQ,EAAWZ,EAAY,CAAC,EAAE,MAAOrP,EAAW,CAAC,CAAC,IAChD9tF,EAAQm9F,EAAY,CAAC,EAAE,MAAQrP,EAAW,CAAC,EAAIqP,EAAY,MAAO,GAEhEn9F,GAAS+9F,EAAWjQ,EAAW,CAAC,EAAGqP,EAAY,CAAC,EAAE,KAAK,GACzDA,EAAY,QAAQ,CAClB,MAAOrP,EAAW,CAAC,CACzB,CAAK,EAECiQ,EAAWjQ,EAAW,CAAC,EAAGnjG,EAAK,KAAK,IACtCqV,EAAQrV,EAAK,MAAQmjG,EAAW,CAAC,EAAIqP,EAAY,IAAK,GAEpDn9F,GAAS+9F,EAAWpzG,EAAK,MAAOmjG,EAAW,CAAC,CAAC,GAC/CqP,EAAY,KAAK,CACf,MAAOrP,EAAW,CAAC,CACzB,CAAK,EAEH,SAASiQ,EAAWj0H,EAAGC,EAAG,CAGxB,OAAAD,EAAIy2B,GAAMz2B,CAAC,EACXC,EAAIw2B,GAAMx2B,CAAC,EACJ+F,EAAUhG,EAAIC,EAAID,EAAIC,CACjC,CACA,CC3OO,SAASi0H,GAAkBnoH,EAAO,CAEvC,QADI2E,EAAO,CAAE,EACJhY,EAAI,EAAGA,EAAIqT,EAAM,OAAQrT,IAAK,CACrC,IAAI++E,EAAU1rE,EAAMrT,CAAC,EACrB,GAAI,CAAA++E,EAAQ,YAAY,OAGxB,KAAIjlB,EAAQilB,EAAQ,MAChBxsD,EAAYunC,EAAM,qBAAsB,EAExC2hE,EAAY3hE,EAAM,gBAAiB,EACnC4hE,EAAgB,CAACnpG,GAAaA,EAAU,CAAC,EAAI,MAAQA,EAAU,CAAC,EAAI,KACpEopG,EAAY7hE,EAAM,MAAM,QAAU,EAClC8hE,EAAaH,EAAU,MAAO,EAClCG,EAAW,eAAerpG,CAAS,EACnCqpG,EAAW,GAAKD,EAAY,EAC5BC,EAAW,GAAKD,EAAY,EAC5BC,EAAW,OAASD,EACpBC,EAAW,QAAUD,EACrB,IAAIE,EAAMH,EAAgB,IAAItpE,GAAqBqpE,EAAWlpG,CAAS,EAAI,KAC3Eva,EAAK,KAAK,CACR,MAAO8hD,EACP,UAAWilB,EAAQ,UACnB,KAAM68C,EACN,UAAWH,EACX,IAAKI,EACL,SAAU98C,EAAQ,SAClB,YAAaA,EAAQ,YACrB,aAAcA,EAAQ,qBACtB,YAAa28C,EACb,UAAWnpG,CACjB,CAAK,EACL,CACE,OAAOva,CACT,CA4JO,SAAS8jH,GAAYC,EAAW,CACrC,IAAIC,EAAkB,CAAE,EAExBD,EAAU,KAAK,SAAUz0H,EAAGC,EAAG,CAC7B,OAAOA,EAAE,SAAWD,EAAE,QAC1B,CAAG,EACD,IAAIs0H,EAAa,IAAIxnH,GAAa,EAAG,EAAG,EAAG,CAAC,EAC5C,SAAS6nH,EAAO5uH,EAAI,CAClB,GAAI,CAACA,EAAG,OAAQ,CAEd,IAAI6uH,EAAgB7uH,EAAG,YAAY,UAAU,EACzC6uH,EAAc,QAAU,OAC1BA,EAAc,OAAS,GAE/B,CACI7uH,EAAG,OAAS,EAChB,CACE,QAASrN,EAAI,EAAGA,EAAI+7H,EAAU,OAAQ/7H,IAAK,CACzC,IAAIi5H,EAAY8C,EAAU/7H,CAAC,EACvB07H,EAAgBzC,EAAU,YAC1BwC,EAAYxC,EAAU,UACtB1mG,EAAY0mG,EAAU,UACtBn/D,EAAQm/D,EAAU,MAClB/iB,EAAY+iB,EAAU,UAC1B2C,EAAW,KAAK3C,EAAU,IAAI,EAE9B2C,EAAW,OAAS,GACpBA,EAAW,QAAU,GACrBA,EAAW,GAAK,IAChBA,EAAW,GAAK,IAGhB,QAFIC,EAAM5C,EAAU,IAChB1mE,EAAa,GACRrmD,EAAI,EAAGA,EAAI8vH,EAAgB,OAAQ9vH,IAAK,CAC/C,IAAIiwH,EAAgBH,EAAgB9vH,CAAC,EAErC,GAAK0vH,EAAW,UAAUO,EAAc,IAAI,EAG5C,IAAIT,GAAiBS,EAAc,YAAa,CAE9C5pE,EAAa,GACb,KACR,CASM,GARK4pE,EAAc,MAEjBA,EAAc,IAAM,IAAI/pE,GAAqB+pE,EAAc,UAAWA,EAAc,SAAS,GAE1FN,IAEHA,EAAM,IAAIzpE,GAAqBqpE,EAAWlpG,CAAS,GAEjDspG,EAAI,UAAUM,EAAc,GAAG,EAAG,CACpC5pE,EAAa,GACb,KACR,EACA,CAEQA,GACF0pE,EAAOniE,CAAK,EACZo8C,GAAa+lB,EAAO/lB,CAAS,IAE7Bp8C,EAAM,KAAK,SAAUm/D,EAAU,YAAY,MAAM,EACjD/iB,GAAaA,EAAU,KAAK,SAAU+iB,EAAU,YAAY,gBAAgB,EAC5E+C,EAAgB,KAAK/C,CAAS,EAEpC,CACA,CC5PA,IAAImD,GAA+B,SAAU9lH,EAAQ,CACnDC,EAAU6lH,EAAiB9lH,CAAM,EACjC,SAAS8lH,GAAkB,CACzB,IAAI5lH,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO4lH,EAAgB,KAC7B5lH,EAAM,gBAAkB,GACjBA,CAAA,CAET4lH,OAAAA,EAAgB,UAAU,eAAiB,SAAUv9D,EAAQ,CAOpD,OAAAknD,GAAiB,KAAM,KAAM,CAClC,mBAAoB,EAAA,CACrB,CACH,EACAqW,EAAgB,UAAU,cAAgB,SAAUhsH,EAAK,CACnD,IAAAw4D,EAAQ,IAAIjuC,GACZ+S,EAAOq1D,GAAa,OAAQ,EAAG3yF,EAAI,WAAa,EAAGA,EAAI,UAAW,EAAGA,EAAI,UAAU,OAAQ,EAAK,EACpGw4D,EAAM,IAAIl7B,CAAI,EACTA,EAAA,SAASt9B,EAAI,SAAS,EAC3B,IAAI6tF,EAAa,KAAK,QAAQ,EAAE,UAAU,QAAQ,EAC9Co+B,EAAe,KAAK,QAAQ,EAAE,UAAU,cAAc,EACtD15B,EAAa1E,IAAe,OAAS,SAAWA,EAEhD/9F,EAAOkQ,EAAI,WAAa,GACxBg7F,EAASrI,GAAaJ,GAAavyF,EAAI,UAAYlQ,GAAQ,GAAIkQ,EAAI,WAAalQ,GAAQ,EAAGA,EAAMA,EAAMkQ,EAAI,UAAU,IAAI,EAC7Hw4D,EAAM,IAAIwiC,CAAM,EACTA,EAAA,SAASh7F,EAAI,SAAS,EAC7B,IAAIksH,EAAelsH,EAAI,aAAe,UAAYisH,EAAejsH,EAAI,YAAc,EAC5E,OAAAg7F,EAAA,SAAWkxB,EAAe,KAAK,GAAK,IACpClxB,EAAA,UAAU,CAACh7F,EAAI,UAAY,EAAGA,EAAI,WAAa,CAAC,CAAC,EACpDuyF,EAAW,QAAQ,OAAO,EAAI,KACzByI,EAAA,MAAM,OAASA,EAAO,MAAM,KACnCA,EAAO,MAAM,KAAO,OACpBA,EAAO,MAAM,UAAY,GAEpBxiC,CACT,EACAwzD,EAAgB,KAAO,cACvBA,EAAgB,aAAe,CAAC,OAAQ,OAAO,EAC/CA,EAAgB,cAAgB,CAE9B,EAAG,EACH,iBAAkB,cAClB,gBAAiB,GACjB,KAAM,GACN,MAAO,CACL,SAAU,KACZ,EAGA,SAAU,CACR,KAAM,GACN,eAAgB,GAChB,SAAU,CACZ,EACA,UAAW,CACT,MAAO,EACP,KAAM,OACR,EACA,SAAU,CACR,MAAO,EACT,EASA,KAAM,GAEN,OAAQ,GACR,eAAgB,KAChB,OAAQ,cACR,WAAY,EACZ,aAAc,KACd,WAAY,GAKZ,cAAe,OAEf,aAAc,GAEd,SAAU,OACV,gBAAiB,SAEjB,YAAa,EACb,oBAAqB,IACrB,oBAAqB,CACnB,YAAa,OACf,EACA,iBAAkB,EACpB,EACOA,CAAA,EACPtnC,EAAW,ECtGN,SAASynC,GAAgB/3H,EAAM+gD,EAAW,CAC/C,IAAIi3E,EAAYh4H,EAAK,iBAAiB,gBAAgB,EAClD9B,EAAM85H,EAAU,OAEpB,GAAI95H,IAAQ,EAAG,CACb,IAAI4hF,EAASrD,GAAiBz8E,EAAM+gD,EAAWi3E,EAAU,CAAC,CAAC,EAC3D,OAAOl4C,GAAU,KAAOA,EAAS,GAAK,IACvC,SAAU5hF,EAAK,CAEd,QADI+5H,EAAO,CAAE,EACJz8H,EAAI,EAAGA,EAAIw8H,EAAU,OAAQx8H,IACpCy8H,EAAK,KAAKx7C,GAAiBz8E,EAAM+gD,EAAWi3E,EAAUx8H,CAAC,CAAC,CAAC,EAE3D,OAAOy8H,EAAK,KAAK,GAAG,CACxB,CACA,CACO,SAASC,GAA4Bl4H,EAAM21D,EAAmB,CACnE,IAAIqiE,EAAYh4H,EAAK,iBAAiB,gBAAgB,EACtD,GAAI,CAACpB,EAAQ+2D,CAAiB,EAC5B,OAAOA,EAAoB,GAG7B,QADIsiE,EAAO,CAAE,EACJz8H,EAAI,EAAGA,EAAIw8H,EAAU,OAAQx8H,IAAK,CACzC,IAAIivE,EAAWzqE,EAAK,kBAAkBg4H,EAAUx8H,CAAC,CAAC,EAC9CivE,GAAY,GACdwtD,EAAK,KAAKtiE,EAAkB8U,CAAQ,CAAC,CAE3C,CACE,OAAOwtD,EAAK,KAAK,GAAG,CACtB,CCvBA,IAAIE,GAAsB,SAAUrmH,EAAQ,CAC1CC,EAAUomH,EAAQrmH,CAAM,EACxB,SAASqmH,EAAOn4H,EAAM0Z,EAAK0+G,EAAa55G,EAAM,CAC5C,IAAIxM,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjC,OAAAE,EAAM,WAAWhS,EAAM0Z,EAAK0+G,EAAa55G,CAAI,EACtCxM,CACX,CACE,OAAAmmH,EAAO,UAAU,cAAgB,SAAUh6B,EAAYn+F,EAAM0Z,EAAKolF,EAAYN,EAAY,CAExF,KAAK,UAAW,EAOhB,IAAIE,EAAaH,GAAaJ,EAAY,GAAI,GAAI,EAAG,EAAG,KAAMK,CAAU,EACxEE,EAAW,KAAK,CACd,GAAI,IACJ,QAAS,GACT,OAAQI,EAAW,CAAC,EAAI,EACxB,OAAQA,EAAW,CAAC,EAAI,CAC9B,CAAK,EAEDJ,EAAW,MAAQ25B,GACnB,KAAK,YAAcl6B,EACnB,KAAK,IAAIO,CAAU,CACpB,EAKDy5B,EAAO,UAAU,oBAAsB,SAAUG,EAAa,CAC5D,KAAK,QAAQ,CAAC,EAAE,cAAc,KAAMA,CAAW,CAChD,EACDH,EAAO,UAAU,cAAgB,UAAY,CAC3C,OAAO,KAAK,WACb,EAUDA,EAAO,UAAU,cAAgB,UAAY,CAC3C,OAAO,KAAK,QAAQ,CAAC,CACtB,EAIDA,EAAO,UAAU,UAAY,UAAY,CACvCr5E,GAAc,KAAK,QAAQ,CAAC,CAAC,CAC9B,EAIDq5E,EAAO,UAAU,SAAW,UAAY,CACtCn5E,GAAc,KAAK,QAAQ,CAAC,CAAC,CAC9B,EAKDm5E,EAAO,UAAU,KAAO,SAAUrwD,EAAQyoC,EAAG,CAC3C,IAAI7R,EAAa,KAAK,QAAQ,CAAC,EAC/BA,EAAW,OAAS52B,EACpB42B,EAAW,EAAI6R,CAChB,EACD4nB,EAAO,UAAU,aAAe,SAAUI,EAAWC,EAAiB,CACpE,IAAI95B,EAAa,KAAK,QAAQ,CAAC,EAC/BA,EAAW,UAAY65B,EACvB75B,EAAW,OAAS,CAAC85B,GAAmBD,EAAY,OAAS75B,EAAW,MACzE,EAIDy5B,EAAO,UAAU,WAAa,SAAUn4H,EAAM0Z,EAAK0+G,EAAa55G,EAAM,CACpE,KAAK,OAAS,GACd,IAAI2/E,EAAan+F,EAAK,cAAc0Z,EAAK,QAAQ,GAAK,SAClD4mC,EAActgD,EAAK,UACnB8+F,EAAaq5B,EAAO,cAAcn4H,EAAM0Z,CAAG,EAC3C4tD,EAAS62B,IAAe,KAAK,YAC7Bs6B,EAAmBj6G,GAAQA,EAAK,iBACpC,GAAI8oD,EAAQ,CACV,IAAIk3B,EAAax+F,EAAK,cAAc0Z,EAAK,kBAAkB,EAC3D,KAAK,cAAcykF,EAAYn+F,EAAM0Z,EAAKolF,EAAYN,CAAU,CACtE,KAAW,CACL,IAAIE,EAAa,KAAK,QAAQ,CAAC,EAC/BA,EAAW,OAAS,GACpB,IAAIngG,EAAS,CACX,OAAQugG,EAAW,CAAC,EAAI,EACxB,OAAQA,EAAW,CAAC,EAAI,CACzB,EACD25B,EAAmB/5B,EAAW,KAAKngG,CAAM,EAAIm6H,GAAoBh6B,EAAYngG,EAAQ+hD,EAAa5mC,CAAG,EACrG42C,GAAaouC,CAAU,CAC7B,CAEI,GADA,KAAK,cAAc1+F,EAAM0Z,EAAKolF,EAAYs5B,EAAa55G,CAAI,EACvD8oD,EAAQ,CACV,IAAIo3B,EAAa,KAAK,QAAQ,CAAC,EAC/B,GAAI,CAAC+5B,EAAkB,CACrB,IAAIl6H,EAAS,CACX,OAAQ,KAAK,OACb,OAAQ,KAAK,OACb,MAAO,CAEL,QAASmgG,EAAW,MAAM,OACtC,CACS,EACDA,EAAW,OAASA,EAAW,OAAS,EACxCA,EAAW,MAAM,QAAU,EAC3Bi6B,GAAkBj6B,EAAYngG,EAAQ+hD,EAAa5mC,CAAG,CAC9D,CACA,CACQ++G,GAEF,KAAK,QAAQ,CAAC,EAAE,cAAc,OAAO,CAExC,EACDN,EAAO,UAAU,cAAgB,SAAUn4H,EAAM0Z,EAAKolF,EAAYs5B,EAAa55G,EAAM,CACnF,IAAIkgF,EAAa,KAAK,QAAQ,CAAC,EAC3Bp+C,EAActgD,EAAK,UACnB44H,EACAC,EACAC,EACAh5E,EACAC,EACAg5E,EACA1iE,EACA2iE,EACA7lH,EAYJ,GAXIilH,IACFQ,EAAoBR,EAAY,kBAChCS,EAAgBT,EAAY,cAC5BU,EAAkBV,EAAY,gBAC9Bt4E,EAAQs4E,EAAY,MACpBr4E,EAAYq4E,EAAY,UACxB/hE,EAAoB+hE,EAAY,kBAChCY,EAAaZ,EAAY,WACzBjlH,EAAcilH,EAAY,YAC1BW,EAAmBX,EAAY,kBAE7B,CAACA,GAAep4H,EAAK,cAAe,CACtC,IAAIuiD,EAAY61E,GAAeA,EAAY,UAAYA,EAAY,UAAYp4H,EAAK,aAAa0Z,CAAG,EAChGu/G,EAAgB12E,EAAU,SAAS,UAAU,EACjDq2E,EAAoBK,EAAc,SAAS,WAAW,EAAE,aAAc,EACtEH,EAAkBv2E,EAAU,SAAS,CAAC,SAAU,WAAW,CAAC,EAAE,aAAc,EAC5Es2E,EAAgBt2E,EAAU,SAAS,CAAC,OAAQ,WAAW,CAAC,EAAE,aAAc,EACxEzC,EAAQm5E,EAAc,IAAI,OAAO,EACjCl5E,EAAYk5E,EAAc,IAAI,WAAW,EACzCF,EAAmBE,EAAc,IAAI,UAAU,EAC/C5iE,EAAoBY,GAAqB1U,CAAS,EAClDy2E,EAAaC,EAAc,WAAW,OAAO,EAC7C9lH,EAAcovC,EAAU,WAAW,QAAQ,CACjD,CACI,IAAIu1E,EAAe93H,EAAK,cAAc0Z,EAAK,cAAc,EACzDglF,EAAW,KAAK,YAAao5B,GAAgB,GAAK,KAAK,GAAK,KAAO,CAAC,EACpE,IAAI94B,EAAeD,GAAsB/+F,EAAK,cAAc0Z,EAAK,cAAc,EAAGolF,CAAU,EACxFE,IACFN,EAAW,EAAIM,EAAa,CAAC,EAC7BN,EAAW,EAAIM,EAAa,CAAC,GAE/B7rF,GAAeurF,EAAW,KAAK,SAAUvrF,CAAW,EACpD,IAAImrF,EAAct+F,EAAK,cAAc0Z,EAAK,OAAO,EAC7Cw/G,EAAc56B,EAAY,KAC9B,GAAII,aAAsB9oD,GAAS,CACjC,IAAIujF,EAAYz6B,EAAW,MAC3BA,EAAW,SAAS5/F,EAAO,CAEzB,MAAOq6H,EAAU,MACjB,EAAGA,EAAU,EACb,EAAGA,EAAU,EACb,MAAOA,EAAU,MACjB,OAAQA,EAAU,MACnB,EAAE76B,CAAW,CAAC,CACrB,MACUI,EAAW,eAIbA,EAAW,SAAS5/F,EAAO,CAAE,EAAEw/F,CAAW,CAAC,EAE3CI,EAAW,SAASJ,CAAW,EAGjCI,EAAW,MAAM,MAAQ,KACzBA,EAAW,SAASw6B,EAAa16G,GAAQA,EAAK,gBAAgB,EAC9DkgF,EAAW,MAAM,cAAgB,GAEnC,IAAI06B,EAAQp5H,EAAK,cAAc0Z,EAAK,OAAO,EACvC2/G,EAAW,KAAK,IAChBD,GAAS,KACPC,GAAY,OACd,KAAK,IAAM36B,EAAW,GACtBA,EAAW,IAAM06B,GAEVC,GAAY,OACrB36B,EAAW,GAAK26B,EAChB,KAAK,IAAM,MAEb,IAAIC,EAAe96G,GAAQA,EAAK,aAChC23C,GAAcuoC,EAAYroC,EAAmB,CAC3C,aAAc/V,EACd,eAAgB5mC,EAChB,YAAa6/G,EACb,aAAcL,EACd,eAAgB56B,EAAY,OAClC,CAAK,EAED,SAASi7B,EAAoB7/G,EAAK,CAChC,OAAO4/G,EAAet5H,EAAK,QAAQ0Z,CAAG,EAAIq+G,GAAgB/3H,EAAM0Z,CAAG,CACzE,CACI,KAAK,OAASolF,EAAW,CAAC,EAAI,EAC9B,KAAK,OAASA,EAAW,CAAC,EAAI,EAC9B,IAAI44B,EAAgBh5B,EAAW,YAAY,UAAU,EACrDg5B,EAAc,MAAQkB,EACtBl6B,EAAW,YAAY,QAAQ,EAAE,MAAQo6B,EACzCp6B,EAAW,YAAY,MAAM,EAAE,MAAQm6B,EAGvC,IAAIW,EAAaR,GAAc,MAAQA,IAAe,GAAO,KAAK,IAAI,IAAK,EAAI,KAAK,MAAM,EAExF,SAASA,CAAU,GAAKA,EAAa,EAAI,CAACA,EAAa,EAEzDtB,EAAc,OAAS,KAAK,OAAS8B,EACrC9B,EAAc,OAAS,KAAK,OAAS8B,EACrC,KAAK,eAAe,CAAC,EACrBt3E,GAAoB,KAAMpC,EAAOC,EAAWg5E,CAAgB,CAC7D,EACDZ,EAAO,UAAU,eAAiB,SAAU5zH,EAAO,CACjD,KAAK,OAAS,KAAK,OAASA,CAC7B,EACD4zH,EAAO,UAAU,QAAU,SAAUh4H,EAAImgD,EAAa10C,EAAK,CACzD,IAAI8yF,EAAa,KAAK,QAAQ,CAAC,EAC3B39C,EAAY9F,GAAU,IAAI,EAAE,UAC5Bw+E,EAAe7tH,GAAOA,EAAI,UAI9B,GAFA,KAAK,OAAS8yF,EAAW,OAAS,GAE9B9yF,GAAOA,EAAI,UAAW,CACxB,IAAIsmB,EAAcwsE,EAAW,eAAgB,EACzCxsE,GACFwnG,GAAsBxnG,EAAa,CACjC,MAAO,CACL,QAAS,CACrB,CACS,EAAEouB,EAAa,CACd,UAAWS,EACX,UAAW04E,EACX,GAAI,UAAY,CACd/6B,EAAW,kBAAmB,CAC1C,CACA,CAAS,CAET,MACMA,EAAW,kBAAmB,EAEhCg7B,GAAsBh7B,EAAY,CAChC,MAAO,CACL,QAAS,CACV,EACD,OAAQ,EACR,OAAQ,CACT,EAAEp+C,EAAa,CACd,UAAWS,EACX,GAAI5gD,EACJ,UAAWs5H,CACjB,CAAK,CACF,EACDtB,EAAO,cAAgB,SAAUn4H,EAAM0Z,EAAK,CAC1C,OAAOmlF,GAAoB7+F,EAAK,cAAc0Z,EAAK,YAAY,CAAC,CACjE,EACMy+G,CACT,EAAEphC,EAAa,EACf,SAASshC,GAAY7yH,EAAIC,EAAI,CAC3B,KAAK,OAAO,MAAMD,EAAIC,CAAE,CAC1B,CC5RA,SAASk0H,GAAgB35H,EAAMorD,EAAO1xC,EAAK9N,EAAK,CAC9C,OAAOw/C,GAAS,CAAC,MAAMA,EAAM,CAAC,CAAC,GAAK,CAAC,MAAMA,EAAM,CAAC,CAAC,GAAK,EAAEx/C,EAAI,UAAYA,EAAI,SAAS8N,CAAG,IAIvF,EAAE9N,EAAI,WAAa,CAACA,EAAI,UAAU,QAAQw/C,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,IAAMprD,EAAK,cAAc0Z,EAAK,QAAQ,IAAM,MAC7G,CACA,SAASkgH,GAAmBhuH,EAAK,CAC/B,OAAIA,GAAO,MAAQ,CAACnN,EAASmN,CAAG,IAC9BA,EAAM,CACJ,SAAUA,CACX,GAEIA,GAAO,CAAE,CAClB,CACA,SAASiuH,GAAgB75H,EAAM,CAC7B,IAAIsgD,EAActgD,EAAK,UACnBi5H,EAAgB34E,EAAY,SAAS,UAAU,EACnD,MAAO,CACL,kBAAmB24E,EAAc,SAAS,WAAW,EAAE,aAAc,EACrE,cAAe34E,EAAY,SAAS,CAAC,OAAQ,WAAW,CAAC,EAAE,aAAc,EACzE,gBAAiBA,EAAY,SAAS,CAAC,SAAU,WAAW,CAAC,EAAE,aAAc,EAC7E,MAAO24E,EAAc,IAAI,OAAO,EAChC,UAAWA,EAAc,IAAI,WAAW,EACxC,iBAAkBA,EAAc,IAAI,UAAU,EAC9C,WAAYA,EAAc,IAAI,OAAO,EACrC,kBAAmBhiE,GAAqB3W,CAAW,EACnD,YAAaA,EAAY,IAAI,QAAQ,CACtC,CACH,CACA,IAAIw5E,GAA0B,UAAY,CACxC,SAASA,EAAWC,EAAY,CAC9B,KAAK,MAAQ,IAAIhjC,GACjB,KAAK,YAAcgjC,GAAc97B,EACrC,CAIE,OAAA67B,EAAW,UAAU,WAAa,SAAU95H,EAAM4L,EAAK,CAErD,KAAK,gBAAkB,KACvBA,EAAMguH,GAAmBhuH,CAAG,EAC5B,IAAIw4D,EAAQ,KAAK,MACb9jB,EAActgD,EAAK,UACnBg6H,EAAU,KAAK,MACfD,EAAa,KAAK,YAClBtB,EAAmB7sH,EAAI,iBACvBwsH,EAAcyB,GAAgB75H,CAAI,EAClCi6H,EAAkB,CACpB,iBAAkBxB,CACnB,EACGyB,EAAiBtuH,EAAI,gBAAkB,SAAU8N,EAAK,CACxD,OAAO1Z,EAAK,cAAc0Z,CAAG,CAC9B,EAGIsgH,GACH51D,EAAM,UAAW,EAEnBpkE,EAAK,KAAKg6H,CAAO,EAAE,IAAI,SAAUnkB,EAAQ,CACvC,IAAIzqD,EAAQ8uE,EAAerkB,CAAM,EACjC,GAAI8jB,GAAgB35H,EAAMorD,EAAOyqD,EAAQjqG,CAAG,EAAG,CAC7C,IAAIuuH,EAAW,IAAIJ,EAAW/5H,EAAM61G,EAAQuiB,EAAa6B,CAAe,EACxEE,EAAS,YAAY/uE,CAAK,EAC1BprD,EAAK,iBAAiB61G,EAAQskB,CAAQ,EACtC/1D,EAAM,IAAI+1D,CAAQ,CAC1B,CACK,CAAA,EAAE,OAAO,SAAUtkB,EAAQukB,EAAQ,CAClC,IAAID,EAAWH,EAAQ,iBAAiBI,CAAM,EAC1ChvE,EAAQ8uE,EAAerkB,CAAM,EACjC,GAAI,CAAC8jB,GAAgB35H,EAAMorD,EAAOyqD,EAAQjqG,CAAG,EAAG,CAC9Cw4D,EAAM,OAAO+1D,CAAQ,EACrB,MACR,CACM,IAAIE,EAAgBr6H,EAAK,cAAc61G,EAAQ,QAAQ,GAAK,SACxDykB,EAAgBH,GAAYA,EAAS,eAAiBA,EAAS,cAAe,EAClF,GAAI,CAACA,GAEFG,GAAiBA,IAAkBD,EACpCj2D,EAAM,OAAO+1D,CAAQ,EACrBA,EAAW,IAAIJ,EAAW/5H,EAAM61G,EAAQuiB,EAAa6B,CAAe,EACpEE,EAAS,YAAY/uE,CAAK,MACrB,CACL+uE,EAAS,WAAWn6H,EAAM61G,EAAQuiB,EAAa6B,CAAe,EAC9D,IAAI17H,EAAS,CACX,EAAG6sD,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,CACX,EACDqtE,EAAmB0B,EAAS,KAAK57H,CAAM,EAAIm6H,GAAoByB,EAAU57H,EAAQ+hD,CAAW,CACpG,CAEM8jB,EAAM,IAAI+1D,CAAQ,EAClBn6H,EAAK,iBAAiB61G,EAAQskB,CAAQ,CAC5C,CAAK,EAAE,OAAO,SAAUC,EAAQ,CAC1B,IAAIvxH,EAAKmxH,EAAQ,iBAAiBI,CAAM,EACxCvxH,GAAMA,EAAG,QAAQ,UAAY,CAC3Bu7D,EAAM,OAAOv7D,CAAE,CAChB,EAAEy3C,CAAW,CACf,CAAA,EAAE,QAAS,EACZ,KAAK,gBAAkB45E,EACvB,KAAK,MAAQl6H,CACd,EAED85H,EAAW,UAAU,aAAe,UAAY,CAC9C,IAAI9nH,EAAQ,KACRhS,EAAO,KAAK,MACZA,GAEFA,EAAK,kBAAkB,SAAU6I,EAAI6Q,EAAK,CACxC,IAAI0xC,EAAQp5C,EAAM,gBAAgB0H,CAAG,EACrC7Q,EAAG,YAAYuiD,CAAK,EACpBviD,EAAG,WAAY,CACvB,CAAO,CAEJ,EAEDixH,EAAW,UAAU,yBAA2B,SAAU95H,EAAM,CAC9D,KAAK,aAAe65H,GAAgB75H,CAAI,EACxC,KAAK,MAAQ,KACb,KAAK,MAAM,UAAW,CACvB,EAKD85H,EAAW,UAAU,kBAAoB,SAAUS,EAAYv6H,EAAM4L,EAAK,CAExE,KAAK,gBAAkB,CAAE,EACzBA,EAAMguH,GAAmBhuH,CAAG,EAC5B,SAAS4uH,EAA0B3xH,EAAI,CAChCA,EAAG,UACNA,EAAG,YAAc,GACjBA,EAAG,YAAY,UAAU,EAAE,WAAa,GAEhD,CACI,QAAS6Q,EAAM6gH,EAAW,MAAO7gH,EAAM6gH,EAAW,IAAK7gH,IAAO,CAC5D,IAAI0xC,EAAQprD,EAAK,cAAc0Z,CAAG,EAClC,GAAIigH,GAAgB35H,EAAMorD,EAAO1xC,EAAK9N,CAAG,EAAG,CAC1C,IAAI/C,EAAK,IAAI,KAAK,YAAY7I,EAAM0Z,EAAK,KAAK,YAAY,EAC1D7Q,EAAG,SAAS2xH,CAAyB,EACrC3xH,EAAG,YAAYuiD,CAAK,EACpB,KAAK,MAAM,IAAIviD,CAAE,EACjB7I,EAAK,iBAAiB0Z,EAAK7Q,CAAE,EAC7B,KAAK,gBAAgB,KAAKA,CAAE,CACpC,CACA,CACG,EAEDixH,EAAW,UAAU,aAAe,SAAU35H,EAAI,CAChDs6H,GAAyB,KAAK,iBAAmB,KAAK,MAAOt6H,CAAE,CAChE,EACD25H,EAAW,UAAU,OAAS,SAAUhoB,EAAiB,CACvD,IAAI1tC,EAAQ,KAAK,MACbpkE,EAAO,KAAK,MAEZA,GAAQ8xG,EACV9xG,EAAK,kBAAkB,SAAU6I,EAAI,CACnCA,EAAG,QAAQ,UAAY,CACrBu7D,EAAM,OAAOv7D,CAAE,CACzB,EAAW7I,EAAK,SAAS,CACzB,CAAO,EAEDokE,EAAM,UAAW,CAEpB,EAEM01D,CACT,EAAG,ECzKI,SAASY,GAAqBl6E,EAAUxgD,EAAM26H,EAAa,CAChE,IAAInU,EAAWhmE,EAAS,YAAa,EACjCo6E,EAAYp6E,EAAS,aAAagmE,CAAQ,EAC1CqU,EAAaC,GAAcF,EAAWD,CAAW,EACjDI,EAAcvU,EAAS,IACvBwU,EAAeJ,EAAU,IACzBK,EAAWj7H,EAAK,aAAag7H,CAAY,EACzCE,EAAUl7H,EAAK,aAAa+6H,CAAW,EACvCI,EAAiBH,IAAiB,KAAOA,IAAiB,SAAW,EAAI,EACzEniD,EAAOt9E,EAAIilD,EAAS,WAAY,SAAU4wC,EAAU,CACtD,OAAOpxF,EAAK,aAAaoxF,CAAQ,CACrC,CAAG,EACGgqC,EAAU,GACVC,EAAiBr7H,EAAK,mBAAmB,sBAAsB,EACnE,OAAIwgH,GAAmBxgH,EAAM64E,EAAK,CAAC,CAAC,IAElCuiD,EAAU,GACVviD,EAAK,CAAC,EAAIwiD,GAER7a,GAAmBxgH,EAAM64E,EAAK,CAAC,CAAC,IAElCuiD,EAAU,GACVviD,EAAK,CAAC,EAAIwiD,GAEL,CACL,iBAAkBxiD,EAClB,WAAYgiD,EACZ,aAAcG,EACd,YAAaD,EACb,QAAS,CAAC,CAACK,EACX,SAAUH,EACV,QAASC,EACT,eAAgBC,EAChB,qBAAsBn7H,EAAK,mBAAmB,sBAAsB,CACrE,CACH,CACA,SAAS86H,GAAcF,EAAWD,EAAa,CAC7C,IAAIE,EAAa,EACbntE,EAASktE,EAAU,MAAM,UAAW,EACxC,OAAID,IAAgB,QAClBE,EAAantE,EAAO,CAAC,EACZitE,IAAgB,MACzBE,EAAantE,EAAO,CAAC,EAId3sD,GAAS45H,CAAW,GAAK,CAAC,MAAMA,CAAW,EAClDE,EAAaF,EAKTjtE,EAAO,CAAC,EAAI,EACdmtE,EAAantE,EAAO,CAAC,EAGdA,EAAO,CAAC,EAAI,IACnBmtE,EAAantE,EAAO,CAAC,GAIlBmtE,CACT,CACO,SAASS,GAAkBC,EAAe/6E,EAAUxgD,EAAM0Z,EAAK,CACpE,IAAIra,EAAQ,IACRk8H,EAAc,UAChBl8H,EAAQW,EAAK,IAAIA,EAAK,mBAAmB,sBAAsB,EAAG0Z,CAAG,GAEnE,MAAMra,CAAK,IACbA,EAAQk8H,EAAc,YAExB,IAAIJ,EAAiBI,EAAc,eAC/BC,EAAc,CAAE,EACpB,OAAAA,EAAYL,CAAc,EAAIn7H,EAAK,IAAIu7H,EAAc,QAAS7hH,CAAG,EACjE8hH,EAAY,EAAIL,CAAc,EAAI97H,EAC3BmhD,EAAS,YAAYg7E,CAAW,CACzC,CC5EA,SAASC,GAASzB,EAAS3pF,EAAS,CAClC,IAAIqrF,EAAa,CAAE,EACnB,OAAArrF,EAAQ,KAAK2pF,CAAO,EAAE,IAAI,SAAUtgH,EAAK,CACvCgiH,EAAW,KAAK,CACd,IAAK,IACL,IAAKhiH,CACX,CAAK,CACF,CAAA,EAAE,OAAO,SAAUm8F,EAAQukB,EAAQ,CAClCsB,EAAW,KAAK,CACd,IAAK,IACL,IAAKtB,EACL,KAAMvkB,CACZ,CAAK,CACL,CAAG,EAAE,OAAO,SAAUn8F,EAAK,CACvBgiH,EAAW,KAAK,CACd,IAAK,IACL,IAAKhiH,CACX,CAAK,CACF,CAAA,EAAE,QAAS,EACLgiH,CACT,CACe,SAASC,GAAkB3B,EAAS3pF,EAASurF,EAAoBC,EAAoBC,EAAaC,EAAaC,EAAgBC,EAAgB,CAmB5J,QAlBIvtF,EAAO+sF,GAASzB,EAAS3pF,CAAO,EAMhC6rF,EAAa,CAAE,EACfC,EAAa,CAAE,EAEfC,EAAoB,CAAE,EACtBC,EAAoB,CAAE,EACtBr/C,EAAS,CAAE,EACXs/C,EAAgB,CAAE,EAClBC,EAAa,CAAE,EACfC,EAAsB9B,GAAqBoB,EAAazrF,EAAS2rF,CAAc,EAE/ES,EAAYzC,EAAQ,UAAU,QAAQ,GAAK,CAAE,EAC7C0C,EAAYrsF,EAAQ,UAAU,QAAQ,GAAK,CAAE,EACxC70C,EAAI,EAAGA,EAAIkzC,EAAK,OAAQlzC,IAAK,CACpC,IAAImhI,EAAWjuF,EAAKlzC,CAAC,EACjBohI,EAAa,GACbC,EAAU,OACVC,EAAU,OAGd,OAAQH,EAAS,IAAG,CAClB,IAAK,IACHE,EAAUF,EAAS,IAAM,EACzBG,EAAUH,EAAS,KAAO,EAC1B,IAAII,EAAWN,EAAUI,CAAO,EAC5BG,EAAWP,EAAUI,EAAU,CAAC,EAChCl4D,EAAQ+3D,EAAUI,CAAO,EACzBl4D,EAAQ83D,EAAUI,EAAU,CAAC,GAE7B,MAAMC,CAAQ,GAAK,MAAMC,CAAQ,KACnCD,EAAWp4D,EACXq4D,EAAWp4D,GAEbs3D,EAAW,KAAKa,EAAUC,CAAQ,EAClCb,EAAW,KAAKx3D,EAAOC,CAAK,EAC5Bw3D,EAAkB,KAAKR,EAAmBiB,CAAO,EAAGjB,EAAmBiB,EAAU,CAAC,CAAC,EACnFR,EAAkB,KAAKR,EAAmBiB,CAAO,EAAGjB,EAAmBiB,EAAU,CAAC,CAAC,EACnFP,EAAW,KAAKlsF,EAAQ,YAAYssF,EAAS,IAAI,CAAC,EAClD,MACF,IAAK,IACH,IAAI9mB,EAAS8mB,EAAS,IAClBM,EAAsBT,EAAoB,iBAC1CU,EAAQpB,EAAY,YAAY,CAACzrF,EAAQ,IAAI4sF,EAAoB,CAAC,EAAGpnB,CAAM,EAAGxlE,EAAQ,IAAI4sF,EAAoB,CAAC,EAAGpnB,CAAM,CAAC,CAAC,EAC9HinB,EAAUjnB,EAAS,EACnBqmB,EAAW,KAAKgB,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,EAClCf,EAAW,KAAKO,EAAUI,CAAO,EAAGJ,EAAUI,EAAU,CAAC,CAAC,EAC1D,IAAIK,EAAiB7B,GAAkBkB,EAAqBV,EAAazrF,EAASwlE,CAAM,EACxFumB,EAAkB,KAAKe,EAAe,CAAC,EAAGA,EAAe,CAAC,CAAC,EAC3Dd,EAAkB,KAAKR,EAAmBiB,CAAO,EAAGjB,EAAmBiB,EAAU,CAAC,CAAC,EACnFP,EAAW,KAAKlsF,EAAQ,YAAYwlE,CAAM,CAAC,EAC3C,MACF,IAAK,IACH+mB,EAAa,EACrB,CAEQA,IACF5/C,EAAO,KAAK2/C,CAAQ,EACpBL,EAAc,KAAKA,EAAc,MAAM,EAE7C,CAGEA,EAAc,KAAK,SAAUx5H,GAAGC,GAAG,CACjC,OAAOw5H,EAAWz5H,EAAC,EAAIy5H,EAAWx5H,EAAC,CACvC,CAAG,EAOD,QANI7E,EAAMg+H,EAAW,OACjBkB,EAAmBvX,GAAmB3nH,CAAG,EACzCm/H,EAAmBxX,GAAmB3nH,CAAG,EACzCo/H,EAA0BzX,GAAmB3nH,CAAG,EAChDq/H,EAA0B1X,GAAmB3nH,CAAG,EAChDs/H,GAAe,CAAE,EACZhiI,EAAI,EAAGA,EAAI8gI,EAAc,OAAQ9gI,IAAK,CAC7C,IAAIke,GAAM4iH,EAAc9gI,CAAC,EACrBiiI,GAAKjiI,EAAI,EACTkiI,GAAOhkH,GAAM,EACjB0jH,EAAiBK,EAAE,EAAIvB,EAAWwB,EAAI,EACtCN,EAAiBK,GAAK,CAAC,EAAIvB,EAAWwB,GAAO,CAAC,EAC9CL,EAAiBI,EAAE,EAAItB,EAAWuB,EAAI,EACtCL,EAAiBI,GAAK,CAAC,EAAItB,EAAWuB,GAAO,CAAC,EAC9CJ,EAAwBG,EAAE,EAAIrB,EAAkBsB,EAAI,EACpDJ,EAAwBG,GAAK,CAAC,EAAIrB,EAAkBsB,GAAO,CAAC,EAC5DH,EAAwBE,EAAE,EAAIpB,EAAkBqB,EAAI,EACpDH,EAAwBE,GAAK,CAAC,EAAIpB,EAAkBqB,GAAO,CAAC,EAC5DF,GAAahiI,CAAC,EAAIwhF,EAAOtjE,EAAG,CAChC,CACE,MAAO,CACL,QAAS0jH,EACT,KAAMC,EACN,iBAAkBC,EAClB,cAAeC,EACf,OAAQC,EACT,CACH,CCpHA,IAAIpuH,GAAU,KAAK,IACfC,GAAU,KAAK,IACnB,SAASsuH,GAAY75H,EAAGC,EAAG,CACzB,OAAO,MAAMD,CAAC,GAAK,MAAMC,CAAC,CAC5B,CAMA,SAAS65H,GAAYj3H,EAAKsX,EAAQvI,EAAOmoH,EAAQC,EAAQ/rF,EAAK6Y,EAAQmzE,EAAgBC,EAAc,CASlG,QARIC,EACAC,EACAC,EACAC,EACAxxE,EACAC,EACAnzC,EAAMhE,EACN0B,EAAI,EACDA,EAAIymH,EAAQzmH,IAAK,CACtB,IAAItT,EAAIma,EAAOvE,EAAM,CAAC,EAClB3V,EAAIka,EAAOvE,EAAM,EAAI,CAAC,EAC1B,GAAIA,GAAOokH,GAAUpkH,EAAM,EACzB,MAEF,GAAIikH,GAAY75H,EAAGC,CAAC,EAAG,CACrB,GAAIi6H,EAAc,CAChBtkH,GAAOq4B,EACP,QACR,CACM,KACN,CACI,GAAIr4B,IAAQhE,EACV/O,EAAIorC,EAAM,EAAI,SAAW,QAAQ,EAAEjuC,EAAGC,CAAC,EACvCo6H,EAAOr6H,EACPs6H,EAAOr6H,MACF,CACL,IAAIyB,EAAK1B,EAAIm6H,EACTx4H,EAAK1B,EAAIm6H,EAEb,GAAI14H,EAAKA,EAAKC,EAAKA,EAAK,GAAK,CAC3BiU,GAAOq4B,EACP,QACR,CACM,GAAI6Y,EAAS,EAAG,CAKd,QAJI1sB,EAAUxkB,EAAMq4B,EAChB4yB,EAAQ1mD,EAAOigB,EAAU,CAAC,EAC1B0mC,EAAQ3mD,EAAOigB,EAAU,EAAI,CAAC,EAE3BymC,IAAU7gE,GAAK8gE,IAAU7gE,GAAKqT,EAAIymH,GACvCzmH,IACA8mB,GAAW6T,EACXr4B,GAAOq4B,EACP4yB,EAAQ1mD,EAAOigB,EAAU,CAAC,EAC1B0mC,EAAQ3mD,EAAOigB,EAAU,EAAI,CAAC,EAC9Bp6B,EAAIma,EAAOvE,EAAM,CAAC,EAClB3V,EAAIka,EAAOvE,EAAM,EAAI,CAAC,EACtBlU,EAAK1B,EAAIm6H,EACTx4H,EAAK1B,EAAIm6H,EAEX,IAAIG,EAAOjnH,EAAI,EACf,GAAI4mH,EAEF,KAAOL,GAAYh5D,EAAOC,CAAK,GAAKy5D,EAAOR,GACzCQ,IACAngG,GAAW6T,EACX4yB,EAAQ1mD,EAAOigB,EAAU,CAAC,EAC1B0mC,EAAQ3mD,EAAOigB,EAAU,EAAI,CAAC,EAGlC,IAAIogG,EAAe,GACf/vH,EAAK,EACLC,EAAK,EACL+vH,EAAW,OACXC,EAAW,OAEf,GAAIH,GAAQR,GAAUF,GAAYh5D,EAAOC,CAAK,EAC5ChY,EAAO9oD,EACP+oD,EAAO9oD,MACF,CACLwK,EAAKo2D,EAAQs5D,EACbzvH,EAAKo2D,EAAQs5D,EACb,IAAIl2E,EAAMlkD,EAAIm6H,EACV/1E,EAAMyc,EAAQ7gE,EACdmkD,EAAMlkD,EAAIm6H,EACV/1E,EAAMyc,EAAQ7gE,EACd06H,EAAa,OACbC,EAAa,OACjB,GAAIX,IAAmB,IAAK,CAC1BU,EAAa,KAAK,IAAIz2E,CAAG,EACzB02E,EAAa,KAAK,IAAIx2E,CAAG,EACzB,IAAIy2E,EAAQpwH,EAAK,EAAI,EAAI,GACzBq+C,EAAO9oD,EAAI66H,EAAQF,EAAa7zE,EAChCiC,EAAO9oD,EACPw6H,EAAWz6H,EAAI66H,EAAQD,EAAa9zE,EACpC4zE,EAAWz6H,CACvB,SAAqBg6H,IAAmB,IAAK,CACjCU,EAAa,KAAK,IAAIx2E,CAAG,EACzBy2E,EAAa,KAAK,IAAIv2E,CAAG,EACzB,IAAIy2E,GAAQpwH,EAAK,EAAI,EAAI,GACzBo+C,EAAO9oD,EACP+oD,EAAO9oD,EAAI66H,GAAQH,EAAa7zE,EAChC2zE,EAAWz6H,EACX06H,EAAWz6H,EAAI66H,GAAQF,EAAa9zE,CAChD,MACY6zE,EAAa,KAAK,KAAKz2E,EAAMA,EAAMC,EAAMA,CAAG,EAC5Cy2E,EAAa,KAAK,KAAKx2E,EAAMA,EAAMC,EAAMA,CAAG,EAE5Cm2E,EAAeI,GAAcA,EAAaD,GAC1C7xE,EAAO9oD,EAAIyK,EAAKq8C,GAAU,EAAI0zE,GAC9BzxE,EAAO9oD,EAAIyK,EAAKo8C,GAAU,EAAI0zE,GAE9BC,EAAWz6H,EAAIyK,EAAKq8C,EAAS0zE,EAC7BE,EAAWz6H,EAAIyK,EAAKo8C,EAAS0zE,EAG7BC,EAAWnvH,GAAQmvH,EAAUlvH,GAAQs1D,EAAO7gE,CAAC,CAAC,EAC9C06H,EAAWpvH,GAAQovH,EAAUnvH,GAAQu1D,EAAO7gE,CAAC,CAAC,EAC9Cw6H,EAAWlvH,GAAQkvH,EAAUnvH,GAAQu1D,EAAO7gE,CAAC,CAAC,EAC9C06H,EAAWnvH,GAAQmvH,EAAUpvH,GAAQw1D,EAAO7gE,CAAC,CAAC,EAE9CwK,EAAKgwH,EAAWz6H,EAChB0K,EAAKgwH,EAAWz6H,EAChB6oD,EAAO9oD,EAAIyK,EAAKkwH,EAAaC,EAC7B7xE,EAAO9oD,EAAIyK,EAAKiwH,EAAaC,EAG7B9xE,EAAOx9C,GAAQw9C,EAAMv9C,GAAQ4uH,EAAOn6H,CAAC,CAAC,EACtC+oD,EAAOz9C,GAAQy9C,EAAMx9C,GAAQ6uH,EAAOn6H,CAAC,CAAC,EACtC6oD,EAAOv9C,GAAQu9C,EAAMx9C,GAAQ6uH,EAAOn6H,CAAC,CAAC,EACtC+oD,EAAOx9C,GAAQw9C,EAAMz9C,GAAQ8uH,EAAOn6H,CAAC,CAAC,EAEtCwK,EAAKzK,EAAI8oD,EACTp+C,EAAKzK,EAAI8oD,EACT0xE,EAAWz6H,EAAIyK,EAAKmwH,EAAaD,EACjCD,EAAWz6H,EAAIyK,EAAKkwH,EAAaD,CAE7C,CACQ93H,EAAI,cAAcw3H,EAAMC,EAAMxxE,EAAMC,EAAM/oD,EAAGC,CAAC,EAC9Co6H,EAAOI,EACPH,EAAOI,CACf,MACQ73H,EAAI,OAAO7C,EAAGC,CAAC,CAEvB,CACIk6H,EAAQn6H,EACRo6H,EAAQn6H,EACR2V,GAAOq4B,CACX,CACE,OAAO36B,CACT,CACA,IAAIynH,GAA+B,UAAY,CAC7C,SAASA,GAAkB,CACzB,KAAK,OAAS,EACd,KAAK,iBAAmB,EAC5B,CACE,OAAOA,CACT,EAAG,EACCC,GAA0B,SAAUhtH,EAAQ,CAC9CC,EAAU+sH,EAAYhtH,CAAM,EAC5B,SAASgtH,EAAWtgH,EAAM,CACxB,IAAIxM,EAAQF,EAAO,KAAK,KAAM0M,CAAI,GAAK,KACvC,OAAAxM,EAAM,KAAO,cACNA,CACX,CACE,OAAA8sH,EAAW,UAAU,gBAAkB,UAAY,CACjD,MAAO,CACL,OAAQ,OACR,KAAM,IACP,CACF,EACDA,EAAW,UAAU,gBAAkB,UAAY,CACjD,OAAO,IAAID,EACZ,EACDC,EAAW,UAAU,UAAY,SAAUn4H,EAAKmuC,EAAO,CACrD,IAAI72B,EAAS62B,EAAM,OACft5C,EAAI,EACJ0C,EAAM+f,EAAO,OAAS,EAE1B,GAAI62B,EAAM,aAAc,CAEtB,KAAO52C,EAAM,GACNy/H,GAAY1/G,EAAO/f,EAAM,EAAI,CAAC,EAAG+f,EAAO/f,EAAM,EAAI,CAAC,CAAC,EAD3CA,IACd,CAIF,KAAO1C,EAAI0C,GACJy/H,GAAY1/G,EAAOziB,EAAI,CAAC,EAAGyiB,EAAOziB,EAAI,EAAI,CAAC,CAAC,EADnCA,IACd,CAIR,CACI,KAAOA,EAAI0C,GACT1C,GAAKoiI,GAAYj3H,EAAKsX,EAAQziB,EAAG0C,EAAKA,EAAK,EAAG42C,EAAM,OAAQA,EAAM,eAAgBA,EAAM,YAAY,EAAI,CAE3G,EACDgqF,EAAW,UAAU,WAAa,SAAUC,EAAMlpF,EAAK,CAChD,KAAK,OACR,KAAK,gBAAiB,EACtB,KAAK,UAAU,KAAK,KAAM,KAAK,KAAK,GAStC,QAPI5F,EAAO,KAAK,KACZjwC,EAAOiwC,EAAK,KACZrB,EAAMc,GAAU,IAChBrzB,EACAC,EACA0iH,EAASnpF,IAAQ,IACjB/8B,EAAQ,CAAE,EACLtd,EAAI,EAAGA,EAAIwE,EAAK,QAAS,CAChC,IAAIowC,EAAMpwC,EAAKxE,GAAG,EACdsI,EAAI,OACJC,EAAI,OACJwY,EAAK,OACLC,EAAK,OACLC,EAAK,OACLC,EAAK,OACLxN,EAAI,OACR,OAAQkhC,EAAG,CACT,KAAKxB,EAAI,EACPvyB,EAAKrc,EAAKxE,GAAG,EACb8gB,EAAKtc,EAAKxE,GAAG,EACb,MACF,KAAKozC,EAAI,EAIP,GAHA9qC,EAAI9D,EAAKxE,GAAG,EACZuI,EAAI/D,EAAKxE,GAAG,EACZ0T,EAAI8vH,GAAUD,EAAO1iH,IAAOvY,EAAIuY,IAAO0iH,EAAOziH,IAAOvY,EAAIuY,GACrDpN,GAAK,GAAKA,GAAK,EAAG,CACpB,IAAIrS,EAAMmiI,GAAUj7H,EAAIuY,GAAMpN,EAAIoN,GAAMxY,EAAIuY,GAAMnN,EAAImN,EACtD,OAAO2iH,EAAS,CAACD,EAAMliI,CAAG,EAAI,CAACA,EAAKkiI,CAAI,CACpD,CACU1iH,EAAKvY,EACLwY,EAAKvY,EACL,MACF,KAAK6qC,EAAI,EACP9qC,EAAI9D,EAAKxE,GAAG,EACZuI,EAAI/D,EAAKxE,GAAG,EACZ+gB,EAAKvc,EAAKxE,GAAG,EACbghB,EAAKxc,EAAKxE,GAAG,EACbihB,EAAKzc,EAAKxE,GAAG,EACbkhB,EAAK1c,EAAKxE,GAAG,EACb,IAAIyjI,EAAQD,EAASnkH,GAAYwB,EAAIvY,EAAGyY,EAAIE,EAAIsiH,EAAMjmH,CAAK,EAAI+B,GAAYyB,EAAIvY,EAAGyY,EAAIE,EAAIqiH,EAAMjmH,CAAK,EACrG,GAAImmH,EAAQ,EACV,QAAS76B,EAAM,EAAGA,EAAM66B,EAAO76B,IAAO,CACpC,IAAI86B,EAAMpmH,EAAMsrF,CAAG,EACnB,GAAI86B,GAAO,GAAKA,GAAO,EAAG,CACxB,IAAIriI,EAAMmiI,EAAStkH,GAAQ4B,EAAIvY,EAAGyY,EAAIE,EAAIwiH,CAAG,EAAIxkH,GAAQ2B,EAAIvY,EAAGyY,EAAIE,EAAIyiH,CAAG,EAC3E,OAAOF,EAAS,CAACD,EAAMliI,CAAG,EAAI,CAACA,EAAKkiI,CAAI,CACxD,CACA,CAEU1iH,EAAKI,EACLH,EAAKI,EACL,KACV,CACA,CACG,EACMoiH,CACT,EAAElrF,EAAI,EAEFurF,GAA8B,SAAUrtH,EAAQ,CAClDC,EAAUotH,EAAgBrtH,CAAM,EAChC,SAASqtH,GAAiB,CACxB,OAAOrtH,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAOqtH,CACT,EAAEN,EAAe,EACbO,GAAyB,SAAUttH,EAAQ,CAC7CC,EAAUqtH,EAAWttH,CAAM,EAC3B,SAASstH,EAAU5gH,EAAM,CACvB,IAAIxM,EAAQF,EAAO,KAAK,KAAM0M,CAAI,GAAK,KACvC,OAAAxM,EAAM,KAAO,aACNA,CACX,CACE,OAAAotH,EAAU,UAAU,gBAAkB,UAAY,CAChD,OAAO,IAAID,EACZ,EACDC,EAAU,UAAU,UAAY,SAAUz4H,EAAKmuC,EAAO,CACpD,IAAI72B,EAAS62B,EAAM,OACfuqF,EAAkBvqF,EAAM,gBACxBt5C,EAAI,EACJ0C,EAAM+f,EAAO,OAAS,EACtB8/G,EAAiBjpF,EAAM,eAC3B,GAAIA,EAAM,aAAc,CAEtB,KAAO52C,EAAM,GACNy/H,GAAY1/G,EAAO/f,EAAM,EAAI,CAAC,EAAG+f,EAAO/f,EAAM,EAAI,CAAC,CAAC,EAD3CA,IACd,CAIF,KAAO1C,EAAI0C,GACJy/H,GAAY1/G,EAAOziB,EAAI,CAAC,EAAGyiB,EAAOziB,EAAI,EAAI,CAAC,CAAC,EADnCA,IACd,CAIR,CACI,KAAOA,EAAI0C,GAAK,CACd,IAAIkZ,EAAIwmH,GAAYj3H,EAAKsX,EAAQziB,EAAG0C,EAAKA,EAAK,EAAG42C,EAAM,OAAQipF,EAAgBjpF,EAAM,YAAY,EACjG8oF,GAAYj3H,EAAK04H,EAAiB7jI,EAAI4b,EAAI,EAAGA,EAAGlZ,EAAK,GAAI42C,EAAM,gBAAiBipF,EAAgBjpF,EAAM,YAAY,EAClHt5C,GAAK4b,EAAI,EACTzQ,EAAI,UAAW,CACrB,CACG,EACMy4H,CACT,EAAExrF,EAAI,ECjTN,SAAS0rF,GAAmB/Y,EAAWgZ,EAAcj/E,EAAa6P,EAAMb,EAAQ,CAC9E,IAAItlD,EAAOu8G,EAAU,QAAS,EAC1BziH,EAAIkG,EAAK,EACTjG,EAAIiG,EAAK,EACT5N,EAAQ4N,EAAK,MACb6F,EAAS7F,EAAK,OACd48B,EAAY0Z,EAAY,IAAI,CAAC,YAAa,OAAO,CAAC,GAAK,EAE3Dx8C,GAAK8iC,EAAY,EACjB7iC,GAAK6iC,EAAY,EACjBxqC,GAASwqC,EACT/2B,GAAU+2B,EAEVxqC,EAAQ,KAAK,KAAKA,CAAK,EACnB0H,IAAM,KAAK,MAAMA,CAAC,IACpBA,EAAI,KAAK,MAAMA,CAAC,EAEhB1H,KAEF,IAAIuY,EAAW,IAAIsiF,GAAa,CAC9B,MAAO,CACL,EAAGnzF,EACH,EAAGC,EACH,MAAO3H,EACP,OAAQyT,CACd,CACA,CAAG,EACD,GAAI0vH,EAAc,CAChB,IAAI/Y,EAAWD,EAAU,YAAa,EAClCiZ,EAAehZ,EAAS,aAAc,EACtCiZ,EAAiBjZ,EAAS,QAC1BgZ,GACEC,IACF9qH,EAAS,MAAM,GAAKvY,GAEtBuY,EAAS,MAAM,MAAQ,IAElB8qH,IACH9qH,EAAS,MAAM,GAAK9E,GAEtB8E,EAAS,MAAM,OAAS,GAE1B,IAAI+qH,EAAW/+H,EAAW2uD,CAAM,EAAI,SAAUzwC,EAAS,CACrDywC,EAAOzwC,EAASlK,CAAQ,CAC9B,EAAQ,KACJgkH,GAAkBhkH,EAAU,CAC1B,MAAO,CACL,MAAOvY,EACP,OAAQyT,EACR,EAAG/L,EACH,EAAGC,CACX,CACK,EAAEu8C,EAAa,KAAM6P,EAAMuvE,CAAQ,CACxC,CACE,OAAO/qH,CACT,CACA,SAASgrH,GAAoBC,EAAOL,EAAcj/E,EAAa,CAC7D,IAAIu/E,EAAaD,EAAM,QAAS,EAE5B3mG,EAAKM,GAAMsmG,EAAW,GAAI,CAAC,EAC3B7rH,EAAIulB,GAAMsmG,EAAW,EAAG,CAAC,EACzBlrH,EAAW,IAAImrH,GAAe,CAChC,MAAO,CACL,GAAIvmG,GAAMqmG,EAAM,GAAI,CAAC,EACrB,GAAIrmG,GAAMqmG,EAAM,GAAI,CAAC,EACrB,GAAI3mG,EACJ,EAAGjlB,EACH,WAAY6rH,EAAW,WACvB,SAAUA,EAAW,SACrB,UAAWA,EAAW,SAC5B,CACA,CAAG,EACD,GAAIN,EAAc,CAChB,IAAIQ,EAAWH,EAAM,YAAa,EAAC,MAAQ,QACvCG,EACFprH,EAAS,MAAM,SAAWkrH,EAAW,WAErClrH,EAAS,MAAM,EAAIskB,EAErB0/F,GAAkBhkH,EAAU,CAC1B,MAAO,CACL,SAAUkrH,EAAW,SACrB,EAAG7rH,CACX,CACK,EAAEssC,CAAW,CAClB,CACE,OAAO3rC,CACT,CC1FO,SAASqrH,GAAuBx/E,EAAUx/C,EAAM,CACrD,OAAOw/C,EAAS,OAASx/C,CAC3B,CCkBA,SAASi/H,GAAaC,EAASC,EAAS,CAClC,GAAAD,EAAQ,SAAWC,EAAQ,OAG/B,SAAS3kI,EAAI,EAAGA,EAAI0kI,EAAQ,OAAQ1kI,IAClC,GAAI0kI,EAAQ1kI,CAAC,IAAM2kI,EAAQ3kI,CAAC,EAC1B,OAGG,MAAA,GACT,CACA,SAAS4kI,GAAeniH,EAAQ,CAK9B,QAJIoiH,EAAO,IACPC,EAAO,IACPjvH,EAAO,KACPC,EAAO,KACF9V,EAAI,EAAGA,EAAIyiB,EAAO,QAAS,CAC9B,IAAAna,EAAIma,EAAOziB,GAAG,EACduI,EAAIka,EAAOziB,GAAG,EACb,MAAMsI,CAAC,IACHu8H,EAAA,KAAK,IAAIv8H,EAAGu8H,CAAI,EAChBhvH,EAAA,KAAK,IAAIvN,EAAGuN,CAAI,GAEpB,MAAMtN,CAAC,IACHu8H,EAAA,KAAK,IAAIv8H,EAAGu8H,CAAI,EAChBhvH,EAAA,KAAK,IAAIvN,EAAGuN,CAAI,EACzB,CAEK,MAAA,CAAC,CAAC+uH,EAAMC,CAAI,EAAG,CAACjvH,EAAMC,CAAI,CAAC,CACpC,CACA,SAASivH,GAAgBL,EAASC,EAAS,CACrC,IAAA9/F,EAAK+/F,GAAeF,CAAO,EAC7BM,EAAOngG,EAAG,CAAC,EACXogG,EAAOpgG,EAAG,CAAC,EACTqR,EAAK0uF,GAAeD,CAAO,EAC7BpxF,EAAO2C,EAAG,CAAC,EACX1C,EAAO0C,EAAG,CAAC,EAEb,OAAO,KAAK,IAAI,KAAK,IAAI8uF,EAAK,CAAC,EAAIzxF,EAAK,CAAC,CAAC,EAAG,KAAK,IAAIyxF,EAAK,CAAC,EAAIzxF,EAAK,CAAC,CAAC,EAAG,KAAK,IAAI0xF,EAAK,CAAC,EAAIzxF,EAAK,CAAC,CAAC,EAAG,KAAK,IAAIyxF,EAAK,CAAC,EAAIzxF,EAAK,CAAC,CAAC,CAAC,CACpI,CACA,SAAS0xF,GAAU91E,EAAQ,CACzB,OAAOmW,GAAgBnW,CAAM,EAAIA,EAASA,EAAS,GAAM,CAC3D,CACA,SAAS+1E,GAAmBngF,EAAUxgD,EAAMu7H,EAAe,CACrD,GAAA,CAACA,EAAc,SACjB,MAAO,CAAC,EAIV,QAFIr9H,EAAM8B,EAAK,MAAM,EACjBie,EAAS4nG,GAAmB3nH,EAAM,CAAC,EAC9Bwb,EAAM,EAAGA,EAAMxb,EAAKwb,IAAO,CAClC,IAAIknH,EAAKtF,GAAkBC,EAAe/6E,EAAUxgD,EAAM0Z,CAAG,EAC7DuE,EAAOvE,EAAM,CAAC,EAAIknH,EAAG,CAAC,EACtB3iH,EAAOvE,EAAM,EAAI,CAAC,EAAIknH,EAAG,CAAC,CAAA,CAErB,OAAA3iH,CACT,CAWA,SAAS4iH,GAAmB5iH,EAAQ6iH,EAAYtgF,EAAUugF,EAAY/C,EAAc,CAC9E,IAAAxX,EAAWhmE,EAAS,YAAY,EAChCwgF,EAAYxa,EAAS,MAAQ,KAAOA,EAAS,MAAQ,SAAW,EAAI,EACpEya,EAAa,CAAC,EACdzlI,EAAI,EACJ0lI,EAAS,CAAC,EACVN,EAAK,CAAC,EACNO,EAAS,CAAC,EACVC,EAAiB,CAAC,EACtB,GAAIpD,EAAc,CAChB,IAAKxiI,EAAI,EAAGA,EAAIyiB,EAAO,OAAQziB,GAAK,EAAG,CAMrC,IAAI6lI,EAAYP,GAAc7iH,EAC1B,CAAC,MAAMojH,EAAU7lI,CAAC,CAAC,GAAK,CAAC,MAAM6lI,EAAU7lI,EAAI,CAAC,CAAC,GACjD4lI,EAAe,KAAKnjH,EAAOziB,CAAC,EAAGyiB,EAAOziB,EAAI,CAAC,CAAC,CAC9C,CAEOyiB,EAAAmjH,CAAA,CAEX,IAAK5lI,EAAI,EAAGA,EAAIyiB,EAAO,OAAS,EAAGziB,GAAK,EAMtC,OALA2lI,EAAO,CAAC,EAAIljH,EAAOziB,EAAI,CAAC,EACxB2lI,EAAO,CAAC,EAAIljH,EAAOziB,EAAI,CAAC,EACrBolI,EAAA,CAAC,EAAI3iH,EAAOziB,CAAC,EAChBolI,EAAG,CAAC,EAAI3iH,EAAOziB,EAAI,CAAC,EACpBylI,EAAW,KAAKL,EAAG,CAAC,EAAGA,EAAG,CAAC,CAAC,EACpBG,EAAY,CAClB,IAAK,MACIG,EAAAF,CAAS,EAAIG,EAAOH,CAAS,EACpCE,EAAO,EAAIF,CAAS,EAAIJ,EAAG,EAAII,CAAS,EACxCC,EAAW,KAAKC,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACpC,MACF,IAAK,SACH,IAAII,GAAUV,EAAGI,CAAS,EAAIG,EAAOH,CAAS,GAAK,EAC/CO,EAAU,CAAC,EACfL,EAAOF,CAAS,EAAIO,EAAQP,CAAS,EAAIM,EACzCJ,EAAO,EAAIF,CAAS,EAAIJ,EAAG,EAAII,CAAS,EACxCO,EAAQ,EAAIP,CAAS,EAAIG,EAAO,EAAIH,CAAS,EAC7CC,EAAW,KAAKC,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,EACpCD,EAAW,KAAKM,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EACtC,MACF,QAESL,EAAAF,CAAS,EAAIJ,EAAGI,CAAS,EAChCE,EAAO,EAAIF,CAAS,EAAIG,EAAO,EAAIH,CAAS,EAC5CC,EAAW,KAAKC,EAAO,CAAC,EAAGA,EAAO,CAAC,CAAC,CAAA,CAI1C,OAAAD,EAAW,KAAKhjH,EAAOziB,GAAG,EAAGyiB,EAAOziB,GAAG,CAAC,EACjCylI,CACT,CAOA,SAASO,GAAerqG,EAAY7X,EAAS,CAC3C,IAAImiH,EAAgB,CAAC,EACjBvjI,EAAMi5B,EAAW,OAEjBuqG,EACAC,EACK,SAAAC,EAASC,EAAOC,EAAOC,EAAc,CAC5C,IAAIC,EAASH,EAAM,MACf/yH,GAAKizH,EAAeC,IAAWF,EAAM,MAAQE,GAC7CzgH,EAAQI,GAAK7S,EAAG,CAAC+yH,EAAM,MAAOC,EAAM,KAAK,CAAC,EACvC,MAAA,CACL,MAAOC,EACP,MAAAxgH,CACF,CAAA,CAEF,QAAS/lB,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACxB,IAAAymI,EAAS9qG,EAAW37B,CAAC,EACrB2wC,EAAQ81F,EAAO,MACnB,GAAI91F,EAAQ,EACgBu1F,EAAAO,UACjB91F,EAAQ7sB,EAAS,CACtBqiH,EACFF,EAAc,KAAKG,EAASD,EAAsBM,EAAQ3iH,CAAO,CAAC,EACzDoiH,GAEKD,EAAA,KAAKG,EAASF,EAAyBO,EAAQ,CAAC,EAAGL,EAASF,EAAyBO,EAAQ3iH,CAAO,CAAC,EAGrH,KAAA,MAEIoiH,IACFD,EAAc,KAAKG,EAASF,EAAyBO,EAAQ,CAAC,CAAC,EAErCP,EAAA,MAE5BD,EAAc,KAAKQ,CAAM,EACFN,EAAAM,CACzB,CAEK,OAAAR,CACT,CACA,SAASS,GAAkBliI,EAAMwgD,EAAUlB,EAAK,CAC1C,IAAA6iF,EAAiBniI,EAAK,UAAU,YAAY,EAC5C,GAAA,GAACmiI,GAAkB,CAACA,EAAe,QAAU,CAACniI,EAAK,UAInDwgD,EAAS,OAAS,cAQtB,SAFI4wC,EACAgxC,EACK5mI,EAAI2mI,EAAe,OAAS,EAAG3mI,GAAK,EAAGA,IAAK,CACnD,IAAIukF,EAAU//E,EAAK,iBAAiBmiI,EAAe3mI,CAAC,EAAE,SAAS,EAG3D,GAFJ41F,EAAWrR,GAAWA,EAAQ,SAE1BqR,IAAa,KAAOA,IAAa,IAAK,CACxCgxC,EAAaD,EAAe3mI,CAAC,EAC7B,KAAA,CACF,CAEF,GAAK4mI,EAYD,KAAAn0E,EAAOzN,EAAS,QAAQ4wC,CAAQ,EAEhCj6D,EAAavN,EAAWw4G,EAAW,MAAO,SAAUt2H,EAAM,CAErD,MAAA,CACL,MAAOmiD,EAAK,cAAcA,EAAK,YAAYniD,EAAK,KAAK,CAAC,EACtD,MAAOA,EAAK,KACd,CAAA,CACD,EACGu2H,EAAUlrG,EAAW,OACrBmrG,EAAcF,EAAW,YAAY,MAAM,EAC3CC,GAAWlrG,EAAW,CAAC,EAAE,MAAQA,EAAWkrG,EAAU,CAAC,EAAE,QAC3DlrG,EAAW,QAAQ,EACnBmrG,EAAY,QAAQ,GAElB,IAAAC,EAAoBf,GAAerqG,EAAYi6D,IAAa,IAAM9xC,EAAI,SAAS,EAAIA,EAAI,WAAW,EAClGkjF,EAAiBD,EAAkB,OACnC,GAAA,CAACC,GAAkBH,EAEd,OAAAlrG,EAAW,CAAC,EAAE,MAAQ,EAAImrG,EAAY,CAAC,EAAIA,EAAY,CAAC,EAAInrG,EAAWkrG,EAAU,CAAC,EAAE,MAAQC,EAAY,CAAC,EAAIA,EAAY,CAAC,EAAInrG,EAAW,CAAC,EAAE,MAErJ,IAAIsrG,EAAa,GACbC,EAAWH,EAAkB,CAAC,EAAE,MAAQE,EACxCE,EAAWJ,EAAkBC,EAAiB,CAAC,EAAE,MAAQC,EACzDG,EAAYD,EAAWD,EAC3B,GAAIE,EAAY,KACP,MAAA,cAEF73G,EAAKw3G,EAAmB,SAAUz2H,EAAM,CACxCA,EAAA,QAAUA,EAAK,MAAQ42H,GAAYE,CAAA,CACzC,EACDL,EAAkB,KAAK,CAErB,OAAQC,EAAiBD,EAAkBC,EAAiB,CAAC,EAAE,OAAS,GACxE,MAAOF,EAAY,CAAC,GAAK,aAAA,CAC1B,EACDC,EAAkB,QAAQ,CACxB,OAAQC,EAAiBD,EAAkB,CAAC,EAAE,OAAS,GACvD,MAAOD,EAAY,CAAC,GAAK,aAAA,CAC1B,EACG,IAAAO,EAAW,IAAIC,GAAuB,EAAG,EAAG,EAAG,EAAGP,EAAmB,EAAI,EAC7E,OAAAM,EAASzxC,CAAQ,EAAIsxC,EACZG,EAAAzxC,EAAW,GAAG,EAAIuxC,EACpBE,GACT,CACA,SAASE,GAAgBziF,EAAatgD,EAAMwgD,EAAU,CAChD,IAAAwiF,EAAgB1iF,EAAY,IAAI,eAAe,EAC/C2iF,EAASD,IAAkB,OAC3B,GAAA,EAAAA,GAAiB,CAACC,GAGtB,KAAIC,EAAe1iF,EAAS,eAAe,SAAS,EAAE,CAAC,EACvD,GAAK0iF,GAMD,EAAAD,GAEDE,GAA4BD,EAAcljI,CAAI,GAIjD,KAAIojI,EAAkBpjI,EAAK,aAAakjI,EAAa,GAAG,EACpDG,EAAW,CAAC,EAChBt4G,OAAAA,EAAYm4G,EAAa,cAAc,EAAG,SAAUzO,EAAW,CAC7D,IAAI1Q,EAAgBmf,EAAa,MAAM,oBAAoBzO,EAAU,SAAS,EAC9E4O,EAAStf,CAAa,EAAI,CAAA,CAC3B,EACM,SAAUhjE,EAAW,CAC1B,MAAO,CAACsiF,EAAS,eAAerjI,EAAK,IAAIojI,EAAiBriF,CAAS,CAAC,CACtE,GACF,CACA,SAASoiF,GAA4BD,EAAcljI,EAAM,CAKnD,IAAA8mH,EAAaoc,EAAa,UAAU,EACpCI,EAAY,KAAK,IAAIxc,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EAAIoc,EAAa,MAAM,MAAM,EAC7E,MAAAI,CAAS,IAAMA,EAAY,GAIjC,QAFIzrC,EAAU73F,EAAK,MAAM,EACrBod,EAAO,KAAK,IAAI,EAAG,KAAK,MAAMy6E,EAAU,CAAC,CAAC,EACrC92C,EAAY,EAAGA,EAAY82C,EAAS92C,GAAa3jC,EACxD,GAAI6gF,GAAU,cAAcj+F,EAAM+gD,CAAA,EAEhCmiF,EAAa,eAAiB,EAAI,CAAC,EAEnC,IAAMI,EACC,MAAA,GAGJ,MAAA,EACT,CACA,SAAS3F,GAAY75H,EAAGC,EAAG,CACzB,OAAO,MAAMD,CAAC,GAAK,MAAMC,CAAC,CAC5B,CACA,SAASw/H,GAAoBtlH,EAAQ,CAE5B,QADH/f,EAAM+f,EAAO,OAAS,EACnB/f,EAAM,GACNy/H,GAAY1/G,EAAO/f,EAAM,EAAI,CAAC,EAAG+f,EAAO/f,EAAM,EAAI,CAAC,CAAC,EAD3CA,IACd,CAIF,OAAOA,EAAM,CACf,CACA,SAASslI,GAAgBvlH,EAAQvE,EAAK,CAC7B,MAAA,CAACuE,EAAOvE,EAAM,CAAC,EAAGuE,EAAOvE,EAAM,EAAI,CAAC,CAAC,CAC9C,CACA,SAAS+pH,GAAcxlH,EAAQ8gH,EAAMlpF,EAAK,CAOxC,QANI33C,EAAM+f,EAAO,OAAS,EACtBmlE,EAASvtC,IAAQ,IAAM,EAAI,EAC3B,EACA9yC,EACA2gI,EAAY,EACZC,EAAY,GACPnoI,EAAI,EAAGA,EAAI0C,EAAK1C,IAEnB,GADAuH,EAAAkb,EAAOziB,EAAI,EAAI4nF,CAAM,EACrB,QAAMrgF,CAAC,GAAK,MAAMkb,EAAOziB,EAAI,EAAI,EAAI4nF,CAAM,CAAC,GAGhD,IAAI5nF,IAAM,EAAG,CACP,EAAAuH,EACJ,QAAA,CAEF,GAAI,GAAKg8H,GAAQh8H,GAAKg8H,GAAQ,GAAKA,GAAQh8H,GAAKg8H,EAAM,CACxC4E,EAAAnoI,EACZ,KAAA,CAEUkoI,EAAAloI,EACR,EAAAuH,EAEC,MAAA,CACL,MAAO,CAAC2gI,EAAWC,CAAS,EAC5B,GAAI5E,EAAO,IAAMh8H,EAAI,EACvB,CACF,CACA,SAAS6gI,GAAqBtjF,EAAa,CACzC,GAAIA,EAAY,IAAI,CAAC,WAAY,MAAM,CAAC,EAC/B,MAAA,GAET,QAAS9kD,EAAI,EAAGA,EAAIugD,GAAe,OAAQvgD,IACrC,GAAA8kD,EAAY,IAAI,CAACvE,GAAevgD,CAAC,EAAG,WAAY,MAAM,CAAC,EAClD,MAAA,GAGJ,MAAA,EACT,CACA,SAASqoI,GAAmBC,EAAUtjF,EAAU++E,EAAcj/E,EAAa,CACrE,GAAA0/E,GAAuBx/E,EAAU,aAAa,EAAG,CAC/C,IAAAujF,EAAkBzjF,EAAY,SAAS,UAAU,EACjD0jF,EAAmBD,EAAgB,IAAI,gBAAgB,EACvDE,EAAS3jF,EAAY,QAAQ,EAC7B4jF,EAAyB,CAC3B,eAAgB,CAClB,EACI50E,EAASs0E,GAAqBtjF,CAAW,EAAI,SAAUzhC,EAASslH,EAAU,CAC5EL,EAAS,kBAAkBjlH,EAASslH,EAAUF,EAAQC,EAAwBF,EAAkBD,EAAiBvjF,CAAQ,CAAA,EACvH,KACAg/E,EAAeh/E,EAAS,YAAY,EAAE,aAAa,EACnD7rC,EAAW2qH,GAAmB9+E,EAAU++E,EAAcj/E,EAAa,UAAY,CACjF,IAAI8jF,EAAWN,EAAS,UACpBM,GAAY7E,GACV2E,EAAuB,WAAa,MACtCE,EAAS,KAAK,CACZ,EAAGF,EAAuB,UAC1B,EAAGA,EAAuB,SAAA,CAC3B,GAGJ50E,CAAM,EAET,GAAI,CAAChP,EAAY,IAAI,OAAQ,EAAI,EAAG,CAClC,IAAIhG,EAAY3lC,EAAS,MACrB+wG,EAAa,KAAK,IAAIprE,EAAU,MAAOA,EAAU,MAAM,EACvDklF,GACFllF,EAAU,GAAKorE,EACfprE,EAAU,QAAUorE,EAAa,IAEjCprE,EAAU,GAAKorE,EACfprE,EAAU,OAASorE,EAAa,EAClC,CAGF,OAAIp2D,GACFA,EAAO,EAAG36C,CAAQ,EAEbA,CAAA,KAOA,QAAAgrH,GAAoBn/E,EAAU++E,EAAcj/E,CAAW,CAElE,CACA,SAAS+jF,GAA0BC,EAAe9jF,EAAU,CACtD,IAAAgmE,EAAWhmE,EAAS,YAAY,EAChCg/E,EAAehZ,EAAS,aAAa,EACrC+d,EAAiB/d,EAAS,QAC1Bge,EAAQhF,EAAe+E,EAAiB,QAAU,OAAS,SAC3Dp1G,EAAgBqwG,EAAe,SAAW+E,EAAiB,MAAQ,SAChE,MAAA,CACL,OAAQ,CACN,MAAOD,EAAc,IAAI,OAAO,GAAKE,EACrC,cAAeF,EAAc,IAAI,eAAe,GAAKn1G,CAAA,CAEzD,CACF,CACA,IAAIs1G,GAAwB,SAAU3yH,EAAQ,CAC5CC,EAAU0yH,EAAU3yH,CAAM,EAC1B,SAAS2yH,GAAW,CAClB,OAAO3yH,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAAA,CAE7D2yH,OAAAA,EAAS,UAAU,KAAO,UAAY,CAChC,IAAAC,EAAY,IAAI3tC,GAChB4tC,EAAa,IAAI7K,GAChB,KAAA,MAAM,IAAI6K,EAAW,KAAK,EAC/B,KAAK,YAAcA,EACnB,KAAK,WAAaD,EAClB,KAAK,iBAAmB5yD,EAAY,KAAK,iBAAkB,IAAI,CACjE,EACA2yD,EAAS,UAAU,OAAS,SAAUnkF,EAAangB,EAASmf,EAAK,CAC/D,IAAIkB,EAAWF,EAAY,iBACvB8jB,EAAQ,KAAK,MACbpkE,EAAOsgD,EAAY,QAAQ,EAC3BskF,EAAiBtkF,EAAY,SAAS,WAAW,EACjDukF,EAAiBvkF,EAAY,SAAS,WAAW,EACjDriC,EAASje,EAAK,UAAU,QAAQ,GAAK,CAAC,EACtC8kI,EAAkBtkF,EAAS,OAAS,QACpCukF,EAAe,KAAK,UACpBJ,EAAa,KAAK,YAClBK,EAAW,KAAK,UAChBC,EAAU,KAAK,SACfP,EAAY,KAAK,WACjBnF,EAAe,CAACp/F,EAAQ,KAAOmgB,EAAY,IAAI,WAAW,EAC1D4kF,EAAc,CAACL,EAAe,QAAQ,EACtClK,EAAckK,EAAe,IAAI,QAAQ,EACzCtJ,EAAgBb,GAAqBl6E,EAAUxgD,EAAM26H,CAAW,EAChE0E,EAAkB6F,GAAevE,GAAmBngF,EAAUxgD,EAAMu7H,CAAa,EACjF4J,EAAa7kF,EAAY,IAAI,YAAY,EACzC09E,EAAe19E,EAAY,IAAI,cAAc,EAC7C8kF,EAAeD,GAAc,CAACL,GAAmB/B,GAAgBziF,EAAatgD,EAAMwgD,CAAQ,EAE5Fw5E,EAAU,KAAK,MACnBA,GAAWA,EAAQ,kBAAkB,SAAUnxH,GAAI6Q,GAAK,CAClD7Q,GAAG,SACLu7D,EAAM,OAAOv7D,EAAE,EACPmxH,EAAA,iBAAiBtgH,GAAK,IAAI,EACpC,CACD,EAEIyrH,GACHR,EAAW,OAAO,EAEpBvgE,EAAM,IAAIsgE,CAAS,EAEnB,IAAItnH,EAAQ0nH,EAA4C,GAA1BxkF,EAAY,IAAI,MAAM,EAChD+kF,EACA7kF,GAAYA,EAAS,SAAWF,EAAY,IAAI,OAAQ,EAAI,IAC9D+kF,EAAqB7kF,EAAS,QAAQ,EAGlC6kF,EAAmB,OAAS,MAC9BA,EAAmB,GAAK,GACxBA,EAAmB,GAAK,GACxBA,EAAmB,OAAS,GAC5BA,EAAmB,QAAU,IACpBA,EAAmB,KAC5BA,EAAmB,IAAM,GACzBA,EAAmB,GAAK,KAG5B,KAAK,oBAAsBA,EAC3B,IAAInM,EAAcgJ,GAAkBliI,EAAMwgD,EAAUlB,CAAG,GAAKt/C,EAAK,UAAU,OAAO,EAAEA,EAAK,UAAU,UAAU,CAAC,EAE1G,GAAA,EAAEglI,GAAYD,EAAa,OAASvkF,EAAS,MAAQpjC,IAAS,KAAK,OACvD+nH,GAAAR,EAAW,WAAW3kI,EAAM,CACxC,SAAUolI,EACV,UAAWC,EACX,iBAAkB,GAClB,eAAgB,SAAU3rH,GAAK,CACtB,MAAA,CAACuE,EAAOvE,GAAM,CAAC,EAAGuE,EAAOvE,GAAM,EAAI,CAAC,CAAC,CAAA,CAC9C,CACD,EACD6lH,GAAgB,KAAK,0BAA0Bv/H,EAAMwgD,EAAU6kF,CAAkB,EAC7EjoH,IACEiiH,IACFA,EAAkBwB,GAAmBxB,EAAiBphH,EAAQuiC,EAAUpjC,EAAM4gH,CAAY,GAG5F//G,EAAS4iH,GAAmB5iH,EAAQ,KAAMuiC,EAAUpjC,EAAM4gH,CAAY,GAE7DgH,EAAA,KAAK,aAAa/mH,CAAM,EAC/BinH,EACQD,EAAA,KAAK,YAAYhnH,EAAQohH,CAAe,EAE3C4F,IACPP,EAAU,OAAOO,CAAO,EACxBA,EAAU,KAAK,SAAW,MAGvBH,GACH,KAAK,sBAAsBxkF,EAAaE,EAAUkjB,GAAqBw1D,CAAW,CAAC,EAErFwL,EAAU,YAAYb,GAAmB,KAAMrjF,EAAU,GAAMF,CAAW,CAAC,MACtE,CACD4kF,GAAe,CAACD,EAERA,EAAA,KAAK,YAAYhnH,EAAQohH,CAAe,EACzC4F,GAAW,CAACC,IAErBR,EAAU,OAAOO,CAAO,EACxBA,EAAU,KAAK,SAAW,MAGvBH,GACH,KAAK,sBAAsBxkF,EAAaE,EAAUkjB,GAAqBw1D,CAAW,CAAC,EAGjF,IAAAoM,EAAcZ,EAAU,YAAY,EACxC,GAAIY,EAAa,CACf,IAAIC,EAAc1B,GAAmB,KAAMrjF,EAAU,GAAOF,CAAW,EACvEq4E,GAAkB2M,EAAa,CAC7B,MAAOC,EAAY,OAClBjlF,CAAW,CAAA,MAEdokF,EAAU,YAAYb,GAAmB,KAAMrjF,EAAU,GAAMF,CAAW,CAAC,EAI/D6kF,GAAAR,EAAW,WAAW3kI,EAAM,CACxC,SAAUolI,EACV,UAAWC,EACX,iBAAkB,GAClB,eAAgB,SAAU3rH,GAAK,CACtB,MAAA,CAACuE,EAAOvE,GAAM,CAAC,EAAGuE,EAAOvE,GAAM,EAAI,CAAC,CAAC,CAAA,CAC9C,CACD,GAGG,CAACumH,GAAa,KAAK,iBAAkBZ,CAAe,GAAK,CAACY,GAAa,KAAK,QAAShiH,CAAM,KACzFshH,EACF,KAAK,mBAAmBv/H,EAAMq/H,EAAiB7+E,EAAUlB,EAAKliC,EAAMu9G,EAAaqD,CAAY,GAGzF5gH,IACEiiH,IACFA,EAAkBwB,GAAmBxB,EAAiBphH,EAAQuiC,EAAUpjC,EAAM4gH,CAAY,GAG5F//G,EAAS4iH,GAAmB5iH,EAAQ,KAAMuiC,EAAUpjC,EAAM4gH,CAAY,GAExEgH,EAAS,SAAS,CAChB,OAAA/mH,CAAA,CACD,EACDgnH,GAAWA,EAAQ,SAAS,CAC1B,OAAAhnH,EACA,gBAAAohH,CAAA,CACD,GAEL,CAEE,IAAApG,EAAgB34E,EAAY,SAAS,UAAU,EAC/CR,EAAQm5E,EAAc,IAAI,OAAO,EACjCl5E,EAAYk5E,EAAc,IAAI,WAAW,EACzCF,EAAmBE,EAAc,IAAI,UAAU,EASnD,GARA+L,EAAS,SAAS7kE,EAElBykE,EAAe,aAAa,EAAG,CAC7B,KAAM,OACN,OAAQ1L,EACR,SAAU,OAAA,CACZ,CAAE,EACuB52E,GAAA0iF,EAAU1kF,EAAa,WAAW,EACvD0kF,EAAS,MAAM,UAAY,GAAK1kF,EAAY,IAAI,CAAC,WAAY,YAAa,OAAO,CAAC,IAAM,SAAU,CACpG,IAAIklF,EAAoBR,EAAS,SAAS,UAAU,EAAE,MACtDQ,EAAkB,UAAY,CAACR,EAAS,MAAM,UAAY,CAAA,CAGlD/pF,GAAA+pF,CAAQ,EAAE,YAAc1kF,EAAY,YAC1B4B,GAAA8iF,EAAUllF,EAAOC,EAAWg5E,CAAgB,EAChE,IAAInuE,EAAS81E,GAAUpgF,EAAY,IAAI,QAAQ,CAAC,EAC5Cy9E,GAAiBz9E,EAAY,IAAI,gBAAgB,EAMrD,GALA0kF,EAAS,SAAS,CAChB,OAAAp6E,EACA,eAAAmzE,GACA,aAAAC,CAAA,CACD,EACGiH,EAAS,CACP,IAAAQ,GAAkBzlI,EAAK,mBAAmB,iBAAiB,EAC3D0lI,GAAkB,EACtBT,EAAQ,SAAS9kE,EAAgB0kE,EAAe,eAAgB,CAC9D,KAAM3L,EACN,QAAS,GACT,SAAU,QACV,MAAOl5H,EAAK,UAAU,OAAO,EAAE,KAAA,CAChC,CAAC,EACEylI,KACFC,GAAkBhF,GAAU+E,GAAgB,IAAI,QAAQ,CAAC,GAE3DR,EAAQ,SAAS,CACf,OAAAr6E,EACA,gBAAA86E,GACA,eAAA3H,GACA,aAAAC,CAAA,CACD,EACwB17E,GAAA2iF,EAAS3kF,EAAa,WAAW,EAEhDrF,GAAAgqF,CAAO,EAAE,YAAc3kF,EAAY,YACzB4B,GAAA+iF,EAASnlF,EAAOC,EAAWg5E,CAAgB,CAAA,CAEjE,IAAI4M,GAAkB,KAAK,iBACtB3lI,EAAA,kBAAkB,SAAU6I,GAAI,CAEnCA,KAAOA,GAAG,mBAAqB88H,GAAA,CAChC,EACD,KAAK,UAAU,mBAAqBA,GACpC,KAAK,MAAQ3lI,EAEb,KAAK,UAAYwgD,EACjB,KAAK,iBAAmB6+E,EACxB,KAAK,QAAUphH,EACf,KAAK,MAAQb,EACb,KAAK,aAAeu9G,EAChBr6E,EAAY,IAAI,kBAAkB,IAC/B,KAAA,cAAcA,EAAa0kF,CAAQ,EAC7BC,GAAA,KAAK,cAAc3kF,EAAa2kF,CAAO,EAEtD,EACAR,EAAS,UAAU,cAAgB,SAAUnkF,EAAaz3C,EAAI,CAClDoyC,GAAApyC,CAAE,EAAE,UAAY,CACxB,cAAe,SACf,iBAAkB,OAClB,eAAgBy3C,EAAY,eAC5B,YAAaA,EAAY,YACzB,WAAYA,EAAY,KACxB,WAAY,MACd,CACF,EACAmkF,EAAS,UAAU,UAAY,SAAUnkF,EAAangB,EAASmf,EAAKxf,EAAS,CACvE,IAAA9/B,EAAOsgD,EAAY,QAAQ,EAC3BS,EAAY4yC,GAAyB3zF,EAAM8/B,CAAO,EAEtD,GADA,KAAK,iBAAiB,UAAU,EAC5B,EAAEihB,aAAqB,QAAUA,GAAa,MAAQA,GAAa,EAAG,CACpE,IAAA9iC,EAASje,EAAK,UAAU,QAAQ,EAChC4mG,EAAS5mG,EAAK,iBAAiB+gD,CAAS,EAC5C,GAAI,CAAC6lD,EAAQ,CAEP,IAAA9iG,EAAIma,EAAO8iC,EAAY,CAAC,EACxBh9C,EAAIka,EAAO8iC,EAAY,EAAI,CAAC,EAM5B,GALA,MAAMj9C,CAAC,GAAK,MAAMC,CAAC,GAKnB,KAAK,qBAAuB,CAAC,KAAK,oBAAoB,QAAQD,EAAGC,CAAC,EACpE,OAEF,IAAI+jE,EAASxnB,EAAY,IAAI,QAAQ,GAAK,EACtCiwD,EAAIjwD,EAAY,IAAI,GAAG,GAAK,EACvBsmD,EAAA,IAAI3I,GAAUj+F,EAAM+gD,CAAS,EACtC6lD,EAAO,EAAI9iG,EACX8iG,EAAO,EAAI7iG,EACJ6iG,EAAA,KAAK9+B,EAAQyoC,CAAC,EAErB,IAAIq1B,EAAch/B,EAAO,cAAc,EAAE,eAAe,EACpDg/B,IACFA,EAAY,OAAS99D,EACrB89D,EAAY,EAAIr1B,EACJq1B,EAAA,GAAK,KAAK,UAAU,GAAK,GAEvCh/B,EAAO,OAAS,GACX5mG,EAAA,iBAAiB+gD,EAAW6lD,CAAM,EAEvCA,EAAO,oBAAoB,EAAI,EAC1B,KAAA,MAAM,IAAIA,CAAM,CAAA,CAEvBA,EAAO,UAAU,CAAA,MAGjBtT,GAAU,UAAU,UAAU,KAAK,KAAMhzC,EAAangB,EAASmf,EAAKxf,CAAO,CAE/E,EACA2kG,EAAS,UAAU,SAAW,SAAUnkF,EAAangB,EAASmf,EAAKxf,EAAS,CACtE,IAAA9/B,EAAOsgD,EAAY,QAAQ,EAC3BS,EAAY4yC,GAAyB3zF,EAAM8/B,CAAO,EAElD,GADJ,KAAK,iBAAiB,QAAQ,EAC1BihB,GAAa,MAAQA,GAAa,EAAG,CACnC,IAAA6lD,EAAS5mG,EAAK,iBAAiB+gD,CAAS,EACxC6lD,IACEA,EAAO,QACJ5mG,EAAA,iBAAiB+gD,EAAW,IAAI,EAChC,KAAA,MAAM,OAAO6lD,CAAM,GAExBA,EAAO,SAAS,EAEpB,MAKAtT,GAAU,UAAU,SAAS,KAAK,KAAMhzC,EAAangB,EAASmf,EAAKxf,CAAO,CAE9E,EACA2kG,EAAS,UAAU,iBAAmB,SAAUvzG,EAAS,CACvD,IAAI+zG,EAAU,KAAK,SACL3nF,GAAA,KAAK,UAAWpsB,CAAO,EAC1B+zG,GAAA3nF,GAAc2nF,EAAS/zG,CAAO,CAC3C,EACAuzG,EAAS,UAAU,aAAe,SAAUxmH,EAAQ,CAClD,IAAI+mH,EAAW,KAAK,UAEpB,OAAIA,GACG,KAAA,WAAW,OAAOA,CAAQ,EAEjCA,EAAW,IAAIlG,GAAW,CACxB,MAAO,CACL,OAAA7gH,CACF,EACA,uBAAwB,EACxB,GAAI,EAAA,CACL,EACI,KAAA,WAAW,IAAI+mH,CAAQ,EAC5B,KAAK,UAAYA,EACVA,CACT,EACAP,EAAS,UAAU,YAAc,SAAUxmH,EAAQohH,EAAiB,CAClE,IAAI4F,EAAU,KAAK,SAEnB,OAAIA,GACG,KAAA,WAAW,OAAOA,CAAO,EAEhCA,EAAU,IAAI7F,GAAU,CACtB,MAAO,CACL,OAAAnhH,EACA,gBAAAohH,CACF,EACA,uBAAwB,CAAA,CACzB,EACI,KAAA,WAAW,IAAI4F,CAAO,EAC3B,KAAK,SAAWA,EACTA,CACT,EACAR,EAAS,UAAU,0BAA4B,SAAUzkI,EAAMwgD,EAAUqlF,EAAW,CAC9E,IAAAC,EACAhB,EACAte,EAAWhmE,EAAS,YAAY,EAChCulF,EAAgBvf,EAAS,QACzBhmE,EAAS,OAAS,eACpBslF,EAAuBtf,EAAS,aAAa,EAC3Bse,EAAA,IACTtkF,EAAS,OAAS,UAC3BslF,EAAuBtf,EAAS,MAAQ,QACtBse,EAAA,IAEpB,IAAIxkF,EAActgD,EAAK,UACnBgmI,EAAiB1lF,EAAY,IAAI,mBAAmB,EACpDzc,EAAkBmiG,CAAc,IAClCA,EAAiBA,EAAe,IAAI,GAEtC,IAAIC,EAAc3lF,EAAY,IAAI,gBAAgB,GAAK,EACnD4lF,EAAmBriG,EAAkBoiG,CAAW,EAAIA,EAAY,IAAI,EAAIA,EACvEjmI,EAAA,kBAAkB,SAAU4mG,EAAQltF,EAAK,CAC5C,IAAI7Q,EAAK+9F,EACT,GAAI/9F,EAAI,CACN,IAAIuiD,EAAQ,CAACw7C,EAAO,EAAGA,EAAO,CAAC,EAC3BlxF,EAAQ,OACR0iB,EAAM,OACN6oB,EAAU,OACd,GAAI4kF,EACF,GAAIf,EAAiB,CACnB,IAAIqB,EAAYN,EACZ15F,EAAQqU,EAAS,aAAa4K,CAAK,EACnC06E,GACFpwH,EAAQywH,EAAU,WAClB/tG,EAAM+tG,EAAU,SAChBllF,EAAU,CAAC9U,EAAM,CAAC,EAAI,IAAM,KAAK,KAEjCz2B,EAAQywH,EAAU,GAClB/tG,EAAM+tG,EAAU,EAChBllF,EAAU9U,EAAM,CAAC,EACnB,KACK,CACL,IAAIi6F,EAAWP,EACXC,GACFpwH,EAAQ0wH,EAAS,EACXhuG,EAAAguG,EAAS,EAAIA,EAAS,MAC5BnlF,EAAU2lD,EAAO,IAETlxF,EAAA0wH,EAAS,EAAIA,EAAS,OAC9BhuG,EAAMguG,EAAS,EACfnlF,EAAU2lD,EAAO,EACnB,CAGJ,IAAIy/B,EAAQjuG,IAAQ1iB,EAAQ,GAAKurC,EAAUvrC,IAAU0iB,EAAM1iB,GACvDqwH,IACFM,EAAQ,EAAIA,GAEV,IAAA9wG,EAAQsO,EAAkBoiG,CAAW,EAAIA,EAAYvsH,CAAG,EAAIssH,EAAiBK,EAAQH,EACrFxnC,EAAa71F,EAAG,cAAc,EAC9B9M,EAAO2iG,EAAW,eAAe,EACrC71F,EAAG,KAAK,CACN,OAAQ,EACR,OAAQ,CAAA,CACT,EACDA,EAAG,UAAU,CACX,OAAQ,EACR,OAAQ,CAAA,EACP,CACD,SAAU,IACV,WAAY,GACZ,MAAA0sB,CAAA,CACD,EACGx5B,GACFA,EAAK,YAAY,CACf,MAAO,CACL,QAAS,CAAA,CACX,EACC,CACD,SAAU,IACV,MAAAw5B,CAAA,CACD,EAEHmpE,EAAW,sBAAwB,EAAA,CACrC,CACD,CACH,EACA+lC,EAAS,UAAU,sBAAwB,SAAUnkF,EAAaE,EAAUuY,EAAc,CACpF,IAAAurE,EAAgBhkF,EAAY,SAAS,UAAU,EAC/C,GAAAsjF,GAAqBtjF,CAAW,EAAG,CACjC,IAAAgmF,EAAShmF,EAAY,QAAQ,EAC7B0kF,EAAW,KAAK,UAEhB/mH,EAASqoH,EAAO,UAAU,QAAQ,EACtC,GAAI,CAACroH,EAAQ,CACX+mH,EAAS,kBAAkB,EAC3B,KAAK,UAAY,KACjB,MAAA,CAEF,IAAIZ,EAAW,KAAK,UACfA,IACHA,EAAW,KAAK,UAAY,IAAIltC,GAAa,CAC3C,GAAI,GAAA,CACL,EACDktC,EAAS,WAAa,GACbY,EAAA,eAAe,KAAK,SAAS,EACtCA,EAAS,sBAAwB,IAG/B,IAAAjkF,EAAYwiF,GAAoBtlH,CAAM,EACtC8iC,GAAa,IACfoV,GAAc6uE,EAAU/tE,GAAqB3W,EAAa,UAAU,EAAG,CACrE,aAAAyY,EACA,aAAczY,EACd,eAAgBS,EAChB,YAAa,SAAUA,EAAWn1C,EAAK+pD,EAAmB,CACjD,OAAAA,GAAqB,KAAOuiE,GAA4BoO,EAAQ3wE,CAAiB,EAAIoiE,GAAgBuO,EAAQvlF,CAAS,CAC/H,EACA,iBAAkB,EAAA,EACjBsjF,GAA0BC,EAAe9jF,CAAQ,CAAC,EACrDwkF,EAAS,WAAW,SAAW,KACjC,MACS,KAAK,YACd,KAAK,UAAU,kBAAkB,EACjC,KAAK,UAAY,KAErB,EACAP,EAAS,UAAU,kBAAoB,SAAU5lH,EAASslH,EAAUnkI,EAAMumI,EAAiBC,EAAgBlC,EAAe9jF,EAAU,CAClI,IAAI4jF,EAAW,KAAK,UAChBY,EAAW,KAAK,UACpB,GAAIZ,EAAU,CAGRvlH,EAAU,GAAK0nH,EAAgB,WAAa,OAC9CA,EAAgB,UAAYnC,EAAS,EACrCmC,EAAgB,UAAYnC,EAAS,GAEnC,IAAAnmH,EAASje,EAAK,UAAU,QAAQ,EAChCsgD,EAActgD,EAAK,UACnBg+H,EAAe19E,EAAY,IAAI,cAAc,EAC7C9mB,EAAY8qG,EAAc,IAAI,WAAW,EACzC3/H,EAAW2/H,EAAc,IAAI,UAAU,GAAK,EAC5C9d,EAAWhmE,EAAS,YAAY,EAChCg/E,EAAehZ,EAAS,aAAa,EACrC+d,EAAiB/d,EAAS,QAC1Bqf,EAAY1B,EAAS,MACrBpF,EAAOwF,EAAiB/E,EAAeqG,EAAU,EAAIA,EAAU,EAAIA,EAAU,OAASrG,EAAeqG,EAAU,EAAIA,EAAU,MAAQA,EAAU,EAC/IY,GAAajH,EAAe76H,EAAW,IAAM4/H,EAAiB,GAAK,GACnEmC,GAAalH,EAAe,EAAI,CAAC76H,IAAa4/H,EAAiB,GAAK,GACpE1uF,EAAM2pF,EAAe,IAAM,IAC3BmH,EAAiBlD,GAAcxlH,EAAQ8gH,EAAMlpF,CAAG,EAChDm9B,EAAU2zD,EAAe,MACzBj4F,EAAOskC,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EAC7B3zE,EAAQ,OACZ,GAAIqvC,GAAQ,EAAG,CAET,GAAAA,EAAO,GAAK,CAACsvF,EAAc,CAC7B,IAAI4C,EAAK4C,GAAgBvlH,EAAQ+0D,EAAQ,CAAC,CAAC,EAC3CoxD,EAAS,KAAK,CACZ,EAAGxD,EAAG,CAAC,EAAI6F,EACX,EAAG7F,EAAG,CAAC,EAAI8F,CAAA,CACZ,EACDF,IAAmBnnI,EAAQihD,EAAY,YAAY0yB,EAAQ,CAAC,CAAC,EAAA,KACxD,CACL,IAAI4tD,EAAKoE,EAAS,WAAWjG,EAAMlpF,CAAG,EACtC+qF,GAAMwD,EAAS,KAAK,CAClB,EAAGxD,EAAG,CAAC,EAAI6F,EACX,EAAG7F,EAAG,CAAC,EAAI8F,CAAA,CACZ,EACD,IAAIrgH,EAAai6B,EAAY,YAAY0yB,EAAQ,CAAC,CAAC,EAC/C4zD,EAAWtmF,EAAY,YAAY0yB,EAAQ,CAAC,CAAC,EAC9BwzD,IAAAnnI,EAAQwnI,GAA+B7mI,EAAMw5B,EAAWnT,EAAYugH,EAAUD,EAAe,CAAC,EAAA,CAEnGJ,EAAA,eAAiBvzD,EAAQ,CAAC,CAAA,KACrC,CAGD,IAAAt5D,EAAMmF,IAAY,GAAK0nH,EAAgB,eAAiB,EAAIvzD,EAAQ,CAAC,EAAI,EACzE4tD,EAAK4C,GAAgBvlH,EAAQvE,CAAG,EACjB8sH,IAAAnnI,EAAQihD,EAAY,YAAY5mC,CAAG,GACtD0qH,EAAS,KAAK,CACZ,EAAGxD,EAAG,CAAC,EAAI6F,EACX,EAAG7F,EAAG,CAAC,EAAI8F,CAAA,CACZ,CAAA,CAEH,GAAIF,EAAgB,CACd,IAAA3/D,EAAQ7P,GAAWotE,CAAQ,EAC3B,OAAOv9D,EAAM,cAAiB,YAChCA,EAAM,aAAaxnE,CAAK,CAC1B,CACF,CAEJ,EAKAolI,EAAS,UAAU,mBAAqB,SAAUzkI,EAAMq/H,EAAiB7+E,EAAUlB,EAAKliC,EAAMu9G,EAAaqD,EAAc,CACvH,IAAIgH,EAAW,KAAK,UAChBC,EAAU,KAAK,SACf3kF,EAActgD,EAAK,UACnB0uC,EAAOitF,GAAkB,KAAK,MAAO37H,EAAM,KAAK,iBAAkBq/H,EAAiB,KAAK,UAAW7+E,EAAU,KAAK,YAAyB,EAC3IS,EAAUvS,EAAK,QACfo4F,EAAmBp4F,EAAK,iBACxB7xB,EAAO6xB,EAAK,KACZq4F,EAAgBr4F,EAAK,cAWrB,GAVAtxB,IAEF0pH,EAAmBjG,GAAmBnyF,EAAK,iBAAkBA,EAAK,QAAS8R,EAAUpjC,EAAM4gH,CAAY,EACvG/8E,EAAU4/E,GAAmBnyF,EAAK,QAAS,KAAM8R,EAAUpjC,EAAM4gH,CAAY,EAC7E+I,EAAgBlG,GAAmBnyF,EAAK,cAAeA,EAAK,KAAM8R,EAAUpjC,EAAM4gH,CAAY,EAC9FnhH,EAAOgkH,GAAmBnyF,EAAK,KAAM,KAAM8R,EAAUpjC,EAAM4gH,CAAY,GAKrEuC,GAAgBt/E,EAASpkC,CAAI,EAAI,KAAQooH,GAAW1E,GAAgBuG,EAAkBC,CAAa,EAAI,IAAM,CAC/G/B,EAAS,cAAc,EACvBA,EAAS,SAAS,CAChB,OAAQnoH,CAAA,CACT,EACGooH,IACFA,EAAQ,cAAc,EACtBA,EAAQ,SAAS,CACf,OAAQpoH,EACR,gBAAiBkqH,CAAA,CAClB,GAEH,MAAA,CAEO/B,EAAA,MAAM,SAAWt2F,EAAK,QAC/Bs2F,EAAS,MAAM,OAAS/jF,EACxB,IAAI1iD,EAAS,CACX,MAAO,CACL,OAAQse,CAAA,CAEZ,EAGI6xB,EAAK,UAAYuS,IACZ1iD,EAAA,MAAM,SAAWmwC,EAAK,MAG/Bs2F,EAAS,cAAc,EACftM,GAAYsM,EAAUzmI,EAAQ+hD,CAAW,EAC7C2kF,IACFA,EAAQ,SAAS,CAEf,OAAQhkF,EACR,gBAAiB6lF,CAAA,CAClB,EACD7B,EAAQ,cAAc,EACtBvM,GAAoBuM,EAAS,CAC3B,MAAO,CACL,gBAAiB8B,CAAA,GAElBzmF,CAAW,EAEV0kF,EAAS,MAAM,SAAWC,EAAQ,MAAM,SAClCA,EAAA,MAAM,OAASD,EAAS,MAAM,SAK1C,QAFIgC,EAAkB,CAAC,EACnBC,EAAav4F,EAAK,OACblzC,EAAI,EAAGA,EAAIyrI,EAAW,OAAQzrI,IAAK,CACtC,IAAA40C,EAAM62F,EAAWzrI,CAAC,EAAE,IACxB,GAAI40C,IAAQ,IAAK,CACf,IAAIvnC,EAAK7I,EAAK,iBAAiBinI,EAAWzrI,CAAC,EAAE,IAAI,EAC7CqN,GACFm+H,EAAgB,KAAK,CACnB,GAAAn+H,EACA,MAAOrN,CAAA,CACR,CACH,CACF,CAEEwpI,EAAS,WAAaA,EAAS,UAAU,QAC3CA,EAAS,UAAU,CAAC,EAAE,OAAO,UAAY,CACvCC,GAAWA,EAAQ,WAAW,EAE9B,QADIhnH,EAAS+mH,EAAS,MAAM,SACnBxpI,EAAI,EAAGA,EAAIwrI,EAAgB,OAAQxrI,IAAK,CAC3CqN,IAAAA,EAAKm+H,EAAgBxrI,CAAC,EAAE,GACxByH,EAAS+jI,EAAgBxrI,CAAC,EAAE,MAAQ,EACxCqN,EAAG,EAAIoV,EAAOhb,CAAM,EACpB4F,EAAG,EAAIoV,EAAOhb,EAAS,CAAC,EACxB4F,EAAG,WAAW,CAAA,CAChB,CACD,CAEL,EACA47H,EAAS,UAAU,OAAS,SAAUtkG,EAAS,CAC7C,IAAIikC,EAAQ,KAAK,MACb41D,EAAU,KAAK,MACnB,KAAK,WAAW,UAAU,EACrB,KAAA,YAAY,OAAO,EAAI,EAE5BA,GAAWA,EAAQ,kBAAkB,SAAUnxH,EAAI6Q,EAAK,CAClD7Q,EAAG,SACLu7D,EAAM,OAAOv7D,CAAE,EACPmxH,EAAA,iBAAiBtgH,EAAK,IAAI,EACpC,CACD,EACD,KAAK,UAAY,KAAK,SAAW,KAAK,UAAY,KAAK,QAAU,KAAK,iBAAmB,KAAK,UAAY,KAAK,MAAQ,IACzH,EACA+qH,EAAS,KAAO,OACTA,CAAA,EACPnxC,EAAS,EC9iCI,SAAS4zC,GAAanvD,EAAYovD,EAAwB,CACvE,MAAO,CACL,WAAYpvD,EACZ,KAAMgb,GAAqB,EAC3B,MAAO,SAAUzyC,EAAa,CAC5B,IAAItgD,EAAOsgD,EAAY,QAAS,EAC5BE,EAAWF,EAAY,iBAG3B,GAFsBA,EAAY,gBAE9B,EAACE,EAGL,KAAIq4B,EAAOt9E,EAAIilD,EAAS,WAAY,SAAU3K,EAAK,CACjD,OAAO71C,EAAK,aAAa61C,CAAG,CACpC,CAAO,EAAE,MAAM,EAAG,CAAC,EACT0uC,EAAS1L,EAAK,OACdwiD,EAAiBr7H,EAAK,mBAAmB,sBAAsB,EAC/DwgH,GAAmBxgH,EAAM64E,EAAK,CAAC,CAAC,IAClCA,EAAK,CAAC,EAAIwiD,GAER7a,GAAmBxgH,EAAM64E,EAAK,CAAC,CAAC,IAClCA,EAAK,CAAC,EAAIwiD,GAEZ,IAAIv9E,EAAQ99C,EAAK,SAAU,EACvBonI,EAAUpnI,EAAK,kBAAkB64E,EAAK,CAAC,CAAC,EACxCwuD,EAAUrnI,EAAK,kBAAkB64E,EAAK,CAAC,CAAC,EAC5C,OAAO0L,GAAU,CACf,SAAU,SAAUtjE,EAAQjhB,EAAM,CAKhC,QAJI6wC,EAAW5vB,EAAO,IAAMA,EAAO,MAC/BhD,EAA0B4nG,GAAmBh1E,EAAW0zC,CAAM,EAC9D+iD,EAAQ,CAAE,EACVC,EAAS,CAAE,EACN/rI,EAAIylB,EAAO,MAAOhe,EAAS,EAAGzH,EAAIylB,EAAO,IAAKzlB,IAAK,CAC1D,IAAI4vD,EAAQ,OACZ,GAAIm5B,IAAW,EAAG,CAChB,IAAIzgF,EAAIg6C,EAAM,IAAIspF,EAAS5rI,CAAC,EAE5B4vD,EAAQ5K,EAAS,YAAY18C,EAAG,KAAMyjI,CAAM,CAC1D,MACcD,EAAM,CAAC,EAAIxpF,EAAM,IAAIspF,EAAS5rI,CAAC,EAC/B8rI,EAAM,CAAC,EAAIxpF,EAAM,IAAIupF,EAAS7rI,CAAC,EAE/B4vD,EAAQ5K,EAAS,YAAY8mF,EAAO,KAAMC,CAAM,EAGhDtpH,EAAOhb,GAAQ,EAAImoD,EAAM,CAAC,EAC1BntC,EAAOhb,GAAQ,EAAImoD,EAAM,CAAC,CAIxC,CAC2BprD,EAAK,UAAU,SAAUie,CAAM,CAC1D,CACO,EACP,CACG,CACH,CC3DA,IAAIupH,GAAW,CACb,QAAS,SAAU5gH,EAAO,CAGxB,QAFInf,EAAM,EACNu5C,EAAQ,EACH,EAAI,EAAG,EAAIp6B,EAAM,OAAQ,IAC3B,MAAMA,EAAM,CAAC,CAAC,IACjBnf,GAAOmf,EAAM,CAAC,EACdo6B,KAIJ,OAAOA,IAAU,EAAI,IAAMv5C,EAAMu5C,CAClC,EACD,IAAK,SAAUp6B,EAAO,CAEpB,QADInf,EAAM,EACDjM,EAAI,EAAGA,EAAIorB,EAAM,OAAQprB,IAEhCiM,GAAOmf,EAAMprB,CAAC,GAAK,EAErB,OAAOiM,CACR,EACD,IAAK,SAAUmf,EAAO,CAEpB,QADI1hB,EAAM,KACD1J,EAAI,EAAGA,EAAIorB,EAAM,OAAQprB,IAChCorB,EAAMprB,CAAC,EAAI0J,IAAQA,EAAM0hB,EAAMprB,CAAC,GAGlC,OAAO,SAAS0J,CAAG,EAAIA,EAAM,GAC9B,EACD,IAAK,SAAU0hB,EAAO,CAEpB,QADI3hB,EAAM,IACDzJ,EAAI,EAAGA,EAAIorB,EAAM,OAAQprB,IAChCorB,EAAMprB,CAAC,EAAIyJ,IAAQA,EAAM2hB,EAAMprB,CAAC,GAGlC,OAAO,SAASyJ,CAAG,EAAIA,EAAM,GAC9B,EAGD,QAAS,SAAU2hB,EAAO,CACxB,OAAOA,EAAM,CAAC,CAClB,CACA,EACI6gH,GAAe,SAAU7gH,EAAO,CAClC,OAAO,KAAK,MAAMA,EAAM,OAAS,CAAC,CACpC,EACe,SAAS8gH,GAAW3vD,EAAY,CAC7C,MAAO,CACL,WAAYA,EAGZ,MAAO,SAAUz3B,EAAangB,EAASmf,EAAK,CAC1C,IAAIt/C,EAAOsgD,EAAY,QAAS,EAC5BqnF,EAAWrnF,EAAY,IAAI,UAAU,EACrCE,EAAWF,EAAY,iBACvBU,EAAQhhD,EAAK,MAAO,EAExB,GAAIghD,EAAQ,IAAMR,EAAS,OAAS,eAAiBmnF,EAAU,CAC7D,IAAInhB,EAAWhmE,EAAS,YAAa,EACjCo6E,EAAYp6E,EAAS,aAAagmE,CAAQ,EAC1C94D,EAAS84D,EAAS,UAAW,EAC7Bv6F,EAAMqzB,EAAI,oBAAqB,EAE/B5jD,EAAO,KAAK,IAAIgyD,EAAO,CAAC,EAAIA,EAAO,CAAC,CAAC,GAAKzhC,GAAO,GACjDu6D,EAAO,KAAK,MAAMxlC,EAAQtlD,CAAI,EAClC,GAAI,SAAS8qF,CAAI,GAAKA,EAAO,EAAG,CAC1BmhD,IAAa,OACfrnF,EAAY,QAAQtgD,EAAK,eAAeA,EAAK,aAAa46H,EAAU,GAAG,EAAG,EAAIp0C,CAAI,CAAC,EAC1EmhD,IAAa,UACtBrnF,EAAY,QAAQtgD,EAAK,iBAAiBA,EAAK,aAAa46H,EAAU,GAAG,EAAG,EAAIp0C,CAAI,CAAC,EAEvF,IAAIohD,EAAU,OACV/mI,EAAS8mI,CAAQ,EACnBC,EAAUJ,GAASG,CAAQ,EAClBhnI,EAAWgnI,CAAQ,IAC5BC,EAAUD,GAERC,GAEFtnF,EAAY,QAAQtgD,EAAK,WAAWA,EAAK,aAAa46H,EAAU,GAAG,EAAG,EAAIp0C,EAAMohD,EAASH,EAAY,CAAC,CAElH,CACA,CACA,CACG,CACH,CCjFO,SAASI,GAAQC,EAAW,CACjCA,EAAU,kBAAkBrD,EAAQ,EACpCqD,EAAU,oBAAoBC,EAAU,EACxCD,EAAU,eAAeE,GAAa,MAAY,CAAC,EACnDF,EAAU,eAAe,CACvB,WAAY,OACZ,MAAO,SAAUxnF,EAAa,CAC5B,IAAItgD,EAAOsgD,EAAY,QAAS,EAE5B2nF,EAAY3nF,EAAY,SAAS,WAAW,EAAE,aAAc,EAC5D2nF,GAAa,CAACA,EAAU,SAG1BA,EAAU,OAASjoI,EAAK,UAAU,OAAO,EAAE,MAE7CA,EAAK,UAAU,kBAAmBioI,CAAS,CACjD,CACA,CAAG,EAEDH,EAAU,kBAAkBA,EAAU,SAAS,UAAU,UAAWJ,GAAW,MAAM,CAAC,CACxF,CCvBA,IAAIQ,GAAyB,SAAUp2H,EAAQ,CAC7CC,EAAUm2H,EAAWp2H,CAAM,EAC3B,SAASo2H,GAAY,CACnB,OAAOp2H,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAAo2H,EAAU,KAAO,OACjBA,EAAU,aAAe,CAAC,QAAS,OAAO,EAC1CA,EAAU,WAAa,MACvBA,EAAU,cAAgB,CACxB,KAAM,GAEN,EAAG,EACH,KAAM,MACN,IAAK,GACL,MAAO,MACP,OAAQ,GAER,aAAc,GAGd,gBAAiB,gBACjB,YAAa,EACb,YAAa,MACd,EACMA,CACT,EAAEphE,EAAc,ECtBZqhE,GAAkC,SAAUr2H,EAAQ,CACtDC,EAAUo2H,EAAoBr2H,CAAM,EACpC,SAASq2H,GAAqB,CAC5B,OAAOr2H,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAAq2H,EAAmB,UAAU,iBAAmB,UAAY,CAC1D,OAAO,KAAK,uBAAuB,OAAQlnG,EAAgB,EAAE,OAAO,CAAC,CACtE,EACDknG,EAAmB,KAAO,kBACnBA,CACT,EAAErhE,EAAc,EAEhBgrB,GAAaq2C,GAAoBpW,EAAoB,EChBrD,IAAIrqD,GAAgB,CAClB,KAAM,GAEN,EAAG,EAEH,QAAS,GAET,KAAM,GAEN,aAAc,MAEd,WAAY,KACZ,aAAc,CACZ,SAAU,KACV,SAAU,MACV,YAAa,GACd,EAED,cAAe,CAAE,EAEjB,QAAS,GAET,OAAQ,GAER,aAAc,GACd,QAAS,CACP,KAAM,EACP,EACD,YAAa,CAAE,EACf,SAAU,CACR,KAAM,GACN,OAAQ,GACR,gBAAiB,KACjB,UAAW,CACT,MAAO,UACP,MAAO,EACP,KAAM,OACP,EAED,OAAQ,CAAC,OAAQ,MAAM,EACvB,WAAY,CAAC,GAAI,EAAE,CACpB,EACD,SAAU,CACR,KAAM,GAEN,OAAQ,GAER,OAAQ,EACR,UAAW,CACT,MAAO,CACb,CACG,EACD,UAAW,CACT,KAAM,GAEN,OAAQ,GACR,OAAQ,EAER,aAAc,KAEd,aAAc,KACd,OAAQ,EAER,SAAU,EACX,EACD,UAAW,CACT,KAAM,GACN,YAAa,GACb,YAAa,GACb,UAAW,CACT,MAAO,CAAC,SAAS,EACjB,MAAO,EACP,KAAM,OACZ,CACG,EACD,UAAW,CACT,KAAM,GACN,UAAW,CACT,MAAO,CAAC,wBAAyB,uBAAuB,CAC9D,CACA,CACA,EACIw7D,GAAevmE,EAAa,CAE9B,YAAa,GAEb,cAAe,KAIf,UAAW,CACT,KAAM,EACP,EACD,SAAU,CAER,eAAgB,GAChB,SAAU,MACX,EACD,UAAW,CACT,SAAU,MACd,CACA,EAAG+K,EAAa,EACZkzD,GAAYj+D,EAAa,CAC3B,YAAa,CAAC,EAAG,CAAC,EAClB,SAAU,CAER,KAAM,MACP,EACD,SAAU,CAER,KAAM,MACP,EAGD,YAAa,EACb,UAAW,CAET,KAAM,GAEN,YAAa,EAEb,OAAQ,EAER,UAAW,CAEf,CACG,EACD,eAAgB,CACd,KAAM,GACN,UAAW,CACT,MAAO,UACP,MAAO,CACb,CACA,CACA,EAAG+K,EAAa,EACZ0gE,GAAWzrE,EAAa,CAC1B,YAAa,EACb,UAAW,CAET,aAAc,GACd,aAAc,GACd,KAAM,CACJ,QAAS,CACP,WAAY,MACpB,CACA,CACG,EACD,UAAW,CACT,KAAM,EACV,CACA,EAAGi+D,EAAS,EACRyN,GAAUloE,EAAgB,CAC5B,QAAS,EACX,EAAGy6D,EAAS,EACZ,MAAe0N,GAAA,CACb,SAAUpF,GACV,MAAOtI,GACP,KAAMwN,GACN,IAAKC,EACP,EChKO,IAAIE,GAAa,CACtB,MAAO,EACP,SAAU,EACV,KAAM,EACN,IAAK,CACP,ECKe,SAASC,GAAiBV,EAAW1xD,EAAUqyD,EAAoBC,EAAoB,CACpGzoI,EAAKsoI,GAAY,SAAUvkI,EAAGwzG,EAAU,CACtC,IAAI9vC,EAAgBppE,EAAMA,EAAM,GAAIgqI,GAAY9wB,CAAQ,EAAG,EAAI,EAAGkxB,EAAoB,EAAI,EACtFC,EAAyB,SAAU72H,EAAQ,CAC7CC,EAAU42H,EAAW72H,CAAM,EAC3B,SAAS62H,GAAY,CACnB,IAAI32H,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOokE,EAAW,QAAUohC,EAC3BxlG,CACf,CACM,OAAA22H,EAAU,UAAU,qBAAuB,SAAUtuE,EAAQl6B,EAAS,CACpE,IAAIylC,EAAaF,GAAgB,IAAI,EACjCuB,EAAsBrB,EAAae,GAAgBtM,CAAM,EAAI,CAAE,EAC/D8M,EAAahnC,EAAQ,SAAU,EACnC7hC,EAAM+7D,EAAQ8M,EAAW,IAAIqwC,EAAW,MAAM,CAAC,EAC/Cl5G,EAAM+7D,EAAQ,KAAK,kBAAkB,EACrCA,EAAO,KAAOuuE,GAAYvuE,CAAM,EAC5BuL,GACFC,GAAiBxL,EAAQ4M,EAAqBrB,CAAU,CAE3D,EACD+iE,EAAU,UAAU,cAAgB,UAAY,CAC9C,IAAIE,EAAa,KAAK,OAClBA,EAAW,OAAS,aACtB,KAAK,cAAgBvmB,GAAY,kBAAkB,IAAI,EAE1D,EAKDqmB,EAAU,UAAU,cAAgB,SAAU5sD,EAAS,CACrD,IAAI1hB,EAAS,KAAK,OAGlB,GAAIA,EAAO,OAAS,WAClB,OAAI0hB,EACK1hB,EAAO,KAET,KAAK,cAAc,UAE7B,EACDsuE,EAAU,UAAU,eAAiB,UAAY,CAC/C,OAAO,KAAK,aACb,EACDA,EAAU,KAAOvyD,EAAW,QAAUohC,EACtCmxB,EAAU,cAAgBjhE,EACnBihE,CACR,EAACF,CAAkB,EACpBX,EAAU,uBAAuBa,CAAS,CAC9C,CAAG,EACDb,EAAU,yBAAyB1xD,EAAW,OAAQwyD,EAAW,CACnE,CACA,SAASA,GAAYvuE,EAAQ,CAE3B,OAAOA,EAAO,OAASA,EAAO,KAAO,WAAa,QACpD,CCjEA,IAAIyuE,GAAyB,UAAY,CACvC,SAASA,EAAUn9H,EAAM,CACvB,KAAK,KAAO,YACZ,KAAK,SAAW,CAAE,EAClB,KAAK,MAAQ,CAAE,EACf,KAAK,KAAOA,GAAQ,EACxB,CACE,OAAAm9H,EAAU,UAAU,QAAU,SAAUjzF,EAAK,CAC3C,OAAO,KAAK,MAAMA,CAAG,CACtB,EACDizF,EAAU,UAAU,QAAU,UAAY,CACxC,OAAOl/G,EAAW,KAAK,SAAU,SAAUisB,EAAK,CAC9C,OAAO,KAAK,MAAMA,CAAG,CACtB,EAAE,IAAI,CACR,EACDizF,EAAU,UAAU,eAAiB,SAAU1Z,EAAW,CACxD,OAAAA,EAAYA,EAAU,YAAa,EAC5B6D,GAAc,KAAK,QAAS,EAAE,SAAUhlE,EAAM,CACnD,OAAOA,EAAK,MAAM,OAASmhE,CACjC,CAAK,CACF,EACD0Z,EAAU,UAAU,QAAU,SAAU76E,EAAM,CAC5C,IAAIpY,EAAMoY,EAAK,IACf,KAAK,MAAMpY,CAAG,EAAIoY,EAClB,KAAK,SAAS,KAAKpY,CAAG,CACvB,EACMizF,CACT,EAAG,ECvBQC,GAAwB,CAAC,IAAK,GAAG,EAC5C,SAASC,GAA4BzkI,EAAO,CAC1C,OAAOA,EAAM,OAAS,YAAcA,EAAM,OAAS,MACrD,CACA,IAAI0kI,GAA2B,SAAUn3H,EAAQ,CAC/CC,EAAUk3H,EAAan3H,CAAM,EAC7B,SAASm3H,GAAc,CACrB,IAAIj3H,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO,cACbA,EAAM,WAAa+2H,GACZ/2H,CACX,CAKE,OAAAi3H,EAAY,UAAU,oBAAsB,UAAY,CACtD,KAAK,WAAa,KAAK,cAAgB,KACvC,IAAIC,EAAa,KAAK,QAAQ,GAAG,EAAE,MAC/BC,EAAa,KAAK,QAAQ,GAAG,EAAE,MACnC,GAAI,GAACH,GAA4BE,CAAU,GAAK,CAACF,GAA4BG,CAAU,GAGvF,KAAIC,EAAeF,EAAW,UAAW,EACrCG,EAAeF,EAAW,UAAW,EACrCzzH,EAAQ,KAAK,YAAY,CAAC0zH,EAAa,CAAC,EAAGC,EAAa,CAAC,CAAC,CAAC,EAC3DjxG,EAAM,KAAK,YAAY,CAACgxG,EAAa,CAAC,EAAGC,EAAa,CAAC,CAAC,CAAC,EACzDC,EAAaF,EAAa,CAAC,EAAIA,EAAa,CAAC,EAC7CG,EAAaF,EAAa,CAAC,EAAIA,EAAa,CAAC,EACjD,GAAI,GAACC,GAAc,CAACC,GAIpB,KAAIC,GAAUpxG,EAAI,CAAC,EAAI1iB,EAAM,CAAC,GAAK4zH,EAC/BG,GAAUrxG,EAAI,CAAC,EAAI1iB,EAAM,CAAC,GAAK6zH,EAC/BG,EAAah0H,EAAM,CAAC,EAAI0zH,EAAa,CAAC,EAAII,EAC1CG,EAAaj0H,EAAM,CAAC,EAAI2zH,EAAa,CAAC,EAAII,EAC1CzkI,EAAI,KAAK,WAAa,CAACwkI,EAAQ,EAAG,EAAGC,EAAQC,EAAYC,CAAU,EACvE,KAAK,cAAgBl7H,GAAO,CAAA,EAAIzJ,CAAC,GAClC,EAIDikI,EAAY,UAAU,YAAc,UAAY,CAC9C,OAAO,KAAK,eAAe,SAAS,EAAE,CAAC,GAAK,KAAK,eAAe,MAAM,EAAE,CAAC,GAAK,KAAK,QAAQ,GAAG,CAC/F,EACDA,EAAY,UAAU,aAAe,SAAU79E,EAAO,CACpD,IAAIw+E,EAAQ,KAAK,QAAQ,GAAG,EACxBC,EAAQ,KAAK,QAAQ,GAAG,EAC5B,OAAOD,EAAM,QAAQA,EAAM,aAAax+E,EAAM,CAAC,CAAC,CAAC,GAAKy+E,EAAM,QAAQA,EAAM,aAAaz+E,EAAM,CAAC,CAAC,CAAC,CACjG,EACD69E,EAAY,UAAU,YAAc,SAAUjpI,EAAM,CAClD,OAAO,KAAK,QAAQ,GAAG,EAAE,YAAYA,EAAK,CAAC,CAAC,GAAK,KAAK,QAAQ,GAAG,EAAE,YAAYA,EAAK,CAAC,CAAC,CACvF,EACDipI,EAAY,UAAU,YAAc,SAAUa,EAAOC,EAAO,CAC1D,IAAIC,EAAY,KAAK,YAAYF,CAAK,EAClCG,EAAY,KAAK,YAAYF,CAAK,EAClCjjD,EAAO,KAAK,QAAS,EACrBojD,EAAO,IAAIt6H,GAAao6H,EAAU,CAAC,EAAGA,EAAU,CAAC,EAAGC,EAAU,CAAC,EAAID,EAAU,CAAC,EAAGC,EAAU,CAAC,EAAID,EAAU,CAAC,CAAC,EAChH,OAAOljD,EAAK,UAAUojD,CAAI,CAC3B,EACDjB,EAAY,UAAU,YAAc,SAAUjpI,EAAMg5B,EAAO90B,EAAK,CAC9DA,EAAMA,GAAO,CAAE,EACf,IAAIimI,EAAOnqI,EAAK,CAAC,EACboqI,EAAOpqI,EAAK,CAAC,EAEjB,GAAI,KAAK,YAENmqI,GAAQ,MAAQ,SAASA,CAAI,GAAKC,GAAQ,MAAQ,SAASA,CAAI,EAChE,OAAOrlI,GAAeb,EAAKlE,EAAM,KAAK,UAAU,EAElD,IAAIqqI,EAAQ,KAAK,QAAQ,GAAG,EACxBC,EAAQ,KAAK,QAAQ,GAAG,EAC5B,OAAApmI,EAAI,CAAC,EAAImmI,EAAM,cAAcA,EAAM,YAAYF,EAAMnxG,CAAK,CAAC,EAC3D90B,EAAI,CAAC,EAAIomI,EAAM,cAAcA,EAAM,YAAYF,EAAMpxG,CAAK,CAAC,EACpD90B,CACR,EACD+kI,EAAY,UAAU,UAAY,SAAUjpI,EAAMkE,EAAK,CACrD,IAAIqmI,EAAS,KAAK,QAAQ,GAAG,EAAE,MAC3BC,EAAS,KAAK,QAAQ,GAAG,EAAE,MAC3BC,EAAcF,EAAO,UAAW,EAChCG,EAAcF,EAAO,UAAW,EAChC1mI,EAAIymI,EAAO,MAAMvqI,EAAK,CAAC,CAAC,EACxB+D,EAAIymI,EAAO,MAAMxqI,EAAK,CAAC,CAAC,EAC5B,OAAAkE,EAAMA,GAAO,CAAE,EACfA,EAAI,CAAC,EAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAIumI,EAAY,CAAC,EAAGA,EAAY,CAAC,CAAC,EAAG3mI,CAAC,EAAG,KAAK,IAAI2mI,EAAY,CAAC,EAAGA,EAAY,CAAC,CAAC,CAAC,EACjHvmI,EAAI,CAAC,EAAI,KAAK,IAAI,KAAK,IAAI,KAAK,IAAIwmI,EAAY,CAAC,EAAGA,EAAY,CAAC,CAAC,EAAG3mI,CAAC,EAAG,KAAK,IAAI2mI,EAAY,CAAC,EAAGA,EAAY,CAAC,CAAC,CAAC,EAC1GxmI,CACR,EACD+kI,EAAY,UAAU,YAAc,SAAU79E,EAAOpyB,EAAO,CAC1D,IAAI90B,EAAM,CAAE,EACZ,GAAI,KAAK,cACP,OAAOa,GAAeb,EAAKknD,EAAO,KAAK,aAAa,EAEtD,IAAIi/E,EAAQ,KAAK,QAAQ,GAAG,EACxBC,EAAQ,KAAK,QAAQ,GAAG,EAC5B,OAAApmI,EAAI,CAAC,EAAImmI,EAAM,YAAYA,EAAM,aAAaj/E,EAAM,CAAC,CAAC,EAAGpyB,CAAK,EAC9D90B,EAAI,CAAC,EAAIomI,EAAM,YAAYA,EAAM,aAAal/E,EAAM,CAAC,CAAC,EAAGpyB,CAAK,EACvD90B,CACR,EACD+kI,EAAY,UAAU,aAAe,SAAUh7E,EAAM,CACnD,OAAO,KAAK,QAAQA,EAAK,MAAQ,IAAM,IAAM,GAAG,CACjD,EAKDg7E,EAAY,UAAU,QAAU,SAAUz8F,EAAW,CACnDA,EAAYA,GAAa,EACzB,IAAIm+F,EAAU,KAAK,QAAQ,GAAG,EAAE,gBAAiB,EAC7CC,EAAU,KAAK,QAAQ,GAAG,EAAE,gBAAiB,EAC7C9mI,EAAI,KAAK,IAAI6mI,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EAAIn+F,EACvCzoC,EAAI,KAAK,IAAI6mI,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EAAIp+F,EACvCpwC,EAAQ,KAAK,IAAIuuI,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EAAI7mI,EAAI0oC,EAC/C38B,EAAS,KAAK,IAAI+6H,EAAQ,CAAC,EAAGA,EAAQ,CAAC,CAAC,EAAI7mI,EAAIyoC,EACpD,OAAO,IAAI58B,GAAa9L,EAAGC,EAAG3H,EAAOyT,CAAM,CAC5C,EACMo5H,CACT,EAAEH,EAAS,ECzHP+B,GAAsB,SAAU/4H,EAAQ,CAC1CC,EAAU84H,EAAQ/4H,CAAM,EACxB,SAAS+4H,EAAOh1F,EAAKtxC,EAAOumI,EAAatzB,EAAUzgE,EAAU,CAC3D,IAAI/kC,EAAQF,EAAO,KAAK,KAAM+jC,EAAKtxC,EAAOumI,CAAW,GAAK,KAK1D,OAAA94H,EAAM,MAAQ,EACdA,EAAM,KAAOwlG,GAAY,QACzBxlG,EAAM,SAAW+kC,GAAY,SACtB/kC,CACX,CACE,OAAA64H,EAAO,UAAU,aAAe,UAAY,CAC1C,IAAI9zF,EAAW,KAAK,SACpB,OAAOA,IAAa,OAASA,IAAa,QAC3C,EASD8zF,EAAO,UAAU,gBAAkB,SAAUnxG,EAAK,CAChD,IAAIhX,EAAM,KAAK,UAAW,EAC1B,OAAAA,EAAI,CAAC,EAAI,KAAK,cAAcA,EAAI,CAAC,CAAC,EAClCA,EAAI,CAAC,EAAI,KAAK,cAAcA,EAAI,CAAC,CAAC,EAClCgX,GAAOhX,EAAI,CAAC,EAAIA,EAAI,CAAC,GAAKA,EAAI,QAAS,EAChCA,CACR,EACDmoH,EAAO,UAAU,YAAc,SAAUz/E,EAAOpyB,EAAO,CACrD,OAAO,KAAK,YAAY,KAAK,aAAaoyB,EAAM,KAAK,MAAQ,IAAM,EAAI,CAAC,CAAC,EAAGpyB,CAAK,CAClF,EAKD6xG,EAAO,UAAU,oBAAsB,SAAUzoG,EAAM,CACrD,GAAI,KAAK,OAAS,WAChB,MAAO,GAET,KAAK,MAAM,OAAO,iBAAmBA,EACrC,KAAK,MAAM,YAAYA,CAAI,CAC5B,EACMyoG,CACT,EAAE5U,EAAI,EC3CU,SAAAjlE,GAAO+5E,EAAWxrB,EAAW3zG,EAAK,CAChDA,EAAMA,GAAO,CAAC,EACd,IAAIo/H,EAAOD,EAAU,iBACjB98E,EAAOsxD,EAAU,KACjBvuD,EAAS,CAAC,EACVi6E,EAAoBh9E,EAAK,gBAAgB,EAAE,CAAC,EAC5Ci9E,EAAkBj9E,EAAK,SACvBk9E,EAAeF,EAAoB,SAAWC,EAC9C1rB,EAAUvxD,EAAK,IACfjkD,EAAOghI,EAAK,QAAQ,EACpBI,EAAY,CAACphI,EAAK,EAAGA,EAAK,EAAIA,EAAK,MAAOA,EAAK,EAAGA,EAAK,EAAIA,EAAK,MAAM,EACtE0P,EAAM,CACR,KAAM,EACN,MAAO,EACP,IAAK,EACL,OAAQ,EACR,OAAQ,CACV,EACI2xH,EAAa9rB,EAAU,IAAI,QAAQ,GAAK,EACxC+rB,EAAW9rB,IAAY,IAAM,CAAC4rB,EAAU,CAAC,EAAIC,EAAYD,EAAU,CAAC,EAAIC,CAAU,EAAI,CAACD,EAAU,CAAC,EAAIC,EAAYD,EAAU,CAAC,EAAIC,CAAU,EAC/I,GAAIJ,EAAmB,CACrB,IAAIM,EAAcN,EAAkB,cAAcA,EAAkB,YAAY,CAAC,CAAC,EAClFK,EAAS5xH,EAAI,MAAM,EAAI,KAAK,IAAI,KAAK,IAAI6xH,EAAaD,EAAS,CAAC,CAAC,EAAGA,EAAS,CAAC,CAAC,CAAA,CAGjFt6E,EAAO,SAAW,CAACwuD,IAAY,IAAM8rB,EAAS5xH,EAAIyxH,CAAY,CAAC,EAAIC,EAAU,CAAC,EAAG5rB,IAAY,IAAM8rB,EAAS5xH,EAAIyxH,CAAY,CAAC,EAAIC,EAAU,CAAC,CAAC,EAE7Ip6E,EAAO,SAAW,KAAK,GAAK,GAAKwuD,IAAY,IAAM,EAAI,GAEvD,IAAIgsB,EAAS,CACX,IAAK,GACL,OAAQ,EACR,KAAM,GACN,MAAO,CACT,EACAx6E,EAAO,eAAiBA,EAAO,cAAgBA,EAAO,cAAgBw6E,EAAON,CAAe,EAC5Fl6E,EAAO,YAAci6E,EAAoBK,EAAS5xH,EAAIwxH,CAAe,CAAC,EAAII,EAAS5xH,EAAI,MAAM,EAAI,EAC7F6lG,EAAU,IAAI,CAAC,WAAY,QAAQ,CAAC,IACtCvuD,EAAO,cAAgB,CAACA,EAAO,eAE7By6E,GAAgB7/H,EAAI,YAAa2zG,EAAU,IAAI,CAAC,YAAa,QAAQ,CAAC,CAAC,IACzEvuD,EAAO,eAAiB,CAACA,EAAO,gBAGlC,IAAI2G,EAAc4nD,EAAU,IAAI,CAAC,YAAa,QAAQ,CAAC,EACvDvuD,OAAAA,EAAO,YAAcm6E,IAAiB,MAAQ,CAACxzE,EAAcA,EAE7D3G,EAAO,GAAK,EACLA,CACT,CACO,SAAS06E,GAAoBprF,EAAa,CACxC,OAAAA,EAAY,IAAI,kBAAkB,IAAM,aACjD,CACO,SAASqrF,GAAerrF,EAAa,CAC1C,IAAIsrF,EAAe,CACjB,WAAY,KACZ,WAAY,IACd,EACA7gH,OAAAA,EAAY6gH,EAAc,SAAU5nI,EAAG3F,EAAK,CAC1C,IAAIm5G,EAAWn5G,EAAI,QAAQ,SAAU,EAAE,EACnCkhH,EAAYj/D,EAAY,uBAAuBk3D,EAAUv2E,EAAgB,EAAE,OAAO,CAAC,EAMvF2qG,EAAavtI,CAAG,EAAIkhH,CAAA,CACrB,EACMqsB,CACT,CCtEA,IAAIze,GAAU,KAAK,IACH,SAAA0e,GAAgBtnI,EAAOg7G,EAAWusB,EAAc,CAC9D,IAAI/e,EAAqBxI,GAAc,UAKnCwnB,EAAehf,EAAmB,SAAS,KAAK+e,CAAY,EAC5DE,EAAoBjf,EAAmB,SAAS,KAAK+e,EAAc,EAAI,EACvEG,EAAqBF,EAAa,OAAS,EAC3CG,EAAkBnf,EAAmB,YAAY,KAAK+e,CAAY,EAClEK,EAAchd,GAAe5qH,EAAOg7G,CAAS,EAC7C/6B,EAAY2nD,EAAY,OACxBC,EAAaD,EAAY,OACzBE,EAAaF,EAAY,OACzB,GAAA5nI,EAAM,OAAS,MAAO,CACpB,IAAA+nI,EAAUnf,GAAQ5oH,EAAM,IAAI,EAChCigF,EAAY,CAAC2oC,GAAQ3oC,EAAU,CAAC,CAAC,EAAI8nD,EAASnf,GAAQ3oC,EAAU,CAAC,CAAC,EAAI8nD,CAAO,CAAA,CAE/E/nI,EAAM,UAAUigF,EAAU,CAAC,EAAGA,EAAU,CAAC,CAAC,EAC1CjgF,EAAM,eAAe,CACnB,YAAa0nI,EACb,OAAQG,EACR,OAAQC,CAAA,CACT,EACD,IAAI3+E,EAASq/D,EAAmB,UAAU,KAAKxoH,CAAK,EAGhD6nI,IACQ5nD,EAAA,CAAC,EAAI92B,EAAO,CAAC,GAErB2+E,IACQ7nD,EAAA,CAAC,EAAI92B,EAAO,CAAC,GAEzB,IAAI/wC,EAAWowG,EAAmB,YAAY,KAAKxoH,CAAK,EACpDU,EAAMu/E,EAAU,CAAC,EACjBt/E,EAAMs/E,EAAU,CAAC,EACrB,GAAI4nD,GAAcC,EAEhB1vH,GAAYzX,EAAMD,GAAOgnI,UAChBG,EAGF,IAFDlnI,EAAAs/E,EAAU,CAAC,EAAI7nE,EAAWsvH,EAEzB/mI,EAAMs/E,EAAU,CAAC,GAAK,SAASt/E,CAAG,GAAK,SAASs/E,EAAU,CAAC,CAAC,GACjE7nE,EAAWymG,GAAiBzmG,CAAQ,EAC9BzX,EAAAs/E,EAAU,CAAC,EAAI7nE,EAAWsvH,UAEzBI,EAGF,IADDpnI,EAAAu/E,EAAU,CAAC,EAAI7nE,EAAWsvH,EACzBhnI,EAAMu/E,EAAU,CAAC,GAAK,SAASv/E,CAAG,GAAK,SAASu/E,EAAU,CAAC,CAAC,GACjE7nE,EAAWymG,GAAiBzmG,CAAQ,EAC9B1X,EAAAu/E,EAAU,CAAC,EAAI7nE,EAAWsvH,MAE7B,CACL,IAAIM,EAAmBhoI,EAAM,SAAS,EAAE,OAAS,EAC7CgoI,EAAmBN,IACrBtvH,EAAWymG,GAAiBzmG,CAAQ,GAEtC,IAAIoc,EAAQpc,EAAWsvH,EACvB/mI,EAAM,KAAK,KAAKs/E,EAAU,CAAC,EAAI7nE,CAAQ,EAAIA,EACrC1X,EAAAs0B,GAAMr0B,EAAM6zB,CAAK,EAEnB9zB,EAAM,GAAKu/E,EAAU,CAAC,GAAK,GACvBv/E,EAAA,EACNC,EAAMq0B,GAAMR,CAAK,GACR7zB,EAAM,GAAKs/E,EAAU,CAAC,GAAK,IAC9Bt/E,EAAA,EACAD,EAAA,CAACs0B,GAAMR,CAAK,EACpB,CAGE,IAAAyzG,GAAMT,EAAa,CAAC,EAAE,MAAQC,EAAkB,CAAC,EAAE,OAASE,EAC5DjxH,GAAM8wH,EAAaE,CAAkB,EAAE,MAAQD,EAAkBC,CAAkB,EAAE,OAASC,EAE/Enf,EAAA,UAAU,KAAKxoH,EAAOU,EAAM0X,EAAW6vH,EAAItnI,EAAMyX,EAAW1B,CAAE,EAC9D8xG,EAAA,YAAY,KAAKxoH,EAAOoY,CAAQ,GAC/C6vH,GAAMvxH,IACR8xG,EAAmB,cAAc,KAAKxoH,EAAOU,EAAM0X,EAAUzX,EAAMyX,CAAQ,CAU/E,CC/EA,IAAI8vH,GAAoB,UAAY,CACzBA,SAAAA,EAAK1B,EAAW5qG,EAASmf,EAAK,CAErC,KAAK,KAAO,OACZ,KAAK,WAAa,CAAC,EACnB,KAAK,YAAc,CAAC,EACpB,KAAK,SAAW,CAAC,EACjB,KAAK,UAAY,CAAC,EAClB,KAAK,mBAAqB,GAC1B,KAAK,WAAaypF,GACb,KAAA,eAAegC,EAAW5qG,EAASmf,CAAG,EAC3C,KAAK,MAAQyrF,CAAA,CAEf0B,OAAAA,EAAK,UAAU,QAAU,UAAY,CACnC,OAAO,KAAK,KACd,EACAA,EAAK,UAAU,OAAS,SAAUtsG,EAASmf,EAAK,CAC9C,IAAIotF,EAAU,KAAK,SACd,KAAA,aAAavsG,EAAS,KAAK,KAAK,EACrC,SAASwsG,EAAgB7+E,EAAM,CACzB,IAAA8+E,EAEAC,EAAc3tI,GAAK4uD,CAAI,EACvB5vD,EAAM2uI,EAAY,OACtB,GAAK3uI,EAKL,SAFI4uI,EAAiB,CAAC,EAEbtxI,EAAI0C,EAAM,EAAG1C,GAAK,EAAGA,IAAK,CAC7B,IAAAke,EAAM,CAACmzH,EAAYrxI,CAAC,EACpByyD,EAAOH,EAAKp0C,CAAG,EACfqrB,EAAQkpB,EAAK,MACb1pD,EAAQ0pD,EAAK,MAGjB00D,GAAqBp+G,CAAK,GAAKwgC,EAAM,IAAI,YAAY,GAAKA,EAAM,IAAI,UAAU,GAAK,KACjF+nG,EAAe,KAAK7+E,CAAI,GAExBiiE,GAAgB3rH,EAAOwgC,CAAK,EACxB49E,GAAqBp+G,CAAK,IAElBqoI,EAAA3+E,GAEd,CAKE6+E,EAAe,SACZF,IACHA,EAAUE,EAAe,IAAI,EACb5c,GAAA0c,EAAQ,MAAOA,EAAQ,KAAK,GAEzC3sI,EAAA6sI,EAAgB,SAAU7+E,EAAM,CACnC49E,GAAgB59E,EAAK,MAAOA,EAAK,MAAO2+E,EAAQ,KAAK,CAAA,CACtD,GACH,CAEFD,EAAgBD,EAAQ,CAAC,EACzBC,EAAgBD,EAAQ,CAAC,EAEzB,IAAIK,EAAgB,CAAC,EAChB9sI,EAAAysI,EAAQ,EAAG,SAAUrC,EAAO,CACjB2C,GAAAN,EAAS,IAAKrC,EAAO0C,CAAa,CAAA,CACjD,EACI9sI,EAAAysI,EAAQ,EAAG,SAAUpC,EAAO,CACjB0C,GAAAN,EAAS,IAAKpC,EAAOyC,CAAa,CAAA,CACjD,EAGI,KAAA,OAAO,KAAK,MAAOztF,CAAG,CAC7B,EAIAmtF,EAAK,UAAU,OAAS,SAAU1B,EAAWzrF,EAAK2tF,EAAoB,CAChE,IAAAC,EAAkBnC,EAAU,mBAAmB,EAC/CoC,EAAiB,CAACF,GAAsBlC,EAAU,IAAI,cAAc,EACpEqC,EAAWpoE,GAAckoE,EAAiB,CAC5C,MAAO5tF,EAAI,SAAS,EACpB,OAAQA,EAAI,UAAU,CAAA,CACvB,EACD,KAAK,MAAQ8tF,EACb,IAAIC,EAAW,KAAK,UACTC,EAAA,EAEPH,IACGltI,EAAAotI,EAAU,SAAUp/E,EAAM,CACzB,GAAA,CAACA,EAAK,MAAM,IAAI,CAAC,YAAa,QAAQ,CAAC,EAAG,CACxC,IAAAs/E,EAAiB5c,GAAuB1iE,CAAI,EAChD,GAAIs/E,EAAgB,CAClB,IAAI13F,EAAMoY,EAAK,aAAa,EAAI,SAAW,QACvCoK,EAASpK,EAAK,MAAM,IAAI,CAAC,YAAa,QAAQ,CAAC,EACnDm/E,EAASv3F,CAAG,GAAK03F,EAAe13F,CAAG,EAAIwiB,EACnCpK,EAAK,WAAa,MACXm/E,EAAA,GAAKG,EAAe,OAASl1E,EAC7BpK,EAAK,WAAa,SAClBm/E,EAAA,GAAKG,EAAe,MAAQl1E,EACvC,CACF,CACF,CACD,EACUi1E,EAAA,GAERrtI,EAAA,KAAK,YAAa,SAAUksC,EAAO,CAGtCA,EAAM,oBAAoB,CAAA,CAC3B,EACD,SAASmhG,GAAa,CACfrtI,EAAAotI,EAAU,SAAUp/E,EAAM,CACzB,IAAAuxE,EAAevxE,EAAK,aAAa,EACjCP,EAAS8xE,EAAe,CAAC,EAAG4N,EAAS,KAAK,EAAI,CAAC,EAAGA,EAAS,MAAM,EACjE1zH,EAAMu0C,EAAK,QAAU,EAAI,EAC7BA,EAAK,UAAUP,EAAOh0C,CAAG,EAAGg0C,EAAO,EAAIh0C,CAAG,CAAC,EAC3C8zH,GAAoBv/E,EAAMuxE,EAAe4N,EAAS,EAAIA,EAAS,CAAC,CAAA,CACjE,CAAA,CAEL,EACAX,EAAK,UAAU,QAAU,SAAU52F,EAAKypE,EAAW,CAC7C,IAAAmuB,EAAe,KAAK,SAAS53F,CAAG,EACpC,GAAI43F,GAAgB,KACX,OAAAA,EAAanuB,GAAa,CAAC,CAEtC,EACAmtB,EAAK,UAAU,QAAU,UAAY,CAC5B,OAAA,KAAK,UAAU,MAAM,CAC9B,EACAA,EAAK,UAAU,aAAe,SAAUiB,EAAYC,EAAY,CAC1D,GAAAD,GAAc,MAAQC,GAAc,KAAM,CACxC,IAAAtvI,EAAM,IAAMqvI,EAAa,IAAMC,EAC5B,OAAA,KAAK,WAAWtvI,CAAG,CAAA,CAExBI,EAASivI,CAAU,IACrBC,EAAaD,EAAW,WACxBA,EAAaA,EAAW,YAEjB,QAAAlyI,EAAI,EAAGoyI,EAAY,KAAK,YAAapyI,EAAIoyI,EAAU,OAAQpyI,IAClE,GAAIoyI,EAAUpyI,CAAC,EAAE,QAAQ,GAAG,EAAE,QAAUkyI,GAAcE,EAAUpyI,CAAC,EAAE,QAAQ,GAAG,EAAE,QAAUmyI,EACxF,OAAOC,EAAUpyI,CAAC,CAGxB,EACAixI,EAAK,UAAU,cAAgB,UAAY,CAClC,OAAA,KAAK,YAAY,MAAM,CAChC,EAIAA,EAAK,UAAU,eAAiB,SAAUtsG,EAASW,EAAQzhC,EAAO,CAC5D,IAAAd,EAAS,KAAK,mBAAmBuiC,CAAM,EAC3C,OAAOviC,EAAO,UAAYA,EAAO,UAAU,YAAYc,CAAK,EAAId,EAAO,KAAOA,EAAO,KAAK,cAAcA,EAAO,KAAK,YAAYc,CAAK,CAAC,EAAI,IAC5I,EAIAotI,EAAK,UAAU,iBAAmB,SAAUtsG,EAASW,EAAQzhC,EAAO,CAC9D,IAAAd,EAAS,KAAK,mBAAmBuiC,CAAM,EAC3C,OAAOviC,EAAO,UAAYA,EAAO,UAAU,YAAYc,CAAK,EAAId,EAAO,KAAOA,EAAO,KAAK,YAAYA,EAAO,KAAK,aAAac,CAAK,CAAC,EAAI,IAC3I,EACAotI,EAAK,UAAU,mBAAqB,SAAU3rG,EAAQ,CACpD,IAAIwf,EAAcxf,EAAO,YACrB+9E,EAAa/9E,EAAO,YAAcwf,GAAeA,EAAY,uBAAuB,QAASrf,EAAgB,EAAE,OAAO,CAAC,EACvH69E,EAAah+E,EAAO,YAAcwf,GAAeA,EAAY,uBAAuB,QAASrf,EAAgB,EAAE,OAAO,CAAC,EACvH8pG,EAAYjqG,EAAO,UACnB+sG,EAAa,KAAK,YAClBtnB,EACAt4D,EACJ,GAAI3N,EACFimE,EAAYjmE,EAAY,iBACxBnhD,EAAQ0uI,EAAYtnB,CAAS,EAAI,IAAMA,EAAY,cAC1C1H,GAAcC,EACvByH,EAAY,KAAK,aAAa1H,EAAW,eAAgBC,EAAW,cAAc,UACzED,EACT5wD,EAAO,KAAK,QAAQ,IAAK4wD,EAAW,cAAc,UACzCC,EACT7wD,EAAO,KAAK,QAAQ,IAAK6wD,EAAW,cAAc,UAG3CisB,EAAW,CAClB,IAAIC,EAAOD,EAAU,iBACjBC,IAAS,OACCzkB,EAAA,KAAK,YAAY,CAAC,EAChC,CAEK,MAAA,CACL,UAAAA,EACA,KAAAt4D,CACF,CACF,EAIAw+E,EAAK,UAAU,aAAe,SAAUrhF,EAAO,CACzC,IAAAjf,EAAQ,KAAK,YAAY,CAAC,EAC9B,GAAIA,EACK,OAAAA,EAAM,aAAaif,CAAK,CAEnC,EAIAqhF,EAAK,UAAU,eAAiB,SAAU1B,EAAW5qG,EAASmf,EAAK,CACjE,IAAIttC,EAAQ,KACRg5H,EAAO,KACP8C,EAAmB,CACrB,KAAM,GACN,MAAO,GACP,IAAK,GACL,OAAQ,EACV,EACIpB,EAAU,CACZ,EAAG,CAAC,EACJ,EAAG,CAAA,CACL,EACIqB,EAAY,CACd,EAAG,EACH,EAAG,CACL,EAIA,GAFA5tG,EAAQ,cAAc,QAAS6tG,EAAkB,GAAG,EAAG,IAAI,EAC3D7tG,EAAQ,cAAc,QAAS6tG,EAAkB,GAAG,EAAG,IAAI,EACvD,CAACD,EAAU,GAAK,CAACA,EAAU,EAAG,CAEhC,KAAK,SAAW,CAAC,EACjB,KAAK,UAAY,CAAC,EAClB,MAAA,CAEF,KAAK,SAAWrB,EAEhBzsI,EAAKysI,EAAQ,EAAG,SAAUrC,EAAOqD,EAAY,CAC3CztI,EAAKysI,EAAQ,EAAG,SAAUpC,EAAOqD,EAAY,CACvC,IAAAtvI,EAAM,IAAMqvI,EAAa,IAAMC,EAC/BpnB,EAAY,IAAI0iB,GAAY5qI,CAAG,EACnCkoH,EAAU,OAASv0G,EACnBu0G,EAAU,MAAQwkB,EACZ/4H,EAAA,WAAW3T,CAAG,EAAIkoH,EAClBv0G,EAAA,YAAY,KAAKu0G,CAAS,EAChCA,EAAU,QAAQ8jB,CAAK,EACvB9jB,EAAU,QAAQ+jB,CAAK,CAAA,CACxB,CAAA,CACF,EACD,SAAS0D,EAAkBhjE,EAAS,CAC3B,OAAA,SAAUu0C,EAAW7lG,EAAK,CAC/B,GAAKu0H,GAAoB1uB,EAAWwrB,CAAS,EAGzC,KAAAI,EAAe5rB,EAAU,IAAI,UAAU,EACvCv0C,IAAY,IAEVmgE,IAAiB,OAASA,IAAiB,WAE9BA,EAAA2C,EAAiB,OAAS,MAAQ,UAI/C3C,IAAiB,QAAUA,IAAiB,UAE/BA,EAAA2C,EAAiB,KAAO,QAAU,QAGrDA,EAAiB3C,CAAY,EAAI,GACjC,IAAIl9E,EAAO,IAAI48E,GAAO7/D,EAASslD,GAAmB/Q,CAAS,EAAG,CAAC,EAAG,CAAC,EAAGA,EAAU,IAAI,MAAM,EAAG4rB,CAAY,EACrGpsB,EAAa9wD,EAAK,OAAS,WAC/BA,EAAK,OAAS8wD,GAAcQ,EAAU,IAAI,aAAa,EAClDtxD,EAAA,QAAUsxD,EAAU,IAAI,SAAS,EAEtCA,EAAU,KAAOtxD,EAEjBA,EAAK,MAAQsxD,EAEbtxD,EAAK,KAAO+8E,EAEZ/8E,EAAK,MAAQv0C,EACRsxH,EAAA,UAAU,KAAK/8E,CAAI,EAChBy+E,EAAA1hE,CAAO,EAAEtxD,CAAG,EAAIu0C,EACxB8/E,EAAU/iE,CAAO,IACnB,CAAA,CAEJ,EAIAyhE,EAAK,UAAU,aAAe,SAAUtsG,EAAS4qG,EAAW,CAErD9qI,EAAA,KAAK,UAAW,SAAUguD,EAAM,CAE/B,GADCA,EAAA,MAAM,UAAU,IAAU,IAAS,EACpCA,EAAK,OAAS,WAAY,CAC5B,IAAIigF,EAAmBjgF,EAAK,MAAM,IAAI,kBAAkB,EACnDA,EAAA,MAAM,YAAYigF,CAAgB,CAAA,CACzC,CACD,EACO/tG,EAAA,WAAW,SAAUmgB,EAAa,CACpC,GAAAorF,GAAoBprF,CAAW,EAAG,CAChC,IAAA6tF,EAAexC,GAAerrF,CAAW,EACzCu+D,EAAasvB,EAAa,WAC1BrvB,EAAaqvB,EAAa,WAC1B,GAAA,CAACF,GAAoBpvB,EAAYksB,CAAS,GAAK,CAACkD,GAAoBnvB,EAAYisB,CAAS,EAC3F,OAEF,IAAIxkB,EAAY,KAAK,aAAa1H,EAAW,eAAgBC,EAAW,cAAc,EAClF9+G,EAAOsgD,EAAY,QAAQ,EAC3B+pF,EAAQ9jB,EAAU,QAAQ,GAAG,EAC7B+jB,EAAQ/jB,EAAU,QAAQ,GAAG,EACjC6nB,EAAYpuI,EAAMqqI,CAAK,EACvB+D,EAAYpuI,EAAMsqI,CAAK,CAAA,GAExB,IAAI,EACE,SAAA8D,EAAYpuI,EAAMiuD,EAAM,CAC/BhuD,EAAK0xH,GAAwB3xH,EAAMiuD,EAAK,GAAG,EAAG,SAAUpY,EAAK,CACtDoY,EAAA,MAAM,oBAAoBjuD,EAAM61C,CAAG,CAAA,CACzC,CAAA,CAEL,EAIA42F,EAAK,UAAU,eAAiB,SAAU52F,EAAK,CAC7C,IAAIw4F,EAAW,CAAC,EACZC,EAAY,CAAC,EACjBruI,OAAAA,EAAK,KAAK,cAAiB,EAAA,SAAUsmH,EAAW,CAC1C,IAAAC,EAAW3wE,GAAO,MAAQA,IAAQ,OAAS0wE,EAAU,QAAQ1wE,CAAG,EAAI0wE,EAAU,YAAY,EAC1FgoB,EAAYhoB,EAAU,aAAaC,CAAQ,EAC/CrnH,EAAQkvI,EAAU7nB,CAAQ,EAAI,GAAK6nB,EAAS,KAAK7nB,CAAQ,EACzDrnH,EAAQmvI,EAAWC,CAAS,EAAI,GAAKD,EAAU,KAAKC,CAAS,CAAA,CAC9D,EACM,CACL,SAAAF,EACA,UAAAC,CACF,CACF,EACA7B,EAAK,OAAS,SAAUtsG,EAASmf,EAAK,CACpC,IAAIkvF,EAAQ,CAAC,EACb,OAAAruG,EAAQ,cAAc,OAAQ,SAAU4qG,EAAWrxH,EAAK,CACtD,IAAIsxH,EAAO,IAAIyB,EAAK1B,EAAW5qG,EAASmf,CAAG,EAC3C0rF,EAAK,KAAO,QAAUtxH,EAGjBsxH,EAAA,OAAOD,EAAWzrF,EAAK,EAAI,EAChCyrF,EAAU,iBAAmBC,EAC7BwD,EAAM,KAAKxD,CAAI,CAAA,CAChB,EAEO7qG,EAAA,WAAW,SAAUmgB,EAAa,CACpC,GAACorF,GAAoBprF,CAAW,EAGhC,KAAA6tF,EAAexC,GAAerrF,CAAW,EACzCu+D,EAAasvB,EAAa,WAC1BrvB,EAAaqvB,EAAa,WAC1BpD,EAAYlsB,EAAW,iBAAiB,EASxCmsB,EAAOD,EAAU,iBACrBzqF,EAAY,iBAAmB0qF,EAAK,aAAansB,EAAW,eAAgBC,EAAW,cAAc,EAAA,CACtG,EACM0vB,CACT,EAEA/B,EAAK,WAAa1D,GACX0D,CACP,EAAA,EAIF,SAASwB,GAAoB1uB,EAAWwrB,EAAW,CAC1C,OAAAxrB,EAAU,qBAAuBwrB,CAC1C,CACA,SAASiC,GAAcN,EAAS+B,EAAcxgF,EAE9C8+E,EAAe,CACb9+E,EAAK,gBAAkB,UAAY,CAEjC,OAAOg9E,EAAoB,CAACA,CAAiB,EAAI,CAAC,CACpD,EAII,IAAAqD,EAAY5B,EAAQ+B,CAAY,EAChCxD,EACA1rB,EAAYtxD,EAAK,MACjBygF,EAASnvB,EAAU,IAAI,CAAC,WAAY,QAAQ,CAAC,EAC7CovB,EAAkBpvB,EAAU,IAAI,CAAC,WAAY,iBAAiB,CAAC,EACnE,GAAI,CAACmvB,EACH,OAGF,GAAIC,GAAmB,KACjBC,GAAgBN,EAAUK,CAAe,CAAC,IAC5C1D,EAAoBqD,EAAUK,CAAe,OAI/C,SAASj1H,KAAO40H,EACd,GAAIA,EAAU,eAAe50H,CAAG,GAAKk1H,GAAgBN,EAAU50H,CAAG,CAAC,GAGhE,CAACqzH,EAAc8B,EAAmBP,EAAU50H,CAAG,CAAC,CAAC,EAAG,CACrDuxH,EAAoBqD,EAAU50H,CAAG,EACjC,KAAA,CAIFuxH,IACY8B,EAAA8B,EAAmB5D,CAAiB,CAAC,EAAI,IAEzD,SAAS4D,EAAmB5gF,EAAM,CACzBA,OAAAA,EAAK,IAAM,IAAMA,EAAK,KAAA,CAEjC,CACA,SAAS2gF,GAAgB3gF,EAAM,CACtB,OAAAA,GAAQA,EAAK,OAAS,YAAcA,EAAK,OAAS,QAAUsiE,GAAgBtiE,CAAI,CACzF,CACA,SAASu/E,GAAoBv/E,EAAM6gF,EAAW,CACxC,IAAAhoB,EAAa74D,EAAK,UAAU,EAC5B8gF,EAAgBjoB,EAAW,CAAC,EAAIA,EAAW,CAAC,EAEhD74D,EAAK,cAAgBA,EAAK,MAAQ,IAAM,SAAU9hB,EAAO,CACvD,OAAOA,EAAQ2iG,CACjB,EAAI,SAAU3iG,EAAO,CACnB,OAAO4iG,EAAgB5iG,EAAQ2iG,CACjC,EACA7gF,EAAK,aAAeA,EAAK,MAAQ,IAAM,SAAU9hB,EAAO,CACtD,OAAOA,EAAQ2iG,CACjB,EAAI,SAAU3iG,EAAO,CACnB,OAAO4iG,EAAgB5iG,EAAQ2iG,CACjC,CACF,CCrbA,IAAI5/F,GAAK,KAAK,GAuBV8/F,GAA2B,UAAY,CACzC,SAASA,EAAYzvB,EAAW3zG,EAAK,CACnC,KAAK,MAAQ,IAAImrF,GACjB,KAAK,IAAMnrF,EACX,KAAK,UAAY2zG,EAEjBxgH,EAAS6M,EAAK,CACZ,YAAa,EACb,cAAe,EACf,cAAe,EACf,eAAgB,EAChB,OAAQ,GACR,gBAAiB,UAAY,CAC3B,MAAO,EACf,CACA,CAAK,EAED,IAAIqjI,EAAiB,IAAIl4C,GAAc,CACrC,EAAGnrF,EAAI,SAAS,CAAC,EACjB,EAAGA,EAAI,SAAS,CAAC,EACjB,SAAUA,EAAI,QACpB,CAAK,EAGDqjI,EAAe,gBAAiB,EAChC,KAAK,gBAAkBA,CAC3B,CACE,OAAAD,EAAY,UAAU,WAAa,SAAUrjI,EAAM,CACjD,MAAO,CAAC,CAACujI,GAASvjI,CAAI,CACvB,EACDqjI,EAAY,UAAU,IAAM,SAAUrjI,EAAM,CAC1CujI,GAASvjI,CAAI,EAAE,KAAK,IAAK,KAAK,UAAW,KAAK,MAAO,KAAK,eAAe,CAC1E,EACDqjI,EAAY,UAAU,SAAW,UAAY,CAC3C,OAAO,KAAK,KACb,EACDA,EAAY,gBAAkB,SAAUG,EAAcC,EAAcj9E,EAAW,CAC7E,IAAIk9E,EAAe10G,GAAUy0G,EAAeD,CAAY,EACpDxgH,EACAc,EACJ,OAAIqL,GAAmBu0G,CAAY,GAEjC5/G,EAAoB0iC,EAAY,EAAI,MAAQ,SAC5CxjC,EAAY,UACHmM,GAAmBu0G,EAAengG,EAAE,GAE7Czf,EAAoB0iC,EAAY,EAAI,SAAW,MAC/CxjC,EAAY,WAEZc,EAAoB,SAChB4/G,EAAe,GAAKA,EAAengG,GACrCvgB,EAAYwjC,EAAY,EAAI,QAAU,OAEtCxjC,EAAYwjC,EAAY,EAAI,OAAS,SAGlC,CACL,SAAUk9E,EACV,UAAW1gH,EACX,kBAAmBc,CACpB,CACF,EACDu/G,EAAY,sBAAwB,SAAUzvB,EAAW,CACvD,IAAI+vB,EAAY,CACd,cAAe/vB,EAAU,SACzB,eAAgBA,EAAU,cAC3B,EACD,OAAA+vB,EAAU/vB,EAAU,SAAW,OAAO,EAAIA,EAAU,eAC7C+vB,CACR,EACDN,EAAY,cAAgB,SAAUzvB,EAAW,CAC/C,IAAIgwB,EAAahwB,EAAU,IAAI,SAAS,EACxC,OAAOA,EAAU,IAAI,QAAQ,GAE1B,EAAEA,EAAU,IAAI,cAAc,GAAKgwB,GAAcA,EAAW,KAChE,EACMP,CACT,EAAG,EAECE,GAAW,CACb,SAAU,SAAUtjI,EAAK2zG,EAAWn7C,EAAO6qE,EAAgB,CACzD,IAAIO,EAAQjwB,EAAU,IAAI,CAAC,WAAY,MAAM,CAAC,EAI9C,GAHIiwB,IAAU,QAAU5jI,EAAI,kBAC1B4jI,EAAQ5jI,EAAI,gBAAgB,UAAU,GAEpC,EAAC4jI,EAGL,KAAI9hF,EAAS6xD,EAAU,KAAK,UAAW,EACnCve,EAASiuC,EAAe,UACxBQ,EAAM,CAAC/hF,EAAO,CAAC,EAAG,CAAC,EACnBgiF,EAAM,CAAChiF,EAAO,CAAC,EAAG,CAAC,EACnB5kD,EAAU2mI,EAAI,CAAC,EAAIC,EAAI,CAAC,EACxB1uC,IACFr9C,GAAiB8rF,EAAKA,EAAKzuC,CAAM,EACjCr9C,GAAiB+rF,EAAKA,EAAK1uC,CAAM,GAEnC,IAAIinC,EAAYnpI,EAAO,CACrB,QAAS,OACf,EAAOygH,EAAU,SAAS,CAAC,WAAY,WAAW,CAAC,EAAE,cAAc,EAC3Dr2E,EAAO,IAAI20D,GAAa,CAC1B,MAAO,CACL,GAAI4xC,EAAI,CAAC,EACT,GAAIA,EAAI,CAAC,EACT,GAAIC,EAAI,CAAC,EACT,GAAIA,EAAI,CAAC,CACV,EACD,MAAOzH,EACP,uBAAwBr8H,EAAI,wBAA0B,EACtD,OAAQ,GACR,GAAI,CACV,CAAK,EACD+jI,GAA6BzmG,EAAK,MAAOA,EAAK,MAAM,SAAS,EAC7DA,EAAK,KAAO,OACZk7B,EAAM,IAAIl7B,CAAI,EACd,IAAI0mG,EAASrwB,EAAU,IAAI,CAAC,WAAY,QAAQ,CAAC,EACjD,GAAIqwB,GAAU,KAAM,CAClB,IAAIC,EAAYtwB,EAAU,IAAI,CAAC,WAAY,YAAY,CAAC,EACpD1+G,EAAS+uI,CAAM,IAEjBA,EAAS,CAACA,EAAQA,CAAM,IAEtB/uI,EAASgvI,CAAS,GAAK9uI,GAAS8uI,CAAS,KAE3CA,EAAY,CAACA,EAAWA,CAAS,GAEnC,IAAIC,EAAc/wC,GAAsBwgB,EAAU,IAAI,CAAC,WAAY,cAAc,CAAC,GAAK,EAAGswB,CAAS,EAC/FE,EAAgBF,EAAU,CAAC,EAC3BG,EAAiBH,EAAU,CAAC,EAChC5vI,EAAK,CAAC,CACJ,OAAQ2L,EAAI,SAAW,KAAK,GAAK,EACjC,OAAQkkI,EAAY,CAAC,EACrB,EAAG,CACX,EAAS,CACD,OAAQlkI,EAAI,SAAW,KAAK,GAAK,EACjC,OAAQkkI,EAAY,CAAC,EACrB,EAAG,KAAK,MAAML,EAAI,CAAC,EAAIC,EAAI,CAAC,IAAMD,EAAI,CAAC,EAAIC,EAAI,CAAC,IAAMD,EAAI,CAAC,EAAIC,EAAI,CAAC,IAAMD,EAAI,CAAC,EAAIC,EAAI,CAAC,EAAE,CAClG,CAAO,EAAG,SAAUtkF,EAAO50B,EAAO,CAC1B,GAAIo5G,EAAOp5G,CAAK,IAAM,QAAUo5G,EAAOp5G,CAAK,GAAK,KAAM,CACrD,IAAIowE,EAASrI,GAAaqxC,EAAOp5G,CAAK,EAAG,CAACu5G,EAAgB,EAAG,CAACC,EAAiB,EAAGD,EAAeC,EAAgB/H,EAAU,OAAQ,EAAI,EAEnIj0H,EAAIo3C,EAAM,EAAIA,EAAM,OACpBw1E,EAAK93H,EAAU4mI,EAAMD,EACzB7oC,EAAO,KAAK,CACV,SAAUx7C,EAAM,OAChB,EAAGw1E,EAAG,CAAC,EAAI5sH,EAAI,KAAK,IAAIpI,EAAI,QAAQ,EACpC,EAAGg1H,EAAG,CAAC,EAAI5sH,EAAI,KAAK,IAAIpI,EAAI,QAAQ,EACpC,OAAQ,GACR,GAAI,EAChB,CAAW,EACDw4D,EAAM,IAAIwiC,CAAM,CAC1B,CACA,CAAO,CACP,EACG,EACD,cAAe,SAAUh7F,EAAK2zG,EAAWn7C,EAAO6qE,EAAgB,CAC9D,IAAIgB,EAAWC,GAAoB9rE,EAAO6qE,EAAgB1vB,EAAW3zG,CAAG,EACpEukI,EAAWC,GAAehsE,EAAO6qE,EAAgB1vB,EAAW3zG,CAAG,EAKnE,GAJAykI,GAAmB9wB,EAAW4wB,EAAUF,CAAQ,EAChDK,GAAoBlsE,EAAO6qE,EAAgB1vB,EAAW3zG,EAAI,aAAa,EAGnE2zG,EAAU,IAAI,CAAC,YAAa,aAAa,CAAC,EAAG,CAC/C,IAAIgY,EAAYP,GAAkBz7H,EAAI40I,EAAU,SAAU76E,EAAO,CAC/D,MAAO,CACL,MAAOA,EACP,SAAUA,EAAM,GAChB,YAAa,CACX,OAAQA,EAAM,MAC1B,CACS,CACT,CAAO,CAAC,EACFgiE,GAAYC,CAAS,CAC3B,CACG,EACD,SAAU,SAAU3rH,EAAK2zG,EAAWn7C,EAAO6qE,EAAgB,CACzD,IAAItjI,EAAOtK,GAASuK,EAAI,SAAU2zG,EAAU,IAAI,MAAM,CAAC,EACvD,GAAK5zG,EAGL,KAAI4kI,EAAehxB,EAAU,IAAI,cAAc,EAC3CixB,EAAgB5kI,EAAI,cACpBwrD,EAAiBmoD,EAAU,SAAS,eAAe,EACnDl7C,EAAMk7C,EAAU,IAAI,SAAS,GAAK,EAClC7xD,EAAS6xD,EAAU,KAAK,UAAW,EACnCkxB,EAAY/iF,EAAO,CAAC,EAAIA,EAAO,CAAC,EAAI,GAAK,EACzCthD,EAAM,CAACmkI,IAAiB,QAAU7iF,EAAO,CAAC,EAAI+iF,EAAYpsE,EAAMksE,IAAiB,MAAQ7iF,EAAO,CAAC,EAAI+iF,EAAYpsE,GAAO3W,EAAO,CAAC,EAAIA,EAAO,CAAC,GAAK,EAErJgjF,GAAqBH,CAAY,EAAI3kI,EAAI,YAAc4kI,EAAgBnsE,EAAM,CAAC,EAC1EssE,EACAC,EAAerxB,EAAU,IAAI,YAAY,EACzCqxB,GAAgB,OAClBA,EAAeA,EAAe1hG,GAAK,KAErC,IAAI2hG,EACAH,GAAqBH,CAAY,EACnCI,EAAc3B,GAAY,gBAAgBpjI,EAAI,SAAUglI,GAAsChlI,EAAI,SAElG4kI,CAAa,GAEbG,EAAcG,GAAcllI,EAAI,SAAU2kI,EAAcK,GAAgB,EAAGljF,CAAM,EACjFmjF,EAAyBjlI,EAAI,uBACzBilI,GAA0B,OAC5BA,EAAyB,KAAK,IAAIA,EAAyB,KAAK,IAAIF,EAAY,QAAQ,CAAC,EACzF,CAAC,SAASE,CAAsB,IAAMA,EAAyB,QAGnE,IAAI54F,EAAWmf,EAAe,QAAS,EACnC25E,EAAcxxB,EAAU,IAAI,eAAgB,EAAI,GAAK,CAAE,EACvDt5E,EAAW8qG,EAAY,SACvBzsE,EAAWjjE,GAASuK,EAAI,qBAAsBmlI,EAAY,SAAUF,CAAsB,EAC1Fp3H,EAAS,IAAIy9E,GAAa,CAC5B,EAAG9qF,EAAI,CAAC,EACR,EAAGA,EAAI,CAAC,EACR,SAAUukI,EAAY,SACtB,OAAQ3B,GAAY,cAAczvB,CAAS,EAC3C,MAAO3oD,GAAgBQ,EAAgB,CACrC,KAAMzrD,EACN,KAAMssC,EACN,SAAU,WACV,MAAOqsB,EACP,SAAUr+B,EACV,KAAMmxB,EAAe,aAAY,GAAMmoD,EAAU,IAAI,CAAC,WAAY,YAAa,OAAO,CAAC,EACvF,MAAOnoD,EAAe,IAAI,OAAO,GAAKu5E,EAAY,UAClD,cAAev5E,EAAe,IAAI,eAAe,GAAKu5E,EAAY,iBAC1E,CAAO,EACD,GAAI,CACV,CAAK,EASD,GARAK,GAAyB,CACvB,GAAIv3H,EACJ,eAAgB8lG,EAChB,SAAU5zG,CAChB,CAAK,EACD8N,EAAO,WAAa9N,EAEpB8N,EAAO,KAAO,OACV8lG,EAAU,IAAI,cAAc,EAAG,CACjC,IAAI+vB,EAAYN,GAAY,sBAAsBzvB,CAAS,EAC3D+vB,EAAU,WAAa,WACvBA,EAAU,KAAO3jI,EACjBsvC,GAAUxhC,CAAM,EAAE,UAAY61H,CACpC,CAEIL,EAAe,IAAIx1H,CAAM,EACzBA,EAAO,gBAAiB,EACxB2qD,EAAM,IAAI3qD,CAAM,EAChBA,EAAO,mBAAoB,EAC/B,CACA,EACA,SAASq3H,GAActjH,EAAU+B,EAAc0hH,EAAYvjF,EAAQ,CACjE,IAAI2hF,EAAe10G,GAAUs2G,EAAazjH,CAAQ,EAC9CmB,EACAc,EACA3mB,EAAU4kD,EAAO,CAAC,EAAIA,EAAO,CAAC,EAC9BwjF,EAAS3hH,IAAiB,SAAW,CAACzmB,GAAWymB,IAAiB,SAAWzmB,EACjF,OAAIgyB,GAAmBu0G,EAAengG,GAAK,CAAC,GAC1Czf,EAAoByhH,EAAS,SAAW,MACxCviH,EAAY,UACHmM,GAAmBu0G,EAAengG,GAAK,GAAG,GACnDzf,EAAoByhH,EAAS,MAAQ,SACrCviH,EAAY,WAEZc,EAAoB,SAChB4/G,EAAengG,GAAK,KAAOmgG,EAAengG,GAAK,EACjDvgB,EAAYuiH,EAAS,OAAS,QAE9BviH,EAAYuiH,EAAS,QAAU,QAG5B,CACL,SAAU7B,EACV,UAAW1gH,EACX,kBAAmBc,CACpB,CACH,CACA,SAAS4gH,GAAmB9wB,EAAW4wB,EAAUgB,EAAS,CACxD,GAAI,CAAAzf,GAAoBnS,EAAU,IAAI,EAMtC,KAAI6xB,EAAe7xB,EAAU,IAAI,CAAC,YAAa,cAAc,CAAC,EAC1D8xB,EAAe9xB,EAAU,IAAI,CAAC,YAAa,cAAc,CAAC,EAG9D4wB,EAAWA,GAAY,CAAE,EACzBgB,EAAUA,GAAW,CAAE,EACvB,IAAIG,EAAanB,EAAS,CAAC,EACvBoB,EAAYpB,EAAS,CAAC,EACtBqB,EAAYrB,EAASA,EAAS,OAAS,CAAC,EACxCsB,EAAYtB,EAASA,EAAS,OAAS,CAAC,EACxCuB,EAAYP,EAAQ,CAAC,EACrBlsB,EAAWksB,EAAQ,CAAC,EACpBQ,EAAWR,EAAQA,EAAQ,OAAS,CAAC,EACrCjsB,EAAWisB,EAAQA,EAAQ,OAAS,CAAC,EACrCC,IAAiB,IACnBQ,GAASN,CAAU,EACnBM,GAASF,CAAS,GACTG,GAAqBP,EAAYC,CAAS,IAC/CH,GACFQ,GAASL,CAAS,EAClBK,GAAS3sB,CAAQ,IAEjB2sB,GAASN,CAAU,EACnBM,GAASF,CAAS,IAGlBL,IAAiB,IACnBO,GAASJ,CAAS,EAClBI,GAASD,CAAQ,GACRE,GAAqBJ,EAAWD,CAAS,IAC9CH,GACFO,GAASH,CAAS,EAClBG,GAAS1sB,CAAQ,IAEjB0sB,GAASJ,CAAS,EAClBI,GAASD,CAAQ,IAGvB,CACA,SAASC,GAAS/oI,EAAI,CACpBA,IAAOA,EAAG,OAAS,GACrB,CACA,SAASgpI,GAAqB5wF,EAASpkC,EAAM,CAE3C,IAAIi1H,EAAY7wF,GAAWA,EAAQ,gBAAe,EAAG,MAAO,EACxD8wF,EAAWl1H,GAAQA,EAAK,gBAAe,EAAG,MAAO,EACrD,GAAI,GAACi1H,GAAa,CAACC,GAKnB,KAAIC,EAAgBC,GAAoB,EAAE,EAC1CC,OAAAA,GAAkBF,EAAeA,EAAe,CAAC/wF,EAAQ,QAAQ,EACjE6wF,EAAU,eAAeK,GAAe,CAAA,EAAIH,EAAe/wF,EAAQ,kBAAiB,CAAE,CAAC,EACvF8wF,EAAS,eAAeI,GAAe,CAAA,EAAIH,EAAen1H,EAAK,kBAAiB,CAAE,CAAC,EAC5Ei1H,EAAU,UAAUC,CAAQ,EACrC,CACA,SAASrB,GAAqBH,EAAc,CAC1C,OAAOA,IAAiB,UAAYA,IAAiB,QACvD,CACA,SAAS6B,GAAYjc,EAAakc,EAAeC,EAAcC,EAAeC,EAAY,CAIxF,QAHIrB,EAAU,CAAE,EACZ1B,EAAM,CAAE,EACRC,EAAM,CAAE,EACHl0I,EAAI,EAAGA,EAAI26H,EAAY,OAAQ36H,IAAK,CAC3C,IAAIi3I,EAAYtc,EAAY36H,CAAC,EAAE,MAC/Bi0I,EAAI,CAAC,EAAIgD,EACThD,EAAI,CAAC,EAAI,EACTC,EAAI,CAAC,EAAI+C,EACT/C,EAAI,CAAC,EAAI4C,EACLD,IACF1uF,GAAiB8rF,EAAKA,EAAK4C,CAAa,EACxC1uF,GAAiB+rF,EAAKA,EAAK2C,CAAa,GAG1C,IAAIK,EAAS,IAAI70C,GAAa,CAC5B,MAAO,CACL,GAAI4xC,EAAI,CAAC,EACT,GAAIA,EAAI,CAAC,EACT,GAAIC,EAAI,CAAC,EACT,GAAIA,EAAI,CAAC,CACV,EACD,MAAO6C,EACP,GAAI,EACJ,UAAW,GACX,OAAQ,EACd,CAAK,EACD5C,GAA6B+C,EAAO,MAAOA,EAAO,MAAM,SAAS,EACjEA,EAAO,KAAOF,EAAa,IAAMrc,EAAY36H,CAAC,EAAE,UAChD21I,EAAQ,KAAKuB,CAAM,CACvB,CACE,OAAOvB,CACT,CACA,SAASjB,GAAoB9rE,EAAO6qE,EAAgB1vB,EAAW3zG,EAAK,CAClE,IAAIqiD,EAAOsxD,EAAU,KACjB+T,EAAY/T,EAAU,SAAS,UAAU,EACzCiwB,EAAQlc,EAAU,IAAI,MAAM,EAIhC,GAHIkc,IAAU,QAAU5jI,EAAI,kBAC1B4jI,EAAQ5jI,EAAI,gBAAgB,UAAU,GAEpC,GAAC4jI,GAASvhF,EAAK,MAAM,QAAO,GAShC,SANI22E,EAAiBtR,EAAU,SAAS,WAAW,EAC/Cgf,EAAe1mI,EAAI,cAAgB0nH,EAAU,IAAI,QAAQ,EACzD6C,EAAcloE,EAAK,eAAgB,EACnCgiF,EAAWmC,GAAYjc,EAAa8Y,EAAe,UAAWqD,EAAcvzI,EAAS6lI,EAAe,eAAgB,CACtH,OAAQrlB,EAAU,IAAI,CAAC,WAAY,YAAa,OAAO,CAAC,CACzD,CAAA,EAAG,OAAO,EACF/jH,EAAI,EAAGA,EAAIy0I,EAAS,OAAQz0I,IACnC4oE,EAAM,IAAI6rE,EAASz0I,CAAC,CAAC,EAEvB,OAAOy0I,EACT,CACA,SAASK,GAAoBlsE,EAAO6qE,EAAgB1vB,EAAWozB,EAAe,CAC5E,IAAI1kF,EAAOsxD,EAAU,KACjBgX,EAAiBhX,EAAU,SAAS,WAAW,EACnD,GAAI,GAACgX,EAAe,IAAI,MAAM,GAAKtoE,EAAK,MAAM,WAG9C,KAAIuoE,EAAmBvoE,EAAK,oBAAqB,EACjD,GAAKuoE,EAAiB,OAQtB,QALIoO,EAAiBrO,EAAe,SAAS,WAAW,EACpD+b,EAAeK,EAAgBpc,EAAe,IAAI,QAAQ,EAC1Dqc,EAAqB7zI,EAAS6lI,EAAe,aAAc,EAAE7lI,EAASwgH,EAAU,SAAS,UAAU,EAAE,aAAY,EAAI,CACvH,OAAQA,EAAU,IAAI,CAAC,WAAY,YAAa,OAAO,CAAC,CAC5D,CAAG,CAAC,EACO/jH,EAAI,EAAGA,EAAIg7H,EAAiB,OAAQh7H,IAE3C,QADIq3I,EAAgBT,GAAY5b,EAAiBh7H,CAAC,EAAGyzI,EAAe,UAAWqD,EAAcM,EAAoB,cAAgBp3I,CAAC,EACzH4b,EAAI,EAAGA,EAAIy7H,EAAc,OAAQz7H,IACxCgtD,EAAM,IAAIyuE,EAAcz7H,CAAC,CAAC,EAGhC,CACA,SAASg5H,GAAehsE,EAAO6qE,EAAgB1vB,EAAW3zG,EAAK,CAC7D,IAAIqiD,EAAOsxD,EAAU,KACjBuzB,EAAOzxI,GAASuK,EAAI,cAAe2zG,EAAU,IAAI,CAAC,YAAa,MAAM,CAAC,CAAC,EAC3E,GAAI,GAACuzB,GAAQ7kF,EAAK,MAAM,QAAO,GAG/B,KAAIwlE,EAAalU,EAAU,SAAS,WAAW,EAC3CwzB,EAActf,EAAW,IAAI,QAAQ,EACrCM,EAAS9lE,EAAK,cAAe,EAE7B+kF,GAAiB3xI,GAASuK,EAAI,YAAa6nH,EAAW,IAAI,QAAQ,CAAC,GAAK,GAAKvkF,GAAK,IAClFyhG,EAAc3B,GAAY,gBAAgBpjI,EAAI,SAAUonI,EAAepnI,EAAI,cAAc,EACzFqnI,EAAkB1zB,EAAU,eAAiBA,EAAU,cAAc,EAAI,EACzE4wB,EAAW,CAAE,EACb9kC,EAAS2jC,GAAY,cAAczvB,CAAS,EAC5C2zB,EAAe3zB,EAAU,IAAI,cAAc,EAC/Ct/G,OAAAA,EAAK8zH,EAAQ,SAAUU,EAAWj+F,EAAO,CACvC,IAAIk2F,EAAYz+D,EAAK,MAAM,OAAS,UAAYA,EAAK,MAAM,oBAAoBwmE,EAAU,SAAS,EAAIA,EAAU,UAC5G0e,EAAiB1e,EAAU,eAC3BsB,EAAWtB,EAAU,SACrB2e,EAAiB3f,EACrB,GAAIwf,GAAmBA,EAAgBvmB,CAAS,EAAG,CACjD,IAAI2mB,EAAkBJ,EAAgBvmB,CAAS,EAC3CjuH,EAAS40I,CAAe,GAAKA,EAAgB,YAC/CD,EAAiB,IAAIh5E,GAAMi5E,EAAgB,UAAW5f,EAAYlU,EAAU,OAAO,EAE3F,CACI,IAAI+zB,EAAYF,EAAe,gBAAkB7zB,EAAU,IAAI,CAAC,WAAY,YAAa,OAAO,CAAC,EAC7FkzB,EAAYxkF,EAAK,YAAYy+D,CAAS,EACtC8X,EAAQ4O,EAAe,WAAW,QAAS,EAAI,GAAKzC,EAAY,UAChE4C,EAAWjyI,EAAU8xI,EAAe,WAAW,gBAAiB,EAAI,EAAG5O,CAAK,EAC5EgP,EAAWlyI,EAAU8xI,EAAe,WAAW,gBAAiB,EAAI,EAAG5O,CAAK,EAC5Er1G,EAAgBikH,EAAe,WAAW,gBAAiB,EAAI,GAAKA,EAAe,WAAW,WAAY,EAAI,GAAKzC,EAAY,kBAC/H8C,EAAmBnyI,EAAU8xI,EAAe,WAAW,wBAAyB,EAAI,EAAGjkH,CAAa,EACpGukH,EAAmBpyI,EAAU8xI,EAAe,WAAW,wBAAyB,EAAI,EAAGjkH,CAAa,EACpG1V,EAAS,IAAIy9E,GAAa,CAC5B,EAAGu7C,EACH,EAAG7mI,EAAI,YAAcA,EAAI,eAAiBmnI,EAC1C,SAAUpC,EAAY,SACtB,OAAQtlC,EACR,GAAI,IAAMopB,EAAU,OAAS,GAC7B,MAAO79D,GAAgBw8E,EAAgB,CACrC,KAAMD,EACN,MAAO38G,IAAU,EAAI+8G,EAAW/8G,IAAUu9F,EAAO,OAAS,EAAIyf,EAAWhP,EACzE,cAAehuG,IAAU,EAAIi9G,EAAmBj9G,IAAUu9F,EAAO,OAAS,EAAI2f,EAAmBvkH,EACjG,KAAMxuB,EAAW2yI,CAAS,EAAIA,EAQ9BrlF,EAAK,OAAS,WAAa8nE,EAAW9nE,EAAK,OAAS,QAAUy+D,EAAY,GAAKA,EAAWl2F,CAAK,EAAI88G,CACpG,CAAA,CACP,CAAK,EAeD,GAdA75H,EAAO,KAAO,SAAWizG,EACzBskB,GAAyB,CACvB,GAAIv3H,EACJ,eAAgB8lG,EAChB,SAAU4zB,EACV,qBAAsB,CACpB,YAAa,UAAY,CACvB,OAAO15H,EAAO,WACf,EACD,MAAOs8G,EACP,UAAWv/F,CACnB,CACA,CAAK,EAEG08G,EAAc,CAChB,IAAI5D,EAAYN,GAAY,sBAAsBzvB,CAAS,EAC3D+vB,EAAU,WAAa,YACvBA,EAAU,MAAQvZ,EAClBuZ,EAAU,UAAY94G,EAClBy3B,EAAK,OAAS,aAChBqhF,EAAU,UAAY5iB,GAExBzxE,GAAUxhC,CAAM,EAAE,UAAY61H,CACpC,CAEIL,EAAe,IAAIx1H,CAAM,EACzBA,EAAO,gBAAiB,EACxB02H,EAAS,KAAK12H,CAAM,EACpB2qD,EAAM,IAAI3qD,CAAM,EAChBA,EAAO,mBAAoB,CAC/B,CAAG,EACM02H,EACT,CCxhBO,SAASwD,GAAQxzG,EAASmf,EAAK,CACpC,IAAIvhD,EAAS,CAeX,SAAU,CAAE,EACZ,eAAgB,GAKhB,iBAAkB,CAAE,EACpB,YAAa,CAAA,CACd,EACD,OAAA61I,GAAgB71I,EAAQoiC,EAASmf,CAAG,EAEpCvhD,EAAO,gBAAkB81I,GAAkB91I,EAAQoiC,CAAO,EACnDpiC,CACT,CACA,SAAS61I,GAAgB71I,EAAQoiC,EAASmf,EAAK,CAC7C,IAAIw0F,EAAqB3zG,EAAQ,aAAa,SAAS,EACnD4zG,EAAyB5zG,EAAQ,aAAa,aAAa,EAE3D6zG,EAAcD,EAAuB,IAAI,OAAQ,EAAI,GAAK,CAAE,EAC5DE,EAAa,CAAE,EAEnBh0I,EAAKq/C,EAAI,qBAAsB,EAAE,SAAUkB,EAAU,CAEnD,GAAI,CAACA,EAAS,mBACZ,OAEF,IAAI0zF,EAAcC,GAAQ3zF,EAAS,KAAK,EACpC4zF,EAAqBr2I,EAAO,iBAAiBm2I,CAAW,EAAI,CAAE,EAClEn2I,EAAO,YAAYm2I,CAAW,EAAI1zF,EAGlC,IAAI6zF,EAAgB7zF,EAAS,MACzB8zF,EAAmBD,EAAc,SAAS,UAAWP,CAAkB,EAI3E,GAHA7zI,EAAKugD,EAAS,QAAS,EAAE5/C,GAAM2zI,EAAqB,GAAO,IAAI,CAAC,EAG5D/zF,EAAS,gBAAkBszF,GAG5BQ,EAAiB,IAAI,MAAM,EAAG,CAG/B,IAAIE,EAAcF,EAAiB,IAAI,SAAS,IAAM,OAClDG,EAAQH,EAAiB,IAAI,CAAC,cAAe,MAAM,CAAC,IAAM,QAC1DI,EAAcl0F,EAAS,eAAe8zF,EAAiB,IAAI,CAAC,cAAe,MAAM,CAAC,CAAC,GACnFE,GAAeC,IACjBx0I,EAAKy0I,EAAY,SAAU9zI,GAAM2zI,EAAqBE,EAAQ,QAAU,GAAMD,CAAW,CAAC,EAExFC,GACFx0I,EAAKy0I,EAAY,UAAW9zI,GAAM2zI,EAAqB,QAAS,EAAK,CAAC,CAE9E,CAGI,SAASA,EAAoBI,EAAaC,EAAgB3mF,EAAM,CAC9D,IAAI4mF,EAAmB5mF,EAAK,MAAM,SAAS,cAAe8lF,CAAsB,EAC5Ee,EAAkBD,EAAiB,IAAI,MAAM,EACjD,GAAI,GAACC,GAAmBA,IAAoB,QAAU,CAACH,GAAe,CAACI,GAAgBF,CAAgB,GAGvG,CAAID,GAAkB,OACpBA,EAAiBC,EAAiB,IAAI,gBAAgB,GAExDA,EAAmBF,EAAcK,GAAqB/mF,EAAMqmF,EAAkBP,EAAwB5zG,EAASw0G,EAAaC,CAAc,EAAIC,EAC9I,IAAII,EAAOJ,EAAiB,IAAI,MAAM,EAClCK,EAAkBL,EAAiB,IAAI,iBAAiB,EACxDjtB,EAAUusB,GAAQlmF,EAAK,KAAK,EAC5BknF,EAAgBP,GAAkBK,GAAQhnF,EAAK,OAAS,WAExDmnF,EAAWr3I,EAAO,SAAS6pH,CAAO,EAAI,CACxC,IAAKA,EACL,KAAM35D,EACN,SAAUzN,EACV,iBAAkBq0F,EAClB,eAAgBD,EAChB,gBAAiBM,EACjB,cAAeC,EACf,KAAMF,EACN,UAAWF,GAAgBF,CAAgB,EAC3C,aAAc,CAAE,EAChB,UAAW,IACZ,EACDT,EAAmBxsB,CAAO,EAAIwtB,EAC9Br3I,EAAO,eAAiBA,EAAO,gBAAkBo3I,EACjD,IAAIE,EAAaC,GAAkBtB,EAAa/lF,CAAI,EACpD,GAAIonF,GAAc,KAAM,CACtB,IAAIE,EAAYtB,EAAWoB,CAAU,IAAMpB,EAAWoB,CAAU,EAAI,CAClE,SAAU,CAAA,CACpB,GACQE,EAAU,SAAS3tB,CAAO,EAAIwtB,EAC9BG,EAAU,OAASvB,EAAYqB,CAAU,EAAE,OAC3CD,EAAS,UAAYG,CAC7B,EACA,CACA,CAAG,CACH,CACA,SAASP,GAAqB/mF,EAAMqmF,EAAkBP,EAAwB5zG,EAASw0G,EAAaC,EAAgB,CAClH,IAAIY,EAA0BlB,EAAiB,SAAS,aAAa,EACjE9sE,EAAS,CAAC,OAAQ,OAAQ,YAAa,cAAe,QAAS,YAAa,0BAA2B,wBAAyB,GAAG,EACnIiuE,EAAiB,CAAE,EACvBx1I,EAAKunE,EAAQ,SAAUkuE,EAAO,CAC5BD,EAAeC,CAAK,EAAI73I,EAAM23I,EAAwB,IAAIE,CAAK,CAAC,CACpE,CAAG,EAIDD,EAAe,KAAOxnF,EAAK,OAAS,YAAc,CAAC,CAAC2mF,EAGhDY,EAAwB,IAAI,MAAM,IAAM,UAC1CC,EAAe,KAAO,QAExB,IAAIE,EAAcF,EAAe,QAAUA,EAAe,MAAQ,CAAA,GAGlE,GADAE,EAAY,MAAQ,OAASA,EAAY,KAAO,IAC5ChB,IAAgB,QAAS,CAE3B,IAAIiB,EAA8BJ,EAAwB,IAAI,CAAC,QAAS,MAAM,CAAC,EAI/E,GAHAG,EAAY,KAAOC,GAAoE,GAGnF,CAAChB,EAAgB,CACnB,IAAIiB,EAAaJ,EAAe,UAAYD,EAAwB,IAAI,YAAY,EACpFK,GAAc92I,EAAS42I,EAAaE,EAAW,SAAS,CAC9D,CACA,CACE,OAAO5nF,EAAK,MAAM,SAAS,cAAe,IAAImM,GAAMq7E,EAAgB1B,EAAwB5zG,CAAO,CAAC,CACtG,CACA,SAAS0zG,GAAkB91I,EAAQoiC,EAAS,CAE1CA,EAAQ,WAAW,SAAUmgB,EAAa,CAExC,IAAIE,EAAWF,EAAY,iBACvBw1F,EAAuBx1F,EAAY,IAAI,CAAC,UAAW,SAAS,EAAG,EAAI,EACnEy1F,EAAoBz1F,EAAY,IAAI,CAAC,UAAW,MAAM,EAAG,EAAI,EAC7D,CAACE,GAAYs1F,IAAyB,QAAUA,IAAyB,IAASA,IAAyB,QAAUC,IAAsB,IAASz1F,EAAY,IAAI,CAAC,cAAe,MAAM,EAAG,EAAI,IAAM,IAG3MrgD,EAAKlC,EAAO,iBAAiBo2I,GAAQ3zF,EAAS,KAAK,CAAC,EAAG,SAAU40F,EAAU,CACzE,IAAInnF,EAAOmnF,EAAS,KAChB50F,EAAS,QAAQyN,EAAK,GAAG,IAAMA,IACjCmnF,EAAS,aAAa,KAAK90F,CAAW,EACtC80F,EAAS,iBAAmB,OAASA,EAAS,gBAAkB,GAChEA,EAAS,iBAAmB90F,EAAY,QAAO,EAAG,MAAO,EAEjE,CAAK,CACL,CAAG,CACH,CAeA,SAASg1F,GAAkBtB,EAAa/lF,EAAM,CAG5C,QAFIsxD,EAAYtxD,EAAK,MACjBpY,EAAMoY,EAAK,IACNzyD,EAAI,EAAGA,EAAIw4I,EAAY,OAAQx4I,IAAK,CAC3C,IAAIw6I,EAAahC,EAAYx4I,CAAC,GAAK,CAAE,EACrC,GAAIy6I,GAAgBD,EAAWngG,EAAM,QAAQ,EAAG0pE,EAAU,EAAE,GAAK02B,GAAgBD,EAAWngG,EAAM,WAAW,EAAG0pE,EAAU,cAAc,GAAK02B,GAAgBD,EAAWngG,EAAM,UAAU,EAAG0pE,EAAU,IAAI,EACvM,OAAO/jH,CAEb,CACA,CACA,SAASy6I,GAAgBC,EAAeC,EAAe,CACrD,OAAOD,IAAkB,OAASt3I,EAAQs3I,CAAa,GAAK/2I,EAAQ+2I,EAAeC,CAAa,GAAK,GAAKD,IAAkBC,CAC9H,CACO,SAASC,GAAS72B,EAAW,CAClC,IAAI61B,EAAWiB,GAAY92B,CAAS,EACpC,GAAK61B,EAGL,KAAIP,EAAmBO,EAAS,iBAC5B7wI,EAAQ6wI,EAAS,KAAK,MACtB/6E,EAASw6E,EAAiB,OAC1B73D,EAAS63D,EAAiB,IAAI,QAAQ,EACtCx1I,EAAQw1I,EAAiB,IAAI,OAAO,EAEpCx1I,GAAS,OACXA,EAAQkF,EAAM,MAAMlF,CAAK,GAE3B,IAAIi3I,EAAYvB,GAAgBF,CAAgB,EAG5C73D,GAAU,OACZ3iB,EAAO,OAASi8E,EAAY,OAAS,QAEvC,IAAI5oF,EAASnpD,EAAM,UAAS,EAAG,MAAO,EACtCmpD,EAAO,CAAC,EAAIA,EAAO,CAAC,GAAKA,EAAO,QAAS,GAGzCruD,GAAS,MAGNA,EAAQquD,EAAO,CAAC,KAEjBruD,EAAQquD,EAAO,CAAC,GAEdruD,EAAQquD,EAAO,CAAC,IAClBruD,EAAQquD,EAAO,CAAC,GAElB2M,EAAO,MAAQh7D,EACXi3I,IACFj8E,EAAO,OAAS+6E,EAAS,KAAK,MAAM,QAAO,EAAK,OAAS,QAE7D,CACO,SAASiB,GAAY92B,EAAW,CACrC,IAAIg3B,GAAoBh3B,EAAU,QAAQ,aAAa,aAAa,GAAK,CAAA,GAAI,iBAC7E,OAAOg3B,GAAoBA,EAAiB,SAASpC,GAAQ50B,CAAS,CAAC,CACzE,CACO,SAASi3B,GAAoBj3B,EAAW,CAC7C,IAAI61B,EAAWiB,GAAY92B,CAAS,EACpC,OAAO61B,GAAYA,EAAS,gBAC9B,CACA,SAASL,GAAgBF,EAAkB,CACzC,MAAO,CAAC,CAACA,EAAiB,IAAI,CAAC,SAAU,MAAM,CAAC,CAClD,CAKO,SAASV,GAAQpvG,EAAO,CAC7B,OAAOA,EAAM,KAAO,KAAOA,EAAM,EACnC,CCxPA,IAAI0xG,GAAmB,CAAC,EAIpBC,GAAwB,SAAU5kI,EAAQ,CAC5CC,EAAU2kI,EAAU5kI,CAAM,EAC1B,SAAS4kI,GAAW,CAClB,IAAI1kI,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO0kI,EAAS,KACf1kI,CAAA,CAKT0kI,OAAAA,EAAS,UAAU,OAAS,SAAUn3B,EAAWp/E,EAASmf,EAAKxf,EAAS,CAMjE,KAAA,kBAAoB62G,GAAgCp3B,CAAS,EAClEztG,EAAO,UAAU,OAAO,MAAM,KAAM,SAAS,EACxC,KAAA,0BAA0BytG,EAAWjgE,EAAK,EAAI,CACrD,EAIAo3F,EAAS,UAAU,kBAAoB,SAAUn3B,EAAWp/E,EAASmf,EAAKxf,EAAS,CAC5E,KAAA,0BAA0By/E,EAAWjgE,EAAK,EAAK,CACtD,EAIAo3F,EAAS,UAAU,OAAS,SAAUv2G,EAASmf,EAAK,CAClD,IAAIs3F,EAAc,KAAK,aACRA,GAAAA,EAAY,OAAOt3F,CAAG,CACvC,EAIAo3F,EAAS,UAAU,QAAU,SAAUv2G,EAASmf,EAAK,CACnD,KAAK,oBAAoBA,CAAG,EAC5BxtC,EAAO,UAAU,QAAQ,MAAM,KAAM,SAAS,CAChD,EACA4kI,EAAS,UAAU,0BAA4B,SAAUn3B,EAAWjgE,EAAKu3F,EAAa,CACpF,IAAItoC,EAAQmoC,EAAS,oBAAoB,KAAK,gBAAgB,EAC9D,GAAKnoC,EAGD,KAAAsmC,EAAmBiC,GAA2Cv3B,CAAS,EAC3Es1B,GAAoB,KAAK,eAAiB,KAAK,aAAe,IAAItmC,IAAU,OAAOgR,EAAWs1B,EAAkBv1F,EAAKu3F,CAAW,EAAI,KAAK,oBAAoBv3F,CAAG,EAClK,EACAo3F,EAAS,UAAU,oBAAsB,SAAUp3F,EAAK,CACtD,KAAK,cAAgB,KAAK,aAAa,QAAQA,CAAG,EAClD,KAAK,aAAe,IACtB,EACAo3F,EAAS,yBAA2B,SAAU11I,EAAMzB,EAAO,CAMzDk3I,GAAiBz1I,CAAI,EAAIzB,CAC3B,EAEAm3I,EAAS,oBAAsB,SAAU11I,EAAM,CACtC,OAAAA,GAAQy1I,GAAiBz1I,CAAI,CACtC,EAEA01I,EAAS,KAAO,OACTA,CAAA,EACPhkD,EAAa,ECvEX7rB,GAAQ9mC,GAAW,EAChB,SAASg3G,GAA4BC,EAAUC,EAAW13B,EAAWwrB,EAAW,CACrF,IAAI98E,EAAOsxD,EAAU,KACrB,GAAI,CAAAtxD,EAAK,MAAM,UAIf,KAAIipF,EAAiB33B,EAAU,SAAS,WAAW,EAC/CslB,EAAiBqS,EAAe,SAAS,WAAW,EACpDC,EAAatS,EAAe,IAAI,OAAO,EACvCuI,EAAWrC,EAAU,iBAAiB,QAAS,EAC/C5U,EAAcloE,EAAK,eAAe,CACpC,UAAWipF,EACX,MAAO,EACX,CAAG,EACD,GAAK/gB,EAAY,OAKjB,KAAIihB,EAAgBD,EAAW,OAC3BE,EAAsBxwE,GAAMmwE,CAAQ,EAAE,gBACtCM,EAAqBpmD,EAAsB,EAC3CqmD,EAAa,EACjB,GAAIF,EACF,QAAS77I,EAAI,EAAGA,EAAI26H,EAAY,OAAQ36H,IAAK,CAC3C,IAAIg8I,EAASH,EAAoB,IAAIlhB,EAAY36H,CAAC,EAAE,SAAS,EAC7D,GAAIg8I,GAAU,KAAM,CAClBD,GAAcC,GAAUJ,EAAgB,GAAK57I,GAAK47I,EAClD,KACR,CACA,CAEE,IAAIx6H,EAAOqxC,EAAK,cAAckoE,EAAY,CAAC,EAAE,KAAK,EAC9CshB,EAAY5S,EAAe,aAAc,EAC7CsS,EAAa72E,EAAe62E,CAAU,EAAIA,EAAa,CAACA,CAAU,EAClE,QAAS37I,EAAI,EAAGA,EAAI26H,EAAY,OAAQ36H,IAAK,CAC3C,IAAIi3I,EAAYxkF,EAAK,cAAckoE,EAAY36H,CAAC,EAAE,KAAK,EACnDsI,EAAI,OACJC,EAAI,OACJ3H,EAAQ,OACRyT,EAAS,OACTo+C,EAAK,gBACPnqD,EAAI8Y,EACJ7Y,EAAIqpI,EAAS,EACbhxI,EAAQq2I,EAAY3uI,EACpB+L,EAASu9H,EAAS,OAClBxwH,EAAO9Y,EAAI1H,IAEX0H,EAAIspI,EAAS,EACbrpI,EAAI6Y,EACJxgB,EAAQgxI,EAAS,MACjBv9H,EAAS4iI,EAAY1uI,EACrB6Y,EAAO7Y,EAAI8L,GAEb,IAAI68G,EAAYyJ,EAAY36H,EAAI,CAAC,EAAE,UACnCkxH,GAAa,MAAQ4qB,EAAmB,IAAI5qB,EAAW6qB,CAAU,EACjEN,EAAU,IAAI,IAAIhgD,GAAa,CAC7B,KAAMy1B,GAAa,KAAO,QAAUA,EAAY,KAChD,MAAO,CACL,EAAG5oH,EACH,EAAGC,EACH,MAAO3H,EACP,OAAQyT,CACT,EACD,MAAOswD,EAAgB,CACrB,KAAMg3E,EAAWI,CAAU,CAC5B,EAAEE,CAAS,EACZ,UAAW,GACX,OAAQ,EACd,CAAK,CAAC,EACFF,GAAcA,EAAa,GAAKH,CACpC,CACEvwE,GAAMmwE,CAAQ,EAAE,gBAAkBM,GACpC,CACO,SAASI,GAA0BV,EAAU,CAClDnwE,GAAMmwE,CAAQ,EAAE,gBAAkB,IACpC,CCxEA,IAAIW,GAAmB,CAAC,WAAY,gBAAiB,UAAU,EAC3DC,GAAmB,CAAC,YAAa,YAAa,gBAAgB,EAC9DC,GAAiC,SAAU/lI,EAAQ,CACrDC,EAAU8lI,EAAmB/lI,CAAM,EACnC,SAAS+lI,GAAoB,CAC3B,IAAI7lI,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO6lI,EAAkB,KAC/B7lI,EAAM,iBAAmB,uBAClBA,CACX,CAIE,OAAA6lI,EAAkB,UAAU,OAAS,SAAUt4B,EAAWp/E,EAASmf,EAAKxf,EAAS,CAC/E,KAAK,MAAM,UAAW,EACtB,IAAIg4G,EAAe,KAAK,WAGxB,GAFA,KAAK,WAAa,IAAI/gD,GACtB,KAAK,MAAM,IAAI,KAAK,UAAU,EAC1B,EAACwoB,EAAU,IAAI,MAAM,EAGzB,KAAIwrB,EAAYxrB,EAAU,iBAAkB,EACxCvuD,EAAS+mF,GAA2BhN,EAAWxrB,CAAS,EACxDy4B,EAAc,IAAIhJ,GAAYzvB,EAAW97E,EAAc,CACzD,gBAAiB,SAAUw0G,EAAa,CAEtC,QADIC,EAAanN,EAAU,iBAAiB,cAAe,EAClDvvI,EAAI,EAAGA,EAAI08I,EAAW,OAAQ18I,IACrC,GAAImnH,GAAqBu1B,EAAW18I,CAAC,EAAE,aAAa+jH,EAAU,IAAI,EAAE,KAAK,EAEvE,MAAO,GAIX,MAAO,EACf,CACK,EAAEvuD,CAAM,CAAC,EACVjmC,EAAY4sH,GAAkBK,EAAY,IAAKA,CAAW,EAC1D,KAAK,WAAW,IAAIA,EAAY,SAAQ,CAAE,EAC1CjtH,EAAY6sH,GAAkB,SAAUjsI,EAAM,CACxC4zG,EAAU,IAAI,CAAC5zG,EAAM,MAAM,CAAC,GAC9BwsI,GAAoBxsI,CAAI,EAAE,KAAM,KAAK,WAAY4zG,EAAWwrB,CAAS,CAExE,EAAE,IAAI,EAIP,IAAIqN,EAA6Bt4G,GAAWA,EAAQ,OAAS,mBAAqBA,EAAQ,WACrFs4G,GACHC,GAAwBP,EAAc,KAAK,WAAYv4B,CAAS,EAElEztG,EAAO,UAAU,OAAO,KAAK,KAAMytG,EAAWp/E,EAASmf,EAAKxf,CAAO,EACpE,EACD+3G,EAAkB,UAAU,OAAS,UAAY,CAC/CH,GAA0B,IAAI,CAC/B,EACDG,EAAkB,KAAO,gBAClBA,CACT,EAAEnB,EAAQ,EACNyB,GAAsB,CACxB,UAAW,SAAUnB,EAAUC,EAAW13B,EAAWwrB,EAAW,CAC9D,IAAI98E,EAAOsxD,EAAU,KACrB,GAAI,CAAAtxD,EAAK,MAAM,UAGf,KAAIqqF,EAAiB/4B,EAAU,SAAS,WAAW,EAC/CqlB,EAAiB0T,EAAe,SAAS,WAAW,EACpDC,EAAa3T,EAAe,IAAI,OAAO,EACvC4T,EAAcF,EAAe,IAAI,aAAa,IAAM,GACpDG,EAAcH,EAAe,IAAI,aAAa,IAAM,GACxDC,EAAaj4E,EAAei4E,CAAU,EAAIA,EAAa,CAACA,CAAU,EAUlE,QATInL,EAAWrC,EAAU,iBAAiB,QAAS,EAC/CvL,EAAevxE,EAAK,aAAc,EAClCrmB,EAAY,EACZuuF,EAAcloE,EAAK,eAAe,CACpC,UAAWqqF,CACjB,CAAK,EACGrpI,EAAK,CAAE,EACPF,EAAK,CAAE,EACPk5H,EAAYrD,EAAe,aAAc,EACpCppI,EAAI,EAAGA,EAAI26H,EAAY,OAAQ36H,IAAK,CAC3C,IAAIi3I,EAAYxkF,EAAK,cAAckoE,EAAY36H,CAAC,EAAE,KAAK,EACvD,GAAI,EAAAA,IAAM,GAAK,CAACg9I,GAAeh9I,IAAM26H,EAAY,OAAS,GAAK,CAACsiB,GAGhE,KAAI/rB,EAAYyJ,EAAY36H,CAAC,EAAE,UAC3BgkI,GACFvwH,EAAG,CAAC,EAAIwjI,EACRxjI,EAAG,CAAC,EAAIm+H,EAAS,EACjBr+H,EAAG,CAAC,EAAI0jI,EACR1jI,EAAG,CAAC,EAAIq+H,EAAS,EAAIA,EAAS,SAE9Bn+H,EAAG,CAAC,EAAIm+H,EAAS,EACjBn+H,EAAG,CAAC,EAAIwjI,EACR1jI,EAAG,CAAC,EAAIq+H,EAAS,EAAIA,EAAS,MAC9Br+H,EAAG,CAAC,EAAI0jI,GAEV,IAAI8E,EAAa3vG,IAAc2wG,EAAW,OACtCrvG,EAAO,IAAI20D,GAAa,CAC1B,KAAM6uB,GAAa,KAAO,QAAUA,EAAY,KAChD,UAAW,GACX,MAAO,CACL,GAAIz9G,EAAG,CAAC,EACR,GAAIA,EAAG,CAAC,EACR,GAAIF,EAAG,CAAC,EACR,GAAIA,EAAG,CAAC,CACT,EACD,MAAOoxD,EAAgB,CACrB,OAAQo4E,EAAWhB,CAAU,CAC9B,EAAEtP,CAAS,EACZ,OAAQ,EAChB,CAAO,EACD0H,GAA6BzmG,EAAK,MAAO++F,EAAU,SAAS,EAC5DgP,EAAU,IAAI/tG,CAAI,EACxB,EACG,EACD,eAAgB,SAAU8tG,EAAUC,EAAW13B,EAAWwrB,EAAW,CACnE,IAAI98E,EAAOsxD,EAAU,KACjBm5B,EAAsBn5B,EAAU,SAAS,gBAAgB,EACzDqlB,EAAiB8T,EAAoB,SAAS,WAAW,EACzDtL,EAAWrC,EAAU,iBAAiB,QAAS,EAC/CvL,EAAevxE,EAAK,aAAc,EAClCuoE,EAAmBvoE,EAAK,oBAAqB,EACjD,GAAKuoE,EAAiB,OAMtB,QAHIvnH,EAAK,CAAE,EACPF,EAAK,CAAE,EACPk5H,EAAYrD,EAAe,aAAc,EACpCppI,EAAI,EAAGA,EAAIg7H,EAAiB,OAAQh7H,IAC3C,QAAS4b,EAAI,EAAGA,EAAIo/G,EAAiBh7H,CAAC,EAAE,OAAQ4b,IAAK,CACnD,IAAIq7H,EAAYxkF,EAAK,cAAcuoE,EAAiBh7H,CAAC,EAAE4b,CAAC,EAAE,KAAK,EAC3DooH,GACFvwH,EAAG,CAAC,EAAIwjI,EACRxjI,EAAG,CAAC,EAAIm+H,EAAS,EACjBr+H,EAAG,CAAC,EAAI0jI,EACR1jI,EAAG,CAAC,EAAIq+H,EAAS,EAAIA,EAAS,SAE9Bn+H,EAAG,CAAC,EAAIm+H,EAAS,EACjBn+H,EAAG,CAAC,EAAIwjI,EACR1jI,EAAG,CAAC,EAAIq+H,EAAS,EAAIA,EAAS,MAC9Br+H,EAAG,CAAC,EAAI0jI,GAEV,IAAIvpG,EAAO,IAAI20D,GAAa,CAC1B,KAAM,cAAgB24B,EAAiBh7H,CAAC,EAAE4b,CAAC,EAAE,UAC7C,UAAW,GACX,MAAO,CACL,GAAInI,EAAG,CAAC,EACR,GAAIA,EAAG,CAAC,EACR,GAAIF,EAAG,CAAC,EACR,GAAIA,EAAG,CAAC,CACT,EACD,MAAOk5H,EACP,OAAQ,EAClB,CAAS,EACD0H,GAA6BzmG,EAAK,MAAO++F,EAAU,SAAS,EAC5DgP,EAAU,IAAI/tG,CAAI,CAC1B,CAEG,EACD,UAAW,SAAU8tG,EAAUC,EAAW13B,EAAWwrB,EAAW,CAC9DgM,GAA4BC,EAAUC,EAAW13B,EAAWwrB,CAAS,CACzE,CACA,EACI4N,GAAkC,SAAU7mI,EAAQ,CACtDC,EAAU4mI,EAAoB7mI,CAAM,EACpC,SAAS6mI,GAAqB,CAC5B,IAAI3mI,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO2mI,EAAmB,KACzB3mI,CACX,CACE,OAAA2mI,EAAmB,KAAO,QACnBA,CACT,EAAEd,EAAiB,EAEfe,GAAkC,SAAU9mI,EAAQ,CACtDC,EAAU6mI,EAAoB9mI,CAAM,EACpC,SAAS8mI,GAAqB,CAC5B,IAAI5mI,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO2mI,GAAmB,KACzB3mI,CACX,CACE,OAAA4mI,EAAmB,KAAO,QACnBA,CACT,EAAEf,EAAiB,ECrLfgB,GAAwB,SAAU/mI,EAAQ,CAC5CC,EAAU8mI,EAAU/mI,CAAM,EAC1B,SAAS+mI,GAAW,CAClB,IAAI7mI,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO,OACNA,CACX,CACE,OAAA6mI,EAAS,UAAU,OAAS,SAAU9N,EAAW5qG,EAAS,CACxD,KAAK,MAAM,UAAW,EAClB4qG,EAAU,IAAI,MAAM,GACtB,KAAK,MAAM,IAAI,IAAI3zF,GAAK,CACtB,MAAO2zF,EAAU,iBAAiB,QAAS,EAC3C,MAAOhsI,EAAS,CACd,KAAMgsI,EAAU,IAAI,iBAAiB,CAC/C,EAAWA,EAAU,cAAc,EAC3B,OAAQ,GACR,GAAI,EACZ,CAAO,CAAC,CAEL,EACD8N,EAAS,KAAO,OACTA,CACT,EAAEnmD,EAAa,EACXomD,GAAc,CAGhB,OAAQ,CACV,EACO,SAASjR,GAAQC,EAAW,CACjCA,EAAU,sBAAsB+Q,EAAQ,EACxC/Q,EAAU,uBAAuBI,EAAS,EAC1CJ,EAAU,yBAAyB,cAAe2E,EAAI,EACtDjE,GAAiBV,EAAW,IAAKK,GAAoB2Q,EAAW,EAChEtQ,GAAiBV,EAAW,IAAKK,GAAoB2Q,EAAW,EAChEhR,EAAU,sBAAsB6Q,EAAkB,EAClD7Q,EAAU,sBAAsB8Q,EAAkB,EAClD9Q,EAAU,qBAAqB,SAAUztE,EAAQ,CAE3CA,EAAO,OAASA,EAAO,OAAS,CAACA,EAAO,OAC1CA,EAAO,KAAO,CAAE,EAEtB,CAAG,CACH,CCjDA,IAAI0+E,GAAO,0BACJ,SAASC,GAAK3lH,EAAI4lH,EAAaC,EAAS,CAC7C,IAAIp7F,EAAQq7F,GAAS9lH,CAAE,EACvByqB,EAAMm7F,CAAW,EAAIC,CACvB,CACO,SAASE,GAAQ/lH,EAAI4lH,EAAaC,EAAS,CAChD,IAAIp7F,EAAQq7F,GAAS9lH,CAAE,EACnBgmH,EAAOv7F,EAAMm7F,CAAW,EACxBI,IAASH,IACXp7F,EAAMm7F,CAAW,EAAI,KAEzB,CACO,SAASK,GAAQjmH,EAAI4lH,EAAa,CACvC,MAAO,CAAC,CAACE,GAAS9lH,CAAE,EAAE4lH,CAAW,CACnC,CACA,SAASE,GAAS9lH,EAAI,CACpB,OAAOA,EAAG0lH,EAAI,IAAM1lH,EAAG0lH,EAAI,EAAI,CAAA,EACjC,CASAQ,GAAuB,CACrB,KAAM,mBACN,MAAO,oBACP,OAAQ,QACV,EAAG51I,EAAI,EC3BP,IAAI61I,GAA8B,SAAU1nI,EAAQ,CAClDC,EAAUynI,EAAgB1nI,CAAM,EAChC,SAAS0nI,EAAenmH,EAAI,CAC1B,IAAIrhB,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjCE,EAAM,IAAMqhB,EAEZ,IAAIomH,EAAmB/4I,EAAKsR,EAAM,kBAAmBA,CAAK,EACtD0nI,EAAmBh5I,EAAKsR,EAAM,kBAAmBA,CAAK,EACtD2nI,EAAiBj5I,EAAKsR,EAAM,gBAAiBA,CAAK,EAClD4nI,EAAoBl5I,EAAKsR,EAAM,mBAAoBA,CAAK,EACxD6nI,EAAen5I,EAAKsR,EAAM,cAAeA,CAAK,EAMlD,OAAAA,EAAM,OAAS,SAAU8nI,EAAaluI,EAAK,CAEzC,KAAK,QAAS,EACd,KAAK,KAAO7M,EAASlB,EAAM+N,CAAG,GAAK,CAAA,EAAI,CACrC,iBAAkB,GAClB,gBAAiB,GAEjB,iBAAkB,GAClB,wBAAyB,EACjC,CAAO,EACGkuI,GAAe,OACjBA,EAAc,KAEZA,IAAgB,IAAQA,IAAgB,QAAUA,IAAgB,SACpEzmH,EAAG,GAAG,YAAaomH,CAAgB,EACnCpmH,EAAG,GAAG,YAAaqmH,CAAgB,EACnCrmH,EAAG,GAAG,UAAWsmH,CAAc,IAE7BG,IAAgB,IAAQA,IAAgB,SAAWA,IAAgB,UACrEzmH,EAAG,GAAG,aAAcumH,CAAiB,EACrCvmH,EAAG,GAAG,QAASwmH,CAAY,EAE9B,EACD7nI,EAAM,QAAU,UAAY,CAC1BqhB,EAAG,IAAI,YAAaomH,CAAgB,EACpCpmH,EAAG,IAAI,YAAaqmH,CAAgB,EACpCrmH,EAAG,IAAI,UAAWsmH,CAAc,EAChCtmH,EAAG,IAAI,aAAcumH,CAAiB,EACtCvmH,EAAG,IAAI,QAASwmH,CAAY,CAC7B,EACM7nI,CACX,CACE,OAAAwnI,EAAe,UAAU,WAAa,UAAY,CAChD,OAAO,KAAK,SACb,EACDA,EAAe,UAAU,WAAa,UAAY,CAChD,OAAO,KAAK,SACb,EACDA,EAAe,UAAU,kBAAoB,SAAUO,EAAgB,CACrE,KAAK,eAAiBA,CACvB,EACDP,EAAe,UAAU,QAAU,UAAY,CAC7C,KAAK,QAAS,CACf,EACDA,EAAe,UAAU,kBAAoB,SAAU,EAAG,CACxD,GAAIQ,CAAAA,GAA6C,CAAC,EAIlD,SADInxI,EAAK,EAAE,OACJA,GAAI,CACT,GAAIA,EAAG,UACL,OAGFA,EAAKA,EAAG,cAAgBA,EAAG,MACjC,CACI,IAAI/E,EAAI,EAAE,QACNC,EAAI,EAAE,QAGN,KAAK,gBAAkB,KAAK,eAAe,EAAGD,EAAGC,CAAC,IACpD,KAAK,GAAKD,EACV,KAAK,GAAKC,EACV,KAAK,UAAY,IAEpB,EACDy1I,EAAe,UAAU,kBAAoB,SAAU,EAAG,CACxD,GAAI,GAAC,KAAK,WAAa,CAACS,GAAoB,kBAAmB,EAAG,KAAK,IAAI,GAAK,EAAE,eAAiB,SAAWC,GAAyB,KAAK,IAAK,WAAW,GAG5J,KAAIp2I,EAAI,EAAE,QACNC,EAAI,EAAE,QACNo2I,EAAO,KAAK,GACZC,EAAO,KAAK,GACZ50I,EAAK1B,EAAIq2I,EACT10I,EAAK1B,EAAIq2I,EACb,KAAK,GAAKt2I,EACV,KAAK,GAAKC,EACV,KAAK,KAAK,yBAA2B6N,GAAe,EAAE,KAAK,EAC3DyoI,GAAQ,KAAM,MAAO,kBAAmB,EAAG,CACzC,GAAI70I,EACJ,GAAIC,EACJ,KAAM00I,EACN,KAAMC,EACN,KAAMt2I,EACN,KAAMC,EACN,oBAAqB,IAC3B,CAAK,EACF,EACDy1I,EAAe,UAAU,gBAAkB,SAAU,EAAG,CACjDQ,GAA6C,CAAC,IACjD,KAAK,UAAY,GAEpB,EACDR,EAAe,UAAU,mBAAqB,SAAU,EAAG,CACzD,IAAIc,EAAaL,GAAoB,mBAAoB,EAAG,KAAK,IAAI,EACjEM,EAAaN,GAAoB,mBAAoB,EAAG,KAAK,IAAI,EACjE/uI,EAAa,EAAE,WACfsvI,EAAqB,KAAK,IAAItvI,CAAU,EACxCyrC,EAAU,EAAE,QACZC,EAAU,EAAE,QAEhB,GAAI,EAAA1rC,IAAe,GAAK,CAACovI,GAAc,CAACC,GAMxC,IAAID,EAAY,CASd,IAAIG,EAASD,EAAqB,EAAI,IAAMA,EAAqB,EAAI,IAAM,IACvEj2I,EAAQ2G,EAAa,EAAIuvI,EAAS,EAAIA,EAC1CC,GAAuB,KAAM,OAAQ,mBAAoB,EAAG,CAC1D,MAAOn2I,EACP,QAASoyC,EACT,QAASC,EACT,oBAAqB,IAC7B,CAAO,CACP,CACI,GAAI2jG,EAAY,CAEd,IAAII,EAAW,KAAK,IAAIzvI,CAAU,EAE9B0vI,GAAe1vI,EAAa,EAAI,EAAI,KAAOyvI,EAAW,EAAI,GAAMA,EAAW,EAAI,IAAO,KAC1FD,GAAuB,KAAM,aAAc,mBAAoB,EAAG,CAChE,YAAaE,EACb,QAASjkG,EACT,QAASC,EACT,oBAAqB,IAC7B,CAAO,CACP,EACG,EACD4iG,EAAe,UAAU,cAAgB,SAAU,EAAG,CACpD,GAAIU,CAAAA,GAAyB,KAAK,IAAK,WAAW,EAGlD,KAAI31I,EAAQ,EAAE,WAAa,EAAI,IAAM,EAAI,IACzCm2I,GAAuB,KAAM,OAAQ,KAAM,EAAG,CAC5C,MAAOn2I,EACP,QAAS,EAAE,OACX,QAAS,EAAE,OACX,oBAAqB,IAC3B,CAAK,EACF,EACMi1I,CACT,EAAE5zI,EAAQ,EACV,SAAS80I,GAAuBG,EAAYx0I,EAAWy0I,EAAiBx1I,EAAGy1I,EAAgB,CACrFF,EAAW,gBAAkBA,EAAW,eAAev1I,EAAGy1I,EAAe,QAASA,EAAe,OAAO,IAI1GnpI,GAAetM,EAAE,KAAK,EACtB+0I,GAAQQ,EAAYx0I,EAAWy0I,EAAiBx1I,EAAGy1I,CAAc,EAErE,CACA,SAASV,GAAQQ,EAAYx0I,EAAWy0I,EAAiBx1I,EAAGy1I,EAAgB,CAG1EA,EAAe,oBAAsBr6I,EAAKu5I,GAAqB,KAAMa,EAAiBx1I,CAAC,EAEvFu1I,EAAW,QAAQx0I,EAAW00I,CAAc,CAC9C,CAOA,SAASd,GAAoBa,EAAiBx1I,EAAGyjH,EAAU,CACzD,IAAI7G,EAAU6G,EAAS+xB,CAAe,EACtC,MAAO,CAACA,GAAmB54B,IAAY,CAACrhH,EAASqhH,CAAO,GAAK58G,EAAE,MAAM48G,EAAU,KAAK,EACtF,CCxMA,IAAI84B,GAAsB,CACxB,YAAe,EACf,QAAW,EACX,MAAS,CACX,EAKO,SAASC,GAAoB31I,EAAGg6C,EAAK47F,EAAqB,CAC/D,IAAIn2G,EAAQua,EAAI,sBAAsBh6C,EAAE,SAAS,EAE7Ck7C,EAAWzb,GAASA,EAAM,iBAC9B,OAAOA,GAASA,IAAUm2G,GAAuB,CAACF,GAAoB,eAAej2G,EAAM,QAAQ,GAAKyb,GAAYA,EAAS,QAAU06F,CACzI,CCMe,SAASC,GAAW3vI,EAAO4vI,EAAY1tF,EAAQ2tF,EAAaC,EAASC,EAAS,CAC3F/vI,EAAQA,GAAS,EACjB,IAAIy7G,EAAav5D,EAAO,CAAC,EAAIA,EAAO,CAAC,EAQrC,GANI4tF,GAAW,OACbA,EAAUE,GAASF,EAAS,CAAC,EAAGr0B,CAAU,CAAC,GAEzCs0B,GAAW,OACbA,EAAU,KAAK,IAAIA,EAASD,GAA4B,CAAC,GAEvDD,IAAgB,MAAO,CACzB,IAAII,EAAa,KAAK,IAAIL,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EACvDK,EAAaD,GAASC,EAAY,CAAC,EAAGx0B,CAAU,CAAC,EACjDq0B,EAAUC,EAAUC,GAASC,EAAY,CAACH,EAASC,CAAO,CAAC,EAC3DF,EAAc,CAClB,CACED,EAAW,CAAC,EAAII,GAASJ,EAAW,CAAC,EAAG1tF,CAAM,EAC9C0tF,EAAW,CAAC,EAAII,GAASJ,EAAW,CAAC,EAAG1tF,CAAM,EAC9C,IAAIguF,EAAmBC,GAAYP,EAAYC,CAAW,EAC1DD,EAAWC,CAAW,GAAK7vI,EAE3B,IAAIowI,EAAgBN,GAAW,EAC3BO,EAAanuF,EAAO,MAAO,EAC/BguF,EAAiB,KAAO,EAAIG,EAAW,CAAC,GAAKD,EAAgBC,EAAW,CAAC,GAAKD,EAC9ER,EAAWC,CAAW,EAAIG,GAASJ,EAAWC,CAAW,EAAGQ,CAAU,EAEtE,IAAIC,EACJ,OAAAA,EAAeH,GAAYP,EAAYC,CAAW,EAC9CC,GAAW,OAASQ,EAAa,OAASJ,EAAiB,MAAQI,EAAa,KAAOR,KAEzFF,EAAW,EAAIC,CAAW,EAAID,EAAWC,CAAW,EAAIK,EAAiB,KAAOJ,GAGlFQ,EAAeH,GAAYP,EAAYC,CAAW,EAC9CE,GAAW,MAAQO,EAAa,KAAOP,IACzCH,EAAW,EAAIC,CAAW,EAAID,EAAWC,CAAW,EAAIS,EAAa,KAAOP,GAEvEH,CACT,CACA,SAASO,GAAYP,EAAYC,EAAa,CAC5C,IAAIz2I,EAAOw2I,EAAWC,CAAW,EAAID,EAAW,EAAIC,CAAW,EAG/D,MAAO,CACL,KAAM,KAAK,IAAIz2I,CAAI,EACnB,KAAMA,EAAO,EAAI,GAAKA,EAAO,EAAI,EAAIy2I,EAAc,GAAK,CACzD,CACH,CACA,SAASG,GAASn8I,EAAOP,EAAQ,CAC/B,OAAO,KAAK,IAAIA,EAAO,CAAC,GAAK,KAAOA,EAAO,CAAC,EAAI,IAAU,KAAK,IAAIA,EAAO,CAAC,GAAK,KAAOA,EAAO,CAAC,EAAI,KAAWO,CAAK,CAAC,CACtH,CChEA,IAAI08I,GAAqB,GACrB3sI,GAAU,KAAK,IACfC,GAAU,KAAK,IACfyK,GAAU,KAAK,IACfkiI,GAAU,IACVC,GAAqB,EACrBC,GAAwB,EACxBC,GAAqB,YACrBC,GAAgB,CAClB,EAAG,CAAC,EAAG,CAAC,EACR,EAAG,CAAC,EAAG,CAAC,EACR,EAAG,CAAC,EAAG,CAAC,EACR,EAAG,CAAC,EAAG,CAAC,CACV,EACIC,GAAa,CACf,EAAG,KACH,EAAG,KACH,EAAG,KACH,EAAG,KACH,GAAI,OACJ,GAAI,OACJ,GAAI,OACJ,GAAI,MACN,EACIC,GAAoB,CACtB,WAAY,CACV,UAAW,EACX,OAAQ,wBACR,KAAM,SACR,EACA,cAAe,GACf,UAAW,SACX,cAAe,EACjB,EACIC,GAAU,EAUVC,GAA+B,SAAU1qI,EAAQ,CACnDC,EAAUyqI,EAAiB1qI,CAAM,EACjC,SAAS0qI,EAAgBnpH,EAAI,CAC3B,IAAIrhB,EAAQF,EAAO,KAAK,IAAI,GAAK,KAIjC,OAAAE,EAAM,OAAS,CAAC,EAIhBA,EAAM,QAAU,CAAC,EACjBA,EAAM,UAAY,CAAC,EAInBA,EAAM,IAAMqhB,EACNrhB,EAAA,MAAQ,IAAI+kF,GAClB/kF,EAAM,KAAO,mBAAqBuqI,KAC7Bt8I,EAAAw8I,GAAiB,SAAUp3I,EAASgB,EAAW,CAClD,KAAK,UAAUA,CAAS,EAAI3F,EAAK2E,EAAS,IAAI,GAC7C2M,CAAK,EACDA,CAAA,CAKTwqI,OAAAA,EAAgB,UAAU,YAAc,SAAUE,EAAa,CAIxD,YAAA,YAAc,KAAK,gBAAgB,EAC5BA,EAAA,WAAa,KAAK,eAAeA,CAAW,EACjD,IACT,EACAF,EAAgB,UAAU,eAAiB,SAAUE,EAAa,CAChE,IAAIrpH,EAAK,KAAK,IAET,KAAK,kBACRspH,GAAsBtpH,EAAI8oH,GAAoB,KAAK,IAAI,EAEzDl8I,EAAK,KAAK,UAAW,SAAUoF,EAASgB,EAAW,CAC9CgtB,EAAA,GAAGhtB,EAAWhB,CAAO,CAAA,CACzB,EACD,KAAK,WAAaq3I,EAAY,UAC9B,KAAK,aAAep+I,EAAMT,EAAMy+I,EAAiB,EAAGI,EAAa,EAAI,CACvE,EACAF,EAAgB,UAAU,gBAAkB,UAAY,CACtD,IAAInpH,EAAK,KAAK,IACdupH,GAAyBvpH,EAAI8oH,GAAoB,KAAK,IAAI,EAC1Dl8I,EAAK,KAAK,UAAW,SAAUoF,EAASgB,EAAW,CAC9CgtB,EAAA,IAAIhtB,EAAWhB,CAAO,CAAA,CAC1B,EACI,KAAA,WAAa,KAAK,aAAe,IACxC,EAIAm3I,EAAgB,UAAU,UAAY,SAAUK,EAAW,CACrD,GAAAA,GAAaA,EAAU,OAAQ,CAC7B,IAAAC,EAAW,KAAK,QAAU,CAAC,EAC1B78I,EAAA48I,EAAW,SAAUA,EAAW,CACnCC,EAASD,EAAU,OAAO,EAAIh/I,EAAMg/I,CAAS,CAAA,CAC9C,CAAA,MAED,KAAK,QAAU,KAEV,OAAA,IACT,EACAL,EAAgB,UAAU,MAAQ,SAAU5wI,EAAK,CAC/CA,EAAMA,GAAO,CAAC,EAId,KAAK,iBAAmBA,EAAI,gBAC5B,IAAImxI,EAAY,KAAK,MAChB,YAAA,IAAI,IAAIA,CAAS,EACtBA,EAAU,KAAK,CACb,EAAGnxI,EAAI,GAAK,EACZ,EAAGA,EAAI,GAAK,EACZ,SAAUA,EAAI,UAAY,EAC1B,OAAQA,EAAI,QAAU,EACtB,OAAQA,EAAI,QAAU,CAAA,CACvB,EACI,KAAA,WAAamxI,EAAU,kBAAkB,EACvC,IACT,EASAP,EAAgB,UAAU,aAAe,SAAUQ,EAAiB,CAIhDA,EAAAzhJ,EAAIyhJ,EAAiB,SAAUC,EAAa,CAC5D,OAAO3+I,EAAMT,EAAMy+I,EAAiB,EAAGW,EAAa,EAAI,CAAA,CACzD,EACD,IAAIC,EAAc,kBACdC,EAAY,KAAK,QACjBC,EAAY,KAAK,QAAU,CAAC,EAC5BvC,EAAa,KACbwC,EAAgB,KAAK,eACzB,WAAIpoC,GAAWkoC,EAAWH,EAAiBM,EAAWC,CAAM,EAAE,IAAIC,CAAW,EAAE,OAAOA,CAAW,EAAE,OAAOC,CAAM,EAAE,QAAQ,EACnH,KACE,SAAAF,EAAOb,EAAalmH,EAAO,CAC1B,OAAAkmH,EAAY,IAAM,KAAOA,EAAY,GAAKQ,EAAc1mH,GAAS,IAAMkmH,EAAY,SAAA,CAEpF,SAAAY,EAAUI,EAAOlnH,EAAO,CACxB,OAAA+mH,EAAOG,EAAM,cAAelnH,CAAK,CAAA,CAEjC,SAAAgnH,EAAYG,EAAUC,EAAU,CACnC,IAAAC,EAAmBb,EAAgBW,CAAQ,EAG/C,GAAIC,GAAY,MAAQT,EAAUS,CAAQ,IAAMP,EACpCD,EAAAO,CAAQ,EAAIR,EAAUS,CAAQ,MACnC,CACL,IAAIF,EAAQN,EAAUO,CAAQ,EAAIC,GAAY,MAAQT,EAAUS,CAAQ,EAAE,cAAgBC,EAAkBV,EAAUS,CAAQ,GAAKE,GAAYjD,EAAYkD,GAAYlD,EAAYgD,CAAgB,CAAC,EACpMG,GAAyBnD,EAAY6C,CAAK,CAAA,CAC5C,CAEF,SAASD,EAAOG,EAAU,CACpBT,EAAUS,CAAQ,IAAMP,GAC1BxC,EAAW,MAAM,OAAOsC,EAAUS,CAAQ,CAAC,CAC7C,CAEJ,EACApB,EAAgB,UAAU,QAAU,UAAY,CAM9C,YAAK,YAAY,EAAK,EAEtByB,GAAY,IAAI,EACX,KAAA,IAAI,OAAO,KAAK,KAAK,EAInB,IACT,EACAzB,EAAgB,UAAU,QAAU,UAAY,CAC9C,KAAK,QAAQ,EACb,KAAK,IAAI,CACX,EACOA,CAAA,EACP52I,EAAQ,EACV,SAASm4I,GAAYlD,EAAY6B,EAAa,CAC5C,IAAIgB,EAAQQ,GAAexB,EAAY,SAAS,EAAE,YAAY7B,EAAY6B,CAAW,EACrF,OAAAgB,EAAM,cAAgBhB,EACtB5rC,GAAQ4sC,EAAOhB,CAAW,EACf7B,EAAA,MAAM,IAAI6C,CAAK,EACnBA,CACT,CACA,SAASI,GAAYjD,EAAYwC,EAAe,CAC1C,IAAAc,EAAgBC,GAAiBf,CAAa,EAClD,OAAIc,EAAc,cACFA,EAAA,YAAYtD,EAAYwC,CAAa,EAC3CvsC,GAAAusC,EAAeA,EAAc,aAAa,GAE7CA,CACT,CACA,SAASgB,GAAiBxD,EAAY6C,EAAO,CAC3C,IAAIhB,EAAcgB,EAAM,cACxBU,GAAiBV,CAAK,EAAE,iBAAiB7C,EAAY6C,EAAOhB,EAAY,MAAOA,CAAW,CAC5F,CACA,SAAS5rC,GAAQ4sC,EAAOhB,EAAa,CACnC,IAAInsC,EAAImsC,EAAY,EACpBnsC,GAAK,OAASA,EAAIyrC,IACZ0B,EAAA,SAAS,SAAU70I,EAAI,CAC3BA,EAAG,EAAI0nG,EACP1nG,EAAG,GAAK0nG,CAAA,CACT,CACH,CACA,SAASytC,GAAyBnD,EAAY6C,EAAO,CACnDU,GAAiBV,CAAK,EAAE,aAAa7C,EAAY6C,CAAK,EACtDW,GAAiBxD,EAAY6C,CAAK,CACpC,CACA,SAASU,GAAiBV,EAAO,CACxB,OAAAQ,GAAeR,EAAM,cAAc,SAAS,CACrD,CAEA,SAASY,GAAgBzD,EAAYv1I,EAAGi5I,EAAkB,CACxD,IAAIC,EAAS3D,EAAW,QACxB,GAAI,CAAC2D,EACI,OAAAzC,GAEL,IAAA0C,EACA1wH,EAAY8sH,EAAW,WACtB56I,OAAAA,EAAAu+I,EAAQ,SAAUE,EAAI,CACzBA,EAAG,iBAAiBp5I,EAAGi5I,EAAkBxwH,CAAS,IAAM0wH,EAAQC,EAAA,CACjE,EACMD,CACT,CAEA,SAASE,GAAgB9D,EAAY6C,EAAO,CAC1C,IAAIc,EAAS3D,EAAW,QACxB,GAAI,CAAC2D,EACI,OAAAzC,GAEL,IAAA6C,EAAUlB,EAAM,cAAc,QAGlC,OAAOkB,GAAW,KAAOJ,EAAOI,CAAO,EAAI7C,EAC7C,CACA,SAASkC,GAAYpD,EAAY,CAC/B,IAAIgE,EAAShE,EAAW,QACpBpxG,EAAiBo1G,EAAO,OACvB5+I,OAAAA,EAAA4+I,EAAQ,SAAUnB,EAAO,CACjB7C,EAAA,MAAM,OAAO6C,CAAK,GAC5B7C,CAAU,EACbgE,EAAO,OAAS,EACT,CAAC,CAACp1G,CACX,CACA,SAAS4wG,GAAQQ,EAAYjvI,EAAK,CAChC,IAAIkzI,EAAQvjJ,EAAIs/I,EAAW,QAAS,SAAU6C,EAAO,CACnD,IAAIhB,EAAcgB,EAAM,cACpB3kH,EAAQl7B,EAAM6+I,EAAY,KAAK,EAC5B,MAAA,CACL,UAAWA,EAAY,UACvB,QAASA,EAAY,QACrB,MAAA3jH,CACF,CAAA,CACD,EACD8hH,EAAW,QAAQ,QAAS,CAC1B,MAAAiE,EACA,MAAO,CAAC,CAAClzI,EAAI,MACb,cAAe,CAAC,CAACA,EAAI,aAAA,CACtB,CACH,CACA,SAASmzI,GAAgBlE,EAAY,CACnC,IAAInzH,EAAQmzH,EAAW,OACnB,GAAA,CAACnzH,EAAM,OACF,MAAA,GAET,IAAI3Y,EAAK2Y,EAAMA,EAAM,OAAS,CAAC,EAC3BzY,EAAKyY,EAAM,CAAC,EACZliB,EAAKuJ,EAAG,CAAC,EAAIE,EAAG,CAAC,EACjBxJ,EAAKsJ,EAAG,CAAC,EAAIE,EAAG,CAAC,EACjBrK,EAAOkV,GAAQtU,EAAKA,EAAKC,EAAKA,EAAI,EAAG,EACzC,OAAOb,EAAOq3I,EAChB,CACA,SAAS+C,GAAat3H,EAAO,CACvB,IAAAu3H,EAAOv3H,EAAM,OAAS,EAC1B,OAAAu3H,EAAO,IAAMA,EAAO,GACb,CAACv3H,EAAM,CAAC,EAAGA,EAAMu3H,CAAI,CAAC,CAC/B,CAEA,SAASC,GAAoBC,EAAoBtE,EAAY6B,EAAa0C,EAAmB,CACvF,IAAA1B,EAAQ,IAAI3mD,GACV,OAAA2mD,EAAA,IAAI,IAAIzmD,GAAa,CACzB,KAAM,OACN,MAAOooD,GAAU3C,CAAW,EAC5B,OAAQ,GACR,UAAW,GACX,OAAQ,OACR,MAAO97I,GAAM0+I,GAAWH,EAAoBtE,EAAY6C,EAAO,CAAC,IAAK,IAAK,IAAK,GAAG,CAAC,EACnF,UAAW98I,GAAMy5I,GAASQ,EAAY,CACpC,MAAO,EACR,CAAA,CAAA,CACF,CAAC,EACG56I,EAAAm/I,EAAmB,SAAUG,EAAc,CACxC7B,EAAA,IAAI,IAAIzmD,GAAa,CACzB,KAAMsoD,EAAa,KAAK,EAAE,EAC1B,MAAO,CACL,QAAS,CACX,EACA,UAAW,GACX,OAAQ,GACR,UAAW,GACX,MAAO3+I,GAAM0+I,GAAWH,EAAoBtE,EAAY6C,EAAO6B,CAAY,EAC3E,UAAW3+I,GAAMy5I,GAASQ,EAAY,CACpC,MAAO,EACR,CAAA,CAAA,CACF,CAAC,CAAA,CACH,EACM6C,CACT,CACA,SAAS8B,GAAe3E,EAAY6C,EAAO+B,EAAY/C,EAAa,CAC9D,IAAA91G,EAAY81G,EAAY,WAAW,WAAa,EAChDgD,EAAarwI,GAAQu3B,EAAWs1G,EAAqB,EACrDp4I,EAAI27I,EAAW,CAAC,EAAE,CAAC,EACnB17I,EAAI07I,EAAW,CAAC,EAAE,CAAC,EACnBE,EAAK77I,EAAI8iC,EAAY,EACrBg5G,EAAK77I,EAAI6iC,EAAY,EACrBrqB,EAAKkjI,EAAW,CAAC,EAAE,CAAC,EACpBjjI,EAAKijI,EAAW,CAAC,EAAE,CAAC,EACpBI,EAAMtjI,EAAKmjI,EAAa94G,EAAY,EACpCk5G,EAAMtjI,EAAKkjI,EAAa94G,EAAY,EACpCxqC,EAAQmgB,EAAKzY,EACb+L,EAAS2M,EAAKzY,EACdg8I,EAAS3jJ,EAAQwqC,EACjBo5G,EAAUnwI,EAAS+2B,EACvBq5G,GAAgBpF,EAAY6C,EAAO,OAAQ55I,EAAGC,EAAG3H,EAAOyT,CAAM,EAC1D6sI,EAAY,gBACduD,GAAgBpF,EAAY6C,EAAO,IAAKiC,EAAIC,EAAIF,EAAYM,CAAO,EACnEC,GAAgBpF,EAAY6C,EAAO,IAAKmC,EAAKD,EAAIF,EAAYM,CAAO,EACpEC,GAAgBpF,EAAY6C,EAAO,IAAKiC,EAAIC,EAAIG,EAAQL,CAAU,EAClEO,GAAgBpF,EAAY6C,EAAO,IAAKiC,EAAIG,EAAKC,EAAQL,CAAU,EACnEO,GAAgBpF,EAAY6C,EAAO,KAAMiC,EAAIC,EAAIF,EAAYA,CAAU,EACvEO,GAAgBpF,EAAY6C,EAAO,KAAMmC,EAAKD,EAAIF,EAAYA,CAAU,EACxEO,GAAgBpF,EAAY6C,EAAO,KAAMiC,EAAIG,EAAKJ,EAAYA,CAAU,EACxEO,GAAgBpF,EAAY6C,EAAO,KAAMmC,EAAKC,EAAKJ,EAAYA,CAAU,EAE7E,CACA,SAASQ,GAAarF,EAAY6C,EAAO,CACvC,IAAIhB,EAAcgB,EAAM,cACpByC,EAAgBzD,EAAY,cAC5B0D,EAAS1C,EAAM,QAAQ,CAAC,EACrB0C,EAAA,SAASf,GAAU3C,CAAW,CAAC,EACtC0D,EAAO,KAAK,CACV,OAAQ,CAACD,EACT,OAAQA,EAAgB,OAAS,SAAA,CAClC,EACDlgJ,EAAK,CAAC,CAAC,GAAG,EAAG,CAAC,GAAG,EAAG,CAAC,GAAG,EAAG,CAAC,GAAG,EAAG,CAAC,IAAK,GAAG,EAAG,CAAC,IAAK,GAAG,EAAG,CAAC,IAAK,GAAG,EAAG,CAAC,IAAK,GAAG,CAAC,EAAG,SAAUs/I,EAAc,CACzG,IAAI12I,EAAK60I,EAAM,YAAY6B,EAAa,KAAK,EAAE,CAAC,EAC5Cc,EAAYd,EAAa,SAAW,EAAIe,GAAoBzF,EAAY0E,EAAa,CAAC,CAAC,EAAIgB,GAAoB1F,EAAY0E,CAAY,EAC3I12I,GAAMA,EAAG,KAAK,CACZ,OAAQ,CAACs3I,EACT,UAAW,CAACA,EACZ,OAAQA,EAAgB9D,GAAWgE,CAAS,EAAI,UAAY,IAAA,CAC7D,CAAA,CACF,CACH,CACA,SAASJ,GAAgBpF,EAAY6C,EAAO/xI,EAAM7H,EAAGC,EAAG+iB,EAAG9G,EAAG,CACxD,IAAAnX,EAAK60I,EAAM,YAAY/xI,CAAI,EAC/B9C,GAAMA,EAAG,SAAS23I,GAAaC,GAAY5F,EAAY6C,EAAO,CAAC,CAAC55I,EAAGC,CAAC,EAAG,CAACD,EAAIgjB,EAAG/iB,EAAIic,CAAC,CAAC,CAAC,CAAC,CAAC,CAC1F,CACA,SAASq/H,GAAU3C,EAAa,CAC9B,OAAO39I,EAAS,CACd,cAAe,EAAA,EACd29I,EAAY,UAAU,CAC3B,CACA,SAASgE,GAAgB58I,EAAGC,EAAGwY,EAAIC,EAAI,CACjC,IAAAvX,EAAM,CAACmK,GAAQtL,EAAGyY,CAAE,EAAGnN,GAAQrL,EAAGyY,CAAE,CAAC,EACrCtX,EAAM,CAACmK,GAAQvL,EAAGyY,CAAE,EAAGlN,GAAQtL,EAAGyY,CAAE,CAAC,EAClC,MAAA,CAAC,CAACvX,EAAI,CAAC,EAAGC,EAAI,CAAC,CAAC,EAAG,CAACD,EAAI,CAAC,EAAGC,EAAI,CAAC,CAAC,CACzC,CACF,CACA,SAAS8sD,GAAa6oF,EAAY,CACzB,OAAA8F,GAAqB9F,EAAW,KAAK,CAC9C,CACA,SAASyF,GAAoBzF,EAAY+F,EAAc,CACrD,IAAIrlJ,EAAM,CACR,EAAG,OACH,EAAG,QACH,EAAG,MACH,EAAG,QACL,EACIslJ,EAAa,CACf,KAAM,IACN,MAAO,IACP,IAAK,IACL,OAAQ,GACV,EACI9uG,EAAM+uG,GAA2BvlJ,EAAIqlJ,CAAY,EAAG5uF,GAAa6oF,CAAU,CAAC,EAChF,OAAOgG,EAAW9uG,CAAG,CACvB,CACA,SAASwuG,GAAoB1F,EAAYkG,EAAiB,CACxD,IAAIV,EAAY,CAACC,GAAoBzF,EAAYkG,EAAgB,CAAC,CAAC,EAAGT,GAAoBzF,EAAYkG,EAAgB,CAAC,CAAC,CAAC,EACxH,OAAAV,EAAU,CAAC,IAAM,KAAOA,EAAU,CAAC,IAAM,MAAQA,EAAU,QAAQ,EAC7DA,EAAU,KAAK,EAAE,CAC1B,CACA,SAASf,GAAUH,EAAoBtE,EAAY6C,EAAOsD,EAAiBx7I,EAAIC,EAAI,CACjF,IAAIi3I,EAAcgB,EAAM,cACpBuD,EAAY9B,EAAmB,YAAYzC,EAAY,KAAK,EAC5DwE,EAAaC,GAAatG,EAAYr1I,EAAIC,CAAE,EAC3CxF,EAAA+gJ,EAAiB,SAAUI,EAAS,CACnC,IAAAC,EAAMjF,GAAcgF,CAAO,EACrBH,EAAAI,EAAI,CAAC,CAAC,EAAEA,EAAI,CAAC,CAAC,GAAKH,EAAWG,EAAI,CAAC,CAAC,CAAA,CAC/C,EACW3E,EAAA,MAAQyC,EAAmB,cAAcuB,GAAgBO,EAAU,CAAC,EAAE,CAAC,EAAGA,EAAU,CAAC,EAAE,CAAC,EAAGA,EAAU,CAAC,EAAE,CAAC,EAAGA,EAAU,CAAC,EAAE,CAAC,CAAC,CAAC,EACxIjD,GAAyBnD,EAAY6C,CAAK,EAC1CrD,GAAQQ,EAAY,CAClB,MAAO,EAAA,CACR,CACH,CACA,SAASyG,GAAazG,EAAY6C,EAAOl4I,EAAIC,EAAI,CAC3C,IAAAszB,EAAQ2kH,EAAM,cAAc,MAC5BwD,EAAaC,GAAatG,EAAYr1I,EAAIC,CAAE,EAC3CxF,EAAA84B,EAAO,SAAUqyB,EAAO,CACrBA,EAAA,CAAC,GAAK81F,EAAW,CAAC,EAClB91F,EAAA,CAAC,GAAK81F,EAAW,CAAC,CAAA,CACzB,EACDlD,GAAyBnD,EAAY6C,CAAK,EAC1CrD,GAAQQ,EAAY,CAClB,MAAO,EAAA,CACR,CACH,CACA,SAASsG,GAAatG,EAAYr1I,EAAIC,EAAI,CACxC,IAAIs3I,EAAYlC,EAAW,MACvB0G,EAASxE,EAAU,sBAAsBv3I,EAAIC,CAAE,EAC/C+7I,EAAYzE,EAAU,sBAAsB,EAAG,CAAC,EACpD,MAAO,CAACwE,EAAO,CAAC,EAAIC,EAAU,CAAC,EAAGD,EAAO,CAAC,EAAIC,EAAU,CAAC,CAAC,CAC5D,CACA,SAASf,GAAY5F,EAAY6C,EAAO19I,EAAM,CACxC,IAAAy+I,EAAQE,GAAgB9D,EAAY6C,CAAK,EACtC,OAAAe,GAASA,IAAU1C,GAAqB0C,EAAM,SAASz+I,EAAM66I,EAAW,UAAU,EAAIh9I,EAAMmC,CAAI,CACzG,CACA,SAASwgJ,GAAaviI,EAAQ,CACxB,IAAAwjI,EAAOryI,GAAQ6O,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACzCyjI,EAAOtyI,GAAQ6O,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACzC0jI,EAAOtyI,GAAQ4O,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACzC2jI,EAAOvyI,GAAQ4O,EAAO,CAAC,EAAE,CAAC,EAAGA,EAAO,CAAC,EAAE,CAAC,CAAC,EACtC,MAAA,CACL,EAAGwjI,EACH,EAAGC,EACH,MAAOC,EAAOF,EACd,OAAQG,EAAOF,CACjB,CACF,CACA,SAASG,GAAYhH,EAAYv1I,EAAGi5I,EAAkB,CACpD,GAEA,GAAC1D,EAAW,YAITiH,GAAgBjH,EAAYv1I,EAAE,QAASA,EAAE,OAAO,GAGnD,KAAI+tB,EAAKwnH,EAAW,IAChBgE,EAAShE,EAAW,QACpBkH,EAAYzD,GAAgBzD,EAAYv1I,EAAGi5I,CAAgB,EAE3D,GAAA,CAAC1D,EAAW,UACd,QAASr/I,EAAI,EAAGA,EAAIqjJ,EAAO,OAAQrjJ,IAAK,CAClC,IAAAkhJ,EAAcmC,EAAOrjJ,CAAC,EAAE,cACxB,GAAAumJ,IAAcA,IAAchG,IAAsBW,EAAY,UAAYqF,EAAU,UAAY7D,GAAexB,EAAY,SAAS,EAAE,QAAQmC,EAAOrjJ,CAAC,EAAG+iJ,EAAiB,CAAC,EAAGA,EAAiB,CAAC,CAAC,EAEnM,MACF,CAGSwD,GAAA1uH,EAAG,eAAe,WAAW,EAC5C,CACA,SAAS2uH,GAAe18I,EAAG,CACzB,IAAI28I,EAAO38I,EAAE,MACR28I,EAAA,gBAAkBA,EAAK,eAAe,CAC7C,CACA,SAASC,GAAiBxE,EAAO55I,EAAGC,EAAG,CACrC,OAAO25I,EAAM,YAAY,MAAM,EAAE,QAAQ55I,EAAGC,CAAC,CAC/C,CACA,SAASo+I,GAAmBtH,EAAYv1I,EAAGi5I,EAAkB6D,EAAO,CAClE,IAAI/E,EAAgBxC,EAAW,eAC3B4D,EAAQ5D,EAAW,eACnBwH,EAAkBxH,EAAW,aAC7ByH,EAEA,GADJzH,EAAW,OAAO,KAAK0D,EAAiB,MAAA,CAAO,EAC3CQ,GAAgBlE,CAAU,GAAKwC,EAAe,CAC5C,GAAAoB,GAAS,CAACpB,EAAe,CACXgF,EAAA,YAAc,UAAYpE,GAAYpD,CAAU,EAC5D,IAAA6B,EAAc7+I,EAAMwkJ,CAAe,EACvC3F,EAAY,UAAY6F,GAAmB7F,EAAY,UAAW+B,CAAK,EACvE/B,EAAY,QAAU+B,IAAU1C,GAAqB,KAAO0C,EAAM,QAClEpB,EAAgBxC,EAAW,eAAiBkD,GAAYlD,EAAY6B,CAAW,EACpE7B,EAAA,QAAQ,KAAKwC,CAAa,CAAA,CAEvC,GAAIA,EAAe,CACjB,IAAIc,EAAgBD,GAAeqE,GAAmB1H,EAAW,WAAY4D,CAAK,CAAC,EAC/E+D,EAAmBnF,EAAc,cACpBmF,EAAA,MAAQrE,EAAc,iBAAiBsC,GAAY5F,EAAYwC,EAAexC,EAAW,MAAM,CAAC,EAC7GuH,IACFtE,GAAYjD,EAAYwC,CAAa,EACvBc,EAAA,aAAatD,EAAYwC,CAAa,GAEtDgB,GAAiBxD,EAAYwC,CAAa,EAC5BiF,EAAA,CACZ,MAAAF,CACF,CAAA,CACF,MACSA,GAASC,EAAgB,YAAc,UAAYA,EAAgB,eAMxE/D,GAAgBzD,EAAYv1I,EAAGi5I,CAAgB,GAAKN,GAAYpD,CAAU,IAC9DyH,EAAA,CACZ,MAAAF,EACA,cAAe,EACjB,GAGG,OAAAE,CACT,CACA,SAASC,GAAmBE,EAAWhE,EAAO,CAC5C,OAAIgE,IAAc,OAIThE,EAAM,iBAERgE,CACT,CACA,IAAIhG,GAAkB,CACpB,UAAW,SAAUn3I,EAAG,CACtB,GAAI,KAAK,UAGPo9I,GAAc,KAAMp9I,CAAC,UACZ,CAACA,EAAE,QAAU,CAACA,EAAE,OAAO,UAAW,CAC3C08I,GAAe18I,CAAC,EAChB,IAAIi5I,EAAmB,KAAK,MAAM,sBAAsBj5I,EAAE,QAASA,EAAE,OAAO,EAC5E,KAAK,eAAiB,KACtB,IAAIm5I,EAAQ,KAAK,eAAiBH,GAAgB,KAAMh5I,EAAGi5I,CAAgB,EACvEE,IACF,KAAK,UAAY,GACjB,KAAK,OAAS,CAACF,EAAiB,MAAA,CAAO,EACzC,CAEJ,EACA,UAAW,SAAUj5I,EAAG,CACtB,IAAIxB,EAAIwB,EAAE,QACNvB,EAAIuB,EAAE,QACNi5I,EAAmB,KAAK,MAAM,sBAAsBz6I,EAAGC,CAAC,EAE5D,GADY89I,GAAA,KAAMv8I,EAAGi5I,CAAgB,EACjC,KAAK,UAAW,CAClByD,GAAe18I,CAAC,EAChB,IAAIg9I,EAAcH,GAAmB,KAAM78I,EAAGi5I,EAAkB,EAAK,EACtD+D,GAAAjI,GAAQ,KAAMiI,CAAW,CAAA,CAE5C,EACA,QAAS,SAAUh9I,EAAG,CACpBo9I,GAAc,KAAMp9I,CAAC,CAAA,CAEzB,EACA,SAASo9I,GAAc7H,EAAYv1I,EAAG,CACpC,GAAIu1I,EAAW,UAAW,CACxBmH,GAAe18I,CAAC,EAChB,IAAIxB,EAAIwB,EAAE,QACNvB,EAAIuB,EAAE,QACNi5I,EAAmB1D,EAAW,MAAM,sBAAsB/2I,EAAGC,CAAC,EAC9Du+I,EAAcH,GAAmBtH,EAAYv1I,EAAGi5I,EAAkB,EAAI,EAC1E1D,EAAW,UAAY,GACvBA,EAAW,OAAS,CAAC,EACrBA,EAAW,eAAiB,KAEbyH,GAAAjI,GAAQQ,EAAYyH,CAAW,CAAA,CAElD,CACA,SAASR,GAAgBjH,EAAY/2I,EAAGC,EAAG,CACzC,IAAIsvB,EAAKwnH,EAAW,IACb,OAAA/2I,EAAI,GAAKA,EAAIuvB,EAAG,YAActvB,EAAI,GAAKA,EAAIsvB,EAAG,UAAU,CACjE,CAIA,IAAI6qH,GAAiB,CACnB,MAAOyE,GAAgB,CAAC,EACxB,MAAOA,GAAgB,CAAC,EACxB,KAAM,CACJ,YAAa,SAAU9H,EAAY6B,EAAa,CAC9C,SAASkG,EAAY7pH,EAAO,CACnB,OAAAA,CAAA,CAET,OAAOmmH,GAAoB,CACzB,YAAa0D,EACb,cAAeA,CACd,EAAA/H,EAAY6B,EAAa,CAAC,CAAC,GAAG,EAAG,CAAC,GAAG,EAAG,CAAC,GAAG,EAAG,CAAC,GAAG,EAAG,CAAC,IAAK,GAAG,EAAG,CAAC,IAAK,GAAG,EAAG,CAAC,IAAK,GAAG,EAAG,CAAC,IAAK,GAAG,CAAC,CAAC,CAC1G,EACA,iBAAkB,SAAUmG,EAAY,CAClC,IAAAC,EAAO9D,GAAa6D,CAAU,EAC3B,OAAAnC,GAAgBoC,EAAK,CAAC,EAAE,CAAC,EAAGA,EAAK,CAAC,EAAE,CAAC,EAAGA,EAAK,CAAC,EAAE,CAAC,EAAGA,EAAK,CAAC,EAAE,CAAC,CAAC,CACvE,EACA,iBAAkB,SAAUjI,EAAY6C,EAAO+B,EAAY/C,EAAa,CACvD8C,GAAA3E,EAAY6C,EAAO+B,EAAY/C,CAAW,CAC3D,EACA,aAAAwD,GACA,QAASgC,EACX,EACA,QAAS,CACP,YAAa,SAAUrH,EAAY6B,EAAa,CAC1C,IAAAgB,EAAQ,IAAI3mD,GAGV,OAAA2mD,EAAA,IAAI,IAAIqF,GAAiB,CAC7B,KAAM,OACN,MAAO1D,GAAU3C,CAAW,EAC5B,OAAQ,EAAA,CACT,CAAC,EACKgB,CACT,EACA,iBAAkB,SAAUmF,EAAY,CAC/B,OAAAA,CACT,EACA,YAAa,SAAUhI,EAAY6C,EAAO,CACxCA,EAAM,OAAOA,EAAM,QAAQ,CAAC,CAAC,EAEvBA,EAAA,IAAI,IAAIsF,GAAgB,CAC5B,KAAM,OACN,UAAW,GACX,MAAOpiJ,GAAM0gJ,GAAczG,EAAY6C,CAAK,EAC5C,UAAW98I,GAAMy5I,GAASQ,EAAY,CACpC,MAAO,EACR,CAAA,CAAA,CACF,CAAC,CACJ,EACA,iBAAkB,SAAUA,EAAY6C,EAAO+B,EAAY/C,EAAa,CAChEgB,EAAA,QAAQ,CAAC,EAAE,SAAS,CACxB,OAAQ+C,GAAY5F,EAAY6C,EAAO+B,CAAU,CAAA,CAClD,CACH,EACA,aAAAS,GACA,QAASgC,EAAA,CAEb,EACA,SAASS,GAAgBM,EAAS,CACzB,MAAA,CACL,YAAa,SAAUpI,EAAY6B,EAAa,CAC9C,OAAOwC,GAAoB,CACzB,YAAa,SAAUnmH,EAAO,CAC5B,IAAIkoH,EAAY,CAACloH,EAAO,CAAC,EAAG,GAAG,CAAC,EAChC,OAAAkqH,GAAWhC,EAAU,QAAQ,EACtBA,CACT,EACA,cAAe,SAAUA,EAAW,CAClC,OAAOA,EAAUgC,CAAO,CAAA,CAC1B,EACCpI,EAAY6B,EAAa,CAAC,CAAC,CAAC,GAAG,EAAG,CAAC,GAAG,CAAC,EAAG,CAAC,CAAC,GAAG,EAAG,CAAC,GAAG,CAAC,CAAC,EAAEuG,CAAO,CAAC,CACvE,EACA,iBAAkB,SAAUJ,EAAY,CAClC,IAAAC,EAAO9D,GAAa6D,CAAU,EAC9B59I,EAAMmK,GAAQ0zI,EAAK,CAAC,EAAEG,CAAO,EAAGH,EAAK,CAAC,EAAEG,CAAO,CAAC,EAChD/9I,EAAMmK,GAAQyzI,EAAK,CAAC,EAAEG,CAAO,EAAGH,EAAK,CAAC,EAAEG,CAAO,CAAC,EAC7C,MAAA,CAACh+I,EAAKC,CAAG,CAClB,EACA,iBAAkB,SAAU21I,EAAY6C,EAAO+B,EAAY/C,EAAa,CAClE,IAAAwG,EAEAzE,EAAQE,GAAgB9D,EAAY6C,CAAK,EACzC,GAAAe,IAAU1C,IAAsB0C,EAAM,0BAC1ByE,EAAAzE,EAAM,0BAA0BwE,CAAO,MAChD,CACL,IAAI5vH,EAAKwnH,EAAW,IACpBqI,EAAc,CAAC,EAAG,CAAC7vH,EAAG,SAAS,EAAGA,EAAG,UAAW,CAAA,EAAE,EAAI4vH,CAAO,CAAC,CAAA,CAE5D,IAAAhC,EAAY,CAACxB,EAAYyD,CAAW,EACxCD,GAAWhC,EAAU,QAAQ,EACdzB,GAAA3E,EAAY6C,EAAOuD,EAAWvE,CAAW,CAC1D,EACA,aAAAwD,GACA,QAASgC,EACX,CACF,CCzrBO,SAASiB,GAAsBn5I,EAAM,CAC1C,OAAAA,EAAOo5I,GAAcp5I,CAAI,EAClB,SAAUq5I,EAAa,CAC5B,OAAOC,GAA6BD,EAAar5I,CAAI,CACtD,CACH,CACO,SAASu5I,GAA2Bv5I,EAAMw5I,EAAkB,CACjE,OAAAx5I,EAAOo5I,GAAcp5I,CAAI,EAClB,SAAUi5I,EAAS,CACxB,IAAIvpI,EAAM8pI,GAA8CP,EACpDQ,EAAa/pI,EAAM1P,EAAK,MAAQA,EAAK,OACrC0wD,EAAOhhD,EAAM1P,EAAK,EAAIA,EAAK,EAC/B,MAAO,CAAC0wD,EAAMA,GAAQ+oF,GAAc,EAAE,CACvC,CACH,CACO,SAASC,GAAyB15I,EAAMs1C,EAAKqkG,EAAa,CAC/D,IAAInyF,EAAe4xF,GAAcp5I,CAAI,EACrC,OAAO,SAAU1E,EAAGi5I,EAAkB,CACpC,OAAO/sF,EAAa,QAAQ+sF,EAAiB,CAAC,EAAGA,EAAiB,CAAC,CAAC,GAAK,CAACtD,GAAoB31I,EAAGg6C,EAAKqkG,CAAW,CAClH,CACH,CAEA,SAASP,GAAcp5I,EAAM,CAC3B,OAAO4F,GAAa,OAAO5F,CAAI,CACjC,CCrBA,IAAI68D,GAAQ9mC,GAAW,EACnBliC,GAAQm+G,EACRt7G,GAAOoxE,EAIP8xE,GAA+B,UAAY,CAC7C,SAASA,GAAkB,CACzB,KAAK,UAAY,GAKjB,KAAK,mBAAqB,EAC9B,CAIE,OAAAA,EAAgB,UAAU,OAAS,SAAUrkC,EAAWs1B,EAAkBv1F,EAAKu3F,EAAa,CAC1F,IAAIx3I,EAAQw1I,EAAiB,IAAI,OAAO,EACpC73D,EAAS63D,EAAiB,IAAI,QAAQ,EAS1C,GANA,KAAK,WAAat1B,EAClB,KAAK,kBAAoBs1B,EACzB,KAAK,KAAOv1F,EAIR,GAACu3F,GAAe,KAAK,aAAex3I,GAAS,KAAK,cAAgB29E,GAGtE,MAAK,WAAa39E,EAClB,KAAK,YAAc29E,EACnB,IAAI5Y,EAAQ,KAAK,OACby/E,EAAS,KAAK,QAClB,GAAI,CAAC7mE,GAAUA,IAAW,OAAQ,CAEhC5Y,GAASA,EAAM,KAAM,EACrBy/E,GAAUA,EAAO,KAAM,EACvB,MACN,CACIz/E,GAASA,EAAM,KAAM,EACrBy/E,GAAUA,EAAO,KAAM,EAEvB,IAAIC,EAAW,CAAE,EACjB,KAAK,aAAaA,EAAUzkJ,EAAOkgH,EAAWs1B,EAAkBv1F,CAAG,EAEnE,IAAIykG,EAAaD,EAAS,WACtBC,IAAe,KAAK,iBACtB,KAAK,MAAMzkG,CAAG,EAEhB,KAAK,gBAAkBykG,EACvB,IAAIC,EAAgB,KAAK,eAAiB,KAAK,mBAAmBzkC,EAAWs1B,CAAgB,EAC7F,GAAI,CAACzwE,EACHA,EAAQ,KAAK,OAAS,IAAI2yB,GAC1B,KAAK,gBAAgB3yB,EAAO0/E,EAAUvkC,EAAWs1B,CAAgB,EACjE,KAAK,cAAczwE,EAAO0/E,EAAUvkC,EAAWs1B,CAAgB,EAC/Dv1F,EAAI,MAAK,EAAG,IAAI8kB,CAAK,MAChB,CACL,IAAI6/E,EAAgBl/E,GAAajV,GAAa+kF,EAAkBmP,CAAa,EAC7E,KAAK,gBAAgB5/E,EAAO0/E,EAAUG,CAAa,EACnD,KAAK,cAAc7/E,EAAO0/E,EAAUG,EAAepP,CAAgB,CACzE,CACIqP,GAAqB9/E,EAAOywE,EAAkB,EAAI,EAClD,KAAK,cAAcx1I,CAAK,EACzB,EAIDukJ,EAAgB,UAAU,OAAS,SAAUtkG,EAAK,CAChD,KAAK,MAAMA,CAAG,CACf,EAIDskG,EAAgB,UAAU,QAAU,SAAUtkG,EAAK,CACjD,KAAK,MAAMA,CAAG,CACf,EAIDskG,EAAgB,UAAU,mBAAqB,SAAUrkC,EAAWs1B,EAAkB,CACpF,IAAI7sH,EAAY6sH,EAAiB,IAAI,WAAW,EAC5C5mF,EAAOsxD,EAAU,KACjB4kC,EAAiBl2F,EAAK,OAAS,WAC/Bm2F,EAAUvP,EAAiB,IAAI,MAAM,EAEzC,GAAI,CAACuP,GAAW,CAACD,EACf,MAAO,GAET,GAAIn8H,IAAc,QAAUA,GAAa,KAAM,CAC7C,IAAIq8H,EAAqB,KAAK,mBAC9B,GAAIF,GAAkBl2F,EAAK,aAAY,EAAKo2F,EAC1C,MAAO,GAKT,GAAID,EAAS,CACX,IAAIE,EAAkBC,GAAmChlC,CAAS,EAAE,gBAChEuH,EAAa74D,EAAK,UAAW,EAEjC,OAAO,KAAK,IAAI64D,EAAW,CAAC,EAAIA,EAAW,CAAC,CAAC,EAAIw9B,EAAkBD,CAC3E,CACM,MAAO,EACb,CACI,OAAOr8H,IAAc,EACtB,EAKD47H,EAAgB,UAAU,aAAe,SAAUE,EAAUzkJ,EAAOkgH,EAAWs1B,EAAkBv1F,EAAK,CAErG,EAIDskG,EAAgB,UAAU,gBAAkB,SAAUx/E,EAAO0/E,EAAUvkC,EAAWs1B,EAAkB,CAClG,IAAI2P,EAAgBV,EAAS,QAC7B,GAAIU,EAAe,CACjB,IAAIC,EAAY59E,GAAMzC,CAAK,EAAE,UAAY,IAAIsgF,GAAQF,EAAc,IAAI,EAAE3mJ,GAAMimJ,EAAS,OAAO,CAAC,EAChG1/E,EAAM,IAAIqgF,CAAS,CACzB,CACG,EAIDb,EAAgB,UAAU,cAAgB,SAAUx/E,EAAO0/E,EAAUvkC,EAAWs1B,EAAkB,CAChG,GAAIiP,EAAS,MAAO,CAClB,IAAIa,EAAU99E,GAAMzC,CAAK,EAAE,QAAU,IAAI8yB,GAAar5F,GAAMimJ,EAAS,KAAK,CAAC,EAC3E1/E,EAAM,IAAIugF,CAAO,EACjBC,GAAoBD,EAAS9P,CAAgB,CACnD,CACG,EAID+O,EAAgB,UAAU,gBAAkB,SAAUx/E,EAAO0/E,EAAUh0F,EAAa,CAClF,IAAI20F,EAAY59E,GAAMzC,CAAK,EAAE,UACzBqgF,GAAaX,EAAS,UACxBW,EAAU,SAASX,EAAS,QAAQ,KAAK,EACzCh0F,EAAY20F,EAAW,CACrB,MAAOX,EAAS,QAAQ,KAChC,CAAO,EAEJ,EAIDF,EAAgB,UAAU,cAAgB,SAAUx/E,EAAO0/E,EAAUh0F,EAAa+kF,EAAkB,CAClG,IAAI8P,EAAU99E,GAAMzC,CAAK,EAAE,QACvBugF,IACFA,EAAQ,SAASb,EAAS,MAAM,KAAK,EACrCh0F,EAAY60F,EAAS,CAKnB,EAAGb,EAAS,MAAM,EAClB,EAAGA,EAAS,MAAM,CAC1B,CAAO,EACDc,GAAoBD,EAAS9P,CAAgB,EAEhD,EAID+O,EAAgB,UAAU,cAAgB,SAAUvkJ,EAAO,CACzD,GAAI,OAAK,WAAa,CAAC,KAAK,uBAG5B,KAAIw1I,EAAmB,KAAK,kBACxBxhH,EAAK,KAAK,KAAK,MAAO,EACtBwwH,EAAS,KAAK,QACdgB,EAAchQ,EAAiB,SAAS,QAAQ,EAChD73D,EAAS63D,EAAiB,IAAI,QAAQ,EAC1C,GAAI,CAACgQ,EAAY,IAAI,MAAM,GAAK,CAAC7nE,GAAUA,IAAW,OAAQ,CAC5D6mE,GAAUxwH,EAAG,OAAOwwH,CAAM,EAC1B,KAAK,QAAU,KACf,MACN,CACI,IAAIv8E,EACC,KAAK,UACRA,EAAS,GACTu8E,EAAS,KAAK,QAAUiB,GAAmBD,EAAY,IAAI,MAAM,EAAG,CAClE,OAAQ,OACR,UAAW,GACX,YAAa,SAAUv/I,EAAG,CAExBsM,GAAetM,EAAE,KAAK,CACvB,EACD,YAAa5E,GAAK,KAAK,kBAAmB,KAAM,EAAG,CAAC,EACpD,MAAOA,GAAK,KAAK,kBAAmB,IAAI,EACxC,UAAWA,GAAK,KAAK,iBAAkB,IAAI,CACnD,CAAO,EACD2yB,EAAG,IAAIwwH,CAAM,GAEfK,GAAqBL,EAAQhP,EAAkB,EAAK,EAEpDgP,EAAO,SAASgB,EAAY,aAAa,KAAM,CAAC,QAAS,cAAe,cAAe,UAAW,cAAe,aAAc,gBAAiB,eAAe,CAAC,CAAC,EAEjK,IAAInF,EAAamF,EAAY,IAAI,MAAM,EAClCvkF,EAAeo/E,CAAU,IAC5BA,EAAa,CAACA,EAAYA,CAAU,GAEtCmE,EAAO,OAASnE,EAAW,CAAC,EAAI,EAChCmE,EAAO,OAASnE,EAAW,CAAC,EAAI,EAChCqF,GAA4B,KAAM,yBAA0BF,EAAY,IAAI,UAAU,GAAK,EAAG,SAAS,EACvG,KAAK,mBAAmBxlJ,EAAOioE,CAAM,EACtC,EACDs8E,EAAgB,UAAU,mBAAqB,SAAUvkJ,EAAOioE,EAAQ,CACtExX,GAAY,KAAK,kBAAmB,CAACwX,GAAU,KAAK,eAAgB,KAAK,QAAS09E,GAAoB,KAAK,mBAAmB3lJ,EAAO,KAAK,WAAY,KAAK,iBAAiB,CAAC,CAAC,CAC/K,EACDukJ,EAAgB,UAAU,kBAAoB,SAAUp+I,EAAIC,EAAI,CAC9D,IAAIo+I,EAAS,KAAK,QAClB,GAAKA,EAGL,MAAK,UAAY,GAEjB,IAAIoB,EAAQ,KAAK,sBAAsBD,GAAoBnB,CAAM,EAAG,CAACr+I,EAAIC,CAAE,EAAG,KAAK,WAAY,KAAK,iBAAiB,EACrH,KAAK,aAAew/I,EACpBpB,EAAO,cAAe,EACtBA,EAAO,KAAKmB,GAAoBC,CAAK,CAAC,EACtCp+E,GAAMg9E,CAAM,EAAE,SAAW,KACzB,KAAK,uBAAwB,EAC9B,EAIDD,EAAgB,UAAU,uBAAyB,UAAY,CAC7D,IAAIC,EAAS,KAAK,QAClB,GAAKA,EAGL,KAAIqB,EAAc,KAAK,aACnB3lC,EAAY,KAAK,WACrB,KAAK,KAAK,eAAe,CACvB,KAAM,oBACN,EAAG2lC,EAAY,YAAY,CAAC,EAC5B,EAAGA,EAAY,YAAY,CAAC,EAC5B,cAAeA,EAAY,cAC3B,SAAU,CAAC,CACT,QAAS3lC,EAAU,KAAK,IACxB,UAAWA,EAAU,cACtB,CAAA,CACP,CAAK,EACF,EACDqkC,EAAgB,UAAU,iBAAmB,UAAY,CACvD,KAAK,UAAY,GACjB,IAAIC,EAAS,KAAK,QAClB,GAAKA,EAGL,KAAIxkJ,EAAQ,KAAK,kBAAkB,IAAI,OAAO,EAI9C,KAAK,mBAAmBA,CAAK,EAG7B,KAAK,KAAK,eAAe,CACvB,KAAM,SACZ,CAAK,EACF,EAIDukJ,EAAgB,UAAU,MAAQ,SAAUtkG,EAAK,CAC/C,KAAK,WAAa,KAClB,KAAK,YAAc,KACnB,IAAIjsB,EAAKisB,EAAI,MAAO,EAChB8kB,EAAQ,KAAK,OACby/E,EAAS,KAAK,QACdxwH,GAAM+wC,IACR,KAAK,gBAAkB,KACvBA,GAAS/wC,EAAG,OAAO+wC,CAAK,EACxBy/E,GAAUxwH,EAAG,OAAOwwH,CAAM,EAC1B,KAAK,OAAS,KACd,KAAK,QAAU,KACf,KAAK,aAAe,MAEtBsB,GAAmB,KAAM,wBAAwB,CAClD,EAIDvB,EAAgB,UAAU,QAAU,UAAY,CAE/C,EACDA,EAAgB,UAAU,WAAa,SAAUwB,EAAIzlD,EAAI0lD,EAAW,CAClE,OAAAA,EAAYA,GAAa,EAClB,CACL,EAAGD,EAAGC,CAAS,EACf,EAAGD,EAAG,EAAIC,CAAS,EACnB,MAAO1lD,EAAG0lD,CAAS,EACnB,OAAQ1lD,EAAG,EAAI0lD,CAAS,CACzB,CACF,EACMzB,CACT,EAAG,EACH,SAAS9zF,GAAYw1F,EAAgBtB,EAAen7I,EAAI2e,EAAO,CAExD+9H,GAAW1+E,GAAMh+D,CAAE,EAAE,SAAU2e,CAAK,IACvCq/C,GAAMh+D,CAAE,EAAE,SAAW2e,EACrBw8H,EAAgBtrB,GAAoB7vH,EAAI2e,EAAO89H,CAAc,GAAKz8I,EAAG,gBAAiBA,EAAG,KAAK2e,CAAK,GAEvG,CACA,SAAS+9H,GAAWC,EAAWC,EAAU,CACvC,GAAI7hF,EAAgB4hF,CAAS,GAAK5hF,EAAgB6hF,CAAQ,EAAG,CAC3D,IAAIC,EAAW,GACf36H,OAAAA,EAAY06H,EAAU,SAAUpnH,EAAMhgC,EAAK,CACzCqnJ,EAAWA,GAAYH,GAAWC,EAAUnnJ,CAAG,EAAGggC,CAAI,CAC5D,CAAK,EACM,CAAC,CAACqnH,CACb,KACI,QAAOF,IAAcC,CAEzB,CACA,SAASb,GAAoBD,EAAS9P,EAAkB,CACtD8P,EAAQ9P,EAAiB,IAAI,CAAC,QAAS,MAAM,CAAC,EAAI,OAAS,MAAM,EAAG,CACtE,CACA,SAASmQ,GAAoBC,EAAO,CAClC,MAAO,CACL,EAAGA,EAAM,GAAK,EACd,EAAGA,EAAM,GAAK,EACd,SAAUA,EAAM,UAAY,CAC7B,CACH,CACA,SAASf,GAAqB9/E,EAAOywE,EAAkBxpC,EAAQ,CAC7D,IAAIkF,EAAIskC,EAAiB,IAAI,GAAG,EAC5B/sE,EAAS+sE,EAAiB,IAAI,QAAQ,EAC1CzwE,GAASA,EAAM,SAAS,SAAUv7D,EAAI,CAChCA,EAAG,OAAS,UACd0nG,GAAK,OAAS1nG,EAAG,EAAI0nG,GACrBzoC,GAAU,OAASj/D,EAAG,OAASi/D,GAC/Bj/D,EAAG,OAASwiG,EAElB,CAAG,CACH,CCnVO,SAASs6C,GAAa9Q,EAAkB,CAC7C,IAAI+Q,EAAkB/Q,EAAiB,IAAI,MAAM,EAC7Ch/C,EAAag/C,EAAiB,SAAS+Q,EAAkB,OAAO,EAChE9qJ,EACJ,OAAI8qJ,IAAoB,QACtB9qJ,EAAQ+6F,EAAW,aAAc,EACjC/6F,EAAM,KAAO,MACJ8qJ,IAAoB,WAC7B9qJ,EAAQ+6F,EAAW,aAAc,EACjC/6F,EAAM,OAAS,MAEVA,CACT,CAIO,SAAS+qJ,GAAmB/B,EAAUvkC,EAAWs1B,EAAkBv1F,EAAKwmG,EAAU,CACvF,IAAIzmJ,EAAQw1I,EAAiB,IAAI,OAAO,EACpC94I,EAAOgqJ,GAAc1mJ,EAAOkgH,EAAU,KAAMA,EAAU,QAASs1B,EAAiB,IAAI,mBAAmB,EAAG,CAC5G,UAAWA,EAAiB,IAAI,CAAC,QAAS,WAAW,CAAC,EACtD,UAAWA,EAAiB,IAAI,CAAC,QAAS,WAAW,CAAC,CAC1D,CAAG,EACGphB,EAAaohB,EAAiB,SAAS,OAAO,EAC9CmR,EAAW7gF,GAA6BsuD,EAAW,IAAI,SAAS,GAAK,CAAC,EACtEz3H,EAAOy3H,EAAW,QAAS,EAC3BvC,EAAWiE,GAA4Bp5H,EAAMC,CAAI,EACjD+6C,EAAW+uG,EAAS,SACpB1pJ,EAAQ80H,EAAS,MAAQ80B,EAAS,CAAC,EAAIA,EAAS,CAAC,EACjDn2I,EAASqhH,EAAS,OAAS80B,EAAS,CAAC,EAAIA,EAAS,CAAC,EAEnDxhB,EAAQshB,EAAS,MACrBthB,IAAU,UAAYztF,EAAS,CAAC,GAAK36C,GACrCooI,IAAU,WAAaztF,EAAS,CAAC,GAAK36C,EAAQ,GAC9C,IAAI+yB,EAAgB22H,EAAS,cAC7B32H,IAAkB,WAAa4nB,EAAS,CAAC,GAAKlnC,GAC9Csf,IAAkB,WAAa4nB,EAAS,CAAC,GAAKlnC,EAAS,GAEvDo2I,GAAmBlvG,EAAU36C,EAAOyT,EAAQyvC,CAAG,EAC/C,IAAI4mG,EAAUzyB,EAAW,IAAI,iBAAiB,GAC1C,CAACyyB,GAAWA,IAAY,UAC1BA,EAAU3mC,EAAU,IAAI,CAAC,WAAY,YAAa,OAAO,CAAC,GAE5DukC,EAAS,MAAQ,CAEf,EAAG/sG,EAAS,CAAC,EACb,EAAGA,EAAS,CAAC,EACb,MAAO6f,GAAgB68D,EAAY,CACjC,KAAM13H,EACN,KAAMC,EACN,KAAMy3H,EAAW,aAAc,EAC/B,QAASuyB,EACT,gBAAiBE,CACvB,CAAK,EAED,GAAI,EACL,CACH,CAEA,SAASD,GAAmBlvG,EAAU36C,EAAOyT,EAAQyvC,EAAK,CACxD,IAAIzT,EAAYyT,EAAI,SAAU,EAC1BxT,EAAawT,EAAI,UAAW,EAChCvI,EAAS,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAI36C,EAAOyvC,CAAS,EAAIzvC,EACzD26C,EAAS,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAIlnC,EAAQi8B,CAAU,EAAIj8B,EAC3DknC,EAAS,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAG,CAAC,EACrCA,EAAS,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAG,CAAC,CACvC,CACO,SAASgvG,GAAc1mJ,EAAO4uD,EAAM9tB,EAASgmH,EAAmBv6I,EAAK,CAC1EvM,EAAQ4uD,EAAK,MAAM,MAAM5uD,CAAK,EAC9B,IAAItD,EAAOkyD,EAAK,MAAM,SAAS,CAC7B,MAAO5uD,CACX,EAAK,CAGD,UAAWuM,EAAI,SACnB,CAAG,EACGq0D,EAAYr0D,EAAI,UACpB,GAAIq0D,EAAW,CACb,IAAImmF,EAAW,CACb,MAAOC,GAA2Bp4F,EAAM,CACtC,MAAO5uD,CACf,CAAO,EACD,cAAe4uD,EAAK,IACpB,UAAWA,EAAK,MAChB,WAAY,CAAA,CACb,EACDljC,EAAYo7H,EAAmB,SAAUG,EAAS,CAChD,IAAI31E,EAASxwC,EAAQ,iBAAiBmmH,EAAQ,WAAW,EACrDvlG,EAAYulG,EAAQ,gBACpBlwD,EAAazlB,GAAUA,EAAO,cAAc5vB,CAAS,EACzDq1C,GAAcgwD,EAAS,WAAW,KAAKhwD,CAAU,CACvD,CAAK,EACG98D,EAAgB2mC,CAAS,EAC3BlkE,EAAOkkE,EAAU,QAAQ,UAAWlkE,CAAI,EAC/B8nC,EAAkBo8B,CAAS,IACpClkE,EAAOkkE,EAAUmmF,CAAQ,EAE/B,CACE,OAAOrqJ,CACT,CACO,SAASwqJ,GAAuBt4F,EAAM5uD,EAAOmnJ,EAAY,CAC9D,IAAIz4H,EAAY/d,GAAe,EAC/Bqe,OAAAA,GAAcN,EAAWA,EAAWy4H,EAAW,QAAQ,EACvDv2I,GAAiB8d,EAAWA,EAAWy4H,EAAW,QAAQ,EACnDC,GAAuB,CAACx4F,EAAK,YAAY5uD,CAAK,GAAImnJ,EAAW,aAAe,IAAMA,EAAW,gBAAkB,IAAMA,EAAW,aAAe,EAAE,EAAGz4H,CAAS,CACtK,CACO,SAAS24H,GAAkCrnJ,EAAOykJ,EAAU0C,EAAYjnC,EAAWs1B,EAAkBv1F,EAAK,CAE/G,IAAIqnG,EAAa3X,GAAY,gBAAgBwX,EAAW,SAAU,EAAGA,EAAW,cAAc,EAC9FA,EAAW,YAAc3R,EAAiB,IAAI,CAAC,QAAS,QAAQ,CAAC,EACjEgR,GAAmB/B,EAAUvkC,EAAWs1B,EAAkBv1F,EAAK,CAC7D,SAAUinG,GAAuBhnC,EAAU,KAAMlgH,EAAOmnJ,CAAU,EAClE,MAAOG,EAAW,UAClB,cAAeA,EAAW,iBAC9B,CAAG,CACH,CACO,SAASC,GAAc33I,EAAIF,EAAIs2I,EAAW,CAC/C,OAAAA,EAAYA,GAAa,EAClB,CACL,GAAIp2I,EAAGo2I,CAAS,EAChB,GAAIp2I,EAAG,EAAIo2I,CAAS,EACpB,GAAIt2I,EAAGs2I,CAAS,EAChB,GAAIt2I,EAAG,EAAIs2I,CAAS,CACrB,CACH,CACO,SAASwB,GAAczB,EAAIzlD,EAAI0lD,EAAW,CAC/C,OAAAA,EAAYA,GAAa,EAClB,CACL,EAAGD,EAAGC,CAAS,EACf,EAAGD,EAAG,EAAIC,CAAS,EACnB,MAAO1lD,EAAG0lD,CAAS,EACnB,OAAQ1lD,EAAG,EAAI0lD,CAAS,CACzB,CACH,CCxIA,IAAIyB,GAAoC,SAAUh1I,EAAQ,CACxDC,EAAU+0I,EAAsBh1I,CAAM,EACtC,SAASg1I,GAAuB,CAC9B,OAAOh1I,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CAIE,OAAAg1I,EAAqB,UAAU,aAAe,SAAUhD,EAAUzkJ,EAAOkgH,EAAWs1B,EAAkBv1F,EAAK,CACzG,IAAI2O,EAAOsxD,EAAU,KACjByrB,EAAO/8E,EAAK,KACZ23F,EAAkB/Q,EAAiB,IAAI,MAAM,EAC7CqO,EAAc6D,GAAa/b,EAAM/8E,CAAI,EAAE,aAAaA,CAAI,EAAE,gBAAiB,EAC3E+4F,EAAa/4F,EAAK,cAAcA,EAAK,YAAY5uD,EAAO,EAAI,CAAC,EACjE,GAAIumJ,GAAmBA,IAAoB,OAAQ,CACjD,IAAIqB,EAAUC,GAAwBrS,CAAgB,EAClD2P,EAAgB2C,GAAoBvB,CAAe,EAAE33F,EAAM+4F,EAAY9D,CAAW,EACtFsB,EAAc,MAAQyC,EACtBnD,EAAS,WAAaU,EAAc,KACpCV,EAAS,QAAUU,CACzB,CACI,IAAIgC,EAAazO,GAA2B/M,EAAK,MAAOzrB,CAAS,EACjE6nC,GAEA/nJ,EAAOykJ,EAAU0C,EAAYjnC,EAAWs1B,EAAkBv1F,CAAG,CAC9D,EAIDwnG,EAAqB,UAAU,mBAAqB,SAAUznJ,EAAOkgH,EAAWs1B,EAAkB,CAChG,IAAI2R,EAAazO,GAA2Bx4B,EAAU,KAAK,KAAK,MAAOA,EAAW,CAChF,YAAa,EACnB,CAAK,EAEDinC,EAAW,YAAc3R,EAAiB,IAAI,CAAC,SAAU,QAAQ,CAAC,EAClE,IAAIzoI,EAAMi7I,GAAkC9nC,EAAU,KAAMlgH,EAAOmnJ,CAAU,EAC7E,MAAO,CACL,EAAGp6I,EAAI,CAAC,EACR,EAAGA,EAAI,CAAC,EACR,SAAUo6I,EAAW,UAAYA,EAAW,eAAiB,EAAI,KAAK,GAAK,EAC5E,CACF,EAIDM,EAAqB,UAAU,sBAAwB,SAAU/4H,EAAWviB,EAAO+zG,EAAWs1B,EAAkB,CAC9G,IAAI5mF,EAAOsxD,EAAU,KACjByrB,EAAO/8E,EAAK,KACZ64D,EAAa74D,EAAK,gBAAgB,EAAI,EACtCi1F,EAAc6D,GAAa/b,EAAM/8E,CAAI,EAAE,aAAaA,CAAI,EAAE,gBAAiB,EAC3Ewc,EAAWxc,EAAK,MAAQ,IAAM,EAAI,EAClCq5F,EAAe,CAACv5H,EAAU,EAAGA,EAAU,CAAC,EAC5Cu5H,EAAa78E,CAAQ,GAAKj/D,EAAMi/D,CAAQ,EACxC68E,EAAa78E,CAAQ,EAAI,KAAK,IAAIq8C,EAAW,CAAC,EAAGwgC,EAAa78E,CAAQ,CAAC,EACvE68E,EAAa78E,CAAQ,EAAI,KAAK,IAAIq8C,EAAW,CAAC,EAAGwgC,EAAa78E,CAAQ,CAAC,EACvE,IAAI88E,GAAoBrE,EAAY,CAAC,EAAIA,EAAY,CAAC,GAAK,EACvDsE,EAAc,CAACD,EAAkBA,CAAgB,EACrDC,EAAY/8E,CAAQ,EAAI68E,EAAa78E,CAAQ,EAE7C,IAAIg9E,EAAiB,CAAC,CACpB,cAAe,QACrB,EAAO,CACD,MAAO,QACb,CAAK,EACD,MAAO,CACL,EAAGH,EAAa,CAAC,EACjB,EAAGA,EAAa,CAAC,EACjB,SAAUv5H,EAAU,SACpB,YAAay5H,EACb,cAAeC,EAAeh9E,CAAQ,CACvC,CACF,EACMq8E,CACT,EAAElD,EAAe,EACjB,SAASmD,GAAa/b,EAAM/8E,EAAM,CAChC,IAAIriD,EAAM,CAAE,EACZ,OAAAA,EAAIqiD,EAAK,IAAM,WAAW,EAAIA,EAAK,MAC5B+8E,EAAK,aAAap/H,CAAG,CAC9B,CACA,IAAIu7I,GAAsB,CACxB,KAAM,SAAUl5F,EAAM+4F,EAAY9D,EAAa,CAC7C,IAAInuG,EAAc2yG,GAAyB,CAACV,EAAY9D,EAAY,CAAC,CAAC,EAAG,CAAC8D,EAAY9D,EAAY,CAAC,CAAC,EAAGyE,GAAgB15F,CAAI,CAAC,EAC5H,MAAO,CACL,KAAM,OACN,iBAAkB,GAClB,MAAOlZ,CACR,CACF,EACD,OAAQ,SAAUkZ,EAAM+4F,EAAY9D,EAAa,CAC/C,IAAIn8B,EAAY,KAAK,IAAI,EAAG94D,EAAK,cAAc,EAC3C+0D,EAAOkgC,EAAY,CAAC,EAAIA,EAAY,CAAC,EACzC,MAAO,CACL,KAAM,OACN,MAAO0E,GAAyB,CAACZ,EAAajgC,EAAY,EAAGm8B,EAAY,CAAC,CAAC,EAAG,CAACn8B,EAAW/D,CAAI,EAAG2kC,GAAgB15F,CAAI,CAAC,CACvH,CACL,CACA,EACA,SAAS05F,GAAgB15F,EAAM,CAC7B,OAAOA,EAAK,MAAQ,IAAM,EAAI,CAChC,CCrGA,IAAI45F,GAAgC,SAAU/1I,EAAQ,CACpDC,EAAU81I,EAAkB/1I,CAAM,EAClC,SAAS+1I,GAAmB,CAC1B,IAAI71I,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO61I,EAAiB,KACvB71I,CACX,CACE,OAAA61I,EAAiB,KAAO,cACxBA,EAAiB,cAAgB,CAE/B,KAAM,OAEN,EAAG,GACH,KAAM,OAGN,KAAM,GACN,eAAgB,GAChB,gBAAiB,GACjB,MAAO,KACP,OAAQ,KACR,KAAM,CAAE,EAGR,UAAW,KACX,wBAAyB,IACzB,UAAW,CACT,MAAO,UACP,MAAO,EACP,KAAM,QACP,EACD,YAAa,CACX,MAAO,uBACR,EACD,MAAO,CACL,KAAM,GACN,UAAW,KACX,UAAW,OACX,OAAQ,EACR,MAAO,OACP,QAAS,CAAC,EAAG,EAAG,EAAG,CAAC,EACpB,gBAAiB,OACjB,YAAa,KACb,YAAa,EACb,aAAc,CACf,EACD,OAAQ,CACN,KAAM,GAEN,KAAM,2MACN,KAAM,GAEN,OAAQ,GAGR,MAAO,OACP,WAAY,EACZ,YAAa,OACb,cAAe,EACf,cAAe,EAEf,SAAU,EAChB,CACG,EACMA,CACT,EAAE/gF,EAAc,EChEZD,GAAQ9mC,GAAW,EACnB9/B,GAAO8qB,EAQJ,SAAS+8H,GAASzpJ,EAAKihD,EAAKj6C,EAAS,CAC1C,GAAI,CAAA/K,EAAI,KAGR,KAAI+4B,EAAKisB,EAAI,MAAO,EACpBunB,GAAMxzC,CAAE,EAAE,UAAYwzC,GAAMxzC,CAAE,EAAE,QAAU,IAC1C00H,GAAoB10H,EAAIisB,CAAG,EAC3B,IAAI04C,EAASnxB,GAAMxzC,CAAE,EAAE,QAAQh1B,CAAG,IAAMwoE,GAAMxzC,CAAE,EAAE,QAAQh1B,CAAG,EAAI,CAAA,GACjE25F,EAAO,QAAU3yF,EACnB,CACA,SAAS0iJ,GAAoB10H,EAAIisB,EAAK,CACpC,GAAIunB,GAAMxzC,CAAE,EAAE,YACZ,OAEFwzC,GAAMxzC,CAAE,EAAE,YAAc,GACxB20H,EAAW,QAASjjF,GAAakjF,GAAS,OAAO,CAAC,EAClDD,EAAW,YAAajjF,GAAakjF,GAAS,WAAW,CAAC,EAE1DD,EAAW,YAAaE,EAAO,EAC/B,SAASF,EAAW1hJ,EAAWnG,EAAI,CACjCkzB,EAAG,GAAG/sB,EAAW,SAAUhB,EAAG,CAC5B,IAAI6iJ,EAAMC,GAAmB9oG,CAAG,EAChCr/C,GAAK4mE,GAAMxzC,CAAE,EAAE,QAAS,SAAU2kE,EAAQ,CACxCA,GAAU73F,EAAG63F,EAAQ1yF,EAAG6iJ,EAAI,cAAc,CAClD,CAAO,EACDE,GAAuBF,EAAI,SAAU7oG,CAAG,CAC9C,CAAK,CACL,CACA,CACA,SAAS+oG,GAAuBC,EAAUhpG,EAAK,CAC7C,IAAIipG,EAAUD,EAAS,QAAQ,OAC3BE,EAAUF,EAAS,QAAQ,OAC3BG,EACAF,EACFE,EAAkBH,EAAS,QAAQC,EAAU,CAAC,EACrCC,IACTC,EAAkBH,EAAS,QAAQE,EAAU,CAAC,GAE5CC,IACFA,EAAgB,eAAiB,KACjCnpG,EAAI,eAAempG,CAAe,EAEtC,CACA,SAASP,GAAQlwD,EAAQ1yF,EAAGojJ,EAAgB,CAC1C1wD,EAAO,QAAQ,QAAS,KAAM0wD,CAAc,CAC9C,CACA,SAAST,GAAQU,EAAa3wD,EAAQ,EAAG0wD,EAAgB,CACvD1wD,EAAO,QAAQ2wD,EAAa,EAAGD,CAAc,CAC/C,CACA,SAASN,GAAmB9oG,EAAK,CAC/B,IAAIgpG,EAAW,CACb,QAAS,CAAE,EACX,QAAS,CAAA,CACV,EAMGI,EAAiB,SAAU5oH,EAAS,CACtC,IAAI6I,EAAc2/G,EAASxoH,EAAQ,IAAI,EACnC6I,EACFA,EAAY,KAAK7I,CAAO,GAExBA,EAAQ,eAAiB4oH,EACzBppG,EAAI,eAAexf,CAAO,EAE7B,EACD,MAAO,CACL,eAAgB4oH,EAChB,SAAUJ,CACX,CACH,CACO,SAASM,GAAWvqJ,EAAKihD,EAAK,CACnC,GAAI,CAAAhlD,EAAI,KAGR,KAAI+4B,EAAKisB,EAAI,MAAO,EAChB04C,GAAUnxB,GAAMxzC,CAAE,EAAE,SAAW,CAAE,GAAEh1B,CAAG,EACtC25F,IACFnxB,GAAMxzC,CAAE,EAAE,QAAQh1B,CAAG,EAAI,MAE7B,CC3FA,IAAIwqJ,GAA+B,SAAU/2I,EAAQ,CACnDC,EAAU82I,EAAiB/2I,CAAM,EACjC,SAAS+2I,GAAkB,CACzB,IAAI72I,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO62I,EAAgB,KACtB72I,CACX,CACE,OAAA62I,EAAgB,UAAU,OAAS,SAAU9U,EAAwB5zG,EAASmf,EAAK,CACjF,IAAIw0F,EAAqB3zG,EAAQ,aAAa,SAAS,EACnD2oH,EAAY/U,EAAuB,IAAI,WAAW,GAAKD,GAAsBA,EAAmB,IAAI,WAAW,GAAK,kBAGxHiV,GAAwB,cAAezpG,EAAK,SAAUqpG,EAAarjJ,EAAGojJ,EAAgB,CAEhFI,IAAc,SAAWH,IAAgB,SAAWG,EAAU,QAAQH,CAAW,GAAK,IACxFD,EAAe,CACb,KAAM,oBACN,YAAaC,EACb,EAAGrjJ,GAAKA,EAAE,QACV,EAAGA,GAAKA,EAAE,OACpB,CAAS,CAET,CAAK,CACF,EACDujJ,EAAgB,UAAU,OAAS,SAAU1oH,EAASmf,EAAK,CACzD0pG,GAA0B,cAAe1pG,CAAG,CAC7C,EACDupG,EAAgB,UAAU,QAAU,SAAU1oH,EAASmf,EAAK,CAC1D0pG,GAA0B,cAAe1pG,CAAG,CAC7C,EACDupG,EAAgB,KAAO,cAChBA,CACT,EAAEn2D,EAAa,EC5BA,SAASu2D,GAAoBnoH,EAAQX,EAAS,CAC3D,IAAIirB,EAAQ,CAAE,EACVjQ,EAAcra,EAAO,YACrBwf,EACJ,GAAInF,GAAe,MAAQ,EAAEmF,EAAcngB,EAAQ,iBAAiBgb,CAAW,GAC7E,MAAO,CACL,MAAO,CAAA,CACR,EAEH,IAAIn7C,EAAOsgD,EAAY,QAAS,EAC5BS,EAAY4yC,GAAyB3zF,EAAM8gC,CAAM,EACrD,GAAIigB,GAAa,MAAQA,EAAY,GAAKuf,EAAevf,CAAS,EAChE,MAAO,CACL,MAAO,CAAA,CACR,EAEH,IAAIl4C,EAAK7I,EAAK,iBAAiB+gD,CAAS,EACpCP,EAAWF,EAAY,iBAC3B,GAAIA,EAAY,mBACd8K,EAAQ9K,EAAY,mBAAmBS,CAAS,GAAK,CAAE,UAC9CP,GAAYA,EAAS,YAC9B,GAAI1f,EAAO,UAAW,CACpB,IAAI0lF,EAAWhmE,EAAS,YAAa,EACjCo6E,EAAYp6E,EAAS,aAAagmE,CAAQ,EAC1CwU,EAAeJ,EAAU,IACzBG,EAAcvU,EAAS,IACvB2U,EAAiBH,IAAiB,KAAOA,IAAiB,SAAW,EAAI,EACzEE,EAAUl7H,EAAK,aAAa+6H,CAAW,EACvCS,EAAc,CAAE,EACpBA,EAAYL,CAAc,EAAIn7H,EAAK,IAAIk7H,EAASn6E,CAAS,EACzDy6E,EAAY,EAAIL,CAAc,EAAIn7H,EAAK,IAAIA,EAAK,mBAAmB,sBAAsB,EAAG+gD,CAAS,EACrGqK,EAAQ5K,EAAS,YAAYg7E,CAAW,GAAK,CAAE,CACrD,MACMpwE,EAAQ5K,EAAS,YAAYxgD,EAAK,UAAU4pB,EAAW42B,EAAS,WAAY,SAAU3K,EAAK,CACzF,OAAO71C,EAAK,aAAa61C,CAAG,CACpC,CAAO,EAAGkL,CAAS,CAAC,GAAK,CAAE,UAEdl4C,EAAI,CAEb,IAAImB,EAAOnB,EAAG,gBAAe,EAAG,MAAO,EACvCmB,EAAK,eAAenB,EAAG,SAAS,EAChCuiD,EAAQ,CAACphD,EAAK,EAAIA,EAAK,MAAQ,EAAGA,EAAK,EAAIA,EAAK,OAAS,CAAC,CAC9D,CACE,MAAO,CACL,MAAOohD,EACP,GAAIviD,CACL,CACH,CClDA,IAAIg+D,GAAQ9mC,GAAW,EAOR,SAASmpH,GAAYppH,EAASK,EAASmf,EAAK,CACzD,IAAIqpG,EAAc7oH,EAAQ,YACtBsrB,EAAQ,CAACtrB,EAAQ,EAAGA,EAAQ,CAAC,EAC7BgB,EAAShB,EACT4oH,EAAiB5oH,EAAQ,gBAAkBp/B,EAAK4+C,EAAI,eAAgBA,CAAG,EACvEi3F,EAAmBp2G,EAAQ,aAAa,aAAa,EAAE,iBAG3D,GAAKo2G,EAGL,CAAI4S,GAAa/9F,CAAK,IAGpBA,EAAQ69F,GAAoB,CAC1B,YAAanoH,EAAO,YAGpB,UAAWA,EAAO,SACxB,EAAOX,CAAO,EAAE,OAEd,IAAIipH,EAAiBD,GAAa/9F,CAAK,EAKnCi+F,EAAgBvoH,EAAO,SACvBwoH,EAAW/S,EAAiB,SAC5BgT,EAAaZ,IAAgB,SAAWQ,GAAa/9F,CAAK,EAC1Do+F,EAAgB,CAAE,EAClBC,EAAe,CAAE,EACjBC,EAAiB,CACnB,KAAM,CAAE,EACR,IAAK,CAAA,CACN,EACGC,EAAW,CACb,YAAa/oJ,GAAMgpJ,GAAaH,CAAY,EAC5C,YAAa7oJ,GAAMipJ,GAAaH,CAAc,CAC/C,EAEDzpJ,EAAKs2I,EAAiB,YAAa,SAAU/1F,EAAU0zF,EAAa,CAElE,IAAI4V,EAAwBV,GAAkB5oG,EAAS,aAAa4K,CAAK,EACzEnrD,EAAKs2I,EAAiB,iBAAiBrC,CAAW,EAAG,SAAUkB,EAAU/2I,EAAK,CAC5E,IAAI4vD,EAAOmnF,EAAS,KAChB2U,EAAgBC,GAAkBX,EAAejU,CAAQ,EAE7D,GAAI,CAACmU,GAAcO,IAA0B,CAACT,GAAiBU,GAAgB,CAC7E,IAAIltJ,EAAMktJ,GAAiBA,EAAc,MACrCltJ,GAAO,MAAQ,CAACusJ,IAClBvsJ,EAAMoxD,EAAK,YAAY7C,CAAK,GAE9BvuD,GAAO,MAAQotJ,GAAc7U,EAAUv4I,EAAK8sJ,EAAU,GAAOH,CAAa,CAClF,CACA,CAAK,CACL,CAAG,EAED,IAAIU,EAAe,CAAE,EACrBjqJ,OAAAA,EAAKqpJ,EAAU,SAAUa,EAAaC,EAAQ,CAC5C,IAAI7U,EAAY4U,EAAY,UAExB5U,GAAa,CAACkU,EAAaW,CAAM,GACnCnqJ,EAAKs1I,EAAU,SAAU,SAAU8U,EAAaC,EAAQ,CACtD,IAAIC,EAAad,EAAaa,CAAM,EAEpC,GAAID,IAAgBF,GAAeI,EAAY,CAC7C,IAAI1tJ,EAAM0tJ,EAAW,MACrBhV,EAAU,SAAW14I,EAAMstJ,EAAY,KAAK,MAAM,MAAM5U,EAAU,OAAO14I,EAAK2tJ,GAAgBH,CAAW,EAAGG,GAAgBL,CAAW,CAAC,CAAC,GACzID,EAAaC,EAAY,GAAG,EAAIttJ,CAC1C,CACA,CAAO,CAEP,CAAG,EACDoD,EAAKiqJ,EAAc,SAAUrtJ,EAAKutJ,EAAQ,CACxCH,GAAcX,EAASc,CAAM,EAAGvtJ,EAAK8sJ,EAAU,GAAMH,CAAa,CACtE,CAAG,EACDiB,GAAoBhB,EAAcH,EAAUE,CAAa,EACzDkB,GAAwBhB,EAAgBt+F,EAAOtrB,EAAS4oH,CAAc,EACtEiC,GAAyBrB,EAAUZ,EAAgBppG,CAAG,EAC/CkqG,EACT,CACA,SAASS,GAAc7U,EAAUwV,EAAUjB,EAAUkB,EAAQC,EAAc,CACzE,IAAI78F,EAAOmnF,EAAS,KACpB,GAAI,EAAAnnF,EAAK,MAAM,QAAO,GAAM,CAACA,EAAK,YAAY28F,CAAQ,GAGtD,IAAI,CAACxV,EAAS,cAAe,CAC3BuU,EAAS,YAAYvU,EAAUwV,CAAQ,EACvC,MACJ,CAEE,IAAI1F,EAAc6F,GAAsBH,EAAUxV,CAAQ,EACtD4V,EAAe9F,EAAY,aAC3B+F,EAAc/F,EAAY,YAG1B8F,EAAa,CAAC,GAAKF,EAAa,aAAe,MACjDhsJ,EAAOgsJ,EAAcE,EAAa,CAAC,CAAC,EAIlC,CAACH,GAAUzV,EAAS,MAClBnnF,EAAK,YAAYg9F,CAAW,GAAKA,GAAe,OAClDL,EAAWK,GAGftB,EAAS,YAAYvU,EAAUwV,EAAUI,CAAY,EAGrDrB,EAAS,YAAYvU,EAAU8P,EAAa+F,CAAW,EACzD,CACA,SAASF,GAAsB1rJ,EAAO+1I,EAAU,CAC9C,IAAInnF,EAAOmnF,EAAS,KAChBv/F,EAAMoY,EAAK,IACXg9F,EAAc5rJ,EACd2rJ,EAAe,CAAE,EACjB1lE,EAAU,OAAO,UACjBC,EAAU,GACdtlF,OAAAA,EAAKm1I,EAAS,aAAc,SAAUzkE,EAAQj3D,EAAK,CACjD,IAAIy4E,EAAUxhB,EAAO,QAAO,EAAG,iBAAiB96B,CAAG,EAC/Cq1G,EACAjrG,EACJ,GAAI0wB,EAAO,mBAAoB,CAC7B,IAAI5yE,EAAS4yE,EAAO,mBAAmBwhB,EAAS9yF,EAAO4uD,CAAI,EAC3DhO,EAAcliD,EAAO,YACrBmtJ,EAAqBntJ,EAAO,YAClC,KAAW,CAML,GALAkiD,EAAc0wB,EAAO,QAAS,EAAC,iBAAiBwhB,EAAQ,CAAC,EAAG9yF,EAI5D4uD,EAAK,OAAS,WAAa,GAAM,IAAI,EACjC,CAAChO,EAAY,OACf,OAEFirG,EAAqBv6E,EAAO,QAAO,EAAG,IAAIwhB,EAAQ,CAAC,EAAGlyC,EAAY,CAAC,CAAC,CAC1E,CACI,GAAI,EAAAirG,GAAsB,MAAQ,CAAC,SAASA,CAAkB,GAG9D,KAAIx8G,EAAOrvC,EAAQ6rJ,EACftmJ,EAAO,KAAK,IAAI8pC,CAAI,EAEpB9pC,GAAQ0gF,KACN1gF,EAAO0gF,GAAW52C,GAAQ,GAAK62C,EAAU,KAC3CD,EAAU1gF,EACV2gF,EAAU72C,EACVu8G,EAAcC,EACdF,EAAa,OAAS,GAExB/qJ,EAAKggD,EAAa,SAAUc,EAAW,CACrCiqG,EAAa,KAAK,CAChB,YAAar6E,EAAO,YACpB,gBAAiB5vB,EACjB,UAAW4vB,EAAO,QAAS,EAAC,YAAY5vB,CAAS,CAC3D,CAAS,CACT,CAAO,GAEP,CAAG,EACM,CACL,aAAciqG,EACd,YAAaC,CACd,CACH,CACA,SAASrB,GAAYH,EAAcrU,EAAU/1I,EAAO2rJ,EAAc,CAChEvB,EAAarU,EAAS,GAAG,EAAI,CAC3B,MAAO/1I,EACP,aAAc2rJ,CACf,CACH,CACA,SAASnB,GAAYH,EAAgBtU,EAAU8P,EAAa7lJ,EAAO,CACjE,IAAI2rJ,EAAe9F,EAAY,aAC3Bj3F,EAAOmnF,EAAS,KAChB71B,EAAYtxD,EAAK,MACjB4mF,EAAmBO,EAAS,iBAGhC,GAAI,GAACA,EAAS,gBAAkB,CAAC4V,EAAa,QAG9C,KAAI3W,EAAgBe,EAAS,SAAS,MAClClB,EAAciX,GAAoB9W,CAAa,EAC/C+W,EAAe1B,EAAe,IAAIxV,CAAW,EAC5CkX,IACHA,EAAe1B,EAAe,IAAIxV,CAAW,EAAI,CAC/C,WAAYG,EAAc,GAC1B,cAAeA,EAAc,eAC7B,aAAcA,EAAc,KAC5B,iBAAkBA,EAAc,SAChC,WAAY,CAAA,CACb,EACDqV,EAAe,KAAK,KAAK0B,CAAY,GAEvCA,EAAa,WAAW,KAAK,CAC3B,QAASn9F,EAAK,IACd,UAAWsxD,EAAU,eACrB,SAAUA,EAAU,KACpB,OAAQA,EAAU,GAClB,MAAOlgH,EAKP,cAAe,CACb,UAAWw1I,EAAiB,IAAI,CAAC,QAAS,WAAW,CAAC,EACtD,UAAWA,EAAiB,IAAI,CAAC,QAAS,WAAW,CAAC,CACvD,EACD,kBAAmBmW,EAAa,MAAK,CACzC,CAAG,EACH,CACA,SAASP,GAAoBhB,EAAcH,EAAUE,EAAe,CAClE,IAAI6B,EAAiB7B,EAAc,SAAW,CAAE,EAEhDvpJ,EAAKqpJ,EAAU,SAAUlU,EAAU/2I,EAAK,CACtC,IAAIg8D,EAAS+6E,EAAS,iBAAiB,OACnCkW,EAAU7B,EAAaprJ,CAAG,EAC1BitJ,GACF,CAAClW,EAAS,YAAc/6E,EAAO,OAAS,QACxCA,EAAO,MAAQixF,EAAQ,MAEvBjxF,EAAO,mBAAqBixF,EAAQ,cAAgB,CAAA,GAAI,MAAO,GAO/D,CAAClW,EAAS,YAAc/6E,EAAO,OAAS,QAG1CA,EAAO,SAAW,QAAUgxF,EAAe,KAAK,CAC9C,QAASjW,EAAS,KAAK,IACvB,UAAWA,EAAS,KAAK,MAAM,eAC/B,MAAO/6E,EAAO,KACpB,CAAK,CACL,CAAG,CACH,CACA,SAASqwF,GAAwBhB,EAAgBt+F,EAAOtrB,EAAS4oH,EAAgB,CAE/E,GAAIS,GAAa/9F,CAAK,GAAK,CAACs+F,EAAe,KAAK,OAAQ,CACtDhB,EAAe,CACb,KAAM,SACZ,CAAK,EACD,MACJ,CAKE,IAAI3mC,IAAe2nC,EAAe,KAAK,CAAC,EAAE,WAAW,CAAC,GAAK,CAAA,GAAI,mBAAqB,CAAA,GAAI,CAAC,GAAK,CAAE,EAChGhB,EAAe,CACb,KAAM,UACN,cAAe,GACf,EAAGt9F,EAAM,CAAC,EACV,EAAGA,EAAM,CAAC,EACV,cAAetrB,EAAQ,cACvB,SAAUA,EAAQ,SAClB,gBAAiBiiF,EAAW,gBAC5B,UAAWA,EAAW,UACtB,YAAaA,EAAW,YACxB,eAAgB2nC,EAAe,IACnC,CAAG,CACH,CACA,SAASiB,GAAyBrB,EAAUZ,EAAgBppG,EAAK,CAI/D,IAAIjsB,EAAKisB,EAAI,MAAO,EAChBisG,EAAc,4BACdC,EAAiB3kF,GAAMxzC,CAAE,EAAEk4H,CAAW,GAAK,CAAE,EAC7CE,EAAgB5kF,GAAMxzC,CAAE,EAAEk4H,CAAW,EAAI,CAAE,EAG/CtrJ,EAAKqpJ,EAAU,SAAUlU,EAAU/2I,EAAK,CACtC,IAAIg8D,EAAS+6E,EAAS,iBAAiB,OACvC/6E,EAAO,SAAW,QAAU+6E,EAAS,iBAAmBn1I,EAAKo6D,EAAO,kBAAmB,SAAU01C,EAAW,CAC1G,IAAI1xG,EAAM0xG,EAAU,YAAc,MAAQA,EAAU,UACpD07C,EAAcptJ,CAAG,EAAI0xG,CAC3B,CAAK,CACL,CAAG,EAED,IAAI27C,EAAc,CAAE,EAChBC,EAAa,CAAE,EACnB1rJ,EAAKurJ,EAAgB,SAAUz7C,EAAW1xG,EAAK,CAC7C,CAACotJ,EAAcptJ,CAAG,GAAKstJ,EAAW,KAAK57C,CAAS,CACpD,CAAG,EACD9vG,EAAKwrJ,EAAe,SAAU17C,EAAW1xG,EAAK,CAC5C,CAACmtJ,EAAentJ,CAAG,GAAKqtJ,EAAY,KAAK37C,CAAS,CACtD,CAAG,EACD47C,EAAW,QAAUrsG,EAAI,eAAe,CACtC,KAAM,WACN,cAAe,GAEf,QAAS,GACT,MAAOqsG,CACX,CAAG,EACDD,EAAY,QAAUpsG,EAAI,eAAe,CACvC,KAAM,YACN,cAAe,GAEf,QAAS,GACT,MAAOosG,CACX,CAAG,CACH,CACA,SAAS1B,GAAkBX,EAAejU,EAAU,CAClD,QAAS55I,EAAI,EAAGA,GAAK6tJ,GAAiB,CAAE,GAAE,OAAQ7tJ,IAAK,CACrD,IAAIuuJ,EAAgBV,EAAc7tJ,CAAC,EACnC,GAAI45I,EAAS,KAAK,MAAQ2U,EAAc,SAAW3U,EAAS,KAAK,MAAM,iBAAmB2U,EAAc,UACtG,OAAOA,CAEb,CACA,CACA,SAASS,GAAgBpV,EAAU,CACjC,IAAI71B,EAAY61B,EAAS,KAAK,MAC1B/2G,EAAO,CAAE,EACTwX,EAAMxX,EAAK,QAAU+2G,EAAS,KAAK,IACvC,OAAA/2G,EAAK,UAAYA,EAAKwX,EAAM,WAAW,EAAI0pE,EAAU,eACrDlhF,EAAK,SAAWA,EAAKwX,EAAM,UAAU,EAAI0pE,EAAU,KACnDlhF,EAAK,OAASA,EAAKwX,EAAM,QAAQ,EAAI0pE,EAAU,GACxClhF,CACT,CACA,SAAS8qH,GAAa/9F,EAAO,CAC3B,MAAO,CAACA,GAASA,EAAM,CAAC,GAAK,MAAQ,MAAMA,EAAM,CAAC,CAAC,GAAKA,EAAM,CAAC,GAAK,MAAQ,MAAMA,EAAM,CAAC,CAAC,CAC5F,CCvUO,SAASy8E,GAAQC,EAAW,CAIjC4O,GAAS,yBAAyB,uBAAwBoQ,EAAoB,EAC9Ehf,EAAU,uBAAuB+f,EAAgB,EACjD/f,EAAU,sBAAsB+gB,EAAe,EAC/C/gB,EAAU,qBAAqB,SAAUztE,EAAQ,CAE/C,GAAIA,EAAQ,EACT,CAACA,EAAO,aAAeA,EAAO,YAAY,SAAW,KAAOA,EAAO,YAAc,IAClF,IAAIyJ,EAAOzJ,EAAO,YAAY,KAI1ByJ,GAAQ,CAACllE,EAAQklE,CAAI,IACvBzJ,EAAO,YAAY,KAAO,CAACyJ,CAAI,EAEvC,CACA,CAAG,EAGDgkE,EAAU,kBAAkBA,EAAU,SAAS,UAAU,UAAW,SAAU3nG,EAASmf,EAAK,CAG1Fnf,EAAQ,aAAa,aAAa,EAAE,iBAAmBwzG,GAAQxzG,EAASmf,CAAG,CAC/E,CAAG,EAEDwoF,EAAU,eAAe,CACvB,KAAM,oBACN,MAAO,oBACP,OAAQ,oBACT,EAAEohB,EAAW,CAChB,CCrCO,SAASrhB,GAAQC,EAAW,CACjCvV,GAAIq5B,EAAa,EACjBr5B,GAAIs5B,EAAkB,CACxB,CCLO,IAAIC,GAA4B,CAAC,IAAK,IAAK,SAAU,QAAS,QAAQ,EAGzEC,GAAgB,CAAC,cAAe,QAAS,YAAY,EAClD,SAASC,GAAiB1rG,EAAa,CACxC,IAAA2rG,EAAY3rG,EAAY,IAAI,kBAAkB,EAC3C,OAAAnhD,EAAQ4sJ,GAAeE,CAAS,GAAK,CAC9C,CACO,SAASC,GAAgB1sC,EAAS,CAIvC,OAAOA,EAAU,MACnB,CAiBgB,SAAA2sC,GAAsBhsH,EAASL,EAAS,CAEtD,IAAIssH,EAAcxpJ,EAAc,EAC5BypJ,EAAiB,CAAC,EAElBC,EAAmB1pJ,EAAc,EAErCu9B,EAAQ,cAAc,CACpB,SAAU,WACV,MAAOL,CACT,EAAG,SAAUysH,EAAe,CACrBD,EAAiB,IAAIC,EAAc,GAAG,GACzCC,EAAcD,CAAa,CAC7B,CACD,EAGG,IAAAE,EACD,GACcA,EAAA,GACPtsH,EAAA,cAAc,WAAYusH,CAAa,QACxCD,GACT,SAASC,EAAcH,EAAe,CAChC,CAACD,EAAiB,IAAIC,EAAc,GAAG,GAAKI,EAASJ,CAAa,IACpEC,EAAcD,CAAa,EACZE,EAAA,GACjB,CAEF,SAASD,EAAcI,EAAU,CACdN,EAAA,IAAIM,EAAS,IAAK,EAAI,EACvCP,EAAe,KAAKO,CAAQ,EAC5BC,EAAmBD,CAAQ,CAAA,CAE7B,SAASD,EAASJ,EAAe,CAC/B,IAAIO,EAAS,GACC,OAAAP,EAAA,eAAe,SAAU/sC,EAASF,EAAW,CACrD,IAAAytC,EAAaX,EAAY,IAAI5sC,CAAO,EACpCutC,GAAcA,EAAWztC,CAAS,IAC3BwtC,EAAA,GACX,CACD,EACMA,CAAA,CAET,SAASD,EAAmBN,EAAe,CAC3BA,EAAA,eAAe,SAAU/sC,EAASF,EAAW,EACxD8sC,EAAY,IAAI5sC,CAAO,GAAK4sC,EAAY,IAAI5sC,EAAS,CAAE,CAAA,GAAGF,CAAS,EAAI,EAAA,CACzE,CAAA,CAEI,OAAA+sC,CACT,CAoBO,SAASW,GAA8BT,EAAe,CAC3D,IAAIpsH,EAAUosH,EAAc,QACxBU,EAAmB,CACrB,SAAU,CAAC,EACX,QAASrqJ,EAAc,CACzB,EACc,OAAA2pJ,EAAA,eAAe,SAAU/sC,EAASF,EAAW,CACzD,IAAIC,EAAYp/E,EAAQ,aAAa+rH,GAAgB1sC,CAAO,EAAGF,CAAS,EACxE,GAAKC,EAGD,KAAA80B,EAAgB90B,EAAU,iBAAiB,EAC/C,GAAK80B,EAGL,KAAI6Y,EAAc7Y,EAAc,IAC5BxzB,EAAeosC,EAAiB,QAAQ,IAAIC,CAAW,EACtDrsC,IACYA,EAAA,CACb,MAAOwzB,EACP,WAAY,CAAA,CACd,EACiB4Y,EAAA,SAAS,KAAKpsC,CAAY,EAC1BosC,EAAA,QAAQ,IAAIC,EAAarsC,CAAY,GAE3CA,EAAA,WAAW,KAAKtB,CAAS,GAAA,CACvC,EACM0tC,CACT,CC3HA,IAAIE,GAAgC,UAAY,CAC9C,SAASA,GAAmB,CAC1B,KAAK,UAAY,CAAC,EAClB,KAAK,SAAW,CAAC,CAAA,CAEnBA,OAAAA,EAAiB,UAAU,IAAM,SAAUC,EAAa,CAEjD,KAAK,SAASA,CAAW,IACvB,KAAA,UAAU,KAAKA,CAAW,EAC1B,KAAA,SAASA,CAAW,EAAI,GAEjC,EACOD,CACP,EAAA,EACEE,GAA6B,SAAUv7I,EAAQ,CACjDC,EAAUs7I,EAAev7I,CAAM,EAC/B,SAASu7I,GAAgB,CACvB,IAAIr7I,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOq7I,EAAc,KAC3Br7I,EAAM,cAAgB,GACtBA,EAAM,UAAY,GAiBZA,EAAA,eAAiB,CAAC,UAAW,SAAS,EACrCA,CAAA,CAETq7I,OAAAA,EAAc,UAAU,KAAO,SAAUhzF,EAAQC,EAAan6B,EAAS,CACjE,IAAAmtH,EAAiBC,GAAkBlzF,CAAM,EAsB7C,KAAK,cAAgBizF,EAChB,KAAA,qBAAqBjzF,EAAQl6B,CAAO,EACzC,KAAK,QAAQmtH,CAAc,CAC7B,EACAD,EAAc,UAAU,YAAc,SAAU7tH,EAAW,CACrD,IAAA8tH,EAAiBC,GAAkB/tH,CAAS,EAE1ClhC,EAAA,KAAK,OAAQkhC,EAAW,EAAI,EAC5BlhC,EAAA,KAAK,cAAegvJ,EAAgB,EAAI,EAC9C,KAAK,QAAQA,CAAc,CAC7B,EACAD,EAAc,UAAU,QAAU,SAAUC,EAAgB,CAC1D,IAAIzkB,EAAa,KAAK,OACtB,KAAK,oBAAoBykB,CAAc,EACvC,KAAK,gBAAgBA,CAAc,EACnC,IAAIE,EAAgB,KAAK,cACzBvtJ,EAAK,CAAC,CAAC,QAAS,YAAY,EAAG,CAAC,MAAO,UAAU,CAAC,EAAG,SAAUimE,EAAO1vC,EAAO,CAIvE,KAAK,eAAeA,CAAK,IAAM,UACtBqyG,EAAA3iE,EAAM,CAAC,CAAC,EAAIsnF,EAActnF,EAAM,CAAC,CAAC,EAAI,OAGlD,IAAI,EACP,KAAK,aAAa,CACpB,EACAmnF,EAAc,UAAU,aAAe,UAAY,CACjD,IAAII,EAAe,KAAK,IAAI,SAAU,EAAI,EACtCC,EAAqB,KAAK,mBAAqB9qJ,EAAc,EAC7D+qJ,EAAmB,KAAK,yBAAyBD,CAAkB,EACnEC,EACG,KAAA,QAAUF,GAAgB,KAAK,4BAA4B,GAEhE,KAAK,QAAUA,GAAgB,aAC1B,KAAA,4BAA4BC,EAAoB,KAAK,OAAO,GAEnE,KAAK,UAAY,GACEA,EAAA,KAAK,SAAUtY,EAAU,CACtCA,EAAS,UAAU,SACrB,KAAK,UAAY,KAElB,IAAI,CACT,EACAiY,EAAc,UAAU,yBAA2B,SAAUK,EAAoB,CAC/E,IAAIC,EAAmB,GAClB1tJ,OAAAA,EAAA6rJ,GAA2B,SAAUtsC,EAAS,CACjD,IAAIouC,EAAW,KAAK,uBAAuB1B,GAAgB1sC,CAAO,EAAGt+E,EAAkB,EAInF,GAAC0sH,EAAS,UAGK,CAAAD,EAAA,GACf,IAAAvY,EAAW,IAAI+X,GACdltJ,EAAA2tJ,EAAS,OAAQ,SAAUruC,EAAW,CAChC61B,EAAA,IAAI71B,EAAU,cAAc,CAAA,CACtC,EACkBmuC,EAAA,IAAIluC,EAAS41B,CAAQ,IACvC,IAAI,EACAuY,CACT,EACAN,EAAc,UAAU,4BAA8B,SAAUK,EAAoBvpF,EAAQ,CAC1F,IAAIhkC,EAAU,KAAK,QACf0tH,EAAW,GAEf,GAAIA,EAAU,CACR,IAAAruC,EAAUr7C,IAAW,WAAa,IAAM,IACxC2pF,EAAa3tH,EAAQ,eAAe,CACtC,SAAUq/E,EAAU,MAAA,CACrB,EACDuuC,EAAgBD,EAAYtuC,CAAO,CAAA,CAGrC,GAAIquC,EAAU,CACR,IAAAC,EAAa3tH,EAAQ,eAAe,CACtC,SAAU,aACV,OAAQ,SAAUo/E,EAAW,CAC3B,OAAOA,EAAU,IAAI,SAAU,EAAI,IAAMp7C,CAAA,CAC3C,CACD,EACD4pF,EAAgBD,EAAY,QAAQ,CAAA,CAE7B,SAAAC,EAAgBD,EAAYtuC,EAAS,CAExC,IAAAD,EAAYuuC,EAAW,CAAC,EAC5B,GAAKvuC,EAGD,KAAA61B,EAAW,IAAI+X,GAKf3tC,GAJK41B,EAAA,IAAI71B,EAAU,cAAc,EAClBmuC,EAAA,IAAIluC,EAAS41B,CAAQ,EAC7ByY,EAAA,GAEPruC,IAAY,KAAOA,IAAY,IAAK,CACtC,IAAIwuC,EAAczuC,EAAU,uBAAuB,OAAQt+E,EAAgB,EAAE,OAAO,CAAC,EACtE+sH,GAAA/tJ,EAAK6tJ,EAAY,SAAUG,EAAS,CAC7C1uC,EAAU,iBAAmB0uC,EAAQ,gBAAkBD,IAAgBC,EAAQ,uBAAuB,OAAQhtH,EAAgB,EAAE,OAAO,CAAC,GACjIm0G,EAAA,IAAI6Y,EAAQ,cAAc,CACrC,CACD,CAAA,EACH,CAEEJ,GAEG5tJ,EAAA6rJ,GAA2B,SAAUtsC,EAAS,CACjD,GAAKquC,EAGDC,KAAAA,EAAa3tH,EAAQ,eAAe,CACtC,SAAU+rH,GAAgB1sC,CAAO,EACjC,OAAQ,SAAUD,EAAW,CAC3B,OAAOA,EAAU,IAAI,OAAQ,EAAI,IAAM,UAAA,CACzC,CACD,EACGuuC,GAAAA,EAAW,CAAC,EAAG,CACb,IAAA1Y,EAAW,IAAI+X,GACnB/X,EAAS,IAAI0Y,EAAW,CAAC,EAAE,cAAc,EACtBJ,EAAA,IAAIluC,EAAS41B,CAAQ,EAC7ByY,EAAA,EAAA,IAEZ,IAAI,CAEX,EACAR,EAAc,UAAU,4BAA8B,UAAY,CAC5D,IAAAx3G,EAEC,YAAA,eAAe,SAAU2pE,EAAS,CACrC,CAAC3pE,IAAQA,EAAM2pE,IACd,IAAI,EACA3pE,IAAQ,IAAM,WAAa,YACpC,EACAw3G,EAAc,UAAU,oBAAsB,SAAUC,EAAgB,CAKtE,GAHIA,EAAe,eAAe,UAAU,IAC1C,KAAK,cAAgB,IAEnB,KAAK,cAAe,CAClB,IAAAY,EAAe,KAAK,QAAQ,OAChC,KAAK,OAAO,SAAWA,EAAa,WAAaA,EAAa,wBAA0B,EAAI,IAAM,EAAA,CAEtG,EACAb,EAAc,UAAU,gBAAkB,SAAUC,EAAgB,CAClE,IAAIa,EAAgB,KAAK,eACrBC,EAAoB,KAAK,IAAI,WAAW,EAC5CnuJ,EAAK,CAAC,CAAC,QAAS,YAAY,EAAG,CAAC,MAAO,UAAU,CAAC,EAAG,SAAUimE,EAAO1vC,EAAO,CAC3E,IAAI63H,EAAmBf,EAAepnF,EAAM,CAAC,CAAC,GAAK,KAC/CooF,EAAiBhB,EAAepnF,EAAM,CAAC,CAAC,GAAK,KAC7CmoF,GAAoB,CAACC,EACvBH,EAAc33H,CAAK,EAAI,UACd,CAAC63H,GAAoBC,EAC9BH,EAAc33H,CAAK,EAAI,QACd43H,EACKD,EAAA33H,CAAK,EAAI43H,EAAkB53H,CAAK,EACrC63H,IAETF,EAAc33H,CAAK,EAAI,UACzB,CAED,CACH,EACA62H,EAAc,UAAU,SAAW,UAAY,CAC7C,OAAO,KAAK,SACd,EACAA,EAAc,UAAU,wBAA0B,UAAY,CACxD,IAAAkB,EACC,YAAA,eAAe,SAAU/uC,EAASF,EAAW,CAC5CivC,GAAkB,OACpBA,EAAiB,KAAK,QAAQ,aAAarC,GAAgB1sC,CAAO,EAAGF,CAAS,IAE/E,IAAI,EACAivC,CACT,EAIAlB,EAAc,UAAU,eAAiB,SAAUhrJ,EAAUjC,EAAS,CACpE,KAAK,mBAAmB,KAAK,SAAUg1I,EAAU51B,EAAS,CACnDv/G,EAAAm1I,EAAS,UAAW,SAAU91B,EAAW,CACnCj9G,EAAA,KAAKjC,EAASo/G,EAASF,CAAS,CAAA,CAC1C,CAAA,CACF,CACH,EAIA+tC,EAAc,UAAU,aAAe,SAAU7tC,EAASF,EAAW,CACnE,IAAIC,EAAY,KAAK,aAAaC,EAASF,CAAS,EACpD,GAAIC,EACF,OAAOA,EAAU,aAErB,EAIA8tC,EAAc,UAAU,aAAe,SAAU7tC,EAASF,EAAW,CAInE,IAAI81B,EAAW,KAAK,mBAAmB,IAAI51B,CAAO,EAClD,GAAI41B,GAAYA,EAAS,SAAS91B,CAAS,EACzC,OAAO,KAAK,QAAQ,aAAa4sC,GAAgB1sC,CAAO,EAAGF,CAAS,CAExE,EAIA+tC,EAAc,UAAU,YAAc,SAAUzhJ,EAAK,CACnD,IAAIi9H,EAAa,KAAK,OAClB2kB,EAAgB,KAAK,cACpBvtJ,EAAA,CAAC,CAAC,QAAS,YAAY,EAAG,CAAC,MAAO,UAAU,CAAC,EAAG,SAAUimE,EAAO,EAUhEt6D,EAAIs6D,EAAM,CAAC,CAAC,GAAK,MAAQt6D,EAAIs6D,EAAM,CAAC,CAAC,GAAK,QAC5C2iE,EAAW3iE,EAAM,CAAC,CAAC,EAAIsnF,EAActnF,EAAM,CAAC,CAAC,EAAIt6D,EAAIs6D,EAAM,CAAC,CAAC,EAC7D2iE,EAAW3iE,EAAM,CAAC,CAAC,EAAIsnF,EAActnF,EAAM,CAAC,CAAC,EAAIt6D,EAAIs6D,EAAM,CAAC,CAAC,IAE9D,IAAI,EACP,KAAK,gBAAgBt6D,CAAG,CAC1B,EACAyhJ,EAAc,UAAU,mBAAqB,SAAUzhJ,EAAK,CAC1D,IAAIyuD,EAAS,KAAK,OAClBp6D,EAAK,CAAC,QAAS,aAAc,MAAO,UAAU,EAAG,SAAU0L,EAAM,CACxD0uD,EAAA1uD,CAAI,EAAIC,EAAID,CAAI,CAAA,CACxB,CACH,EACA0hJ,EAAc,UAAU,gBAAkB,UAAY,CAChD,IAAAmB,EAAY,KAAK,4BAA4B,EACjD,GAAIA,EACF,OAAOA,EAAU,qBAAqB,CAE1C,EAMAnB,EAAc,UAAU,cAAgB,SAAU7tC,EAASF,EAAW,CAChE,GAAAE,GAAW,MAAQF,GAAa,KAAM,CACpC,IAAAkvC,EAAY,KAAK,4BAA4B,EACjD,GAAIA,EACF,OAAOA,EAAU,mBAAmB,CACtC,KAEA,QAAO,KAAK,aAAahvC,EAASF,CAAS,EAAE,mBAAmB,CAEpE,EAKA+tC,EAAc,UAAU,4BAA8B,SAAU9tC,EAAW,CACzE,GAAIA,EACF,OAAOA,EAAU,cAKnB,QAFIkvC,EACAC,EAAc,KAAK,mBAAmB,KAAK,EACtClzJ,EAAI,EAAGA,EAAIkzJ,EAAY,OAAQlzJ,IAGtC,QAFIgkH,EAAUkvC,EAAYlzJ,CAAC,EACvB45I,EAAW,KAAK,mBAAmB,IAAI51B,CAAO,EACzC93G,EAAI,EAAGA,EAAI0tI,EAAS,UAAU,OAAQ1tI,IAAK,CAClD,IAAI6K,EAAQ,KAAK,aAAaitG,EAAS41B,EAAS,UAAU1tI,CAAC,CAAC,EACxD,GAAA6K,EAAM,SAAS,IAAI,EACd,OAAAA,EAEJk8I,IACUA,EAAAl8I,EACf,CAMG,OAAAk8I,CACT,EACApB,EAAc,UAAU,iBAAmB,UAAY,CAC9C,OAAA,KAAK,eAAe,MAAM,CACnC,EACAA,EAAc,UAAU,UAAY,UAAY,CAK9C,OAAO,KAAK,OACd,EACAA,EAAc,KAAO,WACrBA,EAAc,aAAe,CAAC,QAAS,QAAS,aAAc,YAAa,aAAc,SAAU,SAAS,EAC5GA,EAAc,cAAgB,CAE5B,EAAG,EACH,WAAY,SACZ,MAAO,EACP,IAAK,GACP,EACOA,CAAA,EACPvmF,EAAc,EAMhB,SAASymF,GAAkBlzF,EAAQ,CACjC,IAAI33C,EAAM,CAAC,EACNziB,OAAAA,EAAA,CAAC,QAAS,MAAO,aAAc,WAAY,UAAU,EAAG,SAAU0L,EAAM,CAC3E0uD,EAAO,eAAe1uD,CAAI,IAAM+W,EAAI/W,CAAI,EAAI0uD,EAAO1uD,CAAI,EAAA,CACxD,EACM+W,CACT,CC9XA,IAAIisI,GAAmC,SAAU78I,EAAQ,CACvDC,EAAU48I,EAAqB78I,CAAM,EACrC,SAAS68I,GAAsB,CAC7B,IAAI38I,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO28I,EAAoB,KAC1B38I,CACX,CACE,OAAA28I,EAAoB,KAAO,kBACpBA,CACT,EAAEtB,EAAa,ECTXuB,GAA4B,SAAU98I,EAAQ,CAChDC,EAAU68I,EAAc98I,CAAM,EAC9B,SAAS88I,GAAe,CACtB,IAAI58I,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO48I,EAAa,KACnB58I,CACX,CACE,OAAA48I,EAAa,UAAU,OAAS,SAAUrC,EAAepsH,EAASmf,EAAKxf,EAAS,CAC9E,KAAK,cAAgBysH,EACrB,KAAK,QAAUpsH,EACf,KAAK,IAAMmf,CACZ,EACDsvG,EAAa,KAAO,WACbA,CACT,EAAEl8D,EAAa,ECdXm8D,GAAkC,SAAU/8I,EAAQ,CACtDC,EAAU88I,EAAoB/8I,CAAM,EACpC,SAAS+8I,GAAqB,CAC5B,IAAI78I,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO68I,EAAmB,KACzB78I,CACX,CACE,OAAA68I,EAAmB,KAAO,kBACnBA,CACT,EAAED,EAAY,ECJV3uJ,GAAO8qB,EACP2O,GAAMo1H,GAQNC,GAAyB,UAAY,CACvC,SAASA,EAAU/jF,EAASs0C,EAAWitC,EAAepsH,EAAS,CAC7D,KAAK,SAAW6qC,EAChB,KAAK,WAAas0C,EAClB,KAAK,QAAUn/E,EACf,KAAK,eAAiBosH,CAM1B,CAIE,OAAAwC,EAAU,UAAU,SAAW,SAAUxC,EAAe,CACtD,OAAO,KAAK,iBAAmBA,CAChC,EAIDwC,EAAU,UAAU,mBAAqB,UAAY,CACnD,OAAO,KAAK,aAAa,MAAO,CACjC,EAIDA,EAAU,UAAU,qBAAuB,UAAY,CACrD,OAAO,KAAK,eAAe,MAAO,CACnC,EACDA,EAAU,UAAU,sBAAwB,UAAY,CACtD,IAAIp8D,EAAe,CAAE,EACrB,YAAK,QAAQ,WAAW,SAAUryC,EAAa,CAC7C,GAAI0rG,GAAiB1rG,CAAW,EAAG,CACjC,IAAI0uG,EAAe9C,GAAgB,KAAK,QAAQ,EAC5C3sC,EAAYj/D,EAAY,uBAAuB0uG,EAAc/tH,EAAgB,EAAE,OAAO,CAAC,EACvFs+E,GAAa,KAAK,aAAeA,EAAU,gBAC7C5sB,EAAa,KAAKryC,CAAW,CAEvC,CACK,EAAE,IAAI,EACAqyC,CACR,EACDo8D,EAAU,UAAU,aAAe,UAAY,CAC7C,OAAO,KAAK,QAAQ,aAAa,KAAK,SAAW,OAAQ,KAAK,UAAU,CACzE,EACDA,EAAU,UAAU,cAAgB,UAAY,CAC9C,OAAO/yC,EAAa,KAAK,WAAW,CACrC,EAID+yC,EAAU,UAAU,oBAAsB,SAAUnjJ,EAAK,CACvD,IAAIuuB,EAAa,KAAK,YAClBolF,EAAY,KAAK,aAAc,EAC/Bh7G,EAAQg7G,EAAU,KAAK,MACvB4uC,EAAgB,KAAK,eAAe,iBAAkB,EACtDc,EAAgB,CAAC,EAAG,GAAG,EACvBC,EAAgB,CAAE,EAClBC,EAAc,CAAE,EAChBC,EACJnvJ,GAAK,CAAC,QAAS,KAAK,EAAG,SAAUN,EAAM+Z,EAAK,CAC1C,IAAI21I,EAAezjJ,EAAIjM,CAAI,EACvB2vJ,EAAa1jJ,EAAIjM,EAAO,OAAO,EAc/BwuJ,EAAcz0I,CAAG,IAAM,WACzB21I,GAAgB,OAASA,EAAeJ,EAAcv1I,CAAG,GAEzD41I,EAAa/qJ,EAAM,MAAMgrJ,GAAqBF,EAAcJ,EAAe90H,CAAU,CAAC,IAEtFi1H,EAAmB,GACnBE,EAAaA,GAAc,KAAOn1H,EAAWzgB,CAAG,EAAInV,EAAM,MAAM+qJ,CAAU,EAI1ED,EAAeE,GAAqBD,EAAYn1H,EAAY80H,CAAa,GAK3EE,EAAYz1I,CAAG,EAAI41I,GAAc,MAAQ,MAAMA,CAAU,EAAIn1H,EAAWzgB,CAAG,EAAI41I,EAC/EJ,EAAcx1I,CAAG,EAAI21I,GAAgB,MAAQ,MAAMA,CAAY,EAAIJ,EAAcv1I,CAAG,EAAI21I,CAC9F,CAAK,EACD31H,GAAIy1H,CAAW,EACfz1H,GAAIw1H,CAAa,EAMjB,IAAIM,EAAQ,KAAK,YACjBJ,EAAmBK,EAAYN,EAAaD,EAAe/0H,EAAY80H,EAAe,EAAK,EAAIQ,EAAYP,EAAeC,EAAaF,EAAe90H,EAAY,EAAI,EACtK,SAASs1H,EAAYC,EAAYC,EAAUC,EAAYC,EAAUC,EAAS,CACxE,IAAIC,EAASD,EAAU,OAAS,YAChC3U,GAAW,EAAGuU,EAAYE,EAAY,MAAOJ,EAAM,MAAQO,CAAM,EAAGP,EAAM,MAAQO,CAAM,CAAC,EACzF,QAASv0J,EAAI,EAAGA,EAAI,EAAGA,IACrBm0J,EAASn0J,CAAC,EAAI+zJ,GAAqBG,EAAWl0J,CAAC,EAAGo0J,EAAYC,EAAU,EAAI,EAC5EC,IAAYH,EAASn0J,CAAC,EAAI+I,EAAM,MAAMorJ,EAASn0J,CAAC,CAAC,EAEzD,CACI,MAAO,CACL,YAAa2zJ,EACb,cAAeD,CAChB,CACF,EAMDH,EAAU,UAAU,MAAQ,SAAUxC,EAAe,CACnD,GAAIA,IAAkB,KAAK,eAG3B,KAAIyD,EAAe,KAAK,sBAAuB,EAE/C,KAAK,YAAcC,GAAoB,KAAM,KAAK,SAAUD,CAAY,EAExE,KAAK,kBAAmB,EACxB,IAAIE,EAAa,KAAK,oBAAoB3D,EAAc,aAAa,EACrE,KAAK,aAAe2D,EAAW,YAC/B,KAAK,eAAiBA,EAAW,cAEjC,KAAK,cAAe,EACrB,EACDnB,EAAU,UAAU,WAAa,SAAUxC,EAAejtG,EAAK,CAC7D,GAAIitG,IAAkB,KAAK,eACzB,OAEF,IAAI/sC,EAAU,KAAK,SACf7sB,EAAe,KAAK,sBAAuB,EAC3Cw9D,EAAa5D,EAAc,IAAI,YAAY,EAC3C4C,EAAc,KAAK,aACvB,GAAIgB,IAAe,OACjB,OAqBFlwJ,GAAK0yF,EAAc,SAAUryC,EAAa,CACxC,IAAI8vG,EAAa9vG,EAAY,QAAS,EAClC2xC,EAAWm+D,EAAW,iBAAiB5wC,CAAO,EAClD,GAAKvtB,EAAS,OAGd,IAAIk+D,IAAe,aAAc,CAC/B,IAAIE,EAAUD,EAAW,SAAU,EAC/BE,EAAmB1mI,EAAWqoE,EAAU,SAAUp8C,EAAK,CACzD,OAAOu6G,EAAW,kBAAkBv6G,CAAG,CACxC,EAAEu6G,CAAU,EACbA,EAAW,WAAW,SAAUrvG,EAAW,CAIzC,QAHIwvG,EACAC,EACA9pF,EACKlrE,EAAI,EAAGA,EAAIy2F,EAAS,OAAQz2F,IAAK,CACxC,IAAI6D,EAAQgxJ,EAAQ,IAAIC,EAAiB90J,CAAC,EAAGulD,CAAS,EAClD0vG,EAAe,CAAC,MAAMpxJ,CAAK,EAC3BqxJ,EAAcrxJ,EAAQ8vJ,EAAY,CAAC,EACnCwB,EAAetxJ,EAAQ8vJ,EAAY,CAAC,EACxC,GAAIsB,GAAgB,CAACC,GAAe,CAACC,EACnC,MAAO,GAETF,IAAiB/pF,EAAW,IAC5BgqF,IAAgBH,EAAU,IAC1BI,IAAiBH,EAAW,GACxC,CAEU,OAAO9pF,GAAY6pF,GAAWC,CACxC,CAAS,CACT,MACQvwJ,GAAKgyF,EAAU,SAAUp8C,EAAK,CAC5B,GAAIs6G,IAAe,QACjB7vG,EAAY,QAAQ8vG,EAAaA,EAAW,IAAIv6G,EAAK,SAAUx2C,EAAO,CACpE,OAAQuxJ,EAAWvxJ,CAAK,EAAUA,EAAN,GAC1C,CAAa,CAAC,MACG,CACL,IAAI05B,EAAQ,CAAE,EACdA,EAAM8c,CAAG,EAAIs5G,EAEbiB,EAAW,YAAYr3H,CAAK,CAExC,CACA,CAAS,EAEH94B,GAAKgyF,EAAU,SAAUp8C,EAAK,CAC5Bu6G,EAAW,qBAAqBjB,EAAat5G,CAAG,CACxD,CAAO,EACP,CAAK,EACD,SAAS+6G,EAAWvxJ,EAAO,CACzB,OAAOA,GAAS8vJ,EAAY,CAAC,GAAK9vJ,GAAS8vJ,EAAY,CAAC,CAC9D,CACG,EACDJ,EAAU,UAAU,kBAAoB,UAAY,CAClD,IAAI8B,EAAa,KAAK,YAAc,CAAE,EAClCtE,EAAgB,KAAK,eACrBpyH,EAAa,KAAK,YACtBl6B,GAAK,CAAC,MAAO,KAAK,EAAG,SAAUivH,EAAQ,CACrC,IAAI4hC,EAAcvE,EAAc,IAAIr9B,EAAS,MAAM,EAC/C6hC,EAAYxE,EAAc,IAAIr9B,EAAS,WAAW,EACtD6hC,GAAa,OAASA,EAAY,KAAK,eAAe,KAAK,MAAM,MAAMA,CAAS,GAE5EA,GAAa,KACfD,EAAcvB,GAAqBp1H,EAAW,CAAC,EAAI42H,EAAW52H,EAAY,CAAC,EAAG,GAAG,EAAG,EAAI,EAC/E22H,GAAe,OACxBC,EAAYxB,GAAqBuB,EAAa,CAAC,EAAG,GAAG,EAAG32H,EAAY,EAAI,EAAIA,EAAW,CAAC,GAE1F02H,EAAW3hC,EAAS,MAAM,EAAI4hC,EAC9BD,EAAW3hC,EAAS,WAAW,EAAI6hC,CACpC,EAAE,IAAI,CACR,EACDhC,EAAU,UAAU,cAAgB,UAAY,CAC9C,IAAIxvC,EAAY,KAAK,aAAc,EAC/B2vC,EAAgB,KAAK,eACrBC,EAAc,KAAK,aACvB,GAAKD,EAIL,KAAI11H,EAAYw3H,GAA6B7B,EAAa,CAAC,EAAG,GAAG,CAAC,EAClE31H,EAAY,KAAK,IAAIA,EAAW,EAAE,EAKlC,IAAIy1F,EAAgB1P,EAAU,KAAK,MAAM,cACrC2vC,EAAc,CAAC,IAAM,GACvBjgC,EAAc,oBAAoB,MAAO,CAACkgC,EAAY,CAAC,EAAE,QAAQ31H,CAAS,CAAC,EAEzE01H,EAAc,CAAC,IAAM,KACvBjgC,EAAc,oBAAoB,MAAO,CAACkgC,EAAY,CAAC,EAAE,QAAQ31H,CAAS,CAAC,EAE7Ey1F,EAAc,OAAQ,EACvB,EACM8/B,CACT,EAAG,EACH,SAASkB,GAAoBzB,EAAWhvC,EAAS7sB,EAAc,CAC7D,IAAIx4D,EAAa,CAAC,IAAU,IAAS,EACrCl6B,GAAK0yF,EAAc,SAAUryC,EAAa,CACxCuxE,GAAwB13F,EAAYmmB,EAAY,QAAO,EAAIk/D,CAAO,CACtE,CAAG,EAUD,IAAID,EAAYivC,EAAU,aAAc,EACpCn/B,EAAkBL,GAAyBzP,EAAU,KAAK,MAAOA,EAAWplF,CAAU,EAAE,UAAW,EACvG,MAAO,CAACk1F,EAAgB,IAAKA,EAAgB,GAAG,CAClD,CCrSA,IAAI4hC,GAAoB,CAItB,gBAAiB,SAAU9wH,EAAS,CAClC,SAAS+wH,EAAc/wJ,EAAI,CACzBggC,EAAQ,cAAc,WAAY,SAAUosH,EAAe,CACzDA,EAAc,eAAe,SAAU/sC,EAASF,EAAW,CACzD,IAAIC,EAAYp/E,EAAQ,aAAa+rH,GAAgB1sC,CAAO,EAAGF,CAAS,EACxEn/G,EAAGq/G,EAASF,EAAWC,EAAWgtC,CAAa,CACzD,CAAS,CACT,CAAO,CACP,CAGI2E,EAAc,SAAU1xC,EAASF,EAAWC,EAAWgtC,EAAe,CAEpEhtC,EAAU,cAAgB,IAChC,CAAK,EACD,IAAI4xC,EAAY,CAAE,EAClBD,EAAc,SAAU1xC,EAASF,EAAWC,EAAWgtC,EAAe,CAG/DhtC,EAAU,gBAEbA,EAAU,cAAgB,IAAIwvC,GAAUvvC,EAASF,EAAWitC,EAAepsH,CAAO,EAClFgxH,EAAU,KAAK5xC,EAAU,aAAa,EAE9C,CAAK,EACD,IAAI6xC,EAAiBxuJ,EAAe,EACpC3C,OAAAA,EAAKkxJ,EAAW,SAAU3C,EAAW,CACnCvuJ,EAAKuuJ,EAAU,sBAAuB,EAAE,SAAUluG,EAAa,CAC7D8wG,EAAe,IAAI9wG,EAAY,IAAKA,CAAW,CACvD,CAAO,CACP,CAAK,EACM8wG,CACR,EAID,aAAc,SAAUjxH,EAASmf,EAAK,CACpCnf,EAAQ,cAAc,WAAY,SAAUosH,EAAe,CAIzDA,EAAc,eAAe,SAAU/sC,EAASF,EAAW,CACzDitC,EAAc,aAAa/sC,EAASF,CAAS,EAAE,MAAMitC,CAAa,CAC1E,CAAO,EAeDA,EAAc,eAAe,SAAU/sC,EAASF,EAAW,CACzDitC,EAAc,aAAa/sC,EAASF,CAAS,EAAE,WAAWitC,EAAejtG,CAAG,CACpF,CAAO,CACP,CAAK,EACDnf,EAAQ,cAAc,WAAY,SAAUosH,EAAe,CAGzD,IAAIiC,EAAYjC,EAAc,4BAA6B,EAC3D,GAAIiC,EAAW,CACb,IAAI6C,EAAe7C,EAAU,qBAAsB,EAC/C8C,EAAa9C,EAAU,mBAAoB,EAC/CjC,EAAc,mBAAmB,CAC/B,MAAO8E,EAAa,CAAC,EACrB,IAAKA,EAAa,CAAC,EACnB,WAAYC,EAAW,CAAC,EACxB,SAAUA,EAAW,CAAC,CAChC,CAAS,CACT,CACA,CAAK,CACL,CACA,ECnFe,SAASC,GAAsBzpB,EAAW,CACvDA,EAAU,eAAe,WAAY,SAAUhoG,EAASK,EAAS,CAC/D,IAAIksH,EAAiBF,GAAsBhsH,EAASL,CAAO,EAC3D7/B,EAAKosJ,EAAgB,SAAUE,EAAe,CAC5CA,EAAc,YAAY,CACxB,MAAOzsH,EAAQ,MACf,IAAKA,EAAQ,IACb,WAAYA,EAAQ,WACpB,SAAUA,EAAQ,QAC1B,CAAO,CACP,CAAK,CACL,CAAG,CACH,CCZA,IAAI0xH,GAAY,GACD,SAASC,GAAc3pB,EAAW,CAC3C0pB,KAGJA,GAAY,GACZ1pB,EAAU,kBAAkBA,EAAU,SAAS,UAAU,OAAQmpB,EAAiB,EAClFM,GAAsBzpB,CAAS,EAC/BA,EAAU,yBAAyB,WAAY,UAAY,CAEzD,MAAO,QACX,CAAG,EACH,CCXO,SAASD,GAAQC,EAAW,CACjCA,EAAU,uBAAuB4pB,EAAe,EAChD5pB,EAAU,sBAAsB6pB,EAAc,EAC9CF,GAAc3pB,CAAS,CACzB,CCzBA,IAAI8pB,GAA8B,UAAY,CAC5C,SAASA,GAAiB,CAAA,CAC1B,OAAOA,CACT,EAAG,EAECC,GAAW,CAAE,EACV,SAASC,GAAgBnmJ,EAAM47D,EAAM,CAC1CsqF,GAASlmJ,CAAI,EAAI47D,CACnB,CACO,SAASwqF,GAAWpmJ,EAAM,CAC/B,OAAOkmJ,GAASlmJ,CAAI,CACtB,CCWA,IAAIqmJ,GAA4B,SAAUlgJ,EAAQ,CAChDC,EAAUigJ,EAAclgJ,CAAM,EAC9B,SAASkgJ,GAAe,CACtB,IAAIhgJ,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOggJ,EAAa,KACnBhgJ,CACX,CACE,OAAAggJ,EAAa,UAAU,cAAgB,UAAY,CACjDlgJ,EAAO,UAAU,cAAc,MAAM,KAAM,SAAS,EACpD,IAAIquB,EAAU,KAAK,QACnBpV,EAAY,KAAK,OAAO,QAAS,SAAU+rD,EAAYm7E,EAAa,CAClE,IAAIC,EAAUC,GAA0BF,CAAW,EAC/CC,IACEA,EAAQ,mBACVA,EAAQ,cAAgBA,EAAQ,iBAAiB/xH,CAAO,GAE1Dw8B,EAAama,EAAYo7E,EAAQ,aAAa,EAEtD,CAAK,CACF,EACDF,EAAa,KAAO,UACpBA,EAAa,WAAa,CACxB,KAAM,MACN,WAAY,EACb,EACDA,EAAa,cAAgB,CAC3B,KAAM,GACN,EAAG,EAEH,OAAQ,aACR,KAAM,QACN,IAAK,MAGL,gBAAiB,cACjB,YAAa,OACb,aAAc,EACd,YAAa,EACb,QAAS,EACT,SAAU,GACV,QAAS,EACT,UAAW,GACX,UAAW,CACT,YAAa,OACb,MAAO,MACR,EACD,SAAU,CACR,UAAW,CACT,YAAa,SACrB,CACK,EAGD,QAAS,CACP,KAAM,GACN,SAAU,QAChB,CACG,EACMA,CACT,EAAElrF,EAAc,ECpDT,SAAS9V,GAAOoT,EAAOnlC,EAAgBqgB,EAAK,CACjD,IAAI4tF,EAAkBjuG,EAAe,mBAAoB,EACrDkI,EAAUlI,EAAe,IAAI,SAAS,EACtCmzH,EAAe,CACjB,MAAO9yG,EAAI,SAAU,EACrB,OAAQA,EAAI,UAAS,CACtB,EACGt1C,EAAOg7D,GAAckoE,EAAiBklB,EAAcjrH,CAAO,EAC/DkrH,GAAUpzH,EAAe,IAAI,QAAQ,EAAGmlC,EAAOnlC,EAAe,IAAI,SAAS,EAAGj1B,EAAK,MAAOA,EAAK,MAAM,EACrGy7D,GAAgBrB,EAAO8oE,EAAiBklB,EAAcjrH,CAAO,CAC/D,CACO,SAASmrH,GAAetoJ,EAAMi1B,EAAgB,CACnD,IAAIkI,EAAUg+B,GAA6BlmC,EAAe,IAAI,SAAS,CAAC,EACpEnkC,EAAQmkC,EAAe,aAAa,CAAC,QAAS,SAAS,CAAC,EAC5D,OAAAnkC,EAAM,KAAOmkC,EAAe,IAAI,iBAAiB,EACjDj1B,EAAO,IAAIitF,GAAa,CACtB,MAAO,CACL,EAAGjtF,EAAK,EAAIm9B,EAAQ,CAAC,EACrB,EAAGn9B,EAAK,EAAIm9B,EAAQ,CAAC,EACrB,MAAOn9B,EAAK,MAAQm9B,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EAC1C,OAAQn9B,EAAK,OAASm9B,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EAC5C,EAAGlI,EAAe,IAAI,cAAc,CACrC,EACD,MAAOnkC,EACP,OAAQ,GACR,GAAI,EACR,CAAG,EAKMkP,CACT,CC9BA,IAAIuoJ,GAA2B,SAAUzgJ,EAAQ,CAC/CC,EAAUwgJ,EAAazgJ,CAAM,EAC7B,SAASygJ,GAAc,CACrB,OAAOzgJ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAAygJ,EAAY,UAAU,OAAS,SAAUC,EAAcryH,EAASmf,EAAKxf,EAAS,CAC5E,IAAIskC,EAAQ,KAAK,MAEjB,GADAA,EAAM,UAAW,EACb,CAACouF,EAAa,IAAI,MAAM,EAC1B,OAEF,IAAIC,EAAW,CAACD,EAAa,IAAI,UAAU,EACvCE,EAAaF,EAAa,IAAI,QAAQ,IAAM,WAC5CG,EAAcH,EAAa,IAAI,SAAS,GAAK,CAAE,EAC/CX,EAAW,KAAK,YAAc,KAAK,UAAY,CAAA,GAC/Ce,EAAe,CAAE,EACrB7nI,EAAY4nI,EAAa,SAAU/mJ,EAAKD,EAAM,CAC5CinJ,EAAa,KAAKjnJ,CAAI,CAC5B,CAAK,EACD,IAAIspG,GAAW,KAAK,eAAiB,CAAE,EAAE29C,CAAY,EAAE,IAAIC,CAAc,EAAE,OAAOA,CAAc,EAAE,OAAO9tF,GAAa8tF,EAAgB,IAAI,CAAC,EAAE,QAAS,EAEtJ,KAAK,cAAgBD,EACrB,SAASC,EAAelV,EAAUC,EAAU,CAC1C,IAAIqU,EAAcW,EAAajV,CAAQ,EACnCpmE,EAAUq7E,EAAahV,CAAQ,EAC/B9mE,EAAa67E,EAAYV,CAAW,EACpCa,EAAe,IAAI14F,GAAM0c,EAAY07E,EAAcA,EAAa,OAAO,EACvEO,EAKJ,GAHIjzH,GAAWA,EAAQ,UAAY,MAAQA,EAAQ,cAAgBmyH,IACjEn7E,EAAW,MAAQh3C,EAAQ,UAEzBmyH,GAAe,CAAC16E,EAAS,CAE3B,GAAIy7E,GAAkBf,CAAW,EAC/Bc,EAAU,CACR,QAASD,EAAa,OAAO,QAC7B,YAAab,CACd,MACI,CACL,IAAIC,EAAUH,GAAWE,CAAW,EACpC,GAAI,CAACC,EACH,OAEFa,EAAU,IAAIb,CACxB,CACQL,EAASI,CAAW,EAAIc,CAChC,SACQA,EAAUlB,EAASt6E,CAAO,EAEtB,CAACw7E,EACH,OAGJA,EAAQ,IAAMp4F,GAAO,iBAAiB,EACtCo4F,EAAQ,MAAQD,EAChBC,EAAQ,QAAU5yH,EAClB4yH,EAAQ,IAAMzzG,EACd,IAAI2zG,EAAmBF,aAAmBnB,GAC1C,GAAI,CAACK,GAAe16E,EAAS,CAC3B07E,GAAoBF,EAAQ,SAAWA,EAAQ,QAAQ5yH,EAASmf,CAAG,EACnE,MACR,CACM,GAAI,CAACwzG,EAAa,IAAI,MAAM,GAAKG,GAAoBF,EAAQ,SAAU,CACrEE,GAAoBF,EAAQ,QAAUA,EAAQ,OAAO5yH,EAASmf,CAAG,EACjE,MACR,CACM4zG,EAAgBJ,EAAcC,EAASd,CAAW,EAClDa,EAAa,cAAgB,SAAUK,EAAUn2E,EAAQ,CACvD,IAAI3iB,EAAS,KAAK,OACd+4F,EAAY,KAAK,UACrB/4F,EAAO,WAAaA,EAAO,YAAc,CAAE,EAC3CA,EAAO,WAAW84F,CAAQ,EAAIn2E,EAC1Bo2E,EAAUD,CAAQ,IACnBn2E,IAAW,WAAal+B,GAAgBE,IAAeo0G,EAAUD,CAAQ,CAAC,CAE9E,EACGJ,aAAmBnB,IACjBmB,EAAQ,QACVA,EAAQ,OAAOD,EAAc3yH,EAASmf,EAAKxf,CAAO,CAG5D,CACI,SAASozH,EAAgBJ,EAAcC,EAASd,EAAa,CAC3D,IAAIoB,EAAiBP,EAAa,SAAS,WAAW,EAClDQ,EAAyBR,EAAa,SAAS,CAAC,WAAY,WAAW,CAAC,EAYxES,EAAQR,aAAmBnB,IAAkBmB,EAAQ,SAAWA,EAAQ,SAAU,EAAGD,EAAa,IAAI,MAAM,EAC5GU,EAASV,EAAa,IAAI,OAAO,GAAK,CAAE,EACxCW,EACAC,EACAp6H,EAAgBi6H,CAAK,GACvBE,EAAW,CAAE,EACbA,EAASxB,CAAW,EAAIsB,GAExBE,EAAWF,EAETj6H,EAAgBk6H,CAAM,GACxBE,EAAY,CAAE,EACdA,EAAUzB,CAAW,EAAIuB,GAEzBE,EAAYF,EAEd,IAAIJ,EAAYN,EAAa,UAAY,CAAE,EAC3C/nI,EAAY0oI,EAAU,SAAUngG,EAAS6/F,EAAU,CACjD,IAAIljH,EAAO60G,GAAmBxxF,EAAS,GAAI,CACzC,EAAG,CAACm/F,EAAW,EACf,EAAG,CAACA,EAAW,EACf,MAAOA,EACP,OAAQA,CAClB,CAAS,EACDxiH,EAAK,SAASojH,EAAe,cAAc,EAC3C,IAAIM,EAAoB1jH,EAAK,YAAY,UAAU,EACnD0jH,EAAkB,MAAQL,EAAuB,aAAc,EAG/D,IAAIphI,EAAc,IAAIwlB,GAAO,CAC3B,MAAO,CACL,KAAMg8G,EAAUP,CAAQ,EACxB,MAAOG,EAAuB,IAAI,WAAW,EAC7C,aAAcA,EAAuB,IAAI,kBAAkB,EAC3D,QAASA,EAAuB,IAAI,aAAa,EACjD,KAAM,KACN,KAAM/5F,GAAQ,CACZ,UAAW+5F,EAAuB,IAAI,eAAe,EACrD,WAAYA,EAAuB,IAAI,gBAAgB,EACvD,SAAUA,EAAuB,IAAI,cAAc,EACnD,WAAYA,EAAuB,IAAI,gBAAgB,CACrE,EAAenzH,CAAO,CACX,EACD,OAAQ,EAClB,CAAS,EACD8P,EAAK,eAAe/d,CAAW,EAC/B8+G,GAAyB,CACvB,GAAI/gG,EACJ,eAAgBuiH,EAChB,SAAUW,EACV,qBAAsB,CACpB,MAAOO,EAAUP,CAAQ,CACrC,CACA,CAAS,EACDljH,EAAK,QAAUyjH,EAAUP,CAAQ,EACjCljH,EAAK,GAAG,YAAa,UAAY,CAE/B,IAAI2jH,EAAaN,EAAuB,aAAc,EAClDO,EAAsBnB,EAAaF,EAAa,IAAI,OAAO,GAAK,MAAQA,EAAa,IAAI,MAAM,IAAM,QAAU,QAAU,OAASA,EAAa,IAAI,QAAQ,GAAK,MAAQA,EAAa,IAAI,KAAK,IAAM,SAAW,SAAW,MAC9NtgI,EAAY,SAAS,CACnB,KAAMohI,EAAuB,IAAI,UAAU,GAAKM,EAAW,MAAQA,EAAW,QAAU,OACxF,gBAAiBN,EAAuB,IAAI,qBAAqB,CAC7E,CAAW,EACDrjH,EAAK,cAAc,CACjB,SAAUqjH,EAAuB,IAAI,cAAc,GAAKO,CACpE,CAAW,EACD3hI,EAAY,OAAS,CAACsgI,EAAa,IAAI,WAAW,EAGlDlzG,EAAI,cAAc,IAAI,CAChC,CAAS,EAAE,GAAG,WAAY,UAAY,CACxBwzG,EAAa,IAAI,CAAC,aAAcK,CAAQ,CAAC,IAAM,YACjD7zG,EAAI,cAAc,IAAI,EAExBptB,EAAY,KAAM,CAC5B,CAAS,GACA4gI,EAAa,IAAI,CAAC,aAAcK,CAAQ,CAAC,IAAM,WAAar0G,GAAgBE,IAAe/O,CAAI,EAChGm0B,EAAM,IAAIn0B,CAAI,EACdA,EAAK,GAAG,QAAS6hC,EAAYihF,EAAQ,QAASA,EAAS5yH,EAASmf,EAAK6zG,CAAQ,CAAC,EAC9EC,EAAUD,CAAQ,EAAIljH,CAC9B,CAAO,CACP,CACI6jH,GAA2B1vF,EAAOouF,EAAclzG,CAAG,EAGnD8kB,EAAM,IAAI2vF,GAAmC3vF,EAAM,gBAAe,EAAIouF,CAAY,CAAC,EAEnFE,GAActuF,EAAM,UAAU,SAAU4vF,EAAM,CAC5C,IAAIC,EAAYD,EAAK,QAGjBt8B,EAAgBs8B,EAAK,YAAY,UAAU,EAC3CE,EAAqBx8B,EAAc,aAAeA,EAAc,WAAa,CAAA,GAC7ExlG,EAAc8hI,EAAK,eAAgB,EACnCG,EAAoBjiI,GAAeA,EAAY,YAAY,UAAU,EAEzE,GAAIiiI,GAAqB,CAACtwH,EAAkBswH,CAAiB,GAAKF,EAAW,CAC3E,IAAIG,EAAoBD,EAAkB,QAAUA,EAAkB,MAAQ,CAAA,GAC1EnqJ,EAAOmrH,GAA4B8+B,EAAWv8G,GAAO,SAAS08G,CAAiB,CAAC,EAChFC,EAAUL,EAAK,EAAI5vF,EAAM,EACzBkwF,EAAUN,EAAK,EAAI5vF,EAAM,EAAIquF,EAC7B8B,EAAe,GACfD,EAAUtqJ,EAAK,OAASs1C,EAAI,UAAS,IACvC40G,EAAmB,SAAW,MAC9BK,EAAe,IAEjB,IAAIC,EAAYD,EAAe,GAAKvqJ,EAAK,OAASyoJ,EAAW,GACzD4B,EAAUrqJ,EAAK,MAAQ,EAAIs1C,EAAI,YACjC40G,EAAmB,SAAW,CAAC,OAAQM,CAAS,EAChDJ,EAAkB,MAAQ,SACjBC,EAAUrqJ,EAAK,MAAQ,EAAI,IACpCkqJ,EAAmB,SAAW,CAAC,EAAGM,CAAS,EAC3CJ,EAAkB,MAAQ,OAEpC,CACA,CAAK,CACF,EACD7B,EAAY,UAAU,WAAa,SAAUC,EAAcryH,EAASmf,EAAKxf,EAAS,CAChF/U,EAAY,KAAK,UAAW,SAAUgoI,EAAS,CAC7CA,aAAmBnB,IAAkBmB,EAAQ,YAAcA,EAAQ,WAAWA,EAAQ,MAAO5yH,EAASmf,EAAKxf,CAAO,CACxH,CAAK,CACF,EAMDyyH,EAAY,UAAU,OAAS,SAAUpyH,EAASmf,EAAK,CACrDv0B,EAAY,KAAK,UAAW,SAAUgoI,EAAS,CAC7CA,aAAmBnB,IAAkBmB,EAAQ,QAAUA,EAAQ,OAAO5yH,EAASmf,CAAG,CACxF,CAAK,EACD,KAAK,MAAM,UAAW,CACvB,EACDizG,EAAY,UAAU,QAAU,SAAUpyH,EAASmf,EAAK,CACtDv0B,EAAY,KAAK,UAAW,SAAUgoI,EAAS,CAC7CA,aAAmBnB,IAAkBmB,EAAQ,SAAWA,EAAQ,QAAQ5yH,EAASmf,CAAG,CAC1F,CAAK,CACF,EACDizG,EAAY,KAAO,UACZA,CACT,EAAE7/D,EAAa,EACf,SAASsgE,GAAkBf,EAAa,CACtC,OAAOA,EAAY,QAAQ,IAAI,IAAM,CACvC,CCzPA,IAAIwC,GAA2B,SAAU3iJ,EAAQ,CAC/CC,EAAU0iJ,EAAa3iJ,CAAM,EAC7B,SAAS2iJ,GAAc,CACrB,OAAO3iJ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAA2iJ,EAAY,UAAU,QAAU,SAAUt0H,EAASmf,EAAK,CACtD,IAAIva,EAAQ,KAAK,MACb2vH,EAAQ3vH,EAAM,IAAI,MAAM,GAAK5E,EAAQ,IAAI,cAAc,GAAK,UAC5D6rE,EAAQ1sD,EAAI,MAAO,EAAC,QAAQ,QAAO,IAAO,MAC1Ct+C,EAAOgrG,EAAQ,MAAQjnE,EAAM,IAAI,OAAQ,EAAI,GAAK,MAClDgnE,EAAMzsD,EAAI,oBAAoB,CAChC,KAAMt+C,EACN,gBAAiB+jC,EAAM,IAAI,kBAAmB,EAAI,GAAK5E,EAAQ,IAAI,iBAAiB,GAAK,OACzF,yBAA0B4E,EAAM,IAAI,0BAA0B,EAC9D,kBAAmBA,EAAM,IAAI,mBAAmB,EAChD,WAAYA,EAAM,IAAI,YAAY,CACxC,CAAK,EACGtqC,EAAUH,EAAI,QAElB,GAAI,OAAO,YAAe,aAAeG,EAAQ,SAAW,CAACA,EAAQ,IAAM,CAACA,EAAQ,MAAO,CACzF,IAAIk6J,EAAK,SAAS,cAAc,GAAG,EACnCA,EAAG,SAAWD,EAAQ,IAAM1zJ,EAC5B2zJ,EAAG,OAAS,SACZA,EAAG,KAAO5oD,EACV,IAAI6oD,EAAM,IAAI,WAAW,QAAS,CAEhC,KAAM,SAAS,YACf,QAAS,GACT,WAAY,EACpB,CAAO,EACDD,EAAG,cAAcC,CAAG,CAC1B,SAIU,OAAO,UAAU,kBAAoB5oD,EAAO,CAC9C,IAAIxqC,EAAQuqC,EAAI,MAAM,GAAG,EAErB8oD,EAAgBrzF,EAAM,CAAC,EAAE,QAAQ,QAAQ,EAAI,GAC7CszF,EAAO9oD,EAET,mBAAmBxqC,EAAM,CAAC,CAAC,EAAIA,EAAM,CAAC,EAKxCqzF,IAAkBC,EAAO,OAAO,KAAKA,CAAI,GACzC,IAAIC,EAAWL,EAAQ,IAAM1zJ,EAE7B,GAAI,OAAO,UAAU,iBAAkB,CAGrC,QAFIkU,EAAI4/I,EAAK,OACTE,EAAQ,IAAI,WAAW9/I,CAAC,EACrBA,KACL8/I,EAAM9/I,CAAC,EAAI4/I,EAAK,WAAW5/I,CAAC,EAE9B,IAAI+/I,EAAO,IAAI,KAAK,CAACD,CAAK,CAAC,EAC3B,OAAO,UAAU,iBAAiBC,EAAMF,CAAQ,CAC1D,KAAe,CACL,IAAInuI,EAAQ,SAAS,cAAc,QAAQ,EAC3C,SAAS,KAAK,YAAYA,CAAK,EAC/B,IAAIsuI,EAAKtuI,EAAM,cACXuuI,EAAMD,EAAG,SACbC,EAAI,KAAK,gBAAiB,SAAS,EACnCA,EAAI,MAAML,CAAI,EACdK,EAAI,MAAO,EACXD,EAAG,MAAO,EACVC,EAAI,YAAY,SAAU,GAAMJ,CAAQ,EACxC,SAAS,KAAK,YAAYnuI,CAAK,CACzC,CACA,KAAa,CACL,IAAI82C,EAAO34B,EAAM,IAAI,MAAM,EACvBqwH,EAAO,qCAAiDrpD,EAAM,qCAAuCruC,GAAQA,EAAK,CAAC,GAAK,IAAM,cAC9H23F,EAAM,OAAO,KAAM,EACvBA,EAAI,SAAS,MAAMD,CAAI,EACvBC,EAAI,SAAS,MAAQX,CAC7B,CAEG,EACDD,EAAY,iBAAmB,SAAUt0H,EAAS,CAChD,IAAIunC,EAAgB,CAClB,KAAM,GACN,KAAM,mFACN,MAAOvnC,EAAQ,iBAAiB,IAAI,CAAC,UAAW,cAAe,OAAO,CAAC,EACvE,KAAM,MAGN,yBAA0B,OAC1B,KAAM,GACN,kBAAmB,CAAC,SAAS,EAG7B,KAAMA,EAAQ,eAAgB,EAAC,IAAI,CAAC,UAAW,cAAe,MAAM,CAAC,CACtE,EACD,OAAOunC,CACR,EACM+sF,CACT,EAAE7C,EAAc,EC/FZ0D,GAAsB,yBAItBC,GAAa,CAAC,CAAC,OAAQ,KAAK,EAAG,CAAC,OAAO,CAAC,EACxCC,GAAyB,SAAU1jJ,EAAQ,CAC7CC,EAAUyjJ,EAAW1jJ,CAAM,EAC3B,SAAS0jJ,GAAY,CACnB,OAAO1jJ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAA0jJ,EAAU,UAAU,SAAW,UAAY,CACzC,IAAIzwH,EAAQ,KAAK,MACb0wH,EAAiB1wH,EAAM,IAAI,MAAM,EACjCwuH,EAAQ,CAAE,EACdxoI,OAAAA,EAAYga,EAAM,IAAI,MAAM,EAAG,SAAU/jC,EAAM,CACzCy0J,EAAez0J,CAAI,IACrBuyJ,EAAMvyJ,CAAI,EAAIy0J,EAAez0J,CAAI,EAEzC,CAAK,EACMuyJ,CACR,EACDiC,EAAU,iBAAmB,SAAUr1H,EAAS,CAC9C,IAAIunC,EAAgB,CAClB,KAAM,GACN,KAAM,CAAE,EAER,KAAM,CACJ,KAAM,+DACN,IAAK,kFAEL,MAAO,kYACR,EAED,MAAOvnC,EAAQ,iBAAiB,IAAI,CAAC,UAAW,YAAa,OAAO,CAAC,EACrE,OAAQ,CAAE,EACV,YAAa,CAAA,CACd,EACD,OAAOunC,CACR,EACD8tF,EAAU,UAAU,QAAU,SAAUr1H,EAASmf,EAAKt+C,EAAM,CAC1D,IAAI+jC,EAAQ,KAAK,MACboW,EAAcpW,EAAM,IAAI,CAAC,cAAe/jC,CAAI,CAAC,EAEjD,GAAK00J,GAAmB10J,CAAI,EAG5B,KAAIw+B,EAAY,CACd,OAAQ,CAAA,CACT,EACGm2H,EAAyB,SAAUr1G,EAAa,CAClD,IAAIy3B,EAAaz3B,EAAY,QACzBs1G,EAAWt1G,EAAY,GACvBu1G,EAAeH,GAAmB10J,CAAI,EAAE+2E,EAAY69E,EAAUt1G,EAAavb,CAAK,EAChF8wH,IAEF11F,EAAgB01F,EAAcv1G,EAAY,MAAM,EAChD9gB,EAAU,OAAO,KAAKq2H,CAAY,GAGpC,IAAIr1G,EAAWF,EAAY,iBAC3B,GAAIE,GAAYA,EAAS,OAAS,gBAAkBx/C,IAAS,QAAUA,IAAS,OAAQ,CACtF,IAAIkiI,EAAe1iF,EAAS,eAAe,SAAS,EAAE,CAAC,EACvD,GAAI0iF,EAAc,CAChB,IAAI1jB,EAAU0jB,EAAa,IACvB1rB,EAAWgI,EAAU,OACrBD,EAAYj/D,EAAY,uBAAuBk3D,EAAUv2E,EAAgB,EAAE,OAAO,CAAC,EACnFq+E,EAAYC,EAAU,eAC1B//E,EAAUg4E,CAAQ,EAAIh4E,EAAUg4E,CAAQ,GAAK,CAAE,EAC/C,QAASh8G,EAAI,EAAGA,GAAK8jH,EAAW9jH,IAC9BgkC,EAAUg4E,CAAQ,EAAE8H,CAAS,EAAI9/E,EAAUg4E,CAAQ,EAAE8H,CAAS,GAAK,CAAE,EAEvE9/E,EAAUg4E,CAAQ,EAAE8H,CAAS,EAAE,YAAct+G,IAAS,KAChE,CACA,CACK,EACD+pB,EAAYwqI,GAAY,SAAUO,EAAO,CACnCv/H,EAAeu/H,EAAO90J,CAAI,GAAK,GACjC+pB,EAAY+qI,EAAO,SAAUz3H,EAAM,CACjC0G,EAAM,cAAc1G,EAAM,QAAQ,CAC5C,CAAS,CAET,CAAK,EACD0G,EAAM,cAAc/jC,EAAM,UAAU,EACpCm/B,EAAQ,cAAc,CACpB,SAAU,SACV,MAAOgb,GAAe,KAAO,KAAO,CAClC,YAAaA,CACrB,CACK,EAAEw6G,CAAsB,EACzB,IAAII,EACAC,EAAch1J,EAEdA,IAAS,UAIX+0J,EAAWp5F,EAAa,CACtB,MAAO53B,EAAM,OAAO,MAAM,MAC1B,MAAOA,EAAM,OAAO,MAAM,KAClC,EAASA,EAAM,OAAO,KAAK,EACjBA,EAAM,IAAI,CAAC,aAAc/jC,CAAI,CAAC,IAAM,aACtCg1J,EAAc,UAGlB12G,EAAI,eAAe,CACjB,KAAM,kBACN,YAAa02G,EACb,UAAWx2H,EACX,SAAUu2H,EACV,YAAa,WACnB,CAAK,EACF,EACMP,CACT,EAAE5D,EAAc,EACZ8D,GAAqB,CACvB,KAAQ,SAAU39E,EAAY69E,EAAUt1G,EAAavb,EAAO,CAC1D,GAAIgzC,IAAe,MACjB,OAAOpb,EAAa,CAClB,GAAIi5F,EACJ,KAAM,OAEN,KAAMt1G,EAAY,IAAI,MAAM,EAC5B,MAAOA,EAAY,IAAI,OAAO,EAC9B,UAAWA,EAAY,IAAI,WAAW,EACtC,SAAUA,EAAY,IAAI,UAAU,CAC5C,EAASvb,EAAM,IAAI,CAAC,SAAU,MAAM,CAAC,GAAK,CAAE,EAAE,EAAI,CAE/C,EACD,IAAO,SAAUgzC,EAAY69E,EAAUt1G,EAAavb,EAAO,CACzD,GAAIgzC,IAAe,OACjB,OAAOpb,EAAa,CAClB,GAAIi5F,EACJ,KAAM,MAEN,KAAMt1G,EAAY,IAAI,MAAM,EAC5B,MAAOA,EAAY,IAAI,OAAO,EAC9B,UAAWA,EAAY,IAAI,WAAW,EACtC,SAAUA,EAAY,IAAI,UAAU,CAC5C,EAASvb,EAAM,IAAI,CAAC,SAAU,KAAK,CAAC,GAAK,CAAE,EAAE,EAAI,CAE9C,EACD,MAAS,SAAUgzC,EAAY69E,EAAUt1G,EAAavb,EAAO,CAC3D,IAAIkxH,EAAU31G,EAAY,IAAI,OAAO,IAAMg1G,GAC3C,GAAIv9E,IAAe,QAAUA,IAAe,MAC1C,OAAAhzC,EAAM,cAAc,QAASkxH,EAAU,SAAW,UAAU,EACrDt5F,EAAa,CAClB,GAAIi5F,EACJ,MAAOK,EAAU,GAAKX,EAC9B,EAASvwH,EAAM,IAAI,CAAC,SAAU,OAAO,CAAC,GAAK,CAAE,EAAE,EAAI,CAEnD,CACA,EAEAw0G,GAAuB,CACrB,KAAM,kBACN,MAAO,mBACP,OAAQ,kBACV,EAAG,SAAUz5G,EAASK,EAAS,CAC7BA,EAAQ,YAAYL,EAAQ,SAAS,CACvC,CAAC,EC5JD,IAAIo2H,GAAgB,IAAI,MAAM,EAAE,EAAE,KAAK,GAAG,EACtCC,GAAe,IAMnB,SAASC,GAAYj2H,EAAS,CAC5B,IAAIk2H,EAA4B,CAAC,EAC7BC,EAAc,CAAC,EACfC,EAAO,CAAC,EACJ,OAAAp2H,EAAA,cAAc,SAAUmgB,EAAa,CAC3C,IAAIE,EAAWF,EAAY,iBAC3B,GAAIE,IAAaA,EAAS,OAAS,eAAiBA,EAAS,OAAS,SAAU,CAE1E,IAAAgmE,EAAWhmE,EAAS,YAAY,EAChC,GAAAgmE,EAAS,OAAS,WAAY,CAChC,IAAInoH,EAAMmoH,EAAS,IAAM,IAAMA,EAAS,MACnC6vC,EAA0Bh4J,CAAG,IAChCg4J,EAA0Bh4J,CAAG,EAAI,CAC/B,aAAcmoH,EACd,UAAWhmE,EAAS,aAAagmE,CAAQ,EACzC,OAAQ,CAAA,CACV,EACA+vC,EAAK,KAAK,CACR,QAAS/vC,EAAS,IAClB,UAAWA,EAAS,KAAA,CACrB,GAEH6vC,EAA0Bh4J,CAAG,EAAE,OAAO,KAAKiiD,CAAW,CAAA,MAEtDg2G,EAAY,KAAKh2G,CAAW,CAC9B,MAEAg2G,EAAY,KAAKh2G,CAAW,CAC9B,CACD,EACM,CACL,0BAAA+1G,EACA,MAAOC,EACP,KAAAC,CACF,CACF,CAKA,SAASC,GAA+BC,EAAQ,CAC9C,IAAIC,EAAS,CAAC,EACd3rI,OAAAA,EAAY0rI,EAAQ,SAAUryF,EAAO/lE,EAAK,CACxC,IAAI6kI,EAAe9+D,EAAM,aACrBw2D,EAAYx2D,EAAM,UAClB42D,EAAeJ,EAAU,IACzB+7B,EAAU,CAAC,GAAG,EAAE,OAAO/sI,EAAWw6C,EAAM,OAAQ,SAAUuM,EAAQ,CACpE,OAAOA,EAAO,IAAA,CACf,CAAC,EAEEimF,EAAU,CAAC1zB,EAAa,MAAM,eAAe,EACjDn4G,EAAYq5C,EAAM,OAAQ,SAAUuM,EAAQ,CACtC,IAAAoL,EAAUpL,EAAO,WAAW,EACxBimF,EAAA,KAAKjmF,EAAO,aAAa,SAASoL,EAAQ,aAAai/C,CAAY,EAAG,SAAUn+H,EAAK,CACpF,OAAAA,CAAA,CACR,CAAC,CAAA,CACH,EAGD,QADI4qC,EAAQ,CAACkvH,EAAQ,KAAKR,EAAY,CAAC,EAC9B36J,EAAI,EAAGA,EAAIo7J,EAAQ,CAAC,EAAE,OAAQp7J,IAAK,CAE1C,QADIq7J,EAAQ,CAAC,EACJnvJ,EAAI,EAAGA,EAAIkvJ,EAAQ,OAAQlvJ,IAClCmvJ,EAAM,KAAKD,EAAQlvJ,CAAC,EAAElM,CAAC,CAAC,EAE1BisC,EAAM,KAAKovH,EAAM,KAAKV,EAAY,CAAC,CAAA,CAErCO,EAAO,KAAKjvH,EAAM,KAAK;AAAA,CAAI,CAAC,CAAA,CAC7B,EACMivH,EAAO,KAAK;AAAA;AAAA,EAASR,GAAgB;AAAA;AAAA,CAAM,CACpD,CAIA,SAASY,GAAoBnmF,EAAQ,CACnC,OAAO/mD,EAAW+mD,EAAQ,SAAUA,EAAQ,CACtC,IAAA3wE,EAAO2wE,EAAO,WAAW,EACzBlpC,EAAQ,CAACkpC,EAAO,IAAI,EACpBsnD,EAAO,CAAC,EACP,OAAAj4H,EAAA,KAAKA,EAAK,WAAY,UAAY,CAIrC,QAHIyG,EAAS,UAAU,OACnBs6C,EAAY,UAAUt6C,EAAS,CAAC,EAChCkF,EAAO3L,EAAK,QAAQ+gD,CAAS,EACxBvlD,EAAI,EAAGA,EAAIiL,EAAS,EAAGjL,IACzBy8H,EAAAz8H,CAAC,EAAI,UAAUA,CAAC,EAEjBisC,EAAA,MAAM97B,EAAOA,EAAOwqJ,GAAe,IAAMl+B,EAAK,KAAKk+B,EAAY,CAAC,CAAA,CACvE,EACM1uH,EAAM,KAAK;AAAA,CAAI,CACvB,CAAA,EAAE,KAAK;AAAA;AAAA,EAASyuH,GAAgB;AAAA;AAAA,CAAM,CACzC,CACA,SAASa,GAAoB52H,EAAS,CAChC,IAAApiC,EAASq4J,GAAYj2H,CAAO,EACzB,MAAA,CACL,MAAO8yF,GAAc,CAACujC,GAA+Bz4J,EAAO,yBAAyB,EAAG+4J,GAAoB/4J,EAAO,KAAK,CAAC,EAAG,SAAUiE,EAAK,CACzI,MAAO,CAAC,CAACA,EAAI,QAAQ,YAAa,EAAE,CACrC,CAAA,EAAE,KAAK;AAAA;AAAA,EAASk0J,GAAgB;AAAA;AAAA,CAAM,EACvC,KAAMn4J,EAAO,IACf,CACF,CACA,SAASgE,GAAKC,EAAK,CACjB,OAAOA,EAAI,QAAQ,SAAU,EAAE,EAAE,QAAQ,SAAU,EAAE,CACvD,CAIA,SAASg1J,GAAY9sH,EAAO,CAE1B,IAAI+sH,EAAY/sH,EAAM,MAAM,EAAGA,EAAM,QAAQ;AAAA,CAAI,CAAC,EAClD,GAAI+sH,EAAU,QAAQd,EAAY,GAAK,EAC9B,MAAA,EAEX,CACA,IAAIe,GAAiB,IAAI,OAAO,IAAMf,GAAe,KAAM,GAAG,EAK9D,SAASgB,GAAiBC,EAAK,CAU7B,QATIC,EAAWD,EAAI,MAAM,MAAM,EAC3BT,EAAU50J,GAAKs1J,EAAS,OAAO,EAAE,MAAMH,EAAc,EACrD30C,EAAa,CAAC,EACd5xC,EAAS/mD,EAAW+sI,EAAS,SAAUW,EAAQ,CAC1C,MAAA,CACL,KAAMA,EACN,KAAM,CAAA,CACR,CAAA,CACD,EACQ97J,EAAI,EAAGA,EAAI67J,EAAS,OAAQ77J,IAAK,CACxC,IAAIq7J,EAAQ90J,GAAKs1J,EAAS77J,CAAC,CAAC,EAAE,MAAM07J,EAAc,EACvC30C,EAAA,KAAKs0C,EAAM,OAAO,EAC7B,QAASnvJ,EAAI,EAAGA,EAAImvJ,EAAM,OAAQnvJ,IACzBipE,EAAAjpE,CAAC,IAAMipE,EAAOjpE,CAAC,EAAE,KAAKlM,CAAC,EAAIq7J,EAAMnvJ,CAAC,EAC3C,CAEK,MAAA,CACL,OAAAipE,EACA,WAAA4xC,CACF,CACF,CACA,SAASg1C,GAAkBv1J,EAAK,CAI9B,QAHIylC,EAAQzlC,EAAI,MAAM,MAAM,EACxB2tF,EAAa5tF,GAAK0lC,EAAM,MAAA,CAAO,EAC/BznC,EAAO,CAAC,EACHxE,EAAI,EAAGA,EAAIisC,EAAM,OAAQjsC,IAAK,CAGrC,IAAI0tC,EAAOnnC,GAAK0lC,EAAMjsC,CAAC,CAAC,EACxB,GAAK0tC,EAGD,KAAA2tH,EAAQ3tH,EAAK,MAAMguH,EAAc,EACjCh/F,EAAS,GACT74D,EAAQ,OACRm4J,EAAU,GACV,MAAMX,EAAM,CAAC,CAAC,GAENW,EAAA,GACVt/F,EAAS2+F,EAAM,CAAC,EACRA,EAAAA,EAAM,MAAM,CAAC,EACrB72J,EAAKxE,CAAC,EAAI,CACR,KAAM08D,EACN,MAAO,CAAA,CACT,EACQ74D,EAAAW,EAAKxE,CAAC,EAAE,OAER6D,EAAAW,EAAKxE,CAAC,EAAI,CAAC,EAErB,QAASkM,EAAI,EAAGA,EAAImvJ,EAAM,OAAQnvJ,IAChCrI,EAAM,KAAK,CAACw3J,EAAMnvJ,CAAC,CAAC,EAElBrI,EAAM,SAAW,IACTm4J,EAAAx3J,EAAKxE,CAAC,EAAE,MAAQ6D,EAAM,CAAC,EAAIW,EAAKxE,CAAC,EAAI6D,EAAM,CAAC,GACxD,CAEK,MAAA,CACL,KAAMswF,EACN,KAAA3vF,CACF,CACF,CACA,SAASy3J,GAAcz1J,EAAK01J,EAAe,CACrC,IAAAznE,EAASjuF,EAAI,MAAM,IAAI,OAAO;AAAA,GAAQk0J,GAAgB;AAAA,GAAO,GAAG,CAAC,EACjE12H,EAAY,CACd,OAAQ,CAAA,CACV,EACAzU,OAAAA,EAAYklE,EAAQ,SAAU/lD,EAAOxwB,EAAK,CACpC,GAAAs9I,GAAY9sH,CAAK,EAAG,CAClB,IAAAnsC,EAASo5J,GAAiBjtH,CAAK,EAC/BytH,EAAYD,EAAch+I,CAAG,EAC7BkuG,EAAU+vC,EAAU,QAAU,OAC9BA,IACFn4H,EAAUooF,CAAO,EAAIpoF,EAAUooF,CAAO,GAAK,CAAC,EAC5CpoF,EAAUooF,CAAO,EAAE+vC,EAAU,SAAS,EAAI,CACxC,KAAM55J,EAAO,UACf,EACAyhC,EAAU,OAASA,EAAU,OAAO,OAAOzhC,EAAO,MAAM,EAC1D,KACK,CACD,IAAAA,EAASw5J,GAAkBrtH,CAAK,EAC1B1K,EAAA,OAAO,KAAKzhC,CAAM,CAAA,CAC9B,CACD,EACMyhC,CACT,CACA,IAAIo4H,GAAwB,SAAU9lJ,EAAQ,CAC5CC,EAAU6lJ,EAAU9lJ,CAAM,EAC1B,SAAS8lJ,GAAW,CAClB,OAAO9lJ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAAA,CAE7D8lJ,OAAAA,EAAS,UAAU,QAAU,SAAUz3H,EAASmf,EAAK,CAEnD,WAAW,UAAY,CACrBA,EAAI,eAAe,CACjB,KAAM,SAAA,CACP,CAAA,CACF,EACG,IAAA9a,EAAY8a,EAAI,OAAO,EACvBva,EAAQ,KAAK,MACb,KAAK,MACGP,EAAA,YAAY,KAAK,IAAI,EAE7B,IAAAv4B,EAAO,SAAS,cAAc,KAAK,EAEvCA,EAAK,MAAM,QAAU,8DACrBA,EAAK,MAAM,gBAAkB84B,EAAM,IAAI,iBAAiB,GAAK,OAEzD,IAAAuyH,EAAS,SAAS,cAAc,IAAI,EACpC55F,EAAO34B,EAAM,IAAI,MAAM,GAAK,CAAC,EACjCuyH,EAAO,UAAY55F,EAAK,CAAC,GAAK34B,EAAM,IAAI,OAAO,EAC/CuyH,EAAO,MAAM,QAAU,mBACvBA,EAAO,MAAM,MAAQvyH,EAAM,IAAI,WAAW,EACtC,IAAA8yH,EAAW,SAAS,cAAc,KAAK,EACvCC,EAAW,SAAS,cAAc,UAAU,EAChDD,EAAS,MAAM,QAAU,gBACrB,IAAAE,EAAkBhzH,EAAM,IAAI,iBAAiB,EAC7CizH,EAAkBjzH,EAAM,IAAI,iBAAiB,EAC7ChnC,EAASg5J,GAAoB52H,CAAO,EACpC,GAAA0D,EAAkBk0H,CAAe,EAAG,CACtC,IAAIE,EAAYF,EAAgBz4G,EAAI,UAAA,CAAW,EAC3ChmB,EAAgB2+H,CAAS,EAC3BJ,EAAS,UAAYI,EACZC,GAAaD,CAAS,GAC/BJ,EAAS,YAAYI,CAAS,CAChC,KACK,CAEIH,EAAA,SAAW/yH,EAAM,IAAI,UAAU,EACxC,IAAIjqC,EAAQg9J,EAAS,MAErBh9J,EAAM,QAAU,8IACVA,EAAA,MAAQiqC,EAAM,IAAI,WAAW,EAC7BjqC,EAAA,YAAciqC,EAAM,IAAI,qBAAqB,EAC7CjqC,EAAA,gBAAkBiqC,EAAM,IAAI,eAAe,EACjD+yH,EAAS,MAAQ/5J,EAAO,MACxB85J,EAAS,YAAYC,CAAQ,CAAA,CAE/B,IAAIJ,EAAgB35J,EAAO,KACvBo6J,EAAkB,SAAS,cAAc,KAAK,EAClDA,EAAgB,MAAM,QAAU,8CAEhC,IAAIC,EAAc,4GACdC,EAAc,SAAS,cAAc,KAAK,EAC1CC,EAAgB,SAAS,cAAc,KAAK,EACjCF,GAAA,qBAAuBrzH,EAAM,IAAI,aAAa,EAC9CqzH,GAAA,UAAYrzH,EAAM,IAAI,iBAAiB,EACtD,IAAI1c,EAAO,KACX,SAASkwI,GAAQ,CACf/zH,EAAU,YAAYv4B,CAAI,EAC1Boc,EAAK,KAAO,IAAA,CAEG3c,GAAA2sJ,EAAa,QAASE,CAAK,EAC3B7sJ,GAAA4sJ,EAAe,QAAS,UAAY,CACnD,GAAIN,GAAmB,MAAQD,GAAmB,MAAQC,GAAmB,MAAQD,GAAmB,KAAM,CAKtGQ,EAAA,EACN,MAAA,CAEE,IAAA/4H,EACA,GAAA,CACEqE,EAAkBm0H,CAAe,EACnCx4H,EAAYw4H,EAAgBH,EAAUv4G,EAAI,UAAA,CAAW,EAEzC9f,EAAAi4H,GAAcK,EAAS,MAAOJ,CAAa,QAElDpyJ,EAAG,CACJ,MAAAizJ,EAAA,EACA,IAAI,MAAM,0BAA4BjzJ,CAAC,CAAA,CAE3Ck6B,GACF8f,EAAI,eAAe,CACjB,KAAM,iBACN,UAAA9f,CAAA,CACD,EAEG+4H,EAAA,CAAA,CACP,EACWF,EAAA,UAAY36F,EAAK,CAAC,EAChB46F,EAAA,UAAY56F,EAAK,CAAC,EAChC46F,EAAc,MAAM,QAAUD,EAAY,MAAM,QAAUD,EAC1D,CAACrzH,EAAM,IAAI,UAAU,GAAKozH,EAAgB,YAAYG,CAAa,EACnEH,EAAgB,YAAYE,CAAW,EACvCpsJ,EAAK,YAAYqrJ,CAAM,EACvBrrJ,EAAK,YAAY4rJ,CAAQ,EACzB5rJ,EAAK,YAAYksJ,CAAe,EAChCN,EAAS,MAAM,OAASrzH,EAAU,aAAe,GAAK,KACtDA,EAAU,YAAYv4B,CAAI,EAC1B,KAAK,KAAOA,CACd,EACA2rJ,EAAS,UAAU,OAAS,SAAUz3H,EAASmf,EAAK,CAClD,KAAK,MAAQA,EAAI,OAAS,EAAA,YAAY,KAAK,IAAI,CACjD,EACAs4G,EAAS,UAAU,QAAU,SAAUz3H,EAASmf,EAAK,CAC9C,KAAA,OAAOnf,EAASmf,CAAG,CAC1B,EACAs4G,EAAS,iBAAmB,SAAUz3H,EAAS,CAC7C,IAAIunC,EAAgB,CAClB,KAAM,GACN,SAAU,GACV,gBAAiB,KACjB,gBAAiB,KAEjB,KAAM,8GACN,MAAOvnC,EAAQ,iBAAiB,IAAI,CAAC,UAAW,WAAY,OAAO,CAAC,EACpE,KAAMA,EAAQ,iBAAiB,IAAI,CAAC,UAAW,WAAY,MAAM,CAAC,EAClE,gBAAiB,OACjB,UAAW,OACX,cAAe,OACf,oBAAqB,OACrB,YAAa,UACb,gBAAiB,MACnB,EACO,OAAAunC,CACT,EACOkwF,CAAA,EACPhG,EAAc,EAIhB,SAAS4G,GAAmBnoH,EAASooH,EAAc,CACjD,OAAO7uI,EAAWymB,EAAS,SAAUqoH,EAAQh/I,EAAK,CAC5C,IAAAqiG,EAAW08C,GAAgBA,EAAa/+I,CAAG,EAC3C,GAAAkqD,EAAgBm4C,CAAQ,GAAK,CAACz7C,EAAey7C,CAAQ,EAAG,CACtD,IAAA48C,EAAiB/0F,EAAgB80F,CAAM,GAAK,CAACp4F,EAAeo4F,CAAM,EACjEC,IACMD,EAAA,CACP,MAAOA,CACT,GAGF,IAAIE,EAAmB78C,EAAS,MAAQ,MAAQ28C,EAAO,MAAQ,KAEtD,OAAAA,EAAAv4F,EAAgBu4F,EAAQ38C,CAAQ,EACzC68C,GAAoB,OAAOF,EAAO,KAC3BA,CAAA,KAEA,QAAAA,CACT,CACD,CACH,CAEAnf,GAAuB,CACrB,KAAM,iBACN,MAAO,kBACP,OAAQ,kBACV,EAAG,SAAUz5G,EAASK,EAAS,CAC7B,IAAI04H,EAAmB,CAAC,EACxB9tI,EAAY+U,EAAQ,UAAU,OAAQ,SAAU01C,EAAW,CACzD,IAAIl1B,EAAcngB,EAAQ,gBAAgBq1C,EAAU,IAAI,EAAE,CAAC,EAC3D,GAAI,CAACl1B,EAGcu4G,EAAA,KAAKp1H,EAAc,CAElC,KAAM,SACR,EAAG+xC,CAAS,CAAC,MACR,CACD,IAAAijF,EAAen4G,EAAY,IAAI,MAAM,EACzCu4G,EAAiB,KAAK,CACpB,KAAMrjF,EAAU,KAChB,KAAMgjF,GAAmBhjF,EAAU,KAAMijF,CAAY,CAAA,CACtD,CAAA,CACH,CACD,EACOt4H,EAAA,YAAYggC,EAAgB,CAClC,OAAQ04F,CAAA,EACP/4H,EAAQ,SAAS,CAAC,CACvB,CAAC,ECjZD,IAAI7/B,GAAO8qB,EACP87C,GAAQ9mC,GAAW,EAKhB,SAAS+4H,GAAK34H,EAAS44H,EAAa,CACzC,IAAIC,EAAkBC,GAAkB94H,CAAO,EAG/ClgC,GAAK84J,EAAa,SAAUhpD,EAAWmpD,EAAY,CAEjD,QADI19J,EAAIw9J,EAAgB,OAAS,EAC1Bx9J,GAAK,EAAGA,IAAK,CAClB,IAAI29J,EAAWH,EAAgBx9J,CAAC,EAChC,GAAI29J,EAASD,CAAU,EACrB,KAER,CACI,GAAI19J,EAAI,EAAG,CAET,IAAI+wJ,EAAgBpsH,EAAQ,gBAAgB,CAC1C,SAAU,WACV,QAAS,SACT,GAAI+4H,CACL,CAAA,EAAE,CAAC,EACJ,GAAI3M,EAAe,CACjB,IAAI8E,EAAe9E,EAAc,gBAAiB,EAClDyM,EAAgB,CAAC,EAAEE,CAAU,EAAI,CAC/B,WAAYA,EACZ,MAAO7H,EAAa,CAAC,EACrB,IAAKA,EAAa,CAAC,CACpB,CACT,CACA,CACA,CAAG,EACD2H,EAAgB,KAAKD,CAAW,CAClC,CACO,SAASK,GAAIj5H,EAAS,CAC3B,IAAI64H,EAAkBC,GAAkB94H,CAAO,EAC3Ck5H,EAAOL,EAAgBA,EAAgB,OAAS,CAAC,EACrDA,EAAgB,OAAS,GAAKA,EAAgB,IAAK,EAEnD,IAAIG,EAAW,CAAE,EACjBl5J,OAAAA,GAAKo5J,EAAM,SAAUtpD,EAAWmpD,EAAY,CAC1C,QAAS19J,EAAIw9J,EAAgB,OAAS,EAAGx9J,GAAK,EAAGA,IAE/C,GADAu0G,EAAYipD,EAAgBx9J,CAAC,EAAE09J,CAAU,EACrCnpD,EAAW,CACbopD,EAASD,CAAU,EAAInpD,EACvB,KACR,CAEA,CAAG,EACMopD,CACT,CACO,SAAS/jE,GAAMj1D,EAAS,CAC7B0mC,GAAM1mC,CAAO,EAAE,UAAY,IAC7B,CACO,SAAS6gB,GAAM7gB,EAAS,CAC7B,OAAO84H,GAAkB94H,CAAO,EAAE,MACpC,CAKA,SAAS84H,GAAkB94H,EAAS,CAClC,IAAI2d,EAAQ+oB,GAAM1mC,CAAO,EACzB,OAAK2d,EAAM,YACTA,EAAM,UAAY,CAAC,EAAE,GAEhBA,EAAM,SACf,CCpEA,IAAIw7G,GAA6B,SAAUxnJ,EAAQ,CACjDC,EAAUunJ,EAAexnJ,CAAM,EAC/B,SAASwnJ,GAAgB,CACvB,OAAOxnJ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAAwnJ,EAAc,UAAU,QAAU,SAAUn5H,EAASmf,EAAK,CACxDi6G,GAAcp5H,CAAO,EACrBmf,EAAI,eAAe,CACjB,KAAM,UACN,KAAM,KAAK,GACjB,CAAK,CACF,EACDg6G,EAAc,iBAAmB,SAAUn5H,EAAS,CAClD,IAAIunC,EAAgB,CAClB,KAAM,GAEN,KAAM,kLACN,MAAOvnC,EAAQ,eAAgB,EAAC,IAAI,CAAC,UAAW,UAAW,OAAO,CAAC,CACpE,EACD,OAAOunC,CACR,EACM4xF,CACT,EAAE1H,EAAc,EAEhBrY,GAAuB,CACrB,KAAM,UACN,MAAO,UACP,OAAQ,kBACV,EAAG,SAAUz5G,EAASK,EAAS,CAC7BA,EAAQ,YAAY,UAAU,CAChC,CAAC,EC5BD,IAAIq5H,GAA4B,CAAC,OAAQ,QAAS,QAAS,MAAO,QAAS,QAAS,aAAc,YAAa,MAAM,EACjHC,GAAkC,UAAY,CAMvCA,SAAAA,EAAmB34H,EAAQX,EAASv0B,EAAK,CAChD,IAAIoG,EAAQ,KACZ,KAAK,gBAAkB,CAAC,EACpB,IAAA0nJ,EAAYx5H,GAAYC,EAASW,CAAM,EACtC7gC,EAAA05J,GAAoB,SAAU9rE,EAAS7sF,EAAM,EAC5C,CAAC4K,GAAO,CAACA,EAAI,SAAWzM,EAAQyM,EAAI,QAAS5K,CAAI,GAAK,IAChD6sF,EAAA6rE,EAAW1nJ,EAAM,eAAe,CAC1C,CACD,CAAA,CAEHynJ,OAAAA,EAAmB,UAAU,gBAAkB,SAAU3a,EAAO3+G,EAAS,CACvE,YAAK,kBAAkB2+G,EAAO3+G,EAAS,SAAU2mD,EAAM8yE,EAAYp5G,EAAU,CAGvE,IAFHsmC,EAAK,cAAgBA,EAAK,YAAc,KAAK,KAAK8yE,CAAU,EAEzD,CAAC9yE,EAAK,WAAY,CACpBA,EAAK,WAAa8yE,EAMlB,IAAI77J,EAAS87J,GAAa/yE,EAAK,SAAS,EAAE,EAAGtmC,EAAUo5G,CAAU,EACjE9yE,EAAK,cAAgB,CACnB,OAAQgzE,GAAchzE,EAAK,SAAS,EAAE/oF,EAAO,OAAQ+oF,EAAK,MAAO,CAAC,EAAG,CAAC,CAAC,EACvE,SAAU/oF,EAAO,QACnB,CAAA,CACF,CACD,EACM+gJ,CACT,EACA2a,EAAmB,UAAU,kBAAoB,SAAU3a,EAAO3+G,EAAShgC,EAAI,CACxEF,EAAA6+I,EAAO,SAAUh4D,EAAM,CAC1B,IAAIp1E,EAAa,KAAK,eAAeo1E,EAAM3mD,CAAO,EAC9CzuB,GAAcA,IAAe,IAC1BzR,EAAAyR,EAAW,WAAY,SAAU8uC,EAAU,CAC1C,IAAAziD,EAAS87J,GAAa/yE,EAAK,SAAS,EAAE,EAAGtmC,EAAUsmC,EAAK,MAAO,EAAI,EACvE3mF,EAAG2mF,EAAM/oF,EAAO,OAAQyiD,EAAUrgB,CAAO,CAAA,CAC1C,GAEF,IAAI,CACT,EAMAs5H,EAAmB,UAAU,eAAiB,SAAU3a,EAAO3+G,EAAS,CACjElgC,EAAA6+I,EAAO,SAAUh4D,EAAM,CAC1B,IAAIp1E,EAAa,KAAK,eAAeo1E,EAAM3mD,CAAO,EAO9C,GAFC2mD,EAAA,MAAQA,EAAK,OAAS,CAAC,EAExBp1E,GAAcA,IAAe,GAAM,CACrCo1E,EAAK,QAAUp1E,EAAW,QAOtB,IAAA3T,EAAS87J,GAAa/yE,EAAK,SAAS,EAAE,EAAGp1E,EAAW,SAAUo1E,EAAK,UAAU,EAC7EizE,EAAcjzE,EAAK,cACvBA,EAAK,MAAQizE,EAAcD,GAAchzE,EAAK,SAAS,EAAE/oF,EAAO,OAAQg8J,EAAY,OAAQC,GAAUj8J,EAAO,SAAUg8J,EAAY,QAAQ,CAAC,EAAIh8J,EAAO,MAAA,GAExJ,IAAI,CACT,EACA07J,EAAmB,UAAU,cAAgB,SAAUn6G,EAAK26G,EAAqB,CAC/E,OAAO1+J,EAAI,KAAK,gBAAiB,SAAUmW,EAAY,CACjD,IAAA1H,EAAO0H,EAAW,aAAa,EAC5B,MAAA,CACL,QAASA,EAAW,QACpB,iBAAkBuoJ,EAAsBA,EAAoBvoJ,CAAU,EAAI,KAC1E,SAAUwoJ,GAAkClwJ,CAAI,EAChD,iBAAkBmwJ,GAAqCnwJ,EAAMs1C,EAAK5tC,EAAW,aAAa,EAC1F,0BAA2B0oJ,GAAuCpwJ,CAAI,CACxE,CAAA,CACD,CACH,EACAyvJ,EAAmB,UAAU,cAAgB,SAAU3yE,EAAMxmC,EAAangB,EAAS,CAGjF,IAAIzuB,EAAa,KAAK,eAAeo1E,EAAM3mD,CAAO,EAC3C,OAAAzuB,IAAe,IAAQA,GAAcvS,EAAQuS,EAAW,WAAY4uC,EAAY,gBAAgB,GAAK,CAC9G,EAMAm5G,EAAmB,UAAU,eAAiB,SAAU3yE,EAAM3mD,EAAS,CAGrE,QAFIk6H,EAAiB,KAAK,gBACtBX,EAAYx5H,GAAYC,EAAS2mD,CAAI,EAChCtrF,EAAI,EAAGA,EAAI6+J,EAAe,OAAQ7+J,IAAK,CAC1C,IAAAkW,EAAa2oJ,EAAe7+J,CAAC,EAC7B8+J,EAAcxzE,EAAK,QACvB,GAAIwzE,GACE,GAAA5oJ,EAAW,UAAY4oJ,EAClB,OAAA5oJ,MAGT,SAAShK,EAAI,EAAGA,EAAI6yJ,GAAmB,OAAQ7yJ,IAC7C,GAAI6yJ,GAAmB7yJ,CAAC,EAAEgyJ,EAAWhoJ,CAAU,EACtC,OAAAA,CAGb,CAEK,MAAA,EACT,EACO+nJ,CACP,EAAA,EACF,SAASe,GAAatrC,EAAQ,CAC5B,OAAAA,EAAO,CAAC,EAAIA,EAAO,CAAC,GAAKA,EAAO,QAAQ,EACjCA,CACT,CACA,SAAShvF,GAAYC,EAASW,EAAQ,CAC7B,OAAA25H,GAAqBt6H,EAASW,EAAQ,CAC3C,iBAAkB04H,EAAA,CACnB,CACH,CACA,IAAIG,GAAqB,CACvB,KAAM,SAAUD,EAAWW,EAAgB,CACzC,IAAIK,EAAchB,EAAU,YACxBiB,EAAcjB,EAAU,YACxBkB,EAAalB,EAAU,WAEvBmB,EAAej4J,EAAc,EAC7Bk4J,EAAW,CAAC,EACZC,EAAW,CAAC,EACZ,CAACL,GAAe,CAACC,GAAe,CAACC,IAGhC36J,EAAAy6J,EAAa,SAAUn7C,EAAW,CACjC,IAAAwrB,EAAYxrB,EAAU,KAAK,KAAK,MACvBs7C,EAAA,IAAI9vB,EAAU,GAAIA,CAAS,EAC/B+vB,EAAA/vB,EAAU,EAAE,EAAI,EAAA,CAC1B,EACI9qI,EAAA06J,EAAa,SAAUp7C,EAAW,CACjC,IAAAwrB,EAAYxrB,EAAU,KAAK,KAAK,MACvBs7C,EAAA,IAAI9vB,EAAU,GAAIA,CAAS,EAC/BgwB,EAAAhwB,EAAU,EAAE,EAAI,EAAA,CAC1B,EACI9qI,EAAA26J,EAAY,SAAU7vB,EAAW,CACvB8vB,EAAA,IAAI9vB,EAAU,GAAIA,CAAS,EAC/B+vB,EAAA/vB,EAAU,EAAE,EAAI,GAChBgwB,EAAAhwB,EAAU,EAAE,EAAI,EAAA,CAC1B,EACY8vB,EAAA,KAAK,SAAU9vB,EAAW,CACrC,IAAIC,EAAOD,EAAU,iBACjBmN,EAAa,CAAC,EAClBj4I,EAAK+qI,EAAK,cAAiB,EAAA,SAAUzkB,EAAW/vF,EAAO,EACjDr3B,EAAQu7J,EAAan0C,EAAU,QAAQ,GAAG,EAAE,KAAK,GAAK,GAAKpnH,EAAQw7J,EAAap0C,EAAU,QAAQ,GAAG,EAAE,KAAK,GAAK,IACnH2xB,EAAW,KAAK3xB,CAAS,CAC3B,CACD,EACD8zC,EAAe,KAAK,CAClB,QAAS,SAAWtvB,EAAU,GAC9B,UAAAA,EACA,cAAeA,EAEf,SAAUmN,EAAW,CAAC,EACtB,WAAYA,EACZ,aAAc8iB,GAAkB,KAChC,cAAeF,EAAS/vB,EAAU,EAAE,EACpC,cAAegwB,EAAShwB,EAAU,EAAE,CAAA,CACrC,CAAA,CACF,EACH,EACA,IAAK,SAAU2uB,EAAWW,EAAgB,CACnCp6J,EAAAy5J,EAAU,UAAW,SAAUuB,EAAU,CAC5C,IAAIz6G,EAAWy6G,EAAS,iBACxBZ,EAAe,KAAK,CAClB,QAAS,QAAUY,EAAS,GAC5B,SAAAA,EACA,cAAeA,EACf,SAAAz6G,EACA,WAAY,CAACA,CAAQ,EACrB,aAAcw6G,GAAkB,GAAA,CACjC,CAAA,CACF,CAAA,CAEL,EACIT,GAAqB,CAEzB,SAAUb,EAAWhoJ,EAAY,CAC/B,IAAImtG,EAAa66C,EAAU,WACvB56C,EAAa46C,EAAU,WACvB3uB,EAAY2uB,EAAU,UAC1B,OAAC3uB,GAAalsB,IAAeksB,EAAYlsB,EAAW,KAAK,KAAK,OAC9D,CAACksB,GAAajsB,IAAeisB,EAAYjsB,EAAW,KAAK,KAAK,OACvDisB,GAAaA,IAAcr5H,EAAW,SAC/C,EAEA,SAAUgoJ,EAAWhoJ,EAAY,CAC/B,IAAIupJ,EAAWvB,EAAU,SAClB,OAAAuB,GAAYA,IAAavpJ,EAAW,QAAA,CAC5C,EACGspJ,GAAoB,CACtB,KAAM,UAAY,CAEhB,OAAO,KAAK,SAAS,OAAO,QAAA,EAAU,MAAM,CAC9C,EACA,IAAK,UAAY,CACf,IAAIx6G,EAAW,KAAK,SAChBx2C,EAAOw2C,EAAS,gBAAgB,EAAE,MAAM,EAE5C,OAAAx2C,EAAK,eAAe22I,GAAqBngG,CAAQ,CAAC,EAC3Cx2C,CAAA,CAEX,EACI6vJ,GAAe,CACjB,MAAOj5J,GAAMs6J,GAAa,CAAC,EAC3B,MAAOt6J,GAAMs6J,GAAa,CAAC,EAC3B,KAAM,SAAUC,EAAI36G,EAAU46G,EAAmBpiI,EAAO,CACtD,IAAIqiI,EAAWF,EAAK36G,EAAS,YAAY,CAAC46G,EAAkB,CAAC,EAAE,CAAC,EAAGA,EAAkB,CAAC,EAAE,CAAC,CAAC,EAAGpiI,CAAK,EAAIwnB,EAAS,YAAY,CAAC46G,EAAkB,CAAC,EAAE,CAAC,EAAGA,EAAkB,CAAC,EAAE,CAAC,CAAC,EAAGpiI,CAAK,EAChLsiI,EAAWH,EAAK36G,EAAS,YAAY,CAAC46G,EAAkB,CAAC,EAAE,CAAC,EAAGA,EAAkB,CAAC,EAAE,CAAC,CAAC,EAAGpiI,CAAK,EAAIwnB,EAAS,YAAY,CAAC46G,EAAkB,CAAC,EAAE,CAAC,EAAGA,EAAkB,CAAC,EAAE,CAAC,CAAC,EAAGpiI,CAAK,EAChLorD,EAAS,CAACo2E,GAAa,CAACa,EAAS,CAAC,EAAGC,EAAS,CAAC,CAAC,CAAC,EAAGd,GAAa,CAACa,EAAS,CAAC,EAAGC,EAAS,CAAC,CAAC,CAAC,CAAC,EACzF,MAAA,CACL,OAAAl3E,EACA,SAAUA,CACZ,CACF,EACA,QAAS,SAAU+2E,EAAI36G,EAAU46G,EAAmBpiI,EAAO,CACrD,IAAAuiI,EAAW,CAAC,CAAC,IAAU,IAAS,EAAG,CAAC,IAAU,IAAS,CAAC,EACxDn3E,EAAS7oF,EAAI6/J,EAAmB,SAAU/8H,EAAM,CAC9C,IAAAvvB,EAAIqsJ,EAAK36G,EAAS,YAAYniB,EAAMrF,CAAK,EAAIwnB,EAAS,YAAYniB,EAAMrF,CAAK,EACjF,OAAAuiI,EAAS,CAAC,EAAE,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAE,CAAC,EAAGzsJ,EAAE,CAAC,CAAC,EAC9CysJ,EAAS,CAAC,EAAE,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAE,CAAC,EAAGzsJ,EAAE,CAAC,CAAC,EAC9CysJ,EAAS,CAAC,EAAE,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAE,CAAC,EAAGzsJ,EAAE,CAAC,CAAC,EAC9CysJ,EAAS,CAAC,EAAE,CAAC,EAAI,KAAK,IAAIA,EAAS,CAAC,EAAE,CAAC,EAAGzsJ,EAAE,CAAC,CAAC,EACvCA,CAAA,CACR,EACM,MAAA,CACL,OAAAs1E,EACA,SAAAm3E,CACF,CAAA,CAEJ,EACA,SAASL,GAAYM,EAAeL,EAAI36G,EAAU46G,EAAmB,CAI/D,IAAAntG,EAAOzN,EAAS,QAAQ,CAAC,IAAK,GAAG,EAAEg7G,CAAa,CAAC,EACjDp3E,EAASo2E,GAAaj/J,EAAI,CAAC,EAAG,CAAC,EAAG,SAAUC,EAAG,CACjD,OAAO2/J,EAAKltG,EAAK,YAAYA,EAAK,aAAamtG,EAAkB5/J,CAAC,CAAC,EAAG,EAAI,EAAIyyD,EAAK,cAAcA,EAAK,YAAYmtG,EAAkB5/J,CAAC,CAAC,CAAC,CAAA,CACxI,CAAC,EACE+/J,EAAW,CAAC,EAChB,OAAAA,EAASC,CAAa,EAAIp3E,EAC1Bm3E,EAAS,EAAIC,CAAa,EAAI,CAAC,IAAK,GAAG,EAChC,CACL,OAAAp3E,EACA,SAAAm3E,CACF,CACF,CACA,IAAIzB,GAAgB,CAClB,MAAOl5J,GAAM66J,GAAmB,CAAC,EACjC,MAAO76J,GAAM66J,GAAmB,CAAC,EACjC,KAAM,SAAUr3E,EAAQs3E,EAAOC,EAAQ,CAC9B,MAAA,CAAC,CAACv3E,EAAO,CAAC,EAAE,CAAC,EAAIu3E,EAAO,CAAC,EAAID,EAAM,CAAC,EAAE,CAAC,EAAGt3E,EAAO,CAAC,EAAE,CAAC,EAAIu3E,EAAO,CAAC,EAAID,EAAM,CAAC,EAAE,CAAC,CAAC,EAAG,CAACt3E,EAAO,CAAC,EAAE,CAAC,EAAIu3E,EAAO,CAAC,EAAID,EAAM,CAAC,EAAE,CAAC,EAAGt3E,EAAO,CAAC,EAAE,CAAC,EAAIu3E,EAAO,CAAC,EAAID,EAAM,CAAC,EAAE,CAAC,CAAC,CAAC,CAC5K,EACA,QAAS,SAAUt3E,EAAQs3E,EAAOC,EAAQ,CACxC,OAAOpgK,EAAI6oF,EAAQ,SAAU/lD,EAAM3kB,EAAK,CAC/B,MAAA,CAAC2kB,EAAK,CAAC,EAAIs9H,EAAO,CAAC,EAAID,EAAMhiJ,CAAG,EAAE,CAAC,EAAG2kB,EAAK,CAAC,EAAIs9H,EAAO,CAAC,EAAID,EAAMhiJ,CAAG,EAAE,CAAC,CAAC,CAAA,CACjF,CAAA,CAEL,EACA,SAAS+hJ,GAAkBD,EAAep3E,EAAQs3E,EAAOC,EAAQ,CAC/D,MAAO,CAACv3E,EAAO,CAAC,EAAIu3E,EAAOH,CAAa,EAAIE,EAAM,CAAC,EAAGt3E,EAAO,CAAC,EAAIu3E,EAAOH,CAAa,EAAIE,EAAM,CAAC,CAAC,CACpG,CAIA,SAAS1B,GAAU4B,EAAcC,EAAgB,CAC3C,IAAAC,EAAWr8D,GAAQm8D,CAAY,EAC/BG,EAAat8D,GAAQo8D,CAAc,EACnCF,EAAS,CAACG,EAAS,CAAC,EAAIC,EAAW,CAAC,EAAGD,EAAS,CAAC,EAAIC,EAAW,CAAC,CAAC,EACtE,aAAMJ,EAAO,CAAC,CAAC,IAAMA,EAAO,CAAC,EAAI,GACjC,MAAMA,EAAO,CAAC,CAAC,IAAMA,EAAO,CAAC,EAAI,GAC1BA,CACT,CACA,SAASl8D,GAAQ87D,EAAU,CAClB,OAAAA,EAAW,CAACA,EAAS,CAAC,EAAE,CAAC,EAAIA,EAAS,CAAC,EAAE,CAAC,EAAGA,EAAS,CAAC,EAAE,CAAC,EAAIA,EAAS,CAAC,EAAE,CAAC,CAAC,EAAI,CAAC,IAAK,GAAG,CAClG,CChSA,IAAIt7J,GAAO8qB,EACPixI,GAAoB98H,GAAwB,mBAAmB,EAE/D+8H,GAA+B,SAAUnqJ,EAAQ,CACnDC,EAAUkqJ,EAAiBnqJ,CAAM,EACjC,SAASmqJ,GAAkB,CACzB,OAAOnqJ,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,IAC/D,CACE,OAAAmqJ,EAAgB,UAAU,OAAS,SAAUnJ,EAAc3yH,EAASmf,EAAKxf,EAAS,CAC3E,KAAK,mBACR,KAAK,iBAAmB,IAAI08G,GAAgBl9F,EAAI,MAAK,CAAE,EACvD,KAAK,iBAAiB,GAAG,QAASwyB,EAAY,KAAK,SAAU,IAAI,CAAC,EAAE,MAAO,GAE7EoqF,GAAoBpJ,EAAc3yH,EAAS,KAAML,EAASwf,CAAG,EAC7D68G,GAAoBrJ,EAAc3yH,CAAO,CAC1C,EACD87H,EAAgB,UAAU,QAAU,SAAU97H,EAASmf,EAAKt+C,EAAM,CAChEo7J,GAASp7J,CAAI,EAAE,KAAK,IAAI,CACzB,EACDi7J,EAAgB,UAAU,OAAS,SAAU97H,EAASmf,EAAK,CACzD,KAAK,kBAAoB,KAAK,iBAAiB,QAAS,CACzD,EACD28G,EAAgB,UAAU,QAAU,SAAU97H,EAASmf,EAAK,CAC1D,KAAK,kBAAoB,KAAK,iBAAiB,QAAS,CACzD,EACD28G,EAAgB,UAAU,SAAW,SAAUI,EAAY,CACzD,IAAIvd,EAAQud,EAAW,MACvB,GAAI,CAACA,EAAW,OAAS,CAACvd,EAAM,OAC9B,OAEF,IAAIqa,EAAW,CAAE,EACbh5H,EAAU,KAAK,QACnB,KAAK,iBAAiB,aAAa,CAAA,CAAE,EACrC,IAAIm8H,EAAqB,IAAI7C,GAAmB8C,GAAe,KAAK,KAAK,EAAGp8H,EAAS,CACnF,QAAS,CAAC,MAAM,CACtB,CAAK,EACDm8H,EAAmB,kBAAkBxd,EAAO3+G,EAAS,SAAU2mD,EAAM8yE,EAAYp5G,EAAU,CACzF,GAAIA,EAAS,OAAS,cAGtB,KAAIiiG,EAAY37D,EAAK,UACjB27D,IAAc,QAChB+Z,EAAS,IAAKh8G,EAAUo5G,EAAW,CAAC,CAAC,EACrC4C,EAAS,IAAKh8G,EAAUo5G,EAAW,CAAC,CAAC,GAErC4C,EAAS,CACP,MAAO,IACP,MAAO,GACjB,EAAU/Z,CAAS,EAAGjiG,EAAUo5G,CAAU,EAE1C,CAAK,EACD6C,GAAat8H,EAASg5H,CAAQ,EAC9B,KAAK,oBAAoBA,CAAQ,EACjC,SAASqD,EAASxxF,EAASxqB,EAAU0uE,EAAQ,CAC3C,IAAIjhE,EAAOzN,EAAS,QAAQwqB,CAAO,EAC/Bu0C,EAAYtxD,EAAK,MACjBs+F,EAAgBmQ,EAAa1xF,EAASu0C,EAAWp/E,CAAO,EAExD0wH,EAAatE,EAAc,4BAA4BhtC,CAAS,EAAE,cAAe,GACjFsxC,EAAW,cAAgB,MAAQA,EAAW,cAAgB,QAChE3hC,EAASisB,GAAW,EAAGjsB,EAAO,MAAO,EAAEjhE,EAAK,MAAM,UAAS,EAAI,EAAG4iG,EAAW,aAAcA,EAAW,YAAY,GAEpHtE,IAAkB4M,EAAS5M,EAAc,EAAE,EAAI,CAC7C,WAAYA,EAAc,GAC1B,WAAYr9B,EAAO,CAAC,EACpB,SAAUA,EAAO,CAAC,CAC1B,EACA,CACI,SAASwtC,EAAa1xF,EAASu0C,EAAWp/E,EAAS,CACjD,IAAI48D,EACJ,OAAA58D,EAAQ,cAAc,CACpB,SAAU,WACV,QAAS,QACV,EAAE,SAAUw8H,EAAS,CACpB,IAAIC,EAAMD,EAAQ,aAAa3xF,EAASu0C,EAAU,cAAc,EAChEq9C,IAAQ7/D,EAAQ4/D,EACxB,CAAO,EACM5/D,CACb,CACG,EAEDk/D,EAAgB,UAAU,oBAAsB,SAAU9C,EAAU,CAClE,IAAI0D,EAAQ,CAAE,EAEd58J,GAAKk5J,EAAU,SAAUppD,EAAWmpD,EAAY,CAC9C2D,EAAM,KAAK7gD,EAAajM,CAAS,CAAC,CACxC,CAAK,EACD8sD,EAAM,QAAU,KAAK,IAAI,eAAe,CACtC,KAAM,WACN,KAAM,KAAK,IACX,MAAOA,CACb,CAAK,CACF,EACDZ,EAAgB,iBAAmB,SAAU97H,EAAS,CACpD,IAAIunC,EAAgB,CAClB,KAAM,GACN,WAAY,SAEZ,KAAM,CACJ,KAAM,wDACN,KAAM,2DACP,EAED,MAAOvnC,EAAQ,iBAAiB,IAAI,CAAC,UAAW,WAAY,OAAO,CAAC,EACpE,WAAY,CACV,YAAa,EACb,MAAO,uBACf,CACK,EACD,OAAOunC,CACR,EACMu0F,CACT,EAAErK,EAAc,EACZwK,GAAW,CACb,KAAM,UAAY,CAChB,IAAIU,EAAa,CAAC,KAAK,cACvB,KAAK,IAAI,eAAe,CACtB,KAAM,mBACN,IAAK,iBACL,qBAAsBA,CAC5B,CAAK,CACF,EACD,KAAM,UAAY,CAChB,KAAK,oBAAoBC,GAAY,KAAK,OAAO,CAAC,CACtD,CACA,EACA,SAASR,GAAeS,EAAgB,CACtC,IAAI96C,EAAU,CACZ,WAAY86C,EAAe,IAAI,aAAc,EAAI,EACjD,WAAYA,EAAe,IAAI,aAAc,EAAI,EACjD,QAASA,EAAe,IAAI,UAAW,EAAI,EAC3C,QAASA,EAAe,IAAI,UAAW,EAAI,CAC5C,EAKD,OAAI96C,EAAQ,YAAc,MAAQA,EAAQ,SAAW,OACnDA,EAAQ,WAAa,OAEnBA,EAAQ,YAAc,MAAQA,EAAQ,SAAW,OACnDA,EAAQ,WAAa,OAEhBA,CACT,CACA,SAASi6C,GAAoBrJ,EAAc3yH,EAAS,CAClD2yH,EAAa,cAAc,OAAQmK,GAAc98H,CAAO,EAAI,EAAI,WAAa,QAAQ,CACvF,CACA,SAAS+7H,GAAoBpJ,EAAc3yH,EAASwf,EAAM7f,EAASwf,EAAK,CACtE,IAAI49G,EAAav9G,EAAK,cAClB7f,GAAWA,EAAQ,OAAS,qBAC9Bo9H,EAAap9H,EAAQ,MAAQ,iBAAmBA,EAAQ,qBAAuB,IAEjF6f,EAAK,cAAgBu9G,EACrBpK,EAAa,cAAc,OAAQoK,EAAa,WAAa,QAAQ,EACrE,IAAIZ,EAAqB,IAAI7C,GAAmB8C,GAAezJ,CAAY,EAAG3yH,EAAS,CACrF,QAAS,CAAC,MAAM,CACpB,CAAG,EACGq+G,EAAS8d,EAAmB,cAAch9G,EAAK,SAAU5tC,EAAY,CACvE,OAAOA,EAAW,eAAiB,CAACA,EAAW,cAAgB,QAAU,CAACA,EAAW,eAAiBA,EAAW,cAAgB,QAAU,MAC/I,CAAG,EACDiuC,EAAK,iBAAiB,UAAU6+F,CAAM,EAAE,YAAY0e,GAAc1e,EAAO,OAAS,CAChF,UAAW,OACX,WAAYsU,EAAa,SAAS,YAAY,EAAE,aAAY,CAC7D,EAAG,EAAK,CACX,CACAlnF,GAA8B,WAAY,SAAUzrC,EAAS,CAC3D,IAAIqyH,EAAeryH,EAAQ,aAAa,UAAW,CAAC,EAChDg9H,EAAsB,CAAC,UAAW,UAAU,EAChD,GAAI,CAAC3K,GAAgBA,EAAa,IAAI2K,CAAmB,GAAK,KAC5D,OAEF,IAAIH,EAAiBxK,EAAa,SAAS2K,CAAmB,EAC1DC,EAAY,CAAE,EACdt8H,EAASy7H,GAAeS,CAAc,EACtCK,EAAen9H,GAAYC,EAASW,CAAM,EAC9C7gC,GAAKo9J,EAAa,YAAa,SAAU99C,EAAW,CAClD,OAAO+9C,EAAqB/9C,EAAW,QAAS,YAAY,CAChE,CAAG,EACDt/G,GAAKo9J,EAAa,YAAa,SAAU99C,EAAW,CAClD,OAAO+9C,EAAqB/9C,EAAW,QAAS,YAAY,CAChE,CAAG,EACD,SAAS+9C,EAAqB/9C,EAAWyvC,EAAcuO,EAAmB,CACxE,IAAIj+C,EAAYC,EAAU,eACtBi+C,EAAS,CACX,KAAM,SACN,aAAc,GAEd,WAAYR,EAAe,IAAI,aAAc,EAAI,GAAK,SAEtD,GAAIhB,GAAoBhN,EAAe1vC,CACxC,EACDk+C,EAAOD,CAAiB,EAAIj+C,EAC5B89C,EAAU,KAAKI,CAAM,CACzB,CACE,OAAOJ,CACT,CAAC,ECnMM,SAASv1B,GAAQC,EAAW,CACjCA,EAAU,uBAAuBkqB,EAAY,EAC7ClqB,EAAU,sBAAsByqB,EAAW,EAC3CT,GAAgB,cAAe2C,EAAW,EAC1C3C,GAAgB,YAAa0D,EAAS,EACtC1D,GAAgB,WAAY8F,EAAQ,EACpC9F,GAAgB,WAAY2L,EAAQ,EACpC3L,GAAgB,UAAW4L,EAAO,EAClCnrC,GAAIorC,EAAqB,CAC3B,CClBA,IAAIC,GAA4B,SAAU9rJ,EAAQ,CAChDC,EAAU6rJ,EAAc9rJ,CAAM,EAC9B,SAAS8rJ,GAAe,CACtB,IAAI5rJ,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO4rJ,EAAa,KACnB5rJ,CACX,CACE,OAAA4rJ,EAAa,KAAO,UACpBA,EAAa,aAAe,CAAC,aAAa,EAC1CA,EAAa,cAAgB,CAE3B,EAAG,GACH,KAAM,GAEN,YAAa,GAGb,QAAS,OAET,UAAW,kBACX,kBAAmB,GACnB,YAAa,SACb,WAAY,OAIZ,QAAS,KACT,UAAW,EACX,UAAW,IAEX,mBAAoB,GACpB,UAAW,GACX,gBAAiB,OAEjB,WAAY,GACZ,YAAa,oBACb,cAAe,EACf,cAAe,EAEf,aAAc,EAEd,YAAa,EAIb,QAAS,KAET,aAAc,GAEd,YAAa,CAGX,KAAM,OAKN,KAAM,OACN,UAAW,OACX,wBAAyB,IACzB,sBAAuB,iBACvB,WAAY,CACV,MAAO,OACP,MAAO,EACP,KAAM,SAEN,UAAW,CAAA,CACnB,CAGK,EACD,UAAW,CACT,MAAO,OACP,SAAU,EAChB,CACG,EACMA,CACT,EAAE92F,EAAc,EC5ET,SAAS+2F,GAAqBC,EAAc,CACjD,IAAIC,EAAgBD,EAAa,IAAI,SAAS,EAC9C,OAAOC,GAAiB,KAAO,CAAC,CAACA,EAE/BD,EAAa,IAAI,YAAY,IAAM,UACvC,CACA,SAASE,GAAUC,EAAY,CAC7B,GAAK3jK,EAAI,cAIT,QADIQ,EAAQ,SAAS,gBAAgB,MAC5BU,EAAI,EAAG0C,EAAM+/J,EAAW,OAAQziK,EAAI0C,EAAK1C,IAChD,GAAIyiK,EAAWziK,CAAC,IAAKV,EACnB,OAAOmjK,EAAWziK,CAAC,EAGzB,CACO,IAAI0iK,GAAmBF,GAAU,CAAC,YAAa,kBAAmB,aAAc,eAAgB,aAAa,CAAC,EAC1GG,GAAoBH,GAAU,CAAC,mBAAoB,aAAc,cAAe,gBAAiB,cAAc,CAAC,EACpH,SAASI,GAAkBC,EAAaC,EAAW,CACxD,GAAI,CAACD,EACH,OAAOC,EAETA,EAAY78F,GAAY68F,EAAW,EAAI,EACvC,IAAI5kJ,EAAM2kJ,EAAY,QAAQC,CAAS,EACvC,OAAAD,EAAc3kJ,IAAQ,GAAK4kJ,EAAY,IAAMD,EAAY,MAAM,EAAG3kJ,CAAG,EAAI,IAAM4kJ,EACxED,EAAY,YAAa,CAClC,CACO,SAASE,GAAiB11J,EAAI/N,EAAO,CAC1C,IAAI0O,EAAMX,EAAG,cAAgB,SAAS,aAAe,SAAS,YAAY,iBAAiBA,CAAE,EAC7F,OAAOW,EAAcA,EAAI1O,CAAK,EAAU,IAC1C,CC1BA,IAAI0jK,GAAwBJ,GAAkBD,GAAmB,YAAY,EACzEM,GAAuBL,GAAkBF,GAAkB,WAAW,EAEtEQ,GAAW,0FAA4FpkK,EAAI,qBAAuB,yBAA2B,IACjK,SAASqkK,GAAUvyJ,EAAK,CACtB,OAAAA,EAAMA,IAAQ,OAAS,QAAUA,IAAQ,QAAU,OAASA,IAAQ,MAAQ,SAAW,MAChFA,CACT,CACA,SAASwyJ,GAAcd,EAAchhF,EAAa+hF,EAAe,CAC/D,GAAI,CAACh+J,EAASg+J,CAAa,GAAKA,IAAkB,SAChD,MAAO,GAET,IAAI9tI,EAAkB+sI,EAAa,IAAI,iBAAiB,EACpDgB,EAAchB,EAAa,IAAI,aAAa,EAChDhhF,EAAcpZ,GAAqBoZ,CAAW,EAC9C,IAAIiiF,EAAWJ,GAAUE,CAAa,EAClChvB,EAAY,KAAK,IAAI,KAAK,MAAMivB,CAAW,EAAI,IAAK,CAAC,EACrDE,EAAgB,GAChBC,EAAiBR,GAAuB,IACxCS,EACA//J,EAAQ,CAAC,OAAQ,OAAO,EAAG4/J,CAAQ,EAAI,IACzCC,GAAiB,UACjBC,GAAkB,4BAA8BC,EAAYH,IAAa,OAAS,KAAO,KAAO,SAEhGC,GAAiB,WACjBC,GAAkB,4BAA8BC,EAAYH,IAAa,MAAQ,IAAM,IAAM,QAE/F,IAAII,EAAeD,EAAY,KAAK,GAAK,IACrCE,EAAUvvB,EAAYivB,EACtBO,EAAYD,EAAU,KAAK,IAAI,KAAK,IAAID,CAAY,CAAC,EAAIC,EAAU,KAAK,IAAI,KAAK,IAAID,CAAY,CAAC,EAClGrvB,EAAc,KAAK,QAAQuvB,EAAY,KAAK,MAAQP,GAAe,EAAI,KAAK,MAAQA,GAAeO,EAAYD,GAAW,GAAK,GAAG,EAAI,IAC1IJ,GAAiB,IAAMD,EAAW,KAAOjvB,EAAc,KACvD,IAAIwvB,EAAcxiF,EAAc,UAAYgiF,EAAc,MACtDS,EAAW,CAAC,2BAA6B1vB,EAAY,aAAeA,EAAY,iBAAkBmvB,EAAgB,IAAMC,EAAiB,IAAK,iBAAmBK,EAAa,gBAAkBA,EAAa,oBAAsBvuI,EAAkB,GAAG,EAC5P,MAAO,eAAkBwuI,EAAS,KAAK,EAAE,EAAI,UAC/C,CACA,SAASC,GAAmB13I,EAAU23I,EAAU,CAC9C,IAAIC,EAAkB,8BAClBC,EAAmB,IAAM73I,EAAW,EAAI,KAAO43I,EAC/CE,EAAiB,UAAYD,EAAmB,cAAgBA,EACpE,OAAKF,IACHE,EAAmB,IAAM73I,EAAW,KAAO43I,EAC3CE,GAAkBtlK,EAAI,mBAAqB,IAAMmkK,GAAuBkB,EAAmB,QAAUA,EAAmB,OAASA,GAE5HnB,GAAwB,IAAMoB,CACvC,CACA,SAASC,GAAkB/7J,EAAGC,EAAG+7J,EAAU,CAGzC,IAAIzjJ,EAAKvY,EAAE,QAAQ,CAAC,EAAI,KACpBwY,EAAKvY,EAAE,QAAQ,CAAC,EAAI,KAExB,GAAI,CAACzJ,EAAI,mBACP,OAAOwlK,EAAW,OAASxjJ,EAAK,SAAWD,EAAK,IAAM,CAAC,CAAC,MAAOC,CAAE,EAAG,CAAC,OAAQD,CAAE,CAAC,EAGlF,IAAI0jJ,EAAOzlK,EAAI,qBACXqT,EAAY,aAAeoyJ,EAAO,KAAO,IAAM,IAAM1jJ,EAAK,IAAMC,GAAMyjJ,EAAO,KAAO,IAAM,IAC9F,OAAOD,EAAW,gBAAkBrB,GAAuB,IAAM9wJ,EAAY,IAAM,CAAC,CAAC,MAAO,CAAC,EAAG,CAAC,OAAQ,CAAC,EAAG,CAACuwJ,GAAkBvwJ,CAAS,CAAC,CAC5I,CAMA,SAASqyJ,GAAa5oG,EAAgB,CACpC,IAAI6oG,EAAU,CAAE,EACZ9jK,EAAWi7D,EAAe,IAAI,UAAU,EACxC71C,EAAQ61C,EAAe,aAAc,EACzC71C,GAAS0+I,EAAQ,KAAK,SAAW1+I,CAAK,EACtC0+I,EAAQ,KAAK,QAAU7oG,EAAe,QAAO,CAAE,EAE/C,IAAI9vB,EAAahmC,EAAU81D,EAAe,IAAI,YAAY,EAAG,KAAK,MAAMj7D,EAAW,EAAI,CAAC,CAAC,EACzFA,GAAY8jK,EAAQ,KAAK,eAAiB34H,EAAa,IAAI,EAC3D,IAAI44H,EAAc9oG,EAAe,IAAI,iBAAiB,EAClD+oG,EAAa/oG,EAAe,IAAI,gBAAgB,GAAK,EACrD9qB,EAAgB8qB,EAAe,IAAI,mBAAmB,GAAK,EAC3D7qB,EAAgB6qB,EAAe,IAAI,mBAAmB,GAAK,EAC/D,OAAA8oG,GAAeC,GAAcF,EAAQ,KAAK,eAAiB3zH,EAAgB,MAAQC,EAAgB,MAAQ4zH,EAAa,MAAQD,CAAW,EAC3IjgK,EAAK,CAAC,aAAc,OAAO,EAAG,SAAU0L,EAAM,CAC5C,IAAI9O,EAAMu6D,EAAe,IAAIzrD,CAAI,EACjC9O,GAAOojK,EAAQ,KAAK,QAAUt0J,EAAO,IAAM9O,CAAG,CAClD,CAAG,EACMojK,EAAQ,KAAK,GAAG,CACzB,CACA,SAASG,GAAgBtC,EAAcuC,EAAkBZ,EAAU,CACjE,IAAIQ,EAAU,CAAE,EACZK,EAAqBxC,EAAa,IAAI,oBAAoB,EAC1D/sI,EAAkB+sI,EAAa,IAAI,iBAAiB,EACpDqC,EAAarC,EAAa,IAAI,YAAY,EAC1CoC,EAAcpC,EAAa,IAAI,aAAa,EAC5CxxH,EAAgBwxH,EAAa,IAAI,eAAe,EAChDvxH,EAAgBuxH,EAAa,IAAI,eAAe,EAChD1mG,EAAiB0mG,EAAa,SAAS,WAAW,EAClD32H,EAAUynD,GAA2BkvE,EAAc,MAAM,EACzDyC,EAAYj0H,EAAgB,MAAQC,EAAgB,MAAQ4zH,EAAa,MAAQD,EACrF,OAAAD,EAAQ,KAAK,cAAgBM,CAAS,EAEtCF,GAAoBC,GAAsBL,EAAQ,KAAKT,GAAmBc,EAAoBb,CAAQ,CAAC,EACnG1uI,GACFkvI,EAAQ,KAAK,oBAAsBlvI,CAAe,EAGpD9wB,EAAK,CAAC,QAAS,QAAS,QAAQ,EAAG,SAAU0L,EAAM,CACjD,IAAI60J,EAAa,UAAY70J,EACzB80J,EAAYh/F,GAAY++F,CAAU,EAClC3jK,EAAMihK,EAAa,IAAI2C,CAAS,EACpC5jK,GAAO,MAAQojK,EAAQ,KAAKO,EAAa,IAAM3jK,GAAO8O,IAAS,QAAU,GAAK,KAAK,CACvF,CAAG,EAEDs0J,EAAQ,KAAKD,GAAa5oG,CAAc,CAAC,EAErCjwB,GAAW,MACb84H,EAAQ,KAAK,WAAat+J,GAAkBwlC,CAAO,EAAE,KAAK,KAAK,EAAI,IAAI,EAElE84H,EAAQ,KAAK,GAAG,EAAI,GAC7B,CAEA,SAASS,GAAex8J,EAAKmvB,EAAImR,EAAWm8H,EAAKC,EAAK,CACpD,IAAIC,EAAYxtI,GAAMA,EAAG,QACzB,GAAImR,EAAW,CACb,IAAIs8H,EAAiBD,GAAaA,EAAU,gBAAiB,EACzDC,GAEFv4J,GAAoBrE,EAAK48J,EAAgBt8H,EAAWm8H,EAAKC,CAAG,CAElE,KAAS,CACL18J,EAAI,CAAC,EAAIy8J,EACTz8J,EAAI,CAAC,EAAI08J,EAIT,IAAIG,EAAqBF,GAAaA,EAAU,sBAAuB,EACnEE,IACF78J,EAAI,CAAC,GAAK68J,EAAmB,WAC7B78J,EAAI,CAAC,GAAK68J,EAAmB,UAEnC,CACE78J,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAImvB,EAAG,SAAU,EAC/BnvB,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAImvB,EAAG,UAAW,CAClC,CACA,IAAI2tI,GAAkC,UAAY,CAChD,SAASA,EAAmB1hH,EAAK1zC,EAAK,CAOpC,GANA,KAAK,MAAQ,GACb,KAAK,YAAc,CAAC,EAAG,EAAG,EAAG,CAAC,EAC9B,KAAK,WAAa,GAClB,KAAK,mBAAqB,GAC1B,KAAK,WAAa,GAClB,KAAK,UAAY,GACbtR,EAAI,IACN,OAAO,KAET,IAAIuO,EAAK,SAAS,cAAc,KAAK,EAErCA,EAAG,cAAgB,GACnB,KAAK,GAAKA,EACV,IAAIwqB,EAAK,KAAK,IAAMisB,EAAI,MAAO,EAC3B2hH,EAAWr1J,EAAI,SACf44B,EAAYy8H,IAAapgK,EAASogK,CAAQ,EAAI,SAAS,cAAcA,CAAQ,EAAI7iK,GAAM6iK,CAAQ,EAAIA,EAAWtgK,EAAWsgK,CAAQ,GAAKA,EAAS3hH,EAAI,OAAM,CAAE,GAC/JohH,GAAe,KAAK,YAAartI,EAAImR,EAAW8a,EAAI,SAAQ,EAAK,EAAGA,EAAI,UAAS,EAAK,CAAC,GACtF9a,GAAa8a,EAAI,OAAM,GAAI,YAAYz2C,CAAE,EAC1C,KAAK,KAAOy2C,EACZ,KAAK,WAAa9a,EAIlB,IAAInc,EAAO,KACXxf,EAAG,aAAe,UAAY,CAExBwf,EAAK,aACP,aAAaA,EAAK,YAAY,EAC9BA,EAAK,MAAQ,IAEfA,EAAK,WAAa,EACnB,EACDxf,EAAG,YAAc,SAAUvD,EAAG,CAE5B,GADAA,EAAIA,GAAK,OAAO,MACZ,CAAC+iB,EAAK,WAAY,CAOpB,IAAIhjB,EAAUguB,EAAG,QACbytI,EAAiBztI,EAAG,QAAQ,gBAAiB,EACjDtoB,GAAe+1J,EAAgBx7J,EAAG,EAAI,EACtCD,EAAQ,SAAS,YAAaC,CAAC,CACvC,CACK,EACDuD,EAAG,aAAe,UAAY,CAE5Bwf,EAAK,WAAa,GACdA,EAAK,YACHA,EAAK,OACPA,EAAK,UAAUA,EAAK,UAAU,CAGnC,CACL,CAIE,OAAA24I,EAAmB,UAAU,OAAS,SAAUlD,EAAc,CAG5D,GAAI,CAAC,KAAK,WAAY,CACpB,IAAIt5H,EAAY,KAAK,KAAK,OAAQ,EAC9BuS,EAAWwnH,GAAiB/5H,EAAW,UAAU,EACjDhhC,EAAWghC,EAAU,MACrBhhC,EAAS,WAAa,YAAcuzC,IAAa,aACnDvzC,EAAS,SAAW,WAE5B,CAEI,IAAI09J,EAAoBpD,EAAa,IAAI,mBAAmB,EAC5DoD,GAAqB,KAAK,eAAgB,EAE1C,KAAK,mBAAqBA,EAE1B,KAAK,GAAG,UAAYpD,EAAa,IAAI,WAAW,GAAK,EAItD,EACDkD,EAAmB,UAAU,KAAO,SAAUlD,EAAcqD,EAAgB,CAC1E,aAAa,KAAK,YAAY,EAC9B,aAAa,KAAK,gBAAgB,EAClC,IAAIt4J,EAAK,KAAK,GACV/N,EAAQ+N,EAAG,MACXu4J,EAAa,KAAK,YACjBv4J,EAAG,UAGN/N,EAAM,QAAU4jK,GAAW0B,GAAgBtC,EAAc,CAAC,KAAK,WAAY,KAAK,SAAS,EAEvF+B,GAAkBuB,EAAW,CAAC,EAAGA,EAAW,CAAC,EAAG,EAAI,GAAK,gBAAkB19F,GAAqBy9F,CAAc,EAAI,MAAQrD,EAAa,IAAI,cAAc,GAAK,KAM7J,oBAAsB,KAAK,WAAa,OAAS,SAVpDhjK,EAAM,QAAU,OAYlB,KAAK,MAAQ,GACb,KAAK,WAAa,GAClB,KAAK,UAAY,EAClB,EACDkmK,EAAmB,UAAU,WAAa,SAAUK,EAASp4J,EAAS60J,EAAchhF,EAAa+hF,EAAe,CAC9G,IAAIh2J,EAAK,KAAK,GACd,GAAIw4J,GAAW,KAAM,CACnBx4J,EAAG,UAAY,GACf,MACN,CACI,IAAIy4J,EAAQ,GAIZ,GAHIzgK,EAASg+J,CAAa,GAAKf,EAAa,IAAI,SAAS,IAAM,QAAU,CAACD,GAAqBC,CAAY,IACzGwD,EAAQ1C,GAAcd,EAAchhF,EAAa+hF,CAAa,GAE5Dh+J,EAASwgK,CAAO,EAClBx4J,EAAG,UAAYw4J,EAAUC,UAChBD,EAAS,CAElBx4J,EAAG,UAAY,GACVjK,EAAQyiK,CAAO,IAClBA,EAAU,CAACA,CAAO,GAEpB,QAAS7lK,EAAI,EAAGA,EAAI6lK,EAAQ,OAAQ7lK,IAC9B4C,GAAMijK,EAAQ7lK,CAAC,CAAC,GAAK6lK,EAAQ7lK,CAAC,EAAE,aAAeqN,GACjDA,EAAG,YAAYw4J,EAAQ7lK,CAAC,CAAC,EAI7B,GAAI8lK,GAASz4J,EAAG,WAAW,OAAQ,CAGjC,IAAI04J,EAAU,SAAS,cAAc,KAAK,EAC1CA,EAAQ,UAAYD,EACpBz4J,EAAG,YAAY04J,CAAO,CAC9B,CACA,CACG,EACDP,EAAmB,UAAU,aAAe,SAAUQ,EAAW,CAC/D,KAAK,WAAaA,CACnB,EACDR,EAAmB,UAAU,QAAU,UAAY,CACjD,IAAIn4J,EAAK,KAAK,GACd,OAAOA,EAAK,CAACA,EAAG,YAAaA,EAAG,YAAY,EAAI,CAAC,EAAG,CAAC,CACtD,EACDm4J,EAAmB,UAAU,OAAS,SAAUL,EAAKC,EAAK,CACxD,GAAK,KAAK,GAGV,KAAIQ,EAAa,KAAK,YAEtB,GADAV,GAAeU,EAAY,KAAK,IAAK,KAAK,WAAYT,EAAKC,CAAG,EAC1DQ,EAAW,CAAC,GAAK,MAAQA,EAAW,CAAC,GAAK,KAAM,CAClD,IAAIK,EAAU,KAAK,GAAG,MAClBC,EAAa7B,GAAkBuB,EAAW,CAAC,EAAGA,EAAW,CAAC,CAAC,EAC/DnhK,EAAKyhK,EAAY,SAAU3zI,EAAW,CACpC0zI,EAAQ1zI,EAAU,CAAC,CAAC,EAAIA,EAAU,CAAC,CAC3C,CAAO,CACP,EACG,EAKDizI,EAAmB,UAAU,eAAiB,UAAY,CAExD,IAAIW,EAAS,KAAK,YAAY,CAAC,EAE3BC,EAAS,KAAK,YAAY,CAAC,EAC/B,KAAK,OAAOD,EAAS,KAAK,IAAI,SAAU,EAAEC,EAAS,KAAK,IAAI,UAAS,CAAE,CACxE,EACDZ,EAAmB,UAAU,KAAO,UAAY,CAC9C,IAAIhvJ,EAAQ,KACRlX,EAAQ,KAAK,GAAG,MACpBA,EAAM,WAAa,SACnBA,EAAM,QAAU,IAChBR,EAAI,uBAAyBQ,EAAM,WAAa,IAChD,KAAK,MAAQ,GACb,KAAK,iBAAmB,WAAW,UAAY,CAC7C,OAAOkX,EAAM,UAAY,EAC1B,EAAE,GAAG,CACP,EACDgvJ,EAAmB,UAAU,UAAY,SAAU77I,EAAM,CACnD,KAAK,OAAS,EAAE,KAAK,YAAc,KAAK,aAAe,CAAC,KAAK,qBAC3DA,GACF,KAAK,WAAaA,EAElB,KAAK,MAAQ,GACb,KAAK,aAAe,WAAWzkB,EAAK,KAAK,KAAM,IAAI,EAAGykB,CAAI,GAE1D,KAAK,KAAM,EAGhB,EACD67I,EAAmB,UAAU,OAAS,UAAY,CAChD,OAAO,KAAK,KACb,EACDA,EAAmB,UAAU,QAAU,UAAY,CACjD,aAAa,KAAK,YAAY,EAC9B,aAAa,KAAK,gBAAgB,EAClC,IAAIa,EAAa,KAAK,GAAG,WACzBA,GAAcA,EAAW,YAAY,KAAK,EAAE,EAC5C,KAAK,GAAK,KAAK,WAAa,IAC7B,EACMb,CACT,EAAG,EC/VCc,GAAkC,UAAY,CAChD,SAASA,EAAmBxiH,EAAK,CAC/B,KAAK,MAAQ,GACb,KAAK,YAAc,CAAC,EAAG,EAAG,EAAG,CAAC,EAC9B,KAAK,mBAAqB,GAC1B,KAAK,WAAa,GACb,KAAA,IAAMA,EAAI,MAAM,EACNohH,GAAA,KAAK,YAAa,KAAK,IAAKphH,EAAI,SAAS,EAAI,EAAGA,EAAI,UAAU,EAAI,CAAC,CAAA,CAKpFwiH,OAAAA,EAAmB,UAAU,OAAS,SAAUhE,EAAc,CACxD,IAAAoD,EAAoBpD,EAAa,IAAI,mBAAmB,EAC5DoD,GAAqB,KAAK,eAAe,EAEzC,KAAK,mBAAqBA,CAC5B,EACAY,EAAmB,UAAU,KAAO,UAAY,CAC1C,KAAK,cACP,aAAa,KAAK,YAAY,EAEhC,KAAK,GAAG,KAAK,EACb,KAAK,MAAQ,EACf,EAIAA,EAAmB,UAAU,WAAa,SAAUT,EAASzzE,EAAoBkwE,EAAchhF,EAAa+hF,EAAe,CACzH,IAAI7sJ,EAAQ,KACR4xD,EAAgBy9F,CAAO,GACdtlI,GAA+G,EAAE,EAE1H,KAAK,IACF,KAAA,IAAI,OAAO,KAAK,EAAE,EAErB,IAAAq7B,EAAiB0mG,EAAa,SAAS,WAAW,EACjD,KAAA,GAAK,IAAIpmH,GAAO,CACnB,MAAO,CACL,KAAMk2C,EAAmB,eACzB,KAAMyzE,EACN,WAAY,GACZ,YAAa,EACb,YAAAvkF,EACA,gBAAiB1lB,EAAe,IAAI,iBAAiB,EACrD,KAAM0mG,EAAa,IAAI,CAAC,YAAa,OAAO,CAAC,EAC7C,QAASlvE,GAA2BkvE,EAAc,UAAU,EAC5D,cAAe,MACf,MAAO,MACT,EACA,EAAGA,EAAa,IAAI,GAAG,CAAA,CACxB,EACM/yI,EAAK,CAAC,kBAAmB,eAAgB,cAAe,aAAc,gBAAiB,eAAe,EAAG,SAAU7F,EAAU,CAClIlT,EAAM,GAAG,MAAMkT,CAAQ,EAAI44I,EAAa,IAAI54I,CAAQ,CAAA,CACrD,EACD6F,EAAY,CAAC,iBAAkB,oBAAqB,mBAAmB,EAAG,SAAU7F,EAAU,CAC5FlT,EAAM,GAAG,MAAMkT,CAAQ,EAAIkyC,EAAe,IAAIlyC,CAAQ,GAAK,CAAA,CAC5D,EACI,KAAA,IAAI,IAAI,KAAK,EAAE,EACpB,IAAImD,EAAO,KACN,KAAA,GAAG,GAAG,YAAa,UAAY,CAE9BA,EAAK,aACP,aAAaA,EAAK,YAAY,EAC9BA,EAAK,MAAQ,IAEfA,EAAK,WAAa,EAAA,CACnB,EACI,KAAA,GAAG,GAAG,WAAY,UAAY,CAC7BA,EAAK,YACHA,EAAK,OACFA,EAAA,UAAUA,EAAK,UAAU,EAGlCA,EAAK,WAAa,EAAA,CACnB,CACH,EACAy5I,EAAmB,UAAU,aAAe,SAAUN,EAAW,CAC/D,KAAK,WAAaA,CACpB,EACAM,EAAmB,UAAU,QAAU,UAAY,CACjD,IAAIj5J,EAAK,KAAK,GACVk5J,EAAW,KAAK,GAAG,gBAAgB,EAGnCC,EAAkBC,GAAoBp5J,EAAG,KAAK,EAClD,MAAO,CAACk5J,EAAS,MAAQC,EAAgB,KAAOA,EAAgB,MAAOD,EAAS,OAASC,EAAgB,IAAMA,EAAgB,MAAM,CACvI,EACAF,EAAmB,UAAU,OAAS,SAAUh+J,EAAGC,EAAG,CACpD,IAAI8E,EAAK,KAAK,GACd,GAAIA,EAAI,CACN,IAAIu4J,EAAa,KAAK,YACtBV,GAAeU,EAAY,KAAK,IAAKt9J,EAAGC,CAAC,EACzCD,EAAIs9J,EAAW,CAAC,EAChBr9J,EAAIq9J,EAAW,CAAC,EAChB,IAAItmK,EAAQ+N,EAAG,MACXi2J,EAAcoD,GAAapnK,EAAM,aAAe,CAAC,EACjDknK,EAAkBC,GAAoBnnK,CAAK,EAE5C+N,EAAA,EAAI/E,EAAIg7J,EAAckD,EAAgB,KACtCn5J,EAAA,EAAI9E,EAAI+6J,EAAckD,EAAgB,IACzCn5J,EAAG,WAAW,CAAA,CAElB,EAKAi5J,EAAmB,UAAU,eAAiB,UAAY,CAEpD,IAAAH,EAAS,KAAK,YAAY,CAAC,EAE3BC,EAAS,KAAK,YAAY,CAAC,EAC1B,KAAA,OAAOD,EAAS,KAAK,IAAI,WAAYC,EAAS,KAAK,IAAI,UAAA,CAAW,CACzE,EACAE,EAAmB,UAAU,KAAO,UAAY,CAC1C,KAAK,IACP,KAAK,GAAG,KAAK,EAEf,KAAK,MAAQ,EACf,EACAA,EAAmB,UAAU,UAAY,SAAU38I,EAAM,CACnD,KAAK,OAAS,EAAE,KAAK,YAAc,KAAK,aAAe,CAAC,KAAK,qBAC3DA,GACF,KAAK,WAAaA,EAElB,KAAK,MAAQ,GACR,KAAA,aAAe,WAAW2sD,EAAY,KAAK,KAAM,IAAI,EAAG3sD,CAAI,GAEjE,KAAK,KAAK,EAGhB,EACA28I,EAAmB,UAAU,OAAS,UAAY,CAChD,OAAO,KAAK,KACd,EACAA,EAAmB,UAAU,QAAU,UAAY,CAC5C,KAAA,IAAI,OAAO,KAAK,EAAE,CACzB,EACOA,CACP,EAAA,EACF,SAASI,GAAarlK,EAAK,CAClB,OAAA,KAAK,IAAI,EAAGA,CAAG,CACxB,CACA,SAASolK,GAAoBnnK,EAAO,CAClC,IAAIqlK,EAAa+B,GAAapnK,EAAM,YAAc,CAAC,EAC/CwxC,EAAgB41H,GAAapnK,EAAM,eAAiB,CAAC,EACrDyxC,EAAgB21H,GAAapnK,EAAM,eAAiB,CAAC,EAClD,MAAA,CACL,KAAMonK,GAAa/B,EAAa7zH,CAAa,EAC7C,MAAO41H,GAAa/B,EAAa7zH,CAAa,EAC9C,IAAK41H,GAAa/B,EAAa5zH,CAAa,EAC5C,OAAQ21H,GAAa/B,EAAa5zH,CAAa,CACjD,CACF,CACA,SAASm0H,GAAex8J,EAAKmvB,EAAIstI,EAAKC,EAAK,CACzC18J,EAAI,CAAC,EAAIy8J,EACTz8J,EAAI,CAAC,EAAI08J,EACT18J,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAImvB,EAAG,SAAS,EAC9BnvB,EAAI,CAAC,EAAIA,EAAI,CAAC,EAAImvB,EAAG,UAAU,CACjC,CC7IA,IAAI8uI,GAAY,IAAI/qH,GAAK,CACvB,MAAO,CACL,EAAG,GACH,EAAG,GACH,MAAO,EACP,OAAQ,CACZ,CACA,CAAC,EACGgrH,GAA2B,SAAUtwJ,EAAQ,CAC/CC,EAAUqwJ,EAAatwJ,CAAM,EAC7B,SAASswJ,GAAc,CACrB,IAAIpwJ,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOowJ,EAAY,KAClBpwJ,CACX,CACE,OAAAowJ,EAAY,UAAU,KAAO,SAAUjiI,EAASmf,EAAK,CACnD,GAAI,EAAAhlD,EAAI,MAAQ,CAACglD,EAAI,OAAM,GAG3B,KAAIw+G,EAAe39H,EAAQ,aAAa,SAAS,EAC7CqjC,EAAa,KAAK,YAAc9hC,GAAqBo8H,EAAa,IAAI,YAAY,CAAC,EACvF,KAAK,gBAAkBt6F,IAAe,WAAa,IAAIs+F,GAAmBxiH,CAAG,EAAI,IAAI0hH,GAAmB1hH,EAAK,CAC3G,SAAUw+G,EAAa,IAAI,eAAgB,EAAI,EAAI,OAASA,EAAa,IAAI,WAAY,EAAI,CACnG,CAAK,EACF,EACDsE,EAAY,UAAU,OAAS,SAAUtE,EAAc39H,EAASmf,EAAK,CACnE,GAAI,EAAAhlD,EAAI,MAAQ,CAACglD,EAAI,OAAM,GAI3B,MAAK,MAAM,UAAW,EACtB,KAAK,cAAgBw+G,EACrB,KAAK,SAAW39H,EAChB,KAAK,KAAOmf,EACZ,IAAI+iH,EAAiB,KAAK,gBAC1BA,EAAe,OAAOvE,CAAY,EAClCuE,EAAe,aAAavE,EAAa,IAAI,WAAW,CAAC,EACzD,KAAK,oBAAqB,EAC1B,KAAK,UAAW,EAOZ,KAAK,cAAgB,YAAcA,EAAa,IAAI,oBAAoB,EAC1EhpE,GAAe,KAAM,kBAAmB,GAAI,SAAS,EAErDM,GAAM,KAAM,iBAAiB,EAEhC,EACDgtE,EAAY,UAAU,oBAAsB,UAAY,CACtD,IAAItE,EAAe,KAAK,cACpBhV,EAAYgV,EAAa,IAAI,WAAW,EAC5C/U,GAAwB,cAAe,KAAK,KAAMroJ,EAAK,SAAUioJ,EAAarjJ,EAAGojJ,EAAgB,CAE3FI,IAAc,SACZA,EAAU,QAAQH,CAAW,GAAK,EACpC,KAAK,SAASrjJ,EAAGojJ,CAAc,EACtBC,IAAgB,SACzB,KAAK,MAAMD,CAAc,EAG9B,EAAE,IAAI,CAAC,CACT,EACD0Z,EAAY,UAAU,UAAY,UAAY,CAC5C,IAAItE,EAAe,KAAK,cACpB39H,EAAU,KAAK,SACfmf,EAAM,KAAK,KACXwpG,EAAYgV,EAAa,IAAI,WAAW,EAE5C,GAAI,KAAK,QAAU,MAAQ,KAAK,QAAU,MAIvChV,IAAc,QAAUA,IAAc,QAAS,CAChD,IAAIwZ,EAAS,KACb,aAAa,KAAK,qBAAqB,EACvC,KAAK,sBAAwB,WAAW,UAAY,CAIlD,CAAChjH,EAAI,cAAgBgjH,EAAO,gBAAgBxE,EAAc39H,EAASmf,EAAK,CACtE,EAAGgjH,EAAO,OACV,EAAGA,EAAO,OACV,eAAgBA,EAAO,mBACjC,CAAS,CACT,CAAO,CACP,CACG,EAiBDF,EAAY,UAAU,gBAAkB,SAAUtE,EAAc39H,EAASmf,EAAKxf,EAAS,CACrF,GAAI,EAAAA,EAAQ,OAAS,KAAK,KAAOxlC,EAAI,MAAQ,CAACglD,EAAI,UAGlD,KAAIopG,EAAiBN,GAAmBtoH,EAASwf,CAAG,EAEpD,KAAK,QAAU,GAEf,IAAIoqG,EAAiB5pH,EAAQ,eACzByiI,EAAUC,GAAuB1iI,EAASK,EAASmf,CAAG,EAC1D,GAAIijH,EAAS,CACX,IAAIv4J,EAAOu4J,EAAQ,GAAG,gBAAe,EAAG,MAAO,EAC/Cv4J,EAAK,eAAeu4J,EAAQ,GAAG,SAAS,EACxC,KAAK,SAAS,CACZ,QAASv4J,EAAK,EAAIA,EAAK,MAAQ,EAC/B,QAASA,EAAK,EAAIA,EAAK,OAAS,EAChC,OAAQu4J,EAAQ,GAChB,SAAUziI,EAAQ,SAGlB,gBAAiB,QAClB,EAAE4oH,CAAc,CACvB,SAAe5oH,EAAQ,SAAWA,EAAQ,GAAK,MAAQA,EAAQ,GAAK,KAAM,CACpE,IAAIj3B,EAAKs5J,GACTt5J,EAAG,EAAIi3B,EAAQ,EACfj3B,EAAG,EAAIi3B,EAAQ,EACfj3B,EAAG,OAAQ,EACXoyC,GAAUpyC,CAAE,EAAE,cAAgB,CAC5B,KAAM,KACN,OAAQi3B,EAAQ,OACjB,EAED,KAAK,SAAS,CACZ,QAASA,EAAQ,EACjB,QAASA,EAAQ,EACjB,OAAQj3B,CACT,EAAE6/I,CAAc,CAClB,SAAUgB,EACT,KAAK,SAAS,CACZ,QAAS5pH,EAAQ,EACjB,QAASA,EAAQ,EACjB,SAAUA,EAAQ,SAClB,eAAgB4pH,EAChB,cAAe5pH,EAAQ,aACxB,EAAE4oH,CAAc,UACR5oH,EAAQ,aAAe,KAAM,CACtC,GAAI,KAAK,qBAAqBg+H,EAAc39H,EAASmf,EAAKxf,CAAO,EAC/D,OAEF,IAAI2iI,EAAYxZ,GAAoBnpH,EAASK,CAAO,EAChD2P,EAAK2yH,EAAU,MAAM,CAAC,EACtB1yH,EAAK0yH,EAAU,MAAM,CAAC,EACtB3yH,GAAM,MAAQC,GAAM,MACtB,KAAK,SAAS,CACZ,QAASD,EACT,QAASC,EACT,OAAQ0yH,EAAU,GAClB,SAAU3iI,EAAQ,SAGlB,gBAAiB,QAClB,EAAE4oH,CAAc,CAEzB,MAAe5oH,EAAQ,GAAK,MAAQA,EAAQ,GAAK,OAG3Cwf,EAAI,eAAe,CACjB,KAAM,oBACN,EAAGxf,EAAQ,EACX,EAAGA,EAAQ,CACnB,CAAO,EACD,KAAK,SAAS,CACZ,QAASA,EAAQ,EACjB,QAASA,EAAQ,EACjB,SAAUA,EAAQ,SAClB,OAAQwf,EAAI,QAAQ,UAAUxf,EAAQ,EAAGA,EAAQ,CAAC,EAAE,MACrD,EAAE4oH,CAAc,GAEpB,EACD0Z,EAAY,UAAU,gBAAkB,SAAUtE,EAAc39H,EAASmf,EAAKxf,EAAS,CACrF,IAAIuiI,EAAiB,KAAK,gBACtB,KAAK,eACPA,EAAe,UAAU,KAAK,cAAc,IAAI,WAAW,CAAC,EAE9D,KAAK,OAAS,KAAK,OAAS,KAAK,oBAAsB,KACnDviI,EAAQ,OAAS,KAAK,KACxB,KAAK,MAAMsoH,GAAmBtoH,EAASwf,CAAG,CAAC,CAE9C,EAID8iH,EAAY,UAAU,qBAAuB,SAAUtE,EAAc39H,EAASmf,EAAKxf,EAAS,CAC1F,IAAIqb,EAAcrb,EAAQ,YACtBihB,EAAYjhB,EAAQ,UAEpBy2G,EAAmBp2G,EAAQ,aAAa,aAAa,EAAE,iBAC3D,GAAI,EAAAgb,GAAe,MAAQ4F,GAAa,MAAQw1F,GAAoB,MAGpE,KAAIj2F,EAAcngB,EAAQ,iBAAiBgb,CAAW,EACtD,GAAKmF,EAGL,KAAItgD,EAAOsgD,EAAY,QAAS,EAC5BoiH,EAAuBC,GAAkB,CAAC3iK,EAAK,aAAa+gD,CAAS,EAAGT,GAAcA,EAAY,kBAAoB,CAAE,GAAE,KAAK,EAAG,KAAK,aAAa,EACxJ,GAAIoiH,EAAqB,IAAI,SAAS,IAAM,OAG5C,OAAApjH,EAAI,eAAe,CACjB,KAAM,oBACN,YAAanE,EACb,UAAW4F,EACX,SAAUjhB,EAAQ,QACxB,CAAK,EACM,IACR,EACDsiI,EAAY,UAAU,SAAW,SAAU,EAAG1Z,EAAgB,CAC5D,IAAI7/I,EAAK,EAAE,OACPi1J,EAAe,KAAK,cACxB,GAAKA,EAIL,MAAK,OAAS,EAAE,QAChB,KAAK,OAAS,EAAE,QAChB,IAAIpU,EAAiB,EAAE,eACvB,GAAIA,GAAkBA,EAAe,OACnC,KAAK,iBAAiBA,EAAgB,CAAC,UAC9B7gJ,EAAI,CACb,IAAIyyC,EAASL,GAAUpyC,CAAE,EACzB,GAAIyyC,EAAO,UAAY,SAErB,OAEF,KAAK,oBAAsB,KAC3B,IAAIsnH,EACAC,EACJhmE,GAAoBh0F,EAAI,SAAUtK,EAAQ,CAExC,GAAI08C,GAAU18C,CAAM,EAAE,WAAa,KACjC,OAAAqkK,EAAqBrkK,EACd,GAGT,GAAI08C,GAAU18C,CAAM,EAAE,eAAiB,KACrC,OAAAskK,EAAmBtkK,EACZ,EAEV,EAAE,EAAI,EACHqkK,EACF,KAAK,uBAAuB,EAAGA,EAAoBla,CAAc,EACxDma,EACT,KAAK,0BAA0B,EAAGA,EAAkBna,CAAc,EAElE,KAAK,MAAMA,CAAc,CAEjC,MACM,KAAK,oBAAsB,KAC3B,KAAK,MAAMA,CAAc,EAE5B,EACD0Z,EAAY,UAAU,YAAc,SAAUtE,EAAc39J,EAAI,CAK9D,IAAIo1B,EAAQuoI,EAAa,IAAI,WAAW,EACxC39J,EAAKO,EAAKP,EAAI,IAAI,EAClB,aAAa,KAAK,WAAW,EAC7Bo1B,EAAQ,EAAI,KAAK,YAAc,WAAWp1B,EAAIo1B,CAAK,EAAIp1B,EAAI,CAC5D,EACDiiK,EAAY,UAAU,iBAAmB,SAAU1Y,EAAgBpkJ,EAAG,CACpE,IAAI66B,EAAU,KAAK,SACf2zG,EAAqB,KAAK,cAC1B1oF,EAAQ,CAAC9lD,EAAE,QAASA,EAAE,OAAO,EAC7Bw9J,EAAqBH,GAAkB,CAACr9J,EAAE,aAAa,EAAGwuI,CAAkB,EAC5EtwE,EAAa,KAAK,YAClBu/F,EAAe,CAAE,EACjBC,EAAgBh4E,GAAoB,UAAW,CACjD,OAAQ,CAAE,EACV,SAAU,EAChB,CAAK,EAEGi4E,EAAsB,CAAE,EACxBr1E,EAAqB,IAAIiB,GAC7B5uF,EAAKypJ,EAAgB,SAAUwZ,EAAc,CAC3CjjK,EAAKijK,EAAa,WAAY,SAAUC,EAAU,CAChD,IAAI5jD,EAAYp/E,EAAQ,aAAagjI,EAAS,QAAU,OAAQA,EAAS,SAAS,EAC9EC,EAAYD,EAAS,MACzB,GAAI,GAAC5jD,GAAa6jD,GAAa,MAG/B,KAAIC,EAAiBC,GAAoCF,EAAW7jD,EAAU,KAAMp/E,EAASgjI,EAAS,kBAAmBA,EAAS,aAAa,EAC3II,EAAoBv4E,GAAoB,UAAW,CACrD,OAAQq4E,EACR,SAAU,CAACthK,GAAKshK,CAAc,EAC9B,WAAY,GACZ,OAAQ,CAAA,CAClB,CAAS,EACDL,EAAc,OAAO,KAAKO,CAAiB,EAC3CtjK,EAAKkjK,EAAS,kBAAmB,SAAU7c,EAAS,CAClD,IAAI31E,EAASxwC,EAAQ,iBAAiBmmH,EAAQ,WAAW,EACrDvlG,EAAYulG,EAAQ,gBACpBkd,EAAW7yF,EAAO,cAAc5vB,CAAS,EAE7C,GAAI,EAAAyiH,EAAS,UAAY,GAGzB,CAAAA,EAAS,QAAUL,EAAS,QAC5BK,EAAS,UAAYL,EAAS,UAC9BK,EAAS,SAAWL,EAAS,SAC7BK,EAAS,OAASL,EAAS,OAC3BK,EAAS,UAAYnd,GAA2B9mC,EAAU,KAAM,CAC9D,MAAO6jD,CACnB,CAAW,EACDI,EAAS,eAAiBH,EAG1BG,EAAS,OAAS51E,EAAmB,kBAAkB,OAAQlqB,GAAqB8/F,EAAS,KAAK,EAAGhgG,CAAU,EAC/G,IAAIigG,EAAsBpmF,GAA6B1M,EAAO,cAAc5vB,EAAW,GAAM,IAAI,CAAC,EAC9FmqC,EAAOu4E,EAAoB,KAC/B,GAAIv4E,EAAM,CACR,IAAIqB,EAAiBo2E,GAAkB,CAAChyF,CAAM,EAAGmjE,CAAkB,EAAE,IAAI,gBAAgB,EACzFyvB,EAAkB,OAAO,KAAKh3E,EAAiBztF,EAAO,CACpD,eAAgBytF,CAC9B,EAAerB,CAAI,EAAIA,CAAI,CAC3B,CACcu4E,EAAoB,MACtBR,EAAoB,KAAKQ,EAAoB,IAAI,EAEnDV,EAAa,KAAKS,CAAQ,EACpC,CAAS,EACT,CAAO,CACP,CAAK,EAGDR,EAAc,OAAO,QAAS,EAC9BC,EAAoB,QAAS,EAC7B,IAAIS,EAAep+J,EAAE,SACjB8mF,EAAY02E,EAAmB,IAAI,OAAO,EAC1Ca,EAAkBh2E,GAAmBq1E,EAAep1E,EAAoBpqB,EAAY4oB,EAAWjsD,EAAQ,IAAI,QAAQ,EAAG2iI,EAAmB,IAAI,WAAW,CAAC,EAC7Ja,GAAmBV,EAAoB,QAAQU,CAAe,EAC9D,IAAIC,EAAapgG,IAAe,WAAa;AAAA;AAAA,EAAS,QAClDqgG,EAAgBZ,EAAoB,KAAKW,CAAU,EACvD,KAAK,YAAYd,EAAoB,UAAY,CAC3C,KAAK,+BAA+BpZ,EAAgBqZ,CAAY,EAClE,KAAK,gBAAgBD,EAAoBY,EAAct4G,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAG,KAAK,gBAAiB23G,CAAY,EAE7G,KAAK,oBAAoBD,EAAoBe,EAAed,EAAc,KAAK,SAAW,GAAI33G,EAAM,CAAC,EAAGA,EAAM,CAAC,EAAGs4G,EAAc,KAAM91E,CAAkB,CAEhK,CAAK,CAGF,EACDw0E,EAAY,UAAU,uBAAyB,SAAU,EAAG7gH,EAAYmnG,EAAgB,CACtF,IAAIvoH,EAAU,KAAK,SACfmb,EAASL,GAAUsG,CAAU,EAI7BpG,EAAcG,EAAO,YACrBgF,EAAcngB,EAAQ,iBAAiBgb,CAAW,EAElDmyD,EAAYhyD,EAAO,WAAagF,EAChCS,EAAYzF,EAAO,UACnBF,EAAWE,EAAO,SAClBt7C,EAAOstG,EAAU,QAAQlyD,CAAQ,EACjCooB,EAAa,KAAK,YAClBsgG,EAAkB,EAAE,gBACpBhG,EAAe6E,GAAkB,CAAC3iK,EAAK,aAAa+gD,CAAS,EAAGusD,EAAWhtD,IAAgBA,EAAY,kBAAoB,IAAI,KAAK,EAAG,KAAK,cAAewjH,EAAkB,CAC/K,SAAUA,CACX,EAAG,IAAI,EACJC,EAAiBjG,EAAa,IAAI,SAAS,EAC/C,GAAI,EAAAiG,GAAkB,MAAQA,IAAmB,QAGjD,KAAI9iJ,EAASqsF,EAAU,cAAcvsD,EAAW3F,CAAQ,EACpDwyC,EAAqB,IAAIiB,GAG7B5tE,EAAO,OAAS2sE,EAAmB,kBAAkB,OAAQlqB,GAAqBziD,EAAO,KAAK,EAAGuiD,CAAU,EAC3G,IAAIigG,EAAsBpmF,GAA6BiwB,EAAU,cAAcvsD,EAAW,GAAO3F,CAAQ,CAAC,EACtGgxC,EAAY0xE,EAAa,IAAI,OAAO,EACpCvxE,EAAiBuxE,EAAa,IAAI,gBAAgB,EAClD5yE,EAAOu4E,EAAoB,KAC3BnmF,EAAa4N,EAAOyC,GAAmBpB,EAAiBztF,EAAO,CACjE,eAAgBytF,CACtB,EAAOrB,CAAI,EAAIA,EAAM0C,EAAoBpqB,EAAY4oB,EAAWjsD,EAAQ,IAAI,QAAQ,EAAG29H,EAAa,IAAI,WAAW,CAAC,EAAI2F,EAAoB,KACpIO,EAAc,QAAU12D,EAAU,KAAO,IAAMvsD,EACnD,KAAK,YAAY+8G,EAAc,UAAY,CACzC,KAAK,oBAAoBA,EAAcxgF,EAAYr8D,EAAQ+iJ,EAAa,EAAE,QAAS,EAAE,QAAS,EAAE,SAAU,EAAE,OAAQp2E,CAAkB,CAC5I,CAAK,EAGD86D,EAAe,CACb,KAAM,UACN,gBAAiB3nG,EACjB,UAAW/gD,EAAK,YAAY+gD,CAAS,EACrC,YAAa5F,EACb,KAAM,KAAK,GACjB,CAAK,EACF,EACDinH,EAAY,UAAU,0BAA4B,SAAU,EAAGv5J,EAAI6/I,EAAgB,CACjF,IAAIub,EAAmB,KAAK,cAAgB,OACxC3oH,EAASL,GAAUpyC,CAAE,EACrBq7J,EAAgB5oH,EAAO,cACvBi0F,EAAa20B,EAAc,QAAU,CAAE,EACvCC,EAAoB50B,EAAW,kBACnC,GAAI1uI,EAAS0uI,CAAU,EAAG,CACxB,IAAI8xB,EAAU9xB,EACdA,EAAa,CACX,QAAS8xB,EAET,UAAWA,CACZ,EAID8C,EAAoB,EAC1B,CACQA,GAAqBF,GAAoB10B,EAAW,UAEtDA,EAAa1xI,EAAM0xI,CAAU,EAC7BA,EAAW,QAAUnlI,GAAWmlI,EAAW,OAAO,GAEpD,IAAI60B,EAAsB,CAAC70B,CAAU,EACjC5/D,EAAO,KAAK,SAAS,aAAar0B,EAAO,kBAAmBA,EAAO,cAAc,EACjFq0B,GACFy0F,EAAoB,KAAKz0F,CAAI,EAK/By0F,EAAoB,KAAK,CACvB,UAAW70B,EAAW,OAC5B,CAAK,EACD,IAAIu0B,EAAkB,EAAE,gBACpBO,EAAkB1B,GAAkByB,EAAqB,KAAK,cAAeN,EAAkB,CACjG,SAAUA,CACX,EAAG,IAAI,EACJQ,EAAcD,EAAgB,IAAI,SAAS,EAC3CL,EAAc,KAAK,OAAM,EAAK,GAE9Bp2E,EAAqB,IAAIiB,GAI7B,KAAK,YAAYw1E,EAAiB,UAAY,CAG5C,IAAItvG,EAAkBl3D,EAAMwmK,EAAgB,IAAI,iBAAiB,GAAK,EAAE,EACxE,KAAK,oBAAoBA,EAAiBC,EAAavvG,EAAiBivG,EAAa,EAAE,QAAS,EAAE,QAAS,EAAE,SAAUn7J,EAAI+kF,CAAkB,CACnJ,CAAK,EAED86D,EAAe,CACb,KAAM,UACN,KAAM,KAAK,GACjB,CAAK,CACF,EACD0Z,EAAY,UAAU,oBAAsB,SAG5CtE,EAAcwG,EAAarjJ,EAAQ+iJ,EAAalgK,EAAGC,EAAG2/J,EAAc76J,EAAI+kF,EAAoB,CAG1F,GADA,KAAK,QAAU,GACX,GAACkwE,EAAa,IAAI,aAAa,GAAK,CAACA,EAAa,IAAI,MAAM,GAGhE,KAAIuE,EAAiB,KAAK,gBAC1BA,EAAe,aAAavE,EAAa,IAAI,WAAW,CAAC,EACzD,IAAI79F,EAAY69F,EAAa,IAAI,WAAW,EAC5C4F,EAAeA,GAAgB5F,EAAa,IAAI,UAAU,EAC1D,IAAI1I,EAAOkP,EACPC,EAAY,KAAK,iBAAiB,CAACzgK,EAAGC,CAAC,EAAGkd,EAAQ68I,EAAa,IAAI,SAAS,EAAGA,EAAa,IAAI,aAAa,CAAC,EAC9GqD,EAAiBoD,EAAU,MAC/B,GAAItkG,EACF,GAAIp/D,EAASo/D,CAAS,EAAG,CACvB,IAAI8B,EAAS+7F,EAAa,QAAQ,IAAI,QAAQ,EAC1C0G,EAAU5lK,EAAQqiB,CAAM,EAAIA,EAAO,CAAC,EAAIA,EACxCwjJ,EAAaD,GAAWA,EAAQ,UAAYA,EAAQ,SAAS,QAAQ,MAAM,GAAK,EACpFpP,EAAOn1F,EACHwkG,IACFrP,EAAO7yF,GAAWiiG,EAAQ,UAAWpP,EAAMrzF,CAAM,GAEnDqzF,EAAOtyF,GAAUsyF,EAAMn0I,EAAQ,EAAI,CAC3C,SAAiBtgB,EAAWs/D,CAAS,EAAG,CAChC,IAAI59D,EAAW3B,EAAK,SAAUgkK,EAAUtP,EAAM,CACxCsP,IAAa,KAAK,UACpBrC,EAAe,WAAWjN,EAAMxnE,EAAoBkwE,EAAcqD,EAAgBuC,CAAY,EAC9F,KAAK,gBAAgB5F,EAAc4F,EAAc5/J,EAAGC,EAAGs+J,EAAgBphJ,EAAQpY,CAAE,EAEpF,EAAE,IAAI,EACP,KAAK,QAAUm7J,EACf5O,EAAOn1F,EAAUh/C,EAAQ+iJ,EAAa3hK,CAAQ,CACtD,MACQ+yJ,EAAOn1F,EAGXoiG,EAAe,WAAWjN,EAAMxnE,EAAoBkwE,EAAcqD,EAAgBuC,CAAY,EAC9FrB,EAAe,KAAKvE,EAAcqD,CAAc,EAChD,KAAK,gBAAgBrD,EAAc4F,EAAc5/J,EAAGC,EAAGs+J,EAAgBphJ,EAAQpY,CAAE,EAClF,EACDu5J,EAAY,UAAU,iBAAmB,SAAUh3G,EAAOu5G,EAAmBtqB,EAASv9D,EAAa,CACjG,GAAIu9D,IAAY,QAAUz7I,EAAQ+lK,CAAiB,EACjD,MAAO,CACL,MAAO7nF,IAAgB,KAAK,cAAgB,OAAS,OAAS,OAC/D,EAEH,GAAI,CAACl+E,EAAQ+lK,CAAiB,EAC5B,MAAO,CACL,MAAO7nF,GAAe6nF,EAAkB,OAASA,EAAkB,WACpE,CAEJ,EACDvC,EAAY,UAAU,gBAAkB,SAAUtE,EAAc4F,EAAc5/J,EAE9EC,EAEAs9J,EAASpgJ,EAAQpY,EAAI,CACnB,IAAIgjC,EAAY,KAAK,KAAK,SAAU,EAChCC,EAAa,KAAK,KAAK,UAAW,EACtC43H,EAAeA,GAAgB5F,EAAa,IAAI,UAAU,EAC1D,IAAI8G,EAAcvD,EAAQ,QAAS,EAC/B78B,EAAQs5B,EAAa,IAAI,OAAO,EAChC+G,EAAS/G,EAAa,IAAI,eAAe,EACzC9zJ,EAAOnB,GAAMA,EAAG,gBAAe,EAAG,MAAO,EAS7C,GARAA,GAAMmB,EAAK,eAAenB,EAAG,SAAS,EAClClI,EAAW+iK,CAAY,IAEzBA,EAAeA,EAAa,CAAC5/J,EAAGC,CAAC,EAAGkd,EAAQogJ,EAAQ,GAAIr3J,EAAM,CAC5D,SAAU,CAAC6hC,EAAWC,CAAU,EAChC,YAAa84H,EAAY,MAAK,CACtC,CAAO,GAEChmK,EAAQ8kK,CAAY,EACtB5/J,EAAIsrB,GAAas0I,EAAa,CAAC,EAAG73H,CAAS,EAC3C9nC,EAAIqrB,GAAas0I,EAAa,CAAC,EAAG53H,CAAU,UACnCrtC,EAASilK,CAAY,EAAG,CACjC,IAAIoB,EAAoBpB,EACxBoB,EAAkB,MAAQF,EAAY,CAAC,EACvCE,EAAkB,OAASF,EAAY,CAAC,EACxC,IAAIv0I,EAAa20C,GAAc8/F,EAAmB,CAChD,MAAOj5H,EACP,OAAQC,CAChB,CAAO,EACDhoC,EAAIusB,EAAW,EACftsB,EAAIssB,EAAW,EACfm0G,EAAQ,KAGRqgC,EAAS,IACf,SAEahkK,EAAS6iK,CAAY,GAAK76J,EAAI,CACrC,IAAIuD,EAAM24J,GAAoBrB,EAAc15J,EAAM46J,EAAa9G,EAAa,IAAI,aAAa,CAAC,EAC9Fh6J,EAAIsI,EAAI,CAAC,EACTrI,EAAIqI,EAAI,CAAC,CACf,KAAW,CACL,IAAIA,EAAM44J,GAAqBlhK,EAAGC,EAAGs9J,EAASx1H,EAAWC,EAAY04F,EAAQ,KAAO,GAAIqgC,EAAS,KAAO,EAAE,EAC1G/gK,EAAIsI,EAAI,CAAC,EACTrI,EAAIqI,EAAI,CAAC,CACf,CAGI,GAFAo4H,IAAU1gI,GAAKmhK,GAAczgC,CAAK,EAAIogC,EAAY,CAAC,EAAI,EAAIpgC,IAAU,QAAUogC,EAAY,CAAC,EAAI,GAChGC,IAAW9gK,GAAKkhK,GAAcJ,CAAM,EAAID,EAAY,CAAC,EAAI,EAAIC,IAAW,SAAWD,EAAY,CAAC,EAAI,GAChG/G,GAAqBC,CAAY,EAAG,CACtC,IAAI1xJ,EAAM84J,GAAuBphK,EAAGC,EAAGs9J,EAASx1H,EAAWC,CAAU,EACrEhoC,EAAIsI,EAAI,CAAC,EACTrI,EAAIqI,EAAI,CAAC,CACf,CACIi1J,EAAQ,OAAOv9J,EAAGC,CAAC,CACpB,EAGDq+J,EAAY,UAAU,+BAAiC,SAAU1Y,EAAgBqZ,EAAc,CAC7F,IAAIoC,EAAe,KAAK,oBACpBC,EAAmB,KAAK,cACxBC,EAAoB,CAAC,CAACF,GAAgBA,EAAa,SAAWzb,EAAe,OACjF,OAAA2b,GAAqBplK,EAAKklK,EAAc,SAAUG,EAAkBC,EAAe,CACjF,IAAIC,EAAiBF,EAAiB,YAAc,CAAE,EAClDG,EAAmB/b,EAAe6b,CAAa,GAAK,CAAE,EACtDG,EAAiBD,EAAiB,YAAc,CAAE,EACtDJ,EAAoBA,GAAqBG,EAAe,SAAWE,EAAe,OAClFL,GAAqBplK,EAAKulK,EAAgB,SAAUG,EAAUC,EAAW,CACvE,IAAI5pG,EAAW0pG,EAAeE,CAAS,GAAK,CAAE,EAC1CC,EAAcF,EAAS,mBAAqB,CAAE,EAC9ClgF,EAAazpB,EAAS,mBAAqB,CAAE,EACjDqpG,EAAoBA,GAAqBM,EAAS,QAAU3pG,EAAS,OAAS2pG,EAAS,WAAa3pG,EAAS,UAAY2pG,EAAS,SAAW3pG,EAAS,QAAU6pG,EAAY,SAAWpgF,EAAW,OAClM4/E,GAAqBplK,EAAK4lK,EAAa,SAAUC,EAAap+J,EAAG,CAC/D,IAAIq+J,EAAatgF,EAAW/9E,CAAC,EAC7B29J,EAAoBA,GAAqBS,EAAY,cAAgBC,EAAW,aAAeD,EAAY,YAAcC,EAAW,SAC9I,CAAS,EAEDX,GAAoBnlK,EAAK0lK,EAAS,kBAAmB,SAAUrf,EAAS,CACtE,IAAIzjF,EAAYyjF,EAAQ,YACpBkd,EAAWT,EAAalgG,CAAS,EACjCmjG,EAAeZ,EAAiBviG,CAAS,EACzC2gG,GAAYwC,GAAgBA,EAAa,OAASxC,EAAS,OAC7D6B,EAAoB,GAEhC,CAAS,CACT,CAAO,CACP,CAAK,EACD,KAAK,oBAAsB3b,EAC3B,KAAK,cAAgBqZ,EACd,CAAC,CAACsC,CACV,EACDjD,EAAY,UAAU,MAAQ,SAAU1Z,EAAgB,CAKtD,KAAK,oBAAsB,KAC3BA,EAAe,CACb,KAAM,UACN,KAAM,KAAK,GACjB,CAAK,CACF,EACD0Z,EAAY,UAAU,QAAU,SAAUjiI,EAASmf,EAAK,CAClDhlD,EAAI,MAAQ,CAACglD,EAAI,OAAM,IAG3B81C,GAAM,KAAM,iBAAiB,EAC7B,KAAK,gBAAgB,QAAS,EAC9B4zD,GAA0B,cAAe1pG,CAAG,EAC7C,EACD8iH,EAAY,KAAO,UACZA,CACT,EAAE1vE,EAAa,EAIf,SAASiwE,GAAkBsD,EAAcnyB,EAAoBoyB,EAAsB,CAEjF,IAAI/lI,EAAU2zG,EAAmB,QAC7BqyB,EACAD,GACFC,EAAc,IAAI/rG,GAAM8rG,EAAsB/lI,EAASA,CAAO,EAC9DgmI,EAAc,IAAI/rG,GAAM05E,EAAmB,OAAQqyB,EAAahmI,CAAO,GAEvEgmI,EAAcryB,EAEhB,QAASt4I,EAAIyqK,EAAa,OAAS,EAAGzqK,GAAK,EAAGA,IAAK,CACjD,IAAI+zI,EAAa02B,EAAazqK,CAAC,EAC3B+zI,IACEA,aAAsBn1E,KACxBm1E,EAAaA,EAAW,IAAI,UAAW,EAAI,GAOzC1uI,EAAS0uI,CAAU,IACrBA,EAAa,CACX,UAAWA,CACZ,GAECA,IACF42B,EAAc,IAAI/rG,GAAMm1E,EAAY42B,EAAahmI,CAAO,GAGhE,CACE,OAAOgmI,CACT,CACA,SAAS/d,GAAmBtoH,EAASwf,EAAK,CACxC,OAAOxf,EAAQ,gBAAkBp/B,EAAK4+C,EAAI,eAAgBA,CAAG,CAC/D,CACA,SAAS0lH,GAAqBlhK,EAAGC,EAAGs9J,EAASx1H,EAAWC,EAAYs6H,EAAMC,EAAM,CAC9E,IAAI3qK,EAAO2lK,EAAQ,QAAS,EACxBjlK,EAAQV,EAAK,CAAC,EACdmU,EAASnU,EAAK,CAAC,EACnB,OAAI0qK,GAAQ,OAKNtiK,EAAI1H,EAAQgqK,EAAO,EAAIv6H,EACzB/nC,GAAK1H,EAAQgqK,EAEbtiK,GAAKsiK,GAGLC,GAAQ,OACNtiK,EAAI8L,EAASw2J,EAAOv6H,EACtB/nC,GAAK8L,EAASw2J,EAEdtiK,GAAKsiK,GAGF,CAACviK,EAAGC,CAAC,CACd,CACA,SAASmhK,GAAuBphK,EAAGC,EAAGs9J,EAASx1H,EAAWC,EAAY,CACpE,IAAIpwC,EAAO2lK,EAAQ,QAAS,EACxBjlK,EAAQV,EAAK,CAAC,EACdmU,EAASnU,EAAK,CAAC,EACnB,OAAAoI,EAAI,KAAK,IAAIA,EAAI1H,EAAOyvC,CAAS,EAAIzvC,EACrC2H,EAAI,KAAK,IAAIA,EAAI8L,EAAQi8B,CAAU,EAAIj8B,EACvC/L,EAAI,KAAK,IAAIA,EAAG,CAAC,EACjBC,EAAI,KAAK,IAAIA,EAAG,CAAC,EACV,CAACD,EAAGC,CAAC,CACd,CACA,SAASghK,GAAoBhuH,EAAU/sC,EAAM46J,EAAa9F,EAAa,CACrE,IAAIwH,EAAW1B,EAAY,CAAC,EACxB2B,EAAY3B,EAAY,CAAC,EACzB3hK,EAAS,KAAK,KAAK,KAAK,MAAQ67J,CAAW,EAAI,EAC/Ch7J,EAAI,EACJC,EAAI,EACJyiK,EAAYx8J,EAAK,MACjBy8J,EAAaz8J,EAAK,OACtB,OAAQ+sC,EAAQ,CACd,IAAK,SACHjzC,EAAIkG,EAAK,EAAIw8J,EAAY,EAAIF,EAAW,EACxCviK,EAAIiG,EAAK,EAAIy8J,EAAa,EAAIF,EAAY,EAC1C,MACF,IAAK,MACHziK,EAAIkG,EAAK,EAAIw8J,EAAY,EAAIF,EAAW,EACxCviK,EAAIiG,EAAK,EAAIu8J,EAAYtjK,EACzB,MACF,IAAK,SACHa,EAAIkG,EAAK,EAAIw8J,EAAY,EAAIF,EAAW,EACxCviK,EAAIiG,EAAK,EAAIy8J,EAAaxjK,EAC1B,MACF,IAAK,OACHa,EAAIkG,EAAK,EAAIs8J,EAAWrjK,EACxBc,EAAIiG,EAAK,EAAIy8J,EAAa,EAAIF,EAAY,EAC1C,MACF,IAAK,QACHziK,EAAIkG,EAAK,EAAIw8J,EAAYvjK,EACzBc,EAAIiG,EAAK,EAAIy8J,EAAa,EAAIF,EAAY,CAChD,CACE,MAAO,CAACziK,EAAGC,CAAC,CACd,CACA,SAASkhK,GAAczgC,EAAO,CAC5B,OAAOA,IAAU,UAAYA,IAAU,QACzC,CAYA,SAASg+B,GAAuB1iI,EAASK,EAASmf,EAAK,CACrD,IAAI9e,EAAiBF,GAAeR,CAAO,EAAE,eACzC8gB,EAAoBpgB,EAAe,KAAI,EAAG,CAAC,EAC/C,GAAI,GAACogB,GAAqBA,IAAsB,UAGhD,KAAIhgB,EAAcC,GAAyBV,EAASygB,EAAmBpgB,EAAe,IAAIogB,CAAiB,EAAG,CAC5G,WAAY,GACZ,UAAW,GACX,WAAY,EAChB,CAAG,EACG7b,EAAQnE,EAAY,OAAO,CAAC,EAChC,GAAKmE,EAGL,KAAI4a,EAAOL,EAAI,wBAAwBva,CAAK,EACxCl8B,EAQJ,GAPA82C,EAAK,MAAM,SAAS,SAAU+mH,EAAO,CACnC,IAAIxC,EAAgBjpH,GAAUyrH,CAAK,EAAE,cACrC,GAAIxC,GAAiBA,EAAc,OAASpkI,EAAQ,KAClD,OAAAj3B,EAAK69J,EACE,EAEb,CAAG,EACG79J,EACF,MAAO,CACL,kBAAmB+3C,EACnB,eAAgB7b,EAAM,eACtB,GAAIl8B,CACL,GAEL,CClyBO,SAASg/H,GAAQC,EAAW,CACjCvV,GAAIs5B,EAAkB,EACtB/jB,EAAU,uBAAuB81B,EAAY,EAC7C91B,EAAU,sBAAsBs6B,EAAW,EAS3Ct6B,EAAU,eAAe,CACvB,KAAM,UACN,MAAO,UACP,OAAQ,yBACT,EAAEnkI,EAAI,EACPmkI,EAAU,eAAe,CACvB,KAAM,UACN,MAAO,UACP,OAAQ,yBACT,EAAEnkI,EAAI,CACT,CClBA,IAAIgjK,GAA0B,SAAU70J,EAAQ,CAC9CC,EAAU40J,EAAY70J,CAAM,EAC5B,SAAS60J,GAAa,CACpB,IAAI30J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO20J,EAAW,KACxB30J,EAAM,WAAa,CACjB,KAAM,MACN,WAAY,EACb,EACMA,CACX,CACE,OAAA20J,EAAW,KAAO,QAClBA,EAAW,cAAgB,CAEzB,EAAG,EACH,KAAM,GACN,KAAM,GACN,OAAQ,QACR,QAAS,GACT,UAAW,QACX,KAAM,EACN,IAAK,EACL,gBAAiB,gBACjB,YAAa,OACb,YAAa,EACb,QAAS,EACT,QAAS,GACT,UAAW,CACT,SAAU,GACV,WAAY,OACZ,MAAO,SACR,EACD,aAAc,CACZ,SAAU,GACV,MAAO,SACb,CACG,EACMA,CACT,EAAE7/F,EAAc,EAEZ8/F,GAAyB,SAAU90J,EAAQ,CAC7CC,EAAU60J,EAAW90J,CAAM,EAC3B,SAAS80J,GAAY,CACnB,IAAI50J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO40J,EAAU,KAChB50J,CACX,CACE,OAAA40J,EAAU,UAAU,OAAS,SAAUC,EAAY1mI,EAASmf,EAAK,CAE/D,GADA,KAAK,MAAM,UAAW,EAClB,EAACunH,EAAW,IAAI,MAAM,EAG1B,KAAIziG,EAAQ,KAAK,MACbhN,EAAiByvG,EAAW,SAAS,WAAW,EAChDC,EAAoBD,EAAW,SAAS,cAAc,EACtDl4I,EAAYk4I,EAAW,IAAI,WAAW,EACtCp3I,EAAoBqI,EAAiB+uI,EAAW,IAAI,cAAc,EAAGA,EAAW,IAAI,mBAAmB,CAAC,EACxGptJ,EAAS,IAAIy9E,GAAa,CAC5B,MAAOtgC,GAAgBQ,EAAgB,CACrC,KAAMyvG,EAAW,IAAI,MAAM,EAC3B,KAAMzvG,EAAe,aAAY,CACzC,EAAS,CACD,WAAY,EACpB,CAAO,EACD,GAAI,EACV,CAAK,EACG85D,EAAWz3G,EAAO,gBAAiB,EACnCstJ,EAAUF,EAAW,IAAI,SAAS,EAClCG,EAAY,IAAI9vE,GAAa,CAC/B,MAAOtgC,GAAgBkwG,EAAmB,CACxC,KAAMC,EACN,KAAMD,EAAkB,aAAc,EACtC,EAAG51C,EAAS,OAAS21C,EAAW,IAAI,SAAS,EAC7C,cAAe,KACvB,EAAS,CACD,WAAY,EACpB,CAAO,EACD,GAAI,EACV,CAAK,EACG/iG,EAAO+iG,EAAW,IAAI,MAAM,EAC5BI,EAAUJ,EAAW,IAAI,SAAS,EAClC3zB,EAAe2zB,EAAW,IAAI,eAAgB,EAAI,EACtDptJ,EAAO,OAAS,CAACqqD,GAAQ,CAACovE,EAC1B8zB,EAAU,OAAS,CAACC,GAAW,CAAC/zB,EAC5BpvE,GACFrqD,EAAO,GAAG,QAAS,UAAY,CAC7BoqD,GAAWC,EAAM,IAAM+iG,EAAW,IAAI,QAAQ,CAAC,CACvD,CAAO,EAECI,GACFD,EAAU,GAAG,QAAS,UAAY,CAChCnjG,GAAWojG,EAAS,IAAMJ,EAAW,IAAI,WAAW,CAAC,CAC7D,CAAO,EAEH5rH,GAAUxhC,CAAM,EAAE,UAAYwhC,GAAU+rH,CAAS,EAAE,UAAY9zB,EAAe,CAC5E,cAAe,QACf,eAAgB2zB,EAAW,cACjC,EAAQ,KACJziG,EAAM,IAAI3qD,CAAM,EAChBstJ,GAAW3iG,EAAM,IAAI4iG,CAAS,EAE9B,IAAIE,EAAY9iG,EAAM,gBAAiB,EACnC+iG,EAAeN,EAAW,mBAAoB,EAClDM,EAAa,MAAQD,EAAU,MAC/BC,EAAa,OAASD,EAAU,OAChC,IAAI72I,EAAa20C,GAAcmiG,EAAc,CAC3C,MAAO7nH,EAAI,SAAU,EACrB,OAAQA,EAAI,UAAS,CAC3B,EAAOunH,EAAW,IAAI,SAAS,CAAC,EAEvBl4I,IAEHA,EAAYk4I,EAAW,IAAI,MAAM,GAAKA,EAAW,IAAI,OAAO,EAExDl4I,IAAc,WAChBA,EAAY,UAGVA,IAAc,QAChB0B,EAAW,GAAKA,EAAW,MAClB1B,IAAc,WACvB0B,EAAW,GAAKA,EAAW,MAAQ,IAGlCZ,IACHA,EAAoBo3I,EAAW,IAAI,KAAK,GAAKA,EAAW,IAAI,QAAQ,EAEhEp3I,IAAsB,WACxBA,EAAoB,UAElBA,IAAsB,SACxBY,EAAW,GAAKA,EAAW,OAClBZ,IAAsB,WAC/BY,EAAW,GAAKA,EAAW,OAAS,GAEtCZ,EAAoBA,GAAqB,OAE3C20C,EAAM,EAAI/zC,EAAW,EACrB+zC,EAAM,EAAI/zC,EAAW,EACrB+zC,EAAM,WAAY,EAClB,IAAIgjG,EAAa,CACf,MAAOz4I,EACP,cAAec,CAChB,EACDhW,EAAO,SAAS2tJ,CAAU,EAC1BJ,EAAU,SAASI,CAAU,EAG7BF,EAAY9iG,EAAM,gBAAiB,EACnC,IAAIj9B,EAAU9W,EAAW,OACrBv1B,EAAQ+rK,EAAW,aAAa,CAAC,QAAS,SAAS,CAAC,EACxD/rK,EAAM,KAAO+rK,EAAW,IAAI,iBAAiB,EAC7C,IAAI78J,EAAO,IAAIitF,GAAa,CAC1B,MAAO,CACL,EAAGiwE,EAAU,EAAI//H,EAAQ,CAAC,EAC1B,EAAG+/H,EAAU,EAAI//H,EAAQ,CAAC,EAC1B,MAAO+/H,EAAU,MAAQ//H,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EAC/C,OAAQ+/H,EAAU,OAAS//H,EAAQ,CAAC,EAAIA,EAAQ,CAAC,EACjD,EAAG0/H,EAAW,IAAI,cAAc,CACjC,EACD,MAAO/rK,EACP,iBAAkB,GAClB,OAAQ,EACd,CAAK,EACDspE,EAAM,IAAIp6D,CAAI,EACf,EACD48J,EAAU,KAAO,QACVA,CACT,EAAEl0E,EAAa,EACR,SAASm1C,GAAQC,EAAW,CACjCA,EAAU,uBAAuB6+B,EAAU,EAC3C7+B,EAAU,sBAAsB8+B,EAAS,CAC3C,CChLA,IAAIS,GAA4B,SAAUlnI,EAASn/B,EAAM,CACvD,GAAIA,IAAS,MACX,MAAO,CACL,KAAM,MACN,MAAOm/B,EAAQ,eAAgB,EAAC,IAAI,CAAC,SAAU,WAAY,KAAK,CAAC,CAClE,EACI,GAAIn/B,IAAS,UAClB,MAAO,CACL,KAAM,UACN,MAAOm/B,EAAQ,eAAgB,EAAC,IAAI,CAAC,SAAU,WAAY,SAAS,CAAC,CACtE,CAEL,EACImnI,GAA2B,SAAUx1J,EAAQ,CAC/CC,EAAUu1J,EAAax1J,CAAM,EAC7B,SAASw1J,GAAc,CACrB,IAAIt1J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOs1J,EAAY,KACzBt1J,EAAM,WAAa,CACjB,KAAM,MAQN,WAAY,EACb,EACMA,CACX,CACE,OAAAs1J,EAAY,UAAU,KAAO,SAAUjtG,EAAQC,EAAan6B,EAAS,CACnE,KAAK,qBAAqBk6B,EAAQl6B,CAAO,EACzCk6B,EAAO,SAAWA,EAAO,UAAY,CAAE,EACvC,KAAK,gBAAgBA,CAAM,CAC5B,EACDitG,EAAY,UAAU,YAAc,SAAUjtG,EAAQl6B,EAAS,CAC7DruB,EAAO,UAAU,YAAY,KAAK,KAAMuoD,EAAQl6B,CAAO,EACvD,KAAK,gBAAgBk6B,CAAM,CAC5B,EACDitG,EAAY,UAAU,gBAAkB,SAAUjtG,EAAQ,CACxD,IAAIktG,EAAWltG,EAAO,SAClBl6B,EAAU,KAAK,QACfonI,IAAa,KACfA,EAAWltG,EAAO,SAAW,CAAC,MAAO,SAAS,GAE5CiG,EAAeinG,CAAQ,GACzBx8I,EAAYw8I,EAAU,SAAUlpI,EAAM7H,EAAO,CAC3C8C,EAAgB+E,CAAI,IAAMA,EAAO,CAC/B,KAAMA,CAChB,GACQkpI,EAAS/wI,CAAK,EAAImmC,EAAat+B,EAAMgpI,GAA0BlnI,EAAS9B,EAAK,IAAI,CAAC,CAC1F,CAAO,CAEJ,EACDipI,EAAY,UAAU,cAAgB,UAAY,CAChD,KAAK,YAAY,KAAK,OAAO,EAC7B,IAAIE,EAAa,KAAK,MAEtB,GAAIA,EAAW,CAAC,GAAK,KAAK,IAAI,cAAc,IAAM,SAAU,CAG1D,QAFIC,EAAc,GAETjsK,EAAI,EAAGA,EAAIgsK,EAAW,OAAQhsK,IAAK,CAC1C,IAAI08D,EAASsvG,EAAWhsK,CAAC,EAAE,IAAI,MAAM,EACrC,GAAI,KAAK,WAAW08D,CAAM,EAAG,CAE3B,KAAK,OAAOA,CAAM,EAClBuvG,EAAc,GACd,KACV,CACA,CAEM,CAACA,GAAe,KAAK,OAAOD,EAAW,CAAC,EAAE,IAAI,MAAM,CAAC,CAC3D,CACG,EACDF,EAAY,UAAU,YAAc,SAAUnnI,EAAS,CACrD,IAAIunI,EAAgB,CAAE,EAClBC,EAAiB,CAAE,EACvBxnI,EAAQ,cAAc,SAAUmgB,EAAa,CAC3C,IAAIqvC,EAAarvC,EAAY,KAC7BqnH,EAAe,KAAKh4E,CAAU,EAC9B,IAAIi4E,EACJ,GAAItnH,EAAY,qBAAsB,CACpC,IAAI06B,EAAW16B,EAAY,qBACvB4lB,EAAQ8U,EAAS,YAAa,EAC7B76C,EAAQ,iBAAiBmgB,CAAW,IACvCqnH,EAAiBA,EAAe,OAAOzhG,CAAK,GAE1CA,EAAM,OACRwhG,EAAgBA,EAAc,OAAOxhG,CAAK,EAE1C0hG,EAAc,EAExB,MACQA,EAAc,GAEZA,GAAe5oI,GAAgBshB,CAAW,GAC5ConH,EAAc,KAAKpnH,EAAY,IAAI,CAE3C,CAAK,EAKD,KAAK,gBAAkBqnH,EAGvB,IAAI5rF,EAAU,KAAK,IAAI,MAAM,GAAK2rF,EAC9BG,EAAgB32E,EAAsB,EACtCs2E,EAAa59I,EAAWmyD,EAAS,SAAUt/C,EAAU,CAOvD,OALInD,EAAgBmD,CAAQ,GAAKskC,GAAgBtkC,CAAQ,KACvDA,EAAW,CACT,KAAMA,CACP,GAECorI,EAAc,IAAIprI,EAAS,IAAI,EAE1B,MAETorI,EAAc,IAAIprI,EAAS,KAAM,EAAI,EAC9B,IAAI29B,GAAM39B,EAAU,KAAM,KAAK,OAAO,EAC9C,EAAE,IAAI,EAKP,KAAK,MAAQw2F,GAAcu0C,EAAY,SAAUnpI,EAAM,CACrD,MAAO,CAAC,CAACA,CACf,CAAK,CACF,EACDipI,EAAY,UAAU,QAAU,UAAY,CAC1C,OAAO,KAAK,KACb,EACDA,EAAY,UAAU,OAAS,SAAU37J,EAAM,CAC7C,IAAI+wF,EAAW,KAAK,OAAO,SACvBnL,EAAe,KAAK,IAAI,cAAc,EAC1C,GAAIA,IAAiB,SAAU,CAC7B,IAAIvxF,EAAO,KAAK,MAChB+qB,EAAY/qB,EAAM,SAAUy8B,EAAU,CACpCigE,EAASjgE,EAAS,IAAI,MAAM,CAAC,EAAI,EACzC,CAAO,CACP,CACIigE,EAAS/wF,CAAI,EAAI,EAClB,EACD27J,EAAY,UAAU,SAAW,SAAU37J,EAAM,CAC3C,KAAK,IAAI,cAAc,IAAM,WAC/B,KAAK,OAAO,SAASA,CAAI,EAAI,GAEhC,EACD27J,EAAY,UAAU,eAAiB,SAAU37J,EAAM,CACrD,IAAI+wF,EAAW,KAAK,OAAO,SAEtBA,EAAS,eAAe/wF,CAAI,IAC/B+wF,EAAS/wF,CAAI,EAAI,IAEnB,KAAK+wF,EAAS/wF,CAAI,EAAI,WAAa,QAAQ,EAAEA,CAAI,CAClD,EACD27J,EAAY,UAAU,UAAY,UAAY,CAC5C,IAAItnK,EAAO,KAAK,MACZ08F,EAAW,KAAK,OAAO,SAC3B3xE,EAAY/qB,EAAM,SAAUy8B,EAAU,CACpCigE,EAASjgE,EAAS,IAAI,OAAQ,EAAI,CAAC,EAAI,EAC7C,CAAK,CACF,EACD6qI,EAAY,UAAU,cAAgB,UAAY,CAChD,IAAItnK,EAAO,KAAK,MACZ08F,EAAW,KAAK,OAAO,SAC3B3xE,EAAY/qB,EAAM,SAAUy8B,EAAU,CACpC,IAAI9wB,EAAO8wB,EAAS,IAAI,OAAQ,EAAI,EAE/BigE,EAAS,eAAe/wF,CAAI,IAC/B+wF,EAAS/wF,CAAI,EAAI,IAEnB+wF,EAAS/wF,CAAI,EAAI,CAAC+wF,EAAS/wF,CAAI,CACrC,CAAK,CACF,EACD27J,EAAY,UAAU,WAAa,SAAU37J,EAAM,CACjD,IAAI+wF,EAAW,KAAK,OAAO,SAC3B,MAAO,EAAEA,EAAS,eAAe/wF,CAAI,GAAK,CAAC+wF,EAAS/wF,CAAI,IAAM4qB,EAAe,KAAK,gBAAiB5qB,CAAI,GAAK,CAC7G,EACD27J,EAAY,UAAU,UAAY,UAAY,CAC5C,OAAO,KAAK,IAAI,QAAQ,IAAM,WAAa,CACzC,MAAO,EACP,KAAM,UACZ,EAAQ,CACF,MAAO,EACP,KAAM,YACP,CACF,EACDA,EAAY,KAAO,eACnBA,EAAY,aAAe,CAAC,QAAQ,EACpCA,EAAY,cAAgB,CAE1B,EAAG,EACH,KAAM,GACN,OAAQ,aACR,KAAM,SAEN,IAAK,EAEL,MAAO,OACP,gBAAiB,gBACjB,YAAa,OACb,aAAc,EACd,YAAa,EACb,QAAS,EACT,QAAS,GACT,UAAW,GACX,WAAY,GACZ,aAAc,UACd,iBAAkB,GAClB,cAAe,OACf,oBAAqB,OACrB,oBAAqB,OACrB,UAAW,CACT,MAAO,UACP,QAAS,UACT,YAAa,UACb,YAAa,OACb,UAAW,UACX,WAAY,UACZ,iBAAkB,UAClB,iBAAkB,SACnB,EACD,UAAW,CACT,MAAO,OACP,MAAO,UACP,cAAe,OACf,cAAe,EACf,QAAS,UACT,KAAM,UACN,IAAK,UACL,KAAM,UACN,WAAY,UACZ,WAAY,SACb,EACD,UAAW,CACT,MAAO,MACR,EACD,aAAc,GACd,SAAU,GACV,cAAe,CACb,KAAM,GACN,aAAc,GACd,QAAS,CAAC,EAAG,EAAG,EAAG,CAAC,EACpB,SAAU,GACV,WAAY,aACZ,MAAO,OACP,YAAa,EACb,YAAa,MACd,EACD,SAAU,CACR,cAAe,CACb,KAAM,GACN,MAAO,OACP,gBAAiB,MACzB,CACK,EACD,iBAAkB,OAClB,gBAAiB,EACjB,kBAAmB,GACnB,QAAS,CACP,KAAM,EACZ,CACG,EACMA,CACT,EAAExgG,EAAc,ECpQZlmE,GAAQmkE,GACR9kE,GAAO8qB,EACPoL,GAAQ4gE,GACR+wE,GAA0B,SAAUh2J,EAAQ,CAC9CC,EAAU+1J,EAAYh2J,CAAM,EAC5B,SAASg2J,GAAa,CACpB,IAAI91J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO81J,EAAW,KACxB91J,EAAM,gBAAkB,GACjBA,CAAA,CAET81J,OAAAA,EAAW,UAAU,KAAO,UAAY,CACtC,KAAK,MAAM,IAAI,KAAK,cAAgB,IAAI3xI,EAAO,EAC/C,KAAK,MAAM,IAAI,KAAK,eAAiB,IAAIA,EAAO,EAChD,KAAK,eAAiB,EACxB,EAIA2xI,EAAW,UAAU,gBAAkB,UAAY,CACjD,OAAO,KAAK,aACd,EAIAA,EAAW,UAAU,iBAAmB,UAAY,CAClD,OAAO,KAAK,cACd,EAIAA,EAAW,UAAU,OAAS,SAAUC,EAAa5nI,EAASmf,EAAK,CACjE,IAAI0oH,EAAgB,KAAK,eAGzB,GAFA,KAAK,eAAiB,GACtB,KAAK,WAAW,EACZ,EAACD,EAAY,IAAI,OAAQ,EAAI,EAG7B,KAAAE,EAAYF,EAAY,IAAI,OAAO,EACnC5jG,EAAS4jG,EAAY,IAAI,QAAQ,GACjC,CAACE,GAAaA,IAAc,UAC9BA,EAAYF,EAAY,IAAI,MAAM,IAAM,SAAW5jG,IAAW,WAAa,QAAU,QAGvF,IAAIojG,EAAWQ,EAAY,IAAI,WAAY,EAAI,EAC3CG,EAAmBH,EAAY,IAAI,mBAAoB,EAAI,EAC3DR,IAAa,CAACW,GAAoBA,IAAqB,UACtCA,EAAA/jG,IAAW,aAAe,MAAQ,SAEvD,KAAK,YAAY8jG,EAAWF,EAAa5nI,EAASmf,EAAKioH,EAAUpjG,EAAQ+jG,CAAgB,EAErF,IAAAjjG,EAAe8iG,EAAY,mBAAmB,EAC9C3V,EAAe,CACjB,MAAO9yG,EAAI,SAAS,EACpB,OAAQA,EAAI,UAAU,CACxB,EACInY,EAAU4gI,EAAY,IAAI,SAAS,EACnCzoJ,EAAU6oJ,GAAyBljG,EAAcmtF,EAAcjrH,CAAO,EACtEihI,EAAW,KAAK,YAAYL,EAAaE,EAAW3oJ,EAAS0oJ,EAAeT,EAAUW,CAAgB,EAEtG73I,EAAa83I,GAAyBhoG,EAAgB,CACxD,MAAOioG,EAAS,MAChB,OAAQA,EAAS,MAAA,EAChBnjG,CAAY,EAAGmtF,EAAcjrH,CAAO,EACvC,KAAK,MAAM,EAAI9W,EAAW,EAAI+3I,EAAS,EACvC,KAAK,MAAM,EAAI/3I,EAAW,EAAI+3I,EAAS,EACvC,KAAK,MAAM,WAAW,EAEtB,KAAK,MAAM,IAAI,KAAK,cAAgB9V,GAAe8V,EAAUL,CAAW,CAAC,EAC3E,EACAD,EAAW,UAAU,WAAa,UAAY,CACvC,KAAA,kBAAkB,UAAU,EACjC,KAAK,eAAiB,KAAK,MAAM,OAAO,KAAK,aAAa,EACrD,KAAA,mBAAmB,UAAU,CACpC,EACAA,EAAW,UAAU,YAAc,SAAUG,EAAWF,EAAa5nI,EAASmf,EAAKioH,EAAUpjG,EAAQ+jG,EAAkB,CACjH,IAAAG,EAAe,KAAK,gBAAgB,EACpCC,EAAiBp3E,EAAqB,EACtCq3E,EAAaR,EAAY,IAAI,cAAc,EAC3Ct5D,EAAkB,CAAC,EACftuE,EAAA,cAAc,SAAUmgB,EAAa,CAC3C,CAACA,EAAY,IAAI,iBAAiB,GAAKmuD,EAAgB,KAAKnuD,EAAY,EAAE,CAAA,CAC3E,EACDrgD,GAAK8nK,EAAY,QAAW,EAAA,SAAUS,EAAiBznH,EAAW,CAC5D,IAAAp1C,EAAO68J,EAAgB,IAAI,MAAM,EAErC,GAAI,CAAC,KAAK,kBAAoB78J,IAAS,IAAMA,IAAS;AAAA,GAAO,CACvD,IAAA,EAAI,IAAIwqB,GAEZ,EAAE,QAAU,GACZkyI,EAAa,IAAI,CAAC,EAClB,MAAA,CAGF,IAAI/nH,EAAcngB,EAAQ,gBAAgBx0B,CAAI,EAAE,CAAC,EAC7C,GAAA,CAAA28J,EAAe,IAAI38J,CAAI,EAK3B,GAAI20C,EAAa,CACX,IAAAtgD,EAAOsgD,EAAY,QAAQ,EAC3BmoH,EAAkBzoK,EAAK,UAAU,iBAAiB,GAAK,CAAC,EACxD0oK,EAAa1oK,EAAK,UAAU,YAAY,EAKxClF,EAAQkF,EAAK,UAAU,OAAO,EAC9B2oK,EAAY,KAAK,YAAYroH,EAAa30C,EAAMo1C,EAAWynH,EAAiBT,EAAaE,EAAWQ,EAAiB3tK,EAAO4tK,EAAYH,EAAYjpH,CAAG,EAC3JqpH,EAAU,GAAG,QAAS/nK,GAAMgoK,GAAsBj9J,EAAM,KAAM2zC,EAAKmvD,CAAe,CAAC,EAAE,GAAG,YAAa7tG,GAAMioK,GAAyBvoH,EAAY,KAAM,KAAMhB,EAAKmvD,CAAe,CAAC,EAAE,GAAG,WAAY7tG,GAAMkoK,GAAwBxoH,EAAY,KAAM,KAAMhB,EAAKmvD,CAAe,CAAC,EACzQtuE,EAAQ,KACAwoI,EAAA,UAAU,SAAUtvJ,EAAO,CAC/B,IAAAiiC,EAASL,GAAU5hC,CAAK,EAC5BiiC,EAAO,YAAcgF,EAAY,YACjChF,EAAO,UAAYyF,EACnBzF,EAAO,QAAU,QAAA,CAClB,EAEYgtH,EAAA,IAAI38J,EAAM,EAAI,CAAA,MAGrBw0B,EAAA,cAAc,SAAUmgB,EAAa,CAEvC,GAAA,CAAAgoH,EAAe,IAAI38J,CAAI,GAGvB20C,EAAY,qBAAsB,CACpC,IAAI06B,EAAW16B,EAAY,qBAC3B,GAAI,CAAC06B,EAAS,YAAYrvE,CAAI,EAC5B,OAEE,IAAA+N,EAAMshE,EAAS,YAAYrvE,CAAI,EAC/B7Q,EAAQkgF,EAAS,cAActhE,EAAK,OAAO,EAC3CgvJ,EAAa1tF,EAAS,cAActhE,EAAK,YAAY,EACrD+H,EAAWf,GAAM5lB,EAAM,IAAI,EAG3B2mB,GAAYA,EAAS,CAAC,IAAM,IAC9BA,EAAS,CAAC,EAAI,GAEd3mB,EAAQ2oC,EAAcA,EAAc,CAAC,EAAG3oC,CAAK,EAAG,CAC9C,KAAM4mB,GAAUD,EAAU,MAAM,CAAA,CACjC,GAEH,IAAIknJ,EAAY,KAAK,YAAYroH,EAAa30C,EAAMo1C,EAAWynH,EAAiBT,EAAaE,EAAW,CAAA,EAAIntK,EAAO4tK,EAAYH,EAAYjpH,CAAG,EAE9IqpH,EAAU,GAAG,QAAS/nK,GAAMgoK,GAAsB,KAAMj9J,EAAM2zC,EAAKmvD,CAAe,CAAC,EAGlF,GAAG,YAAa7tG,GAAMioK,GAAyB,KAAMl9J,EAAM2zC,EAAKmvD,CAAe,CAAC,EAAE,GAAG,WAAY7tG,GAAMkoK,GAAwB,KAAMn9J,EAAM2zC,EAAKmvD,CAAe,CAAC,EAC7JtuE,EAAQ,KACVwoI,EAAU,UAAU,SAAUtvJ,EAAO,CAC/B,IAAAiiC,EAASL,GAAU5hC,CAAK,EAC5BiiC,EAAO,YAAcgF,EAAY,YACjChF,EAAO,UAAYyF,EACnBzF,EAAO,QAAU,QAAA,CAClB,EAEYgtH,EAAA,IAAI38J,EAAM,EAAI,CAAA,GAE9B,IAAI,GAOR,IAAI,EACH47J,GACF,KAAK,gBAAgBA,EAAUQ,EAAazoH,EAAK6kB,EAAQ+jG,CAAgB,CAE7E,EACAJ,EAAW,UAAU,gBAAkB,SAAUP,EAAUQ,EAAazoH,EAAK6kB,EAAQ+jG,EAAkB,CACjG,IAAAa,EAAgB,KAAK,iBAAiB,EACrC9oK,GAAAsnK,EAAU,SAA8ByB,EAAc,CACzD,IAAIhoK,EAAOgoK,EAAa,KACpBC,EAAY,IAAI/xE,GAAa,CAC/B,MAAO,CACL,EAAG,EACH,EAAG,EACH,MAAO,SACP,cAAe,QACjB,EACA,QAAS,UAAY,CACnB53C,EAAI,eAAe,CACjB,KAAMt+C,IAAS,MAAQ,kBAAoB,sBAC3C,SAAU+mK,EAAY,EAAA,CACvB,CAAA,CACH,CACD,EACDgB,EAAc,IAAIE,CAAS,EACvB,IAAAx1C,EAAas0C,EAAY,SAAS,eAAe,EACjDmB,EAAqBnB,EAAY,SAAS,CAAC,WAAY,eAAe,CAAC,EAC3E5xG,GAAc8yG,EAAW,CACvB,OAAQx1C,EACR,SAAUy1C,CAAA,EACT,CACD,YAAaF,EAAa,KAAA,CAC3B,EACDlnH,GAAoBmnH,CAAS,CAAA,CAC9B,CACH,EACAnB,EAAW,UAAU,YAAc,SAAUxnH,EAAa30C,EAAMo1C,EAAWynH,EAAiBT,EAAaE,EAAWQ,EAAiBU,EAAiBT,EAAYH,EAAYjpH,EAAK,CACjL,IAAI8pH,EAAW9oH,EAAY,eACvB+oH,EAAYtB,EAAY,IAAI,WAAW,EACvCuB,EAAavB,EAAY,IAAI,YAAY,EACzCwB,EAAaxB,EAAY,WAAWp8J,CAAI,EACxC69J,EAAahB,EAAgB,IAAI,cAAc,EAC/CiB,EAAmBjB,EAAgB,IAAI,kBAAkB,EACzDkB,EAAiBlB,EAAgB,IAAI,MAAM,EAC/CE,EAAagB,GAAkBhB,GAAc,YACzC,IAAA5tK,EAAQ6uK,GAAejB,EAAYF,EAAiBC,EAAiBU,EAAiBC,EAAUG,EAAYjqH,CAAG,EAC/GqpH,EAAY,IAAIxyI,GAChBihC,EAAiBoxG,EAAgB,SAAS,WAAW,EACrD,GAAA3kI,EAAkByc,EAAY,aAAa,IAAM,CAACopH,GAAkBA,IAAmB,WAE/Ef,EAAA,IAAIroH,EAAY,cAAc,CACtC,UAAA+oH,EACA,WAAAC,EACA,KAAMZ,EACN,WAAAc,EACA,UAAW1uK,EAAM,UACjB,UAAWA,EAAM,UACjB,iBAAA2uK,CAAA,CACD,CAAC,MACG,CAEL,IAAI77J,EAAS87J,IAAmB,WAAappH,EAAY,QAAA,EAAU,UAAU,QAAQ,EAAIkpH,IAAe,UAAYlpH,EAAY,QAAA,EAAU,UAAU,cAAc,EAAIkpH,EAAa,EACnLb,EAAU,IAAIiB,GAAqB,CACjC,UAAAP,EACA,WAAAC,EACA,KAAMZ,EACN,WAAY96J,EACZ,UAAW9S,EAAM,UAEjB,iBAAA2uK,CAAA,CACD,CAAC,CAAA,CAEJ,IAAIlxH,EAAQ0vH,IAAc,OAASoB,EAAY,EAAI,GAC/C16I,EAAYs5I,EACZhoG,EAAY8nG,EAAY,IAAI,WAAW,EACvC1G,EAAU11J,EACV2tB,EAAgB2mC,CAAS,GAAKA,EAChCohG,EAAUphG,EAAU,QAAQ,SAAUt0D,GAAsB,EAAE,EACrDk4B,EAAkBo8B,CAAS,IACpCohG,EAAUphG,EAAUt0D,CAAI,GAE1B,IAAI2nI,EAAYi2B,EAAanyG,EAAe,eAAiBoxG,EAAgB,IAAI,eAAe,EACtFG,EAAA,IAAI,IAAIzxE,GAAa,CAC7B,MAAOtgC,GAAgBQ,EAAgB,CACrC,KAAMiqG,EACN,EAAG9oH,EACH,EAAG+wH,EAAa,EAChB,KAAMh2B,EACN,MAAO3kH,EACP,cAAe,QAAA,EACd,CACD,aAAc2kH,CACf,CAAA,CAAA,CACF,CAAC,EAEE,IAAAu2B,EAAU,IAAI5yE,GAAa,CAC7B,MAAO0xE,EAAU,gBAAgB,EACjC,MAAO,CAEL,KAAM,aAAA,CACR,CACD,EACG7K,EAAe0K,EAAgB,SAAS,SAAS,EACjD,OAAA1K,EAAa,IAAI,MAAM,GACzB9sB,GAAyB,CACvB,GAAI64B,EACJ,eAAgB9B,EAChB,SAAUp8J,EACV,kBAAmBmyJ,EAAa,MAAA,CACjC,EAEH6K,EAAU,IAAIkB,CAAO,EACXlB,EAAA,UAAU,SAAUtvJ,EAAO,CACnCA,EAAM,OAAS,EAAA,CAChB,EACDwwJ,EAAQ,OAAS,CAACtB,EACb,KAAA,gBAAA,EAAkB,IAAII,CAAS,EACpC7mH,GAAoB6mH,CAAS,EAE7BA,EAAU,kBAAoB5nH,EACvB4nH,CACT,EACAb,EAAW,UAAU,YAAc,SAAUC,EAAaE,EAAW3oJ,EAAS0oJ,EAAeT,EAAUW,EAAkB,CACnH,IAAAG,EAAe,KAAK,gBAAgB,EACpCU,EAAgB,KAAK,iBAAiB,EAE1Ce,GAAe/B,EAAY,IAAI,QAAQ,EAAGM,EAAcN,EAAY,IAAI,SAAS,EAAGzoJ,EAAQ,MAAOA,EAAQ,MAAM,EAC7G,IAAAyqJ,EAAc1B,EAAa,gBAAgB,EAC3C2B,EAAa,CAAC,CAACD,EAAY,EAAG,CAACA,EAAY,CAAC,EAGhD,GAFAhB,EAAc,WAAW,EACzBV,EAAa,WAAW,EACpBd,EAAU,CAEDuC,GAEX,aAAcf,EAAehB,EAAY,IAAI,kBAAmB,EAAI,CAAC,EACjE,IAAAkC,EAAelB,EAAc,gBAAgB,EAC7CmB,EAAc,CAAC,CAACD,EAAa,EAAG,CAACA,EAAa,CAAC,EAC/CE,EAAoBpC,EAAY,IAAI,oBAAqB,EAAI,EAC7DqC,EAAYrC,EAAY,UAAA,EAAY,MACpCpoE,EAAKyqE,IAAc,EAAI,QAAU,SACjCC,EAAKD,IAAc,EAAI,SAAW,QAClCE,EAAKF,IAAc,EAAI,IAAM,IAC7BlC,IAAqB,MACvBgC,EAAYE,CAAS,GAAKL,EAAYpqE,CAAE,EAAIwqE,EAE5CH,EAAWI,CAAS,GAAKH,EAAatqE,CAAE,EAAIwqE,EAGlCD,EAAA,EAAIE,CAAS,GAAKL,EAAYM,CAAE,EAAI,EAAIJ,EAAaI,CAAE,EAAI,EACzDtB,EAAA,EAAImB,EAAY,CAAC,EACjBnB,EAAA,EAAImB,EAAY,CAAC,EAClB7B,EAAA,EAAI2B,EAAW,CAAC,EAChB3B,EAAA,EAAI2B,EAAW,CAAC,EAC7B,IAAI5B,EAAW,CACb,EAAG,EACH,EAAG,CACL,EACA,OAAAA,EAASzoE,CAAE,EAAIoqE,EAAYpqE,CAAE,EAAIwqE,EAAoBF,EAAatqE,CAAE,EAC3DyoE,EAAAiC,CAAE,EAAI,KAAK,IAAIN,EAAYM,CAAE,EAAGJ,EAAaI,CAAE,CAAC,EAChDjC,EAAAkC,CAAE,EAAI,KAAK,IAAI,EAAGL,EAAaK,CAAE,EAAIJ,EAAY,EAAIE,CAAS,CAAC,EACjEhC,CAAA,KAEM,QAAAC,EAAA,EAAI2B,EAAW,CAAC,EAChB3B,EAAA,EAAI2B,EAAW,CAAC,EACtB,KAAK,MAAM,gBAAgB,CAEtC,EAIAlC,EAAW,UAAU,OAAS,UAAY,CACnC,KAAA,kBAAkB,UAAU,EACjC,KAAK,eAAiB,EACxB,EACAA,EAAW,KAAO,eACXA,CAAA,EACPp1E,EAAa,EACf,SAASi3E,GAAeY,EAAU/B,EAAiBC,EAAiBU,EAAiBC,EAAUG,EAAYjqH,EAAK,CAKrG,SAAAkrH,EAAkB1vK,EAAO2vK,EAAa,CAEzC3vK,EAAM,YAAc,SACtBA,EAAM,UAAY2vK,EAAY,UAAY,EAAI,EAAI,GAE/CxqK,GAAAnF,EAAO,SAAU4vK,EAASxlJ,EAAU,CACvCpqB,EAAMoqB,CAAQ,IAAM,YAAcpqB,EAAMoqB,CAAQ,EAAIulJ,EAAYvlJ,CAAQ,EAAA,CACzE,CAAA,CAGC,IAAAylJ,EAAiBnC,EAAgB,SAAS,WAAW,EACrDlxF,EAAYqzF,EAAe,aAAa,EACxCC,EAAgBL,EAAS,YAAY,QAAS,CAAC,IAAM,EAAI,OAAS,SAClEM,EAAaF,EAAe,WAAW,OAAO,EACxCrzF,EAAA,MAAQ,CAACuzF,GAAcA,IAAe,UAAY1B,EAAgB,MAAQ1kE,GAA+BomE,EAAYvrH,CAAG,EAC9Hg4B,EAAU,OAAS,YAKXA,EAAA,KAAO6xF,EAAgBC,CAAQ,GAEvC9xF,EAAU,SAAW,YAKbA,EAAA,OAAS6xF,EAAgByB,CAAa,GAE9CtzF,EAAU,UAAY,YAIxBA,EAAU,SAAW8xF,IAAa,OAASD,EAAkBV,GAAiB,SAEhF+B,EAAkBlzF,EAAW6xF,CAAe,EAExC,IAAA2B,EAAkBtC,EAAgB,SAAS,WAAW,EACtDvgC,EAAY6iC,EAAgB,aAAa,EAM7C,GALAN,EAAkBviC,EAAWwgC,CAAe,EAE5CnxF,EAAU,OAAS,SAAWA,EAAU,KAAO6xF,EAAgB,MAC/D7xF,EAAU,SAAW,SAAWA,EAAU,OAAS6xF,EAAgB,MACnElhC,EAAU,SAAW,SAAWA,EAAU,OAASkhC,EAAgB,MAC/D,CAACI,EAAY,CACX,IAAAzK,EAAc0J,EAAgB,IAAI,qBAAqB,EAMvDuC,EAAkBzzF,EAAUszF,CAAa,EACnCtzF,EAAA,UAAYwnF,IAAgB,OAASqK,EAAgB,UAAY,GAAK4B,EAAkB,EAAI,EAAIzzF,EAAU,UAC1GA,EAAA,KAAOkxF,EAAgB,IAAI,eAAe,EAC1ClxF,EAAA,OAASkxF,EAAgB,IAAI,qBAAqB,EAClDvgC,EAAA,OAAS6iC,EAAgB,IAAI,eAAe,EAC5C7iC,EAAA,UAAY6iC,EAAgB,IAAI,eAAe,CAAA,CAEpD,MAAA,CACL,UAAAxzF,EACA,UAAA2wD,CACF,CACF,CACA,SAAS2hC,GAAqBh+J,EAAK,CAC7B,IAAAo/J,EAAYp/J,EAAI,MAAQ,YACxBooJ,EAAOz1D,GAAaysE,EAAW,EAAG,EAAGp/J,EAAI,UAAWA,EAAI,WAAYA,EAAI,UAAU,KAAMA,EAAI,gBAAgB,EAC3G,OAAAooJ,EAAA,SAASpoJ,EAAI,SAAS,EAC3BooJ,EAAK,UAAYpoJ,EAAI,YAAc,GAAK,KAAK,GAAK,IAC7CooJ,EAAA,UAAU,CAACpoJ,EAAI,UAAY,EAAGA,EAAI,WAAa,CAAC,CAAC,EAClDo/J,EAAU,QAAQ,OAAO,EAAI,KAC1BhX,EAAA,MAAM,OAASA,EAAK,MAAM,KAC/BA,EAAK,MAAM,KAAO,OAClBA,EAAK,MAAM,UAAY,GAElBA,CACT,CACA,SAAS4U,GAAqBj5E,EAAYs7E,EAAU3rH,EAAKmvD,EAAiB,CAEjDq6D,GAAAn5E,EAAYs7E,EAAU3rH,EAAKmvD,CAAe,EACjEnvD,EAAI,eAAe,CACjB,KAAM,qBACN,KAAMqwC,GAAkCs7E,CAAA,CACzC,EAGuBpC,GAAAl5E,EAAYs7E,EAAU3rH,EAAKmvD,CAAe,CACpE,CACA,SAASy8D,GAAgB5rH,EAAK,CAKrB,QAJH9rC,EAAO8rC,EAAI,MAAM,EAAE,QAAQ,eAAe,EAC1Co4E,EACA,EAAI,EACJx5H,EAAMsV,EAAK,OACR,EAAItV,GAAO,EAAEw5H,EAAgBlkH,EAAK,CAAC,EAAE,OAAO,WACjD,IAEF,OAAOkkH,GAAiBA,EAAc,UACxC,CACA,SAASmxC,GAAwBl5E,EAAYs7E,EAAU3rH,EAAKmvD,EAAiB,CAEtEy8D,GAAgB5rH,CAAG,GACtBA,EAAI,eAAe,CACjB,KAAM,YACN,WAAAqwC,EACA,KAAMs7E,EACN,gBAAAx8D,CAAA,CACD,CAEL,CACA,SAASq6D,GAAuBn5E,EAAYs7E,EAAU3rH,EAAKmvD,EAAiB,CAErEy8D,GAAgB5rH,CAAG,GACtBA,EAAI,eAAe,CACjB,KAAM,WACN,WAAAqwC,EACA,KAAMs7E,EACN,gBAAAx8D,CAAA,CACD,CAEL,CChee,SAAS08D,GAAahrI,EAAS,CAC5C,IAAIirI,EAAejrI,EAAQ,eAAe,CACxC,SAAU,QACd,CAAG,EACGirI,GAAgBA,EAAa,QAC/BjrI,EAAQ,aAAa,SAAUwwC,EAAQ,CAGrC,QAAS,EAAI,EAAG,EAAIy6F,EAAa,OAAQ,IACvC,GAAI,CAACA,EAAa,CAAC,EAAE,WAAWz6F,EAAO,IAAI,EACzC,MAAO,GAGX,MAAO,EACb,CAAK,CAEL,CCfA,SAAS06F,GAA0BjnI,EAAYtE,EAASK,EAAS,CAC/D,IAAImrI,EAAclnI,IAAe,aAAeA,IAAe,gBAC3DktD,EAAc,CAAE,EAChBi6E,EAAsB,CAAE,EAC5BprI,EAAQ,cAAc,CACpB,SAAU,SACV,MAAOL,CACR,EAAE,SAAUioI,EAAa,CACpBuD,EACFvD,EAAY3jI,CAAU,EAAG,EAEzB2jI,EAAY3jI,CAAU,EAAEtE,EAAQ,IAAI,EAEtC0rI,GAAgBzD,EAAaz2E,CAAW,EACxCi6E,EAAoB,KAAKxD,EAAY,cAAc,CACvD,CAAG,EACD,IAAI0D,EAAiB,CAAE,EAEvB,OAAAtrI,EAAQ,cAAc,SAAU,SAAU4nI,EAAa,CACrD9nK,EAAKqxF,EAAa,SAAUi4E,EAAY59J,EAAM,CAK5Co8J,EAAYwB,EAAa,SAAW,UAAU,EAAE59J,CAAI,CAC1D,CAAK,EACD6/J,GAAgBzD,EAAa0D,CAAc,CAC/C,CAAG,EAEMH,EAAc,CACnB,SAAUG,EAEV,YAAaF,CACjB,EAAM,CACF,KAAMzrI,EAAQ,KACd,SAAU2rI,CACX,CACH,CACA,SAASD,GAAgBzD,EAAa7jK,EAAK,CACzC,IAAIotF,EAAcptF,GAAO,CAAE,EAC3BjE,OAAAA,EAAK8nK,EAAY,QAAS,EAAE,SAAUhjI,EAAO,CAC3C,IAAIp5B,EAAOo5B,EAAM,IAAI,MAAM,EAE3B,GAAI,EAAAp5B,IAAS;AAAA,GAAQA,IAAS,IAG9B,KAAI+/J,EAAiB3D,EAAY,WAAWp8J,CAAI,EAC5ClI,GAAO6tF,EAAa3lF,CAAI,EAE1B2lF,EAAY3lF,CAAI,EAAI2lF,EAAY3lF,CAAI,GAAK+/J,EAEzCp6E,EAAY3lF,CAAI,EAAI+/J,EAE1B,CAAG,EACMp6E,CACT,CACO,SAASq6E,GAAoB7jC,EAAW,CAQ7CA,EAAU,eAAe,qBAAsB,sBAAuBlnI,GAAMyqK,GAA2B,gBAAgB,CAAC,EACxHvjC,EAAU,eAAe,kBAAmB,kBAAmBlnI,GAAMyqK,GAA2B,WAAW,CAAC,EAC5GvjC,EAAU,eAAe,sBAAuB,sBAAuBlnI,GAAMyqK,GAA2B,eAAe,CAAC,EAOxHvjC,EAAU,eAAe,eAAgB,iBAAkBlnI,GAAMyqK,GAA2B,QAAQ,CAAC,EAOrGvjC,EAAU,eAAe,iBAAkB,mBAAoBlnI,GAAMyqK,GAA2B,UAAU,CAAC,CAC7G,CC9EO,SAASxjC,GAAQC,EAAW,CACjCA,EAAU,uBAAuBw/B,EAAW,EAC5Cx/B,EAAU,sBAAsBggC,EAAU,EAC1ChgC,EAAU,kBAAkBA,EAAU,SAAS,UAAU,cAAeqjC,EAAY,EACpFrjC,EAAU,yBAAyB,SAAU,UAAY,CACvD,MAAO,OACX,CAAG,EACD6jC,GAAoB7jC,CAAS,CAC/B,CCRA,IAAI8jC,GAAqC,SAAU95J,EAAQ,CACzDC,EAAU65J,EAAuB95J,CAAM,EACvC,SAAS85J,GAAwB,CAC/B,IAAI55J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO45J,EAAsB,KAC5B55J,CACX,CAIE,OAAA45J,EAAsB,UAAU,mBAAqB,SAAUC,EAAiB,CAC9E,KAAK,OAAO,gBAAkBA,CAC/B,EACDD,EAAsB,UAAU,KAAO,SAAUvxG,EAAQC,EAAan6B,EAAS,CAC7E,IAAI8mC,EAAsBN,GAAgBtM,CAAM,EAChDvoD,EAAO,UAAU,KAAK,KAAK,KAAMuoD,EAAQC,EAAan6B,CAAO,EAC7D2rI,GAA8B,KAAMzxG,EAAQ4M,CAAmB,CAChE,EAID2kG,EAAsB,UAAU,YAAc,SAAUvxG,EAAQl6B,EAAS,CACvEruB,EAAO,UAAU,YAAY,KAAK,KAAMuoD,EAAQl6B,CAAO,EACvD2rI,GAA8B,KAAM,KAAK,OAAQzxG,CAAM,CACxD,EACDuxG,EAAsB,KAAO,gBAC7BA,EAAsB,cAAgBpvG,GAAqB8qG,GAAY,cAAe,CACpF,gBAAiB,EACjB,kBAAmB,EACnB,cAAe,KACf,mBAAoB,MACpB,cAAe,oBACf,UAAW,CACT,WAAY,CAAC,qBAAsB,sBAAsB,EACzD,SAAU,CAAC,oBAAqB,kBAAkB,CACnD,EACD,cAAe,UACf,sBAAuB,OACvB,aAAc,GACd,cAAe,CACb,MAAO,MACR,EACD,wBAAyB,GAC7B,CAAG,EACMsE,CACT,EAAEtE,EAAW,EAGb,SAASwE,GAA8B/D,EAAaxpK,EAAQwtK,EAAK,CAC/D,IAAI5nG,EAAS4jG,EAAY,UAAW,EAChChiG,EAAa,CAAC,EAAG,CAAC,EACtBA,EAAW5B,EAAO,KAAK,EAAI,EAC3B0B,GAAiBtnE,EAAQwtK,EAAK,CAC5B,KAAM,MACN,WAAY,CAAC,CAAChmG,CAClB,CAAG,CACH,CCpDA,IAAI5vC,GAAQ4gE,GACRi1E,GAAK,CAAC,QAAS,QAAQ,EACvBC,GAAK,CAAC,IAAK,GAAG,EACdC,GAAoC,SAAUp6J,EAAQ,CACxDC,EAAUm6J,EAAsBp6J,CAAM,EACtC,SAASo6J,GAAuB,CAC9B,IAAIl6J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOk6J,EAAqB,KAClCl6J,EAAM,gBAAkB,GACxBA,EAAM,cAAgB,EACfA,CACX,CACE,OAAAk6J,EAAqB,UAAU,KAAO,UAAY,CAChDp6J,EAAO,UAAU,KAAK,KAAK,IAAI,EAC/B,KAAK,MAAM,IAAI,KAAK,gBAAkB,IAAIqkB,EAAO,EACjD,KAAK,gBAAgB,IAAI,KAAK,gBAAe,CAAE,EAC/C,KAAK,MAAM,IAAI,KAAK,iBAAmB,IAAIA,EAAO,CACnD,EAID+1I,EAAqB,UAAU,WAAa,UAAY,CACtDp6J,EAAO,UAAU,WAAW,KAAK,IAAI,EACrC,KAAK,iBAAiB,UAAW,EACjC,KAAK,gBAAgB,eAAgB,EACrC,KAAK,gBAAgB,WAAa,IACnC,EAIDo6J,EAAqB,UAAU,YAAc,SAAUjE,EAAWF,EAAa5nI,EAASmf,EAAKioH,EAAUpjG,EAAQ+jG,EAAkB,CAC/H,IAAI7/I,EAAO,KAEXvW,EAAO,UAAU,YAAY,KAAK,KAAMm2J,EAAWF,EAAa5nI,EAASmf,EAAKioH,EAAUpjG,EAAQ+jG,CAAgB,EAChH,IAAIiE,EAAkB,KAAK,iBAGvBC,EAAerE,EAAY,IAAI,eAAgB,EAAI,EACnDsE,EAAkB/rG,EAAe8rG,CAAY,EAAIA,EAAe,CAACA,EAAcA,CAAY,EAC/FE,EAAiB,WAAY,CAAC,EAC9B,IAAIC,EAAqBxE,EAAY,SAAS,eAAe,EAC7DoE,EAAgB,IAAI,IAAIj1E,GAAa,CACnC,KAAM,WACN,MAAO,CAEL,KAAM,QACN,KAAMq1E,EAAmB,aAAc,EACvC,KAAMA,EAAmB,QAAS,EAClC,cAAe,SACf,MAAO,QACR,EACD,OAAQ,EACd,CAAK,CAAC,EACFD,EAAiB,WAAY,CAAC,EAC9B,SAASA,EAAiB3gK,EAAM6gK,EAAS,CACvC,IAAIC,EAAoB9gK,EAAO,YAC3BqoJ,EAAOlP,GAAmBijB,EAAY,IAAI,YAAa,EAAI,EAAEA,EAAY,UAAW,EAAC,IAAI,EAAEyE,CAAO,EAAG,CAGvG,QAAS16F,EAAYzpD,EAAK,QAASA,EAAMokJ,EAAmB1E,EAAazoH,CAAG,CACpF,EAAS,CACD,EAAG,CAAC+sH,EAAgB,CAAC,EAAI,EACzB,EAAG,CAACA,EAAgB,CAAC,EAAI,EACzB,MAAOA,EAAgB,CAAC,EACxB,OAAQA,EAAgB,CAAC,CACjC,CAAO,EACDrY,EAAK,KAAOroJ,EACZwgK,EAAgB,IAAInY,CAAI,CAC9B,CACG,EAIDkY,EAAqB,UAAU,YAAc,SAAUnE,EAAaE,EAAW3oJ,EAAS0oJ,EAAeT,EAAUW,EAAkB,CACjI,IAAIa,EAAgB,KAAK,iBAAkB,EACvCqB,EAAYrC,EAAY,UAAS,EAAG,MACpCpoE,EAAKqsE,GAAG5B,CAAS,EACjBhlB,EAAK6mB,GAAG7B,CAAS,EACjBC,EAAK2B,GAAG,EAAI5B,CAAS,EACrBE,EAAK2B,GAAG,EAAI7B,CAAS,EACzB7C,GAAYuC,GAEZ,aAAcf,EAAehB,EAAY,IAAI,kBAAmB,EAAI,CAAC,EACrE,IAAIoC,EAAoBpC,EAAY,IAAI,oBAAqB,EAAI,EAC7DkC,EAAelB,EAAc,gBAAiB,EAC9CmB,EAAc,CAAC,CAACD,EAAa,EAAG,CAACA,EAAa,CAAC,EAC/CyC,EAAiB1wD,EAAa18F,CAAO,EACzCioJ,IAAamF,EAAe/sE,CAAE,EAAIrgF,EAAQqgF,CAAE,EAAIsqE,EAAatqE,CAAE,EAAIwqE,GACnE,IAAI/B,EAAW,KAAK,4BAA4BL,EAAaC,EAAe0E,EAAgBtC,EAAWzqE,EAAI0qE,EAAIC,EAAIllB,CAAE,EACrH,GAAImiB,EAAU,CACZ,GAAIW,IAAqB,MACvBgC,EAAYE,CAAS,GAAKhC,EAASzoE,CAAE,EAAIwqE,MACpC,CACL,IAAIlnK,EAASgnK,EAAatqE,CAAE,EAAIwqE,EAChCD,EAAYE,CAAS,GAAKnnK,EAC1BmlK,EAAShjB,CAAE,GAAKniJ,CACxB,CACMmlK,EAASzoE,CAAE,GAAKsqE,EAAatqE,CAAE,EAAIwqE,EACnCD,EAAY,EAAIE,CAAS,GAAKhC,EAASkC,CAAE,EAAIlC,EAASiC,CAAE,EAAI,EAAIJ,EAAaI,CAAE,EAAI,EACnFjC,EAASiC,CAAE,EAAI,KAAK,IAAIjC,EAASiC,CAAE,EAAGJ,EAAaI,CAAE,CAAC,EACtDjC,EAASkC,CAAE,EAAI,KAAK,IAAIlC,EAASkC,CAAE,EAAGL,EAAaK,CAAE,EAAIJ,EAAY,EAAIE,CAAS,CAAC,EACnFrB,EAAc,EAAImB,EAAY,CAAC,EAC/BnB,EAAc,EAAImB,EAAY,CAAC,EAC/BnB,EAAc,WAAY,CAChC,CACI,OAAOX,CACR,EACD8D,EAAqB,UAAU,4BAA8B,SAAUnE,EAAaC,EAAe1oJ,EAAS8qJ,EAAWzqE,EAAI0qE,EAAIC,EAAIllB,EAAI,CACrI,IAAIijB,EAAe,KAAK,gBAAiB,EACrCsE,EAAiB,KAAK,gBACtBR,EAAkB,KAAK,iBAE3BrC,GAAe/B,EAAY,IAAI,QAAQ,EAAGM,EAAcN,EAAY,IAAI,SAAS,EAAIqC,EAAmB9qJ,EAAQ,MAAf,KAAsB8qJ,EAAY,KAAO9qJ,EAAQ,MAAM,EACxJwqJ,GAEA,aAAcqC,EAAiBpE,EAAY,IAAI,oBAAqB,EAAI,CAAC,EACzE,IAAIgC,EAAc1B,EAAa,gBAAiB,EAC5CuE,EAAiBT,EAAgB,gBAAiB,EAClDU,EAAiB,KAAK,gBAAkB9C,EAAYpqE,CAAE,EAAIrgF,EAAQqgF,CAAE,EAEpEqqE,EAAa,CAAC,CAACD,EAAY,EAAG,CAACA,EAAY,CAAC,EAI3C/B,IACHgC,EAAWI,CAAS,EAAI/B,EAAajjB,CAAE,GAGzC,IAAI0nB,EAAe,CAAC,EAAG,CAAC,EACpBC,EAAgB,CAAC,CAACH,EAAe,EAAG,CAACA,EAAe,CAAC,EACrDI,EAAgBl1I,EAAiBiwI,EAAY,IAAI,gBAAiB,EAAI,EAAGA,EAAY,IAAI,UAAW,EAAI,CAAC,EAE7G,GAAI8E,EAAgB,CAClB,IAAII,EAAqBlF,EAAY,IAAI,qBAAsB,EAAI,EAE/DkF,IAAuB,MACzBF,EAAc3C,CAAS,GAAK9qJ,EAAQqgF,CAAE,EAAIitE,EAAejtE,CAAE,EAI3DmtE,EAAa1C,CAAS,GAAKwC,EAAejtE,CAAE,EAAIqtE,CAExD,CAEID,EAAc,EAAI3C,CAAS,GAAKL,EAAYM,CAAE,EAAI,EAAIuC,EAAevC,CAAE,EAAI,EAC3EhC,EAAa,YAAY2B,CAAU,EACnC2C,EAAe,YAAYG,CAAY,EACvCX,EAAgB,YAAYY,CAAa,EAIzC,IAAI3E,EAAW,CACb,EAAG,EACH,EAAG,CACJ,EAOD,GALAA,EAASzoE,CAAE,EAAIktE,EAAiBvtJ,EAAQqgF,CAAE,EAAIoqE,EAAYpqE,CAAE,EAC5DyoE,EAASiC,CAAE,EAAI,KAAK,IAAIN,EAAYM,CAAE,EAAGuC,EAAevC,CAAE,CAAC,EAE3DjC,EAASkC,CAAE,EAAI,KAAK,IAAI,EAAGsC,EAAetC,CAAE,EAAIyC,EAAc,EAAI3C,CAAS,CAAC,EAC5EuC,EAAe,WAAartJ,EAAQqgF,CAAE,EAClCktE,EAAgB,CAClB,IAAIhnC,EAAY,CACd,EAAG,EACH,EAAG,CACJ,EACDA,EAAUlmC,CAAE,EAAI,KAAK,IAAIrgF,EAAQqgF,CAAE,EAAIitE,EAAejtE,CAAE,EAAIqtE,EAAe,CAAC,EAC5EnnC,EAAUwkC,CAAE,EAAIjC,EAASiC,CAAE,EAC3BsC,EAAe,YAAY,IAAI11E,GAAa,CAC1C,MAAO4uC,CACf,CAAO,CAAC,EAGF8mC,EAAe,WAAa9mC,EAAUlmC,CAAE,CAC9C,MAEMwsE,EAAgB,UAAU,SAAU9yJ,EAAO,CACzCA,EAAM,KAAK,CACT,UAAW,GACX,OAAQ,EAClB,CAAS,CACT,CAAO,EAGH,IAAI6zJ,EAAW,KAAK,aAAanF,CAAW,EAC5C,OAAAmF,EAAS,WAAa,MAAQx0C,GAAoB2vC,EAAc,CAC9D,EAAG6E,EAAS,gBAAgB,CAAC,EAC7B,EAAGA,EAAS,gBAAgB,CAAC,CAC9B,EAGDL,EAAiB9E,EAAc,IAAI,EACnC,KAAK,oBAAoBA,EAAamF,CAAQ,EACvC9E,CACR,EACD8D,EAAqB,UAAU,QAAU,SAAU/Q,EAAI4M,EAAazoH,EAAK,CACvE,IAAIusH,EAAkB,KAAK,aAAa9D,CAAW,EAAE5M,CAAE,EACvD0Q,GAAmB,MAAQvsH,EAAI,eAAe,CAC5C,KAAM,eACN,gBAAiBusH,EACjB,SAAU9D,EAAY,EAC5B,CAAK,CACF,EACDmE,EAAqB,UAAU,oBAAsB,SAAUnE,EAAamF,EAAU,CACpF,IAAIf,EAAkB,KAAK,iBAC3BphJ,EAAY,CAAC,WAAY,UAAU,EAAG,SAAUpf,EAAM,CACpD,IAAItN,EAAMsN,EAAO,YACbwhK,EAAUD,EAAS7uK,CAAG,GAAK,KAC3B21J,EAAOmY,EAAgB,YAAYxgK,CAAI,EACvCqoJ,IACFA,EAAK,SAAS,OAAQmZ,EAAUpF,EAAY,IAAI,gBAAiB,EAAI,EAAIA,EAAY,IAAI,wBAAyB,EAAI,CAAC,EACvH/T,EAAK,OAASmZ,EAAU,UAAY,UAE5C,CAAK,EACD,IAAIC,EAAWjB,EAAgB,YAAY,UAAU,EACjDkB,EAAgBtF,EAAY,IAAI,eAAe,EAC/CuF,EAAYJ,EAAS,UACrBjsH,EAAUqsH,GAAa,KAAOA,EAAY,EAAI,EAC9Cj3H,EAAQ62H,EAAS,UACrBE,GAAYC,GAAiBD,EAAS,SAAS,OAAQ9zI,EAAgB+zI,CAAa,EAAIA,EAAc,QAAQ,YAAapsH,GAAW,KAAO,GAAKA,EAAU,EAAE,EAAE,QAAQ,UAAW5K,GAAS,KAAO,GAAKA,EAAQ,EAAE,EAAIg3H,EAAc,CAClO,QAASpsH,EACT,MAAO5K,CACb,CAAK,CAAC,CACH,EASD61H,EAAqB,UAAU,aAAe,SAAUnE,EAAa,CACnE,IAAI8D,EAAkB9D,EAAY,IAAI,kBAAmB,EAAI,EACzDM,EAAe,KAAK,gBAAiB,EACrCkF,EAAoB,KAAK,gBAAgB,WACzCnD,EAAYrC,EAAY,UAAS,EAAG,MACpCpoE,EAAKqsE,GAAG5B,CAAS,EACjBhlB,EAAK6mB,GAAG7B,CAAS,EACjBoD,EAAkB,KAAK,qBAAqB3B,CAAe,EAC3DzyJ,EAAWivJ,EAAa,SAAU,EAClCoF,EAAar0J,EAASo0J,CAAe,EACrCE,EAAYt0J,EAAS,OACrBu0J,EAAUD,EAAgB,EAAJ,EACtB3vK,EAAS,CACX,gBAAiB,CAACsqK,EAAa,EAAGA,EAAa,CAAC,EAChD,UAAWsF,EACX,UAAWA,EAAS,EACpB,kBAAmB,KACnB,kBAAmB,IACpB,EACD,GAAI,CAACF,EACH,OAAO1vK,EAET,IAAI6vK,EAAiBC,EAAYJ,CAAU,EAC3C1vK,EAAO,gBAAgBqsK,CAAS,EAAI,CAACwD,EAAe,EAYpD,QAASpyK,EAAIgyK,EAAkB,EAAGM,EAAmBF,EAAgBG,EAAiBH,EAAgBI,EAAe,KAAMxyK,GAAKkyK,EAAW,EAAElyK,EAC3IwyK,EAAeH,EAAYz0J,EAAS5d,CAAC,CAAC,GAGtC,CAACwyK,GAAgBD,EAAe,EAAID,EAAiB,EAAIP,GAGtDS,GAAgB,CAACpnH,EAAUonH,EAAcF,EAAiB,CAAC,KACxDC,EAAe,EAAID,EAAiB,EACtCA,EAAmBC,EAGnBD,EAAmBE,EAEjBF,IACE/vK,EAAO,mBAAqB,OAC9BA,EAAO,kBAAoB+vK,EAAiB,GAE9C,EAAE/vK,EAAO,YAGbgwK,EAAiBC,EAEnB,QAASxyK,EAAIgyK,EAAkB,EAAGM,EAAmBF,EAAgBG,EAAiBH,EAAgBI,EAAe,KAAMxyK,GAAK,GAAI,EAAEA,EACpIwyK,EAAeH,EAAYz0J,EAAS5d,CAAC,CAAC,GAIrC,CAACwyK,GAAgB,CAACpnH,EAAUmnH,EAAgBC,EAAa,CAAC,IAEtDF,EAAiB,EAAIC,EAAe,IACvCA,EAAiBD,EACb/vK,EAAO,mBAAqB,OAC9BA,EAAO,kBAAoB+vK,EAAiB,GAE9C,EAAE/vK,EAAO,UACT,EAAEA,EAAO,WAEX+vK,EAAmBE,EAErB,OAAOjwK,EACP,SAAS8vK,EAAYhlK,EAAI,CACvB,GAAIA,EAAI,CACN,IAAIolK,EAAWplK,EAAG,gBAAiB,EAC/B6M,EAAQu4J,EAAS7oB,CAAE,EAAIv8I,EAAGu8I,CAAE,EAChC,MAAO,CACL,EAAG1vI,EACH,EAAGA,EAAQu4J,EAAStuE,CAAE,EACtB,EAAG92F,EAAG,iBACP,CACT,CACA,CACI,SAAS+9C,EAAUsnH,EAAUC,EAAU,CACrC,OAAOD,EAAS,GAAKC,GAAYD,EAAS,GAAKC,EAAWZ,CAChE,CACG,EACDrB,EAAqB,UAAU,qBAAuB,SAAUkC,EAAiB,CAC/E,GAAI,CAAC,KAAK,gBACR,MAAO,GAET,IAAI53I,EACA6xI,EAAe,KAAK,gBAAiB,EACrCgG,EACJ,OAAAhG,EAAa,UAAU,SAAUhvJ,EAAOK,EAAK,CAC3C,IAAI40J,EAAgBj1J,EAAM,kBAMtBg1J,GAAgB,MAAQC,GAAiB,OAC3CD,EAAe30J,GAEb40J,IAAkBF,IACpB53I,EAAQ9c,EAEhB,CAAK,EACM8c,GAAwB63I,CAChC,EACDnC,EAAqB,KAAO,gBACrBA,CACT,EAAEpE,EAAU,ECpWG,SAASyG,GAA8BzmC,EAAW,CAO/DA,EAAU,eAAe,eAAgB,eAAgB,SAAUhoG,EAASK,EAAS,CACnF,IAAI0rI,EAAkB/rI,EAAQ,gBAC9B+rI,GAAmB,MAAQ1rI,EAAQ,cAAc,CAC/C,SAAU,SACV,QAAS,SACT,MAAOL,CACR,EAAE,SAAUioI,EAAa,CACxBA,EAAY,mBAAmB8D,CAAe,CACpD,CAAK,CACL,CAAG,CACH,CCZO,SAAShkC,GAAQC,EAAW,CACjCvV,GAAIi8C,EAAkB,EACtB1mC,EAAU,uBAAuB8jC,EAAqB,EACtD9jC,EAAU,sBAAsBokC,EAAoB,EACpDqC,GAA8BzmC,CAAS,CACzC,CCPO,SAASD,GAAQC,EAAW,CACjCvV,GAAIi8C,EAAkB,EACtBj8C,GAAIk8C,EAAmB,CACzB,CCHA,IAAIC,GAA+B,SAAU58J,EAAQ,CACnDC,EAAU28J,EAAiB58J,CAAM,EACjC,SAAS48J,GAAkB,CACzB,IAAI18J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO08J,EAAgB,KACtB18J,CACX,CACE,OAAA08J,EAAgB,KAAO,kBACvBA,EAAgB,cAAgBlyG,GAAqB6wF,GAAc,cAAe,CAChF,SAAU,GACV,SAAU,GACV,iBAAkB,GAClB,gBAAiB,GACjB,iBAAkB,GAClB,wBAAyB,EAC7B,CAAG,EACMqhB,CACT,EAAErhB,EAAa,ECVXxmF,GAAQ9mC,GAAW,EAChB,SAAS4uI,GAA4BrvH,EAAKitG,EAAeqiB,EAAU,CACxE/nG,GAAMvnB,CAAG,EAAE,kBAAkB,KAAK,SAAUuvH,EAAgB,CAC1D,IAAIC,EAASD,EAAe,gBAAgB,IAAItiB,EAAc,GAAG,EAC7DuiB,IACFA,EAAO,SAAWF,EAExB,CAAG,CACH,CACO,SAASG,GAA8BzvH,EAAKitG,EAAe,CAGhE,QAFIyiB,EAAoBnoG,GAAMvnB,CAAG,EAAE,kBAC/B2vH,EAAiBD,EAAkB,KAAM,EACpCxzK,EAAI,EAAGA,EAAIyzK,EAAe,OAAQzzK,IAAK,CAC9C,IAAI04I,EAAc+6B,EAAezzK,CAAC,EAC9BqzK,EAAiBG,EAAkB,IAAI96B,CAAW,EAClDg7B,EAAkBL,EAAe,gBACrC,GAAIK,EAAiB,CACnB,IAAIC,EAAQ5iB,EAAc,IACtBuiB,EAASI,EAAgB,IAAIC,CAAK,EAClCL,IACFI,EAAgB,UAAUC,CAAK,EAC1BD,EAAgB,KAAM,EAAC,QAC1BE,GAAsBJ,EAAmBH,CAAc,EAGjE,CACA,CACA,CACA,SAASO,GAAsBJ,EAAmBH,EAAgB,CAChE,GAAIA,EAAgB,CAClBG,EAAkB,UAAUH,EAAe,MAAM,GAAG,EACpD,IAAIh0B,EAAag0B,EAAe,WAChCh0B,GAAcA,EAAW,QAAS,CACtC,CACA,CACA,SAASw0B,GAAqB/vH,EAAK+0F,EAAe,CAEhD,IAAIw6B,EAAiB,CACnB,MAAOx6B,EACP,cAAezzI,GAAM0uK,GAAej7B,CAAa,EACjD,eAAgBzzI,GAAM8nJ,GAAgBppG,CAAG,EACzC,gBAAiB,KACjB,WAAY,IACb,EAGGu7F,EAAag0B,EAAe,WAAa,IAAIr1B,GAAel6F,EAAI,OAAO,EAC3Er/C,OAAAA,EAAK,CAAC,MAAO,OAAQ,YAAY,EAAG,SAAUoG,EAAW,CACvDw0I,EAAW,GAAGx0I,EAAW,SAAUP,EAAO,CACxC,IAAI+2J,EAAQ,CAAE,EACdgS,EAAe,gBAAgB,KAAK,SAAUC,EAAQ,CAGpD,GAAKhpK,EAAM,oBAAoBgpK,EAAO,MAAM,MAAM,EAGlD,KAAI5yF,GAAU4yF,EAAO,UAAY,CAAA,GAAIzoK,CAAS,EAC1C0yB,EAAQmjD,GAAUA,EAAO4yF,EAAO,oBAAqBD,EAAe,MAAM,SAAUA,EAAe,WAAY/oK,CAAK,EACxH,CAACgpK,EAAO,MAAM,IAAI,WAAY,EAAI,GAAK/1I,GAAS8jI,EAAM,KAAK,CACzD,WAAYiS,EAAO,MAAM,GACzB,MAAO/1I,EAAM,CAAC,EACd,IAAKA,EAAM,CAAC,CACtB,CAAS,EACT,CAAO,EACD8jI,EAAM,QAAUgS,EAAe,eAAehS,CAAK,CACzD,CAAK,CACL,CAAG,EACMgS,CACT,CAIA,SAASnmB,GAAeppG,EAAKu9G,EAAO,CAC7Bv9G,EAAI,cACPA,EAAI,eAAe,CACjB,KAAM,WACN,UAAW,CACT,OAAQ,WACR,SAAU,GACX,EACD,MAAOu9G,CACb,CAAK,CAEL,CACA,SAASyS,GAAcj7B,EAAe/uI,EAAGxB,EAAGC,EAAG,CAC7C,OAAOswI,EAAc,iBAAiB,aAAa,CAACvwI,EAAGC,CAAC,CAAC,CAC3D,CAIA,SAASwrK,GAAsBL,EAAiB,CAC9C,IAAIp1B,EAGA01B,EAAS,QACTC,EAAe,CACjB,UAAa,EACb,UAAa,EACb,WAAc,EACd,eAAkB,EACnB,EACGC,EAA0B,GAC9B,OAAAR,EAAgB,KAAK,SAAUS,EAAc,CAC3C,IAAIpjB,EAAgBojB,EAAa,MAC7BC,EAAUrjB,EAAc,IAAI,WAAY,EAAI,EAAI,GAAQA,EAAc,IAAI,WAAY,EAAI,EAAI,OAAS,GACvGkjB,EAAaD,EAASI,CAAO,EAAIH,EAAaD,EAAS11B,CAAW,IACpEA,EAAc81B,GAIhBF,EAA0BA,GAA2BnjB,EAAc,IAAI,0BAA2B,EAAI,CAC1G,CAAG,EACM,CACL,YAAazS,EACb,IAAK,CAIH,iBAAkB,GAClB,gBAAiB,GACjB,iBAAkB,GAClB,wBAAyB,CAAC,CAAC41B,CACjC,CACG,CACH,CACO,SAASG,GAA6B/nC,EAAW,CACtDA,EAAU,kBAAkBA,EAAU,SAAS,UAAU,OAAQ,SAAU3nG,EAASmf,EAAK,CACvF,IAAIwwH,EAAWjpG,GAAMvnB,CAAG,EACpB0vH,EAAoBc,EAAS,oBAAsBA,EAAS,kBAAoBltK,KACpFosK,EAAkB,KAAK,SAAUH,EAAgB,CAG/CA,EAAe,gBAAkB,IACvC,CAAK,EACD1uI,EAAQ,cAAc,CACpB,SAAU,WACV,QAAS,QACV,EAAE,SAAUosH,EAAe,CAC1B,IAAIwjB,EAAsB/iB,GAA8BT,CAAa,EACrEtsJ,EAAK8vK,EAAoB,SAAU,SAAUC,EAAgB,CAC3D,IAAI9iB,EAAc8iB,EAAe,MAAM,IACnCnB,EAAiBG,EAAkB,IAAI9hB,CAAW,GAAK8hB,EAAkB,IAAI9hB,EAAamiB,GAAqB/vH,EAAK0wH,EAAe,KAAK,CAAC,EACzId,EAAkBL,EAAe,kBAAoBA,EAAe,gBAAkBjsK,KAE1FssK,EAAgB,IAAI3iB,EAAc,IAAK,CACrC,oBAAqByjB,EACrB,MAAOzjB,EACP,SAAU,IACpB,CAAS,CACT,CAAO,CACP,CAAK,EAGDyiB,EAAkB,KAAK,SAAUH,EAAgB,CAC/C,IAAIh0B,EAAag0B,EAAe,WAC5BoB,EACAf,EAAkBL,EAAe,gBACrC,GAAIK,EAAiB,CACnB,IAAIgB,EAAahB,EAAgB,KAAI,EAAG,CAAC,EACrCgB,GAAc,OAChBD,EAAcf,EAAgB,IAAIgB,CAAU,EAEtD,CACM,GAAI,CAACD,EAAa,CAChBb,GAAsBJ,EAAmBH,CAAc,EACvD,MACR,CACM,IAAIsB,EAAmBZ,GAAsBL,CAAe,EAC5Dr0B,EAAW,OAAOs1B,EAAiB,YAAaA,EAAiB,GAAG,EACpEt1B,EAAW,kBAAkBg0B,EAAe,aAAa,EACzD9pB,GAA4B8pB,EAAgB,iBAAkBoB,EAAY,MAAM,IAAI,WAAY,EAAI,EAAG,SAAS,CACtH,CAAK,CACL,CAAG,CACH,CClLA,IAAIG,GAA8B,SAAUt+J,EAAQ,CAClDC,EAAUq+J,EAAgBt+J,CAAM,EAChC,SAASs+J,GAAiB,CACxB,IAAIp+J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO,kBACNA,CACX,CACE,OAAAo+J,EAAe,UAAU,OAAS,SAAU7jB,EAAepsH,EAASmf,EAAK,CAEvE,GADAxtC,EAAO,UAAU,OAAO,MAAM,KAAM,SAAS,EACzCy6I,EAAc,WAAY,CAC5B,KAAK,OAAQ,EACb,MACN,CAII,KAAK,MAAQA,EAAc,gBAAiB,EAE5C8jB,GAAkC/wH,EAAKitG,EAAe,CACpD,IAAK7rJ,EAAK4vK,GAAiB,IAAK,IAAI,EACpC,KAAM5vK,EAAK4vK,GAAiB,KAAM,IAAI,EACtC,WAAY5vK,EAAK4vK,GAAiB,WAAY,IAAI,CACxD,CAAK,CACF,EACDF,EAAe,UAAU,QAAU,UAAY,CAC7C,KAAK,OAAQ,EACbt+J,EAAO,UAAU,QAAQ,MAAM,KAAM,SAAS,CAC/C,EACDs+J,EAAe,UAAU,OAAS,UAAY,CAC5CG,GAAoC,KAAK,IAAK,KAAK,aAAa,EAChE,KAAK,MAAQ,IACd,EACDH,EAAe,KAAO,kBACfA,CACT,EAAExhB,EAAY,EACV0hB,GAAmB,CACrB,KAAM,SAAUzvD,EAAc2vD,EAAkB31B,EAAYv1I,EAAG,CAC7D,IAAImrK,EAAY,KAAK,MACjB13I,EAAQ03I,EAAU,MAAO,EAEzBlxD,EAAYsB,EAAa,WAAW,CAAC,EACzC,GAAKtB,EAGL,KAAImxD,EAAgBC,GAAiBH,CAAgB,EAAE,KAAM,CAAClrK,EAAE,QAASA,EAAE,OAAO,EAAGi6G,EAAWs7B,EAAYh6B,CAAY,EACpH+vD,GAAgBF,EAAc,OAAS,EAAIA,EAAc,WAAaA,EAAc,YAAcA,EAAc,MAAQA,EAAc,MAAQA,EAAc,YAAcA,EAAc,aAAe33I,EAAM,CAAC,EAAIA,EAAM,CAAC,GAAKA,EAAM,CAAC,EACrOx0B,EAAQ,KAAK,IAAI,EAAIe,EAAE,MAAO,CAAC,EACnCyzB,EAAM,CAAC,GAAKA,EAAM,CAAC,EAAI63I,GAAgBrsK,EAAQqsK,EAC/C73I,EAAM,CAAC,GAAKA,EAAM,CAAC,EAAI63I,GAAgBrsK,EAAQqsK,EAE/C,IAAI/f,EAAa,KAAK,cAAc,4BAA2B,EAAG,cAAe,EAGjF,GAFA1V,GAAW,EAAGpiH,EAAO,CAAC,EAAG,GAAG,EAAG,EAAG83H,EAAW,QAASA,EAAW,OAAO,EACxE,KAAK,MAAQ93H,EACT03I,EAAU,CAAC,IAAM13I,EAAM,CAAC,GAAK03I,EAAU,CAAC,IAAM13I,EAAM,CAAC,EACvD,OAAOA,EAEV,EACD,IAAK83I,GAAU,SAAU93I,EAAOwmF,EAAWsB,EAAc2vD,EAAkB31B,EAAYv1I,EAAG,CACxF,IAAIorK,EAAgBC,GAAiBH,CAAgB,EAAE,CAAClrK,EAAE,KAAMA,EAAE,IAAI,EAAG,CAACA,EAAE,KAAMA,EAAE,IAAI,EAAGi6G,EAAWs7B,EAAYh6B,CAAY,EAC9H,OAAO6vD,EAAc,QAAU33I,EAAM,CAAC,EAAIA,EAAM,CAAC,GAAK23I,EAAc,MAAQA,EAAc,WAC9F,CAAG,EACD,WAAYG,GAAU,SAAU93I,EAAOwmF,EAAWsB,EAAc2vD,EAAkB31B,EAAYv1I,EAAG,CAC/F,IAAIorK,EAAgBC,GAAiBH,CAAgB,EAAE,CAAC,EAAG,CAAC,EAAG,CAAClrK,EAAE,YAAaA,EAAE,WAAW,EAAGi6G,EAAWs7B,EAAYh6B,CAAY,EAClI,OAAO6vD,EAAc,QAAU33I,EAAM,CAAC,EAAIA,EAAM,CAAC,GAAKzzB,EAAE,WACzD,CAAA,CACH,EACA,SAASurK,GAAUC,EAAiB,CAClC,OAAO,SAAUjwD,EAAc2vD,EAAkB31B,EAAYv1I,EAAG,CAC9D,IAAImrK,EAAY,KAAK,MACjB13I,EAAQ03I,EAAU,MAAO,EAEzBlxD,EAAYsB,EAAa,WAAW,CAAC,EACzC,GAAKtB,EAGL,KAAIwxD,EAAeD,EAAgB/3I,EAAOwmF,EAAWsB,EAAc2vD,EAAkB31B,EAAYv1I,CAAC,EAGlG,GAFA61I,GAAW41B,EAAch4I,EAAO,CAAC,EAAG,GAAG,EAAG,KAAK,EAC/C,KAAK,MAAQA,EACT03I,EAAU,CAAC,IAAM13I,EAAM,CAAC,GAAK03I,EAAU,CAAC,IAAM13I,EAAM,CAAC,EACvD,OAAOA,EAEV,CACH,CACA,IAAI43I,GAAmB,CACrB,KAAM,SAAUK,EAAUC,EAAU1xD,EAAWs7B,EAAYh6B,EAAc,CACvE,IAAI5yD,EAAOsxD,EAAU,KACjB78F,EAAM,CAAE,EACR1Y,EAAO62G,EAAa,MAAM,iBAAiB,QAAS,EACxD,OAAAmwD,EAAWA,GAAY,CAAC,EAAG,CAAC,EACxB/iH,EAAK,MAAQ,KACfvrC,EAAI,MAAQuuJ,EAAS,CAAC,EAAID,EAAS,CAAC,EACpCtuJ,EAAI,YAAc1Y,EAAK,MACvB0Y,EAAI,WAAa1Y,EAAK,EACtB0Y,EAAI,OAASurC,EAAK,QAAU,EAAI,KAGhCvrC,EAAI,MAAQuuJ,EAAS,CAAC,EAAID,EAAS,CAAC,EACpCtuJ,EAAI,YAAc1Y,EAAK,OACvB0Y,EAAI,WAAa1Y,EAAK,EACtB0Y,EAAI,OAASurC,EAAK,QAAU,GAAK,GAE5BvrC,CACR,EACD,MAAO,SAAUsuJ,EAAUC,EAAU1xD,EAAWs7B,EAAYh6B,EAAc,CACxE,IAAI5yD,EAAOsxD,EAAU,KACjB78F,EAAM,CAAE,EACRk9G,EAAQ/e,EAAa,MAAM,iBAC3BqwD,EAAetxC,EAAM,cAAa,EAAG,UAAW,EAChDuxC,EAAcvxC,EAAM,aAAY,EAAG,UAAW,EAClD,OAAAoxC,EAAWA,EAAWpxC,EAAM,aAAaoxC,CAAQ,EAAI,CAAC,EAAG,CAAC,EAC1DC,EAAWrxC,EAAM,aAAaqxC,CAAQ,EAClC1xD,EAAU,WAAa,cACzB78F,EAAI,MAAQuuJ,EAAS,CAAC,EAAID,EAAS,CAAC,EAGpCtuJ,EAAI,YAAcwuJ,EAAa,CAAC,EAAIA,EAAa,CAAC,EAClDxuJ,EAAI,WAAawuJ,EAAa,CAAC,EAC/BxuJ,EAAI,OAASurC,EAAK,QAAU,EAAI,KAGhCvrC,EAAI,MAAQuuJ,EAAS,CAAC,EAAID,EAAS,CAAC,EAGpCtuJ,EAAI,YAAcyuJ,EAAY,CAAC,EAAIA,EAAY,CAAC,EAChDzuJ,EAAI,WAAayuJ,EAAY,CAAC,EAC9BzuJ,EAAI,OAASurC,EAAK,QAAU,GAAK,GAE5BvrC,CACR,EACD,WAAY,SAAUsuJ,EAAUC,EAAU1xD,EAAWs7B,EAAYh6B,EAAc,CAC7E,IAAI5yD,EAAOsxD,EAAU,KACjBv1G,EAAO62G,EAAa,MAAM,iBAAiB,QAAS,EACpDn+F,EAAM,CAAE,EACZ,OAAAsuJ,EAAWA,GAAY,CAAC,EAAG,CAAC,EACxB/iH,EAAK,SAAW,cAClBvrC,EAAI,MAAQuuJ,EAAS,CAAC,EAAID,EAAS,CAAC,EACpCtuJ,EAAI,YAAc1Y,EAAK,MACvB0Y,EAAI,WAAa1Y,EAAK,EACtB0Y,EAAI,OAASurC,EAAK,QAAU,EAAI,KAGhCvrC,EAAI,MAAQuuJ,EAAS,CAAC,EAAID,EAAS,CAAC,EACpCtuJ,EAAI,YAAc1Y,EAAK,OACvB0Y,EAAI,WAAa1Y,EAAK,EACtB0Y,EAAI,OAASurC,EAAK,QAAU,GAAK,GAE5BvrC,CACX,CACA,ECrJO,SAASmlH,GAAQC,EAAW,CACjC2pB,GAAc3pB,CAAS,EACvBA,EAAU,uBAAuB4mC,EAAe,EAChD5mC,EAAU,sBAAsBsoC,EAAc,EAC9CP,GAA6B/nC,CAAS,CACxC,CCNA,IAAIspC,GAA+B,SAAUt/J,EAAQ,CACnDC,EAAUq/J,EAAiBt/J,CAAM,EACjC,SAASs/J,GAAkB,CACzB,IAAIp/J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAOo/J,EAAgB,KACtBp/J,CACX,CACE,OAAAo/J,EAAgB,KAAO,kBACvBA,EAAgB,WAAa,MAC7BA,EAAgB,cAAgB50G,GAAqB6wF,GAAc,cAAe,CAChF,KAAM,GAEN,MAAO,KACP,IAAK,KACL,MAAO,KACP,OAAQ,KACR,KAAM,KACN,OAAQ,KACR,YAAa,UACb,aAAc,EACd,gBAAiB,mBAEjB,eAAgB,CACd,UAAW,CACT,MAAO,UACP,MAAO,EACR,EACD,UAAW,CACT,MAAO,UACP,QAAS,EACjB,CACK,EACD,uBAAwB,CACtB,UAAW,CACT,MAAO,UACP,MAAO,EACR,EACD,UAAW,CACT,MAAO,UACP,QAAS,EACjB,CACK,EAED,YAAa,wBACb,WAAY,kHAEZ,WAAY,OACZ,YAAa,CACX,MAAO,OACP,YAAa,SACd,EACD,eAAgB,EAChB,eAAgB,maAChB,gBAAiB,CACf,MAAO,UACP,QAAS,EACV,EACD,WAAY,GACZ,eAAgB,OAChB,SAAU,GACV,SAAU,GACV,UAAW,CACT,MAAO,SACR,EACD,YAAa,GACb,WAAY,CACV,MAAO,wBACR,EACD,SAAU,CACR,YAAa,CACX,KAAM,EACP,EACD,YAAa,CACX,YAAa,SACd,EACD,gBAAiB,CACf,MAAO,SACf,CACA,CACA,CAAG,EACM+jB,CACT,EAAE/jB,EAAa,ECtEXj2G,GAAO6/C,GAEPo6E,GAA4B,EAC5BC,GAA6B,EAC7BC,GAAsB,GACtBC,GAA2B,EAC3BC,GAAa,aACbC,GAAW,WACXC,GAAY,EACZC,GAA+B,CAAC,OAAQ,MAAO,cAAe,SAAS,EACvEC,GAA4B,CAC9B,OAAQ,WACR,SAAU,IACV,MAAO,CACT,EACIC,GAA8B,SAAUhgK,EAAQ,CAClDC,EAAU+/J,EAAgBhgK,CAAM,EAChC,SAASggK,GAAiB,CACxB,IAAI9/J,EAAQF,IAAW,MAAQA,EAAO,MAAM,KAAM,SAAS,GAAK,KAChE,OAAAE,EAAM,KAAO8/J,EAAe,KAC5B9/J,EAAM,cAAgB,CAAC,EAChBA,CAAA,CAET8/J,OAAAA,EAAe,UAAU,KAAO,SAAU3xI,EAASmf,EAAK,CACtD,KAAK,IAAMA,EAEX,KAAK,SAAW5+C,EAAK,KAAK,SAAU,IAAI,EACxC,KAAK,YAAcA,EAAK,KAAK,YAAa,IAAI,CAChD,EACAoxK,EAAe,UAAU,OAAS,SAAUvlB,EAAepsH,EAASmf,EAAKxf,EAAS,CAIhF,GAHAhuB,EAAO,UAAU,OAAO,MAAM,KAAM,SAAS,EAC7CigK,GAAwB,KAAM,sBAAuBxlB,EAAc,IAAI,UAAU,EAAG,SAAS,EACxF,KAAA,QAAUA,EAAc,UAAU,EACnCA,EAAc,IAAI,MAAM,IAAM,GAAO,CACvC,KAAK,MAAM,UAAU,EACrB,MAAA,CAEE,GAAAA,EAAc,WAAY,CAC5B,KAAK,OAAO,EACZ,KAAK,MAAM,UAAU,EACrB,MAAA,EAKE,CAACzsH,GAAWA,EAAQ,OAAS,YAAcA,EAAQ,OAAS,KAAK,MACnE,KAAK,WAAW,EAElB,KAAK,YAAY,CACnB,EACAgyI,EAAe,UAAU,QAAU,UAAY,CAC7C,KAAK,OAAO,EACZhgK,EAAO,UAAU,QAAQ,MAAM,KAAM,SAAS,CAChD,EACAggK,EAAe,UAAU,OAAS,UAAY,CACnCE,GAAM,KAAM,qBAAqB,EACtC,IAAA3+I,EAAK,KAAK,IAAI,MAAM,EACrBA,EAAA,IAAI,YAAa,KAAK,QAAQ,EAC9BA,EAAA,IAAI,UAAW,KAAK,WAAW,CACpC,EACAy+I,EAAe,UAAU,WAAa,UAAY,CAChD,IAAI/0B,EAAY,KAAK,MACrBA,EAAU,UAAU,EACpB,KAAK,UAAY,GACjB,KAAK,cAAc,UAAY,KAC/B,KAAK,eAAe,EACpB,KAAK,eAAe,EACpB,IAAIk1B,EAAW,KAAK,cAAc,YAAc,IAAIl7E,GACpD,KAAK,kBAAkB,EACvB,KAAK,cAAc,EACnB,KAAK,kBAAkB,EACvBgmD,EAAU,IAAIk1B,CAAQ,EACtB,KAAK,eAAe,CACtB,EACAH,EAAe,UAAU,eAAiB,UAAY,CACpD,IAAIvlB,EAAgB,KAAK,cACrBjtG,EAAM,KAAK,IACX4yH,EAAiB3lB,EAAc,IAAI,aAAa,EAChD4lB,EAAiBD,EAAiBV,GAA2B,EAG7DY,EAAY,KAAK,eAAe,EAChCC,EAAS,CACX,MAAO/yH,EAAI,SAAS,EACpB,OAAQA,EAAI,UAAU,CACxB,EAEI2lB,EAAe,KAAK,UAAYwsG,GAAa,CAG/C,MAAOY,EAAO,MAAQD,EAAU,EAAIA,EAAU,MAC9C,IAAKC,EAAO,OAASd,GAAsBF,GAA4Bc,EACvE,MAAOC,EAAU,MACjB,OAAQb,EAAA,EACN,CACF,MAAOF,GACP,IAAKe,EAAU,EACf,MAAOb,GACP,OAAQa,EAAU,MACpB,EAGIE,EAAeprG,GAAuBqlF,EAAc,MAAM,EAE9DtsJ,EAAK,CAAC,QAAS,MAAO,QAAS,QAAQ,EAAG,SAAU0L,EAAM,CACpD2mK,EAAa3mK,CAAI,IAAM,OACZ2mK,EAAA3mK,CAAI,EAAIs5D,EAAat5D,CAAI,EACxC,CACD,EACD,IAAI0kB,EAAakiJ,GAAqBD,EAAcD,CAAM,EAC1D,KAAK,UAAY,CACf,EAAGhiJ,EAAW,EACd,EAAGA,EAAW,CAChB,EACA,KAAK,MAAQ,CAACA,EAAW,MAAOA,EAAW,MAAM,EACjD,KAAK,UAAYqhJ,IAAY,KAAK,MAAM,QAAQ,CAClD,EACAI,EAAe,UAAU,eAAiB,UAAY,CACpD,IAAI/0B,EAAY,KAAK,MACjBy1B,EAAW,KAAK,UAChBruG,EAAS,KAAK,QAEdsuG,EAAkB,KAAK,cAAc,wBAAwB,EAC7D3pK,EAAU2pK,GAAmBA,EAAgB,IAAI,SAAS,EAC1DC,EAAc,KAAK,cAAc,YACjCC,GAAoB,KAAK,iBAAmB,CAAI,GAAA,iBAEpDD,EAAY,KAAKvuG,IAAWstG,IAAc,CAAC3oK,EAAU,CACnD,OAAQ6pK,EAAmB,EAAI,GAC/B,OAAQ,CAAA,EACNxuG,IAAWstG,IAAc3oK,EAAU,CACrC,OAAQ6pK,EAAmB,EAAI,GAC/B,OAAQ,EAAA,EACNxuG,IAAWutG,IAAY,CAAC5oK,EAAU,CACpC,OAAQ6pK,EAAmB,GAAK,EAChC,OAAQ,EACR,SAAU,KAAK,GAAK,CAAA,EAGpB,CACA,OAAQA,EAAmB,GAAK,EAChC,OAAQ,GACR,SAAU,KAAK,GAAK,CAAA,CACrB,EAED,IAAI3oK,EAAO+yI,EAAU,gBAAgB,CAAC21B,CAAW,CAAC,EACxC31B,EAAA,EAAIy1B,EAAS,EAAIxoK,EAAK,EACtB+yI,EAAA,EAAIy1B,EAAS,EAAIxoK,EAAK,EAChC+yI,EAAU,WAAW,CACvB,EACA+0B,EAAe,UAAU,eAAiB,UAAY,CACpD,MAAO,CAAC,EAAG,KAAK,MAAM,CAAC,CAAC,CAC1B,EACAA,EAAe,UAAU,kBAAoB,UAAY,CACvD,IAAIvlB,EAAgB,KAAK,cACrB7wJ,EAAO,KAAK,MACZu2K,EAAW,KAAK,cAAc,YAC9BW,EAAcrmB,EAAc,IAAI,aAAa,EACxC0lB,EAAA,IAAI,IAAI76H,GAAK,CACpB,OAAQ,GACR,MAAO,CACL,EAAG,EACH,EAAG,EACH,MAAO17C,EAAK,CAAC,EACb,OAAQA,EAAK,CAAC,CAChB,EACA,MAAO,CACL,KAAM6wJ,EAAc,IAAI,iBAAiB,CAC3C,EACA,GAAI,GAAA,CACL,CAAC,EAEE,IAAAsmB,EAAa,IAAIz7H,GAAK,CACxB,MAAO,CACL,EAAG,EACH,EAAG,EACH,MAAO17C,EAAK,CAAC,EACb,OAAQA,EAAK,CAAC,CAChB,EACA,MAAO,CACL,KAAM,aACR,EACA,GAAI,EACJ,QAASgF,EAAK,KAAK,cAAe,IAAI,CAAA,CACvC,EACG2yB,EAAK,KAAK,IAAI,MAAM,EACpBu/I,GACFC,EAAW,GAAG,YAAa,KAAK,cAAe,IAAI,EACnDA,EAAW,OAAS,YACjBx/I,EAAA,GAAG,YAAa,KAAK,QAAQ,EAC7BA,EAAA,GAAG,UAAW,KAAK,WAAW,IAE9BA,EAAA,IAAI,YAAa,KAAK,QAAQ,EAC9BA,EAAA,IAAI,UAAW,KAAK,WAAW,GAEpC4+I,EAAS,IAAIY,CAAU,CACzB,EACAf,EAAe,UAAU,kBAAoB,UAAY,CACvD,IAAI1vI,EAAO,KAAK,gBAAkB,KAAK,uBAAuB,EAE9D,GADK,KAAA,cAAc,eAAiB,CAAC,EACjC,CAACA,EACH,OAEF,IAAI1mC,EAAO,KAAK,MACZo3K,EAAU,KAAK,aAAe,CAAC,EAC/BxyH,EAAcle,EAAK,OACnBpiC,EAAOsgD,EAAY,WAAW,EAC9ByyH,EAAiBzyH,EAAY,cAAgBA,EAAY,aAAa,EACtEvK,EAAWg9H,GAAkB/yK,EAAK,iBAAiB+yK,CAAc,EAAIzyH,EAAY,eACnFle,EAAK,SACP,GAAI2T,GAAY,KACd,OAEF,IAAIi9H,EAAa,KAAK,kBAClBC,EAAc,KAAK,mBAEvB,GAAIjzK,IAAS,KAAK,aAAe+1C,IAAa,KAAK,YAAcr6C,EAAK,CAAC,IAAMo3K,EAAQ,CAAC,GAAKp3K,EAAK,CAAC,IAAMo3K,EAAQ,CAAC,EAAG,CAC7G,IAAAI,EAAoBlzK,EAAK,cAAc+1C,CAAQ,EAE/Co9H,GAAeD,EAAkB,CAAC,EAAIA,EAAkB,CAAC,GAAK,GAC9CA,EAAA,CAACA,EAAkB,CAAC,EAAIC,EAAaD,EAAkB,CAAC,EAAIC,CAAW,EAC3F,IAAIC,EAAsB,CAAC,EAAG13K,EAAK,CAAC,CAAC,EACjC23K,EAAmB,CAAC,EAAG33K,EAAK,CAAC,CAAC,EAC9B43K,EAAe,CAAC,CAAC53K,EAAK,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,CAAC,CAAC,EACpC63K,EAAe,CAAC,EAChBC,EAASH,EAAiB,CAAC,GAAKrzK,EAAK,MAAU,EAAA,GAC/CyzK,EAAc,EAEdC,EAAW,KAAK,MAAM1zK,EAAK,QAAUtE,EAAK,CAAC,CAAC,EAC5Ci4K,EACJ3zK,EAAK,KAAK,CAAC+1C,CAAQ,EAAG,SAAU12C,EAAOm3B,EAAO,CACxC,GAAAk9I,EAAW,GAAKl9I,EAAQk9I,EAAU,CACrBD,GAAAD,EACf,MAAA,CAMF,IAAI/0E,EAAUp/F,GAAS,MAAQ,MAAMA,CAAK,GAAKA,IAAU,GAErDu0K,EAAan1E,EAAU,EAAI5lE,GAAUx5B,EAAO6zK,EAAmBE,EAAqB,EAAI,EAExF30E,GAAW,CAACk1E,GAAiBn9I,GAClB88I,EAAA,KAAK,CAACA,EAAaA,EAAa,OAAS,CAAC,EAAE,CAAC,EAAG,CAAC,CAAC,EAClDC,EAAA,KAAK,CAACA,EAAaA,EAAa,OAAS,CAAC,EAAE,CAAC,EAAG,CAAC,CAAC,GACtD,CAAC90E,GAAWk1E,IACrBL,EAAa,KAAK,CAACG,EAAa,CAAC,CAAC,EAClCF,EAAa,KAAK,CAACE,EAAa,CAAC,CAAC,GAEpCH,EAAa,KAAK,CAACG,EAAaG,CAAU,CAAC,EAC3CL,EAAa,KAAK,CAACE,EAAaG,CAAU,CAAC,EAC5BH,GAAAD,EACCG,EAAAl1E,CAAA,CACjB,EACDu0E,EAAa,KAAK,kBAAoBM,EACtCL,EAAc,KAAK,mBAAqBM,CAAA,CAE1C,KAAK,YAAcvzK,EACnB,KAAK,WAAa+1C,EAClB,KAAK,YAAc,CAACr6C,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,EACpC,IAAI6wJ,EAAgB,KAAK,cACzB,SAASsnB,EAAsBC,EAAgB,CAC7C,IAAI/uI,EAAQwnH,EAAc,SAASunB,EAAiB,yBAA2B,gBAAgB,EAC3F1vG,EAAQ,IAAI2yB,GACZkuC,EAAU,IAAI+d,GAAgB,CAChC,MAAO,CACL,OAAQgwB,CACV,EACA,uBAAwB,EACxB,MAAOjuI,EAAM,SAAS,WAAW,EAAE,aAAa,EAChD,OAAQ,GACR,GAAI,GAAA,CACL,EACGigG,EAAW,IAAI+d,GAAiB,CAClC,MAAO,CACL,OAAQkwB,CACV,EACA,uBAAwB,EACxB,MAAOluI,EAAM,SAAS,WAAW,EAAE,aAAa,EAChD,OAAQ,GACR,GAAI,GAAA,CACL,EACDq/B,OAAAA,EAAM,IAAI6gE,CAAO,EACjB7gE,EAAM,IAAI4gE,CAAQ,EACX5gE,CAAA,CAGT,QAAS5oE,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACtB,IAAA4oE,EAAQyvG,EAAsBr4K,IAAM,CAAC,EACpC,KAAA,cAAc,YAAY,IAAI4oE,CAAK,EACnC,KAAA,cAAc,eAAe,KAAKA,CAAK,CAAA,CAEhD,EACA0tG,EAAe,UAAU,uBAAyB,UAAY,CAC5D,IAAIvlB,EAAgB,KAAK,cACrBwnB,EAAiBxnB,EAAc,IAAI,gBAAgB,EACvD,GAAIwnB,IAAmB,GAInB,KAAAh2K,EACAoiC,EAAU,KAAK,QACL,OAAAosH,EAAA,eAAe,SAAU/sC,EAASF,EAAW,CACzD,IAAI3sB,EAAe45D,EAAc,aAAa/sC,EAASF,CAAS,EAAE,sBAAsB,EACnFr/G,EAAA0yF,EAAc,SAAUryC,EAAa,CACxC,GAAI,CAAAviD,GAGA,EAAAg2K,IAAmB,IAAQ50K,EAAQyyK,GAA8BtxH,EAAY,IAAI,MAAM,CAAC,EAAI,GAGhG,KAAI0zH,EAAW7zI,EAAQ,aAAa+rH,GAAgB1sC,CAAO,EAAGF,CAAS,EAAE,KACrEvpE,EAAWk+H,GAAYz0D,CAAO,EAC9BmzD,EACAnyH,EAAWF,EAAY,iBACvBvK,GAAY,MAAQyK,EAAS,eACZmyH,EAAAnyH,EAAS,aAAawzH,CAAQ,EAAE,SAErDj+H,EAAWuK,EAAY,UAAU,aAAavK,CAAQ,EAC7Ch4C,EAAA,CACP,SAAAi2K,EACA,OAAQ1zH,EACR,QAASk/D,EACT,SAAAzpE,EACA,iBAAA48H,CACF,IACC,IAAI,GACN,IAAI,EACA50K,EACT,EACA+zK,EAAe,UAAU,cAAgB,UAAY,CACnD,IAAI/0B,EAAY,KAAK,MACjBtuF,EAAe,KAAK,cACpBylH,EAAUzlH,EAAa,QAAU,CAAC,KAAM,IAAI,EAC5C0lH,EAAe1lH,EAAa,aAAe,CAAC,KAAM,IAAI,EACtDikH,EAAc,KAAK,cAAc,YACjCh3K,EAAO,KAAK,MACZ6wJ,EAAgB,KAAK,cACrBjtG,EAAM,KAAK,IACX80H,EAAe7nB,EAAc,IAAI,cAAc,GAAK,EACpDqmB,EAAcrmB,EAAc,IAAI,aAAa,EAC7C8nB,EAAS5lH,EAAa,OAAS,IAAIrX,GAAK,CAC1C,OAAQw7H,EACR,MAAO,CACL,KAAMrmB,EAAc,IAAI,aAAa,CACvC,EACA,WAAY,CACV,SAAU,QAAA,CACZ,CACD,EACDmmB,EAAY,IAAI2B,CAAM,EAEV3B,EAAA,IAAI,IAAIt7H,GAAK,CACvB,OAAQ,GACR,iBAAkB,GAClB,MAAO,CACL,EAAG,EACH,EAAG,EACH,MAAO17C,EAAK,CAAC,EACb,OAAQA,EAAK,CAAC,EACd,EAAG04K,CACL,EACA,MAAO,CAEL,OAAQ7nB,EAAc,IAAI,qBAAqB,GAAKA,EAAc,IAAI,aAAa,EACnF,UAAW+kB,GACX,KAAM,eAAA,CACR,CACD,CAAC,EAEFrxK,EAAK,CAAC,EAAG,CAAC,EAAG,SAAUo7I,EAAa,CAC9B,IAAA/nF,EAAUi5F,EAAc,IAAI,YAAY,EACxC,CAACvuD,GAAmB1qC,CAAO,GAAKA,EAAQ,QAAQ,SAAS,EAAI,GAAKA,EAAQ,QAAQ,UAAU,EAAI,IAElGA,EAAU,UAAYA,GAKpB,IAAArjB,EAAOsuD,GAAajrC,EAAS,GAAI,EAAG,EAAG,EAAG,KAAM,EAAI,EACxDrjB,EAAK,KAAK,CACR,OAAQqkI,GAAU,KAAK,OAAO,EAC9B,UAAW,GACX,MAAO5zK,EAAK,KAAK,YAAa,KAAM26I,CAAW,EAC/C,UAAW36I,EAAK,KAAK,WAAY,IAAI,EACrC,YAAaA,EAAK,KAAK,cAAe,KAAM,EAAI,EAChD,WAAYA,EAAK,KAAK,cAAe,KAAM,EAAK,EAChD,GAAI,CAAA,CACL,EACG,IAAA6zK,EAAQtkI,EAAK,gBAAgB,EAC7ByvG,EAAa6M,EAAc,IAAI,YAAY,EAC/C,KAAK,cAAgBn9H,GAAaswH,EAAY,KAAK,MAAM,CAAC,CAAC,EAC3D,KAAK,aAAe60B,EAAM,MAAQA,EAAM,OAAS,KAAK,cACtDtkI,EAAK,SAASs8G,EAAc,SAAS,aAAa,EAAE,cAAc,EAClEt8G,EAAK,MAAM,cAAgB,GAC3BA,EAAK,UAAY,GACZA,EAAA,YAAY,UAAU,EAAE,MAAQs8G,EAAc,SAAS,CAAC,WAAY,aAAa,CAAC,EAAE,aAAa,EACtGzqG,GAAoB7R,CAAI,EACpB,IAAAukI,EAAcjoB,EAAc,IAAI,aAAa,EAE7CioB,GAAe,OACjBvkI,EAAK,MAAM,KAAOukI,GAEpB9B,EAAY,IAAIwB,EAAQ74B,CAAW,EAAIprG,CAAI,EACvC,IAAAmnB,EAAiBm1F,EAAc,SAAS,WAAW,EACnDkoB,EAAcloB,EAAc,IAAI,aAAa,GAAK,CAAC,EACnDmoB,EAAkBD,EAAY,MAAQ,GAC1C13B,EAAU,IAAIo3B,EAAa94B,CAAW,EAAI,IAAInkD,GAAa,CACzD,OAAQ,GACR,UAAW,CAACw9E,EACZ,MAAO99G,GAAgBQ,EAAgB,CACrC,EAAG,EACH,EAAG,EACH,KAAM,GACN,cAAe,SACf,MAAO,SACP,KAAMA,EAAe,aAAa,EAClC,KAAMA,EAAe,QAAQ,CAAA,CAC9B,EACD,GAAI,EAAA,CACL,CAAC,GACD,IAAI,EAEP,IAAIu9G,EAAiBN,EACrB,GAAIzB,EAAa,CACX,IAAAgC,EAAmBxlJ,GAAam9H,EAAc,IAAI,gBAAgB,EAAG7wJ,EAAK,CAAC,CAAC,EAC5Em5K,EAAepmH,EAAa,WAAa,IAAIwoC,GAAa,CAC5D,MAAOs1D,EAAc,SAAS,iBAAiB,EAAE,aAAa,EAC9D,OAAQ,GACR,MAAO,CACL,EAAG,CAAC,EAAG,EAAG,EAAG,CAAC,EACd,EAAG7wJ,EAAK,CAAC,EAAI,GACb,OAAQk5K,CAAA,CACV,CACD,EACGE,EAAWF,EAAmB,GAC9BG,EAAiBtmH,EAAa,eAAiB8vC,GAAaguD,EAAc,IAAI,gBAAgB,EAAG,CAACuoB,EAAW,EAAG,CAACA,EAAW,EAAGA,EAAUA,EAAU,OAAQ,EAAI,EACnKC,EAAe,OAAS,GACxBA,EAAe,EAAIr5K,EAAK,CAAC,EAAIk5K,EAAmB,EAAI,GACvCC,EAAA,YAAY,UAAU,EAAE,MAAQtoB,EAAc,SAAS,CAAC,WAAY,iBAAiB,CAAC,EAAE,aAAa,EAC9G,IAAAyoB,EAAqB,KAAK,IAAIt5K,EAAK,CAAC,EAAI,EAAG,KAAK,IAAIk5K,EAAkB,EAAE,CAAC,EAC7ED,EAAiBlmH,EAAa,SAAW,IAAIwoC,GAAa,CACxD,UAAW,GACX,MAAO,CACL,EAAGv7F,EAAK,CAAC,EAAIs5K,EACb,OAAQJ,EAAmBI,CAAA,CAC7B,CACD,EACcL,EAAA,GAAG,YAAa,UAAY,CACzCr1H,EAAI,cAAcu1H,CAAY,CAAA,CAC/B,EAAE,GAAG,WAAY,UAAY,CAC5Bv1H,EAAI,cAAcu1H,CAAY,CAAA,CAC/B,EACDnC,EAAY,IAAImC,CAAY,EAC5BnC,EAAY,IAAIqC,CAAc,EAC9BrC,EAAY,IAAIiC,CAAc,CAAA,CAEhCA,EAAe,KAAK,CAClB,UAAW,GACX,OAAQL,GAAU,KAAK,OAAO,EAC9B,MAAO5zK,EAAK,KAAK,YAAa,KAAM,KAAK,EACzC,YAAaA,EAAK,KAAK,cAAe,KAAM,EAAI,EAChD,UAAWA,EAAK,KAAK,WAAY,IAAI,EACrC,YAAaA,EAAK,KAAK,cAAe,KAAM,EAAI,EAChD,WAAYA,EAAK,KAAK,cAAe,KAAM,EAAK,CAAA,CACjD,CACH,EACAoxK,EAAe,UAAU,eAAiB,UAAY,CACpD,IAAI/4I,EAAQ,KAAK,OAAS,KAAK,cAAc,gBAAgB,EACzDk8I,EAAa,KAAK,eAAe,EAChC,KAAA,YAAc,CAACp8I,GAAUE,EAAM,CAAC,EAAG,CAAC,EAAG,GAAG,EAAGk8I,EAAY,EAAI,EAAGp8I,GAAUE,EAAM,CAAC,EAAG,CAAC,EAAG,GAAG,EAAGk8I,EAAY,EAAI,CAAC,CACtH,EACAnD,EAAe,UAAU,gBAAkB,SAAUz2B,EAAa7vI,EAAO,CACvE,IAAI+gJ,EAAgB,KAAK,cACrBnR,EAAa,KAAK,YAClB85B,EAAa,KAAK,eAAe,EACjCrkB,EAAatE,EAAc,4BAA4B,EAAE,cAAc,EACvE0C,EAAgB,CAAC,EAAG,GAAG,EAC3B9T,GAAW3vI,EAAO4vI,EAAY85B,EAAY3oB,EAAc,IAAI,UAAU,EAAI,MAAQlR,EAAawV,EAAW,SAAW,KAAOh4H,GAAUg4H,EAAW,QAAS5B,EAAeimB,EAAY,EAAI,EAAI,KAAMrkB,EAAW,SAAW,KAAOh4H,GAAUg4H,EAAW,QAAS5B,EAAeimB,EAAY,EAAI,EAAI,IAAI,EACrS,IAAIzE,EAAY,KAAK,OACjB13I,EAAQ,KAAK,OAASW,GAAI,CAACb,GAAUuiH,EAAW,CAAC,EAAG85B,EAAYjmB,EAAe,EAAI,EAAGp2H,GAAUuiH,EAAW,CAAC,EAAG85B,EAAYjmB,EAAe,EAAI,CAAC,CAAC,EACpJ,MAAO,CAACwhB,GAAaA,EAAU,CAAC,IAAM13I,EAAM,CAAC,GAAK03I,EAAU,CAAC,IAAM13I,EAAM,CAAC,CAC5E,EACA+4I,EAAe,UAAU,YAAc,SAAUqD,EAAa,CAC5D,IAAIC,EAAc,KAAK,cACnBh6B,EAAa,KAAK,YAClBi6B,EAAiB37I,GAAI0hH,EAAW,MAAA,CAAO,EACvC1/I,EAAO,KAAK,MAChBuE,EAAK,CAAC,EAAG,CAAC,EAAG,SAAUo7I,EAAa,CAE9B,IAAAwI,EAASuxB,EAAY,QAAQ/5B,CAAW,EACxCi6B,EAAe,KAAK,cACxBzxB,EAAO,KAAK,CACV,OAAQyxB,EAAe,EACvB,OAAQA,EAAe,EAGvB,EAAGl6B,EAAWC,CAAW,GAAKA,EAAc,GAAK,GACjD,EAAG3/I,EAAK,CAAC,EAAI,EAAI45K,EAAe,CAAA,CACjC,GACA,IAAI,EAEPF,EAAY,OAAO,SAAS,CAC1B,EAAGC,EAAe,CAAC,EACnB,EAAG,EACH,MAAOA,EAAe,CAAC,EAAIA,EAAe,CAAC,EAC3C,OAAQ35K,EAAK,CAAC,CAAA,CACf,EACD,IAAIu5K,EAAa,CACf,EAAGI,EAAe,CAAC,EACnB,MAAOA,EAAe,CAAC,EAAIA,EAAe,CAAC,CAC7C,EAEID,EAAY,aACFA,EAAA,WAAW,SAASH,CAAU,EAC9BG,EAAA,SAAS,SAASH,CAAU,EAExCG,EAAY,SAAS,gBAAgB,EACzBA,EAAA,gBAAkBA,EAAY,eAAe,KAAK,IAAKH,EAAW,EAAIA,EAAW,MAAQ,CAAC,GAKxG,QAFIM,EAAiBH,EAAY,eAC7BI,EAAe,CAAC,EAAGH,EAAe,CAAC,EAAGA,EAAe,CAAC,EAAG35K,EAAK,CAAC,CAAC,EAC3DF,EAAI,EAAGA,EAAI+5K,EAAe,OAAQ/5K,IAAK,CAC1C,IAAAi6K,EAAWF,EAAe/5K,CAAC,EAC3BmZ,EAAW8gK,EAAS,YAAY,EAC/B9gK,IACQA,EAAA,IAAIsiF,GACfw+E,EAAS,YAAY9gK,CAAQ,GAE/BA,EAAS,SAAS,CAChB,EAAG6gK,EAAah6K,CAAC,EACjB,EAAG,EACH,MAAOg6K,EAAah6K,EAAI,CAAC,EAAIg6K,EAAah6K,CAAC,EAC3C,OAAQE,EAAK,CAAC,CAAA,CACf,CAAA,CAEH,KAAK,gBAAgBy5K,CAAW,CAClC,EACArD,EAAe,UAAU,gBAAkB,SAAUqD,EAAa,CAChE,IAAI5oB,EAAgB,KAAK,cACrB6oB,EAAc,KAAK,cACnBjB,EAAeiB,EAAY,aAC3BjxG,EAAS,KAAK,QACd5O,EAAa,CAAC,GAAI,EAAE,EAGpB,GAAAg3F,EAAc,IAAI,YAAY,EAAG,CAC/B,IAAAiC,EAAYjC,EAAc,4BAA4B,EAC1D,GAAIiC,EAAW,CACT,IAAAvgG,EAAOugG,EAAU,aAAA,EAAe,KAChCz1H,EAAQ,KAAK,OACb28I,EAAeP,EAEjB3mB,EAAU,oBAAoB,CAC9B,MAAOz1H,EAAM,CAAC,EACd,IAAKA,EAAM,CAAC,CAAA,CACb,EAAE,YAAcy1H,EAAU,mBAAmB,EAC9Cj5F,EAAa,CAAC,KAAK,aAAamgH,EAAa,CAAC,EAAGznH,CAAI,EAAG,KAAK,aAAaynH,EAAa,CAAC,EAAGznH,CAAI,CAAC,CAAA,CAClG,CAEF,IAAI0nH,EAAoBj8I,GAAI,KAAK,YAAY,OAAO,EAC3Ck8I,EAAA,KAAK,KAAM,CAAC,EACZA,EAAA,KAAK,KAAM,CAAC,EACrB,SAASA,EAASv6B,EAAa,CAIzB,IAAAw6B,EAAel1B,GAAqBy0B,EAAY,QAAQ/5B,CAAW,EAAE,OAAQ,KAAK,KAAK,EACvFlpF,EAAY2uF,GAA2BzF,IAAgB,EAAI,QAAU,OAAQw6B,CAAY,EACzF5yK,EAAS,KAAK,aAAe,EAAI0uK,GACjCmE,EAAYrvB,GAAuB,CAACkvB,EAAkBt6B,CAAW,GAAKA,IAAgB,EAAI,CAACp4I,EAASA,GAAS,KAAK,MAAM,CAAC,EAAI,CAAC,EAAG4yK,CAAY,EACpI1B,EAAA94B,CAAW,EAAE,SAAS,CACjC,EAAGy6B,EAAU,CAAC,EACd,EAAGA,EAAU,CAAC,EACd,cAAe3xG,IAAWstG,GAAa,SAAWt/G,EAClD,MAAOgS,IAAWstG,GAAat/G,EAAY,SAC3C,KAAMoD,EAAW8lF,CAAW,CAAA,CAC7B,CAAA,CAEL,EACAy2B,EAAe,UAAU,aAAe,SAAUzyK,EAAO4uD,EAAM,CAC7D,IAAIs+F,EAAgB,KAAK,cACrBvjC,EAAiBujC,EAAc,IAAI,gBAAgB,EACnDwpB,EAAiBxpB,EAAc,IAAI,gBAAgB,GACnDwpB,GAAkB,MAAQA,IAAmB,UAC/CA,EAAiB9nH,EAAK,kBAAkB,GAE1C,IAAI+nH,EAAW32K,GAAS,MAAQ,MAAMA,CAAK,EAAI,GAE7C4uD,EAAK,OAAS,YAAcA,EAAK,OAAS,OAASA,EAAK,MAAM,SAAS,CACvE,MAAO,KAAK,MAAM5uD,CAAK,CAAA,CACxB,EAECA,EAAM,QAAQ,KAAK,IAAI02K,EAAgB,EAAE,CAAC,EAC5C,OAAOp1K,EAAWqoH,CAAc,EAAIA,EAAe3pH,EAAO22K,CAAQ,EAAIn1K,EAASmoH,CAAc,EAAIA,EAAe,QAAQ,UAAWgtD,CAAQ,EAAIA,CACjJ,EAIAlE,EAAe,UAAU,cAAgB,SAAUj4G,EAAY,CAC7D,IAAI46G,EAAc,KAAK,cAAc,IAAI,aAAa,GAAK,CAAC,EACxDwB,EAAaxB,EAAY,MAAQ,GACjCyB,EAAsB,KAAK,cAAc,SAAS,CAAC,WAAY,aAAa,CAAC,EAC7EC,EAAeD,EAAoB,IAAI,MAAM,GAAK,GAElDE,EAASv8G,GAAc,KAAK,UAAYs8G,EAAeF,EACvDxnH,EAAe,KAAK,cACpB0lH,EAAe1lH,EAAa,aAChC0lH,EAAa,CAAC,EAAE,KAAK,YAAa,CAACiC,CAAM,EACzCjC,EAAa,CAAC,EAAE,KAAK,YAAa,CAACiC,CAAM,EAE5B3nH,EAAA,YAAc,KAAK,IAAI2nH,EAAS,gBAAkB,eAAe,EAAE3nH,EAAa,WAAY,CAAC,CAC5G,EACAqjH,EAAe,UAAU,YAAc,SAAUz2B,EAAa71I,EAAIC,EAAIK,EAAO,CAC3E,KAAK,UAAY,GAEP8L,GAAK9L,EAAM,KAAK,EAE1B,IAAI+vK,EAAe,KAAK,cAAc,YAAY,kBAAkB,EAChEvjH,EAASm0F,GAAuB,CAACjhJ,EAAIC,CAAE,EAAGowK,EAAc,EAAI,EAC5DQ,EAAU,KAAK,gBAAgBh7B,EAAa/oF,EAAO,CAAC,CAAC,EACrDgkH,EAAW,KAAK,cAAc,IAAI,UAAU,EAC3C,KAAA,YAAY,CAACA,CAAQ,EAGfD,GAAAC,GAAY,KAAK,oBAAoB,EAAI,CACtD,EACAxE,EAAe,UAAU,WAAa,UAAY,CAChD,KAAK,UAAY,GACjB,KAAK,cAAc,EAAK,EAGxB,IAAIwE,EAAW,KAAK,cAAc,IAAI,UAAU,EAC/C,CAAAA,GAAY,KAAK,oBAAoB,EAAK,CAC7C,EACAxE,EAAe,UAAU,cAAgB,SAAU,EAAG,CACpD,IAAIp2K,EAAO,KAAK,MACZ66K,EAAa,KAAK,cAAc,YAAY,sBAAsB,EAAE,QAAS,EAAE,OAAO,EAC1F,GAAI,EAAAA,EAAW,CAAC,EAAI,GAAKA,EAAW,CAAC,EAAI76K,EAAK,CAAC,GAAK66K,EAAW,CAAC,EAAI,GAAKA,EAAW,CAAC,EAAI76K,EAAK,CAAC,GAG/F,KAAI0/I,EAAa,KAAK,YAClB3uI,GAAU2uI,EAAW,CAAC,EAAIA,EAAW,CAAC,GAAK,EAC3Ci7B,EAAU,KAAK,gBAAgB,MAAOE,EAAW,CAAC,EAAI9pK,CAAM,EAChE,KAAK,YAAY,EACN4pK,GAAA,KAAK,oBAAoB,EAAK,EAC3C,EACAvE,EAAe,UAAU,cAAgB,SAAU,EAAG,CACpD,IAAIhuK,EAAI,EAAE,QACNC,EAAI,EAAE,QACV,KAAK,YAAc,IAAIyyK,GAAc1yK,EAAGC,CAAC,EACzC,KAAK,UAAY,GACZ,KAAA,gBAAkB,CAAC,IAAI,IAE9B,EACA+tK,EAAe,UAAU,YAAc,SAAU,EAAG,CAC9C,GAAC,KAAK,UAGN,KAAA2E,EAAY,KAAK,cAAc,UAEnC,GADA,KAAK,UAAY,GACb,EAACA,EAGK,CAAAA,EAAA,KAAK,SAAU,EAAI,EAC7B,IAAIC,EAAaD,EAAU,MACvBE,EAAe,CAAC,IAAI,KAEpB,GAAA,EAAAA,EAAe,KAAK,gBAAkB,KAAO,KAAK,IAAID,EAAW,KAAK,EAAI,GAI1E,KAAAxB,EAAa,KAAK,eAAe,EACjCjmB,EAAgB,CAAC,EAAG,GAAG,EAC3B,KAAK,OAASv1H,GAAI,CAACb,GAAU69I,EAAW,EAAGxB,EAAYjmB,EAAe,EAAI,EAAGp2H,GAAU69I,EAAW,EAAIA,EAAW,MAAOxB,EAAYjmB,EAAe,EAAI,CAAC,CAAC,EACzJ,KAAK,YAAc,CAACynB,EAAW,EAAGA,EAAW,EAAIA,EAAW,KAAK,EACjE,KAAK,YAAY,EACjB,KAAK,oBAAoB,EAAK,IAChC,EACA5E,EAAe,UAAU,SAAW,SAAU,EAAG,CAC3C,KAAK,YAEGlgK,GAAK,EAAE,KAAK,EACtB,KAAK,iBAAiB,EAAE,QAAS,EAAE,OAAO,EAE9C,EACAkgK,EAAe,UAAU,iBAAmB,SAAU8E,EAAQC,EAAQ,CACpE,IAAIpoH,EAAe,KAAK,cACpB89F,EAAgB,KAAK,cACrBkqB,EAAYhoH,EAAa,UACxBgoH,IACSA,EAAAhoH,EAAa,UAAY,IAAIrX,GAAK,CAC5C,OAAQ,GACR,MAAOm1G,EAAc,SAAS,YAAY,EAAE,aAAa,CAAA,CAC1D,EACY99F,EAAA,YAAY,IAAIgoH,CAAS,GAE9BA,EAAA,KAAK,SAAU,EAAK,EAC9B,IAAIK,EAAa,KAAK,YAClBpE,EAAc,KAAK,cAAc,YACjCqE,EAAWrE,EAAY,sBAAsBkE,EAAQC,CAAM,EAC3DG,EAAatE,EAAY,sBAAsBoE,EAAW,EAAGA,EAAW,CAAC,EACzEp7K,EAAO,KAAK,MAChBq7K,EAAS,CAAC,EAAI,KAAK,IAAI,KAAK,IAAIr7K,EAAK,CAAC,EAAGq7K,EAAS,CAAC,CAAC,EAAG,CAAC,EACxDN,EAAU,SAAS,CACjB,EAAGO,EAAW,CAAC,EACf,EAAG,EACH,MAAOD,EAAS,CAAC,EAAIC,EAAW,CAAC,EACjC,OAAQt7K,EAAK,CAAC,CAAA,CACf,CACH,EAIAo2K,EAAe,UAAU,oBAAsB,SAAUwE,EAAU,CACjE,IAAIv9I,EAAQ,KAAK,OACjB,KAAK,IAAI,eAAe,CACtB,KAAM,WACN,KAAM,KAAK,IACX,WAAY,KAAK,cAAc,GAC/B,UAAWu9I,EAAWzE,GAA4B,KAClD,MAAO94I,EAAM,CAAC,EACd,IAAKA,EAAM,CAAC,CAAA,CACb,CACH,EACA+4I,EAAe,UAAU,eAAiB,UAAY,CAEhD,IAAA9nK,EACAitK,EAAmBjqB,GAA8B,KAAK,aAAa,EAAE,SACrE,GAAA,CAAChjJ,GAAQitK,EAAiB,OAAQ,CACpC,IAAIz2H,EAAWy2H,EAAiB,CAAC,EAAE,MAAM,iBAClCjtK,EAAAw2C,EAAS,SAAWA,EAAS,QAAQ,CAAA,CAE9C,GAAI,CAACx2C,EAAM,CACL,IAAA5N,EAAQ,KAAK,IAAI,SAAS,EAC1ByT,EAAS,KAAK,IAAI,UAAU,EACzB7F,EAAA,CACL,EAAG5N,EAAQ,GACX,EAAGyT,EAAS,GACZ,MAAOzT,EAAQ,GACf,OAAQyT,EAAS,EACnB,CAAA,CAEK,OAAA7F,CACT,EACA8nK,EAAe,KAAO,kBACfA,CAAA,EACPljB,EAAY,EACd,SAASqlB,GAAYiD,EAAS,CAG5B,IAAI37K,EAAM,CACR,EAAG,IACH,EAAG,IACH,OAAQ,QACR,MAAO,QACT,EACA,OAAOA,EAAI27K,CAAO,CACpB,CACA,SAAS5C,GAAUnwG,EAAQ,CAClB,OAAAA,IAAW,WAAa,YAAc,WAC/C,CCtwBO,SAAS0jE,GAAQC,EAAW,CACjCA,EAAU,uBAAuBspC,EAAe,EAChDtpC,EAAU,sBAAsBgqC,EAAc,EAC9CrgB,GAAc3pB,CAAS,CACzB,CCJO,SAASD,GAAQC,EAAW,CACjCvV,GAAI4kD,EAAqB,EACzB5kD,GAAI6kD,EAAqB,CAG3B,CC1CA,SAASC,GAAUpgJ,EAAI3kB,EAAS2Z,EAAK,CACjC,IAAIqrJ,EAAS17K,GAAY,aAAc,EACnCQ,EAAQkW,EAAQ,SAAU,EAC1BzC,EAASyC,EAAQ,UAAW,EAC5BilK,EAAcD,EAAO,MACzB,OAAIC,IACAA,EAAY,SAAW,WACvBA,EAAY,KAAO,IACnBA,EAAY,IAAM,IAClBA,EAAY,MAAQn7K,EAAQ,KAC5Bm7K,EAAY,OAAS1nK,EAAS,KAC9BynK,EAAO,aAAa,iBAAkBrgJ,CAAE,GAE5CqgJ,EAAO,MAAQl7K,EAAQ6vB,EACvBqrJ,EAAO,OAASznK,EAASoc,EAClBqrJ,CACX,CAEA,IAAIE,GAAS,SAAU1lK,EAAQ,CAC3BC,EAAUylK,EAAO1lK,CAAM,EACvB,SAAS0lK,EAAMvgJ,EAAI3kB,EAAS2Z,EAAK,CAC7B,IAAIja,EAAQF,EAAO,KAAK,IAAI,GAAK,KACjCE,EAAM,WAAa,GACnBA,EAAM,eAAiB,GACvBA,EAAM,IAAM,EACZA,EAAM,QAAU,GAChBA,EAAM,OAAS,CAAE,EACjBA,EAAM,YAAc,GACpBA,EAAM,OAAS,EACfA,EAAM,oBAAsB,EAC5BA,EAAM,QAAU,GAChBA,EAAM,iBAAmB,GACzBA,EAAM,OAAS,GACfA,EAAM,YAAc,EACpBA,EAAM,aAAe,EACrBA,EAAM,WAAa,EACnBA,EAAM,iBAAmB,KACzBA,EAAM,eAAiB,KACvB,IAAIzO,EACJ0oB,EAAMA,GAAOC,GACT,OAAO+K,GAAO,SACd1zB,EAAM8zK,GAAUpgJ,EAAI3kB,EAAS2Z,CAAG,EAE3BwrJ,EAAcxgJ,CAAE,IACrB1zB,EAAM0zB,EACNA,EAAK1zB,EAAI,IAEbyO,EAAM,GAAKilB,EACXjlB,EAAM,IAAMzO,EACZ,IAAIC,EAAWD,EAAI,MACnB,OAAIC,IACAk0K,GAAuBn0K,CAAG,EAC1BA,EAAI,cAAgB,UAAY,CAAE,MAAO,EAAQ,EACjDC,EAAS,QAAU,IACnBA,EAAS,OAAS,IAClBA,EAAS,YAAc,KAE3BwO,EAAM,QAAUM,EAChBN,EAAM,IAAMia,EACLja,CACf,CACI,OAAAwlK,EAAM,UAAU,gBAAkB,UAAY,CAC1C,OAAO,KAAK,WAAa,KAAK,YACjC,EACDA,EAAM,UAAU,WAAa,UAAY,CACrC,KAAK,iBAAmB,KAAK,aAC7B,KAAK,eAAiB,KAAK,UAC9B,EACDA,EAAM,UAAU,YAAc,UAAY,CACtC,KAAK,IAAM,KAAK,IAAI,WAAW,IAAI,EACnC,KAAK,IAAI,IAAM,KAAK,GACvB,EACDA,EAAM,UAAU,aAAe,UAAY,CACvC,KAAK,iBAAmB,EAC3B,EACDA,EAAM,UAAU,iBAAmB,UAAY,CAC3C,IAAIvrJ,EAAM,KAAK,IACf,KAAK,QAAUorJ,GAAU,QAAU,KAAK,GAAI,KAAK,QAASprJ,CAAG,EAC7D,KAAK,QAAU,KAAK,QAAQ,WAAW,IAAI,EACvCA,IAAQ,GACR,KAAK,QAAQ,MAAMA,EAAKA,CAAG,CAElC,EACDurJ,EAAM,UAAU,mBAAqB,SAAU3+J,EAAa8+J,EAAU9rI,EAAWC,EAAY,CACzF,GAAI,KAAK,iBACL,YAAK,iBAAmB,GACjB,KAEX,IAAI8rI,EAAqB,CAAE,EACvBC,EAAsB,KAAK,oBAC3BC,EAAO,GACPC,EAAc,IAAInoK,GAAa,EAAG,EAAG,EAAG,CAAC,EAC7C,SAASooK,EAAmBhuK,EAAM,CAC9B,GAAI,GAACA,EAAK,SAAU,GAAIA,EAAK,OAAM,GAGnC,GAAI4tK,EAAmB,SAAW,EAAG,CACjC,IAAIpmH,EAAe,IAAI5hD,GAAa,EAAG,EAAG,EAAG,CAAC,EAC9C4hD,EAAa,KAAKxnD,CAAI,EACtB4tK,EAAmB,KAAKpmH,CAAY,CACpD,KACiB,CAID,QAHIymH,EAAW,GACXC,EAAe,IACfC,EAAqB,EAChB38K,EAAI,EAAGA,EAAIo8K,EAAmB,OAAQ,EAAEp8K,EAAG,CAChD,IAAI48K,EAAaR,EAAmBp8K,CAAC,EACrC,GAAI48K,EAAW,UAAUpuK,CAAI,EAAG,CAC5B,IAAIquK,EAAgB,IAAIzoK,GAAa,EAAG,EAAG,EAAG,CAAC,EAC/CyoK,EAAc,KAAKD,CAAU,EAC7BC,EAAc,MAAMruK,CAAI,EACxB4tK,EAAmBp8K,CAAC,EAAI68K,EACxBJ,EAAW,GACX,KACxB,SAC6BH,EAAM,CACXC,EAAY,KAAK/tK,CAAI,EACrB+tK,EAAY,MAAMK,CAAU,EAC5B,IAAIE,EAAQtuK,EAAK,MAAQA,EAAK,OAC1BuuK,EAAQH,EAAW,MAAQA,EAAW,OACtCI,EAAcT,EAAY,MAAQA,EAAY,OAC9CU,EAAYD,EAAcF,EAAQC,EAClCE,EAAYP,IACZA,EAAeO,EACfN,EAAqB38K,EAEjD,CACA,CAKgB,GAJIs8K,IACAF,EAAmBO,CAAkB,EAAE,MAAMnuK,CAAI,EACjDiuK,EAAW,IAEX,CAACA,EAAU,CACX,IAAIzmH,EAAe,IAAI5hD,GAAa,EAAG,EAAG,EAAG,CAAC,EAC9C4hD,EAAa,KAAKxnD,CAAI,EACtB4tK,EAAmB,KAAKpmH,CAAY,CACxD,CACqBsmH,IACDA,EAAOF,EAAmB,QAAUC,EAExD,CACA,CACQ,QAASr8K,EAAI,KAAK,aAAcA,EAAI,KAAK,WAAY,EAAEA,EAAG,CACtD,IAAIqN,EAAKgQ,EAAYrd,CAAC,EACtB,GAAIqN,EAAI,CACJ,IAAI6vK,EAAc7vK,EAAG,gBAAgBgjC,EAAWC,EAAY,GAAM,EAAI,EAClE6sI,EAAW9vK,EAAG,eAAkBA,EAAG,QAAUuP,IAAe,CAACsgK,GAC3D7vK,EAAG,iBAAgB,EACnB,KACF8vK,GACAX,EAAmBW,CAAQ,EAE/B,IAAIC,EAAUF,IAAiB7vK,EAAG,QAAUuP,IAAe,CAACvP,EAAG,cACzDA,EAAG,aAAY,EACf,KACF+vK,GACAZ,EAAmBY,CAAO,CAE9C,CACA,CACQ,QAASp9K,EAAI,KAAK,iBAAkBA,EAAI,KAAK,eAAgB,EAAEA,EAAG,CAC9D,IAAIqN,EAAK8uK,EAASn8K,CAAC,EACfk9K,EAAc7vK,GAAMA,EAAG,gBAAgBgjC,EAAWC,EAAY,GAAM,EAAI,EAC5E,GAAIjjC,IAAO,CAAC6vK,GAAe,CAAC7vK,EAAG,OAASA,EAAG,aAAc,CACrD,IAAI8vK,EAAW9vK,EAAG,iBAAkB,EAChC8vK,GACAX,EAAmBW,CAAQ,CAE/C,CACA,CACQ,IAAIE,EACJ,EAAG,CACCA,EAAmB,GACnB,QAASr9K,EAAI,EAAGA,EAAIo8K,EAAmB,QAAS,CAC5C,GAAIA,EAAmBp8K,CAAC,EAAE,SAAU,CAChCo8K,EAAmB,OAAOp8K,EAAG,CAAC,EAC9B,QACpB,CACgB,QAASkM,EAAIlM,EAAI,EAAGkM,EAAIkwK,EAAmB,QACnCA,EAAmBp8K,CAAC,EAAE,UAAUo8K,EAAmBlwK,CAAC,CAAC,GACrDmxK,EAAmB,GACnBjB,EAAmBp8K,CAAC,EAAE,MAAMo8K,EAAmBlwK,CAAC,CAAC,EACjDkwK,EAAmB,OAAOlwK,EAAG,CAAC,GAG9BA,IAGRlM,GAChB,CACA,OAAiBq9K,GACT,YAAK,YAAcjB,EACZA,CACV,EACDJ,EAAM,UAAU,mBAAqB,UAAY,CAC7C,OAAQ,KAAK,aAAe,CAAA,GAAI,MAAO,CAC1C,EACDA,EAAM,UAAU,OAAS,SAAUp7K,EAAOyT,EAAQ,CAC9C,IAAIoc,EAAM,KAAK,IACX1oB,EAAM,KAAK,IACXC,EAAWD,EAAI,MACfu1K,EAAU,KAAK,QACft1K,IACAA,EAAS,MAAQpH,EAAQ,KACzBoH,EAAS,OAASqM,EAAS,MAE/BtM,EAAI,MAAQnH,EAAQ6vB,EACpB1oB,EAAI,OAASsM,EAASoc,EAClB6sJ,IACAA,EAAQ,MAAQ18K,EAAQ6vB,EACxB6sJ,EAAQ,OAASjpK,EAASoc,EACtBA,IAAQ,GACR,KAAK,QAAQ,MAAMA,EAAKA,CAAG,EAGtC,EACDurJ,EAAM,UAAU,MAAQ,SAAUuB,EAAUC,EAAYC,EAAc,CAClE,IAAI11K,EAAM,KAAK,IACXoD,EAAM,KAAK,IACXvK,EAAQmH,EAAI,MACZsM,EAAStM,EAAI,OACjBy1K,EAAaA,GAAc,KAAK,WAChC,IAAIE,EAAiB,KAAK,YAAc,CAACH,EACrCI,EAAiB,KAAK,eACtBltJ,EAAM,KAAK,IACX5D,EAAO,KACP6wJ,IACK,KAAK,SACN,KAAK,iBAAkB,EAE3B,KAAK,QAAQ,yBAA2B,OACxC,KAAK,QAAQ,UAAU31K,EAAK,EAAG,EAAGnH,EAAQ6vB,EAAKpc,EAASoc,CAAG,GAE/D,IAAI6sJ,EAAU,KAAK,QACnB,SAASM,EAAQt1K,EAAGC,EAAG3H,EAAOyT,EAAQ,CAElC,GADAlJ,EAAI,UAAU7C,EAAGC,EAAG3H,EAAOyT,CAAM,EAC7BmpK,GAAcA,IAAe,cAAe,CAC5C,IAAIK,EAA8B,OAClC,GAAIC,GAAsBN,CAAU,EAAG,CACnC,IAAIO,EAAcP,EAAW,QAAWA,EAAW,UAAY58K,GACxD48K,EAAW,WAAanpK,EAC/BwpK,EAA8BE,GACvBP,EAAW,kBACX35E,GAAkB14F,EAAKqyK,EAAY,CAClC,EAAG,EACH,EAAG,EACH,MAAO58K,EACP,OAAQyT,CACpC,CAAyB,EACLmpK,EAAW,iBAAmBK,EAC9BL,EAAW,QAAU58K,EACrB48K,EAAW,SAAWnpK,CAC1C,MACyB2pK,GAA0BR,CAAU,IACzCA,EAAW,OAASA,EAAW,QAAU/sJ,EACzC+sJ,EAAW,OAASA,EAAW,QAAU/sJ,EACzCotJ,EAA8Bx4E,GAAoBl6F,EAAKqyK,EAAY,CAC/D,MAAO,UAAY,CACf3wJ,EAAK,aAAc,EACnBA,EAAK,QAAQ,QAAS,CAClD,CACA,CAAqB,GAEL1hB,EAAI,KAAM,EACVA,EAAI,UAAY0yK,GAA+BL,EAC/CryK,EAAI,SAAS7C,EAAGC,EAAG3H,EAAOyT,CAAM,EAChClJ,EAAI,QAAS,CAC7B,CACgBuyK,IACAvyK,EAAI,KAAM,EACVA,EAAI,YAAcwyK,EAClBxyK,EAAI,UAAUmyK,EAASh1K,EAAGC,EAAG3H,EAAOyT,CAAM,EAC1ClJ,EAAI,QAAS,EAE7B,CAEY,CAACsyK,GAAgBC,EACjBE,EAAQ,EAAG,EAAGh9K,EAAOyT,CAAM,EAEtBopK,EAAa,QAClBvmK,EAAUumK,EAAc,SAAUjvK,EAAM,CACpCovK,EAAQpvK,EAAK,EAAIiiB,EAAKjiB,EAAK,EAAIiiB,EAAKjiB,EAAK,MAAQiiB,EAAKjiB,EAAK,OAASiiB,CAAG,CACvF,CAAa,CAER,EACMurJ,CACX,EAAE5xK,EAAQ,EC/RN6zK,GAAqB,IACrBC,GAAgB,OAChBC,GAA2B,IAC3BC,GAAkB,KACtB,SAASC,GAAavmK,EAAO,CACzB,OAAKA,EAGDA,EAAM,YACC,GAEP,SAAQA,EAAM,QAAY,YACvB,OAAQA,EAAM,SAAa,YANvB,EAUf,CACA,SAASwmK,GAAW19K,EAAOyT,EAAQ,CAC3B,IAAAkqK,EAAU,SAAS,cAAc,KAAK,EAC1C,OAAAA,EAAQ,MAAM,QAAU,CACpB,oBACA,SAAW39K,EAAQ,KACnB,UAAYyT,EAAS,KACrB,YACA,WACA,gBAAA,EACF,KAAK,GAAG,EAAI,IACPkqK,CACX,CACA,IAAIC,GAAiB,UAAY,CAC7B,SAASA,EAAc/tK,EAAMoG,EAASmM,EAAMyY,EAAI,CAC5C,KAAK,KAAO,SACZ,KAAK,YAAc,CAAC,EACpB,KAAK,iBAAmB,CAAC,EACzB,KAAK,QAAU,CAAC,EAChB,KAAK,aAAe,CAAC,EACrB,KAAK,0BAA4B,GACjC,KAAK,KAAO,SACZ,IAAIgjJ,EAAe,CAAChuK,EAAK,UAClBA,EAAK,SAAS,gBAAkB,SAClC,KAAA,MAAQuS,EAAO07J,EAAY,CAAI,EAAA17J,GAAQ,EAAE,EACzC,KAAA,IAAMA,EAAK,kBAAoB0N,GACpC,KAAK,cAAgB+tJ,EACrB,KAAK,KAAOhuK,EACZ,IAAIkuK,EAAYluK,EAAK,MACjBkuK,IACAzC,GAAuBzrK,CAAI,EAC3BA,EAAK,UAAY,IAErB,KAAK,QAAUoG,EACf,IAAI+nK,EAAa,KAAK,YACtB,KAAK,iBAAmB,CAAC,EACzB,IAAIC,EAAS,KAAK,QAClB,GAAKJ,EAMA,CACD,IAAIK,EAAaruK,EACb7P,EAAQk+K,EAAW,MACnBzqK,EAASyqK,EAAW,OACpB97J,EAAK,OAAS,OACdpiB,EAAQoiB,EAAK,OAEbA,EAAK,QAAU,OACf3O,EAAS2O,EAAK,QAEb,KAAA,IAAMA,EAAK,kBAAoB,EACzB87J,EAAA,MAAQl+K,EAAQ,KAAK,IACrBk+K,EAAA,OAASzqK,EAAS,KAAK,IAClC,KAAK,OAASzT,EACd,KAAK,QAAUyT,EACf,IAAI0qK,EAAY,IAAI/C,GAAM8C,EAAY,KAAM,KAAK,GAAG,EACpDC,EAAU,YAAc,GACxBA,EAAU,YAAY,EACtBF,EAAOX,EAAa,EAAIa,EACxBA,EAAU,OAASb,GACnBU,EAAW,KAAKV,EAAa,EAC7B,KAAK,SAAWztK,CAAA,KA3BD,CACf,KAAK,OAASwzF,GAAQxzF,EAAM,EAAGuS,CAAI,EACnC,KAAK,QAAUihF,GAAQxzF,EAAM,EAAGuS,CAAI,EACpC,IAAIu7J,EAAU,KAAK,SAAWD,GAAW,KAAK,OAAQ,KAAK,OAAO,EAClE7tK,EAAK,YAAY8tK,CAAO,CAAA,CAwB5B,CAEJC,OAAAA,EAAc,UAAU,QAAU,UAAY,CACnC,MAAA,QACX,EACAA,EAAc,UAAU,eAAiB,UAAY,CACjD,OAAO,KAAK,aAChB,EACAA,EAAc,UAAU,gBAAkB,UAAY,CAClD,OAAO,KAAK,QAChB,EACAA,EAAc,UAAU,sBAAwB,UAAY,CACpD,IAAAQ,EAAe,KAAK,gBAAgB,EACxC,GAAIA,EACO,MAAA,CACH,WAAYA,EAAa,YAAc,EACvC,UAAWA,EAAa,WAAa,CACzC,CAER,EACAR,EAAc,UAAU,QAAU,SAAUS,EAAU,CAClD,IAAIjnK,EAAO,KAAK,QAAQ,eAAe,EAAI,EACvCmkK,EAAW,KAAK,iBAChByC,EAAa,KAAK,YACjB,KAAA,UAAY,KAAK,OAAO,EAC7B,KAAK,WAAW5mK,EAAMmkK,EAAU8C,EAAU,KAAK,SAAS,EACxD,QAASj/K,EAAI,EAAGA,EAAI4+K,EAAW,OAAQ5+K,IAAK,CACpC,IAAA+0G,EAAI6pE,EAAW5+K,CAAC,EAChB8X,EAAQ,KAAK,QAAQi9F,CAAC,EAC1B,GAAI,CAACj9F,EAAM,aAAeA,EAAM,QAAS,CACrC,IAAI0lK,EAAax9K,IAAM,EAAI,KAAK,iBAAmB,KACnD8X,EAAM,QAAQ0lK,CAAU,CAAA,CAC5B,CAEA,OAAA,KAAK,MAAM,eACN,KAAA,iBAAmBxlK,EAAK,MAAM,GAEhC,IACX,EACAwmK,EAAc,UAAU,aAAe,UAAY,CAC/C,KAAK,gBAAgB,KAAK,QAAQ,eAAe,EAAK,CAAC,CAC3D,EACAA,EAAc,UAAU,gBAAkB,SAAUxmK,EAAM,CACtD,IAAItV,EAAMsV,EAAK,OACXknK,EAAa,KAAK,YAEtB,GADAA,GAAcA,EAAW,MAAM,EAC3B,EAACx8K,EASL,SANIisB,EAAQ,CACR,QAAS,GACT,UAAW,KAAK,OAChB,WAAY,KAAK,OACrB,EACIxjB,EACKnL,EAAI,EAAGA,EAAI0C,EAAK1C,IAAK,CACtB,IAAAqN,EAAK2K,EAAKhY,CAAC,EACXqN,EAAG,YACE6xK,IACDA,EAAa,KAAK,YAAc,KAAK,SAASjB,EAAkB,GAE/D9yK,IACDA,EAAM+zK,EAAW,IACjB/zK,EAAI,KAAK,GAEbg9F,GAAMh9F,EAAKkC,EAAIshB,EAAO3uB,IAAM0C,EAAM,CAAC,EACvC,CAEAyI,GACAA,EAAI,QAAQ,EAEpB,EACAqzK,EAAc,UAAU,cAAgB,UAAY,CACzC,OAAA,KAAK,SAASP,EAAkB,CAC3C,EACAO,EAAc,UAAU,SAAW,SAAUrzK,EAAKkC,EAAI,CAClD66F,GAAY/8F,EAAKkC,CAAE,CACvB,EACAmxK,EAAc,UAAU,WAAa,SAAUxmK,EAAMmkK,EAAU8C,EAAUE,EAAU,CAC3E,GAAA,KAAK,YAAcA,EAGvB,CAAAF,EAAWA,GAAY,GACvB,KAAK,mBAAmBjnK,CAAI,EACxB,IAAA6sB,EAAK,KAAK,aAAa7sB,EAAMmkK,EAAU8C,CAAQ,EAAGtxJ,EAAWkX,EAAG,SAAUu6I,EAAoBv6I,EAAG,kBAOrG,GANI,KAAK,2BACL,KAAK,mBAAmB,EAExBu6I,GACA,KAAK,gBAAgBpnK,CAAI,EAExB2V,EAOI,KAAA,UAAU,SAAU7V,EAAO,CACtBA,EAAA,YAAcA,EAAM,WAAW,CAAA,CACxC,MATU,CACX,IAAIgvJ,EAAS,KACb1oJ,GAAsB,UAAY,CAC9B0oJ,EAAO,WAAW9uJ,EAAMmkK,EAAU8C,EAAUE,CAAQ,CAAA,CACvD,CAAA,EAOT,EACAX,EAAc,UAAU,mBAAqB,UAAY,CACrD,IAAIrzK,EAAM,KAAK,SAAS+yK,EAAa,EAAE,IACnCt9K,EAAQ,KAAK,SAAS,MACtByT,EAAS,KAAK,SAAS,OAC3BlJ,EAAI,UAAU,EAAG,EAAGvK,EAAOyT,CAAM,EAC5B,KAAA,iBAAiB,SAAUyD,EAAO,CAC/BA,EAAM,SACN3M,EAAI,UAAU2M,EAAM,IAAK,EAAG,EAAGlX,EAAOyT,CAAM,CAChD,CACH,CACL,EACAmqK,EAAc,UAAU,aAAe,SAAUxmK,EAAMmkK,EAAU8C,EAAU,CAIvE,QAHIzoK,EAAQ,KACR6oK,EAAY,CAAC,EACbC,EAAe,KAAK,MAAM,aACrBC,EAAK,EAAGA,EAAK,KAAK,YAAY,OAAQA,IAAM,CAC7C,IAAAjzG,EAAS,KAAK,YAAYizG,CAAE,EAC5BznK,EAAQ,KAAK,QAAQw0D,CAAM,EAC3Bx0D,EAAM,aACHA,IAAU,KAAK,cACdA,EAAM,SAAWmnK,IACrBI,EAAU,KAAKvnK,CAAK,CACxB,CAiFJ,QA/EI6V,EAAW,GACXyxJ,EAAoB,GACpBI,EAAU,SAAU5jK,EAAG,CACnB9D,IAAAA,EAAQunK,EAAUzjK,CAAC,EACnBzQ,EAAM2M,EAAM,IACZ2lK,EAAe6B,GACZxnK,EAAM,mBAAmBE,EAAMmkK,EAAUsD,EAAO,OAAQA,EAAO,OAAO,EACzEvlK,EAAQ+kK,EAAWnnK,EAAM,aAAeA,EAAM,YAC9C4nK,EAAW,CAACT,GAAYnnK,EAAM,aAAe,KAAK,IAClDi4F,EAAY2vE,GAAY,KAAK,IAAI,EACjClC,EAAa1lK,EAAM,SAAW2nK,EAAO,YAAY,CAAC,EAChDA,EAAO,iBAAmB,KAC5B3nK,GAAAA,EAAM,eAAiBA,EAAM,WAC7BA,EAAM,MAAM,GAAO0lK,EAAYC,CAAY,UAEtCvjK,IAAUpC,EAAM,aAAc,CAC/B,IAAA6nK,EAAU3nK,EAAKkC,CAAK,GACpB,CAACylK,EAAQ,aAAe,CAACA,EAAQ,UAAYV,IAC7CnnK,EAAM,MAAM,GAAO0lK,EAAYC,CAAY,CAC/C,CAEAvjK,IAAU,KACV,QAAQ,MAAM,0CAA0C,EACxDA,EAAQpC,EAAM,cAEd,IAAA9X,EACA4/K,EAAU,SAAUC,EAAa,CACjC,IAAIlxJ,EAAQ,CACR,QAAS,GACT,WAAY,GACZ,OAAQ,KACR,UAAWnY,EAAM,OACjB,WAAYA,EAAM,OACtB,EACA,IAAKxW,EAAIka,EAAOla,EAAI8X,EAAM,WAAY9X,IAAK,CACnC,IAAAqN,EAAK2K,EAAKhY,CAAC,EAKf,GAJIqN,EAAG,YACiB+xK,EAAA,IAElB5oK,EAAA,WAAWnJ,EAAIyK,EAAOwnK,EAAcO,EAAalxJ,EAAO3uB,IAAM8X,EAAM,WAAa,CAAC,EACpF4nK,EAAU,CACN,IAAAI,EAAQ,KAAK,IAAA,EAAQ/vE,EACzB,GAAI+vE,EAAQ,GACR,KACJ,CACJ,CAEAnxJ,EAAM,iBACNxjB,EAAI,QAAQ,CAEpB,EACA,GAAIsyK,EACI,GAAAA,EAAa,SAAW,EACxBz9K,EAAI8X,EAAM,eAIV,SADI2Y,EAAMgvJ,EAAO,IACRjnK,EAAI,EAAGA,EAAIilK,EAAa,OAAQ,EAAEjlK,EAAG,CACtC,IAAAhK,EAAOivK,EAAajlK,CAAC,EACzBrN,EAAI,KAAK,EACTA,EAAI,UAAU,EACdA,EAAI,KAAKqD,EAAK,EAAIiiB,EAAKjiB,EAAK,EAAIiiB,EAAKjiB,EAAK,MAAQiiB,EAAKjiB,EAAK,OAASiiB,CAAG,EACxEtlB,EAAI,KAAK,EACTy0K,EAAQpxK,CAAI,EACZrD,EAAI,QAAQ,CAAA,MAKpBA,EAAI,KAAK,EACDy0K,EAAA,EACRz0K,EAAI,QAAQ,EAEhB2M,EAAM,YAAc9X,EAChB8X,EAAM,YAAcA,EAAM,aACf6V,EAAA,GAEnB,EACI8xJ,EAAS,KACJ7jK,EAAI,EAAGA,EAAIyjK,EAAU,OAAQzjK,IAClC4jK,EAAQ5jK,CAAC,EAEb,OAAI9c,EAAI,KACJoY,EAAU,KAAK,QAAS,SAAUY,EAAO,CACjCA,GAASA,EAAM,KAAOA,EAAM,IAAI,MAChCA,EAAM,IAAI,KAAK,CACnB,CACH,EAEE,CACH,SAAA6V,EACA,kBAAAyxJ,CACJ,CACJ,EACAZ,EAAc,UAAU,WAAa,SAAUnxK,EAAI0yK,EAAcT,EAAcO,EAAalxJ,EAAOy5E,EAAQ,CACvG,IAAIj9F,EAAM40K,EAAa,IACvB,GAAIT,EAAc,CACV,IAAAruI,EAAY5jC,EAAG,aAAa,GAC5B,CAACwyK,GAAe5uI,GAAaA,EAAU,UAAU4uI,CAAW,KACtD13E,GAAAh9F,EAAKkC,EAAIshB,EAAOy5E,CAAM,EAC5B/6F,EAAG,iBAAiB4jC,CAAS,EACjC,MAGMk3D,GAAAh9F,EAAKkC,EAAIshB,EAAOy5E,CAAM,CAEpC,EACAo2E,EAAc,UAAU,SAAW,SAAUlyG,EAAQ0zG,EAAS,CACtD,KAAK,eAAiB,CAAC,KAAK,4BACnB1zG,EAAA4xG,IAET,IAAApmK,EAAQ,KAAK,QAAQw0D,CAAM,EAC/B,OAAKx0D,IACDA,EAAQ,IAAIkkK,GAAM,MAAQ1vG,EAAQ,KAAM,KAAK,GAAG,EAChDx0D,EAAM,OAASw0D,EACfx0D,EAAM,YAAc,GAChB,KAAK,aAAaw0D,CAAM,EACxB2zG,EAAWnoK,EAAO,KAAK,aAAaw0D,CAAM,EAAG,EAAI,EAE5C,KAAK,aAAaA,EAAS6xG,EAAwB,GACxD8B,EAAWnoK,EAAO,KAAK,aAAaw0D,EAAS6xG,EAAwB,EAAG,EAAI,EAE5E6B,IACAloK,EAAM,QAAUkoK,GAEf,KAAA,YAAY1zG,EAAQx0D,CAAK,EAC9BA,EAAM,YAAY,GAEfA,CACX,EACA0mK,EAAc,UAAU,YAAc,SAAUlyG,EAAQx0D,EAAO,CAC3D,IAAIooK,EAAY,KAAK,QACjBtB,EAAa,KAAK,YAClBl8K,EAAMk8K,EAAW,OACjBL,EAAU,KAAK,SACf4B,EAAY,KACZngL,EAAI,GACJ,GAAA,CAAAkgL,EAAU5zG,CAAM,GAMf+xG,GAAavmK,CAAK,EAMvB,IAAIpV,EAAM,GAAK4pE,EAASsyG,EAAW,CAAC,EAAG,CACnC,IAAK5+K,EAAI,EAAGA,EAAI0C,EAAM,GACd,EAAAk8K,EAAW5+K,CAAC,EAAIssE,GACbsyG,EAAW5+K,EAAI,CAAC,EAAIssE,GAFNtsE,IACjB,CAKImgL,EAAAD,EAAUtB,EAAW5+K,CAAC,CAAC,CAAA,CAInC,GAFJ4+K,EAAW,OAAO5+K,EAAI,EAAG,EAAGssE,CAAM,EAClC4zG,EAAU5zG,CAAM,EAAIx0D,EAChB,CAACA,EAAM,QACP,GAAIqoK,EAAW,CACX,IAAIC,EAAUD,EAAU,IACpBC,EAAQ,YACR7B,EAAQ,aAAazmK,EAAM,IAAKsoK,EAAQ,WAAW,EAG3C7B,EAAA,YAAYzmK,EAAM,GAAG,CACjC,MAGIymK,EAAQ,WACRA,EAAQ,aAAazmK,EAAM,IAAKymK,EAAQ,UAAU,EAG1CA,EAAA,YAAYzmK,EAAM,GAAG,EAInCA,EAAA,UAAYA,EAAM,QAAU,MACtC,EACA0mK,EAAc,UAAU,UAAY,SAAU75K,EAAIC,EAAS,CAEvD,QADIg6K,EAAa,KAAK,YACb5+K,EAAI,EAAGA,EAAI4+K,EAAW,OAAQ5+K,IAAK,CACpC,IAAA+0G,EAAI6pE,EAAW5+K,CAAC,EACpB2E,EAAG,KAAKC,EAAS,KAAK,QAAQmwG,CAAC,EAAGA,CAAC,CAAA,CAE3C,EACAypE,EAAc,UAAU,iBAAmB,SAAU75K,EAAIC,EAAS,CAE9D,QADIg6K,EAAa,KAAK,YACb5+K,EAAI,EAAGA,EAAI4+K,EAAW,OAAQ5+K,IAAK,CACpC,IAAA+0G,EAAI6pE,EAAW5+K,CAAC,EAChB8X,EAAQ,KAAK,QAAQi9F,CAAC,EACtBj9F,EAAM,aACHnT,EAAA,KAAKC,EAASkT,EAAOi9F,CAAC,CAC7B,CAER,EACAypE,EAAc,UAAU,eAAiB,SAAU75K,EAAIC,EAAS,CAE5D,QADIg6K,EAAa,KAAK,YACb5+K,EAAI,EAAGA,EAAI4+K,EAAW,OAAQ5+K,IAAK,CACpC,IAAA+0G,EAAI6pE,EAAW5+K,CAAC,EAChB8X,EAAQ,KAAK,QAAQi9F,CAAC,EACrBj9F,EAAM,aACJnT,EAAA,KAAKC,EAASkT,EAAOi9F,CAAC,CAC7B,CAER,EACAypE,EAAc,UAAU,UAAY,UAAY,CAC5C,OAAO,KAAK,OAChB,EACAA,EAAc,UAAU,mBAAqB,SAAUxmK,EAAM,CACpD,KAAA,iBAAiB,SAAUF,EAAOi9F,EAAG,CACtCj9F,EAAM,QAAUA,EAAM,OAAS,EAAA,CAClC,EACD,SAASuoK,EAAgBniK,EAAK,CACtBiiK,IACIA,EAAU,aAAejiK,IACzBiiK,EAAU,QAAU,IAExBA,EAAU,WAAajiK,EAC3B,CAEJ,GAAI,KAAK,cACL,QAAS0qF,EAAM,EAAGA,EAAM5wF,EAAK,OAAQ4wF,IAAO,CACpC,IAAAv7F,EAAK2K,EAAK4wF,CAAG,EACb,GAAAv7F,EAAG,SAAW2K,EAAK4wF,EAAM,CAAC,EAAE,QAAUv7F,EAAG,YAAa,CACtD,KAAK,0BAA4B,GACjC,KAAA,CACJ,CAGR,IAAI8yK,EAAY,KACZG,EAAwB,EACxBC,EACAvgL,EACJ,IAAKA,EAAI,EAAGA,EAAIgY,EAAK,OAAQhY,IAAK,CAC1B,IAAAqN,EAAK2K,EAAKhY,CAAC,EACXssE,EAASj/D,EAAG,OACZyK,EAAQ,OACRyoK,IAAej0G,IACFi0G,EAAAj0G,EACWg0G,EAAA,GAExBjzK,EAAG,aACHyK,EAAQ,KAAK,SAASw0D,EAAS8xG,GAAiB,KAAK,yBAAyB,EAC9EtmK,EAAM,YAAc,GACIwoK,EAAA,GAGhBxoK,EAAA,KAAK,SAASw0D,GAAUg0G,EAAwB,EAAInC,GAA2B,GAAI,KAAK,yBAAyB,EAExHrmK,EAAM,aACP0oK,GAAc,UAAYl0G,EAAS,kCAAoCx0D,EAAM,EAAE,EAE/EA,IAAUqoK,IACVroK,EAAM,OAAS,GACXA,EAAM,eAAiB9X,IACvB8X,EAAM,QAAU,IAEpBA,EAAM,aAAe9X,EAChB8X,EAAM,YAIPA,EAAM,YAAc,GAHpBA,EAAM,YAAc9X,EAKxBqgL,EAAgBrgL,CAAC,EACLmgL,EAAAroK,GAEXzK,EAAG,QAAUuP,IAAe,CAACvP,EAAG,YACjCyK,EAAM,QAAU,GACZA,EAAM,aAAeA,EAAM,YAAc,IACzCA,EAAM,YAAc9X,GAE5B,CAEJqgL,EAAgBrgL,CAAC,EACZ,KAAA,iBAAiB,SAAU8X,EAAOi9F,EAAG,CAClC,CAACj9F,EAAM,QAAUA,EAAM,gBAAA,EAAoB,IAC3CA,EAAM,QAAU,GAChBA,EAAM,aAAeA,EAAM,WAAaA,EAAM,YAAc,GAE5DA,EAAM,SAAWA,EAAM,YAAc,IACrCA,EAAM,YAAcA,EAAM,aAC9B,CACH,CACL,EACA0mK,EAAc,UAAU,MAAQ,UAAY,CACnC,YAAA,iBAAiB,KAAK,WAAW,EAC/B,IACX,EACAA,EAAc,UAAU,YAAc,SAAU1mK,EAAO,CACnDA,EAAM,MAAM,CAChB,EACA0mK,EAAc,UAAU,mBAAqB,SAAUjpJ,EAAiB,CACpE,KAAK,iBAAmBA,EACxBre,EAAU,KAAK,QAAS,SAAUY,EAAO,CACrCA,EAAM,aAAa,CAAA,CACtB,CACL,EACA0mK,EAAc,UAAU,YAAc,SAAUlyG,EAAQ9vC,EAAQ,CAC5D,GAAIA,EAAQ,CACR,IAAIikJ,EAAc,KAAK,aAClBA,EAAYn0G,CAAM,EAInB2zG,EAAWQ,EAAYn0G,CAAM,EAAG9vC,EAAQ,EAAI,EAH5CikJ,EAAYn0G,CAAM,EAAI9vC,EAK1B,QAASx8B,EAAI,EAAGA,EAAI,KAAK,YAAY,OAAQA,IAAK,CAC1C,IAAA0gL,EAAU,KAAK,YAAY1gL,CAAC,EAChC,GAAI0gL,IAAYp0G,GAAUo0G,IAAYp0G,EAAS6xG,GAA0B,CACjE,IAAArmK,EAAQ,KAAK,QAAQ4oK,CAAO,EAChCT,EAAWnoK,EAAO2oK,EAAYn0G,CAAM,EAAG,EAAI,CAAA,CAC/C,CACJ,CAER,EACAkyG,EAAc,UAAU,SAAW,SAAUlyG,EAAQ,CACjD,IAAIuyG,EAAS,KAAK,QACdD,EAAa,KAAK,YAClB9mK,EAAQ+mK,EAAOvyG,CAAM,EACpBx0D,IAGLA,EAAM,IAAI,WAAW,YAAYA,EAAM,GAAG,EAC1C,OAAO+mK,EAAOvyG,CAAM,EACpBsyG,EAAW,OAAOzgK,EAAaygK,EAAYtyG,CAAM,EAAG,CAAC,EACzD,EACAkyG,EAAc,UAAU,OAAS,SAAU59K,EAAOyT,EAAQ,CAClD,GAAC,KAAK,SAAS,MAQd,CACD,IAAIkqK,EAAU,KAAK,SACnBA,EAAQ,MAAM,QAAU,OACxB,IAAIv7J,EAAO,KAAK,MACZvS,EAAO,KAAK,KAMhB,GALS7P,GAAA,OAASoiB,EAAK,MAAQpiB,GACrByT,GAAA,OAAS2O,EAAK,OAAS3O,GACzBzT,EAAAqjG,GAAQxzF,EAAM,EAAGuS,CAAI,EACpB3O,EAAA4vF,GAAQxzF,EAAM,EAAGuS,CAAI,EAC9Bu7J,EAAQ,MAAM,QAAU,GACpB,KAAK,SAAW39K,GAASyT,IAAW,KAAK,QAAS,CAC1CkqK,EAAA,MAAM,MAAQ39K,EAAQ,KACtB29K,EAAA,MAAM,OAASlqK,EAAS,KACvB,QAAAonB,KAAM,KAAK,QACZ,KAAK,QAAQ,eAAeA,CAAE,GAC9B,KAAK,QAAQA,CAAE,EAAE,OAAO76B,EAAOyT,CAAM,EAG7C,KAAK,QAAQ,EAAI,CAAA,CAErB,KAAK,OAASzT,EACd,KAAK,QAAUyT,CAAA,KA7BO,CAClB,GAAAzT,GAAS,MAAQyT,GAAU,KAC3B,OAEJ,KAAK,OAASzT,EACd,KAAK,QAAUyT,EACf,KAAK,SAAS6pK,EAAa,EAAE,OAAOt9K,EAAOyT,CAAM,CAAA,CAyB9C,OAAA,IACX,EACAmqK,EAAc,UAAU,WAAa,SAAUlyG,EAAQ,CAC/C,IAAAx0D,EAAQ,KAAK,QAAQw0D,CAAM,EAC3Bx0D,GACAA,EAAM,MAAM,CAEpB,EACA0mK,EAAc,UAAU,QAAU,UAAY,CAC1C,KAAK,KAAK,UAAY,GACtB,KAAK,KACD,KAAK,QACD,KAAK,SACD,KAAK,QAAU,IAC/B,EACAA,EAAc,UAAU,kBAAoB,SAAUx7J,EAAM,CAExD,GADAA,EAAOA,GAAQ,CAAC,EACZ,KAAK,eAAiB,CAAC,KAAK,mBACrB,OAAA,KAAK,QAAQk7J,EAAa,EAAE,IAEnC,IAAAyC,EAAa,IAAI3E,GAAM,QAAS,KAAMh5J,EAAK,YAAc,KAAK,GAAG,EACrE29J,EAAW,YAAY,EACvBA,EAAW,MAAM,GAAO39J,EAAK,iBAAmB,KAAK,gBAAgB,EACrE,IAAI7X,EAAMw1K,EAAW,IACjB,GAAA39J,EAAK,YAAc,KAAK,IAAK,CAC7B,KAAK,QAAQ,EACT,IAAA49J,EAAUD,EAAW,IAAI,MACzBE,EAAWF,EAAW,IAAI,OACzB,KAAA,UAAU,SAAU7oK,EAAO,CACxBA,EAAM,YACN3M,EAAI,UAAU2M,EAAM,IAAK,EAAG,EAAG8oK,EAASC,CAAQ,EAE3C/oK,EAAM,iBACX3M,EAAI,KAAK,EACT2M,EAAM,eAAe3M,CAAG,EACxBA,EAAI,QAAQ,EAChB,CACH,CAAA,KASD,SANIwjB,EAAQ,CACR,QAAS,GACT,UAAW,KAAK,OAChB,WAAY,KAAK,OACrB,EACItR,EAAc,KAAK,QAAQ,eAAe,EAAI,EACzCrd,EAAI,EAAG0C,EAAM2a,EAAY,OAAQrd,EAAI0C,EAAK1C,IAAK,CAChD,IAAAqN,EAAKgQ,EAAYrd,CAAC,EACtBmoG,GAAMh9F,EAAKkC,EAAIshB,EAAO3uB,IAAM0C,EAAM,CAAC,CAAA,CAG3C,OAAOi+K,EAAW,GACtB,EACAnC,EAAc,UAAU,SAAW,UAAY,CAC3C,OAAO,KAAK,MAChB,EACAA,EAAc,UAAU,UAAY,UAAY,CAC5C,OAAO,KAAK,OAChB,EACOA,CACX,EAAE,ECllBK,SAASnyC,GAAQC,EAAW,CACjCA,EAAU,gBAAgB,SAAUkyC,EAAa,CACnD","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263]}